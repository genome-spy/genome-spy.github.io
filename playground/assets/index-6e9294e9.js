var cre=Object.defineProperty;var ure=(i,e,t)=>e in i?cre(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var v_=(i,e,t)=>(ure(i,typeof e!="symbol"?e+"":e,t),t),QB=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var w_=(i,e,t)=>(QB(i,e,"read from private field"),t?t.call(i):e.get(i)),XB=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},hE=(i,e,t,n)=>(QB(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sS=window,hO=sS.ShadowRoot&&(sS.ShadyCSS===void 0||sS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Z$=Symbol(),JB=new WeakMap;let dre=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==Z$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(hO&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=JB.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&JB.set(t,e))}return e}toString(){return this.cssText}};const fre=i=>new dre(typeof i=="string"?i:i+"",void 0,Z$),gre=(i,e)=>{hO?i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const n=document.createElement("style"),s=sS.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=t.cssText,i.appendChild(n)})},e6=hO?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return fre(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var cE;const gx=window,t6=gx.trustedTypes,pre=t6?t6.emptyScript:"",i6=gx.reactiveElementPolyfillSupport,GT={toAttribute(i,e){switch(e){case Boolean:i=i?pre:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},Y$=(i,e)=>e!==i&&(e==e||i==i),uE={attribute:!0,type:String,converter:GT,reflect:!1,hasChanged:Y$};let wp=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;(t=this.h)!==null&&t!==void 0||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,n)=>{const s=this._$Ep(n,t);s!==void 0&&(this._$Ev.set(s,n),e.push(s))}),e}static createProperty(e,t=uE){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,n,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||uE}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of n)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)t.unshift(e6(s))}else e!==void 0&&t.push(e6(e));return t}static _$Ep(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return gre(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=uE){var s;const r=this.constructor._$Ep(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?n.converter:GT).toAttribute(t,n.type);this._$El=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var n;const s=this.constructor,r=s._$Ev.get(e);if(r!==void 0&&this._$El!==r){const o=s.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:GT;this._$El=r,this[r]=a.fromAttribute(t,o.type),this._$El=null}}requestUpdate(e,t,n){let s=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Y$)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,r)=>this[r]=s),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(n)):this._$Ek()}catch(s){throw t=!1,this._$Ek(),s}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var s;return(s=n.hostUpdated)===null||s===void 0?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};wp.finalized=!0,wp.elementProperties=new Map,wp.elementStyles=[],wp.shadowRootOptions={mode:"open"},i6==null||i6({ReactiveElement:wp}),((cE=gx.reactiveElementVersions)!==null&&cE!==void 0?cE:gx.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var dE;const px=window,Em=px.trustedTypes,n6=Em?Em.createPolicy("lit-html",{createHTML:i=>i}):void 0,$c=`lit$${(Math.random()+"").slice(9)}$`,Q$="?"+$c,mre=`<${Q$}>`,Am=document,Dv=(i="")=>Am.createComment(i),kv=i=>i===null||typeof i!="object"&&typeof i!="function",X$=Array.isArray,_re=i=>X$(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",y_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,s6=/-->/g,r6=/>/g,cd=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),o6=/'/g,a6=/"/g,J$=/^(?:script|style|textarea|title)$/i,bre=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),er=bre(1),Im=Symbol.for("lit-noChange"),_n=Symbol.for("lit-nothing"),l6=new WeakMap,Kp=Am.createTreeWalker(Am,129,null,!1),vre=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=y_;for(let l=0;l<t;l++){const h=i[l];let c,u,d=-1,f=0;for(;f<h.length&&(o.lastIndex=f,u=o.exec(h),u!==null);)f=o.lastIndex,o===y_?u[1]==="!--"?o=s6:u[1]!==void 0?o=r6:u[2]!==void 0?(J$.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=cd):u[3]!==void 0&&(o=cd):o===cd?u[0]===">"?(o=s??y_,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?cd:u[3]==='"'?a6:o6):o===a6||o===o6?o=cd:o===s6||o===r6?o=y_:(o=cd,s=void 0);const g=o===cd&&i[l+1].startsWith("/>")?" ":"";r+=o===y_?h+mre:d>=0?(n.push(c),h.slice(0,d)+"$lit$"+h.slice(d)+$c+g):h+$c+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[n6!==void 0?n6.createHTML(a):a,n]};class Lv{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[h,c]=vre(e,t);if(this.el=Lv.createElement(h,n),Kp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=Kp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith($c)){const f=c[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split($c),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?yre:p[1]==="?"?Sre:p[1]==="@"?xre:Wk})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(J$.test(s.tagName)){const u=s.textContent.split($c),d=u.length-1;if(d>0){s.textContent=Em?Em.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],Dv()),Kp.nextNode(),l.push({type:2,index:++r});s.append(u[d],Dv())}}}else if(s.nodeType===8)if(s.data===Q$)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf($c,u+1))!==-1;)l.push({type:7,index:r}),u+=$c.length-1}r++}}static createElement(e,t){const n=Am.createElement("template");return n.innerHTML=e,n}}function Tm(i,e,t=i,n){var s,r,o,a;if(e===Im)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const h=kv(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),h===void 0?l=void 0:(l=new h(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=Tm(i,l._$AS(i,e.values),l,n)),e}class wre{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Am).importNode(n,!0);Kp.currentNode=r;let o=Kp.nextNode(),a=0,l=0,h=s[0];for(;h!==void 0;){if(a===h.index){let c;h.type===2?c=new Cw(o,o.nextSibling,this,e):h.type===1?c=new h.ctor(o,h.name,h.strings,this,e):h.type===6&&(c=new Dre(o,this,e)),this.u.push(c),h=s[++l]}a!==(h==null?void 0:h.index)&&(o=Kp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class Cw{constructor(e,t,n,s){var r;this.type=2,this._$AH=_n,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Tm(this,e,t),kv(e)?e===_n||e==null||e===""?(this._$AH!==_n&&this._$AR(),this._$AH=_n):e!==this._$AH&&e!==Im&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):_re(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==_n&&kv(this._$AH)?this._$AA.nextSibling.data=e:this.T(Am.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=Lv.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new wre(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=l6.get(e.strings);return t===void 0&&l6.set(e.strings,t=new Lv(e)),t}k(e){X$(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new Cw(this.O(Dv()),this.O(Dv()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Wk{constructor(e,t,n,s,r){this.type=1,this._$AH=_n,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=_n}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=Tm(this,e,t,0),o=!kv(e)||e!==this._$AH&&e!==Im,o&&(this._$AH=e);else{const a=e;let l,h;for(e=r[0],l=0;l<r.length-1;l++)h=Tm(this,a[n+l],t,l),h===Im&&(h=this._$AH[l]),o||(o=!kv(h)||h!==this._$AH[l]),h===_n?e=_n:e!==_n&&(e+=(h??"")+r[l+1]),this._$AH[l]=h}o&&!s&&this.j(e)}j(e){e===_n?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class yre extends Wk{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===_n?void 0:e}}const Cre=Em?Em.emptyScript:"";class Sre extends Wk{constructor(){super(...arguments),this.type=4}j(e){e&&e!==_n?this.element.setAttribute(this.name,Cre):this.element.removeAttribute(this.name)}}class xre extends Wk{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=Tm(this,e,t,0))!==null&&n!==void 0?n:_n)===Im)return;const s=this._$AH,r=e===_n&&s!==_n||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==_n&&(s===_n||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class Dre{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Tm(this,e)}}const h6=px.litHtmlPolyfillSupport;h6==null||h6(Lv,Cw),((dE=px.litHtmlVersions)!==null&&dE!==void 0?dE:px.litHtmlVersions=[]).push("2.4.0");const ej=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new Cw(e.insertBefore(Dv(),a),a,void 0,t??{})}return o._$AI(i),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var fE,gE;let Zp=class extends wp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=ej(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Im}};Zp.finalized=!0,Zp._$litElement$=!0,(fE=globalThis.litElementHydrateSupport)===null||fE===void 0||fE.call(globalThis,{LitElement:Zp});const c6=globalThis.litElementPolyfillSupport;c6==null||c6({LitElement:Zp});((gE=globalThis.litElementVersions)!==null&&gE!==void 0?gE:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kre=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lre={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ere=i=>(...e)=>({_$litDirective$:i,values:e});class Are{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Db=(i,e)=>{var t,n;const s=i._$AN;if(s===void 0)return!1;for(const r of s)(n=(t=r)._$AO)===null||n===void 0||n.call(t,e,!1),Db(r,e);return!0},mx=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},tj=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),Nre(e)}};function Ire(i){this._$AN!==void 0?(mx(this),this._$AM=i,tj(this)):this._$AM=i}function Tre(i,e=!1,t=0){const n=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(n))for(let r=t;r<n.length;r++)Db(n[r],!1),mx(n[r]);else n!=null&&(Db(n,!1),mx(n));else Db(this,i)}const Nre=i=>{var e,t,n,s;i.type==Lre.CHILD&&((e=(n=i)._$AP)!==null&&e!==void 0||(n._$AP=Tre),(t=(s=i)._$AQ)!==null&&t!==void 0||(s._$AQ=Ire))};class Mre extends Are{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),tj(this),this.isConnected=e._$AU}_$AO(e,t=!0){var n,s;e!==this.isConnected&&(this.isConnected=e,e?(n=this.reconnected)===null||n===void 0||n.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),t&&(Db(this,e),mx(this))}setValue(e){if(kre(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ij=()=>new Rre;let Rre=class{};const pE=new WeakMap,u6=Ere(class extends Mre{render(i){return _n}update(i,[e]){var t;const n=e!==this.Y;return n&&this.Y!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=e,this.dt=(t=i.options)===null||t===void 0?void 0:t.host,this.rt(this.ct=i.element)),_n}rt(i){var e;if(typeof this.Y=="function"){const t=(e=this.dt)!==null&&e!==void 0?e:globalThis;let n=pE.get(t);n===void 0&&(n=new WeakMap,pE.set(t,n)),n.get(this.Y)!==void 0&&this.Y.call(this.dt,void 0),n.set(this.Y,i),i!==void 0&&this.Y.call(this.dt,i)}else this.Y.value=i}get lt(){var i,e,t;return typeof this.Y=="function"?(e=pE.get((i=this.dt)!==null&&i!==void 0?i:globalThis))===null||e===void 0?void 0:e.get(this.Y):(t=this.Y)===null||t===void 0?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function d6(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function ze(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d6(Object(t),!0).forEach(function(n){Fre(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):d6(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function _x(i){return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(i)}function Ore(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function f6(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function Pre(i,e,t){return e&&f6(i.prototype,e),t&&f6(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Fre(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cO(i,e){return Vre(i)||zre(i,e)||nj(i,e)||Ure()}function zk(i){return Bre(i)||Wre(i)||nj(i)||Hre()}function Bre(i){if(Array.isArray(i))return KT(i)}function Vre(i){if(Array.isArray(i))return i}function Wre(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function zre(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,o,a;try{for(t=t.call(i);!(s=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return n}}function nj(i,e){if(i){if(typeof i=="string")return KT(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KT(i,e)}}function KT(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function Hre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ure(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g6=function(){},uO={},sj={},rj=null,oj={mark:g6,measure:g6};try{typeof window<"u"&&(uO=window),typeof document<"u"&&(sj=document),typeof MutationObserver<"u"&&(rj=MutationObserver),typeof performance<"u"&&(oj=performance)}catch{}var $re=uO.navigator||{},p6=$re.userAgent,m6=p6===void 0?"":p6,yu=uO,ji=sj,_6=rj,Ty=oj;yu.document;var gc=!!ji.documentElement&&!!ji.head&&typeof ji.addEventListener=="function"&&typeof ji.createElement=="function",aj=~m6.indexOf("MSIE")||~m6.indexOf("Trident/"),sc="___FONT_AWESOME___",ZT=16,lj="fa",hj="svg-inline--fa",Df="data-fa-i2svg",YT="data-fa-pseudo-element",jre="data-fa-pseudo-element-pending",dO="data-prefix",fO="data-icon",b6="fontawesome-i2svg",qre="async",Gre=["HTML","HEAD","STYLE","SCRIPT"],cj=function(){try{return!0}catch{return!1}}(),gO={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},bx={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},uj={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Kre={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},Zre=/fa[srltdbk\-\ ]/,dj="fa-layers-text",Yre=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Qre={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},fj=[1,2,3,4,5,6,7,8,9,10],Xre=fj.concat([11,12,13,14,15,16,17,18,19,20]),Jre=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vd={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},eoe=[].concat(zk(Object.keys(bx)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vd.GROUP,Vd.SWAP_OPACITY,Vd.PRIMARY,Vd.SECONDARY]).concat(fj.map(function(i){return"".concat(i,"x")})).concat(Xre.map(function(i){return"w-".concat(i)})),gj=yu.FontAwesomeConfig||{};function toe(i){var e=ji.querySelector("script["+i+"]");if(e)return e.getAttribute(i)}function ioe(i){return i===""?!0:i==="false"?!1:i==="true"?!0:i}if(ji&&typeof ji.querySelector=="function"){var noe=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];noe.forEach(function(i){var e=cO(i,2),t=e[0],n=e[1],s=ioe(toe(t));s!=null&&(gj[n]=s)})}var soe={familyPrefix:lj,styleDefault:"solid",replacementClass:hj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},kb=ze(ze({},soe),gj);kb.autoReplaceSvg||(kb.observeMutations=!1);var st={};Object.keys(kb).forEach(function(i){Object.defineProperty(st,i,{enumerable:!0,set:function(t){kb[i]=t,rS.forEach(function(n){return n(st)})},get:function(){return kb[i]}})});yu.FontAwesomeConfig=st;var rS=[];function roe(i){return rS.push(i),function(){rS.splice(rS.indexOf(i),1)}}var yc=ZT,El={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function ooe(i){if(!(!i||!gc)){var e=ji.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=i;for(var t=ji.head.childNodes,n=null,s=t.length-1;s>-1;s--){var r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(n=r)}return ji.head.insertBefore(e,n),i}}var aoe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ev(){for(var i=12,e="";i-- >0;)e+=aoe[Math.random()*62|0];return e}function M0(i){for(var e=[],t=(i||[]).length>>>0;t--;)e[t]=i[t];return e}function pO(i){return i.classList?M0(i.classList):(i.getAttribute("class")||"").split(" ").filter(function(e){return e})}function pj(i){return"".concat(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function loe(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(pj(i[t]),'" ')},"").trim()}function Hk(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(i[t].trim(),";")},"")}function mO(i){return i.size!==El.size||i.x!==El.x||i.y!==El.y||i.rotate!==El.rotate||i.flipX||i.flipY}function hoe(i){var e=i.transform,t=i.containerWidth,n=i.iconWidth,s={transform:"translate(".concat(t/2," 256)")},r="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(o," ").concat(a)},h={transform:"translate(".concat(n/2*-1," -256)")};return{outer:s,inner:l,path:h}}function coe(i){var e=i.transform,t=i.width,n=t===void 0?ZT:t,s=i.height,r=s===void 0?ZT:s,o=i.startCentered,a=o===void 0?!1:o,l="";return a&&aj?l+="translate(".concat(e.x/yc-n/2,"em, ").concat(e.y/yc-r/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/yc,"em), calc(-50% + ").concat(e.y/yc,"em)) "):l+="translate(".concat(e.x/yc,"em, ").concat(e.y/yc,"em) "),l+="scale(".concat(e.size/yc*(e.flipX?-1:1),", ").concat(e.size/yc*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var uoe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function mj(){var i=lj,e=hj,t=st.familyPrefix,n=st.replacementClass,s=uoe;if(t!==i||n!==e){var r=new RegExp("\\.".concat(i,"\\-"),"g"),o=new RegExp("\\--".concat(i,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(n))}return s}var v6=!1;function mE(){st.autoAddCss&&!v6&&(ooe(mj()),v6=!0)}var doe={mixout:function(){return{dom:{css:mj,insertCss:mE}}},hooks:function(){return{beforeDOMElementCreation:function(){mE()},beforeI2svg:function(){mE()}}}},rc=yu||{};rc[sc]||(rc[sc]={});rc[sc].styles||(rc[sc].styles={});rc[sc].hooks||(rc[sc].hooks={});rc[sc].shims||(rc[sc].shims=[]);var va=rc[sc],_j=[],foe=function i(){ji.removeEventListener("DOMContentLoaded",i),vx=1,_j.map(function(e){return e()})},vx=!1;gc&&(vx=(ji.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ji.readyState),vx||ji.addEventListener("DOMContentLoaded",foe));function goe(i){gc&&(vx?setTimeout(i,0):_j.push(i))}function Sw(i){var e=i.tag,t=i.attributes,n=t===void 0?{}:t,s=i.children,r=s===void 0?[]:s;return typeof i=="string"?pj(i):"<".concat(e," ").concat(loe(n),">").concat(r.map(Sw).join(""),"</").concat(e,">")}function w6(i,e,t){if(i&&i[e]&&i[e][t])return{prefix:e,iconName:t,icon:i[e][t]}}var poe=function(e,t){return function(n,s,r,o){return e.call(t,n,s,r,o)}},_E=function(e,t,n,s){var r=Object.keys(e),o=r.length,a=s!==void 0?poe(t,s):t,l,h,c;for(n===void 0?(l=1,c=e[r[0]]):(l=0,c=n);l<o;l++)h=r[l],c=a(c,e[h],h,e);return c};function moe(i){for(var e=[],t=0,n=i.length;t<n;){var s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){var r=i.charCodeAt(t++);(r&64512)==56320?e.push(((s&1023)<<10)+(r&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function QT(i){var e=moe(i);return e.length===1?e[0].toString(16):null}function _oe(i,e){var t=i.length,n=i.charCodeAt(e),s;return n>=55296&&n<=56319&&t>e+1&&(s=i.charCodeAt(e+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function y6(i){return Object.keys(i).reduce(function(e,t){var n=i[t],s=!!n.icon;return s?e[n.iconName]=n.icon:e[t]=n,e},{})}function XT(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.skipHooks,s=n===void 0?!1:n,r=y6(e);typeof va.hooks.addPack=="function"&&!s?va.hooks.addPack(i,y6(e)):va.styles[i]=ze(ze({},va.styles[i]||{}),r),i==="fas"&&XT("fa",e)}var Lb=va.styles,boe=va.shims,voe=Object.values(uj),_O=null,bj={},vj={},wj={},yj={},Cj={},woe=Object.keys(gO);function yoe(i){return~eoe.indexOf(i)}function Coe(i,e){var t=e.split("-"),n=t[0],s=t.slice(1).join("-");return n===i&&s!==""&&!yoe(s)?s:null}var Sj=function(){var e=function(r){return _E(Lb,function(o,a,l){return o[l]=_E(a,r,{}),o},{})};bj=e(function(s,r,o){if(r[3]&&(s[r[3]]=o),r[2]){var a=r[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){s[l.toString(16)]=o})}return s}),vj=e(function(s,r,o){if(s[o]=o,r[2]){var a=r[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){s[l]=o})}return s}),Cj=e(function(s,r,o){var a=r[2];return s[o]=o,a.forEach(function(l){s[l]=o}),s});var t="far"in Lb||st.autoFetchSvg,n=_E(boe,function(s,r){var o=r[0],a=r[1],l=r[2];return a==="far"&&!t&&(a="fas"),typeof o=="string"&&(s.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(s.unicodes[o.toString(16)]={prefix:a,iconName:l}),s},{names:{},unicodes:{}});wj=n.names,yj=n.unicodes,_O=Uk(st.styleDefault)};roe(function(i){_O=Uk(i.styleDefault)});Sj();function bO(i,e){return(bj[i]||{})[e]}function Soe(i,e){return(vj[i]||{})[e]}function Ap(i,e){return(Cj[i]||{})[e]}function xj(i){return wj[i]||{prefix:null,iconName:null}}function xoe(i){var e=yj[i],t=bO("fas",i);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Cu(){return _O}var vO=function(){return{prefix:null,iconName:null,rest:[]}};function Uk(i){var e=gO[i],t=bx[i]||bx[e],n=i in va.styles?i:null;return t||n||null}function $k(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.skipLookups,n=t===void 0?!1:t,s=null,r=i.reduce(function(o,a){var l=Coe(st.familyPrefix,a);if(Lb[a]?(a=voe.includes(a)?Kre[a]:a,s=a,o.prefix=a):woe.indexOf(a)>-1?(s=a,o.prefix=Uk(a)):l?o.iconName=l:a!==st.replacementClass&&o.rest.push(a),!n&&o.prefix&&o.iconName){var h=s==="fa"?xj(o.iconName):{},c=Ap(o.prefix,o.iconName);h.prefix&&(s=null),o.iconName=h.iconName||c||o.iconName,o.prefix=h.prefix||o.prefix,o.prefix==="far"&&!Lb.far&&Lb.fas&&!st.autoFetchSvg&&(o.prefix="fas")}return o},vO());return(r.prefix==="fa"||s==="fa")&&(r.prefix=Cu()||"fas"),r}var Doe=function(){function i(){Ore(this,i),this.definitions={}}return Pre(i,[{key:"add",value:function(){for(var t=this,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=ze(ze({},t.definitions[a]||{}),o[a]),XT(a,o[a]);var l=uj[a];l&&XT(l,o[a]),Sj()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,n){var s=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(s).map(function(r){var o=s[r],a=o.prefix,l=o.iconName,h=o.icon,c=h[2];t[a]||(t[a]={}),c.length>0&&c.forEach(function(u){typeof u=="string"&&(t[a][u]=h)}),t[a][l]=h}),t}}]),i}(),C6=[],Ip={},Yp={},koe=Object.keys(Yp);function Loe(i,e){var t=e.mixoutsTo;return C6=i,Ip={},Object.keys(Yp).forEach(function(n){koe.indexOf(n)===-1&&delete Yp[n]}),C6.forEach(function(n){var s=n.mixout?n.mixout():{};if(Object.keys(s).forEach(function(o){typeof s[o]=="function"&&(t[o]=s[o]),_x(s[o])==="object"&&Object.keys(s[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=s[o][a]})}),n.hooks){var r=n.hooks();Object.keys(r).forEach(function(o){Ip[o]||(Ip[o]=[]),Ip[o].push(r[o])})}n.provides&&n.provides(Yp)}),t}function JT(i,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];var r=Ip[i]||[];return r.forEach(function(o){e=o.apply(null,[e].concat(n))}),e}function kf(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var s=Ip[i]||[];s.forEach(function(r){r.apply(null,t)})}function oc(){var i=arguments[0],e=Array.prototype.slice.call(arguments,1);return Yp[i]?Yp[i].apply(null,e):void 0}function eN(i){i.prefix==="fa"&&(i.prefix="fas");var e=i.iconName,t=i.prefix||Cu();if(e)return e=Ap(t,e)||e,w6(Dj.definitions,t,e)||w6(va.styles,t,e)}var Dj=new Doe,Eoe=function(){st.autoReplaceSvg=!1,st.observeMutations=!1,kf("noAuto")},Aoe={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return gc?(kf("beforeI2svg",e),oc("pseudoElements2svg",e),oc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;st.autoReplaceSvg===!1&&(st.autoReplaceSvg=!0),st.observeMutations=!0,goe(function(){Toe({autoReplaceSvgRoot:t}),kf("watch",e)})}},Ioe={icon:function(e){if(e===null)return null;if(_x(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Ap(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=Uk(e[0]);return{prefix:n,iconName:Ap(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(st.familyPrefix,"-"))>-1||e.match(Zre))){var s=$k(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||Cu(),iconName:Ap(s.prefix,s.iconName)||s.iconName}}if(typeof e=="string"){var r=Cu();return{prefix:r,iconName:Ap(r,e)||e}}}},ao={noAuto:Eoe,config:st,dom:Aoe,parse:Ioe,library:Dj,findIconDefinition:eN,toHtml:Sw},Toe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,n=t===void 0?ji:t;(Object.keys(va.styles).length>0||st.autoFetchSvg)&&gc&&st.autoReplaceSvg&&ao.dom.i2svg({node:n})};function jk(i,e){return Object.defineProperty(i,"abstract",{get:e}),Object.defineProperty(i,"html",{get:function(){return i.abstract.map(function(n){return Sw(n)})}}),Object.defineProperty(i,"node",{get:function(){if(gc){var n=ji.createElement("div");return n.innerHTML=i.html,n.children}}}),i}function Noe(i){var e=i.children,t=i.main,n=i.mask,s=i.attributes,r=i.styles,o=i.transform;if(mO(o)&&t.found&&!n.found){var a=t.width,l=t.height,h={x:a/l/2,y:.5};s.style=Hk(ze(ze({},r),{},{"transform-origin":"".concat(h.x+o.x/16,"em ").concat(h.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function Moe(i){var e=i.prefix,t=i.iconName,n=i.children,s=i.attributes,r=i.symbol,o=r===!0?"".concat(e,"-").concat(st.familyPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ze(ze({},s),{},{id:o}),children:n}]}]}function wO(i){var e=i.icons,t=e.main,n=e.mask,s=i.prefix,r=i.iconName,o=i.transform,a=i.symbol,l=i.title,h=i.maskId,c=i.titleId,u=i.extra,d=i.watchable,f=d===void 0?!1:d,g=n.found?n:t,p=g.width,m=g.height,b=s==="fak",_=[st.replacementClass,r?"".concat(st.familyPrefix,"-").concat(r):""].filter(function(D){return u.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(u.classes).join(" "),w={children:[],attributes:ze(ze({},u.attributes),{},{"data-prefix":s,"data-icon":r,class:_,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(m)})},y=b&&!~u.classes.indexOf("fa-fw")?{width:"".concat(p/m*16*.0625,"em")}:{};f&&(w.attributes[Df]=""),l&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(c||Ev())},children:[l]}),delete w.attributes.title);var x=ze(ze({},w),{},{prefix:s,iconName:r,main:t,mask:n,maskId:h,transform:o,symbol:a,styles:ze(ze({},y),u.styles)}),L=n.found&&t.found?oc("generateAbstractMask",x)||{children:[],attributes:{}}:oc("generateAbstractIcon",x)||{children:[],attributes:{}},S=L.children,k=L.attributes;return x.children=S,x.attributes=k,a?Moe(x):Noe(x)}function S6(i){var e=i.content,t=i.width,n=i.height,s=i.transform,r=i.title,o=i.extra,a=i.watchable,l=a===void 0?!1:a,h=ze(ze(ze({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});l&&(h[Df]="");var c=ze({},o.styles);mO(s)&&(c.transform=coe({transform:s,startCentered:!0,width:t,height:n}),c["-webkit-transform"]=c.transform);var u=Hk(c);u.length>0&&(h.style=u);var d=[];return d.push({tag:"span",attributes:h,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function Roe(i){var e=i.content,t=i.title,n=i.extra,s=ze(ze(ze({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),r=Hk(n.styles);r.length>0&&(s.style=r);var o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var bE=va.styles;function tN(i){var e=i[0],t=i[1],n=i.slice(4),s=cO(n,1),r=s[0],o=null;return Array.isArray(r)?o={tag:"g",attributes:{class:"".concat(st.familyPrefix,"-").concat(Vd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(st.familyPrefix,"-").concat(Vd.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(st.familyPrefix,"-").concat(Vd.PRIMARY),fill:"currentColor",d:r[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:o}}var Ooe={found:!1,width:512,height:512};function Poe(i,e){!cj&&!st.showMissingIcons&&i&&console.error('Icon with name "'.concat(i,'" and prefix "').concat(e,'" is missing.'))}function iN(i,e){var t=e;return e==="fa"&&st.styleDefault!==null&&(e=Cu()),new Promise(function(n,s){if(oc("missingIconAbstract"),t==="fa"){var r=xj(i)||{};i=r.iconName||i,e=r.prefix||e}if(i&&e&&bE[e]&&bE[e][i]){var o=bE[e][i];return n(tN(o))}Poe(i,e),n(ze(ze({},Ooe),{},{icon:st.showMissingIcons&&i?oc("missingIconAbstract")||{}:{}}))})}var x6=function(){},nN=st.measurePerformance&&Ty&&Ty.mark&&Ty.measure?Ty:{mark:x6,measure:x6},tb='FA "6.1.1"',Foe=function(e){return nN.mark("".concat(tb," ").concat(e," begins")),function(){return kj(e)}},kj=function(e){nN.mark("".concat(tb," ").concat(e," ends")),nN.measure("".concat(tb," ").concat(e),"".concat(tb," ").concat(e," begins"),"".concat(tb," ").concat(e," ends"))},yO={begin:Foe,end:kj},oS=function(){};function D6(i){var e=i.getAttribute?i.getAttribute(Df):null;return typeof e=="string"}function Boe(i){var e=i.getAttribute?i.getAttribute(dO):null,t=i.getAttribute?i.getAttribute(fO):null;return e&&t}function Voe(i){return i&&i.classList&&i.classList.contains&&i.classList.contains(st.replacementClass)}function Woe(){if(st.autoReplaceSvg===!0)return aS.replace;var i=aS[st.autoReplaceSvg];return i||aS.replace}function zoe(i){return ji.createElementNS("http://www.w3.org/2000/svg",i)}function Hoe(i){return ji.createElement(i)}function Lj(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,n=t===void 0?i.tag==="svg"?zoe:Hoe:t;if(typeof i=="string")return ji.createTextNode(i);var s=n(i.tag);Object.keys(i.attributes||[]).forEach(function(o){s.setAttribute(o,i.attributes[o])});var r=i.children||[];return r.forEach(function(o){s.appendChild(Lj(o,{ceFn:n}))}),s}function Uoe(i){var e=" ".concat(i.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var aS={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(Lj(s),t)}),t.getAttribute(Df)===null&&st.keepOriginalSource){var n=ji.createComment(Uoe(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~pO(t).indexOf(st.replacementClass))return aS.replace(e);var s=new RegExp("".concat(st.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce(function(a,l){return l===st.replacementClass||l.match(s)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=n.map(function(a){return Sw(a)}).join(`
`);t.setAttribute(Df,""),t.innerHTML=o}};function k6(i){i()}function Ej(i,e){var t=typeof e=="function"?e:oS;if(i.length===0)t();else{var n=k6;st.mutateApproach===qre&&(n=yu.requestAnimationFrame||k6),n(function(){var s=Woe(),r=yO.begin("mutate");i.map(s),r(),t()})}}var CO=!1;function Aj(){CO=!0}function sN(){CO=!1}var wx=null;function L6(i){if(_6&&st.observeMutations){var e=i.treeCallback,t=e===void 0?oS:e,n=i.nodeCallback,s=n===void 0?oS:n,r=i.pseudoElementsCallback,o=r===void 0?oS:r,a=i.observeMutationsRoot,l=a===void 0?ji:a;wx=new _6(function(h){if(!CO){var c=Cu();M0(h).forEach(function(u){if(u.type==="childList"&&u.addedNodes.length>0&&!D6(u.addedNodes[0])&&(st.searchPseudoElements&&o(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&st.searchPseudoElements&&o(u.target.parentNode),u.type==="attributes"&&D6(u.target)&&~Jre.indexOf(u.attributeName))if(u.attributeName==="class"&&Boe(u.target)){var d=$k(pO(u.target)),f=d.prefix,g=d.iconName;u.target.setAttribute(dO,f||c),g&&u.target.setAttribute(fO,g)}else Voe(u.target)&&s(u.target)})}}),gc&&wx.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function $oe(){wx&&wx.disconnect()}function joe(i){var e=i.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(n,s){var r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(n[o]=a.join(":").trim()),n},{})),t}function qoe(i){var e=i.getAttribute("data-prefix"),t=i.getAttribute("data-icon"),n=i.innerText!==void 0?i.innerText.trim():"",s=$k(pO(i));return s.prefix||(s.prefix=Cu()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||s.prefix&&n.length>0&&(s.iconName=Soe(s.prefix,i.innerText)||bO(s.prefix,QT(i.innerText))),s}function Goe(i){var e=M0(i.attributes).reduce(function(s,r){return s.name!=="class"&&s.name!=="style"&&(s[r.name]=r.value),s},{}),t=i.getAttribute("title"),n=i.getAttribute("data-fa-title-id");return st.autoA11y&&(t?e["aria-labelledby"]="".concat(st.replacementClass,"-title-").concat(n||Ev()):(e["aria-hidden"]="true",e.focusable="false")),e}function Koe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:El,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function E6(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=qoe(i),n=t.iconName,s=t.prefix,r=t.rest,o=Goe(i),a=JT("parseNodeAttributes",{},i),l=e.styleParser?joe(i):[];return ze({iconName:n,title:i.getAttribute("title"),titleId:i.getAttribute("data-fa-title-id"),prefix:s,transform:El,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:o}},a)}var Zoe=va.styles;function Ij(i){var e=st.autoReplaceSvg==="nest"?E6(i,{styleParser:!1}):E6(i);return~e.extra.classes.indexOf(dj)?oc("generateLayersText",i,e):oc("generateSvgReplacementMutation",i,e)}function A6(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!gc)return Promise.resolve();var t=ji.documentElement.classList,n=function(u){return t.add("".concat(b6,"-").concat(u))},s=function(u){return t.remove("".concat(b6,"-").concat(u))},r=st.autoFetchSvg?Object.keys(gO):Object.keys(Zoe),o=[".".concat(dj,":not([").concat(Df,"])")].concat(r.map(function(c){return".".concat(c,":not([").concat(Df,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=M0(i.querySelectorAll(o))}catch{}if(a.length>0)n("pending"),s("complete");else return Promise.resolve();var l=yO.begin("onTree"),h=a.reduce(function(c,u){try{var d=Ij(u);d&&c.push(d)}catch(f){cj||f.name==="MissingIcon"&&console.error(f)}return c},[]);return new Promise(function(c,u){Promise.all(h).then(function(d){Ej(d,function(){n("active"),n("complete"),s("pending"),typeof e=="function"&&e(),l(),c()})}).catch(function(d){l(),u(d)})})}function Yoe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Ij(i).then(function(t){t&&Ej([t],e)})}function Qoe(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=(e||{}).icon?e:eN(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:eN(s||{})),i(n,ze(ze({},t),{},{mask:s}))}}var Xoe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transform,s=n===void 0?El:n,r=t.symbol,o=r===void 0?!1:r,a=t.mask,l=a===void 0?null:a,h=t.maskId,c=h===void 0?null:h,u=t.title,d=u===void 0?null:u,f=t.titleId,g=f===void 0?null:f,p=t.classes,m=p===void 0?[]:p,b=t.attributes,_=b===void 0?{}:b,w=t.styles,y=w===void 0?{}:w;if(e){var x=e.prefix,L=e.iconName,S=e.icon;return jk(ze({type:"icon"},e),function(){return kf("beforeDOMElementCreation",{iconDefinition:e,params:t}),st.autoA11y&&(d?_["aria-labelledby"]="".concat(st.replacementClass,"-title-").concat(g||Ev()):(_["aria-hidden"]="true",_.focusable="false")),wO({icons:{main:tN(S),mask:l?tN(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:L,transform:ze(ze({},El),s),symbol:o,title:d,maskId:c,titleId:g,extra:{attributes:_,styles:y,classes:m}})})}},Joe={mixout:function(){return{icon:Qoe(Xoe)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=A6,t.nodeCallback=Yoe,t}}},provides:function(e){e.i2svg=function(t){var n=t.node,s=n===void 0?ji:n,r=t.callback,o=r===void 0?function(){}:r;return A6(s,o)},e.generateSvgReplacementMutation=function(t,n){var s=n.iconName,r=n.title,o=n.titleId,a=n.prefix,l=n.transform,h=n.symbol,c=n.mask,u=n.maskId,d=n.extra;return new Promise(function(f,g){Promise.all([iN(s,a),c.iconName?iN(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var m=cO(p,2),b=m[0],_=m[1];f([t,wO({icons:{main:b,mask:_},prefix:a,iconName:s,transform:l,symbol:h,maskId:u,title:r,titleId:o,extra:d,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.transform,a=t.styles,l=Hk(a);l.length>0&&(s.style=l);var h;return mO(o)&&(h=oc("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),n.push(h||r.icon),{children:n,attributes:s}}}},eae={mixout:function(){return{layer:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.classes,r=s===void 0?[]:s;return jk({type:"layer"},function(){kf("beforeDOMElementCreation",{assembler:t,params:n});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(st.familyPrefix,"-layers")].concat(zk(r)).join(" ")},children:o}]})}}}},tae={mixout:function(){return{counter:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.title,r=s===void 0?null:s,o=n.classes,a=o===void 0?[]:o,l=n.attributes,h=l===void 0?{}:l,c=n.styles,u=c===void 0?{}:c;return jk({type:"counter",content:t},function(){return kf("beforeDOMElementCreation",{content:t,params:n}),Roe({content:t.toString(),title:r,extra:{attributes:h,styles:u,classes:["".concat(st.familyPrefix,"-layers-counter")].concat(zk(a))}})})}}}},iae={mixout:function(){return{text:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.transform,r=s===void 0?El:s,o=n.title,a=o===void 0?null:o,l=n.classes,h=l===void 0?[]:l,c=n.attributes,u=c===void 0?{}:c,d=n.styles,f=d===void 0?{}:d;return jk({type:"text",content:t},function(){return kf("beforeDOMElementCreation",{content:t,params:n}),S6({content:t,transform:ze(ze({},El),r),title:a,extra:{attributes:u,styles:f,classes:["".concat(st.familyPrefix,"-layers-text")].concat(zk(h))}})})}}},provides:function(e){e.generateLayersText=function(t,n){var s=n.title,r=n.transform,o=n.extra,a=null,l=null;if(aj){var h=parseInt(getComputedStyle(t).fontSize,10),c=t.getBoundingClientRect();a=c.width/h,l=c.height/h}return st.autoA11y&&!s&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,S6({content:t.innerHTML,width:a,height:l,transform:r,title:s,extra:o,watchable:!0})])}}},nae=new RegExp('"',"ug"),I6=[1105920,1112319];function sae(i){var e=i.replace(nae,""),t=_oe(e,0),n=t>=I6[0]&&t<=I6[1],s=e.length===2?e[0]===e[1]:!1;return{value:QT(s?e[0]:e),isSecondary:n||s}}function T6(i,e){var t="".concat(jre).concat(e.replace(":","-"));return new Promise(function(n,s){if(i.getAttribute(t)!==null)return n();var r=M0(i.children),o=r.filter(function(L){return L.getAttribute(YT)===e})[0],a=yu.getComputedStyle(i,e),l=a.getPropertyValue("font-family").match(Yre),h=a.getPropertyValue("font-weight"),c=a.getPropertyValue("content");if(o&&!l)return i.removeChild(o),n();if(l&&c!=="none"&&c!==""){var u=a.getPropertyValue("content"),d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?bx[l[2].toLowerCase()]:Qre[h],f=sae(u),g=f.value,p=f.isSecondary,m=l[0].startsWith("FontAwesome"),b=bO(d,g),_=b;if(m){var w=xoe(g);w.iconName&&w.prefix&&(b=w.iconName,d=w.prefix)}if(b&&!p&&(!o||o.getAttribute(dO)!==d||o.getAttribute(fO)!==_)){i.setAttribute(t,_),o&&i.removeChild(o);var y=Koe(),x=y.extra;x.attributes[YT]=e,iN(b,d).then(function(L){var S=wO(ze(ze({},y),{},{icons:{main:L,mask:vO()},prefix:d,iconName:_,extra:x,watchable:!0})),k=ji.createElement("svg");e==="::before"?i.insertBefore(k,i.firstChild):i.appendChild(k),k.outerHTML=S.map(function(D){return Sw(D)}).join(`
`),i.removeAttribute(t),n()}).catch(s)}else n()}else n()})}function rae(i){return Promise.all([T6(i,"::before"),T6(i,"::after")])}function oae(i){return i.parentNode!==document.head&&!~Gre.indexOf(i.tagName.toUpperCase())&&!i.getAttribute(YT)&&(!i.parentNode||i.parentNode.tagName!=="svg")}function N6(i){if(gc)return new Promise(function(e,t){var n=M0(i.querySelectorAll("*")).filter(oae).map(rae),s=yO.begin("searchPseudoElements");Aj(),Promise.all(n).then(function(){s(),sN(),e()}).catch(function(){s(),sN(),t()})})}var aae={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=N6,t}}},provides:function(e){e.pseudoElements2svg=function(t){var n=t.node,s=n===void 0?ji:n;st.searchPseudoElements&&N6(s)}}},M6=!1,lae={mixout:function(){return{dom:{unwatch:function(){Aj(),M6=!0}}}},hooks:function(){return{bootstrap:function(){L6(JT("mutationObserverCallbacks",{}))},noAuto:function(){$oe()},watch:function(t){var n=t.observeMutationsRoot;M6?sN():L6(JT("mutationObserverCallbacks",{observeMutationsRoot:n}))}}}},R6=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(n,s){var r=s.toLowerCase().split("-"),o=r[0],a=r.slice(1).join("-");if(o&&a==="h")return n.flipX=!0,n;if(o&&a==="v")return n.flipY=!0,n;if(a=parseFloat(a),isNaN(a))return n;switch(o){case"grow":n.size=n.size+a;break;case"shrink":n.size=n.size-a;break;case"left":n.x=n.x-a;break;case"right":n.x=n.x+a;break;case"up":n.y=n.y-a;break;case"down":n.y=n.y+a;break;case"rotate":n.rotate=n.rotate+a;break}return n},t)},hae={mixout:function(){return{parse:{transform:function(t){return R6(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-transform");return s&&(t.transform=R6(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var n=t.main,s=t.transform,r=t.containerWidth,o=t.iconWidth,a={transform:"translate(".concat(r/2," 256)")},l="translate(".concat(s.x*32,", ").concat(s.y*32,") "),h="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),c="rotate(".concat(s.rotate," 0 0)"),u={transform:"".concat(l," ").concat(h," ").concat(c)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:ze({},f.outer),children:[{tag:"g",attributes:ze({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:ze(ze({},n.icon.attributes),f.path)}]}]}}}},vE={x:0,y:0,width:"100%",height:"100%"};function O6(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i.attributes&&(i.attributes.fill||e)&&(i.attributes.fill="black"),i}function cae(i){return i.tag==="g"?i.children:[i]}var uae={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-mask"),r=s?$k(s.split(" ").map(function(o){return o.trim()})):vO();return r.prefix||(r.prefix=Cu()),t.mask=r,t.maskId=n.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.mask,a=t.maskId,l=t.transform,h=r.width,c=r.icon,u=o.width,d=o.icon,f=hoe({transform:l,containerWidth:u,iconWidth:h}),g={tag:"rect",attributes:ze(ze({},vE),{},{fill:"white"})},p=c.children?{children:c.children.map(O6)}:{},m={tag:"g",attributes:ze({},f.inner),children:[O6(ze({tag:c.tag,attributes:ze(ze({},c.attributes),f.path)},p))]},b={tag:"g",attributes:ze({},f.outer),children:[m]},_="mask-".concat(a||Ev()),w="clip-".concat(a||Ev()),y={tag:"mask",attributes:ze(ze({},vE),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,b]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:cae(d)},y]};return n.push(x,{tag:"rect",attributes:ze({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(_,")")},vE)}),{children:n,attributes:s}}}},dae={provides:function(e){var t=!1;yu.matchMedia&&(t=yu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var n=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:ze(ze({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ze(ze({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:ze(ze({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:ze(ze({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ze(ze({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(a),n.push({tag:"path",attributes:ze(ze({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:ze(ze({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:ze(ze({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ze(ze({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},fae={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-symbol"),r=s===null?!1:s===""?!0:s;return t.symbol=r,t}}}},gae=[doe,Joe,eae,tae,iae,aae,lae,hae,uae,dae,fae];Loe(gae,{mixoutsTo:ao});ao.noAuto;ao.config;ao.library;ao.dom;ao.parse;ao.findIconDefinition;ao.toHtml;var P6=ao.icon;ao.layer;ao.text;ao.counter;/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var pae={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"]},mae=pae,_ae={prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.65 28.65 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96zM64 416H224V160H64V416zM448 160H288V416H448V160z"]},bae=_ae,vae=Object.defineProperty,wae=(i,e,t)=>e in i?vae(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Yo=(i,e,t)=>(wae(i,typeof e!="symbol"?e+"":e,t),t),SO=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},it=(i,e,t)=>(SO(i,e,"read from private field"),t?t.call(i):e.get(i)),Kt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},jh=(i,e,t,n)=>(SO(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),yae=(i,e,t,n)=>({set _(s){jh(i,e,s,t)},get _(){return it(i,e,n)}}),Ct=(i,e,t)=>(SO(i,e,"access private method"),t);function Ku(i,e,t){return i.fields=e||[],i.fname=t,i}function Cae(i){return i==null?null:i.fname}function Tj(i){return i==null?null:i.fields}function Sae(i){return i.length===1?xae(i[0]):Dae(i)}const xae=i=>function(e){return e[i]},Dae=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function an(i){throw Error(i)}function kae(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function h(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)h(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?h():o=a+1:l==="["?(a>o&&h(),s=o=a+1):l==="]"&&(s||an("Access path missing open bracket: "+i),s>0&&h(),s=0,o=a+1)}return s&&an("Access path missing closing bracket: "+i),n&&an("Access path missing closing quote: "+i),a>o&&(a++,h()),e}function qk(i,e,t){const n=kae(i);return i=n.length===1?n[0]:i,Ku((t&&t.get||Sae)(n),[i],e||i)}qk("id");const Gk=Ku(i=>i,[],"identity");Ku(()=>0,[],"zero");Ku(()=>1,[],"one");Ku(()=>!0,[],"true");Ku(()=>!1,[],"false");var lo=Array.isArray;function $a(i){return i===Object(i)}function Ma(i){return i[i.length-1]}function Av(i){return i==null||i===""?null:+i}const Nj=i=>e=>i*Math.exp(e),Mj=i=>e=>Math.log(i*e),Lae=i=>e=>Math.sign(e)*Math.log1p(Math.abs(e/i)),Eae=i=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*i,yx=i=>e=>e<0?-Math.pow(-e,i):Math.pow(e,i);function xO(i,e,t,n){const s=t(i[0]),r=t(Ma(i)),o=(r-s)*e;return[n(s-o),n(r-o)]}function Aae(i,e){return xO(i,e,Av,Gk)}function Iae(i,e){var t=Math.sign(i[0]);return xO(i,e,Mj(t),Nj(t))}function Tae(i,e,t){return xO(i,e,yx(t),yx(1/t))}function Kk(i,e,t,n,s){const r=n(i[0]),o=n(Ma(i)),a=e!=null?n(e):(r+o)/2;return[s(a+(r-a)*t),s(a+(o-a)*t)]}function Rj(i,e,t){return Kk(i,e,t,Av,Gk)}function Oj(i,e,t){const n=Math.sign(i[0]);return Kk(i,e,t,Mj(n),Nj(n))}function rN(i,e,t,n){return Kk(i,e,t,yx(n),yx(1/n))}function Nae(i,e,t,n){return Kk(i,e,t,Lae(n),Eae(n))}function oN(i){return i!=null?lo(i)?i:[i]:[]}function Mae(i,e,t){let n=i[0],s=i[1],r;return s<n&&(r=s,s=n,n=r),r=s-n,r>=t-e?[e,t]:[n=Math.min(Math.max(n,e),t-r),n+r]}function Nr(i){return typeof i=="function"}const Rae="descending";function Pj(i,e,t){t=t||{},e=oN(e)||[];const n=[],s=[],r={},o=t.comparator||Oae;return oN(i).forEach((a,l)=>{a!=null&&(n.push(e[l]===Rae?-1:1),s.push(a=Nr(a)?a:qk(a,null,t)),(Tj(a)||[]).forEach(h=>r[h]=1))}),s.length===0?null:Ku(o(s,n),Object.keys(r))}const Fj=(i,e)=>(i<e||i==null)&&e!=null?-1:(i>e||e==null)&&i!=null?1:(e=e instanceof Date?+e:e,(i=i instanceof Date?+i:i)!==i&&e===e?-1:e!==e&&i===i?1:0),Oae=(i,e)=>i.length===1?Pae(i[0],e[0]):Fae(i,e,i.length),Pae=(i,e)=>function(t,n){return Fj(i(t),i(n))*e},Fae=(i,e,t)=>(e.push(0),function(n,s){let r,o=0,a=-1;for(;o===0&&++a<t;)r=i[a],o=Fj(r(n),r(s));return o*e[a]});function Bae(i){return Nr(i)?i:()=>i}function DO(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const Vae=Object.prototype.hasOwnProperty;function Wd(i,e){return Vae.call(i,e)}function Zk(i){return typeof i=="boolean"}function Wae(i){return Object.prototype.toString.call(i)==="[object Date]"}function zae(i){return i&&Nr(i[Symbol.iterator])}function Mr(i){return typeof i=="number"}function hn(i){return typeof i=="string"}function Hae(i,e){const t=i[0],n=Ma(i),s=+e;return s?s===1?n:t+s*(n-t):t}function Cx(i){return i&&Ma(i)-i[0]||0}function Yk(i){return lo(i)?"["+i.map(Yk)+"]":$a(i)||hn(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function Uae(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const $ae=i=>Mr(i)||Wae(i)?i:Date.parse(i);function jae(i,e){return e=e||$ae,i==null||i===""?null:e(i)}function qae(i){return i==null||i===""?null:i+""}function Sx(i){const e={},t=i.length;for(let n=0;n<t;++n)e[i[n]]=!0;return e}var F6={},wE={},yE=34,C_=10,CE=13;function Bj(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Gae(i,e){var t=Bj(i);return function(n,s){return e(t(n),s,i)}}function B6(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function _r(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function Kae(i){return i<0?"-"+_r(-i,6):i>9999?"+"+_r(i,6):_r(i,4)}function Zae(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":Kae(i.getUTCFullYear())+"-"+_r(i.getUTCMonth()+1,2)+"-"+_r(i.getUTCDate(),2)+(s?"T"+_r(e,2)+":"+_r(t,2)+":"+_r(n,2)+"."+_r(s,3)+"Z":n?"T"+_r(e,2)+":"+_r(t,2)+":"+_r(n,2)+"Z":t||e?"T"+_r(e,2)+":"+_r(t,2)+"Z":"")}function Vj(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,b){if(f)return f(m,b-1);g=m,f=d?Gae(m,d):Bj(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,b,_=g<=0,w=!1;u.charCodeAt(g-1)===C_&&--g,u.charCodeAt(g-1)===CE&&--g;function y(){if(_)return wE;if(w)return w=!1,F6;var L,S=p,k;if(u.charCodeAt(S)===yE){for(;p++<g&&u.charCodeAt(p)!==yE||u.charCodeAt(++p)===yE;);return(L=p)>=g?_=!0:(k=u.charCodeAt(p++))===C_?w=!0:k===CE&&(w=!0,u.charCodeAt(p)===C_&&++p),u.slice(S+1,L-1).replace(/""/g,'"')}for(;p<g;){if((k=u.charCodeAt(L=p++))===C_)w=!0;else if(k===CE)w=!0,u.charCodeAt(p)===C_&&++p;else if(k!==t)continue;return u.slice(S,L)}return _=!0,u.slice(S,g)}for(;(b=y())!==wE;){for(var x=[];b!==F6&&b!==wE;)x.push(b),b=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return c(f[g])}).join(i)})}function o(u,d){return d==null&&(d=B6(u)),[d.map(c).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=B6(u)),r(u,d).join(`
`)}function l(u){return u.map(h).join(`
`)}function h(u){return u.map(c).join(i)}function c(u){return u==null?"":u instanceof Date?Zae(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:h,formatValue:c}}var Yae=Vj("	"),Qae=Yae.parseRows;function Xae(i){return i}function Jae(i){if(i==null)return Xae;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var h=2,c=a.length,u=new Array(c);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;h<c;)u[h]=a[h],++h;return u}}function ele(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function tle(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return V6(i,t)})}:V6(i,e)}function V6(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=Wj(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function Wj(i,e){var t=Jae(i.transform),n=i.arcs;function s(c,u){u.length&&u.pop();for(var d=n[c<0?~c:c],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));c<0&&ele(u,g)}function r(c){return t(c)}function o(c){for(var u=[],d=0,f=c.length;d<f;++d)s(c[d],u);return u.length<2&&u.push(u[0]),u}function a(c){for(var u=o(c);u.length<4;)u.push(u[0]);return u}function l(c){return c.map(a)}function h(c){var u=c.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:c.geometries.map(h)};case"Point":d=r(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(r);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return h(e)}function ile(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(h,c){var u=i.arcs[h<0?~h:h],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=h,e[c]=d)}),e.forEach(function(h){var c=a(h),u=c[0],d=c[1],f,g;if(f=s[u])if(delete s[f.end],f.push(h),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(h),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[h],n[f.start=u]=s[f.end=d]=f});function a(h){var c=i.arcs[h<0?~h:h],u=c[0],d;return i.transform?(d=[0,0],c.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=c[c.length-1],h<0?[d,u]:[u,d]}function l(h,c){for(var u in h){var d=h[u];delete c[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(h){t[h<0?~h:h]||r.push([h])}),r}function nle(i){return Wj(i,sle.apply(this,arguments))}function sle(i,e,t){var n,s,r;if(arguments.length>1)n=rle(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:ile(i,n)}}function rle(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function h(u){u.forEach(l)}function c(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(c);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":h(u.arcs);break}}return c(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}function Eb(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function ole(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function Qk(i){let e,t,n;i.length!==2?(e=Eb,t=(a,l)=>Eb(i(a),l),n=(a,l)=>i(a)-l):(e=i===Eb||i===ole?i:ale,t=i,n=i);function s(a,l,h=0,c=a.length){if(h<c){if(e(l,l)!==0)return c;do{const u=h+c>>>1;t(a[u],l)<0?h=u+1:c=u}while(h<c)}return h}function r(a,l,h=0,c=a.length){if(h<c){if(e(l,l)!==0)return c;do{const u=h+c>>>1;t(a[u],l)<=0?h=u+1:c=u}while(h<c)}return h}function o(a,l,h=0,c=a.length){const u=s(a,l,h,c-1);return u>h&&n(a[u-1],l)>-n(a[u],l)?u-1:u}return{left:s,center:o,right:r}}function ale(){return 0}function zj(i){return i===null?NaN:+i}const Hj=Qk(Eb),aN=Hj.right;Hj.left;Qk(zj).center;const R0=aN;function lle(i,e){let t,n;if(e===void 0)for(const s of i)s!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)));else{let s=-1;for(let r of i)(r=e(r,++s,i))!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)))}return[t,n]}class Lf extends Map{constructor(e,t=ule){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(W6(this,e))}has(e){return super.has(W6(this,e))}set(e,t){return super.set(hle(this,e),t)}delete(e){return super.delete(cle(this,e))}}function W6({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):t}function hle({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):(i.set(n,t),t)}function cle({_intern:i,_key:e},t){const n=e(t);return i.has(n)&&(t=i.get(n),i.delete(n)),t}function ule(i){return i!==null&&typeof i=="object"?i.valueOf():i}function lN(i){return i}function Xk(i,...e){return Uj(i,lN,lN,e)}function dle(i,...e){return Uj(i,Array.from,lN,e)}function Uj(i,e,t,n){return function s(r,o){if(o>=n.length)return t(r);const a=new Lf,l=n[o++];let h=-1;for(const c of r){const u=l(c,++h,r),d=a.get(u);d?d.push(c):a.set(u,[c])}for(const[c,u]of a)a.set(c,s(u,o));return e(a)}(i,0)}var hN=Math.sqrt(50),cN=Math.sqrt(10),uN=Math.sqrt(2);function xx(i,e,t){var n,s=-1,r,o,a;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((n=e<i)&&(r=i,i=e,e=r),(a=$j(i,e,t))===0||!isFinite(a))return[];if(a>0){let l=Math.round(i/a),h=Math.round(e/a);for(l*a<i&&++l,h*a>e&&--h,o=new Array(r=h-l+1);++s<r;)o[s]=(l+s)*a}else{a=-a;let l=Math.round(i*a),h=Math.round(e*a);for(l/a<i&&++l,h/a>e&&--h,o=new Array(r=h-l+1);++s<r;)o[s]=(l+s)/a}return n&&o.reverse(),o}function $j(i,e,t){var n=(e-i)/Math.max(0,t),s=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,s);return s>=0?(r>=hN?10:r>=cN?5:r>=uN?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(r>=hN?10:r>=cN?5:r>=uN?2:1)}function Ef(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=hN?s*=10:r>=cN?s*=5:r>=uN&&(s*=2),e<i?-s:s}function jj(i,e,t=zj){if(n=i.length){if((e=+e)<=0||n<2)return+t(i[0],0,i);if(e>=1)return+t(i[n-1],n-1,i);var n,s=(n-1)*e,r=Math.floor(s),o=+t(i[r],r,i),a=+t(i[r+1],r+1,i);return o+(a-o)*(s-r)}}function Iv(i,e,t){i=+i,e=+e,t=(s=arguments.length)<2?(e=i,i=0,1):s<3?1:+t;for(var n=-1,s=Math.max(0,Math.ceil((e-i)/t))|0,r=new Array(s);++n<s;)r[n]=i+n*t;return r}function Ny(i,e){let t=0;if(e===void 0)for(let n of i)(n=+n)&&(t+=n);else{let n=-1;for(let s of i)(s=+e(s,++n,i))&&(t+=s)}return t}function fle(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function Dx(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function Nm(i){return i=Dx(Math.abs(i)),i?i[1]:NaN}function gle(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function ple(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var mle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Su(i){if(!(e=mle.exec(i)))throw new Error("invalid format: "+i);var e;return new kO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Su.prototype=kO.prototype;function kO(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}kO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _le(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var qj;function ble(i,e){var t=Dx(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(qj=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+Dx(i,Math.max(0,e+r-1))[0]}function z6(i,e){var t=Dx(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const H6={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:fle,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>z6(i*100,e),r:z6,s:ble,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function U6(i){return i}var $6=Array.prototype.map,j6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vle(i){var e=i.grouping===void 0||i.thousands===void 0?U6:gle($6.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?U6:ple($6.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function h(u){u=Su(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,b=u.width,_=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(_=!0,x="g"):H6[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var L=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",k=H6[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(M){var j=L,$=S,ie,pe,be;if(x==="c")$=k(M)+$,M="";else{M=+M;var ye=M<0||1/M<0;if(M=isNaN(M)?l:k(Math.abs(M),w),y&&(M=_le(M)),ye&&+M==0&&g!=="+"&&(ye=!1),j=(ye?g==="("?g:a:g==="-"||g==="("?"":g)+j,$=(x==="s"?j6[8+qj/3]:"")+$+(ye&&g==="("?")":""),D){for(ie=-1,pe=M.length;++ie<pe;)if(be=M.charCodeAt(ie),48>be||be>57){$=(be===46?s+M.slice(ie+1):M.slice(ie))+$,M=M.slice(0,ie);break}}}_&&!m&&(M=e(M,1/0));var Ee=j.length+M.length+$.length,we=Ee<b?new Array(b-Ee+1).join(d):"";switch(_&&m&&(M=e(we+M,we.length?b-$.length:1/0),we=""),f){case"<":M=j+M+$+we;break;case"=":M=j+we+M+$;break;case"^":M=we.slice(0,Ee=we.length>>1)+j+M+$+we.slice(Ee);break;default:M=we+j+M+$;break}return r(M)}return T.toString=function(){return u+""},T}function c(u,d){var f=h((u=Su(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(Nm(d)/3)))*3,p=Math.pow(10,-g),m=j6[8+g/3];return function(b){return f(p*b)+m}}return{format:h,formatPrefix:c}}var My,vs,LO;wle({thousands:",",grouping:[3],currency:["$",""]});function wle(i){return My=vle(i),vs=My.format,LO=My.formatPrefix,My}function Gj(i){return Math.max(0,-Nm(Math.abs(i)))}function Kj(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nm(e)/3)))*3-Nm(Math.abs(i)))}function Zj(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,Nm(e)-Nm(i))+1}var SE=new Date,xE=new Date;function os(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],h;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(h=new Date(+r)),e(r,a),i(r);while(h<r&&r<o);return l},s.filter=function(r){return os(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return SE.setTime(+r),xE.setTime(+o),i(SE),i(xE),Math.floor(t(SE,xE))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var kx=os(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});kx.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?os(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):kx};const EO=kx;kx.range;const qh=1e3,Ro=qh*60,Gh=Ro*60,Af=Gh*24,AO=Af*7,q6=Af*30,DE=Af*365;var Yj=os(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*qh)},function(i,e){return(e-i)/qh},function(i){return i.getUTCSeconds()});const eu=Yj;Yj.range;var Qj=os(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*qh)},function(i,e){i.setTime(+i+e*Ro)},function(i,e){return(e-i)/Ro},function(i){return i.getMinutes()});const IO=Qj;Qj.range;var Xj=os(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*qh-i.getMinutes()*Ro)},function(i,e){i.setTime(+i+e*Gh)},function(i,e){return(e-i)/Gh},function(i){return i.getHours()});const TO=Xj;Xj.range;var Jj=os(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*Ro)/Af,i=>i.getDate()-1);const rf=Jj;Jj.range;function cg(i){return os(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ro)/AO})}var xw=cg(0),Lx=cg(1),yle=cg(2),Cle=cg(3),Mm=cg(4),Sle=cg(5),xle=cg(6);xw.range;Lx.range;yle.range;Cle.range;Mm.range;Sle.range;xle.range;var eq=os(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const Ex=eq;eq.range;var NO=os(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});NO.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:os(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const xu=NO;NO.range;var tq=os(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*Ro)},function(i,e){return(e-i)/Ro},function(i){return i.getUTCMinutes()});const MO=tq;tq.range;var iq=os(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*Gh)},function(i,e){return(e-i)/Gh},function(i){return i.getUTCHours()});const RO=iq;iq.range;var nq=os(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/Af},function(i){return i.getUTCDate()-1});const of=nq;nq.range;function ug(i){return os(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/AO})}var Dw=ug(0),Ax=ug(1),Dle=ug(2),kle=ug(3),Rm=ug(4),Lle=ug(5),Ele=ug(6);Dw.range;Ax.range;Dle.range;kle.range;Rm.range;Lle.range;Ele.range;var sq=os(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const Ix=sq;sq.range;var OO=os(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});OO.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:os(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const Du=OO;OO.range;function rq(i,e,t,n,s,r){const o=[[eu,1,qh],[eu,5,5*qh],[eu,15,15*qh],[eu,30,30*qh],[r,1,Ro],[r,5,5*Ro],[r,15,15*Ro],[r,30,30*Ro],[s,1,Gh],[s,3,3*Gh],[s,6,6*Gh],[s,12,12*Gh],[n,1,Af],[n,2,2*Af],[t,1,AO],[e,1,q6],[e,3,3*q6],[i,1,DE]];function a(h,c,u){const d=c<h;d&&([h,c]=[c,h]);const f=u&&typeof u.range=="function"?u:l(h,c,u),g=f?f.range(h,+c+1):[];return d?g.reverse():g}function l(h,c,u){const d=Math.abs(c-h)/u,f=Qk(([,,m])=>m).right(o,d);if(f===o.length)return i.every(Ef(h/DE,c/DE,u));if(f===0)return EO.every(Math.max(Ef(h,c,u),1));const[g,p]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(p)}return[a,l]}const[Ale,Ile]=rq(Du,Ix,Dw,of,RO,MO),[Tle,Nle]=rq(xu,Ex,xw,rf,TO,IO),Tv="year",Nv="quarter",Mv="month",Rv="week",Ov="date",Jk="day",PO="dayofyear",Pv="hours",Fv="minutes",Bv="seconds",eL="milliseconds",Mle=[Tv,Nv,Mv,Rv,Ov,Jk,PO,Pv,Fv,Bv,eL];Mle.reduce((i,e,t)=>(i[e]=1+t,i),{});const Rle={[Tv]:xu,[Nv]:Ex.every(3),[Mv]:Ex,[Rv]:xw,[Ov]:rf,[Jk]:rf,[PO]:rf,[Pv]:TO,[Fv]:IO,[Bv]:eu,[eL]:EO},Ole={[Tv]:Du,[Nv]:Ix.every(3),[Mv]:Ix,[Rv]:Dw,[Ov]:of,[Jk]:of,[PO]:of,[Pv]:RO,[Fv]:MO,[Bv]:eu,[eL]:EO};function Ple(i){return Rle[i]}function Fle(i){return Ole[i]}function kE(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function LE(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function S_(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function oq(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,h=x_(s),c=D_(s),u=x_(r),d=D_(r),f=x_(o),g=D_(o),p=x_(a),m=D_(a),b=x_(l),_=D_(l),w={a:ye,A:Ee,b:we,B:Dt,c:null,d:X6,e:X6,f:ohe,g:mhe,G:bhe,H:nhe,I:she,j:rhe,L:aq,m:ahe,M:lhe,p:$e,q:Qe,Q:t8,s:i8,S:hhe,u:che,U:uhe,V:dhe,w:fhe,W:ghe,x:null,X:null,y:phe,Y:_he,Z:vhe,"%":e8},y={a:pt,A:lt,b:mi,B:te,c:null,d:J6,e:J6,f:She,g:Mhe,G:Ohe,H:whe,I:yhe,j:Che,L:hq,m:xhe,M:Dhe,p:se,q:me,Q:t8,s:i8,S:khe,u:Lhe,U:Ehe,V:Ahe,w:Ihe,W:The,x:null,X:null,y:Nhe,Y:Rhe,Z:Phe,"%":e8},x={a:T,A:M,b:j,B:$,c:ie,d:Y6,e:Y6,f:Jle,g:Z6,G:K6,H:Q6,I:Q6,j:Zle,L:Xle,m:Kle,M:Yle,p:D,q:Gle,Q:the,s:ihe,S:Qle,u:Hle,U:Ule,V:$le,w:zle,W:jle,x:pe,X:be,y:Z6,Y:K6,Z:qle,"%":ehe};w.x=L(t,w),w.X=L(n,w),w.c=L(e,w),y.x=L(t,y),y.X=L(n,y),y.c=L(e,y);function L(G,fe){return function(R){var E=[],he=-1,ce=0,je=G.length,Me,Je,on;for(R instanceof Date||(R=new Date(+R));++he<je;)G.charCodeAt(he)===37&&(E.push(G.slice(ce,he)),(Je=G6[Me=G.charAt(++he)])!=null?Me=G.charAt(++he):Je=Me==="e"?" ":"0",(on=fe[Me])&&(Me=on(R,Je)),E.push(Me),ce=he+1);return E.push(G.slice(ce,he)),E.join("")}}function S(G,fe){return function(R){var E=S_(1900,void 0,1),he=k(E,G,R+="",0),ce,je;if(he!=R.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(fe&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(ce=LE(S_(E.y,0,1)),je=ce.getUTCDay(),ce=je>4||je===0?Ax.ceil(ce):Ax(ce),ce=of.offset(ce,(E.V-1)*7),E.y=ce.getUTCFullYear(),E.m=ce.getUTCMonth(),E.d=ce.getUTCDate()+(E.w+6)%7):(ce=kE(S_(E.y,0,1)),je=ce.getDay(),ce=je>4||je===0?Lx.ceil(ce):Lx(ce),ce=rf.offset(ce,(E.V-1)*7),E.y=ce.getFullYear(),E.m=ce.getMonth(),E.d=ce.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),je="Z"in E?LE(S_(E.y,0,1)).getUTCDay():kE(S_(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(je+5)%7:E.w+E.U*7-(je+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,LE(E)):kE(E)}}function k(G,fe,R,E){for(var he=0,ce=fe.length,je=R.length,Me,Je;he<ce;){if(E>=je)return-1;if(Me=fe.charCodeAt(he++),Me===37){if(Me=fe.charAt(he++),Je=x[Me in G6?fe.charAt(he++):Me],!Je||(E=Je(G,R,E))<0)return-1}else if(Me!=R.charCodeAt(E++))return-1}return E}function D(G,fe,R){var E=h.exec(fe.slice(R));return E?(G.p=c.get(E[0].toLowerCase()),R+E[0].length):-1}function T(G,fe,R){var E=f.exec(fe.slice(R));return E?(G.w=g.get(E[0].toLowerCase()),R+E[0].length):-1}function M(G,fe,R){var E=u.exec(fe.slice(R));return E?(G.w=d.get(E[0].toLowerCase()),R+E[0].length):-1}function j(G,fe,R){var E=b.exec(fe.slice(R));return E?(G.m=_.get(E[0].toLowerCase()),R+E[0].length):-1}function $(G,fe,R){var E=p.exec(fe.slice(R));return E?(G.m=m.get(E[0].toLowerCase()),R+E[0].length):-1}function ie(G,fe,R){return k(G,e,fe,R)}function pe(G,fe,R){return k(G,t,fe,R)}function be(G,fe,R){return k(G,n,fe,R)}function ye(G){return o[G.getDay()]}function Ee(G){return r[G.getDay()]}function we(G){return l[G.getMonth()]}function Dt(G){return a[G.getMonth()]}function $e(G){return s[+(G.getHours()>=12)]}function Qe(G){return 1+~~(G.getMonth()/3)}function pt(G){return o[G.getUTCDay()]}function lt(G){return r[G.getUTCDay()]}function mi(G){return l[G.getUTCMonth()]}function te(G){return a[G.getUTCMonth()]}function se(G){return s[+(G.getUTCHours()>=12)]}function me(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var fe=L(G+="",w);return fe.toString=function(){return G},fe},parse:function(G){var fe=S(G+="",!1);return fe.toString=function(){return G},fe},utcFormat:function(G){var fe=L(G+="",y);return fe.toString=function(){return G},fe},utcParse:function(G){var fe=S(G+="",!0);return fe.toString=function(){return G},fe}}}var G6={"-":"",_:" ",0:"0"},as=/^\s*\d+/,Ble=/^%/,Vle=/[\\^$*+?|[\]().{}]/g;function ni(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function Wle(i){return i.replace(Vle,"\\$&")}function x_(i){return new RegExp("^(?:"+i.map(Wle).join("|")+")","i")}function D_(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function zle(i,e,t){var n=as.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function Hle(i,e,t){var n=as.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function Ule(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function $le(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function jle(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function K6(i,e,t){var n=as.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function Z6(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function qle(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function Gle(i,e,t){var n=as.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function Kle(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function Y6(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function Zle(i,e,t){var n=as.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function Q6(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function Yle(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function Qle(i,e,t){var n=as.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function Xle(i,e,t){var n=as.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function Jle(i,e,t){var n=as.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function ehe(i,e,t){var n=Ble.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function the(i,e,t){var n=as.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function ihe(i,e,t){var n=as.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function X6(i,e){return ni(i.getDate(),e,2)}function nhe(i,e){return ni(i.getHours(),e,2)}function she(i,e){return ni(i.getHours()%12||12,e,2)}function rhe(i,e){return ni(1+rf.count(xu(i),i),e,3)}function aq(i,e){return ni(i.getMilliseconds(),e,3)}function ohe(i,e){return aq(i,e)+"000"}function ahe(i,e){return ni(i.getMonth()+1,e,2)}function lhe(i,e){return ni(i.getMinutes(),e,2)}function hhe(i,e){return ni(i.getSeconds(),e,2)}function che(i){var e=i.getDay();return e===0?7:e}function uhe(i,e){return ni(xw.count(xu(i)-1,i),e,2)}function lq(i){var e=i.getDay();return e>=4||e===0?Mm(i):Mm.ceil(i)}function dhe(i,e){return i=lq(i),ni(Mm.count(xu(i),i)+(xu(i).getDay()===4),e,2)}function fhe(i){return i.getDay()}function ghe(i,e){return ni(Lx.count(xu(i)-1,i),e,2)}function phe(i,e){return ni(i.getFullYear()%100,e,2)}function mhe(i,e){return i=lq(i),ni(i.getFullYear()%100,e,2)}function _he(i,e){return ni(i.getFullYear()%1e4,e,4)}function bhe(i,e){var t=i.getDay();return i=t>=4||t===0?Mm(i):Mm.ceil(i),ni(i.getFullYear()%1e4,e,4)}function vhe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ni(e/60|0,"0",2)+ni(e%60,"0",2)}function J6(i,e){return ni(i.getUTCDate(),e,2)}function whe(i,e){return ni(i.getUTCHours(),e,2)}function yhe(i,e){return ni(i.getUTCHours()%12||12,e,2)}function Che(i,e){return ni(1+of.count(Du(i),i),e,3)}function hq(i,e){return ni(i.getUTCMilliseconds(),e,3)}function She(i,e){return hq(i,e)+"000"}function xhe(i,e){return ni(i.getUTCMonth()+1,e,2)}function Dhe(i,e){return ni(i.getUTCMinutes(),e,2)}function khe(i,e){return ni(i.getUTCSeconds(),e,2)}function Lhe(i){var e=i.getUTCDay();return e===0?7:e}function Ehe(i,e){return ni(Dw.count(Du(i)-1,i),e,2)}function cq(i){var e=i.getUTCDay();return e>=4||e===0?Rm(i):Rm.ceil(i)}function Ahe(i,e){return i=cq(i),ni(Rm.count(Du(i),i)+(Du(i).getUTCDay()===4),e,2)}function Ihe(i){return i.getUTCDay()}function The(i,e){return ni(Ax.count(Du(i)-1,i),e,2)}function Nhe(i,e){return ni(i.getUTCFullYear()%100,e,2)}function Mhe(i,e){return i=cq(i),ni(i.getUTCFullYear()%100,e,2)}function Rhe(i,e){return ni(i.getUTCFullYear()%1e4,e,4)}function Ohe(i,e){var t=i.getUTCDay();return i=t>=4||t===0?Rm(i):Rm.ceil(i),ni(i.getUTCFullYear()%1e4,e,4)}function Phe(){return"+0000"}function e8(){return"%"}function t8(i){return+i}function i8(i){return Math.floor(+i/1e3)}var Gg,FO,uq,BO,dq;Fhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fhe(i){return Gg=oq(i),FO=Gg.format,uq=Gg.parse,BO=Gg.utcFormat,dq=Gg.utcParse,Gg}function ib(i){const e={};return t=>e[t]||(e[t]=i(t))}function Bhe(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=Vhe(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function Vhe(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function Whe(i){const e=ib(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=Su(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return Bhe(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=Su(o??",f");const a=Ef(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let h;if(o.precision==null)switch(o.type){case"s":return isNaN(h=Kj(a,l))||(o.precision=h),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(h=Zj(a,l))||(o.precision=h-(o.type==="e"));break}case"f":case"%":{isNaN(h=Gj(a))||(o.precision=h-(o.type==="%")*2);break}}return e(o)}}}zhe();function zhe(){return Whe({format:vs,formatPrefix:LO})}function n8(i,e,t){t=t||{},$a(t)||an("Invalid time multi-format specifier: ".concat(t));const n=e(Bv),s=e(Fv),r=e(Pv),o=e(Ov),a=e(Rv),l=e(Mv),h=e(Nv),c=e(Tv),u=i(t[eL]||".%L"),d=i(t[Bv]||":%S"),f=i(t[Fv]||"%I:%M"),g=i(t[Pv]||"%I %p"),p=i(t[Ov]||t[Jk]||"%a %d"),m=i(t[Rv]||"%b %d"),b=i(t[Mv]||"%B"),_=i(t[Nv]||"%B"),w=i(t[Tv]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:c(y)<y?h(y)<y?b:_:w)(y)}function fq(i){const e=ib(i.format),t=ib(i.utcFormat);return{timeFormat:n=>hn(n)?e(n):n8(e,Ple,n),utcFormat:n=>hn(n)?t(n):n8(t,Fle,n),timeParse:ib(i.parse),utcParse:ib(i.utcParse)}}let dN;Hhe();function Hhe(){return dN=fq({format:FO,parse:uq,utcFormat:BO,utcParse:dq})}function Uhe(i){return fq(oq(i))}function $he(i){return arguments.length?dN=Uhe(i):dN}const jhe=/^(data:|([A-Za-z]+:)?\/\/)/,qhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ghe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,s8="file://";function Khe(i,e){return t=>({options:t||{},sanitize:Yhe,load:Zhe,fileAccess:!!e,file:Qhe(e),http:Jhe(i)})}async function Zhe(i,e){const t=await this.sanitize(i,e),n=t.href;return t.localFile?this.file(n):this.http(n,e)}async function Yhe(i,e){e=DO({},this.options,e);const t=this.fileAccess,n={href:null};let s,r,o;const a=qhe.test(i.replace(Ghe,""));(i==null||typeof i!="string"||!a)&&an("Sanitize failure, invalid URI: "+Yk(i));const l=jhe.test(i);return(o=e.baseURL)&&!l&&(!i.startsWith("/")&&!o.endsWith("/")&&(i="/"+i),i=o+i),r=(s=i.startsWith(s8))||e.mode==="file"||e.mode!=="http"&&!l&&t,s?i=i.slice(s8.length):i.startsWith("//")&&(e.defaultProtocol==="file"?(i=i.slice(2),r=!0):i=(e.defaultProtocol||"http")+":"+i),Object.defineProperty(n,"localFile",{value:!!r}),n.href=i,e.target&&(n.target=e.target+""),e.rel&&(n.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(n.crossOrigin=e.crossOrigin+""),n}function Qhe(i){return i?e=>new Promise((t,n)=>{i.readFile(e,(s,r)=>{s?n(s):t(r)})}):Xhe}async function Xhe(){an("No file system access.")}function Jhe(i){return i?async function(e,t){const n=DO({},this.options.http,t),s=t&&t.response,r=await i(e,n);return r.ok?Nr(r[s])?r[s]():r.text():an(r.status+""+r.statusText)}:ece}async function ece(){an("No HTTP fetch method available.")}const tce=i=>i!=null&&i===i,ice=i=>i==="true"||i==="false"||i===!0||i===!1,nce=i=>!Number.isNaN(Date.parse(i)),gq=i=>!Number.isNaN(+i)&&!(i instanceof Date),sce=i=>gq(i)&&Number.isInteger(+i),r8={boolean:Uae,integer:Av,number:Av,date:jae,string:qae,unknown:Gk},Ry=[ice,sce,gq,nce],rce=["boolean","integer","number","date"];function oce(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=Ry.length,s=Ry.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&tce(l)&&!Ry[a](l)&&(s[a]=0,++o,o===Ry.length))return"string";return rce[s.reduce((r,o)=>r===0?o:r,0)-1]}function ace(i,e){return e.reduce((t,n)=>(t[n]=oce(i,n),t),{})}function o8(i){const e=function(t,n){const s={delimiter:i};return VO(t,n?DO(n,s):s)};return e.responseType="text",e}function VO(i,e){return e.header&&(i=e.header.map(Yk).join(e.delimiter)+`
`+i),Vj(e.delimiter).parse(i+"")}VO.responseType="text";function lce(i){return typeof Buffer=="function"&&Nr(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function WO(i,e){const t=e&&e.property?qk(e.property):Gk;return $a(i)&&!lce(i)?hce(t(i),e):t(JSON.parse(i))}WO.responseType="json";function hce(i,e){return!lo(i)&&zae(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const cce={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function pq(i,e){let t,n,s,r;return i=WO(i,e),e&&e.feature?(t=tle,s=e.feature):e&&e.mesh?(t=nle,s=e.mesh,r=cce[e.filter]):an("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):an("Invalid TopoJSON object: "+s),n&&n.features||[n]}pq.responseType="json";const EE={dsv:VO,csv:o8(","),tsv:o8("	"),json:WO,topojson:pq};function mq(i,e){return arguments.length>1?(EE[i]=e,this):Wd(EE,i)?EE[i]:null}function _q(i,e,t,n){e=e||{};const s=mq(e.type||"json");return s||an("Unknown data format type: "+e.type),i=s(i,e),e.parse&&uce(i,e.parse,t,n),Wd(i,"columns")&&delete i.columns,i}function uce(i,e,t,n){if(!i.length)return;const s=$he();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,h,c,u;e==="auto"&&(e=ace(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!r8[g])throw Error("Illegal format pattern: "+f+":"+g);return r8[g]});for(l=0,c=i.length,u=r.length;l<c;++l)for(o=i[l],h=0;h<u;++h)a=r[h],o[a]=d[h](o[a])}const tL=Khe(typeof fetch<"u"&&fetch,null);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var AE;const Tx=window,Om=Tx.trustedTypes,a8=Om?Om.createPolicy("lit-html",{createHTML:i=>i}):void 0,jc=`lit$${(Math.random()+"").slice(9)}$`,bq="?"+jc,dce=`<${bq}>`,Pm=document,Vv=(i="")=>Pm.createComment(i),Wv=i=>i===null||typeof i!="object"&&typeof i!="function",vq=Array.isArray,fce=i=>vq(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",k_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,l8=/-->/g,h8=/>/g,ud=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),c8=/'/g,u8=/"/g,wq=/^(?:script|style|textarea|title)$/i,gce=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),zh=gce(1),zv=Symbol.for("lit-noChange"),Hn=Symbol.for("lit-nothing"),d8=new WeakMap,Qp=Pm.createTreeWalker(Pm,129,null,!1),pce=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=k_;for(let l=0;l<t;l++){const h=i[l];let c,u,d=-1,f=0;for(;f<h.length&&(o.lastIndex=f,u=o.exec(h),u!==null);)f=o.lastIndex,o===k_?u[1]==="!--"?o=l8:u[1]!==void 0?o=h8:u[2]!==void 0?(wq.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ud):u[3]!==void 0&&(o=ud):o===ud?u[0]===">"?(o=s??k_,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?ud:u[3]==='"'?u8:c8):o===u8||o===c8?o=ud:o===l8||o===h8?o=k_:(o=ud,s=void 0);const g=o===ud&&i[l+1].startsWith("/>")?" ":"";r+=o===k_?h+dce:d>=0?(n.push(c),h.slice(0,d)+"$lit$"+h.slice(d)+jc+g):h+jc+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[a8!==void 0?a8.createHTML(a):a,n]};let fN=class yq{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[h,c]=pce(e,t);if(this.el=yq.createElement(h,n),Qp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=Qp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(jc)){const f=c[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(jc),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?_ce:p[1]==="?"?vce:p[1]==="@"?wce:iL})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(wq.test(s.tagName)){const u=s.textContent.split(jc),d=u.length-1;if(d>0){s.textContent=Om?Om.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],Vv()),Qp.nextNode(),l.push({type:2,index:++r});s.append(u[d],Vv())}}}else if(s.nodeType===8)if(s.data===bq)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(jc,u+1))!==-1;)l.push({type:7,index:r}),u+=jc.length-1}r++}}static createElement(e,t){const n=Pm.createElement("template");return n.innerHTML=e,n}};function Fm(i,e,t=i,n){var s,r,o,a;if(e===zv)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const h=Wv(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),h===void 0?l=void 0:(l=new h(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=Fm(i,l._$AS(i,e.values),l,n)),e}class mce{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Pm).importNode(n,!0);Qp.currentNode=r;let o=Qp.nextNode(),a=0,l=0,h=s[0];for(;h!==void 0;){if(a===h.index){let c;h.type===2?c=new kw(o,o.nextSibling,this,e):h.type===1?c=new h.ctor(o,h.name,h.strings,this,e):h.type===6&&(c=new yce(o,this,e)),this.u.push(c),h=s[++l]}a!==(h==null?void 0:h.index)&&(o=Qp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class kw{constructor(e,t,n,s){var r;this.type=2,this._$AH=Hn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Fm(this,e,t),Wv(e)?e===Hn||e==null||e===""?(this._$AH!==Hn&&this._$AR(),this._$AH=Hn):e!==this._$AH&&e!==zv&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):fce(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==Hn&&Wv(this._$AH)?this._$AA.nextSibling.data=e:this.T(Pm.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=fN.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new mce(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=d8.get(e.strings);return t===void 0&&d8.set(e.strings,t=new fN(e)),t}k(e){vq(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new kw(this.O(Vv()),this.O(Vv()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class iL{constructor(e,t,n,s,r){this.type=1,this._$AH=Hn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Hn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=Fm(this,e,t,0),o=!Wv(e)||e!==this._$AH&&e!==zv,o&&(this._$AH=e);else{const a=e;let l,h;for(e=r[0],l=0;l<r.length-1;l++)h=Fm(this,a[n+l],t,l),h===zv&&(h=this._$AH[l]),o||(o=!Wv(h)||h!==this._$AH[l]),h===Hn?e=Hn:e!==Hn&&(e+=(h??"")+r[l+1]),this._$AH[l]=h}o&&!s&&this.j(e)}j(e){e===Hn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class _ce extends iL{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Hn?void 0:e}}const bce=Om?Om.emptyScript:"";class vce extends iL{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Hn?this.element.setAttribute(this.name,bce):this.element.removeAttribute(this.name)}}class wce extends iL{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=Fm(this,e,t,0))!==null&&n!==void 0?n:Hn)===zv)return;const s=this._$AH,r=e===Hn&&s!==Hn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==Hn&&(s===Hn||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class yce{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Fm(this,e)}}const f8=Tx.litHtmlPolyfillSupport;f8==null||f8(fN,kw),((AE=Tx.litHtmlVersions)!==null&&AE!==void 0?AE:Tx.litHtmlVersions=[]).push("2.4.0");const g8=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new kw(e.insertBefore(Vv(),a),a,void 0,t??{})}return o._$AI(i),o};function Cce(i,e){var t=i.getBoundingClientRect();return[e.clientX-t.left-i.clientLeft,e.clientY-t.top-i.clientTop]}function Nx(i,e){return i.length==e.length&&i.every((t,n)=>i[n]===e[n])}function to(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}function Lw(i){return i[i.length-1]}class Sce{constructor(e){this.container=e,this.element=document.createElement("div"),this.element.className="tooltip",this._visible=!0,this.container.appendChild(this.element),this._previousTooltipDatum=void 0,this.enabledStack=[!0],this._penaltyUntil=0,this._lastCoords=void 0,this._previousMove=0,this.clear()}set visible(e){e!=this._visible&&(this.element.style.display=e?null:"none",this._visible=e)}get visible(){return this._visible}get enabled(){return Lw(this.enabledStack)??!0}pushEnabledState(e){this.enabledStack.push(e),e||(this.visible=!1)}popEnabledState(){this.enabledStack.pop()}handleMouseMove(e){this.mouseCoords=Cce(this.container,e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-this._previousMove>500&&(this._penaltyUntil=t+70),this._lastCoords&&xce(this.mouseCoords,this._lastCoords)>20&&(this._penaltyUntil=t+400),this._lastCoords=this.mouseCoords,this.visible&&this.updatePlacement(),this._previousMove=t}updatePlacement(){const[e,t]=this.mouseCoords;let n=e+20;n>this.container.clientWidth-this.element.offsetWidth&&(n=e-20-this.element.offsetWidth),this.element.style.left=n+"px",this.element.style.top=Math.min(t+20,this.container.clientHeight-this.element.offsetHeight)+"px"}setContent(e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(g8("",this.element),this.visible=!1),this._previousTooltipDatum=void 0;return}g8(e,this.element),this.visible=!0,this.updatePlacement()}clear(){this._previousTooltipDatum=void 0,this.setContent(void 0)}updateWithDatum(e,t){e!==this._previousTooltipDatum&&(this._previousTooltipDatum=e,t||(t=n=>Promise.resolve(zh`${JSON.stringify(n)}`)),t(e).then(n=>this.setContent(n)).catch(n=>{if(n!=="debounced")throw n}))}_isPenalty(){return this._penaltyUntil&&this._penaltyUntil>performance.now()}}function xce(i,e){let t=0;for(let n=0;n<i.length;n++)t+=(i[n]-e[n])**2;return Math.sqrt(t)}const Dce="RawCode",kce="Literal",Lce="Property",Ece="Identifier",Ace="ArrayExpression",Ice="BinaryExpression",Tce="CallExpression",Nce="ConditionalExpression",Mce="LogicalExpression",Rce="MemberExpression",Oce="ObjectExpression",Pce="UnaryExpression";function ja(i){this.type=i}ja.prototype.visit=function(i){let e,t,n;if(i(this))return 1;for(e=Fce(this),t=0,n=e.length;t<n;++t)if(e[t].visit(i))return 1};function Fce(i){switch(i.type){case Ace:return i.elements;case Ice:case Mce:return[i.left,i.right];case Tce:return[i.callee].concat(i.arguments);case Nce:return[i.test,i.consequent,i.alternate];case Rce:return[i.object,i.property];case Oce:return i.properties;case Lce:return[i.key,i.value];case Pce:return[i.argument];case Ece:case kce:case Dce:default:return[]}}var eh,qe,ge,Fs,di,nL=1,Ew=2,If=3,Zu=4,sL=5,dg=6,vr=7,Aw=8,Bce=9;eh={};eh[nL]="Boolean";eh[Ew]="<end>";eh[If]="Identifier";eh[Zu]="Keyword";eh[sL]="Null";eh[dg]="Numeric";eh[vr]="Punctuator";eh[Aw]="String";eh[Bce]="RegularExpression";var Vce="ArrayExpression",Wce="BinaryExpression",zce="CallExpression",Hce="ConditionalExpression",Cq="Identifier",Uce="Literal",$ce="LogicalExpression",jce="MemberExpression",qce="ObjectExpression",Gce="Property",Kce="UnaryExpression",ns="Unexpected token %0",Zce="Unexpected number",Yce="Unexpected string",Qce="Unexpected identifier",Xce="Unexpected reserved word",Jce="Unexpected end of input",gN="Invalid regular expression",IE="Invalid regular expression: missing /",Sq="Octal literals are not allowed in strict mode.",eue="Duplicate data property in object literal not allowed in strict mode",gs="ILLEGAL",Hv="Disabled.",tue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),iue=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function rL(i,e){if(!i)throw new Error("ASSERT: "+e)}function Ih(i){return i>=48&&i<=57}function zO(i){return"0123456789abcdefABCDEF".indexOf(i)>=0}function Ab(i){return"01234567".indexOf(i)>=0}function nue(i){return i===32||i===9||i===11||i===12||i===160||i>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(i)>=0}function Uv(i){return i===10||i===13||i===8232||i===8233}function Iw(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i===92||i>=128&&tue.test(String.fromCharCode(i))}function Mx(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||i===92||i>=128&&iue.test(String.fromCharCode(i))}const sue={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function xq(){for(;ge<Fs;){const i=qe.charCodeAt(ge);if(nue(i)||Uv(i))++ge;else break}}function pN(i){var e,t,n,s=0;for(t=i==="u"?4:2,e=0;e<t;++e)ge<Fs&&zO(qe[ge])?(n=qe[ge++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase())):ti({},ns,gs);return String.fromCharCode(s)}function rue(){var i,e,t,n;for(i=qe[ge],e=0,i==="}"&&ti({},ns,gs);ge<Fs&&(i=qe[ge++],!!zO(i));)e=e*16+"0123456789abcdef".indexOf(i.toLowerCase());return(e>1114111||i!=="}")&&ti({},ns,gs),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(t,n))}function Dq(){var i,e;for(i=qe.charCodeAt(ge++),e=String.fromCharCode(i),i===92&&(qe.charCodeAt(ge)!==117&&ti({},ns,gs),++ge,i=pN("u"),(!i||i==="\\"||!Iw(i.charCodeAt(0)))&&ti({},ns,gs),e=i);ge<Fs&&(i=qe.charCodeAt(ge),!!Mx(i));)++ge,e+=String.fromCharCode(i),i===92&&(e=e.substr(0,e.length-1),qe.charCodeAt(ge)!==117&&ti({},ns,gs),++ge,i=pN("u"),(!i||i==="\\"||!Mx(i.charCodeAt(0)))&&ti({},ns,gs),e+=i);return e}function oue(){var i,e;for(i=ge++;ge<Fs;){if(e=qe.charCodeAt(ge),e===92)return ge=i,Dq();if(Mx(e))++ge;else break}return qe.slice(i,ge)}function aue(){var i,e,t;return i=ge,e=qe.charCodeAt(ge)===92?Dq():oue(),e.length===1?t=If:sue.hasOwnProperty(e)?t=Zu:e==="null"?t=sL:e==="true"||e==="false"?t=nL:t=If,{type:t,value:e,start:i,end:ge}}function TE(){var i=ge,e=qe.charCodeAt(ge),t,n=qe[ge],s,r,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ge,{type:vr,value:String.fromCharCode(e),start:i,end:ge};default:if(t=qe.charCodeAt(ge+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ge+=2,{type:vr,value:String.fromCharCode(e)+String.fromCharCode(t),start:i,end:ge};case 33:case 61:return ge+=2,qe.charCodeAt(ge)===61&&++ge,{type:vr,value:qe.slice(i,ge),start:i,end:ge}}}if(o=qe.substr(ge,4),o===">>>=")return ge+=4,{type:vr,value:o,start:i,end:ge};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return ge+=3,{type:vr,value:r,start:i,end:ge};if(s=r.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return ge+=2,{type:vr,value:s,start:i,end:ge};if(s==="//"&&ti({},ns,gs),"<>=!+-*%&|^/".indexOf(n)>=0)return++ge,{type:vr,value:n,start:i,end:ge};ti({},ns,gs)}function lue(i){let e="";for(;ge<Fs&&zO(qe[ge]);)e+=qe[ge++];return e.length===0&&ti({},ns,gs),Iw(qe.charCodeAt(ge))&&ti({},ns,gs),{type:dg,value:parseInt("0x"+e,16),start:i,end:ge}}function hue(i){let e="0"+qe[ge++];for(;ge<Fs&&Ab(qe[ge]);)e+=qe[ge++];return(Iw(qe.charCodeAt(ge))||Ih(qe.charCodeAt(ge)))&&ti({},ns,gs),{type:dg,value:parseInt(e,8),octal:!0,start:i,end:ge}}function p8(){var i,e,t;if(t=qe[ge],rL(Ih(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=ge,i="",t!=="."){if(i=qe[ge++],t=qe[ge],i==="0"){if(t==="x"||t==="X")return++ge,lue(e);if(Ab(t))return hue(e);t&&Ih(t.charCodeAt(0))&&ti({},ns,gs)}for(;Ih(qe.charCodeAt(ge));)i+=qe[ge++];t=qe[ge]}if(t==="."){for(i+=qe[ge++];Ih(qe.charCodeAt(ge));)i+=qe[ge++];t=qe[ge]}if(t==="e"||t==="E")if(i+=qe[ge++],t=qe[ge],(t==="+"||t==="-")&&(i+=qe[ge++]),Ih(qe.charCodeAt(ge)))for(;Ih(qe.charCodeAt(ge));)i+=qe[ge++];else ti({},ns,gs);return Iw(qe.charCodeAt(ge))&&ti({},ns,gs),{type:dg,value:parseFloat(i),start:e,end:ge}}function cue(){var i="",e,t,n,s,r=!1;for(e=qe[ge],rL(e==="'"||e==='"',"String literal must starts with a quote"),t=ge,++ge;ge<Fs;)if(n=qe[ge++],n===e){e="";break}else if(n==="\\")if(n=qe[ge++],!n||!Uv(n.charCodeAt(0)))switch(n){case"u":case"x":qe[ge]==="{"?(++ge,i+=rue()):i+=pN(n);break;case"n":i+=`
`;break;case"r":i+="\r";break;case"t":i+="	";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Ab(n)?(s="01234567".indexOf(n),s!==0&&(r=!0),ge<Fs&&Ab(qe[ge])&&(r=!0,s=s*8+"01234567".indexOf(qe[ge++]),"0123".indexOf(n)>=0&&ge<Fs&&Ab(qe[ge])&&(s=s*8+"01234567".indexOf(qe[ge++]))),i+=String.fromCharCode(s)):i+=n;break}else n==="\r"&&qe[ge]===`
`&&++ge;else{if(Uv(n.charCodeAt(0)))break;i+=n}return e!==""&&ti({},ns,gs),{type:Aw,value:i,octal:r,start:t,end:ge}}function uue(i,e){let t=i;e.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,s)=>{if(parseInt(s,16)<=1114111)return"x";ti({},gN)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{ti({},gN)}try{return new RegExp(i,e)}catch{return null}}function due(){var i,e,t,n,s;for(i=qe[ge],rL(i==="/","Regular expression literal must start with a slash"),e=qe[ge++],t=!1,n=!1;ge<Fs;)if(i=qe[ge++],e+=i,i==="\\")i=qe[ge++],Uv(i.charCodeAt(0))&&ti({},IE),e+=i;else if(Uv(i.charCodeAt(0)))ti({},IE);else if(t)i==="]"&&(t=!1);else if(i==="/"){n=!0;break}else i==="["&&(t=!0);return n||ti({},IE),s=e.substr(1,e.length-2),{value:s,literal:e}}function fue(){var i,e,t;for(e="",t="";ge<Fs&&(i=qe[ge],!!Mx(i.charCodeAt(0)));)++ge,i==="\\"&&ge<Fs?ti({},ns,gs):(t+=i,e+=i);return t.search(/[^gimuy]/g)>=0&&ti({},gN,t),{value:t,literal:e}}function gue(){var i,e,t,n;return di=null,xq(),i=ge,e=due(),t=fue(),n=uue(e.value,t.value),{literal:e.literal+t.literal,value:n,regex:{pattern:e.value,flags:t.value},start:i,end:ge}}function pue(i){return i.type===If||i.type===Zu||i.type===nL||i.type===sL}function kq(){if(xq(),ge>=Fs)return{type:Ew,start:ge,end:ge};const i=qe.charCodeAt(ge);return Iw(i)?aue():i===40||i===41||i===59?TE():i===39||i===34?cue():i===46?Ih(qe.charCodeAt(ge+1))?p8():TE():Ih(i)?p8():TE()}function wr(){const i=di;return ge=i.end,di=kq(),ge=i.end,i}function Lq(){const i=ge;di=kq(),ge=i}function mue(i){const e=new ja(Vce);return e.elements=i,e}function m8(i,e,t){const n=new ja(i==="||"||i==="&&"?$ce:Wce);return n.operator=i,n.left=e,n.right=t,n}function _ue(i,e){const t=new ja(zce);return t.callee=i,t.arguments=e,t}function bue(i,e,t){const n=new ja(Hce);return n.test=i,n.consequent=e,n.alternate=t,n}function HO(i){const e=new ja(Cq);return e.name=i,e}function nb(i){const e=new ja(Uce);return e.value=i.value,e.raw=qe.slice(i.start,i.end),i.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=i.regex),e}function _8(i,e,t){const n=new ja(jce);return n.computed=i==="[",n.object=e,n.property=t,n.computed||(t.member=!0),n}function vue(i){const e=new ja(qce);return e.properties=i,e}function b8(i,e,t){const n=new ja(Gce);return n.key=e,n.value=t,n.kind=i,n}function wue(i,e){const t=new ja(Kce);return t.operator=i,t.argument=e,t.prefix=!0,t}function ti(i,e){var t,n=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(r,o)=>(rL(o<n.length,"Message reference must be in range"),n[o]));throw t=new Error(s),t.index=ge,t.description=s,t}function oL(i){i.type===Ew&&ti(i,Jce),i.type===dg&&ti(i,Zce),i.type===Aw&&ti(i,Yce),i.type===If&&ti(i,Qce),i.type===Zu&&ti(i,Xce),ti(i,ns,i.value)}function Bs(i){const e=wr();(e.type!==vr||e.value!==i)&&oL(e)}function Ui(i){return di.type===vr&&di.value===i}function NE(i){return di.type===Zu&&di.value===i}function yue(){const i=[];for(ge=di.start,Bs("[");!Ui("]");)Ui(",")?(wr(),i.push(null)):(i.push(Tf()),Ui("]")||Bs(","));return wr(),mue(i)}function v8(){ge=di.start;const i=wr();return i.type===Aw||i.type===dg?(i.octal&&ti(i,Sq),nb(i)):HO(i.value)}function Cue(){var i,e,t,n;if(ge=di.start,i=di,i.type===If)return t=v8(),Bs(":"),n=Tf(),b8("init",t,n);if(i.type===Ew||i.type===vr)oL(i);else return e=v8(),Bs(":"),n=Tf(),b8("init",e,n)}function Sue(){var i=[],e,t,n,s={},r=String;for(ge=di.start,Bs("{");!Ui("}");)e=Cue(),e.key.type===Cq?t=e.key.name:t=r(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(s,n)?ti({},eue):s[n]=!0,i.push(e),Ui("}")||Bs(",");return Bs("}"),vue(i)}function xue(){Bs("(");const i=UO();return Bs(")"),i}const Due={if:1};function kue(){var i,e,t;if(Ui("("))return xue();if(Ui("["))return yue();if(Ui("{"))return Sue();if(i=di.type,ge=di.start,i===If||Due[di.value])t=HO(wr().value);else if(i===Aw||i===dg)di.octal&&ti(di,Sq),t=nb(wr());else{if(i===Zu)throw new Error(Hv);i===nL?(e=wr(),e.value=e.value==="true",t=nb(e)):i===sL?(e=wr(),e.value=null,t=nb(e)):Ui("/")||Ui("/=")?(t=nb(gue()),Lq()):oL(wr())}return t}function Lue(){const i=[];if(Bs("("),!Ui(")"))for(;ge<Fs&&(i.push(Tf()),!Ui(")"));)Bs(",");return Bs(")"),i}function Eue(){ge=di.start;const i=wr();return pue(i)||oL(i),HO(i.value)}function Aue(){return Bs("."),Eue()}function Iue(){Bs("[");const i=UO();return Bs("]"),i}function Tue(){var i,e,t;for(i=kue();;)if(Ui("."))t=Aue(),i=_8(".",i,t);else if(Ui("("))e=Lue(),i=_ue(i,e);else if(Ui("["))t=Iue(),i=_8("[",i,t);else break;return i}function w8(){const i=Tue();if(di.type===vr&&(Ui("++")||Ui("--")))throw new Error(Hv);return i}function lS(){var i,e;if(di.type!==vr&&di.type!==Zu)e=w8();else{if(Ui("++")||Ui("--"))throw new Error(Hv);if(Ui("+")||Ui("-")||Ui("~")||Ui("!"))i=wr(),e=lS(),e=wue(i.value,e);else{if(NE("delete")||NE("void")||NE("typeof"))throw new Error(Hv);e=w8()}}return e}function y8(i){let e=0;if(i.type!==vr&&i.type!==Zu)return 0;switch(i.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function Nue(){var i,e,t,n,s,r,o,a,l,h;if(i=di,l=lS(),n=di,s=y8(n),s===0)return l;for(n.prec=s,wr(),e=[i,di],o=lS(),r=[l,n,o];(s=y8(di))>0;){for(;r.length>2&&s<=r[r.length-2].prec;)o=r.pop(),a=r.pop().value,l=r.pop(),e.pop(),t=m8(a,l,o),r.push(t);n=wr(),n.prec=s,r.push(n),e.push(di),t=lS(),r.push(t)}for(h=r.length-1,t=r[h],e.pop();h>1;)e.pop(),t=m8(r[h-1].value,r[h-2],t),h-=2;return t}function Tf(){var i,e,t;return i=Nue(),Ui("?")&&(wr(),e=Tf(),Bs(":"),t=Tf(),i=bue(i,e,t)),i}function UO(){const i=Tf();if(Ui(","))throw new Error(Hv);return i}function Mue(i){qe=i,ge=0,Fs=qe.length,di=null,Lq();const e=UO();if(di.type!==Ew)throw new Error("Unexpect token after expression.");return e}var Rue={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Oue(i){function e(o,a,l,h){let c=i(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(h<0?"":h===0?"()":"("+a.slice(1).map(i).join(",")+")")}function t(o,a,l){return h=>e(o,h,a,l)}const n="new Date",s="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&an("Missing arguments to clamp function."),o.length>3&&an("Too many arguments to clamp function.");const a=o.map(i);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",s,0),lower:t("toLowerCase",s,0),substring:t("substring",s),split:t("split",s),trim:t("trim",s,0),regexp:r,test:t("test",r),if:function(o){o.length<3&&an("Missing arguments to if function."),o.length>3&&an("Too many arguments to if function.");const a=o.map(i);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Pue(i){const e=i&&i.length-1;return e&&(i[0]==='"'&&i[e]==='"'||i[0]==="'"&&i[e]==="'")?i.slice(1,-1):i}function Fue(i){i=i||{};const e=i.allowed?Sx(i.allowed):{},t=i.forbidden?Sx(i.forbidden):{},n=i.constants||Rue,s=(i.functions||Oue)(u),r=i.globalvar,o=i.fieldvar,a=Nr(r)?r:g=>`${r}["${g}"]`;let l={},h={},c=0;function u(g){if(hn(g))return g;const p=d[g.type];return p==null&&an("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return c>0?p:Wd(t,p)?an("Illegal identifier: "+p):Wd(n,p)?n[p]:Wd(e,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=u(g.object);p&&(c+=1);const b=u(g.property);return m===o&&(h[Pue(b)]=1),p&&(c-=1),m+(p?"."+b:"["+b+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&an("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,b=Wd(s,p)&&s[p];return b||an("Unrecognized function: "+p),Nr(b)?b(m):b+"("+m.map(u).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(u).join(",")+"]",BinaryExpression:g=>"("+u(g.left)+" "+g.operator+" "+u(g.right)+")",UnaryExpression:g=>"("+g.operator+u(g.argument)+")",ConditionalExpression:g=>"("+u(g.test)+"?"+u(g.consequent)+":"+u(g.alternate)+")",LogicalExpression:g=>"("+u(g.left)+g.operator+u(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(u).join(",")+"}",Property:g=>{c+=1;const p=u(g.key);return c-=1,p+":"+u(g.value)}};function f(g){const p={code:u(g),globals:Object.keys(l),fields:Object.keys(h)};return l={},h={},p}return f.functions=s,f.constants=n,f}function $O(i,e={}){const t=Fue({forbidden:[],allowed:["datum"],globalvar:"globalThis",fieldvar:"datum"});try{const n=Mue(i),s=t(n),r=Function("datum","globalThis",`"use strict"; return (${s.code});`),o=a=>r(a,globalThis);return o.fields=s.fields,o}catch(n){throw new Error(`Invalid expression: ${i}, ${n.message}`)}}function th(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function Yu(i,e){switch(arguments.length){case 0:break;case 1:{typeof i=="function"?this.interpolator(i):this.range(i);break}default:{this.domain(i),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const mN=Symbol("implicit");function jO(){var i=new Lf,e=[],t=[],n=mN;function s(r){let o=i.get(r);if(o===void 0){if(n!==mN)return n;i.set(r,o=e.push(r)-1)}return t[o%t.length]}return s.domain=function(r){if(!arguments.length)return e.slice();e=[],i=new Lf;for(const o of r)i.has(o)||i.set(o,e.push(o)-1);return s},s.range=function(r){return arguments.length?(t=Array.from(r),s):t.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.copy=function(){return jO(e,t).unknown(n)},th.apply(s,arguments),s}function O0(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Tw(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function Qu(){}var Nf=.7,Bm=1/Nf,Xp="\\s*([+-]?\\d+)\\s*",$v="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ml="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bue=/^#([0-9a-f]{3,8})$/,Vue=new RegExp(`^rgb\\(${Xp},${Xp},${Xp}\\)$`),Wue=new RegExp(`^rgb\\(${Ml},${Ml},${Ml}\\)$`),zue=new RegExp(`^rgba\\(${Xp},${Xp},${Xp},${$v}\\)$`),Hue=new RegExp(`^rgba\\(${Ml},${Ml},${Ml},${$v}\\)$`),Uue=new RegExp(`^hsl\\(${$v},${Ml},${Ml}\\)$`),$ue=new RegExp(`^hsla\\(${$v},${Ml},${Ml},${$v}\\)$`),C8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};O0(Qu,ku,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:S8,formatHex:S8,formatHex8:jue,formatHsl:que,formatRgb:x8,toString:x8});function S8(){return this.rgb().formatHex()}function jue(){return this.rgb().formatHex8()}function que(){return Eq(this).formatHsl()}function x8(){return this.rgb().formatRgb()}function ku(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Bue.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?D8(e):t===3?new ss(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Oy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Oy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vue.exec(i))?new ss(e[1],e[2],e[3],1):(e=Wue.exec(i))?new ss(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zue.exec(i))?Oy(e[1],e[2],e[3],e[4]):(e=Hue.exec(i))?Oy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Uue.exec(i))?E8(e[1],e[2]/100,e[3]/100,1):(e=$ue.exec(i))?E8(e[1],e[2]/100,e[3]/100,e[4]):C8.hasOwnProperty(i)?D8(C8[i]):i==="transparent"?new ss(NaN,NaN,NaN,0):null}function D8(i){return new ss(i>>16&255,i>>8&255,i&255,1)}function Oy(i,e,t,n){return n<=0&&(i=e=t=NaN),new ss(i,e,t,n)}function qO(i){return i instanceof Qu||(i=ku(i)),i?(i=i.rgb(),new ss(i.r,i.g,i.b,i.opacity)):new ss}function Rx(i,e,t,n){return arguments.length===1?qO(i):new ss(i,e,t,n??1)}function ss(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}O0(ss,Rx,Tw(Qu,{brighter(i){return i=i==null?Bm:Math.pow(Bm,i),new ss(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Nf:Math.pow(Nf,i),new ss(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ss(af(this.r),af(this.g),af(this.b),Ox(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k8,formatHex:k8,formatHex8:Gue,formatRgb:L8,toString:L8}));function k8(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}`}function Gue(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}${zd((isNaN(this.opacity)?1:this.opacity)*255)}`}function L8(){const i=Ox(this.opacity);return`${i===1?"rgb(":"rgba("}${af(this.r)}, ${af(this.g)}, ${af(this.b)}${i===1?")":`, ${i})`}`}function Ox(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function af(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function zd(i){return i=af(i),(i<16?"0":"")+i.toString(16)}function E8(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new _a(i,e,t,n)}function Eq(i){if(i instanceof _a)return new _a(i.h,i.s,i.l,i.opacity);if(i instanceof Qu||(i=ku(i)),!i)return new _a;if(i instanceof _a)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,s=Math.min(e,t,n),r=Math.max(e,t,n),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-n)/a+(t<n)*6:t===r?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new _a(o,a,l,i.opacity)}function _N(i,e,t,n){return arguments.length===1?Eq(i):new _a(i,e,t,n??1)}function _a(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}O0(_a,_N,Tw(Qu,{brighter(i){return i=i==null?Bm:Math.pow(Bm,i),new _a(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Nf:Math.pow(Nf,i),new _a(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,s=2*t-n;return new ss(ME(i>=240?i-240:i+120,s,n),ME(i,s,n),ME(i<120?i+240:i-120,s,n),this.opacity)},clamp(){return new _a(A8(this.h),Py(this.s),Py(this.l),Ox(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Ox(this.opacity);return`${i===1?"hsl(":"hsla("}${A8(this.h)}, ${Py(this.s)*100}%, ${Py(this.l)*100}%${i===1?")":`, ${i})`}`}}));function A8(i){return i=(i||0)%360,i<0?i+360:i}function Py(i){return Math.max(0,Math.min(1,i||0))}function ME(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const Aq=Math.PI/180,Iq=180/Math.PI,Px=18,Tq=.96422,Nq=1,Mq=.82521,Rq=4/29,Jp=6/29,Oq=3*Jp*Jp,Kue=Jp*Jp*Jp;function Pq(i){if(i instanceof Rl)return new Rl(i.l,i.a,i.b,i.opacity);if(i instanceof Kh)return Fq(i);i instanceof ss||(i=qO(i));var e=FE(i.r),t=FE(i.g),n=FE(i.b),s=RE((.2225045*e+.7168786*t+.0606169*n)/Nq),r,o;return e===t&&t===n?r=o=s:(r=RE((.4360747*e+.3850649*t+.1430804*n)/Tq),o=RE((.0139322*e+.0971045*t+.7141733*n)/Mq)),new Rl(116*s-16,500*(r-s),200*(s-o),i.opacity)}function bN(i,e,t,n){return arguments.length===1?Pq(i):new Rl(i,e,t,n??1)}function Rl(i,e,t,n){this.l=+i,this.a=+e,this.b=+t,this.opacity=+n}O0(Rl,bN,Tw(Qu,{brighter(i){return new Rl(this.l+Px*(i??1),this.a,this.b,this.opacity)},darker(i){return new Rl(this.l-Px*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,e=isNaN(this.a)?i:i+this.a/500,t=isNaN(this.b)?i:i-this.b/200;return e=Tq*OE(e),i=Nq*OE(i),t=Mq*OE(t),new ss(PE(3.1338561*e-1.6168667*i-.4906146*t),PE(-.9787684*e+1.9161415*i+.033454*t),PE(.0719453*e-.2289914*i+1.4052427*t),this.opacity)}}));function RE(i){return i>Kue?Math.pow(i,1/3):i/Oq+Rq}function OE(i){return i>Jp?i*i*i:Oq*(i-Rq)}function PE(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function FE(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Zue(i){if(i instanceof Kh)return new Kh(i.h,i.c,i.l,i.opacity);if(i instanceof Rl||(i=Pq(i)),i.a===0&&i.b===0)return new Kh(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var e=Math.atan2(i.b,i.a)*Iq;return new Kh(e<0?e+360:e,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function vN(i,e,t,n){return arguments.length===1?Zue(i):new Kh(i,e,t,n??1)}function Kh(i,e,t,n){this.h=+i,this.c=+e,this.l=+t,this.opacity=+n}function Fq(i){if(isNaN(i.h))return new Rl(i.l,0,0,i.opacity);var e=i.h*Aq;return new Rl(i.l,Math.cos(e)*i.c,Math.sin(e)*i.c,i.opacity)}O0(Kh,vN,Tw(Qu,{brighter(i){return new Kh(this.h,this.c,this.l+Px*(i??1),this.opacity)},darker(i){return new Kh(this.h,this.c,this.l-Px*(i??1),this.opacity)},rgb(){return Fq(this).rgb()}}));var Bq=-.14861,GO=1.78277,KO=-.29227,aL=-.90649,jv=1.97294,I8=jv*aL,T8=jv*GO,N8=GO*KO-aL*Bq;function Yue(i){if(i instanceof lf)return new lf(i.h,i.s,i.l,i.opacity);i instanceof ss||(i=qO(i));var e=i.r/255,t=i.g/255,n=i.b/255,s=(N8*n+I8*e-T8*t)/(N8+I8-T8),r=n-s,o=(jv*(t-s)-KO*r)/aL,a=Math.sqrt(o*o+r*r)/(jv*s*(1-s)),l=a?Math.atan2(o,r)*Iq-120:NaN;return new lf(l<0?l+360:l,a,s,i.opacity)}function wN(i,e,t,n){return arguments.length===1?Yue(i):new lf(i,e,t,n??1)}function lf(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}O0(lf,wN,Tw(Qu,{brighter(i){return i=i==null?Bm:Math.pow(Bm,i),new lf(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Nf:Math.pow(Nf,i),new lf(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=isNaN(this.h)?0:(this.h+120)*Aq,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(i),s=Math.sin(i);return new ss(255*(e+t*(Bq*n+GO*s)),255*(e+t*(KO*n+aL*s)),255*(e+t*(jv*n)),this.opacity)}}));function Vq(i,e,t,n,s){var r=i*i,o=r*i;return((1-3*i+3*r-o)*e+(4-6*r+3*o)*t+(1+3*i+3*r-3*o)*n+o*s)/6}function Wq(i){var e=i.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=i[n],r=i[n+1],o=n>0?i[n-1]:2*s-r,a=n<e-1?i[n+2]:2*r-s;return Vq((t-n/e)*e,o,s,r,a)}}function zq(i){var e=i.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e),s=i[(n+e-1)%e],r=i[n%e],o=i[(n+1)%e],a=i[(n+2)%e];return Vq((t-n/e)*e,s,r,o,a)}}const lL=i=>()=>i;function Hq(i,e){return function(t){return i+t*e}}function Que(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function hL(i,e){var t=e-i;return t?Hq(i,t>180||t<-180?t-360*Math.round(t/360):t):lL(isNaN(i)?e:i)}function Xue(i){return(i=+i)==1?rs:function(e,t){return t-e?Que(e,t,i):lL(isNaN(e)?t:e)}}function rs(i,e){var t=e-i;return t?Hq(i,t):lL(isNaN(i)?e:i)}const yN=function i(e){var t=Xue(e);function n(s,r){var o=t((s=Rx(s)).r,(r=Rx(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),h=rs(s.opacity,r.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=h(c),s+""}}return n.gamma=i,n}(1);function Uq(i){return function(e){var t=e.length,n=new Array(t),s=new Array(t),r=new Array(t),o,a;for(o=0;o<t;++o)a=Rx(e[o]),n[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return n=i(n),s=i(s),r=i(r),a.opacity=1,function(l){return a.r=n(l),a.g=s(l),a.b=r(l),a+""}}}var Jue=Uq(Wq),ede=Uq(zq);function ZO(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),s;return function(r){for(s=0;s<t;++s)n[s]=i[s]*(1-r)+e[s]*r;return n}}function $q(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function tde(i,e){return($q(e)?ZO:jq)(i,e)}function jq(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,s=new Array(n),r=new Array(t),o;for(o=0;o<n;++o)s[o]=Xu(i[o],e[o]);for(;o<t;++o)r[o]=e[o];return function(a){for(o=0;o<n;++o)r[o]=s[o](a);return r}}function qq(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function ga(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Gq(i,e){var t={},n={},s;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in i?t[s]=Xu(i[s],e[s]):n[s]=e[s];return function(r){for(s in t)n[s]=t[s](r);return n}}var CN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BE=new RegExp(CN.source,"g");function ide(i){return function(){return i}}function nde(i){return function(e){return i(e)+""}}function Kq(i,e){var t=CN.lastIndex=BE.lastIndex=0,n,s,r,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=CN.exec(i))&&(s=BE.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:ga(n,s)})),t=BE.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?nde(l[0].x):ide(e):(e=l.length,function(h){for(var c=0,u;c<e;++c)a[(u=l[c]).i]=u.x(h);return a.join("")})}function Xu(i,e){var t=typeof e,n;return e==null||t==="boolean"?lL(e):(t==="number"?ga:t==="string"?(n=ku(e))?(e=n,yN):Kq:e instanceof ku?yN:e instanceof Date?qq:$q(e)?ZO:Array.isArray(e)?jq:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Gq:ga)(i,e)}function sde(i){var e=i.length;return function(t){return i[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function rde(i,e){var t=hL(+i,+e);return function(n){var s=t(n);return s-360*Math.floor(s/360)}}function Nw(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}var M8=180/Math.PI,Zq={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yq(i,e,t,n,s,r){var o,a,l;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(l=i*t+e*n)&&(t-=i*l,n-=e*l),(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a,l/=a),i*n<e*t&&(i=-i,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,i)*M8,skewX:Math.atan(l)*M8,scaleX:o,scaleY:a}}var Fy;function ode(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?Zq:Yq(e.a,e.b,e.c,e.d,e.e,e.f)}function ade(i){return i==null||(Fy||(Fy=document.createElementNS("http://www.w3.org/2000/svg","g")),Fy.setAttribute("transform",i),!(i=Fy.transform.baseVal.consolidate()))?Zq:(i=i.matrix,Yq(i.a,i.b,i.c,i.d,i.e,i.f))}function Qq(i,e,t,n){function s(h){return h.length?h.pop()+" ":""}function r(h,c,u,d,f,g){if(h!==u||c!==d){var p=f.push("translate(",null,e,null,t);g.push({i:p-4,x:ga(h,u)},{i:p-2,x:ga(c,d)})}else(u||d)&&f.push("translate("+u+e+d+t)}function o(h,c,u,d){h!==c?(h-c>180?c+=360:c-h>180&&(h+=360),d.push({i:u.push(s(u)+"rotate(",null,n)-2,x:ga(h,c)})):c&&u.push(s(u)+"rotate("+c+n)}function a(h,c,u,d){h!==c?d.push({i:u.push(s(u)+"skewX(",null,n)-2,x:ga(h,c)}):c&&u.push(s(u)+"skewX("+c+n)}function l(h,c,u,d,f,g){if(h!==u||c!==d){var p=f.push(s(f)+"scale(",null,",",null,")");g.push({i:p-4,x:ga(h,u)},{i:p-2,x:ga(c,d)})}else(u!==1||d!==1)&&f.push(s(f)+"scale("+u+","+d+")")}return function(h,c){var u=[],d=[];return h=i(h),c=i(c),r(h.translateX,h.translateY,c.translateX,c.translateY,u,d),o(h.rotate,c.rotate,u,d),a(h.skewX,c.skewX,u,d),l(h.scaleX,h.scaleY,c.scaleX,c.scaleY,u,d),h=c=null,function(f){for(var g=-1,p=d.length,m;++g<p;)u[(m=d[g]).i]=m.x(f);return u.join("")}}}var lde=Qq(ode,"px, ","px)","deg)"),hde=Qq(ade,", ",")",")"),cde=1e-12;function R8(i){return((i=Math.exp(i))+1/i)/2}function ude(i){return((i=Math.exp(i))-1/i)/2}function dde(i){return((i=Math.exp(2*i))-1)/(i+1)}const fde=function i(e,t,n){function s(r,o){var a=r[0],l=r[1],h=r[2],c=o[0],u=o[1],d=o[2],f=c-a,g=u-l,p=f*f+g*g,m,b;if(p<cde)b=Math.log(d/h)/e,m=function(S){return[a+S*f,l+S*g,h*Math.exp(e*S*b)]};else{var _=Math.sqrt(p),w=(d*d-h*h+n*p)/(2*h*t*_),y=(d*d-h*h-n*p)/(2*d*t*_),x=Math.log(Math.sqrt(w*w+1)-w),L=Math.log(Math.sqrt(y*y+1)-y);b=(L-x)/e,m=function(S){var k=S*b,D=R8(x),T=h/(t*_)*(D*dde(e*k+x)-ude(x));return[a+T*f,l+T*g,h*D/R8(e*k+x)]}}return m.duration=b*1e3*e/Math.SQRT2,m}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return i(o,a,l)},s}(Math.SQRT2,2,4);function Xq(i){return function(e,t){var n=i((e=_N(e)).h,(t=_N(t)).h),s=rs(e.s,t.s),r=rs(e.l,t.l),o=rs(e.opacity,t.opacity);return function(a){return e.h=n(a),e.s=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const gde=Xq(hL);var pde=Xq(rs);function mde(i,e){var t=rs((i=bN(i)).l,(e=bN(e)).l),n=rs(i.a,e.a),s=rs(i.b,e.b),r=rs(i.opacity,e.opacity);return function(o){return i.l=t(o),i.a=n(o),i.b=s(o),i.opacity=r(o),i+""}}function Jq(i){return function(e,t){var n=i((e=vN(e)).h,(t=vN(t)).h),s=rs(e.c,t.c),r=rs(e.l,t.l),o=rs(e.opacity,t.opacity);return function(a){return e.h=n(a),e.c=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const _de=Jq(hL);var bde=Jq(rs);function eG(i){return function e(t){t=+t;function n(s,r){var o=i((s=wN(s)).h,(r=wN(r)).h),a=rs(s.s,r.s),l=rs(s.l,r.l),h=rs(s.opacity,r.opacity);return function(c){return s.h=o(c),s.s=a(c),s.l=l(Math.pow(c,t)),s.opacity=h(c),s+""}}return n.gamma=e,n}(1)}const vde=eG(hL);var wde=eG(rs);function YO(i,e){e===void 0&&(e=i,i=Xu);for(var t=0,n=e.length-1,s=e[0],r=new Array(n<0?0:n);t<n;)r[t]=i(s,s=e[++t]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return r[a](o-a)}}function yde(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i(n/(e-1));return t}const Cde=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Xu,interpolateArray:tde,interpolateBasis:Wq,interpolateBasisClosed:zq,interpolateCubehelix:vde,interpolateCubehelixLong:wde,interpolateDate:qq,interpolateDiscrete:sde,interpolateHcl:_de,interpolateHclLong:bde,interpolateHsl:gde,interpolateHslLong:pde,interpolateHue:rde,interpolateLab:mde,interpolateNumber:ga,interpolateNumberArray:ZO,interpolateObject:Gq,interpolateRgb:yN,interpolateRgbBasis:Jue,interpolateRgbBasisClosed:ede,interpolateRound:Nw,interpolateString:Kq,interpolateTransformCss:lde,interpolateTransformSvg:hde,interpolateZoom:fde,piecewise:YO,quantize:yde},Symbol.toStringTag,{value:"Module"}));function Sde(i){return function(){return i}}function SN(i){return+i}var O8=[0,1];function xr(i){return i}function xN(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:Sde(isNaN(e)?NaN:.5)}function xde(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function Dde(i,e,t){var n=i[0],s=i[1],r=e[0],o=e[1];return s<n?(n=xN(s,n),r=t(o,r)):(n=xN(n,s),r=t(r,o)),function(a){return r(n(a))}}function kde(i,e,t){var n=Math.min(i.length,e.length)-1,s=new Array(n),r=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=xN(i[o],i[o+1]),r[o]=t(e[o],e[o+1]);return function(a){var l=R0(i,a,1,n)-1;return r[l](s[l](a))}}function Mw(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function cL(){var i=O8,e=O8,t=Xu,n,s,r,o=xr,a,l,h;function c(){var d=Math.min(i.length,e.length);return o!==xr&&(o=xde(i[0],i[d-1])),a=d>2?kde:Dde,l=h=null,u}function u(d){return d==null||isNaN(d=+d)?r:(l||(l=a(i.map(n),e,t)))(n(o(d)))}return u.invert=function(d){return o(s((h||(h=a(e,i.map(n),ga)))(d)))},u.domain=function(d){return arguments.length?(i=Array.from(d,SN),c()):i.slice()},u.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},u.rangeRound=function(d){return e=Array.from(d),t=Nw,c()},u.clamp=function(d){return arguments.length?(o=d?!0:xr,c()):o!==xr},u.interpolate=function(d){return arguments.length?(t=d,c()):t},u.unknown=function(d){return arguments.length?(r=d,u):r},function(d,f){return n=d,s=f,c()}}function tG(){return cL()(xr,xr)}function iG(i,e,t,n){var s=Ef(i,e,t),r;switch(n=Su(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(r=Kj(s,o))&&(n.precision=r),LO(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(r=Zj(s,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=r-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(r=Gj(s))&&(n.precision=r-(n.type==="%")*2);break}}return vs(n)}function fg(i){var e=i.domain;return i.ticks=function(t){var n=e();return xx(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var s=e();return iG(s[0],s[s.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),s=0,r=n.length-1,o=n[s],a=n[r],l,h,c=10;for(a<o&&(h=o,o=a,a=h,h=s,s=r,r=h);c-- >0;){if(h=$j(o,a,t),h===l)return n[s]=o,n[r]=a,e(n);if(h>0)o=Math.floor(o/h)*h,a=Math.ceil(a/h)*h;else if(h<0)o=Math.ceil(o*h)/h,a=Math.floor(a*h)/h;else break;l=h}return i},i}function nG(){var i=tG();return i.copy=function(){return Mw(i,nG())},th.apply(i,arguments),fg(i)}function sG(i){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(i=Array.from(n,SN),t):i.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return sG(i).unknown(e)},i=arguments.length?Array.from(i,SN):[0,1],fg(t)}function rG(i,e){i=i.slice();var t=0,n=i.length-1,s=i[t],r=i[n],o;return r<s&&(o=t,t=n,n=o,o=s,s=r,r=o),i[t]=e.floor(s),i[n]=e.ceil(r),i}function P8(i){return Math.log(i)}function F8(i){return Math.exp(i)}function Lde(i){return-Math.log(-i)}function Ede(i){return-Math.exp(-i)}function Ade(i){return isFinite(i)?+("1e"+i):i<0?0:i}function Ide(i){return i===10?Ade:i===Math.E?Math.exp:e=>Math.pow(i,e)}function Tde(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i)}function B8(i){return(e,t)=>-i(-e,t)}function QO(i){const e=i(P8,F8),t=e.domain;let n=10,s,r;function o(){return s=Tde(n),r=Ide(n),t()[0]<0?(s=B8(s),r=B8(r),i(Lde,Ede)):i(P8,F8),e}return e.base=function(a){return arguments.length?(n=+a,o()):n},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const l=t();let h=l[0],c=l[l.length-1];const u=c<h;u&&([h,c]=[c,h]);let d=s(h),f=s(c),g,p;const m=a==null?10:+a;let b=[];if(!(n%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),h>0){for(;d<=f;++d)for(g=1;g<n;++g)if(p=d<0?g/r(-d):g*r(d),!(p<h)){if(p>c)break;b.push(p)}}else for(;d<=f;++d)for(g=n-1;g>=1;--g)if(p=d>0?g/r(-d):g*r(d),!(p<h)){if(p>c)break;b.push(p)}b.length*2<m&&(b=xx(h,c,m))}else b=xx(d,f,Math.min(f-d,m)).map(r);return u?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Su(l)).precision==null&&(l.trim=!0),l=vs(l)),a===1/0)return l;const h=Math.max(1,n*a/e.ticks().length);return c=>{let u=c/r(Math.round(s(c)));return u*n<n-.5&&(u*=n),u<=h?l(c):""}},e.nice=()=>t(rG(t(),{floor:a=>r(Math.floor(s(a))),ceil:a=>r(Math.ceil(s(a)))})),e}function XO(){const i=QO(cL()).domain([1,10]);return i.copy=()=>Mw(i,XO()).base(i.base()),th.apply(i,arguments),i}function V8(i){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/i))}}function W8(i){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*i}}function JO(i){var e=1,t=i(V8(e),W8(e));return t.constant=function(n){return arguments.length?i(V8(e=+n),W8(e)):e},fg(t)}function oG(){var i=JO(cL());return i.copy=function(){return Mw(i,oG()).constant(i.constant())},th.apply(i,arguments)}function z8(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function Nde(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function Mde(i){return i<0?-i*i:i*i}function eP(i){var e=i(xr,xr),t=1;function n(){return t===1?i(xr,xr):t===.5?i(Nde,Mde):i(z8(t),z8(1/t))}return e.exponent=function(s){return arguments.length?(t=+s,n()):t},fg(e)}function tP(){var i=eP(cL());return i.copy=function(){return Mw(i,tP()).exponent(i.exponent())},th.apply(i,arguments),i}function Rde(){return tP.apply(null,arguments).exponent(.5)}function aG(){var i=[],e=[],t=[],n;function s(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=jj(i,o/a);return r}function r(o){return o==null||isNaN(o=+o)?n:e[R0(t,o)]}return r.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:i[0],a<t.length?t[a]:i[i.length-1]]},r.domain=function(o){if(!arguments.length)return i.slice();i=[];for(let a of o)a!=null&&!isNaN(a=+a)&&i.push(a);return i.sort(Eb),s()},r.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.quantiles=function(){return t.slice()},r.copy=function(){return aG().domain(i).range(e).unknown(n)},th.apply(r,arguments)}function lG(){var i=0,e=1,t=1,n=[.5],s=[0,1],r;function o(l){return l!=null&&l<=l?s[R0(n,l,0,t)]:r}function a(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return o}return o.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,a()):[i,e]},o.range=function(l){return arguments.length?(t=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var h=s.indexOf(l);return h<0?[NaN,NaN]:h<1?[i,n[0]]:h>=t?[n[t-1],e]:[n[h-1],n[h]]},o.unknown=function(l){return arguments.length&&(r=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return lG().domain([i,e]).range(s).unknown(r)},th.apply(fg(o),arguments)}function hG(){var i=[.5],e=[0,1],t,n=1;function s(r){return r!=null&&r<=r?e[R0(i,r,0,n)]:t}return s.domain=function(r){return arguments.length?(i=Array.from(r),n=Math.min(i.length,e.length-1),s):i.slice()},s.range=function(r){return arguments.length?(e=Array.from(r),n=Math.min(i.length,e.length-1),s):e.slice()},s.invertExtent=function(r){var o=e.indexOf(r);return[i[o-1],i[o]]},s.unknown=function(r){return arguments.length?(t=r,s):t},s.copy=function(){return hG().domain(i).range(e).unknown(t)},th.apply(s,arguments)}function Ode(i){return new Date(i)}function Pde(i){return i instanceof Date?+i:+new Date(+i)}function iP(i,e,t,n,s,r,o,a,l,h){var c=tG(),u=c.invert,d=c.domain,f=h(".%L"),g=h(":%S"),p=h("%I:%M"),m=h("%I %p"),b=h("%a %d"),_=h("%b %d"),w=h("%B"),y=h("%Y");function x(L){return(l(L)<L?f:a(L)<L?g:o(L)<L?p:r(L)<L?m:n(L)<L?s(L)<L?b:_:t(L)<L?w:y)(L)}return c.invert=function(L){return new Date(u(L))},c.domain=function(L){return arguments.length?d(Array.from(L,Pde)):d().map(Ode)},c.ticks=function(L){var S=d();return i(S[0],S[S.length-1],L??10)},c.tickFormat=function(L,S){return S==null?x:h(S)},c.nice=function(L){var S=d();return(!L||typeof L.range!="function")&&(L=e(S[0],S[S.length-1],L??10)),L?d(rG(S,L)):c},c.copy=function(){return Mw(c,iP(i,e,t,n,s,r,o,a,l,h))},c}function Fde(){return th.apply(iP(Tle,Nle,xu,Ex,xw,rf,TO,IO,eu,FO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Bde(){return th.apply(iP(Ale,Ile,Du,Ix,Dw,of,RO,MO,eu,BO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uL(){var i=0,e=1,t,n,s,r,o=xr,a=!1,l;function h(u){return u==null||isNaN(u=+u)?l:o(s===0?.5:(u=(r(u)-t)*s,a?Math.max(0,Math.min(1,u)):u))}h.domain=function(u){return arguments.length?([i,e]=u,t=r(i=+i),n=r(e=+e),s=t===n?0:1/(n-t),h):[i,e]},h.clamp=function(u){return arguments.length?(a=!!u,h):a},h.interpolator=function(u){return arguments.length?(o=u,h):o};function c(u){return function(d){var f,g;return arguments.length?([f,g]=d,o=u(f,g),h):[o(0),o(1)]}}return h.range=c(Xu),h.rangeRound=c(Nw),h.unknown=function(u){return arguments.length?(l=u,h):l},function(u){return r=u,t=u(i),n=u(e),s=t===n?0:1/(n-t),h}}function Ju(i,e){return e.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function nP(){var i=fg(uL()(xr));return i.copy=function(){return Ju(i,nP())},Yu.apply(i,arguments)}function cG(){var i=QO(uL()).domain([1,10]);return i.copy=function(){return Ju(i,cG()).base(i.base())},Yu.apply(i,arguments)}function uG(){var i=JO(uL());return i.copy=function(){return Ju(i,uG()).constant(i.constant())},Yu.apply(i,arguments)}function sP(){var i=eP(uL());return i.copy=function(){return Ju(i,sP()).exponent(i.exponent())},Yu.apply(i,arguments)}function Vde(){return sP.apply(null,arguments).exponent(.5)}function dL(){var i=0,e=.5,t=1,n=1,s,r,o,a,l,h=xr,c,u=!1,d;function f(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-r)*(n*p<n*r?a:l),h(u?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([i,e,t]=p,s=c(i=+i),r=c(e=+e),o=c(t=+t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f):[i,e,t]},f.clamp=function(p){return arguments.length?(u=!!p,f):u},f.interpolator=function(p){return arguments.length?(h=p,f):h};function g(p){return function(m){var b,_,w;return arguments.length?([b,_,w]=m,h=YO(p,[b,_,w]),f):[h(0),h(.5),h(1)]}}return f.range=g(Xu),f.rangeRound=g(Nw),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return c=p,s=p(i),r=p(e),o=p(t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f}}function dG(){var i=fg(dL()(xr));return i.copy=function(){return Ju(i,dG())},Yu.apply(i,arguments)}function fG(){var i=QO(dL()).domain([.1,1,10]);return i.copy=function(){return Ju(i,fG()).base(i.base())},Yu.apply(i,arguments)}function gG(){var i=JO(dL());return i.copy=function(){return Ju(i,gG()).constant(i.constant())},Yu.apply(i,arguments)}function rP(){var i=eP(dL());return i.copy=function(){return Ju(i,rP()).exponent(i.exponent())},Yu.apply(i,arguments)}function Wde(){return rP.apply(null,arguments).exponent(.5)}function oP(i,e,t){const n=i-e+t*2;return i?n>0?n:1:0}const zde="identity",Vm="linear",Lu="log",Rw="pow",Ow="sqrt",fL="symlog",pG="time",mG="utc",Ol="sequential",P0="diverging",DN="quantile",_G="quantize",bG="threshold",aP="ordinal",kN="point",vG="band",lP="bin-ordinal",Zn="continuous",Pw="discrete",Fw="discretizing",Jo="interpolating",wG="temporal";function Hde(i){return function(e){let t=e[0],n=e[1],s;return n<t&&(s=t,t=n,n=s),[i.invert(t),i.invert(n)]}}function Ude(i){return function(e){const t=i.range();let n=e[0],s=e[1],r=-1,o,a,l,h;for(s<n&&(a=n,n=s,s=a),l=0,h=t.length;l<h;++l)t[l]>=n&&t[l]<=s&&(r<0&&(r=l),o=l);if(!(r<0))return n=i.invertExtent(t[r]),s=i.invertExtent(t[o]),[n[0]===void 0?n[1]:n[0],s[1]===void 0?s[0]:s[1]]}}function hP(){const i=jO().unknown(void 0),e=i.domain,t=i.range;let n=[0,1],s,r,o=!1,a=0,l=0,h=.5;delete i.unknown;function c(){const u=e().length,d=n[1]<n[0],f=n[1-d],g=oP(u,a,l);let p=n[d-0];s=(f-p)/(g||1),o&&(s=Math.floor(s)),p+=(f-p-s*(u-a))*h,r=s*(1-a),o&&(p=Math.round(p),r=Math.round(r));const m=Iv(u).map(b=>p+s*b);return t(d?m.reverse():m)}return i.domain=function(u){return arguments.length?(e(u),c()):e()},i.range=function(u){return arguments.length?(n=[+u[0],+u[1]],c()):n.slice()},i.rangeRound=function(u){return n=[+u[0],+u[1]],o=!0,c()},i.bandwidth=function(){return r},i.step=function(){return s},i.round=function(u){return arguments.length?(o=!!u,c()):o},i.padding=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),a=l,c()):a},i.paddingInner=function(u){return arguments.length?(a=Math.max(0,Math.min(1,u)),c()):a},i.paddingOuter=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),c()):l},i.align=function(u){return arguments.length?(h=Math.max(0,Math.min(1,u)),c()):h},i.invertRange=function(u){if(u[0]==null||u[1]==null)return;const d=n[1]<n[0],f=d?t().reverse():t(),g=f.length-1;let p=+u[0],m=+u[1],b,_,w;if(!(p!==p||m!==m)&&(m<p&&(w=p,p=m,m=w),!(m<f[0]||p>n[1-d])))return b=Math.max(0,aN(f,p)-1),_=p===m?b:aN(f,m)-1,p-f[b]>r+1e-10&&++b,d&&(w=b,b=g-_,_=g-w),b>_?void 0:e().slice(b,_+1)},i.invert=function(u){const d=i.invertRange([u,u]);return d&&d[0]},i.copy=function(){return hP().domain(e()).range(n).round(o).paddingInner(a).paddingOuter(l).align(h)},c()}function yG(i){const e=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,i.copy=function(){return yG(e())},i}function $de(){return yG(hP().paddingInner(1))}var jde=Array.prototype.map;function qde(i){return jde.call(i,Av)}const Gde=Array.prototype.slice;function CG(){let i=[],e=[];function t(n){return n==null||n!==n?void 0:e[(R0(i,n)-1)%e.length]}return t.domain=function(n){return arguments.length?(i=qde(n),t):i.slice()},t.range=function(n){return arguments.length?(e=Gde.call(n),t):e.slice()},t.tickFormat=function(n,s){return iG(i[0],Ma(i),n??10,s)},t.copy=function(){return CG().domain(t.domain()).range(t.range())},t}const Fx={};function Kde(i,e,t){const n=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?Hde(s):s.invertExtent?Ude(s):void 0),s.type=i,s};return n.metadata=Sx(oN(t)),n}function hi(i,e,t){return arguments.length>1?(Fx[i]=Kde(i,e,t),this):Zde(i)?Fx[i]:void 0}hi(zde,sG);hi(Vm,nG,Zn);hi(Lu,XO,[Zn,Lu]);hi(Rw,tP,Zn);hi(Ow,Rde,Zn);hi(fL,oG,Zn);hi(pG,Fde,[Zn,wG]);hi(mG,Bde,[Zn,wG]);hi(Ol,nP,[Zn,Jo]);hi("".concat(Ol,"-").concat(Vm),nP,[Zn,Jo]);hi("".concat(Ol,"-").concat(Lu),cG,[Zn,Jo,Lu]);hi("".concat(Ol,"-").concat(Rw),sP,[Zn,Jo]);hi("".concat(Ol,"-").concat(Ow),Vde,[Zn,Jo]);hi("".concat(Ol,"-").concat(fL),uG,[Zn,Jo]);hi("".concat(P0,"-").concat(Vm),dG,[Zn,Jo]);hi("".concat(P0,"-").concat(Lu),fG,[Zn,Jo,Lu]);hi("".concat(P0,"-").concat(Rw),rP,[Zn,Jo]);hi("".concat(P0,"-").concat(Ow),Wde,[Zn,Jo]);hi("".concat(P0,"-").concat(fL),gG,[Zn,Jo]);hi(DN,aG,[Fw,DN]);hi(_G,lG,Fw);hi(bG,hG,Fw);hi(lP,CG,[Pw,Fw]);hi(aP,jO,Pw);hi(vG,hP,Pw);hi(kN,$de,Pw);function Zde(i){return Wd(Fx,i)}function Bw(i,e){const t=Fx[i];return t&&t.metadata[e]}function Os(i){return Bw(i,Zn)}function Eu(i){return Bw(i,Pw)}function yp(i){return Bw(i,Fw)}function SG(i){return Bw(i,Lu)}function gL(i){return Bw(i,Jo)}function Yde(i,e){const t=e[0],n=Ma(e)-t;return function(s){return i(t+s*n)}}function pL(i,e,t){return YO(xG(e||"rgb",t),i)}function Qde(i,e){const t=new Array(e),n=e+1;for(let s=0;s<e;)t[s]=i(++s/n);return t}function xG(i,e){const t=Cde[Xde(i)];return e!=null&&t&&t.gamma?t.gamma(e):t}function Xde(i){return"interpolate"+i.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Jde={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},efe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function DG(i){const e=i.length/6|0,t=new Array(e);for(let n=0;n<e;)t[n]="#"+i.slice(n*6,++n*6);return t}function kG(i,e){for(const t in i)cP(t,e(i[t]))}const H8={};kG(efe,DG);kG(Jde,i=>pL(DG(i)));function cP(i,e){return i=i&&i.toLowerCase(),arguments.length>1?(H8[i]=e,this):H8[i]}function tfe(){let i=0;const e=new Map,t=n=>{let s=e.get(n);return s===void 0&&(s=i++,e.set(n,s)),s};return t.addAll=n=>{for(const s of n)t(s)},t.invert=n=>{for(const s of e.entries())if(s[1]==n)return s[0]},t.domain=()=>[...e.keys()],t}function mL(){const i=e=>e;return i.invert=e=>e,i.copy=mL,i.invertRange=()=>{},i.type="null",i}function ife(i,e){const t={};e||(e=i.encoding);for(const[n,s]of Object.entries(e)){if(!s)continue;const r=((Oo(s)&&s.resolutionChannel)??(cf(n)&&n))||void 0,o=i.unitView.getScaleResolution(r);t[n]=nfe(e[n],o==null?void 0:o.getScale(),i.unitView.getAccessor(n),n)}return t}function nfe(i,e,t,n){let s;if(Ra(i)){const r=i.value;s=o=>r,s.constant=!0,s.constantValue=!0,s.accessor=void 0}else if(t)if(n=="text")s=r=>{},s.accessor=t,s.constant=t.constant;else{if(!e)if(!cf(n))e=mL();else throw new Error(`Missing scale! "${n}": ${JSON.stringify(i)}`);if(s=r=>e(t(r)),Eu(e.type)){const r=tfe();r.addAll(e.domain()),s.indexer=r}s.constant=t.constant,s.accessor=t,s.scale=e}else throw new Error(`Missing value or accessor (field, expr, datum) on channel "${n}": ${JSON.stringify(i)}`);return s.invert=e?r=>e.invert(r):r=>{throw new Error("No scale available, cannot invert: "+JSON.stringify(i))},s.channelDef=i,s.applyMetadata=r=>{for(const o in s)o in s&&(r[o]=s[o]);return r},s}function Ra(i){return i&&"value"in i}function Vw(i){return i&&"field"in i}function Ww(i){return i&&"datum"in i}function Oo(i){return Vw(i)||Ww(i)||dP(i)||LG(i)}function uP(i,e){const t=i.mark.encoding[e];if(Oo(t))return t;throw new Error("Not a channel def with scale!")}function LG(i){return i&&"chrom"in i}function dP(i){return i&&"expr"in i}const F0=["x","y"],sfe=["x2","y2"],rfe=[...F0,...sfe];function EG(i){return F0.includes(i)}function qv(i){return rfe.includes(i)}const fP={x:"x2",y:"y2"},AG=Object.fromEntries(Object.entries(fP).map(i=>[i[1],i[0]]));function Ib(i){return i in AG}function ofe(i){const e=fP[i];if(e)return e;throw new Error(`${i} has no secondary channel!`)}function Mf(i){return AG[i]??i}function hf(i){return["color","fill","stroke"].includes(Mf(i))}function _L(i){return["shape","squeeze"].includes(i)}function cf(i){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(i)}function IG(i){switch(i){case"shape":return["circle","square","triangle-up","cross","diamond","triangle-down","triangle-right","triangle-left"]}}function TG(i){if(!_L(i))throw new Error("Not a discrete channel: "+i);const e=new Map(IG(i).map((t,n)=>[t,n]));return t=>{const n=e.get(t);if(n!==void 0)return n;throw new Error(`Invalid value for "${i}" channel: ${t}`)}}function Ai(i,e=i){if(/^[A-Za-z0-9_]+$/.test(i)){const t=new Function("datum",`return datum[${JSON.stringify(i)}]`);return Ku(t,[i],e)}else return qk(i)}class afe{constructor(){this.accessorCreators=[],this.register(e=>{if(Vw(e))try{const t=Ai(e.field);return t.constant=!1,t.fields=Tj(t),t}catch(t){throw new Error(`Invalid field definition: ${t.message}`)}}),this.register(e=>dP(e)?lfe(e.expr):void 0),this.register(e=>{if(Ww(e)){const t=Bae(e.datum);return t.constant=!0,t.fields=[],t}})}register(e){this.accessorCreators.push(e)}createAccessor(e){for(const t of this.accessorCreators){const n=t(e);if(n)return n}}}function lfe(i){const e=$O(i);return e.constant=e.fields.length==0,e}/* @license twgl.js 4.22.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const gP=5120,pP=5121,mP=5122,_P=5123,bP=5124,vP=5125,wP=5126,hfe=32819,cfe=32820,ufe=33635,dfe=5131,ffe=33640,gfe=35899,pfe=35902,mfe=36269,_fe=34042,NG={};{const i=NG;i[gP]=Int8Array,i[pP]=Uint8Array,i[mP]=Int16Array,i[_P]=Uint16Array,i[bP]=Int32Array,i[vP]=Uint32Array,i[wP]=Float32Array,i[hfe]=Uint16Array,i[cfe]=Uint16Array,i[ufe]=Uint16Array,i[dfe]=Uint16Array,i[ffe]=Uint32Array,i[gfe]=Uint32Array,i[pfe]=Uint32Array,i[mfe]=Uint32Array,i[_fe]=Uint32Array}function yP(i){if(i instanceof Int8Array)return gP;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)return pP;if(i instanceof Int16Array)return mP;if(i instanceof Uint16Array)return _P;if(i instanceof Int32Array)return bP;if(i instanceof Uint32Array)return vP;if(i instanceof Float32Array)return wP;throw new Error("unsupported typed array type")}function bfe(i){if(i===Int8Array)return gP;if(i===Uint8Array||i===Uint8ClampedArray)return pP;if(i===Int16Array)return mP;if(i===Uint16Array)return _P;if(i===Int32Array)return bP;if(i===Uint32Array)return vP;if(i===Float32Array)return wP;throw new Error("unsupported typed array type")}function vfe(i){const e=NG[i];if(!e)throw new Error("unknown gl type");return e}const Bx=typeof SharedArrayBuffer<"u"?function(i){return i&&i.buffer&&(i.buffer instanceof ArrayBuffer||i.buffer instanceof SharedArrayBuffer)}:function(i){return i&&i.buffer&&i.buffer instanceof ArrayBuffer};function wfe(...i){console.error(...i)}function MG(...i){console.warn(...i)}function yfe(i,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function RG(i,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function bL(i,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function Cfe(i,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const OG=35044,Pl=34962,Sfe=34963,xfe=34660,Dfe=5120,kfe=5121,Lfe=5122,Efe=5123,Afe=5124,Ife=5125,Tfe=5126,PG={attribPrefix:""};function FG(i,e,t,n,s){i.bindBuffer(e,t),i.bufferData(e,n,s||OG)}function BG(i,e,t,n){if(yfe(i,e))return e;t=t||Pl;const s=i.createBuffer();return FG(i,t,s,e,n),s}function VG(i){return i==="indices"}function Nfe(i){return i instanceof Int8Array||i instanceof Uint8Array}function Mfe(i){return i===Int8Array||i===Uint8Array}function Rfe(i){return i.length?i:i.data}const Ofe=/coord|texture/i,Pfe=/color|colour/i;function WG(i,e){let t;if(Ofe.test(i)?t=2:Pfe.test(i)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${i}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function Ffe(i,e){return i.numComponents||i.size||WG(e,Rfe(i).length)}function CP(i,e){if(Bx(i))return i;if(Bx(i.data))return i.data;Array.isArray(i)&&(i={data:i});let t=i.type;return t||(VG(e)?t=Uint16Array:t=Float32Array),new t(i.data)}function Bfe(i,e){const t={};return Object.keys(e).forEach(function(n){if(!VG(n)){const s=e[n],r=s.attrib||s.name||s.attribName||PG.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!Bx(s.value))throw new Error("array.value is not array or typedarray");t[r]={value:s.value}}else{let o,a,l,h;if(s.buffer&&s.buffer instanceof WebGLBuffer)o=s.buffer,h=s.numComponents||s.size,a=s.type,l=s.normalize;else if(typeof s=="number"||typeof s.data=="number"){const c=s.data||s,u=s.type||Float32Array,d=c*u.BYTES_PER_ELEMENT;a=bfe(u),l=s.normalize!==void 0?s.normalize:Mfe(u),h=s.numComponents||s.size||WG(n,c),o=i.createBuffer(),i.bindBuffer(Pl,o),i.bufferData(Pl,d,s.drawType||OG)}else{const c=CP(s,n);o=BG(i,c,void 0,s.drawType),a=yP(c),l=s.normalize!==void 0?s.normalize:Nfe(c),h=Ffe(s,n)}t[r]={buffer:o,numComponents:h,type:a,normalize:l,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),i.bindBuffer(Pl,null),t}function Vfe(i,e,t,n){t=CP(t),n!==void 0?(i.bindBuffer(Pl,e.buffer),i.bufferSubData(Pl,n,t)):FG(i,Pl,e.buffer,t,e.drawType)}function Wfe(i,e){return e===Dfe||e===kfe?1:e===Lfe||e===Efe?2:e===Afe||e===Ife||e===Tfe?4:0}const VE=["position","positions","a_position"];function zfe(i,e){let t,n;for(n=0;n<VE.length&&(t=VE[n],!(t in e||(t=PG.attribPrefix+t,t in e)));++n);n===VE.length&&(t=Object.keys(e)[0]);const s=e[t];i.bindBuffer(Pl,s.buffer);const r=i.getBufferParameter(Pl,xfe);i.bindBuffer(Pl,null);const o=Wfe(i,s.type),a=r/o,l=s.numComponents||s.size,h=a/l;if(h%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return h}function Hfe(i,e,t){const n=Bfe(i,e),s=Object.assign({},t||{});s.attribs=Object.assign({},t?t.attribs:{},n);const r=e.indices;if(r){const o=CP(r,"indices");s.indices=BG(i,o,Sfe),s.numElements=o.length,s.elementType=yP(o)}else s.numElements||(s.numElements=zfe(i,s.attribs));return s}function B0(i){return!!i.texStorage2D}const LN=function(){const i={},e={};function t(n){const s=n.constructor.name;if(!i[s]){for(const r in n)if(typeof n[r]=="number"){const o=e[n[r]];e[n[r]]=o?`${o} | ${r}`:r}i[s]=!0}}return function(n,s){return t(n),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),ed={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Wm=Bx,zG=function(){let i;return function(){return i=i||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),i}}(),U8=6406,nl=6407,sn=6408,$8=6409,j8=6410,L_=6402,q8=34041,Vx=33071,Ufe=9728,$fe=9729,pc=3553,ac=34067,Au=32879,Iu=35866,vL=34069,jfe=34070,qfe=34071,Gfe=34072,Kfe=34073,Zfe=34074,EN=10241,AN=10240,Wx=10242,zx=10243,G8=32882,Yfe=33082,Qfe=33083,Xfe=33084,Jfe=33085,SP=3317,HG=3314,UG=32878,$G=3316,jG=3315,qG=32877,ege=37443,tge=37441,ige=37440,nge=33321,sge=36756,rge=33325,oge=33326,age=33330,lge=33329,hge=33338,cge=33337,uge=33340,dge=33339,fge=33323,gge=36757,pge=33327,mge=33328,_ge=33336,bge=33335,vge=33332,wge=33331,yge=33334,Cge=33333,Sge=32849,xge=35905,Dge=36194,kge=36758,Lge=35898,Ege=35901,Age=34843,Ige=34837,Tge=36221,Nge=36239,Mge=36215,Rge=36233,Oge=36209,Pge=36227,Fge=32856,Bge=35907,Vge=36759,Wge=32855,zge=32854,Hge=32857,Uge=34842,$ge=34836,jge=36220,qge=36238,Gge=36975,Kge=36214,Zge=36232,Yge=36226,Qge=36208,Xge=33189,Jge=33190,epe=36012,tpe=36013,ipe=35056,Cc=5120,tn=5121,By=5122,Kg=5123,Vy=5124,dd=5125,Ls=5126,K8=32819,Z8=32820,Y8=33635,sa=5131,E_=36193,WE=33640,npe=35899,spe=35902,rpe=36269,ope=34042,Wy=33319,Zg=33320,zy=6403,Yg=36244,Qg=36248,fd=36249;let zE;function wL(i){if(!zE){const e={};e[U8]={textureFormat:U8,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tn,sa,E_,Ls]},e[$8]={textureFormat:$8,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tn,sa,E_,Ls]},e[j8]={textureFormat:j8,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[tn,sa,E_,Ls]},e[nl]={textureFormat:nl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[tn,sa,E_,Ls,Y8]},e[sn]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[tn,sa,E_,Ls,K8,Z8]},e[L_]={textureFormat:L_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[dd,Kg]},e[nge]={textureFormat:zy,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[tn]},e[sge]={textureFormat:zy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Cc]},e[rge]={textureFormat:zy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Ls,sa]},e[oge]={textureFormat:zy,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Ls]},e[age]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[tn]},e[lge]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Cc]},e[vge]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Kg]},e[wge]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[By]},e[yge]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dd]},e[Cge]={textureFormat:Yg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vy]},e[fge]={textureFormat:Wy,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[tn]},e[gge]={textureFormat:Wy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Cc]},e[pge]={textureFormat:Wy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Ls,sa]},e[mge]={textureFormat:Wy,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Ls]},e[_ge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[tn]},e[bge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Cc]},e[hge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Kg]},e[cge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[By]},e[uge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[dd]},e[dge]={textureFormat:Zg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vy]},e[Sge]={textureFormat:nl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[tn]},e[xge]={textureFormat:nl,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[tn]},e[Dge]={textureFormat:nl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[tn,Y8]},e[kge]={textureFormat:nl,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Cc]},e[Lge]={textureFormat:nl,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ls,sa,npe]},e[Ege]={textureFormat:nl,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Ls,sa,spe]},e[Age]={textureFormat:nl,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Ls,sa]},e[Ige]={textureFormat:nl,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ls]},e[Tge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[tn]},e[Nge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Cc]},e[Mge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Kg]},e[Rge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[By]},e[Oge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[dd]},e[Pge]={textureFormat:Qg,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vy]},e[Fge]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tn]},e[Bge]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tn]},e[Vge]={textureFormat:sn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Cc]},e[Wge]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[tn,Z8,WE]},e[zge]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[tn,K8]},e[Hge]={textureFormat:sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[WE]},e[Uge]={textureFormat:sn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Ls,sa]},e[$ge]={textureFormat:sn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Ls]},e[jge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tn]},e[qge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Cc]},e[Gge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[WE]},e[Kge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Kg]},e[Zge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[By]},e[Yge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vy]},e[Qge]={textureFormat:fd,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[dd]},e[Xge]={textureFormat:L_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Kg,dd]},e[Jge]={textureFormat:L_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dd]},e[epe]={textureFormat:L_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ls]},e[ipe]={textureFormat:q8,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ope]},e[tpe]={textureFormat:q8,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rpe]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(s,r){const o=n.type[r];n.bytesPerElementMap[o]=s})}),zE=e}return zE[i]}function ape(i,e){const t=wL(i);if(!t)throw"unknown internal format";const n=t.bytesPerElementMap[e];if(n===void 0)throw"unknown internal format";return n}function V0(i){const e=wL(i);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Q8(i){return(i&i-1)===0}function lpe(i,e,t,n){if(!B0(i))return Q8(e)&&Q8(t);const s=wL(n);if(!s)throw"unknown internal format";return s.colorRenderable&&s.textureFilterable}function hpe(i){const e=wL(i);if(!e)throw"unknown internal format";return e.textureFilterable}function GG(i,e,t){return Wm(e)?yP(e):t||tn}function Hy(i,e,t,n,s){if(s%1!==0)throw"can't guess dimensions";if(!t&&!n){const r=Math.sqrt(s/(e===ac?6:1));r%1===0?(t=r,n=r):(t=s,n=1)}else if(n){if(!t&&(t=s/n,t%1))throw"can't guess dimensions"}else if(n=s/t,n%1)throw"can't guess dimensions";return{width:t,height:n}}function zm(i,e){e.colorspaceConversion!==void 0&&i.pixelStorei(ege,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&i.pixelStorei(tge,e.premultiplyAlpha),e.flipY!==void 0&&i.pixelStorei(ige,e.flipY)}function KG(i){i.pixelStorei(SP,4),B0(i)&&(i.pixelStorei(HG,0),i.pixelStorei(UG,0),i.pixelStorei($G,0),i.pixelStorei(jG,0),i.pixelStorei(qG,0))}function cpe(i,e,t,n){n.minMag&&(t.call(i,e,EN,n.minMag),t.call(i,e,AN,n.minMag)),n.min&&t.call(i,e,EN,n.min),n.mag&&t.call(i,e,AN,n.mag),n.wrap&&(t.call(i,e,Wx,n.wrap),t.call(i,e,zx,n.wrap),(e===Au||Cfe(i,e))&&t.call(i,e,G8,n.wrap)),n.wrapR&&t.call(i,e,G8,n.wrapR),n.wrapS&&t.call(i,e,Wx,n.wrapS),n.wrapT&&t.call(i,e,zx,n.wrapT),n.minLod&&t.call(i,e,Yfe,n.minLod),n.maxLod&&t.call(i,e,Qfe,n.maxLod),n.baseLevel&&t.call(i,e,Xfe,n.baseLevel),n.maxLevel&&t.call(i,e,Jfe,n.maxLevel)}function ZG(i,e,t){const n=t.target||pc;i.bindTexture(n,e),cpe(i,n,i.texParameteri,t)}function upe(i){return i=i||ed.textureColor,Wm(i)?i:new Uint8Array([i[0]*255,i[1]*255,i[2]*255,i[3]*255])}function IN(i,e,t,n,s,r){t=t||ed.textureOptions,r=r||sn;const o=t.target||pc;if(n=n||t.width,s=s||t.height,i.bindTexture(o,e),lpe(i,n,s,r))i.generateMipmap(o);else{const a=hpe(r)?$fe:Ufe;i.texParameteri(o,EN,a),i.texParameteri(o,AN,a),i.texParameteri(o,Wx,Vx),i.texParameteri(o,zx,Vx)}}function Gv(i){return i.auto===!0||i.auto===void 0&&i.level===void 0}function TN(i,e){return e=e||{},e.cubeFaceOrder||[vL,jfe,qfe,Gfe,Kfe,Zfe]}function NN(i,e){const t=TN(i,e).map(function(n,s){return{face:n,ndx:s}});return t.sort(function(n,s){return n.face-s.face}),t}function YG(i,e,t,n){n=n||ed.textureOptions;const s=n.target||pc,r=n.level||0;let o=t.width,a=t.height;const l=n.internalFormat||n.format||sn,h=V0(l),c=n.format||h.format,u=n.type||h.type;if(zm(i,n),i.bindTexture(s,e),s===ac){const d=t.width,f=t.height;let g,p;if(d/6===f)g=f,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(f/6===d)g=d,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===f/2)g=d/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===f/3)g=d/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const m=zG();m?(m.canvas.width=g,m.canvas.height=g,o=g,a=g,NN(i,n).forEach(function(b){const _=p[b.ndx*2+0]*g,w=p[b.ndx*2+1]*g;m.drawImage(t,_,w,g,g,0,0,g,g),i.texImage2D(b.face,r,l,c,u,m.canvas)}),m.canvas.width=1,m.canvas.height=1):typeof createImageBitmap<"u"&&(o=g,a=g,NN(i,n).forEach(function(b){const _=p[b.ndx*2+0]*g,w=p[b.ndx*2+1]*g;i.texImage2D(b.face,r,l,g,g,0,c,u,null),createImageBitmap(t,_,w,g,g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(y){zm(i,n),i.bindTexture(s,e),i.texImage2D(b.face,r,l,c,u,y),Gv(n)&&IN(i,e,n,o,a,l)})}))}else if(s===Au||s===Iu){const d=Math.min(t.width,t.height),f=Math.max(t.width,t.height),g=f/d;if(g%1!==0)throw"can not compute 3D dimensions of element";const p=t.width===f?1:0,m=t.height===f?1:0;i.pixelStorei(SP,1),i.pixelStorei(HG,t.width),i.pixelStorei(UG,0),i.pixelStorei(qG,0),i.texImage3D(s,r,l,d,d,d,0,c,u,null);for(let b=0;b<g;++b){const _=b*d*p,w=b*d*m;i.pixelStorei($G,_),i.pixelStorei(jG,w),i.texSubImage3D(s,r,0,0,b,d,d,1,c,u,t)}KG(i)}else i.texImage2D(s,r,l,c,u,t);Gv(n)&&IN(i,e,n,o,a,l),ZG(i,e,n)}function zw(){}function dpe(i){if(typeof document<"u"){const e=document.createElement("a");return e.href=i,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(i,location.href).origin===e}}function fpe(i,e){return e===void 0&&!dpe(i)?"anonymous":e}function gpe(i,e,t){t=t||zw;let n;if(e=e!==void 0?e:ed.crossOrigin,e=fpe(i,e),typeof Image<"u"){n=new Image,e!==void 0&&(n.crossOrigin=e);const s=function(){n.removeEventListener("error",r),n.removeEventListener("load",o),n=null},r=function(){const a="couldn't load image: "+i;wfe(a),t(a,n),s()},o=function(){t(null,n),s()};return n.addEventListener("error",r),n.addEventListener("load",o),n.src=i,n}else if(typeof ImageBitmap<"u"){let s,r;const o=function(){t(s,r)},a={};e&&(a.mode="cors"),fetch(i,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){r=l,setTimeout(o)}).catch(function(l){s=l,setTimeout(o)}),n=null}return n}function QG(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof ImageData<"u"&&i instanceof ImageData||typeof HTMLElement<"u"&&i instanceof HTMLElement}function xP(i,e,t){return QG(i)?(setTimeout(function(){t(null,i)}),i):gpe(i,e,t)}function DP(i,e,t){t=t||ed.textureOptions;const n=t.target||pc;if(i.bindTexture(n,e),t.color===!1)return;const s=upe(t.color);if(n===ac)for(let r=0;r<6;++r)i.texImage2D(vL+r,0,sn,1,1,0,sn,tn,s);else n===Au||n===Iu?i.texImage3D(n,0,sn,1,1,1,0,sn,tn,s):i.texImage2D(n,0,sn,1,1,0,sn,tn,s)}function ppe(i,e,t,n){return n=n||zw,t=t||ed.textureOptions,DP(i,e,t),t=Object.assign({},t),xP(t.src,t.crossOrigin,function(s,r){s?n(s,e,r):(YG(i,e,r,t),n(null,e,r))})}function mpe(i,e,t,n){n=n||zw;const s=t.src;if(s.length!==6)throw"there must be 6 urls for a cubemap";const r=t.level||0,o=t.internalFormat||t.format||sn,a=V0(o),l=t.format||a.format,h=t.type||tn,c=t.target||pc;if(c!==ac)throw"target must be TEXTURE_CUBE_MAP";DP(i,e,t),t=Object.assign({},t);let u=6;const d=[],f=TN(i,t);let g;function p(m){return function(b,_){--u,b?d.push(b):_.width!==_.height?d.push("cubemap face img is not a square: "+_.src):(zm(i,t),i.bindTexture(c,e),u===5?TN().forEach(function(w){i.texImage2D(w,r,o,l,h,_)}):i.texImage2D(m,r,o,l,h,_),Gv(t)&&i.generateMipmap(c)),u===0&&n(d.length?d:void 0,e,g)}}g=s.map(function(m,b){return xP(m,t.crossOrigin,p(f[b]))})}function _pe(i,e,t,n){n=n||zw;const s=t.src,r=t.internalFormat||t.format||sn,o=V0(r),a=t.format||o.format,l=t.type||tn,h=t.target||Iu;if(h!==Au&&h!==Iu)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";DP(i,e,t),t=Object.assign({},t);let c=s.length;const u=[];let d;const f=t.level||0;let g=t.width,p=t.height;const m=s.length;let b=!0;function _(w){return function(y,x){if(--c,y)u.push(y);else{if(zm(i,t),i.bindTexture(h,e),b){b=!1,g=t.width||x.width,p=t.height||x.height,i.texImage3D(h,f,r,g,p,m,0,a,l,null);for(let L=0;L<m;++L)i.texSubImage3D(h,f,0,0,L,g,p,1,a,l,x)}else{let L=x,S;(x.width!==g||x.height!==p)&&(S=zG(),L=S.canvas,S.canvas.width=g,S.canvas.height=p,S.drawImage(x,0,0,g,p)),i.texSubImage3D(h,f,0,0,w,g,p,1,a,l,L),S&&L===S.canvas&&(S.canvas.width=0,S.canvas.height=0)}Gv(t)&&i.generateMipmap(h)}c===0&&n(u.length?u:void 0,e,d)}}d=s.map(function(w,y){return xP(w,t.crossOrigin,_(y))})}function XG(i,e,t,n){n=n||ed.textureOptions;const s=n.target||pc;i.bindTexture(s,e);let r=n.width,o=n.height,a=n.depth;const l=n.level||0,h=n.internalFormat||n.format||sn,c=V0(h),u=n.format||c.format,d=n.type||GG(i,t,c.type);if(Wm(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const m=vfe(d);t=new m(t)}const f=ape(h,d),g=t.byteLength/f;if(g%1)throw"length wrong size for format: "+LN(i,u);let p;if(s===Au||s===Iu)if(!r&&!o&&!a){const m=Math.cbrt(g);if(m%1!==0)throw"can't guess cube size of array of numElements: "+g;r=m,o=m,a=m}else r&&(!o||!a)?(p=Hy(i,s,o,a,g/r),o=p.width,a=p.height):o&&(!r||!a)?(p=Hy(i,s,r,a,g/o),r=p.width,a=p.height):(p=Hy(i,s,r,o,g/a),r=p.width,o=p.height);else p=Hy(i,s,r,o,g),r=p.width,o=p.height;if(KG(i),i.pixelStorei(SP,n.unpackAlignment||1),zm(i,n),s===ac){const m=f/t.BYTES_PER_ELEMENT,b=g/6*m;NN(i,n).forEach(_=>{const w=b*_.ndx,y=t.subarray(w,w+b);i.texImage2D(_.face,l,h,r,o,0,u,d,y)})}else s===Au||s===Iu?i.texImage3D(s,l,h,r,o,a,0,u,d,t):i.texImage2D(s,l,h,r,o,0,u,d,t);return{width:r,height:o,depth:a,type:d}}function bpe(i,e,t){const n=t.target||pc;i.bindTexture(n,e);const s=t.level||0,r=t.internalFormat||t.format||sn,o=V0(r),a=t.format||o.format,l=t.type||o.type;if(zm(i,t),n===ac)for(let h=0;h<6;++h)i.texImage2D(vL+h,s,r,t.width,t.height,0,a,l,null);else n===Au||n===Iu?i.texImage3D(n,s,r,t.width,t.height,t.depth,0,a,l,null):i.texImage2D(n,s,r,t.width,t.height,0,a,l,null)}function Kv(i,e,t){t=t||zw,e=e||ed.textureOptions;const n=i.createTexture(),s=e.target||pc;let r=e.width||1,o=e.height||1;const a=e.internalFormat||sn;i.bindTexture(s,n),s===ac&&(i.texParameteri(s,Wx,Vx),i.texParameteri(s,zx,Vx));let l=e.src;if(l)if(typeof l=="function"&&(l=l(i,e)),typeof l=="string")ppe(i,n,e,t);else if(Wm(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||Wm(l[0]))){const h=XG(i,n,l,e);r=h.width,o=h.height}else Array.isArray(l)&&(typeof l[0]=="string"||QG(l[0]))?s===ac?mpe(i,n,e,t):_pe(i,n,e,t):(YG(i,n,l,e),r=l.width,o=l.height);else bpe(i,n,e);return Gv(e)&&IN(i,n,e,r,o,a),ZG(i,n,e),n}function vpe(i,e,t,n,s,r){n=n||t.width,s=s||t.height,r=r||t.depth;const o=t.target||pc;i.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||sn,h=V0(l),c=t.format||h.format;let u;const d=t.src;if(d&&(Wm(d)||Array.isArray(d)&&typeof d[0]=="number")?u=t.type||GG(i,d,h.type):u=t.type||h.type,o===ac)for(let f=0;f<6;++f)i.texImage2D(vL+f,a,l,n,s,0,c,u,null);else o===Au||o===Iu?i.texImage3D(o,a,l,n,s,r,0,c,u,null):i.texImage2D(o,a,l,n,s,0,c,u,null)}const wpe=MG,Hx=33984,ype=35048,yL=34962,Cpe=34963,kP=35345,JG=35718,Spe=35721,xpe=35971,Dpe=35382,kpe=35396,Lpe=35398,Epe=35392,Ape=35395,CL=5126,eK=35664,tK=35665,iK=35666,LP=5124,nK=35667,sK=35668,rK=35669,oK=35670,aK=35671,lK=35672,hK=35673,cK=35674,uK=35675,dK=35676,Ipe=35678,Tpe=35680,Npe=35679,Mpe=35682,Rpe=35685,Ope=35686,Ppe=35687,Fpe=35688,Bpe=35689,Vpe=35690,Wpe=36289,zpe=36292,Hpe=36293,EP=5125,fK=36294,gK=36295,pK=36296,Upe=36298,$pe=36299,jpe=36300,qpe=36303,Gpe=36306,Kpe=36307,Zpe=36308,Ype=36311,SL=3553,xL=34067,AP=32879,DL=35866,wt={};function mK(i,e){return wt[e].bindPoint}function Qpe(i,e){return function(t){i.uniform1f(e,t)}}function Xpe(i,e){return function(t){i.uniform1fv(e,t)}}function Jpe(i,e){return function(t){i.uniform2fv(e,t)}}function eme(i,e){return function(t){i.uniform3fv(e,t)}}function tme(i,e){return function(t){i.uniform4fv(e,t)}}function _K(i,e){return function(t){i.uniform1i(e,t)}}function bK(i,e){return function(t){i.uniform1iv(e,t)}}function vK(i,e){return function(t){i.uniform2iv(e,t)}}function wK(i,e){return function(t){i.uniform3iv(e,t)}}function yK(i,e){return function(t){i.uniform4iv(e,t)}}function ime(i,e){return function(t){i.uniform1ui(e,t)}}function nme(i,e){return function(t){i.uniform1uiv(e,t)}}function sme(i,e){return function(t){i.uniform2uiv(e,t)}}function rme(i,e){return function(t){i.uniform3uiv(e,t)}}function ome(i,e){return function(t){i.uniform4uiv(e,t)}}function ame(i,e){return function(t){i.uniformMatrix2fv(e,!1,t)}}function lme(i,e){return function(t){i.uniformMatrix3fv(e,!1,t)}}function hme(i,e){return function(t){i.uniformMatrix4fv(e,!1,t)}}function cme(i,e){return function(t){i.uniformMatrix2x3fv(e,!1,t)}}function ume(i,e){return function(t){i.uniformMatrix3x2fv(e,!1,t)}}function dme(i,e){return function(t){i.uniformMatrix2x4fv(e,!1,t)}}function fme(i,e){return function(t){i.uniformMatrix4x2fv(e,!1,t)}}function gme(i,e){return function(t){i.uniformMatrix3x4fv(e,!1,t)}}function pme(i,e){return function(t){i.uniformMatrix4x3fv(e,!1,t)}}function ur(i,e,t,n){const s=mK(i,e);return B0(i)?function(r){let o,a;bL(i,r)?(o=r,a=null):(o=r.texture,a=r.sampler),i.uniform1i(n,t),i.activeTexture(Hx+t),i.bindTexture(s,o),i.bindSampler(t,a)}:function(r){i.uniform1i(n,t),i.activeTexture(Hx+t),i.bindTexture(s,r)}}function dr(i,e,t,n,s){const r=mK(i,e),o=new Int32Array(s);for(let a=0;a<s;++a)o[a]=t+a;return B0(i)?function(a){i.uniform1iv(n,o),a.forEach(function(l,h){i.activeTexture(Hx+o[h]);let c,u;bL(i,l)?(c=l,u=null):(c=l.texture,u=l.sampler),i.bindSampler(t,u),i.bindTexture(r,c)})}:function(a){i.uniform1iv(n,o),a.forEach(function(l,h){i.activeTexture(Hx+o[h]),i.bindTexture(r,l)})}}wt[CL]={Type:Float32Array,size:4,setter:Qpe,arraySetter:Xpe};wt[eK]={Type:Float32Array,size:8,setter:Jpe,cols:2};wt[tK]={Type:Float32Array,size:12,setter:eme,cols:3};wt[iK]={Type:Float32Array,size:16,setter:tme,cols:4};wt[LP]={Type:Int32Array,size:4,setter:_K,arraySetter:bK};wt[nK]={Type:Int32Array,size:8,setter:vK,cols:2};wt[sK]={Type:Int32Array,size:12,setter:wK,cols:3};wt[rK]={Type:Int32Array,size:16,setter:yK,cols:4};wt[EP]={Type:Uint32Array,size:4,setter:ime,arraySetter:nme};wt[fK]={Type:Uint32Array,size:8,setter:sme,cols:2};wt[gK]={Type:Uint32Array,size:12,setter:rme,cols:3};wt[pK]={Type:Uint32Array,size:16,setter:ome,cols:4};wt[oK]={Type:Uint32Array,size:4,setter:_K,arraySetter:bK};wt[aK]={Type:Uint32Array,size:8,setter:vK,cols:2};wt[lK]={Type:Uint32Array,size:12,setter:wK,cols:3};wt[hK]={Type:Uint32Array,size:16,setter:yK,cols:4};wt[cK]={Type:Float32Array,size:32,setter:ame,rows:2,cols:2};wt[uK]={Type:Float32Array,size:48,setter:lme,rows:3,cols:3};wt[dK]={Type:Float32Array,size:64,setter:hme,rows:4,cols:4};wt[Rpe]={Type:Float32Array,size:32,setter:cme,rows:2,cols:3};wt[Ope]={Type:Float32Array,size:32,setter:dme,rows:2,cols:4};wt[Ppe]={Type:Float32Array,size:48,setter:ume,rows:3,cols:2};wt[Fpe]={Type:Float32Array,size:48,setter:gme,rows:3,cols:4};wt[Bpe]={Type:Float32Array,size:64,setter:fme,rows:4,cols:2};wt[Vpe]={Type:Float32Array,size:64,setter:pme,rows:4,cols:3};wt[Ipe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:SL};wt[Tpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:xL};wt[Npe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:AP};wt[Mpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:SL};wt[Wpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:DL};wt[zpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:DL};wt[Hpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:xL};wt[Upe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:SL};wt[$pe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:AP};wt[jpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:xL};wt[qpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:DL};wt[Gpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:SL};wt[Kpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:AP};wt[Zpe]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:xL};wt[Ype]={Type:null,size:0,setter:ur,arraySetter:dr,bindPoint:DL};function kL(i,e){return function(t){if(t.value)switch(i.disableVertexAttribArray(e),t.value.length){case 4:i.vertexAttrib4fv(e,t.value);break;case 3:i.vertexAttrib3fv(e,t.value);break;case 2:i.vertexAttrib2fv(e,t.value);break;case 1:i.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else i.bindBuffer(yL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,t.numComponents||t.size,t.type||CL,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function td(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else i.bindBuffer(yL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||LP,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function LL(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else i.bindBuffer(yL,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||EP,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function IP(i,e,t){const n=t.size,s=t.count;return function(r){i.bindBuffer(yL,r.buffer);const o=r.size||r.numComponents||n,a=o/s,l=r.type||CL,h=wt[l].size*o,c=r.normalize||!1,u=r.offset||0,d=h/s;for(let f=0;f<s;++f)i.enableVertexAttribArray(e+f),i.vertexAttribPointer(e+f,a,l,c,h,u+d*f),r.divisor!==void 0&&i.vertexAttribDivisor(e+f,r.divisor)}}const On={};On[CL]={size:4,setter:kL};On[eK]={size:8,setter:kL};On[tK]={size:12,setter:kL};On[iK]={size:16,setter:kL};On[LP]={size:4,setter:td};On[nK]={size:8,setter:td};On[sK]={size:12,setter:td};On[rK]={size:16,setter:td};On[EP]={size:4,setter:LL};On[fK]={size:8,setter:LL};On[gK]={size:12,setter:LL};On[pK]={size:16,setter:LL};On[oK]={size:4,setter:td};On[aK]={size:8,setter:td};On[lK]={size:12,setter:td};On[hK]={size:16,setter:td};On[cK]={size:4,setter:IP,count:2};On[uK]={size:9,setter:IP,count:3};On[dK]={size:16,setter:IP,count:4};function CK(i){const e=i.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const mme=/(\.|\[|]|\w+)/g,_me=i=>i>="0"&&i<="9";function SK(i,e,t,n){const s=i.split(mme).filter(a=>a!=="");let r=0,o="";for(;;){const a=s[r++];o+=a;const l=_me(a[0]),h=l?parseInt(a):a;if(l&&(o+=s[r++]),r===s.length){t[h]=e;break}else{const c=s[r++],u=c==="[",d=t[h]||(u?[]:{});t[h]=d,t=d,n[o]=n[o]||function(f){return function(g){xK(f,g)}}(d),o+=c}}}function bme(i,e){let t=0;function n(a,l,h){const c=l.name.endsWith("[0]"),u=l.type,d=wt[u];if(!d)throw new Error(`unknown type: 0x${u.toString(16)}`);let f;if(d.bindPoint){const g=t;t+=l.size,c?f=d.arraySetter(i,u,g,h,l.size):f=d.setter(i,u,g,h,l.size)}else d.arraySetter&&c?f=d.arraySetter(i,h):f=d.setter(i,h);return f.location=h,f}const s={},r={},o=i.getProgramParameter(e,JG);for(let a=0;a<o;++a){const l=i.getActiveUniform(e,a);if(CK(l))continue;let h=l.name;h.endsWith("[0]")&&(h=h.substr(0,h.length-3));const c=i.getUniformLocation(e,l.name);if(c){const u=n(e,l,c);s[h]=u,SK(h,u,r,s)}}return s}function vme(i,e){const t={},n=i.getProgramParameter(e,xpe);for(let s=0;s<n;++s){const r=i.getTransformFeedbackVarying(e,s);t[r.name]={index:s,type:r.type,size:r.size}}return t}function wme(i,e){const t=i.getProgramParameter(e,JG),n=[],s=[];for(let a=0;a<t;++a){s.push(a),n.push({});const l=i.getActiveUniform(e,a);n[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],h=a[1];i.getActiveUniforms(e,s,i[l]).forEach(function(c,u){n[u][h]=c})});const r={},o=i.getProgramParameter(e,Dpe);for(let a=0;a<o;++a){const l=i.getActiveUniformBlockName(e,a),h={index:i.getUniformBlockIndex(e,l),usedByVertexShader:i.getActiveUniformBlockParameter(e,a,kpe),usedByFragmentShader:i.getActiveUniformBlockParameter(e,a,Lpe),size:i.getActiveUniformBlockParameter(e,a,Epe),uniformIndices:i.getActiveUniformBlockParameter(e,a,Ape)};h.used=h.usedByVertexShader||h.usedByFragmentShader,r[l]=h}return{blockSpecs:r,uniformData:n}}const X8=/\[\d+\]\.$/,yme=(i,e)=>((i+(e-1))/e|0)*e;function Cme(i,e,t,n){if(e||t){n=n||1;const s=i.length/4;return function(r){let o=0,a=0;for(let l=0;l<s;++l){for(let h=0;h<n;++h)i[o++]=r[a++];o+=4-n}}}else return function(s){s.length?i.set(s):i[0]=s}}function Sme(i,e,t,n){const s=t.blockSpecs,r=t.uniformData,o=s[n];if(!o)return wpe("no uniform block object named:",n),{name:n,uniforms:{}};const a=new ArrayBuffer(o.size),l=i.createBuffer(),h=o.index;i.bindBuffer(kP,l),i.uniformBlockBinding(e,o.index,h);let c=n+".";X8.test(c)&&(c=c.replace(X8,"."));const u={},d={},f={};return o.uniformIndices.forEach(function(g){const p=r[g];let m=p.name;m.startsWith(c)&&(m=m.substr(c.length));const b=m.endsWith("[0]");b&&(m=m.substr(0,m.length-3));const _=wt[p.type],w=_.Type,y=b?yme(_.size,16)*p.size:_.size*p.size,x=new w(a,p.offset,y/w.BYTES_PER_ELEMENT);u[m]=x;const L=Cme(x,b,_.rows,_.cols);d[m]=L,SK(m,L,f,d)}),{name:n,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:u,setters:d}}function J8(i,e,t){return Sme(i,e.program,e.uniformBlockSpec,t)}function xme(i,e,t){const n=(e.uniformBlockSpec||e).blockSpecs[t.name];if(n){const s=n.index;return i.bindBufferRange(kP,s,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function e7(i,e,t){xme(i,e,t)&&i.bufferData(kP,t.array,ype)}function t7(i,e){const t=i.setters;for(const n in e){const s=t[n];if(s){const r=e[n];s(r)}}}function xK(i,e){for(const t in e){const n=i[t];typeof n=="function"?n(e[t]):xK(i[t],e[t])}}function Yr(i,...e){const t=i.uniformSetters||i,n=e.length;for(let s=0;s<n;++s){const r=e[s];if(Array.isArray(r)){const o=r.length;for(let a=0;a<o;++a)Yr(t,r[a])}else for(const o in r){const a=t[o];a&&a(r[o])}}}function Dme(i,e){const t={},n=i.getProgramParameter(e,Spe);for(let s=0;s<n;++s){const r=i.getActiveAttrib(e,s);if(CK(r))continue;const o=i.getAttribLocation(e,r.name),a=On[r.type],l=a.setter(i,o,a);l.location=o,t[r.name]=l}return t}function kme(i,e){for(const t in e){const n=i[t];n&&n(e[t])}}function W0(i,e,t){t.vertexArrayObject?i.bindVertexArray(t.vertexArrayObject):(kme(e.attribSetters||e,t.attribs),t.indices&&i.bindBuffer(Cpe,t.indices))}function Lme(i,e){const t=bme(i,e),n=Dme(i,e),s={program:e,uniformSetters:t,attribSetters:n};return B0(i)&&(s.uniformBlockSpec=wme(i,e),s.transformFeedbackInfo=vme(i,e)),s}const Eme=4,i7=5123;function Hw(i,e,t,n,s,r){t=t===void 0?Eme:t;const o=e.indices,a=e.elementType,l=n===void 0?e.numElements:n;s=s===void 0?0:s,a||o?r!==void 0?i.drawElementsInstanced(t,l,a===void 0?i7:e.elementType,s,r):i.drawElements(t,l,a===void 0?i7:e.elementType,s):r!==void 0?i.drawArraysInstanced(t,s,l,r):i.drawArrays(t,s,l)}const Ame=36160,Hd=36161,Ime=3553,Tme=5121,Nme=6402,Mme=6408,Rme=33190,Ome=36012,Pme=35056,Fme=36013,Bme=32854,Vme=32855,Wme=36194,DK=33189,kK=6401,LK=36168,TP=34041,zme=36064,EL=36096,EK=36128,NP=33306,MN=33071,RN=9729,AK=[{format:Mme,type:Tme,min:RN,wrap:MN},{format:TP}],Oa={};Oa[TP]=NP;Oa[kK]=EK;Oa[LK]=EK;Oa[Nme]=EL;Oa[DK]=EL;Oa[Rme]=EL;Oa[Ome]=EL;Oa[Pme]=NP;Oa[Fme]=NP;function Hme(i,e){return Oa[i]||Oa[e]}const id={};id[Bme]=!0;id[Vme]=!0;id[Wme]=!0;id[TP]=!0;id[DK]=!0;id[kK]=!0;id[LK]=!0;function Ume(i){return id[i]}function $me(i,e,t,n){const s=Ame,r=i.createFramebuffer();i.bindFramebuffer(s,r),t=t||i.drawingBufferWidth,n=n||i.drawingBufferHeight,e=e||AK;let o=0;const a={framebuffer:r,attachments:[],width:t,height:n};return e.forEach(function(l){let h=l.attachment;const c=l.samples,u=l.format;let d=l.attachmentPoint||Hme(u,l.internalFormat);if(d||(d=zme+o++),!h)if(c!==void 0||Ume(u))h=i.createRenderbuffer(),i.bindRenderbuffer(Hd,h),c>1?i.renderbufferStorageMultisample(Hd,c,u,t,n):i.renderbufferStorage(Hd,u,t,n);else{const f=Object.assign({},l);f.width=t,f.height=n,f.auto===void 0&&(f.auto=!1,f.min=f.min||f.minMag||RN,f.mag=f.mag||f.minMag||RN,f.wrapS=f.wrapS||f.wrap||MN,f.wrapT=f.wrapT||f.wrap||MN),h=Kv(i,f)}if(RG(i,h))i.framebufferRenderbuffer(s,d,Hd,h);else if(bL(i,h))l.layer!==void 0?i.framebufferTextureLayer(s,d,h,l.level||0,l.layer):i.framebufferTexture2D(s,d,l.target||Ime,h,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(h)}),a}function jme(i,e,t,n,s){n=n||i.drawingBufferWidth,s=s||i.drawingBufferHeight,e.width=n,e.height=s,t=t||AK,t.forEach(function(r,o){const a=e.attachments[o],l=r.format,h=r.samples;if(h!==void 0||RG(i,a))i.bindRenderbuffer(Hd,a),h>1?i.renderbufferStorageMultisample(Hd,h,l,n,s):i.renderbufferStorage(Hd,l,n,s);else if(bL(i,a))vpe(i,a,r,n,s);else throw new Error("unknown attachment type")})}function qme(i,e,t){const n=i.createVertexArray();return i.bindVertexArray(n),e.length||(e=[e]),e.forEach(function(s){W0(i,s,t)}),i.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}const Gme=/^(.*?)_/;function Kme(i,e){LN(i,0);const t=i.getExtension(e);if(t){const n={},s=Gme.exec(e)[1],r="_"+s;for(const o in t){const a=t[o],l=typeof a=="function",h=l?s:r;let c=o;o.endsWith(h)&&(c=o.substring(0,o.length-h.length)),i[c]!==void 0?!l&&i[c]!==a&&MG(c,i[c],a,o):l?i[c]=function(u){return function(){return u.apply(t,arguments)}}(a):(i[c]=a,n[c]=a)}n.constructor={name:t.constructor.name},LN(n,0)}return t}const n7=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function IK(i){for(let e=0;e<n7.length;++e)Kme(i,n7[e])}function Zme(i,e){const t=["webgl2","webgl","experimental-webgl"];let n=null;for(let s=0;s<t.length;++s)if(n=i.getContext(t[s],e),n){IK(n);break}return n}function Yme(i,e){return Zme(i,e)}const Qme=`/***The vertex position wrt the rectangle specified by(x,x2,y,y2).*[0,0]=[x,y],[1,1]=[x2,y2].*The x or y component may contain fractional values if the rectangle*have been tessellated.*/in vec2 frac;uniform vec2 uMinSize;uniform float uMinOpacity;uniform vec4 uCornerRadii;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out float vHalfStrokeWidth;out vec4 vCornerRadii;
#if defined(ROUNDED_CORNERS) || defined(STROKED)
out vec2 vPosInPixels;
#endif
out vec2 vHalfSizeInPixels;/***Clamps the minimumSize and returns an opacity that reflects the amount of clamping.*/float clampMinSize(inout float pos,float frac,float size,float minSize){if(minSize>0.0&&abs(size)<minSize){pos+=(frac-0.5)*(minSize*sign(size)-size);return abs(size)/minSize;}return 1.0;}void sort(inout float a,inout float b){if(a>b){float tmp=b;b=a;a=tmp;}}void main(void){vec2 normalizedMinSize=uMinSize/uViewportSize;float x=getScaled_x();float x2=getScaled_x2();float y=getScaled_y();float y2=getScaled_y2();sort(x,x2);sort(y,y2);float clampMargin=1.0;vec2 pos1=vec2(clamp(x,0.0-clampMargin,1.0+clampMargin),y);vec2 pos2=vec2(clamp(x2,0.0-clampMargin,1.0+clampMargin),y2);vec2 size=pos2-pos1;if(size.x<=0.0||size.y<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}vec2 pos=pos1+frac*size;size.y*=getSampleFacetHeight(pos);float opaFactor=uViewOpacity*max(uMinOpacity,clampMinSize(pos.x,frac.x,size.x,normalizedMinSize.x)*clampMinSize(pos.y,frac.y,size.y,normalizedMinSize.y));pos=applySampleFacet(pos);
#if defined(ROUNDED_CORNERS) || defined(STROKED)
float aaPadding=1.0/uDevicePixelRatio;float strokeWidth=getScaled_strokeWidth();float strokeOpacity=getScaled_strokeOpacity()*opaFactor;vec2 centeredFrac=frac-0.5;vec2 expand=centeredFrac*(strokeWidth+aaPadding)/uViewportSize;pos+=expand;vec2 sizeInPixels=size*uViewportSize;vPosInPixels=(centeredFrac+expand/size)*sizeInPixels;vHalfSizeInPixels=sizeInPixels/2.0;vCornerRadii=min(uCornerRadii,min(vHalfSizeInPixels.x,vHalfSizeInPixels.y));vHalfStrokeWidth=strokeWidth/2.0;vStrokeColor=vec4(getScaled_stroke()*strokeOpacity,strokeOpacity);
#endif
gl_Position=unitToNdc(pos);float fillOpacity=getScaled_fillOpacity()*opaFactor;vFillColor=vec4(getScaled_fill()*fillOpacity,fillOpacity);setupPicking();}`,Xme=`#if defined(ROUNDED_CORNERS) || defined(STROKED)
in vec2 vPosInPixels;
#endif
in vec2 vHalfSizeInPixels;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in float vHalfStrokeWidth;in vec4 vCornerRadii;out lowp vec4 fragColor;float sdRoundedBox(vec2 p,vec2 b,vec4 r){r.xy=p.x>0.0 ? r.xy : r.zw;r.x=p.y>0.0 ? r.x  : r.y;vec2 q=abs(p)-b+r.x;return min(max(q.x,q.y),0.0)+length(max(q,0.0))-r.x;}float sdSharpBox(vec2 p,vec2 b){vec2 q=abs(p)-b;return max(q.x,q.y);}void main(void){
#if defined(ROUNDED_CORNERS) || defined(STROKED)
#ifdef ROUNDED_CORNERS
float d=sdRoundedBox(vPosInPixels,vHalfSizeInPixels,vCornerRadii);
#else
float d=sdSharpBox(vPosInPixels,vHalfSizeInPixels);
#endif
fragColor=distanceToColor(d,vFillColor,vStrokeColor,vHalfStrokeWidth);if(fragColor.a==0.0){discard;}
#else
fragColor=vFillColor;
#endif
if(uPickingEnabled){fragColor=vPickingColor;}}`,MP="attr_",TK="uDomain_",Jme="range_",s7="scale_",NK="getScaled_",ON="uRangeTexture_",r7=3402823466e29;function e0e(i){const e=i.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+i);return{family:e[1]||"continuous",transform:e[2]}}function t0e(i,e){let t;if(_L(i))t=Ud(TG(i)(e));else if(hn(e))if(hf(i))t=n0e(e);else throw new Error(`String values are not supported on the "${i}" channel: ${e}`);else if(Zk(e))t=Ud(e?1:0);else if(e===null)if(hf(i))t=Ud([0,0,0]);else throw new Error(`null value is not supported on the "${i}" chanel.`);else t=Ud(e);return`
#define ${i}_DEFINED
${t.type} ${NK}${i}() {
    // Constant value
    return ${t};
}`}function i0e(i,e,t){if(Ra(t))throw new Error(`Cannot create scale for "value": ${JSON.stringify(t)}`);if(!e)throw new Error("Scale is undefined");const n=Mf(i),s=MP+i,r=TK+n,o=Jme+n,a=Ux(e.type),l=a?"vec2":"float",h=e.domain?e.domain().length:void 0;let c;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${i}`),u.push(""),u.push(`#define ${i}_DEFINED`);const{transform:d}=e0e(e.type),f=(S,...k)=>s0e.apply(null,[S,"value",...k]);let g;switch(d){case"linear":g=f("scaleLinear","domain",o);break;case"log":g=f("scaleLog","domain",o,e.base());break;case"symlog":g=f("scaleSymlog","domain",o,e.constant());break;case"pow":case"sqrt":g=f("scalePow","domain",o,e.exponent());break;case"index":case"locus":g=f("scaleBandHp","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"point":case"band":g=f("scaleBand","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"ordinal":case"null":case"identity":g=f("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${i}: ${JSON.stringify(t)}`)}const p=gL(e.type)||Os(e.type)&&hf(i)?[0,1]:e.range?e.range():void 0;if(p&&i==n&&p.length&&p.every(Mr)){const S=o7(p);u.push(`const ${S.type} ${o} = ${S};`)}const m=hf(i)?"vec3":"float";let b;if(hf(i)){const S=ON+n;if(i==n&&u.push(`uniform sampler2D ${S};`),Os(e.type))b=`getInterpolatedColor(${S}, transformed)`;else if(Eu(e.type)||yp(e.type))b=`getDiscreteColor(${S}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||yp(e.type)){const S=ON+n;i==n&&u.push(`uniform sampler2D ${S};`),b=`getDiscreteColor(${S}, int(transformed)).r`}Ww(t)?u.push(`uniform highp ${l} ${s};`):u.push(`in highp ${l} ${s};`);const _=[],w=Os(e.type)&&h>2,y=yp(e.type)||w;if(_.push("int slot = 0;"),y){const S=r;_.push(w?`while (slot < ${S}.length() - 2 && value >= ${S}[slot + 1]) { slot++; }`:`while (slot < ${S}.length() && value >= ${S}[slot]) { slot++; }`)}const x=Os(e.type)||yp(e.type)||["band","point"].includes(e.type);if(g){const S=r;x&&(a?_.push(`vec3 domain = ${S};`):_.push(`vec2 domain = vec2(${S}[slot], ${S}[slot + 1]);`)),_.push(`float transformed = ${g};`),w&&_.push(`transformed = (float(slot) + transformed) / (float(${S}.length() - 1));`)}else _.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&_.push(`transformed = clampToRange(transformed, ${o7(p)});`),_.push(`return ${b??"transformed"};`),u.push(`
${m} ${s7}${i}(${l} value) {
${_.map(S=>`    ${S}
`).join("")}
}`),u.push(`
${m} ${NK}${i}() {
    return ${s7}${i}(${s});
}`);const L=u.join(`
`);if(x&&i==n){const S=Os(e.type)||yp(e.type)?h:2;c=a?`highp vec3 ${r};`:`mediump float ${r}[${S}];`}return{glsl:L,domainUniform:c}}function PN(i){if(!Mr(i))throw new Error(`Not a number: ${i}`);if(i==1/0)return""+r7;if(i==-1/0)return""+-r7;{let e=`${i}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function Ud(i){typeof i=="number"&&(i=[i]);const e=i.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);let t,n;return e>1?(t=`vec${e}`,n=`${t}(${i.map(PN).join(", ")})`):(t="float",n=PN(i[0])),Object.assign(n,{type:t,numComponents:e})}function n0e(i){const e=ku(i).rgb();return Ud([e.r,e.g,e.b].map(t=>t/255))}function o7(i){return Ud([i[0],Lw(i)])}function s0e(i,...e){const t=[];for(const n of e)Mr(n)?t.push(PN(n)):lo(n)?t.push(Ud(n)):t.push(n);return`${i}(${t.join(", ")})`}function Ux(i){return i=="index"||i=="locus"}const MK=2**11,r0e=MK-1;function RK(i,e=[]){const t=i&r0e,n=i-t;return e[0]=n,e[1]=t,e}function o0e(i){const e=i%MK;return[i-e,e]}function a0e(i){return[...o0e(i[0]),i[1]-i[0]]}class l0e{constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}addConverter(e,t){const n=this.createUpdater(MP+e,t.numComponents||1,t.arrayReference),s=t.f;this.dataUpdaters.push(t.arrayReference?r=>n(s(r)):r=>n(s(r)))}createUpdater(e,t,n){if(!Mr(this.size))throw new Error("The number of vertices must be defined!");let s,r,o=0;const a=new Float32Array(this.size*t);if(this.arrays[e]={data:a,numComponents:t},t==1){let l=0;const h=c=>{l=+c};s=()=>{a[o++]=l},r=h}else{let l=n??[0];const h=n?c=>{}:c=>{l=c};switch(t){case 1:break;case 2:s=()=>{a[o++]=l[0],a[o++]=l[1]},r=h;break;case 3:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2]},r=h;break;case 4:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2],a[o++]=l[3]},r=h;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),r}_unrollPushAll(){let e="",t="";for(let s=0;s<this.pushers.length;s++)e+=`const p${s} = that.pushers[${s}];
`,t+=`p${s}();
`;const n=new Function("that",`${e}

            return function unrolledPushAll() {
                ${t}
                that.vertexCount++;
            };
        `);this.pushAll=n(this)}pushAll(){this.size>1e5?this._unrollPushAll():this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++},this.pushAll()}updateFromDatum(e){for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const Tp=5,HE=127;function FN(i){const e=[];for(let g=0;g<=HE;g++)e.push(void 0);const t=new Map;for(const g of i.chars)g.id<=HE?e[g.id]=g:t.set(g.id,g);const n=8722;t.has(n)||t.set(n,e["-".charCodeAt(0)]);function s(g){return(g<=HE?e[g]:t.get(g))||e[63]}function r(g){return s(g.charCodeAt(0))}const o=i.common.base,a=r("x"),l=r("X"),h=r("q"),c=a.height-Tp*2,u=l.height-Tp*2,d=h.height-a.height+h.yoffset-a.yoffset;function f(g,p=1){let m=0;for(let b=0;b<g.length;b++)m+=s(g.charCodeAt(b)).xadvance;return m/o*p}return{measureWidth:f,getCharByCode:s,getChar:r,xHeight:c,capHeight:u,descent:d,common:i.common}}function h0e(i,e=0,t=1){return Math.max(e,Math.min(t,i))}const a7=2**31-1,c0e=-(2**31);function u0e(i,e,t,n=t){const s=new Int32Array(i);s.fill(a7);let r=c0e,o=!1;const a=new Int32Array(i),l=e[0],h=(e[1]-e[0])/i,c=(p,m)=>{const b=(p-l)/h,_=Math.floor(b);return h0e(m&&_==b?_-1:_,0,i-1)};function u(p,m,b){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const _=t(p),w=c(_,!1);s[w]>m&&(s[w]=m),a[w]<b&&(a[w]=b)}function d(p,m,b){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const _=t(p),w=n(p),y=c(_,!1),x=c(w,!0);for(let L=y;L<=x;L++)s[L]>m&&(s[L]=m),a[L]<b&&(a[L]=b)}const f=(p,m,b=[0,0])=>{const _=c(p,!1),w=c(m,!0),y=s[_],x=Math.max(a[w],y);return b[0]=y,b[1]=x,b},g=()=>{for(let m=1;m<a.length;m++)a[m]<a[m-1]&&(a[m]=a[m-1]);let p=!0;for(let m=s.length-1;m>0;m--)p&&s[m]==a7?(s[m]=a[m],p=!1):s[m-1]>s[m]&&(s[m-1]=s[m]);return f};if(u.getIndex=g,d.getIndex=g,!o)return t==n?u:d}class Uw{constructor({encoders:e,numVertices:t=void 0,attributes:n=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,r])=>n.includes(s)&&r&&r.scale&&!r.constant)),this.allocatedVertices=t,this.variableBuilder=new l0e(t);for(const[s,r]of Object.entries(this.variableEncoders)){const o=r.accessor,a=[0,0],l=Ux(r.scale.type),h=r.indexer,c=h?u=>h(o(u)):l?u=>RK(o(u),a):o;this.variableBuilder.addConverter(s,{f:c,numComponents:l?2:1,arrayReference:l?a:void 0})}this.lastOffset=0,this.rangeMap=new Lf([],JSON.stringify)}registerBatch(e){var t;const n=this.lastOffset,s=this.variableBuilder.vertexCount,r=s-n;r&&this.rangeMap.set(e,{offset:n,count:r,xIndex:(t=this.xIndexer)==null?void 0:t.getIndex()}),this.lastOffset=s}addBatches(e){for(const[t,n]of e)this.addBatch(t,n)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,n=t+e.length){const s=()=>{this.addToXIndex=l=>{},this.xIndexer=void 0};if(!e.length||n-t<0){s();return}const r=l=>{var h;return l&&Os((h=l.scale)==null?void 0:h.type)&&l},o=r(this.variableEncoders.x),a=r(this.variableEncoders.x2);if(o){const l=o.accessor,h=a?a.accessor:l,c=[l(e[t]),h(e[n-1])];if(c[1]>c[0]){this.xIndexer=u0e(50,c,l,h);let u=this.variableBuilder.vertexCount;this.addToXIndex=d=>{let f=this.variableBuilder.vertexCount;this.xIndexer(d,u,f),u=f}}else s()}else s()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class d0e extends Uw{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateFrac=this.variableBuilder.createUpdater("frac",2)}addBatch(e,t,n=0,s=t.length){if(s<=n)return;const r=this.encoders,[o,a]=this.visibleRange,l=d=>d.accessor||(f=>0),h=l(r.x),c=l(r.x2);this.prepareXIndexer(t,n,s);const u=[0,0];this.updateFrac(u);for(let d=n;d<s;d++){const f=t[d];let g=h(f),p=c(f);if(g>p&&([g,p]=[p,g]),p<o||g>a)continue;g<o&&(g=o),p>a&&(p=a),this.variableBuilder.updateFromDatum(f),u[0]=0,u[1]=0;const m=1;this.variableBuilder.pushAll();for(let b=0;b<=m;b++)u[0]=b/m,u[1]=0,this.variableBuilder.pushAll(),u[1]=1,this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(f)}this.registerBatch(e)}}class f0e extends Uw{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class g0e extends Uw{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}}class p0e extends Uw{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class m0e extends Uw{constructor({encoders:e,attributes:t,fontMetrics:n,properties:s,numCharacters:r=void 0}){super({encoders:e,attributes:t,numVertices:r*6}),this.metadata=n,this.metrics=n,this.properties=s;const o=e.text.channelDef;this.numberFormat=!Ra(o)&&"format"in o&&o.format?vs(o.format):a=>a,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1)}addBatch(e,t,n=0,s=t.length){const r=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let h=-Tp;switch(this.properties.baseline){case"top":h+=this.metrics.capHeight;break;case"middle":h+=this.metrics.capHeight/2;break;case"bottom":h-=this.metrics.descent;break}const c=this.encoders.text.accessor||this.encoders.text,u=[0,0];this.updateVertexCoord(u);const d=[0,0];this.updateTextureCoord(d),this.prepareXIndexer(t,n,s);for(let f=n;f<s;f++){const g=t[f],p=this.numberFormat(c(g)),m=hn(p)?p:p===null?"":""+p;if(m.length==0)continue;this.variableBuilder.updateFromDatum(g);const b=o?m.length:this.metrics.measureWidth(m);this.updateWidth(b);let _=r=="right"?-b:r=="center"?-b/2:0;if(!o){const L=this.metrics.getCharByCode(m.charCodeAt(0));_-=(L.width-L.xadvance)/a/2}let w=-.5,y=1,x=1;for(let L=0;L<m.length;L++){const S=this.metrics.getCharByCode(m.charCodeAt(L)),k=o?1:S.xadvance/a;if(S.id==32){_+=k;continue}o?(x=(S.width+Tp*2)/S.width,_=-x/2,y=(S.height+Tp*2)/S.height,w=-.5-Tp/S.height):(y=S.height/a,w=-(S.height+S.yoffset+h)/a,x=S.width/a);const D=S.x,T=S.y;u[0]=_,u[1]=w+y,d[0]=D/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=_+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=_,u[1]=w,d[0]=D/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),u[0]=_+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=_,u[1]=w,d[0]=D/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),u[0]=_+x,u[1]=w,d[0]=(D+S.width)/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),_+=k}this.addToXIndex(g)}this.registerBatch(e)}}const l7=`#define PI 3.141593
uniform View{mediump vec2 uViewOffset;mediump vec2 uViewScale;mediump vec2 uViewportSize;lowp float uDevicePixelRatio;lowp float uViewOpacity;bool uPickingEnabled;};/***Maps a coordinate on the unit scale to a normalized device coordinate.*(0,0)is at the bottom left corner.*/vec4 unitToNdc(vec2 coord){return vec4((coord*uViewScale+uViewOffset)*2.0-1.0,0.0,1.0);}vec4 unitToNdc(float x,float y){return unitToNdc(vec2(x,y));}vec4 pixelsToNdc(vec2 coord){return unitToNdc(coord/uViewportSize);}vec4 pixelsToNdc(float x,float y){return pixelsToNdc(vec2(x,y));}float linearstep(float edge0,float edge1,float x){return clamp((x-edge0)/(edge1-edge0),0.0,1.0);}/***Specialized linearstep for doing antialiasing*/float distanceToRatio(float d){return clamp(d*uDevicePixelRatio+0.5,0.0,1.0);}vec4 distanceToColor(float d,vec4 fill,vec4 stroke,float halfStrokeWidth){if(halfStrokeWidth>0.0){float sd=abs(d)-halfStrokeWidth;return mix(stroke,d<=0.0 ? fill : vec4(0.0),distanceToRatio(sd));}else{return fill*distanceToRatio(-d);}}`,_0e="const float inf=1.0/0.0;vec3 getDiscreteColor(sampler2D s,int index){return texelFetch(s,ivec2(index % textureSize(s,0).x,0),0).rgb;}vec3 getInterpolatedColor(sampler2D s,float unitValue){return texture(s,vec2(unitValue,0.0)).rgb;}float clampToRange(float value,vec2 range){return clamp(value,min(range[0],range[1]),max(range[0],range[1]));}float scaleIdentity(float value){return value;}float scaleLinear(float value,vec2 domain,vec2 range){float domainSpan=domain[1]-domain[0];float rangeSpan=range[1]-range[0];return(value-domain[0])/domainSpan*rangeSpan+range[0];}float scaleLog(float value,vec2 domain,vec2 range,float base){return scaleLinear(log(value)/log(base),log(domain)/log(base),range);}float symlog(float value,float constant){return sign(value)*log(abs(value/constant)+1.0);}float scaleSymlog(float value,vec2 domain,vec2 range,float constant){return scaleLinear(symlog(value,constant),vec2(symlog(domain[0],constant),symlog(domain[1],constant)),range);}float scalePow(float value,vec2 domain,vec2 range,float exponent){return scaleLinear(pow(abs(value),exponent)*sign(value),pow(abs(domain),vec2(exponent))*sign(domain),range);}float scaleBand(float value,vec2 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;float n=domainExtent[1]-domainExtent[0];paddingInner=int(n)>1 ? paddingInner : 0.0;float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);return start+(value-domainExtent[0])*step+bandwidth*band;}float scaleBandHp(vec2 value,vec3 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;vec2 domainStart=domainExtent.xy;float n=domainExtent[2];float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);float hi=max(value[0]-domainStart[0],-inf);float lo=max(value[1]-domainStart[1],-inf);return dot(vec4(start,hi,lo,bandwidth),vec4(1.0,step,step,band));}",b0e=`/***Describes where a sample facet should be shown. Interpolating between the*current and target positions/heights allows for transitioning between facet*configurations.*/struct SampleFacetPosition{float pos;float height;float targetPos;float targetHeight;};/***Trasition fraction[0,1]between the current and target configurations.*/uniform float uTransitionOffset;
#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)
SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(0.0,1.0,0.0,1.0);}
#elif defined(SAMPLE_FACET_UNIFORM)
/***Location and height of the band on the Y axis on a normalized[0,1]scale.*Elements: curr pos,curr height,target pos,target height*/uniform vec4 uSampleFacet;SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(1.0-uSampleFacet.x-uSampleFacet.y,uSampleFacet.y,1.0-uSampleFacet.z-uSampleFacet.w,uSampleFacet.w);}
#elif defined(SAMPLE_FACET_TEXTURE)
uniform sampler2D uSampleFacetTexture;SampleFacetPosition getSampleFacetPos(){vec4 texel=texelFetch(uSampleFacetTexture,ivec2(int(attr_facetIndex),0),0);return SampleFacetPosition(1.0-texel.r-texel.g,texel.g,1.0-texel.r-texel.g,texel.g);}
#endif
bool isFacetedSamples(SampleFacetPosition facetPos){return facetPos!=SampleFacetPosition(0.0,1.0,0.0,1.0);}bool isFacetedSamples(){return isFacetedSamples(getSampleFacetPos());}bool isInTransit(){return uTransitionOffset>0.0;}float getTransitionFraction(float xPos){return smoothstep(0.0,0.7+uTransitionOffset,(xPos-uTransitionOffset)*2.0);}vec2 applySampleFacet(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return pos;}else if(isInTransit()){vec2 interpolated=mix(vec2(facetPos.pos,facetPos.height),vec2(facetPos.targetPos,facetPos.targetHeight),getTransitionFraction(pos.x));return vec2(pos.x,interpolated[0]+pos.y*interpolated[1]);}else{return vec2(pos.x,facetPos.pos+pos.y*facetPos.height);}}float getSampleFacetHeight(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return 1.0;}else if(isInTransit()){return mix(facetPos.height,facetPos.targetHeight,getTransitionFraction(pos.x));}else{return facetPos.height;}}`,v0e=`/**Based on concepts presented at:*https:*https:*/out highp vec4 vPickingColor;/***Passes the unique id to the fragment shader as a color if picking is enabled.*Returns true if picking is enabled.*/bool setupPicking(){if(uPickingEnabled){
#ifdef uniqueId_DEFINED
int id=int(getScaled_uniqueId());vPickingColor=vec4(ivec4(id>>0,id>>8,id>>16,0xFF)&0xFF)/float(0xFF);
#else
vPickingColor=vec4(1.0);
#endif
return true;}return false;}`,w0e="in highp vec4 vPickingColor;",BN=Symbol("cacheMap");function z0(i,e,t){let n=Zv(i).get(e);return n===void 0&&(n=t(e),Zv(i).set(e,n)),n}function OK(i,e){Zv(i).delete(e)}function hS(i,e){const t=Zv(i);for(const n of t.keys())n.startsWith(e)&&t.delete(n);Zv(i).delete(e)}function PK(i){i[BN]=new Map}function Zv(i){return i[BN]||PK(i),i[BN]}function y0e(i,e,t,n){const s=hn(i)?i:i.name,r=!hn(i)&&i.extent||[0,1];if(t===void 0&&!hn(i)&&(t=i.count),s){const o=cP(s);if(Nr(o)){const a=FK(o,{extent:r,count:t});return AL(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},a,n)}else{if(lo(o))return VN(o,e);throw new Error("Unknown scheme: "+s)}}}function C0e(i,e="rgb",t,n){const s=pL(i,hn(e)?e:e.type,hn(e)?void 0:e.gamma),r=FK(s);return AL(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},r,n)}function S0e(i,e,t,n){const s=Math.max(i.length,t||0),r=new Float32Array(s);for(let o=0;o<s;o++)r[o]=i[o%i.length];return AL(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},r,n)}function VN(i,e,t,n){const s=BK(i,t);return AL(e,{minMag:e.NEAREST,format:e.RGB,height:1},s,n)}function FK(i,{extent:e=[0,1],reverse:t=!1,count:n=256}={}){const s=e[0],r=Lw(e)-s,o=Iv(n).map(a=>a/(n-1)).map(a=>s+a/r).map(i);return t&&o.reverse(),BK(o)}function BK(i,e){const t=Math.max(i.length,e||0),n=new Uint8Array(t*3);for(let s=0;s<t;s++){const r=ku(i[s%i.length]).rgb();n[s*3+0]=r.r,n[s*3+1]=r.g,n[s*3+2]=r.b}return n}class x0e{constructor(e,t,n){this._container=e,this._sizeSource=t,this._shaderCache=new Map,this._listeners=[],this.rangeTextures=new WeakMap;const s=document.createElement("canvas");e.appendChild(s);const r=Yme(s,{antialias:!0,depth:!1,premultipliedAlpha:!0});if(!r)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!B0(r))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");if(IK(r),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this.canvas=s,this.gl=r,this._pickingAttachmentOptions=[{format:r.RGBA,type:r.UNSIGNED_BYTE,minMag:r.LINEAR,wrap:r.CLAMP_TO_EDGE}],this._pickingBufferInfo=$me(r,this._pickingAttachmentOptions),r.bindFramebuffer(r.FRAMEBUFFER,null),this.adjustGl(),this._resizeObserver=new ResizeObserver(o=>{this.invalidateSize(),this._emit("resize")}),this._resizeObserver.observe(this._container),this._updateDpr(),this._clearColor=[0,0,0,0],n){const o=ku(n).rgb();this._clearColor=[o.r/255,o.g/255,o.b/255,o.opacity]}}invalidateSize(){this._logicalCanvasSize=void 0,this._updateDpr(),this.adjustGl()}_updateDpr(){this.dpr=window.devicePixelRatio}compileShader(e,t){const n="#version 300 es",s="precision mediump float;";lo(t)&&(t=t.join(`

`));const r=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[n,s,t].join(`

`);a=r.createShader(e),r.shaderSource(a,l),r.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,jme(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this._resizeObserver.unobserve(this._container),this.canvas.remove()}getPhysicalCanvasSize(e){return e=e||this.getLogicalCanvasSize(),{width:e.width*this.dpr,height:e.height*this.dpr}}getLogicalCanvasSize(){var e;if(this._logicalCanvasSize)return this._logicalCanvasSize;const t=((e=this._sizeSource)==null?void 0:e.call(this))??{width:void 0,height:void 0},n=window.getComputedStyle(this._container,null),s=t.width??this._container.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),r=t.height??this._container.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);return this._logicalCanvasSize={width:s,height:r},this._logicalCanvasSize}addEventListener(e,t){this._listeners.push({type:e,listener:t})}_emit(e){for(const t of this._listeners)t.type===e&&t.listener()}readPickingPixel(e,t){const n=this.gl;e*=this.dpr,t*=this.dpr;const s=this.getPhysicalCanvasSize().height,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this._pickingBufferInfo.framebuffer),n.readPixels(e,s-t-1,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}clearAll(){const e=this.gl,{width:t,height:n}=this.getPhysicalCanvasSize();e.viewport(0,0,t,n),e.disable(e.SCISSOR_TEST),e.clearColor(...this._clearColor),e.clear(e.COLOR_BUFFER_BIT)}createRangeTexture(e,t=!1){const n=this.rangeTextures.get(e);if(!t&&n)return;function s(o,a){return Eu(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const r=e.channel;if(hf(r)){const o=e.getScaleProps(),a=e.getScale(),l=a.range();let h;if(o.scheme)if(a.type=="threshold"&&l)h=VN(l,this.gl,a.domain().length,n);else{let c=hn(o.scheme)?void 0:o.scheme.count;c=s(c,a),h=y0e(o.scheme,this.gl,c,n)}else gL(a.type)||Os(a.type)&&l.length>2?h=C0e(l,o.interpolate,this.gl,n):h=VN(l,this.gl,a.domain().length,n);this.rangeTextures.set(e,h)}else{const o=e.getScale();if(o.type==="ordinal"||yp(o.type)){const a=_L(r)?TG(r):h=>h,l=e.getScale().range();this.rangeTextures.set(e,S0e(l.map(a),this.gl,o.domain().length,n))}}}}function D0e(i,e="",t=0){const n=/ERROR:\s*\d+:(\d+)/gi,s=[...e.matchAll(n)],r=new Map(s.map((o,a)=>{const l=parseInt(o[1]),h=s[a+1],c=h?h.index:e.length,u=e.substring(o.index,c);return[l-1,u]}));return i.split(`
`).map((o,a)=>{const l=r.get(a);return`${a+1+t}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function k0e(i,e,t){const n=i.createProgram();i.attachShader(n,e),i.attachShader(n,t),i.linkProgram(n);function s(){let r,o;if(!i.getProgramParameter(n,i.LINK_STATUS)){r=i.getProgramInfoLog(n);for(const a of[e,t])i.getShaderParameter(a,i.COMPILE_STATUS)||(r=i.getShaderInfoLog(a),o=D0e(i.getShaderSource(a),r,0)+`
Error compiling: ${r}`,i.deleteShader(a));i.deleteProgram(n)}if(r)return{message:r,detail:o}}return{program:n,getProgramErrors:s}}function AL(i,e,t,n){return n?XG(i,n,t,e):n=Kv(i,{...e,src:t}),n}function L0e(...i){const e={get(t,n,s){for(const r of i){const o=r()[n];if(o!==void 0)return o}},has(t,n,s){for(const r of i){const o=r();if(n in o)return!0}return!1}};return new Proxy({},e)}function E0e(i){return hn(i)||Mr(i)||Zk(i)}const A0e="SAMPLE_FACET_UNIFORM",h7="SAMPLE_FACET_TEXTURE";class $w{constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.domainUniformInfo=void 0,this.viewUniformInfo=void 0,this.rangeMap=new I0e,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>(t==null?void 0:t.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=L0e(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}get opaque(){return!1}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:"_uniqueId"}),e}fixEncoding(e){return e}get encoding(){return z0(this,"encoding",()=>{const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),n=o=>{const a=this.properties[o];return E0e(a)&&{value:a}},s=Object.fromEntries(this.getSupportedChannels().map(o=>[o,n(o)]).filter(o=>o[1].value!==void 0)),r=this.fixEncoding({...e,...s,...t});for(const o of Object.keys(r))this.getSupportedChannels().includes(o)||delete r[o];return r})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=ife(this)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return h7;if(this.unitView.getLayoutAncestors().find(e=>"samples"in e.spec))return A0e}createAndLinkShaders(e,t,n=[]){const s=this.getAttributes();n.push("// view: "+this.unitView.getPathString()),this.domainUniforms=[];let r=[];const o=this.getSampleFacetMode();o&&n.push(`#define ${o}`);for(const u of s){let d;if(u in this.encoding)d=u;else continue;const f=this.encoding[d];if(f)if(Ra(f))r.push(t0e(d,f.value));else{const g=Oo(f)&&f.resolutionChannel||d,p=cf(g)?this.unitView.getScaleResolution(g).getScale():mL(),m=i0e(d,p,f);r.push(m.glsl),m.domainUniform&&this.domainUniforms.push(m.domainUniform)}}const a=this.domainUniforms.length?`layout(std140) uniform Domains {
`+this.domainUniforms.map(u=>`    ${u}
`).join("")+`};

`:"",l=[`precision highp float;
`,...n,l7,_0e,a,...r,b0e,v0e,e],h=[...n,l7,w0e,t],c=this.gl;this.programStatus=k0e(c,this.glHelper.compileShader(c.VERTEX_SHADER,l),this.glHelper.compileShader(c.FRAGMENT_SHADER,h))}finalizeGraphicsInitialization(){const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=Lme(this.gl,this.programStatus.program),delete this.programStatus,this.domainUniforms.length&&(this.domainUniformInfo=J8(this.gl,this.programInfo,"Domains")),this.viewUniformInfo=J8(this.gl,this.programInfo,"View"),this.gl.useProgram(this.programInfo.program),this._setDatums(),Yr(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0})}_setDatums(){for(const[e,t]of Object.entries(this.encoding))if(Ww(t)){const n=this.encoders[e],s=n.indexer?n.indexer(t.datum):Ux(n.scale.type)?RK(+t.datum):+t.datum;Yr(this.programInfo,{[MP+e]:s})}}deleteGraphicsData(){if(this.bufferInfo){const e=this.gl;for(let t=0;t<8;t++)e.disableVertexAttribArray(t);Object.values(this.bufferInfo.attribs).forEach(t=>this.gl.deleteBuffer(t.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,n]of Object.entries(e.arrays))n.data&&Vfe(this.gl,this.bufferInfo.attribs[t],n.data,0);else this.deleteGraphicsData(),this.bufferInfo=Hfe(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices,this.vertexArrayInfo=void 0}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null)return!1;for(const e of this.unitView.getLayoutAncestors())if(!e.isPickingSupported())return!1;return!0}prepareRender(e){const t=this.glHelper,n=this.gl,s=[];if(s.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=qme(this.gl,this.programInfo,this.bufferInfo)),n.useProgram(this.programInfo.program)}),this.domainUniformInfo){for(const[o,a]of Object.entries(this.domainUniformInfo.setters)){const l=o.substring(TK.length),h=this.encoding[l],c=Oo(h)&&h.resolutionChannel||l;if(cf(c)){const u=this.unitView.getScaleResolution(c).getScale();s.push(()=>{const d=Eu(u.type)?[0,u.domain().length]:u.domain();a(Ux(u.type)?a0e(d):d)})}}s.push(()=>e7(n,this.programInfo,this.domainUniformInfo))}for(const[o,a]of Object.entries(this.encoding))if(Oo(a)){const l=Oo(a)&&a.resolutionChannel||o;if(cf(l)){const h=this.unitView.getScaleResolution(l),c=t.rangeTextures.get(h);c&&s.push(()=>Yr(this.programInfo,{[ON+o]:c}))}}this.getSampleFacetMode()==h7&&s.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");Yr(this.programInfo,{uSampleFacetTexture:o})});const r=(e.picking??!1)&&this.isPickingParticipant();return s.push(()=>t7(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:r})),this.opaque||e.picking?s.push(()=>n.disable(n.BLEND)):s.push(()=>n.enable(n.BLEND)),s}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,n=this.programInfo.uniformSetters.uSampleFacet;if(t&&n){const s=t.locSize?t.locSize.location:0,r=t.locSize?t.locSize.size:1;if(s>1||s+r<0)return!1;const o=t.targetLocSize?t.targetLocSize.location:s,a=t.targetLocSize?t.targetLocSize.size:r;this.gl.uniform4f(n.location,s,r,o,a)}return!0}render(e){}createRenderCallback(e,t){var n;if(!this.bufferInfo){const d=new Error(`${this.getType()} mark has no data. This is bug.`);throw d.view=this.unitView,d}const s=this;let r;const o=(n=this.unitView.getScaleResolution("x"))==null?void 0:n.getScale(),a=o&&Os(o.type),l=["index","locus"].includes(o==null?void 0:o.type)?-1:0,h=[0,0];r=d=>{if(a&&d.xIndex){const f=o.domain(),g=d.xIndex(f[0]+l,f[1],h),p=g[0],m=g[1]-p;m>0&&e(p,m)}else e(d.offset,d.count)};const c=this.rangeMap.get(void 0).count==0?t.facetId:void 0,u=this.rangeMap.get(c);return t.sampleFacetRenderingOptions?function(){u.count&&s.prepareSampleFacetRendering(t)&&r(u)}:function(){u.count&&r(u)}}setViewport(e,t){e=e.flatten();const n=this.unitView.context.devicePixelRatio,s=this.gl,r=this.properties,o=this.glHelper.getLogicalCanvasSize(),a=.5,l=(r.xOffset??0)+a,h=(r.yOffset??0)+a;let c,u=e;if(r.clip!=="never"&&(r.clip||t)){let d=0,f=0,g;if(t){if(u=e.intersect(t).flatten(),!u.isDefined())return!1;g=[e.width/u.width,e.height/u.height],f=Math.max(0,e.y2-t.y2),d=Math.max(0,e.x2-t.x2)}else g=[1,1];const p=[u.x,o.height-u.y2,u.width,u.height].map(w=>w*n),m=p.map(w=>Math.round(w)),[b,_]=p.map((w,y)=>w-m[y]);s.viewport(...m),s.scissor(...m),s.enable(s.SCISSOR_TEST),c={uViewOffset:[(l+d+b/n)/u.width,-(h+f-_/n)/u.height],uViewScale:g}}else{if(!e.isDefined())return!1;s.viewport(0,0,o.width*n,o.height*n),s.disable(s.SCISSOR_TEST),c={uViewOffset:[(e.x+l)/o.width,(o.height-e.y-h-e.height)/o.height],uViewScale:[e.width/o.width,e.height/o.height]}}return t7(this.viewUniformInfo,{...c,uViewportSize:[e.width,e.height],uDevicePixelRatio:n}),e7(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(e,t){}}class I0e extends Lf{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,n]of e.entries())Object.assign(this.get(t),n)}}function WN(i,e){const t=ofe(e);let n=i[e]&&{...i[e]},s=i[t]&&{...i[t]};if(!(Ra(n)||Ra(s))){if(n){if(!Oo(i[e]))return;if(s){if(n.type!="quantitative"){const r=(1-(n.band||1))/2;n.band=r,s.band=-r}}else if(n.type=="quantitative")s={datum:0};else{s={...n};const r=(1-(n.band??1))/2;n.band=0+r,s.band=1-r}}else n={value:0},s={value:1};i[e]=n,i[t]=s}}function VK(i,e){i.stroke||(e?i.stroke={value:null}:i.stroke={resolutionChannel:"color",...i.color}),Ra(i.stroke)&&i.stroke.value===null&&(i.strokeWidth={value:0}),i.strokeOpacity||(i.strokeOpacity={resolutionChannel:"opacity",...i.opacity})}function WK(i,e){Ra(i.fill)&&i.fill.value===null?i.fillOpacity={value:0}:i.fill||(i.fill={resolutionChannel:"color",...i.color},!e&&!i.fillOpacity&&(i.fillOpacity={value:0})),i.fillOpacity||(e?i.fillOpacity={resolutionChannel:"opacity",...i.opacity}:i.fillOpacity={value:0})}class T0e extends $w{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1,tessellationZoomThreshold:10,tessellationTiles:35}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return z0(this,"opaque",()=>!this._isRoundedCorners()&&!this._isStroked()&&Ra(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return WN(e,"x"),WN(e,"y"),VK(e,this.properties.filled),WK(e,this.properties.filled),delete e.color,delete e.opacity,e}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}_isRoundedCorners(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight}_isStroked(){const e=this.encoding.strokeWidth;return!(Ra(e)&&!e.value)}async initializeGraphics(){await super.initializeGraphics();const e=[];this._isRoundedCorners()&&e.push("ROUNDED_CORNERS"),this._isStroked()&&e.push("STROKED"),this.createAndLinkShaders(Qme,Xme,e.map(t=>"#define "+t))}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Yr(this.programInfo,{uMinSize:[e.minWidth,e.minHeight],uMinOpacity:e.minOpacity,uCornerRadii:[e.cornerRadiusTopRight??e.cornerRadius,e.cornerRadiusBottomRight??e.cornerRadius,e.cornerRadiusTopLeft??e.cornerRadius,e.cornerRadiusBottomLeft??e.cornerRadius]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new d0e({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>W0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{Hw(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n)},e)}findDatumAt(e,t){e=to(e);const n=this.unitView.getCollector().facetBatches.get(e);if(!n)return;const s=this.encoders,r=s.x.scale.type;if(Eu(r)){const o=s.x.accessor;return n.find(a=>t==o(a))}else{const o=s.x.accessor,a=s.x2.accessor;return n.find(l=>t>=o(l)&&t<a(l))}}}const N0e=`/***The stroke should only grow inwards,e.g,the diameter/outline is not affected by the stroke width.*Thus,a point that has a zero size has no visible stroke. This allows strokes to be used with*geometric zoom,etc.*/uniform bool uInwardStroke;uniform lowp float uMaxRelativePointDiameter;uniform float uScaleFactor;uniform float uMaxPointSize;uniform float uZoomLevel;uniform float uSemanticThreshold;out float vRadius;out float vRadiusWithPadding;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out lowp float vShape;out lowp float vHalfStrokeWidth;out mat2 vRotationMatrix;float computeSemanticThresholdFactor(){return getScaled_semanticScore()>=uSemanticThreshold ? 1.0 : 0.0;}/***Computes a scaling factor for the points in a sample-faceted view.*/float getDownscaleFactor(vec2 pos){if(!isFacetedSamples()){return 1.0;}float sampleFacetHeight=getSampleFacetHeight(pos);float maxPointDiameter=sqrt(uMaxPointSize);float factor=sampleFacetHeight*uViewportSize.y*uMaxRelativePointDiameter;return clamp(0.0,maxPointDiameter,factor)/maxPointDiameter;}vec2 getDxDy(){
#if defined(dx_DEFINED) || defined(dy_DEFINED)
return vec2(getScaled_dx(),getScaled_dy())/uViewportSize;
#else
return vec2(0.0,0.0);
#endif
}void main(void){float semanticThresholdFactor=computeSemanticThresholdFactor();if(semanticThresholdFactor<=0.0){gl_PointSize=0.0;gl_Position=vec4(100.0,0.0,0.0,0.0);return;}float size=getScaled_size();vec2 pos=vec2(getScaled_x(),getScaled_y())+getDxDy();gl_Position=unitToNdc(applySampleFacet(pos));float strokeWidth=getScaled_strokeWidth();float diameter=sqrt(size)*uScaleFactor*semanticThresholdFactor*getDownscaleFactor(pos);float opacity=uViewOpacity;if(strokeWidth<=0.0||uInwardStroke){float minDiameter=1.0/uDevicePixelRatio;if(diameter<minDiameter){opacity*=pow(diameter/minDiameter,2.5);diameter=minDiameter;}}float fillOpa=getScaled_fillOpacity()*opacity;float strokeOpa=getScaled_strokeOpacity()*opacity;vShape=getScaled_shape();bool circle=vShape==0.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);vRotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);float roomForRotation=circle ? 1.0 : sin(mod(angle,PI/2.0)+PI/4.0)/sin(PI/4.0);float aaPadding=1.0/uDevicePixelRatio;float rotationPadding=(diameter*roomForRotation)-diameter;float strokePadding=uInwardStroke ? 0.0 : strokeWidth*(circle ? 1.0 : sqrt(3.0));float padding=rotationPadding+strokePadding+aaPadding;gl_PointSize=(diameter+padding)*uDevicePixelRatio;vRadius=diameter/2.0;vRadiusWithPadding=vRadius+padding/2.0;vHalfStrokeWidth=strokeWidth/2.0;vFillColor=vec4(getScaled_fill()*fillOpa,fillOpa);vStrokeColor=vec4(getScaled_stroke()*strokeOpa,strokeOpa);setupPicking();}`,M0e="const lowp vec4 white=vec4(1.0);const lowp vec4 black=vec4(0.0,0.0,0.0,1.0);uniform bool uInwardStroke;uniform float uGradientStrength;in float vRadius;in float vRadiusWithPadding;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in lowp float vShape;in lowp float vHalfStrokeWidth;in mat2 vRotationMatrix;out lowp vec4 fragColor;const float CIRCLE=0.0;const float SQUARE=1.0;const float TRIANGLE_UP=2.0;const float CROSS=3.0;const float DIAMOND=4.0;const float TRIANGLE_DOWN=5.0;const float TRIANGLE_RIGHT=6.0;const float TRIANGLE_LEFT=7.0;float circle(vec2 p,float r){return length(p)-r;}float square(vec2 p,float r){p=abs(p);return max(p.x,p.y)-r;}float equilateralTriangle(vec2 p,float r,bool flip,bool swap){if(swap){p.xy=p.yx;}if(flip){p.y=-p.y;}float k=sqrt(3.0);float kr=k*r;p.y-=kr/2.0;return max((abs(p.x)*k+p.y)/2.0,-p.y-kr);}float crossShape(vec2 p,float r){p=abs(p);vec2 b=vec2(0.4,1.0)*r;vec2 v=abs(p)-b.xy;vec2 h=abs(p)-b.yx;return min(max(v.x,v.y),max(h.x,h.y));}float diamond(vec2 p,float r){p=abs(p);return(max(abs(p.x-p.y),abs(p.x+p.y))-r)/sqrt(2.0);}void main(){float d;vec2 p=vRotationMatrix*(2.0*gl_PointCoord-1.0)*vRadiusWithPadding;float r=vRadius;if(vShape==CIRCLE){d=circle(p,r);}else if(vShape==SQUARE){d=square(p,r);}else if(vShape==TRIANGLE_UP){d=equilateralTriangle(p,r,true,false);}else if(vShape==CROSS){d=crossShape(p,r);}else if(vShape==DIAMOND){d=diamond(p,r);}else if(vShape==TRIANGLE_DOWN){d=equilateralTriangle(p,r,false,false);}else if(vShape==TRIANGLE_RIGHT){d=equilateralTriangle(p,r,false,true);}else if(vShape==TRIANGLE_LEFT){d=equilateralTriangle(p,r,true,true);}else{d=0.0;}if(!uPickingEnabled){lowp vec4 fillColor=mix(vFillColor,white,-d*uGradientStrength/vRadius);fragColor=distanceToColor(d+(uInwardStroke ? vHalfStrokeWidth : 0.0),fillColor,vStrokeColor,vHalfStrokeWidth);}else if(d-vHalfStrokeWidth<=0.0){fragColor=vPickingColor;}else{discard;}}",ih=1<<0,nd=1<<1,RP=1<<2,R0e={};class En{get behavior(){return 0}constructor(){this.children=[],this.parent=void 0,this.completed=!1}reset(){this.completed=!1;for(const e of this.children)e.reset()}initialize(){}_updatePropagator(){this._propagate=Function("children",Iv(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {${Iv(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}}`)(this.children)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this._updatePropagator(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,this._updatePropagator();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){const t=this.children.map(n=>n.subtreeToString(e+1)).join("");return`${" ".repeat(e*2)}* ${this.constructor.name}${("identifier"in this&&this.identifier?": "+this.identifier:"")??""} 
${t}`}getGlobalObject(){return this.parent?this.parent.getGlobalObject():R0e}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}beginBatch(e){for(const t of this.children)t.beginBatch(e)}_propagate(e){}}function zK(i){return i.type=="file"}function O0e(i){return i.type=="facet"}class HK extends En{constructor(e){super(),this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function P0e(i,e,t){const n=new HK({type:"sample",size:i});for(const s of e)n.handle(t(s));return n.complete(),n.reservoir}const F0e={};class B0e extends $w{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02}))}getAttributes(){return["inwardStroke","uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","gradientStrength","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...F0e}}fixEncoding(e){return VK(e,this.properties.filled),WK(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.unitView.getAccessor("semanticScore");e&&(this.sampledSemanticScores=Float32Array.from(P0e(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((t,n)=>t-n))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(N0e,M0e)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Yr(this.programInfo,{uInwardStroke:e.inwardStroke,uGradientStrength:e.fillGradientStrength,uMaxRelativePointDiameter:1-2*e.sampleFacetPadding})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new g0e({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}_getGeometricScaleFactor(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}_getMaxPointSize(){const e=this.encoders.size;return e.constant?e(null):e.scale.range().reduce((t,n)=>Math.max(t,n))}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.properties.semanticZoomFraction*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const t=this.sampledSemanticScores;return jj(t,e)}}else return-1}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>Yr(this.programInfo,{uMaxPointSize:this._getMaxPointSize(),uScaleFactor:this._getGeometricScaleFactor(),uSemanticThreshold:this.getSemanticThreshold()})),t.push(()=>W0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{s&&Hw(t,this.vertexArrayInfo,t.POINTS,s,n)},e)}}const V0e="const int BUTT=0;const int SQUARE=1;const int ROUND=2;in float pos;in float side;uniform float uMinLength;uniform mediump float uDashTextureSize;uniform lowp int uStrokeCap;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;out highp vec2 vPosInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float size=getScaled_size();float opacity=getScaled_opacity()*uViewOpacity;if(size<pixelSize){opacity*=size/pixelSize;size=pixelSize;}vec2 a=applySampleFacet(vec2(getScaled_x(),getScaled_y()));vec2 b=applySampleFacet(vec2(getScaled_x2(),getScaled_y2()));vec2 tangent=b-a;float offset=0.0;float relativeDiff=0.0;if(uMinLength>0.0||uStrokeCap!=BUTT){float len=length(tangent*uViewportSize);float diff=max(0.0,uMinLength-len);if(uStrokeCap!=BUTT){diff+=size;}relativeDiff=diff/len;offset=relativeDiff*(pos-0.5);}vec2 p=pos<1.0? a+tangent*(pos+offset): b+tangent*offset;float aaPadding=pixelSize;vec2 normal=normalize(vec2(-tangent.y,tangent.x)/uViewportSize);p+=normal*side*(size+aaPadding)/uViewportSize;gl_Position=unitToNdc(p);vColor=vec4(getScaled_color()*opacity,opacity);vSize=size;vNormalLengthInPixels=side*(size+aaPadding);vPosInPixels=vec2(pos,(1.0-pos))*(1.0+relativeDiff)*length(tangent*uViewportSize)-vec2(uStrokeCap!=BUTT ? size/2.0 : 0.0);setupPicking();}",W0e="const int BUTT=0;const int SQUARE=1;const int ROUND=2;uniform sampler2D uDashTexture;uniform float uDashTextureSize;uniform float uStrokeDashOffset;uniform lowp int uStrokeCap;in vec4 vColor;in float vSize;in vec2 vPosInPixels;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distanceFromEnd=-min(vPosInPixels[0],vPosInPixels[1]);float distance;if(distanceFromEnd>0.0&&uStrokeCap==ROUND){distance=length(vec2(distanceFromEnd,vNormalLengthInPixels));}else{distance=abs(vNormalLengthInPixels);}float opacity=clamp(((vSize/2.0-distance)*dpr),-0.5,0.5)+0.5;if(uDashTextureSize>0.0){float pos=(vPosInPixels[0]+uStrokeDashOffset)*dpr;float floored=floor(pos);vec2 texelPositions=(floored+vec2(0.5,1.5))/dpr/uDashTextureSize;opacity*=mix(texture(uDashTexture,vec2(texelPositions[0],0)).r,texture(uDashTexture,vec2(texelPositions[1],0)).r,clamp((pos-floored),0.0,1.0));}fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class z0e extends $w{constructor(e){super(e),this.dashTextureSize=0,Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&Oo(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&Oo(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("Invalid x and y encodings for rule mark: "+JSON.stringify(e));return e}async initializeGraphics(){if(await super.initializeGraphics(),this.properties.strokeDash){const e=this.gl,t=H0e(this.properties.strokeDash);this.dashTexture=Kv(e,{mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length}this.createAndLinkShaders(V0e,W0e)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Yr(this.programInfo,{uMinLength:e.minLength,uDashTextureSize:this.dashTextureSize,uStrokeCap:["butt","square","round"].indexOf(e.strokeCap)})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new f0e({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return this.dashTexture&&t.push(()=>Yr(this.programInfo,{uDashTexture:this.dashTexture,uStrokeDashOffset:this.properties.strokeDashOffset})),t.push(()=>W0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>Hw(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n),e)}}function H0e(i){if(i.length==0||i.length%2||i.findIndex(r=>Math.round(r)!=r||r<1||r>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(i));const e=i.reduce((r,o)=>r+o),t=new Uint8Array(e);let n=!0,s=0;for(let r of i){for(;r;)t[s++]=n&&255||0,r--;n=!n}return t}const U0e=`uniform float uSagittaScaleFactor;uniform float uMinSagittaLength;in vec2 strip;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float opacity=getScaled_opacity()*uViewOpacity;vec2 a=vec2(getScaled_x(),getScaled_y())*uViewportSize;vec2 b=vec2(getScaled_x2(),getScaled_y2())*uViewportSize;vec2 chordVector=b-a;vec2 unitChordVector=normalize(chordVector);vec2 chordNormal=vec2(-unitChordVector.y,unitChordVector.x);float sagitta=max(length(chordVector)/2.0*uSagittaScaleFactor,uMinSagittaLength);bool compress=false;if(compress){float maxSagittaLen=length(chordNormal*uViewportSize);float maxChordLen=length(unitChordVector*uViewportSize);float threshold=maxSagittaLen*0.5;if(sagitta>threshold){float m=(maxSagittaLen-threshold)/(maxChordLen-threshold);sagitta=(sagitta-threshold)*m+threshold;}}vec2 controlOffset=chordNormal*sagitta/0.75;vec2 p1=a;vec2 p2=a+controlOffset;vec2 p3=b+controlOffset;vec2 p4=b;float t=smoothstep(0.0,1.0,strip.x);vec2 C1=p4-3.0*p3+3.0*p2-p1;vec2 C2=3.0*p3-6.0*p2+3.0*p1;vec2 C3=3.0*p2-3.0*p1;vec2 C4=p1;vec2 p;if(t==0.0){p=p1;}else if(t==1.0){p=p4;}else{p=C1*t*t*t+C2*t*t+C3*t+C4;}vec2 tangent=normalize(3.0*C1*t*t+2.0*C2*t+C3);vec2 normal=vec2(-tangent.y,tangent.x);
#ifdef size2_DEFINED
float mixedSize=mix(getScaled_size(),getScaled_size2(),t);
#else
float mixedSize=getScaled_size();
#endif
if(mixedSize<pixelSize){opacity*=mixedSize/pixelSize;mixedSize=pixelSize;}float paddedSize=mixedSize+pixelSize;vNormalLengthInPixels=strip.y*paddedSize;p+=normal*vNormalLengthInPixels;gl_Position=pixelsToNdc(p);
#ifdef color2_DEFINED
vec3 color=mix(getScaled_color(),getScaled_color2(),t);
#else
vec3 color=getScaled_color();
#endif
vColor=vec4(color*opacity,opacity);vSize=paddedSize;setupPicking();}`,$0e="in lowp vec4 vColor;in float vSize;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distance=abs(vNormalLengthInPixels);float opacity=clamp(((vSize/2.0-distance)*dpr),0.0,1.0);fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class j0e extends $w{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,sagittaScaleFactor:1,minSagittaLength:1.5}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","height","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x||(e.x2=e.x),e.y2||(e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(U0e,$0e)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Yr(this.programInfo,{uSagittaScaleFactor:e.sagittaScaleFactor,uMinSagittaLength:e.minSagittaLength})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new p0e({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();s.arrays.strip={data:q0e(this.properties.segments),numComponents:2},this.rangeMap.migrateEntries(s.rangeMap),this.arrays=Object.fromEntries(Object.entries(s.arrays).map(([r,o])=>[r,{...o,data:void 0}])),this.updateBufferInfo(s)}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{this.gl.bindVertexArray(this.vertexArrayInfo.vertexArrayObject);for(const r of Object.entries(this.bufferInfo.attribs)){const[o,a]=r;a.buffer&&a.numComponents&&a.divisor&&(a.offset=n*this.arrays[o].numComponents*4)}W0(t,this.programInfo,this.bufferInfo),Hw(t,this.bufferInfo,t.TRIANGLE_STRIP,(this.properties.segments+1)*2,0,s)},e)}}function q0e(i){let e=0;const t=[];for(;e<=i;e++)t.push(e/i,.5),t.push(e/i,-.5);return t}const G0e=`uniform float uSdfNumerator;uniform vec2 uD;in mediump vec2 vertexCoord;in lowp vec2 textureCoord;uniform vec4 uViewportEdgeFadeWidth;uniform vec4 uViewportEdgeFadeDistance;uniform bool uSqueeze;uniform bool uLogoLetter;in float width;uniform ivec2 uAlign;
#ifdef x2_DEFINED
uniform float uPaddingX;uniform bool uFlushX;
#endif
#ifdef y2_DEFINED
uniform float uPaddingY;uniform bool uFlushY;
#endif
out vec2 vTexCoord;out vec4 vColor;out float vSlope;out float vEdgeFadeOpacity;struct RangeResult{float pos;float scale;};float minValue(vec4 v){return min(min(v.x,v.y),min(v.z,v.w));}float maxValue(vec4 v){return max(max(v.x,v.y),max(v.z,v.w));}/***All measures are in[0,1]*/RangeResult positionInsideRange(float a,float b,float width,float padding,int align,bool flush){float span=b-a;float paddedWidth=width+2.0*padding;if(a>1.0||b<0.0){return RangeResult(0.0,0.0);}float extra=max(0.0,span-paddedWidth);float pos;if(align==0){float centre=a+b;if(flush){float leftOver=max(0.0,paddedWidth-centre);centre+=min(leftOver,extra);float rightOver=max(0.0,paddedWidth+centre-2.0);centre-=min(rightOver,extra);}pos=centre/2.0;}else if(align<0){float edge=a;if(flush){float over=max(0.0,-edge);edge+=min(over,extra);}pos=edge+padding;}else{float edge=b;if(flush){float over=max(0.0,edge-1.0);edge-=min(over,extra);}pos=edge-padding;}float scale=clamp((span-padding)/paddedWidth,0.0,1.0);return RangeResult(pos,scale);}vec2 calculateRotatedDimensions(float width,mat2 rotationMatrix){vec2 a=abs(rotationMatrix*vec2(width/2.0,0.5));vec2 b=abs(rotationMatrix*vec2(width/2.0,-0.5));return vec2(max(a.x,b.x),max(a.y,b.y))*2.0;}ivec2 fixAlignForAngle(ivec2 align,float angleInDegrees){float a=mod(angleInDegrees+45.0,360.0);int x=align.x;int y=-align.y;if(a<90.0){return ivec2(x,y);}else if(a<180.0){return ivec2(y,-x);}else if(a<270.0){return ivec2(-x,y);}else{return ivec2(-y,x);}}void main(void){float opacity=getScaled_opacity()*uViewOpacity;vec2 size=vec2(getScaled_size());float x=getScaled_x();float y=getScaled_y();float scale=1.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);mat2 rotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);vec2 flushSize=calculateRotatedDimensions(width,rotationMatrix);
#if defined(x2_DEFINED) || defined(y2_DEFINED)
ivec2 align=fixAlignForAngle(uAlign,angleInDegrees);
#else
ivec2 align=uAlign;
#endif
#ifdef x2_DEFINED
float x2=getScaled_x2();if(uLogoLetter){size.x=(x2-x)*uViewportSize.x;x+=(x2-x)/2.0;}else{float x2=getScaled_x2();RangeResult result=positionInsideRange(min(x,x2),max(x,x2),size.x*scale*flushSize.x/uViewportSize.x,uPaddingX/uViewportSize.x,align.x,uFlushX);x=result.pos;scale*=result.scale;}
#endif
vec2 pos=applySampleFacet(vec2(x,y));
#ifdef y2_DEFINED
float y2=getScaled_y2();vec2 pos2=applySampleFacet(vec2(x,y2));if(uLogoLetter){size.y=(pos2.y-pos.y)*uViewportSize.y;pos.y+=(pos2.y-pos.y)/2.0;}else{RangeResult result=positionInsideRange(min(pos.y,pos2.y),max(pos.y,pos2.y),size.y*scale*flushSize.y/uViewportSize.y,uPaddingY/uViewportSize.y,align.y,uFlushY);pos.y=result.pos;scale*=result.scale;}
#endif
if(scale<1.0){if(uSqueeze){vec2 scaleFadeExtent=vec2(3.0,6.0)/size;if(scale<scaleFadeExtent[0]){gl_Position=vec4(0.0);return;}size*=scale;opacity*=linearstep(scaleFadeExtent[0],scaleFadeExtent[1],scale);}else if(scale<1.0){gl_Position=vec4(0.0);return;}}vec2 charPos=rotationMatrix*(vertexCoord*size+uD);vec2 unitPos=pos+charPos/uViewportSize;gl_Position=unitToNdc(unitPos);vSlope=max(1.0,min(size.x,size.y)/uSdfNumerator);vColor=vec4(getScaled_color()*opacity,opacity);vTexCoord=textureCoord;if(maxValue(uViewportEdgeFadeDistance)>-pow(10.0,10.0)){vEdgeFadeOpacity=minValue(((vec4(1.0,1.0,0.0,0.0)+vec4(-1.0,-1.0,1.0,1.0)*unitPos.yxyx)*uViewportSize.yxyx-uViewportEdgeFadeDistance)/uViewportEdgeFadeWidth);}else{vEdgeFadeOpacity=1.0;}setupPicking();}`,K0e="uniform sampler2D uTexture;uniform bool uLogoLetter;in vec2 vTexCoord;in float vEdgeFadeOpacity;in vec4 vColor;in float vSlope;out lowp vec4 fragColor;float median(float r,float g,float b){return max(min(r,g),min(max(r,g),b));}void main(){vec3 c=texture(uTexture,vTexCoord).rgb;float sigDist=1.0-median(c.r,c.g,c.b);float slope=uLogoLetter? 0.7/length(vec2(dFdy(sigDist),dFdx(sigDist))): vSlope;float opa=clamp((sigDist-0.5)*slope+0.5,0.0,1.0);opa*=pow(clamp(vEdgeFadeOpacity,0.0,1.0),2.2);fragColor=vColor*opa;if(uPickingEnabled){fragColor=vPickingColor;}}",Z0e={left:-1,center:0,right:1},Y0e={top:-1,middle:0,bottom:1,alphabetic:1};class Q0e extends $w{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0})),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont()}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of F0)this.properties.fitToBand&&WN(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(G0e,K0e)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Yr(this.programInfo,{uPaddingX:e.paddingX,uPaddingY:e.paddingY,uFlushX:!!e.flushX,uFlushY:!!e.flushY,uAlign:[Z0e[e.align],Y0e[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSqueeze:!!e.squeeze,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getData(),n=this.encoding,s=this.encoders.text.accessor||this.encoders.text;let r=0;const o="format"in n.text?vs(n.text.format):h=>h;for(const h of t){const c=o(s(h)),u=hn(c)?c:c===null?"":""+c;r+=u&&u.length||0}const a=new m0e({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(r,this.properties.minBufferSize||0)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const t=super.prepareRender(e);let n=.35;this.properties.logoLetters&&(n/=2);const s=this.font.metrics.common.base/(this.unitView.context.devicePixelRatio/n);return t.push(()=>Yr(this.programInfo,{uTexture:this.font.texture,uSdfNumerator:s})),t.push(()=>W0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>Hw(t,this.vertexArrayInfo,t.TRIANGLES,s,n),e)}}function c7(i,e,{spacing:t,devicePixelRatio:n,offset:s,reverse:r}={}){t=t||0,s=s||0;let o=0,a=0;for(const g of i)o+=Uy(g.px)+(UE(g)?0:t),a+=Uy(g.grow);o-=t;const l=Math.max(0,e-o),h=n!==void 0?g=>Math.round(g*n)/n:g=>g,c=[],u=[],d=g=>{const p=c.length;if(!p)return;const m=(g?t:0)*(r?-1:1);f-=m;for(let b=0;b<p;b++)u.push({location:f+(b+1)/(p+1)*m,size:0});f+=m,c.length=0};let f=r?Math.max(e,o):0+s;if(i.length==1&&UE(i[0]))return[{location:f,size:0}];for(let g=0;g<i.length;g++){const p=i[g];if(UE(p))c.push(p);else{d(u.length>0);const m=Uy(p.px)+(a?Uy(p.grow)/a*l:0);r&&(f-=m),u.push({location:h(f),size:h(m)}),r?f-=t:f+=m+t}}return f+=r?t:-t,d(!1),u}function X0e(i){let e=0,t=0;for(const n of i)e=Math.max(e,n.px??0),t=Math.max(t,n.grow??0);return{px:e,grow:t}}var cS,zN;const UK=class{constructor(i,e){Kt(this,cS),this.width=i,this.height=e}addPadding(i){return Ct(this,cS,zN).call(this,i.width,i.height)}subtractPadding(i){return Ct(this,cS,zN).call(this,-i.width,-i.height)}};let Yv=UK;cS=new WeakSet,zN=function(i,e){return new UK({px:(this.width.px??0)+i,grow:this.width.grow},{px:(this.height.px??0)+e,grow:this.height.grow})};const Tb=Object.freeze({px:0,grow:0}),J0e=new Yv(Tb,Tb);function UE(i){return!i.px&&!i.grow}function Uy(i){return i||0}function e_e(i){return i&&(Mr(i.px)||Mr(i.grow))}function $K(i){if(KK(i))throw new Error("parseSizeDef does not accept step-based sizes.");if(e_e(i))return i;if(Mr(i))return{px:i,grow:0};if(i==="container")return{px:0,grow:1};if(!i)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${i}`)}class Ns{constructor(e,t,n,s){this.top=e||0,this.right=t||0,this.bottom=n||0,this.left=s||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new Ns(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new Ns(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new Ns(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}union(e){return new Ns(Math.max(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom),Math.max(this.left,e.left))}getHorizontal(){return new Ns(0,this.right,0,this.left)}getVertical(){return new Ns(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):HN}static createFromRecord(e){return new Ns(e.top,e.right,e.bottom,e.left)}static zero(){return HN}static createUniformPadding(e){return new Ns(e,e,e,e)}}const HN=Ns.createUniformPadding(0);Object.freeze(HN);const t_e=/^([A-Za-z]+:)?\/\//;function i_e(i,e){if(e&&t_e.test(e))return e;const t=i();return t&&e?t.endsWith("/")?t+e:t+"/"+e:t??e}const jK="VISIT_SKIP",Nb="VISIT_STOP",u7=i=>i;var sb,uS,dS,UN,qK,fS,$N;class GK{constructor(e,t,n,s,r){if(Kt(this,UN),Kt(this,fS),Kt(this,sb,{}),Kt(this,uS,{}),Kt(this,dS,{}),Yo(this,"opacityFunction",u7),!e)throw new Error("View spec must be defined!");this.context=t,this.layoutParent=n,this.dataParent=s,this.name=e.name||r,this.spec=e,this.resolutions={scale:{},axis:{}},PK(this),this.blockEncodingInheritance=!1,this.contributesToScaleDomain=!0,this.needsAxes={x:!1,y:!1}}getPadding(){return this._cache("size/padding",()=>Ns.createFromConfig(this.spec.padding))}getOverhang(){return Ns.zero()}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?Ct(this,UN,qK).call(this):J0e)}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(e=>e.isConfiguredVisible())}getEffectiveOpacity(){var e;return this.opacityFunction(((e=this.layoutParent)==null?void 0:e.getEffectiveOpacity())??1)}getPathString(){return this.getLayoutAncestors().map(e=>e.name).reverse().join("/")}getLayoutAncestors(){return Ct(this,fS,$N).call(this,"layoutParent")}getDataAncestors(){return Ct(this,fS,$N).call(this,"dataParent")}handleBroadcast(e){for(const t of it(this,sb)[e.type]||[])t(e)}_addBroadcastHandler(e,t){let n=it(this,sb)[e];n||(n=[],it(this,sb)[e]=n),n.push(t)}handleInteractionEvent(e,t,n){const s=n?it(this,uS):it(this,dS);for(const r of s[t.type]||[])r(e,t)}addInteractionEventListener(e,t,n){const s=n?it(this,uS):it(this,dS);let r=s[e];r||(r=[],s[e]=r),r.push(t)}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==Nb)return t}catch(t){throw t.view=this,t}}getDescendants(){const e=[];return this.visit(t=>{e.push(t)}),e}onScalesResolved(){(!this.opacityFunction||this.opacityFunction===u7)&&(this.opacityFunction=s_e(this))}onBeforeRender(){}render(e,t,n={}){}getEncoding(){const e=this.dataParent&&!this.blockEncodingInheritance?this.dataParent.getEncoding():{},t=this.spec.encoding||{},n={...e,...t};for(const[s,r]of Object.entries(n))r===null&&delete n[s];return n}getFacetAccessor(e){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(e){var t;const n=this.getEncoding().sample;return Vw(n)?[n.field]:(t=this.layoutParent)==null?void 0:t.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(e){const t=Mf(e);return this.getDataAncestors().map(n=>n.resolutions.scale[t]).find(n=>n)}getAxisResolution(e){const t=Mf(e);return this.getDataAncestors().map(n=>n.resolutions.axis[t]).find(n=>n)}getConfiguredResolution(e,t){var n,s;return(s=(n=this.spec.resolve)==null?void 0:n[t])==null?void 0:s[e]}getConfiguredOrDefaultResolution(e,t){return this.getConfiguredResolution(e,t)??this.getConfiguredResolution("default",t)??this.getDefaultResolution(e,t)}getDefaultResolution(e,t){return"independent"}getBaseUrl(){return i_e(()=>{var e;return(e=this.dataParent)==null?void 0:e.getBaseUrl()},this.spec.baseUrl)}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return hn(e)?e:e.text}_cache(e,t){return z0(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":hS(this,e);break;case"ancestors":for(const n of this.getLayoutAncestors())hS(n,e);break;case"progeny":this.visit(n=>hS(n,e));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(e){}}sb=new WeakMap,uS=new WeakMap,dS=new WeakMap,UN=new WeakSet,qK=function(){const i=e=>{var t;let n=this.spec[e];if(KK(n)){const s=n.step,r=(t=this.getScaleResolution(e=="width"?"x":"y"))==null?void 0:t.getScale();if(r){let o=0;if(Eu(r.type))o=r.domain().length;else if(["locus","index"].includes(r.type)){const l=r.domain();o=Lw(l)-l[0]}else throw new Error(`Cannot use step-based size with "${r.type}" scale!`);const a=r;return o=oP(o,a.paddingInner(),a.paddingOuter()),{px:o*s,grow:0}}else throw new Error("Cannot use 'step' size with missing scale!")}else return(n&&$K(n))??{px:0,grow:1}};return this._cache("size/sizeFromSpec",()=>new Yv(i("width"),i("height")))},fS=new WeakSet,$N=function(i){const e=[];let t=this;do e.push(t),t=t[i];while(t);return e};function n_e(i){return"unitsPerPixel"in i}function s_e(i){const e=i.spec.opacity;if(e!==void 0){if(Mr(e))return t=>t*e;if(n_e(e)){const t=r=>{var o;const a=(o=i.getScaleResolution(r))==null?void 0:o.getScale();if(["linear","index","locus"].includes(a==null?void 0:a.type))return a},n=e.channel?t(e.channel):t("x")||t("y");if(!n)throw new Error("Cannot find a resolved quantitative scale for dynamic opacity!");const s=XO().domain(e.unitsPerPixel).range(e.values).clamp(!0);return r=>{const o=Cx(n.domain())/1e3;return s(o)*r}}}return t=>t}const KK=i=>!!(i!=null&&i.step);class Hm extends GK{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e}*[Symbol.iterator](){}replaceChild(e,t){throw new Error("Not implemented")}visit(e){let t;try{t=e(this)}catch(n){throw n.view=this,n}if(t===Nb)return t;if(t!==jK){e.beforeChildren&&e.beforeChildren(this);for(const n of this){const s=n.visit(e);if(s===Nb)return s}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){for(const t of this)if(t.name===e[0]){if(e.length==1)return t;if(t instanceof Hm)return t.findDescendantByPath(e.slice(1))}}findChildByName(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(n=>{if(n.name==e)return t=n,Nb}),t}getDefaultResolution(e,t){return"shared"}}const d7=1;function OP(){let i=[0,1],e=[0,1],t=1,n=1,s=0,r=0,o=.5,a=0;const l=h=>(h+o-i[0])/t*n+e[0];return l.invert=h=>(h-e[0])/n*t+i[0]-o,l.domain=function(h){if(arguments.length){i=lle(h),t=i[1]-i[0];const c=i[0]===0&&i[0]===0;if(t<d7&&!c){t=d7;const u=(i[0]+i[1])/2;i[0]=u-t/2,i[1]=u+t/2}return l}else return i.slice()},l.range=function(h){return arguments.length?(e=[...h],n=e[1]-e[0],l):e},l.numberingOffset=function(h){return arguments.length?(a=h,l):a},l.padding=function(h){return arguments.length?(r=h,s=Math.min(1,h),l):s},l.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),l):s},l.paddingOuter=function(h){return arguments.length?(r=h,l):r},l.align=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),l):o},l.step=()=>n/t,l.bandwidth=()=>l.step(),l.ticks=h=>{const c=l.align(),u=l.numberingOffset();return xx(i[0]-c+u,i[1]-c+u,Math.min(h,Math.ceil(t))).filter(Number.isInteger).map(d=>d-a)},l.tickFormat=(h,c)=>{if(c)throw new Error("Index scale's tickFormat does not support a specifier!");const u=Ef(i[0],i[1],Math.min(h,Math.ceil(t)))<1e5?vs(","):vs(".3s");return d=>u(d+a)},l.copy=()=>OP().domain(i).range(e).paddingInner(s).paddingOuter(r).numberingOffset(a),l}function r_e(){const i=OP().numberingOffset(1);let e;i.genome=function(n){return arguments.length?(e=n,i):e},i.ticks=n=>{if(!e)return[];const s=i.domain(),r=i.numberingOffset(),[o,a]=[Math.max(s[0],0),Math.min(s[1],e.totalSize-1)].map(c=>e.toChromosome(c)),l=Math.max(1,Ef(s[0],s[1],n)),h=[];for(let c=o.index;c<=a.index;c++){const u=e.chromosomes[c],d=Math.max(u.continuousStart+l,s[0]-(s[0]-u.continuousStart)%l),f=Math.min(u.continuousEnd-l/4,s[1]+1);for(let g=d;g<=f;g+=l){const p=g-r;p>=s[0]&&p<s[1]&&h.push(p)}}return h},i.tickFormat=(n,s)=>{if(!e)return;if(s)throw new Error("Locus scale's tickFormat does not support a specifier!");const r=i.domain(),o=r[1]-r[0],a=i.numberingOffset(),l=Ef(r[0],r[1],Math.min(n,Math.ceil(o)))<1e6?vs(","):vs(".3s"),h=c=>c-e.toChromosome(c).continuousStart;return c=>l(h(c)+a)};const t=i.copy;return i.copy=()=>t().genome(e),i}function o_e(i){return i.type=="locus"}function $x(i,e,t){if(t=t||[],i.some(o=>o===null)){if(i.every(o=>o===null))return null;throw console.warn(i),new Error("Cannot merge objects with nulls!")}const n={},s=(o,a)=>o===a||Xg(o)&&Xg(a)||Xg(o)&&a===!0||o===!0&&$a(a),r=o=>{for(let a in o){const l=o[a];if(!t.includes(a)&&l!==void 0)if(n[a]!==void 0&&!s(n[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(n[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(n[a])}.`);else{const h=n[a];if(Xg(h))Xg(l)&&(n[a]=$x([h,l],a));else if(Xg(l)){if(!(h===!0||h===void 0))throw new Error("Bug in merge! Target is: "+h);n[a]=$x([{},l],a)}else n[a]=l}}};for(const o of i)r(o);return n}function Xg(i){return $a(i)&&!Array.isArray(i)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function ZK(i,e,t){return Mr(e)&&t!=null&&(e=Math.min(e,~~(Cx(i.domain())/t)||1)),$a(e)&&(e.step,e=e.interval),e}function YK(i,e,t){var n=i.range(),s=Math.floor(n[0]),r=Math.ceil(Ma(n));if(s>r&&(n=r,r=s,s=n),e=e.filter(function(a){return a=i(a),s<=a&&a<=r}),t>0&&e.length>1){for(var o=[e[0],Ma(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function a_e(i,e){return i.bins?YK(i,l_e(i.bins,e)):i.ticks?i.ticks(e):i.domain()}function l_e(i,e){var t=i.length,n=~~(t/(e||t));return n<2?i.slice():i.filter(function(s,r){return!(r%n)})}function h_e(i,e,t){var n=i.tickFormat?i.tickFormat(e,t):t?vs(t):String;if(SG(i.type)){var s=u_e(t);n=i.bins?s:c_e(n,s)}return n}function c_e(i,e){return function(t){return i(t)?e(t):""}}function u_e(i){var e=Su(i||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return d_e(vs(e),vs(".1f")(1)[1])}else return vs(e)}function d_e(i,e){return function(t){var n=i(t),s=n.indexOf(e),r,o;if(s<0)return n;for(r=f_e(n,s),o=r<n.length?n.slice(r):"";--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function f_e(i,e){var t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const g_e="locus",p_e="index";var m_e=5;function __e(i){const e=i.type;return!i.bins&&(e===Vm||e===Rw||e===Ow)}function QK(i){return Os(i)&&![Ol,p_e,g_e].includes(i)}function XK(i){return i||{warn:(e,...t)=>console.warn(e,...t)}}var b_e=Sx(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function JK(i,e,t){t=XK(t);for(const n in i)if(!b_e[n]){if(n==="padding"&&QK(e.type))continue;Nr(e[n])?e[n](i[n]):t.warn("Unsupported scale property: "+n)}k_e(e,i,D_e(e,i,C_e(e,i,t)))}function v_e(i,e){const t=w_e(i),n=hi(t);if(!n)throw new Error("Unknown scale type: "+t);const s=n();return!i.domain&&Os(s.type)&&(i.domain=[0,0]),JK(i,s,e),s}function w_e(i){var e=i.type,t="",n;return e===Ol?Ol+"-"+Vm:(y_e(i)&&(n=i.rawDomain?i.rawDomain.length:i.domain?i.domain.length+ +(i.domainMid!=null):0,t=n===2?Ol+"-":n===3?P0+"-":""),(t+e||Vm).toLowerCase())}function y_e(i){const e=i.type;return Os(e)&&e!==pG&&e!==mG&&(i.scheme||i.range&&i.range.length&&i.range.every(hn))}function C_e(i,e,t){if(!i.domain)return 0;t=XK(t);var n=S_e(i,e.domainRaw,t);if(n>-1)return n;var s=e.domain,r=i.type,o=e.zero||e.zero===void 0&&__e(i),a,l;return s?(QK(r)&&e.padding&&s[0]!==Ma(s)&&(s=x_e(r,s,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(s=s.slice()).length-1||1,o&&(s[0]>0&&(s[0]=0),s[a]<0&&(s[a]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[a]=e.domainMax),e.domainMid!=null&&(l=e.domainMid,(l<s[0]||l>s[a])&&t.warn("Scale domainMid exceeds domain min or max.",l),s.splice(a,0,l))),i.domain(eZ(r,s,t)),r===aP&&i.unknown(e.domainImplicit?mN:void 0),e.nice&&i.nice&&i.nice(e.nice!==!0&&ZK(i,e.nice)||null),s.length):0}function S_e(i,e,t){return e?(i.domain(eZ(i.type,e,t)),e.length):-1}function x_e(i,e,t,n,s,r){var o=Math.abs(Ma(t)-t[0]),a=o/(o-2*n),l=i===Lu?Oj(e,null,a):i===Ow?rN(e,null,a,.5):i===Rw?rN(e,null,a,s||1):i===fL?Nae(e,null,a,r||1):Rj(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function eZ(i,e,t){if(SG(i)){var n=Math.abs(e.reduce(function(s,r){return s+(r<0?-1:r>0?1:0)},0));n!==e.length&&t.warn("Log scale domain includes zero: "+Yk(e))}return e}function D_e(i,e,t){let n=e.bins;if(n&&!lo(n)){const s=(n.start==null||n.stop==null)&&i.domain(),r=n.start==null?s[0]:n.start,o=n.stop==null?Ma(s):n.stop,a=n.step;a||an("Scale bins parameter missing step property."),n=Iv(r,o+a,a)}return n?i.bins=n:i.bins&&delete i.bins,i.type===lP&&(n?!e.domain&&!e.domainRaw&&(i.domain(n),t=n.length):i.bins=i.domain()),t}function k_e(i,e,t){var n=i.type,s=e.round||!1,r=e.range;if(e.rangeStep!=null)r=L_e(n,e,t);else if(e.scheme&&(r=E_e(n,e,t),Nr(r))){if(i.interpolator)return i.interpolator(r);an(`Scale type ${n} does not support interpolating color schemes.`)}if(r&&gL(n))return i.interpolator(pL(jN(r,e.reverse),e.interpolate,e.interpolateGamma));r&&e.interpolate&&i.interpolate?i.interpolate(xG(e.interpolate,e.interpolateGamma)):Nr(i.round)?i.round(s):Nr(i.rangeRound)&&i.interpolate(s?Nw:Xu),r&&i.range(jN(r,e.reverse))}function L_e(i,e,t){i!==vG&&i!==kN&&an("Only band and point scales support rangeStep.");var n=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=i===kN?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*oP(t,s,n)]}function E_e(i,e,t){var n=e.schemeExtent,s,r;return lo(e.scheme)?r=pL(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),r=cP(s),r||an(`Unrecognized scheme name: ${e.scheme}`)),t=i===bG?t+1:i===lP?t-1:i===DN||i===_G?+e.schemeCount||m_e:t,gL(i)?f7(r,n,e.reverse):Nr(r)?Qde(f7(r,n),t):i===aP?r:r.slice(0,t)}function f7(i,e,t){return Nr(i)&&(e||t)?Yde(i,jN(e||[0,1],t)):i}function jN(i,e){return e?i.slice().reverse():i}const g7=vs(",d");function A_e(i,e){return i.chrom+":"+g7(Math.floor(i.pos+1))+"-"+(i.chrom!=e.chrom?e.chrom+":":"")+g7(Math.ceil(e.pos))}const I_e="https://genomespy.app/data/genomes/";class T_e{constructor(e){if(this.config=e,!this.config.contigs&&typeof this.config.name!="string")throw new Error("No name has been defined for the genome assembly!");this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,this.config.contigs&&this.setChromSizes(this.config.contigs)}get name(){return this.config.name}async load(e){if(!this.config.contigs){this.config.baseUrl?this.baseUrl=/^http(s)?/.test(this.config.baseUrl)?this.config.baseUrl:e+"/"+this.config.baseUrl:this.baseUrl=I_e;try{this.setChromSizes(N_e(await tL({baseURL:this.baseUrl}).load(`${this.config.name}/${this.name}.chrom.sizes`)))}catch(t){throw new Error(`Could not load chrom sizes: ${t.message}`)}}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let t=0;this.startByIndex=[0];for(let n=0;n<e.length;n++){this.startByIndex.push(t);const s=e[n].size,r={...e[n],continuousStart:t,continuousEnd:t+s,continuousInterval:[t,t+s],index:n,number:n+1,odd:!(n&1)};this.chromosomes.push(r);const o=r.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,r.number,""+r.number,o,r.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,r);t+=r.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let n=this.cumulativeChromPositions.get(e);if(n===void 0)throw new Error("Unknown chromosome/contig: "+e);return n+ +t}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const t=R0(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return A_e(...this.toChromosomalInterval(e))}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),n=this.toChromosomal(e[1]-.5);return n.pos+=1,[t,n]}toContinuousInterval(e){var t;let[n,s]=e;return s||(s=n),[this.toContinuous(n.chrom,n.pos??0),this.toContinuous(s.chrom,s.pos??((t=this.chromosomesByName.get(s.chrom))==null?void 0:t.size))]}toDiscreteChromosomeIntervals(e){const t=e[0],n=e[1],s=[];if(t.chrom===n.chrom)s.push({chrom:t.chrom,startPos:t.pos,endPos:n.pos});else{const r=this.chromosomes.findIndex(a=>a.name===t.chrom),o=this.chromosomes.findIndex(a=>a.name===n.chrom);s.push({chrom:t.chrom,startPos:t.pos,endPos:this.chromosomes[r].size});for(let a=r+1;a<o;a++)s.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});s.push({chrom:n.chrom,startPos:0,endPos:n.pos})}return s}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const n=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(n);return a?[a.continuousStart,a.continuousEnd]:void 0}const s=t[3]||n,r=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):r;return[this.toContinuous(n,r-1),this.toContinuous(s,o)]}}}function N_e(i){return Qae(i).filter(e=>/^chr[0-9A-Z]+$/.test(e[0])).map(([e,t])=>({name:e,size:parseInt(t)}))}function tZ(i){return $a(i)&&"chrom"in i}function M_e(i){return i.every(tZ)}class jw extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof jw&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const n of e)this.extend(t(n));return this}}class $E extends jw{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class iZ extends jw{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class nZ extends iZ{constructor(){super(),this.type="nominal"}}class R_e extends jw{constructor(e){super();let t=0;for(let n=1;n<e.length;n++)t+=Math.sign(e[n]-e[n-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(n=>this.push(n))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const p7={quantitative:$E,index:$E,locus:$E,nominal:nZ,ordinal:iZ};function m7(i,e){if(i=="quantitative"&&O_e(e)){const t=new R_e(e);return t.type=i,t}else if(p7[i]){const t=new p7[i];return t.type=i,e&&t.extendAll(e),t}throw new Error("Unknown type: "+i)}function O_e(i){return i&&i.length>0&&i.length!=2&&i.every(e=>typeof e=="number")}function P_e(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}function F_e(i,e,t){return i*Math.pow(e/i,t)}hi("index",OP,["continuous"]);hi("locus",r_e,["continuous"]);hi("null",mL,[]);const _7="quantitative",sZ="ordinal",rZ="nominal",oZ="locus",B_e="index";var Ic,Mb,Es,Sh,Tc,qN,aZ,rb,gS,Nc,Sd,pS,GN,KN,lZ,hZ,mS,ZN;class V_e{constructor(e){Kt(this,Sh),Kt(this,qN),Kt(this,rb),Kt(this,Nc),Kt(this,pS),Kt(this,KN),Kt(this,hZ),Kt(this,mS),Kt(this,Ic,void 0),Kt(this,Mb,new Set),Kt(this,Es,void 0),this.channel=e,this.members=[],this.type=null,this.name=void 0}addEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);it(this,Mb).add(t)}removeEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);it(this,Mb).delete(t)}pushUnitView(e,t){var n;const s=uP(e,t),r=s.type,o=(n=s==null?void 0:s.scale)==null?void 0:n.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!this.type)this.type=r;else if(r!==this.type&&!Ib(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${r}. Use "resolve: independent" for channel ${this.channel}`);this.members.push({view:e,channel:t})}isExplicitDomain(){return!!this.getConfiguredDomain()}isDomainInitialized(){const e=it(this,Es);if(!e)return!1;const t=e.domain();return Os(e.type)?t.length>2||t.length==2&&(t[0]!==0||t[1]!==0):t.length>0}getScaleProps(){return z0(this,"scaleProps",()=>{const e=Ct(this,qN,aZ).call(this);if(e===null||e.type=="null")return{type:"null"};const t={...Ct(this,KN,lZ).call(this,this.type),...e};t.type||(t.type=W_e(this.channel,this.type));const n=Ct(this,rb,gS).call(this);return n&&n.length>0?t.domain=n:Eu(t.type)&&(t.domain=new nZ),!t.domain&&t.domainMid!==void 0&&(t.domain=[t.domainMin??0,t.domainMax??1]),this.channel=="y"&&Eu(t.type)&&t.reverse==null&&(t.reverse=!0),t.range&&t.scheme&&delete t.scheme,!("zoom"in t)&&["index","locus"].includes(t.type)&&(t.zoom=!0),z_e(t,this.channel),t})}getConfiguredDomain(){return Ct(this,mS,ZN).call(this,e=>Ib(e.channel)?void 0:e.view.getConfiguredDomain(e.channel))}getDataDomain(){return Ct(this,mS,ZN).call(this,e=>Ib(e.channel)?void 0:e.view.extractDataDomain(e.channel))}reconfigure(){if(it(this,Es)&&it(this,Es).type!="null"){const e=this.isDomainInitialized(),t=it(this,Es).domain();OK(this,"scaleProps");const n=this.getScaleProps();if(JK(n,it(this,Es)),Os(it(this,Es).type)&&jh(this,Ic,Ct(this,pS,GN).call(this)),!e){Ct(this,Sh,Tc).call(this);return}const s=it(this,Es).domain();Nx(s,t)||(this.isZoomable()?it(this,Es).domain(t):Ct(this,Nc,Sd).call(this)?(it(this,Es).domain(t),this.zoomTo(s,500)):Ct(this,Sh,Tc).call(this))}}getScale(){if(it(this,Es))return it(this,Es);const e=this.getScaleProps(),t=v_e(e);return jh(this,Es,t),o_e(t)&&t.genome(this.getGenome()),Os(t.type)&&jh(this,Ic,Ct(this,pS,GN).call(this)),t}getDomain(){return this.getScale().domain()}getComplexDomain(){var e;return((e=this.getGenome())==null?void 0:e.toChromosomalInterval(this.getDomain()))??this.getDomain()}isZoomed(){return Ct(this,Nc,Sd).call(this)&&Nx(Ct(this,rb,gS).call(this),this.getDomain())}isZoomable(){return Ct(this,Nc,Sd).call(this)&&!!this.getScaleProps().zoom}zoom(e,t,n){if(!Ct(this,Nc,Sd).call(this))return!1;const s=this.getScale(),r=s.domain();let o=[...r],a=s.invert(t);switch(this.getScaleProps().reverse&&(n=-n),"align"in s&&(a+=s.align()),s.type){case"linear":case"index":case"locus":o=Aae(o,n||0),o=Rj(o,a,e);break;case"log":o=Iae(o,n||0),o=Oj(o,a,e);break;case"pow":case"sqrt":{const l=s;o=Tae(o,n||0,l.exponent()),o=rN(o,a,e,l.exponent());break}default:throw new Error("Zooming is not implemented for: "+s.type)}return it(this,Ic)&&(o=Mae(o,it(this,Ic)[0],it(this,Ic)[1])),[0,1].some(l=>o[l]!=r[l])?(s.domain(o),Ct(this,Sh,Tc).call(this),!0):!1}async zoomTo(e,t=!1){var n;if(Zk(t)&&(t=t?700:0),!Ct(this,Nc,Sd).call(this))throw new Error("Not a zoomable scale!");const s=this.fromComplexInterval(e),r=(n=this.members[0])==null?void 0:n.view.context.animator,o=this.getScale(),a=o.domain();if(t>0&&a.length==2){const l=a[1]-a[0],h=a[0]+l/2,c=s[1]-s[0],u=s[0]+c/2;await r.transition({duration:t,easingFunction:P_e,onUpdate:d=>{const f=F_e(l,c,d),g=(l-f)/(l-c),p=g*u+(1-g)*h;o.domain([p-f/2,p+f/2]),Ct(this,Sh,Tc).call(this)}}),o.domain(s),Ct(this,Sh,Tc).call(this)}else o.domain(s),r==null||r.requestRender(),Ct(this,Sh,Tc).call(this)}resetZoom(){if(!Ct(this,Nc,Sd).call(this))throw new Error("Not a zoomable scale!");const e=this.getDomain(),t=Ct(this,rb,gS).call(this);return[0,1].some(n=>t[n]!=e[n])?(it(this,Es).domain(t),Ct(this,Sh,Tc).call(this),!0):!1}getZoomLevel(){return this.isZoomable()?Cx(it(this,Ic))/Cx(this.getScale().domain()):1}getGenome(){var e;if(this.type!=="locus")return;const t=(e=this.members[0].view.context.genomeStore)==null?void 0:e.getGenome();if(!t)throw new Error("No genome has been defined!");return t}invertToComplex(e){const t=this.getScale();if("invert"in t){const n=t.invert(e);return this.toComplex(n)}else throw new Error("The scale does not support inverting!")}toComplex(e){const t=this.getGenome();return t?t.toChromosomal(e):e}fromComplex(e){return tZ(e)?this.getGenome().toContinuous(e.chrom,e.pos):e}fromComplexInterval(e){return this.type==="locus"&&M_e(e)?this.getGenome().toContinuousInterval(e):e}}Ic=new WeakMap,Mb=new WeakMap,Es=new WeakMap,Sh=new WeakSet,Tc=function(){for(const i of it(this,Mb).values())i({type:"domain",scaleResolution:this})},qN=new WeakSet,aZ=function(){return z0(this,"mergedScaleProps",()=>{const i=this.members.map(e=>uP(e.view,e.channel).scale).filter(e=>e!==void 0);return $x(i,"scale",["domain"])})},rb=new WeakSet,gS=function(){return this.getConfiguredDomain()??(this.type==oZ?this.getGenome().getExtent():this.getDataDomain())},Nc=new WeakSet,Sd=function(){const i=this.getScale().type;return Os(i)},pS=new WeakSet,GN=function(){const i=this.getScaleProps(),e=i.zoom;if(H_e(e)&&lo(e.extent))return this.fromComplexInterval(e.extent);if(e)return i.type=="locus"?this.getGenome().getExtent():it(this,Es).domain()},KN=new WeakSet,lZ=function(i){const e=this.channel,t={};return this.isExplicitDomain()&&(t.zero=!1),qv(e)?t.nice=!this.isExplicitDomain():hf(e)?t.scheme=i==rZ?"tableau10":i==sZ?"blues":"viridis":_L(e)?t.range=IG(e):e=="size"?t.range=[0,400]:e=="angle"&&(t.range=[0,360]),t},hZ=new WeakSet,mS=new WeakSet,ZN=function(i){const e=this.members.filter(t=>!t.view.getLayoutAncestors().some(n=>!n.contributesToScaleDomain)).map(i).filter(t=>!!t);if(e.length)return e.reduce((t,n)=>t.extendAll(n))};function W_e(i,e){if(e==B_e||e==oZ){if(EG(i))return e;throw new Error(`${i} does not support ${e} data type. Only positional channels do.`)}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"]},n=["sample"].includes(i)?"null":t[i]?t[i][[rZ,sZ,_7].indexOf(e)]:e==_7?"linear":"ordinal";if(n===void 0)throw new Error(`Channel "${i}" is not compatible with "${e}" data type. Use of a proper scale may be needed.`);return n}function z_e(i,e){qv(e)&&i.type!=="ordinal"&&(i.range=[0,1]),e=="opacity"&&Os(i.type)&&(i.clamp=!0)}function H_e(i){return $a(i)}function YN(i){const e=new Set;function t(n){for(const s of Object.values(n.resolutions.scale))e.add(s)}for(const n of to(i)){n.visit(t);for(const s of n.getDataAncestors()){if(!s.contributesToScaleDomain)break;t(s)}}e.forEach(n=>n.reconfigure())}function jE(...i){for(const e of i)if(e!==void 0)return e}class U_e{constructor(e){this.channel=e,this.members=[]}get scaleResolution(){var e;return(e=Lw(this.members))==null?void 0:e.view.getScaleResolution(this.channel)}pushUnitView(e,t){const n=e.getScaleResolution(this.channel);if(!n)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&n!==this.scaleResolution)throw new Error("Shared axes must have a shared scale!");this.members.push({view:e,channel:t})}getAxisProps(){return z0(this,"axisProps",()=>{const e=this.members.map(t=>{const n=t.view.mark.encoding[t.channel];return"axis"in n&&n.axis});return e.length>0&&e.some(t=>t===null)?null:$x(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=r=>{var o;const a=uP(r.view,r.channel);if(!Ra(a))return{member:r,explicitTitle:jE("axis"in a?(o=a.axis)==null?void 0:o.title:void 0,a.title),implicitTitle:jE(Vw(a)?a.field:void 0,dP(a)?a.expr:void 0)}},t=this.members.map(e),n=t.filter(r=>{var o;if(Ib(r.member.channel)&&!r.explicitTitle){const a=Mf(r.member.channel);return((o=t.find(l=>l.member.view==r.member.view&&l.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),s=new Set(n.map(r=>jE(r.explicitTitle,r.implicitTitle)).filter(hn));return s.size?[...s].join(", "):null}}const $_e={point:B0e,rect:T0e,rule:z0e,link:j0e,text:Q0e};class rr extends Hm{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e;const o=$_e[this.getMarkType()];if(o)this.mark=new o(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.coords=void 0,this.needsAxes={x:!0,y:!0}}render(e,t,n={}){this.isConfiguredVisible()&&(this.coords=t,e.pushView(this,t),e.renderMark(this.mark,n),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}resolve(e){const t=this.mark.encoding;for(const[n,s]of Object.entries(t)){if(!Oo(s))continue;const r=Mf(s.resolutionChannel??n);if(!cf(r)||e=="axis"&&!qv(r))continue;let o=this;for(;(o.getConfiguredOrDefaultResolution(r,e)=="forced"||o.dataParent instanceof Hm&&["shared","excluded","forced"].includes(o.dataParent.getConfiguredOrDefaultResolution(r,e)))&&o.getConfiguredOrDefaultResolution(r,e)!="excluded";)o=o.dataParent;e=="axis"&&qv(n)&&EG(r)?(o.resolutions[e][r]||(o.resolutions[e][r]=new U_e(r)),o.resolutions[e][r].pushUnitView(this,n)):e=="scale"&&cf(n)&&(o.resolutions[e][r]||(o.resolutions[e][r]=new V_e(r)),o.resolutions[e][r].pushUnitView(this,n))}}getAccessor(e){return this._cache("accessor/"+e,()=>{const t=this.mark.encoding;if(t&&t[e])return this.context.accessorFactory.createAccessor(t[e])})}getFacetAccessor(e){return this.getAccessor("sample")||super.getFacetAccessor(this)}getCollector(){return this.context.dataFlow.findCollectorByKey(this)}_validateDomainQuery(e){if(Ib(e))throw new Error(`getDomain(${e}), must only be called for primary channels!`);const t=this.mark.encoding[e];if(!Oo(t))throw new Error("The channel has no scale, cannot get domain!");return t}getConfiguredDomain(e){const t=this._validateDomainQuery(e),n=t&&t.scale&&t.scale.domain;if(n){const s=this.getScaleResolution(t.resolutionChannel??e);return m7(t.type??"nominal",s.fromComplexInterval(n))}}extractDataDomain(e){const t=this._validateDomainQuery(e).type??"nominal",n=o=>{let a;const l=this.mark.encoding[o];if(l){const h=this.context.accessorFactory.createAccessor(l);if(h)if(a=m7(t),h.constant)a.extend(h({}));else{const c=this.getCollector();c!=null&&c.completed&&c.visitData(u=>a.extend(h(u)))}}return a};let s=n(e);const r=fP[e];if(r){const o=n(r);o&&s.extendAll(o)}return s}getZoomLevel(){const e=t=>{var n;return((n=this.getScaleResolution(t))==null?void 0:n.getZoomLevel())??1};return F0.map(e).reduce((t,n)=>t*n,1)}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),e.target=this,!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return e=="x"?"shared":"independent"}}class cZ extends GK{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e}}function*PP(i,e=[]){for(const[t,n]of i.entries())if(n instanceof Map)for(const s of PP(n,[...e,t]))yield s;else yield[[...e,t],n]}class uZ extends En{get behavior(){return RP}constructor(e){super(),this.params=e??{type:"collect"},this.observers=[],this.facetBatches=void 0,this._init()}_init(){this._data=[],this.facetBatches=new Lf([],JSON.stringify),this.facetBatches.set(void 0,this._data)}reset(){super.reset(),this._init()}handle(e){this._data.push(e)}beginBatch(e){O0e(e)&&(this._data=[],this.facetBatches.set(to(e.facetId),this._data))}complete(){var e,t;const n=(e=this.params)==null?void 0:e.sort,s=n?Pj(n.field,n.order):void 0,r=o=>{s&&o.sort(s)};if((t=this.params.groupby)!=null&&t.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const o=this.params.groupby.map(l=>Ai(l)),a=Xk(this._data,...o);this.facetBatches.clear();for(const[l,h]of PP(a))this.facetBatches.set(l,h)}for(const o of this.facetBatches.values())r(o);if(this.children.length)for(const[o,a]of this.facetBatches.entries()){if(o){const l={type:"facet",facetId:o};for(const h of this.children)h.beginBatch(l)}for(const l of a)this._propagate(l)}super.complete();for(const o of this.observers)o(this)}getData(){switch(this._checkStatus(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const t of e.values())for(let n=0;n<t.length;n++)yield t[n]}}}}}visitData(e){this._checkStatus();for(const t of this.facetBatches.values())for(let n=0;n<t.length;n++)e(t[n])}getItemCount(){let e=0;for(const t of this.facetBatches.values())e+=t.length;return e}_checkStatus(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}}class jx{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let n=this.length++;for(;n>0;){const s=n-1>>1,r=this.values[s];if(t>=r)break;this.ids[n]=this.ids[s],this.values[n]=r,n=s}this.ids[n]=e,this.values[n]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],n=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const a=o+1;let l=this.ids[o],h=this.values[o];const c=this.values[a];if(a<this.length&&c<h&&(o=a,l=this.ids[a],h=c),h>=n)break;this.ids[r]=l,this.values[r]=h,r=o}this.ids[r]=t,this.values[r]=n}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class j_e extends En{get behavior(){return ih}constructor(e){super(),this.params=e,this.startAccessor=Ai(e.start),this.endAccessor=Ai(e.end),this.chromAccessor=e.chrom?Ai(e.chrom):t=>{},this.weightAccessor=e.weight?Ai(e.weight):t=>1,this.as={coverage:e.as||"coverage",start:e.asStart||e.start,end:e.asEnd||e.end,chrom:e.asChrom||e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,n])=>n).map(([t,n])=>`${JSON.stringify(n)}: ${t}`).join(", ")+"};"),this.ends=new jx}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,n=this.as.chrom,s=this.startAccessor,r=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,h,c,u=0,d;const f=this.ends;f.clear();const g=(m,b,_)=>{if(m==b)return;let w=!1;l&&(l[e]===_?(l[t]=b,w=!0):l[e]!=0&&this._propagate(l)),w||(l=this.createSegment(m,b,_,c))},p=()=>{let m;for(;(m=f.peekValue())!==void 0;)g(d,m,u),d=m,u-=f.pop();d=void 0,l&&(this._propagate(l),l=void 0)};this.handle=m=>{const b=s(m);let _;for(;(_=f.peekValue())!==void 0&&_<b;)g(d,_,u),d=_,u-=f.pop();if(n){let y=o(m);y!==h&&(p(),c=y,h=c)}d!==void 0&&g(d,b,u),d=b;const w=a(m);u+=w,f.push(w,r(m))},this.complete=()=>{p(),super.complete()}}}function q_e(i,e,t=0,n=i.length){const s=new jx,r=n-t;let o;for(o=0;o<e&&o<r;o++)s.push(o,i[t+o]);for(;o<r;o++){const h=i[t+o];h>=s.peekValue()&&(s.push(o,h),s.pop())}const a=[];let l;for(;(l=s.pop())!==void 0;)a.push(t+l);return a.reverse()}class G_e{constructor(e,t=-1/0,n=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=n;const s=this.maxSize*2+1;this.lowerLimits=new Float64Array(s),this.upperLimits=new Float64Array(s),this.lowerChildren=new Int32Array(s),this.upperChildren=new Int32Array(s),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,n=0){if(e>=this.lowerLimits[n]&&t<=this.upperLimits[n]){const s=this.lowerChildren[n];if(s){const r=this._findSlot(e,t,s);return r>=0?r:this._findSlot(e,t,this.upperChildren[n])}else return n}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const n=this._findSlot(e,t);if(n<0)return!1;const s=this.n++,r=this.n++;return this.lowerLimits[s]=this.lowerLimits[n],this.upperLimits[s]=e,this.lowerLimits[r]=t,this.upperLimits[r]=this.upperLimits[n],this.lowerChildren[n]=s,this.upperChildren[n]=r,!0}}class K_e extends En{get behavior(){return RP}constructor(e,t){if(super(),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.posAccessor=Ai(this.params.pos),this.posBisector=Qk(this.posAccessor),this.scoreAccessor=Ai(this.params.score),this.widthAccessor=Ai(this.params.width),this.laneAccessor=this.params.lane?Ai(this.params.lane):s=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const n=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(n),this.resolution.addEventListener("domain",s=>this.schedule()),t._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const e=this.posAccessor;this._data.sort((t,n)=>e(t)-e(n)),this._scores=this._data.map(this.scoreAccessor);for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new G_e(200));this.schedule(),super.complete()}_filterAndPropagate(){var e;super.reset();const t=this.resolution.getScale(),n=(e=this.resolution.members[0].view.coords)==null?void 0:e[this.channel=="x"?"width":"height"];if(!n)return;for(const a of this.reservationMaps.values())a.reset();const s=t.domain(),r=70,o=q_e(this._scores,r,this.posBisector.left(this._data,s[0]),this.posBisector.right(this._data,s[1]));for(const a of o){const l=this._data[a],h=t(this.posAccessor(l))*n,c=this.widthAccessor(l)/2+this.padding;this.reservationMaps.get(this.laneAccessor(l)).reserve(h-c,h+c)&&this._propagate(l)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class Z_e extends En{constructor(e){super(),this.params=e,this.predicate=void 0}initialize(){this.predicate=$O(this.params.expr,this.getGlobalObject())}handle(e){this.predicate(e)&&this._propagate(e)}}class Y_e extends En{get behavior(){return ih}constructor(e){super();const t=e.index;if(e.fields){const n=to(e.fields).map(r=>Ai(r)),s=to(e.as||e.fields);if(n.length!==s.length)throw new Error(`Lengths of "fields" (${n.length}), and "as" (${s.length}) do not match!`);this.handle=r=>{const o=n.map((l,h)=>l(r)??[]),a=o[0].length;for(let l=0;l<a;l++){const h=Object.assign({},r);for(let c=0;c<n.length;c++)h[s[c]]=l<o[c].length?o[c][l]:null;t&&(h[t]=l),this._propagate(h)}}}else this.handle=n=>{for(let s=0;s<n.length;s++){const r=Object.assign({},n[s]);t&&(r[t]=s),this._propagate(r)}}}}const Q_e="0".charCodeAt(0);function*X_e(i,e=","){const t=e.charCodeAt(0);let n=0;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);r==t?(yield n,n=0):n=n*10+r-Q_e}yield n}class J_e extends En{get behavior(){return ih}constructor(e){super();const t=Ai(e.exons??"exons"),n=Ai(e.start??"start"),[s,r]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=n(o),l=a,h=!0;const c=t(o);for(const u of X_e(c)){if(h)l=a+u;else{a=l+u;const d=Object.assign({},o);d[s]=l,d[r]=a,this._propagate(d)}h=!h}}}}class ebe extends En{get behavior(){return ih}constructor(e){super();const t=to(e.field).map(r=>Ai(r)),n=to(e.separator),s=to(e.as||e.field);if(t.length!==n.length||t.length!==s.length)throw new Error(`Lengths of "separator" (${n.length}), "fields" (${t.length}), and "as" (${s.length}) do not match!`);this.handle=r=>{if(t.some(l=>!l(r)))return;const o=t.map((l,h)=>l(r).split(n[h]));tbe(o,r);const a=o[0].length;for(let l=0;l<a;l++){const h=Object.assign({},r);for(let c=0;c<t.length;c++)h[s[c]]=o[c][l];this._propagate(h)}}}}function tbe(i,e){const t=i.map(n=>n.length);if(!t.every(n=>n==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class ibe extends En{get behavior(){return nd}constructor(e){super(),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=$O(this.params.expr,this.getGlobalObject())}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class dZ extends En{get behavior(){return nd}constructor(e,t){super();const n=e.channel??"x";if(!["x","y"].includes(n))throw new Error("Invalid channel: "+n);const s=t.getScaleResolution(n).getGenome();if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const r=Ai(e.chrom),o=to(e.pos).map(g=>Ai(g)),a=to(e.as);if(o.length!=a.length)throw new Error('The number of "pos" and "as" elements must be equal!');const l=to(e.offset);let h;if(l.length==0)h=new Array(o.length).fill(0);else if(l.length==1)h=new Array(o.length).fill(l[0]);else if(l.length==o.length)h=l;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const c=new Function("datum","chromOffset","posAccessors",a.map((g,p)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${p}](datum) - ${h[p]};`).join(`
`));let u,d=0;const f=g=>{if(g!==u){if(d=s.cumulativeChromPositions.get(g),d===void 0)throw new Error("Unknown chromosome/contig: "+g);u=g}return d};this.handle=g=>{c(g,f(r(g)),o),this._propagate(g)}}}const nbe=["Lato-Regular.png"],sbe=[{id:87,width:53,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:43.491,chnl:15,x:0,y:0,page:0},{id:124,width:17,height:50,xoffset:0,yoffset:-32.193000000000005,xadvance:10.521,chnl:15,x:0,y:42,page:0},{id:40,width:20,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:94,page:0},{id:41,width:19,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:145,page:0},{id:36,width:32,height:49,xoffset:0,yoffset:-34.419000000000004,xadvance:24.360000000000003,chnl:15,x:0,y:196,page:0},{id:125,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:247,page:0},{id:91,width:22,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:297,page:0},{id:93,width:19,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:347,page:0},{id:123,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:397,page:0},{id:106,width:19,height:48,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:0,y:447,page:0},{id:81,width:43,height:47,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:21,y:447,page:0},{id:77,width:45,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:38.997,chnl:15,x:66,y:447,page:0},{id:64,width:43,height:44,xoffset:0,yoffset:-28.539,xadvance:35.133,chnl:15,x:23,y:397,page:0},{id:92,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:68,y:397,page:0},{id:47,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:98,y:397,page:0},{id:109,width:42,height:32,xoffset:0,yoffset:-21.609,xadvance:34.545,chnl:15,x:113,y:447,page:0},{id:119,width:42,height:31,xoffset:0,yoffset:-21.315,xadvance:32.991,chnl:15,x:157,y:447,page:0},{id:42,width:25,height:42,xoffset:0,yoffset:-31.626,xadvance:17.85,chnl:15,x:128,y:397,page:0},{id:37,width:42,height:41,xoffset:0,yoffset:-30.387,xadvance:33.663000000000004,chnl:15,x:155,y:397,page:0},{id:79,width:42,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:199,y:397,page:0},{id:102,width:24,height:41,xoffset:0,yoffset:-30.534000000000002,xadvance:14.721,chnl:15,x:243,y:397,page:0},{id:100,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:269,y:397,page:0},{id:98,width:32,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:302,y:397,page:0},{id:56,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:336,y:397,page:0},{id:38,width:40,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:29.904000000000003,chnl:15,x:370,y:397,page:0},{id:108,width:17,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:9.912,chnl:15,x:412,y:397,page:0},{id:107,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:21.336000000000002,chnl:15,x:431,y:397,page:0},{id:48,width:33,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:464,y:397,page:0},{id:71,width:38,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:30.681,chnl:15,x:21,y:347,page:0},{id:83,width:31,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:22.785,chnl:15,x:61,y:347,page:0},{id:63,width:27,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:18.795,chnl:15,x:94,y:347,page:0},{id:105,width:18,height:41,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:123,y:347,page:0},{id:51,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:143,y:347,page:0},{id:104,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.436,chnl:15,x:177,y:347,page:0},{id:67,width:37,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:28.056,chnl:15,x:210,y:347,page:0},{id:88,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.258000000000003,chnl:15,x:249,y:347,page:0},{id:68,width:40,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:31.941000000000003,chnl:15,x:288,y:347,page:0},{id:70,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:23.751,chnl:15,x:330,y:347,page:0},{id:34,width:23,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:15.561000000000002,chnl:15,x:364,y:347,page:0},{id:72,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:389,y:347,page:0},{id:73,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.760000000000002,chnl:15,x:429,y:347,page:0},{id:74,width:24,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:17.745,chnl:15,x:449,y:347,page:0},{id:75,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.825000000000003,chnl:15,x:24,y:297,page:0},{id:76,width:31,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:21.567,chnl:15,x:475,y:347,page:0},{id:66,width:35,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.153000000000002,chnl:15,x:64,y:297,page:0},{id:78,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:101,y:297,page:0},{id:33,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.298,chnl:15,x:141,y:297,page:0},{id:80,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.221,chnl:15,x:161,y:297,page:0},{id:65,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:197,y:297,page:0},{id:82,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.313000000000002,chnl:15,x:237,y:297,page:0},{id:35,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:275,y:297,page:0},{id:84,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.801000000000002,chnl:15,x:310,y:297,page:0},{id:85,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:30.891000000000002,chnl:15,x:346,y:297,page:0},{id:86,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:385,y:297,page:0},{id:39,width:16,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:8.568000000000001,chnl:15,x:425,y:297,page:0},{id:69,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.255000000000003,chnl:15,x:443,y:297,page:0},{id:89,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.208000000000002,chnl:15,x:23,y:247,page:0},{id:90,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.284000000000002,chnl:15,x:477,y:297,page:0},{id:49,width:31,height:40,xoffset:0,yoffset:-30.156000000000002,xadvance:24.360000000000003,chnl:15,x:61,y:247,page:0},{id:50,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:94,y:247,page:0},{id:57,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:128,y:247,page:0},{id:94,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:162,y:247,page:0},{id:96,width:21,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:16.8,chnl:15,x:196,y:247,page:0},{id:55,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:219,y:247,page:0},{id:54,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:254,y:247,page:0},{id:53,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:289,y:247,page:0},{id:52,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:323,y:247,page:0},{id:103,width:31,height:39,xoffset:0,yoffset:-21.630000000000003,xadvance:21.84,chnl:15,x:358,y:247,page:0},{id:112,width:32,height:39,xoffset:0,yoffset:-21.651,xadvance:23.541,chnl:15,x:391,y:247,page:0},{id:113,width:31,height:39,xoffset:0,yoffset:-21.651,xadvance:23.520000000000003,chnl:15,x:425,y:247,page:0},{id:116,width:25,height:39,xoffset:0,yoffset:-28.182000000000002,xadvance:15.057,chnl:15,x:458,y:247,page:0},{id:121,width:31,height:38,xoffset:0,yoffset:-21.273,xadvance:21.651,chnl:15,x:34,y:196,page:0},{id:59,width:18,height:36,xoffset:0,yoffset:-20.706,xadvance:10.983,chnl:15,x:485,y:247,page:0},{id:43,width:32,height:34,xoffset:0,yoffset:-24.486,xadvance:24.360000000000003,chnl:15,x:67,y:196,page:0},{id:60,width:30,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:101,y:196,page:0},{id:62,width:31,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:133,y:196,page:0},{id:117,width:30,height:32,xoffset:0,yoffset:-21.273,xadvance:23.415000000000003,chnl:15,x:166,y:196,page:0},{id:99,width:29,height:32,xoffset:0,yoffset:-21.609,xadvance:20.055,chnl:15,x:198,y:196,page:0},{id:110,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:23.436,chnl:15,x:229,y:196,page:0},{id:111,width:32,height:32,xoffset:0,yoffset:-21.609,xadvance:23.814,chnl:15,x:262,y:196,page:0},{id:126,width:32,height:26,xoffset:0,yoffset:-16.128,xadvance:24.360000000000003,chnl:15,x:201,y:447,page:0},{id:101,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:22.176000000000002,chnl:15,x:296,y:196,page:0},{id:114,width:25,height:32,xoffset:0,yoffset:-21.651,xadvance:15.288,chnl:15,x:329,y:196,page:0},{id:115,width:27,height:32,xoffset:0,yoffset:-21.609,xadvance:18.186,chnl:15,x:356,y:196,page:0},{id:97,width:28,height:32,xoffset:0,yoffset:-21.651,xadvance:20.874000000000002,chnl:15,x:385,y:196,page:0},{id:118,width:31,height:31,xoffset:0,yoffset:-21.273,xadvance:21.672,chnl:15,x:415,y:196,page:0},{id:61,width:31,height:29,xoffset:0,yoffset:-19.089000000000002,xadvance:24.360000000000003,chnl:15,x:448,y:196,page:0},{id:120,width:30,height:31,xoffset:0,yoffset:-21.273,xadvance:20.916,chnl:15,x:21,y:145,page:0},{id:58,width:18,height:31,xoffset:0,yoffset:-20.706,xadvance:10.5,chnl:15,x:53,y:145,page:0},{id:122,width:28,height:31,xoffset:0,yoffset:-21.273,xadvance:18.984,chnl:15,x:73,y:145,page:0},{id:95,width:28,height:16,xoffset:0,yoffset:0,xadvance:19.278000000000002,chnl:15,x:235,y:447,page:0},{id:45,width:23,height:24,xoffset:0,yoffset:-14.175,xadvance:15.603000000000002,chnl:15,x:481,y:196,page:0},{id:44,width:17,height:21,xoffset:0,yoffset:-4.956,xadvance:9.534,chnl:15,x:103,y:145,page:0},{id:46,width:18,height:15,xoffset:0,yoffset:-4.956,xadvance:9.912,chnl:15,x:0,y:497,page:0},{id:32,width:0,height:0,xoffset:0,yoffset:0,xadvance:10.752,chnl:15,x:20,y:497,page:0}],rbe={face:"Lato Regular",size:42,bold:0,italic:0,charset:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},obe={lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},abe=[],fZ={pages:nbe,chars:sbe,info:rbe,common:obe,kernings:abe};class lbe extends En{get behavior(){return nd}constructor(e){super();const t=FN(fZ),n=Ai(e.field),s=e.as,r=e.fontSize;this.handle=o=>{const a=n(o);a!==void 0?o[s]=t.measureWidth(a,r):o[s]=0,this._propagate(o)}}}const hbe=65536;class cbe extends En{get behavior(){return nd}constructor(e){super(),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,t=e.as||"lane",n=Mr(e.spacing)?e.spacing:1,s=Ai(e.start),r=Ai(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(hbe),a=Ai(e.preference),l=e.preferredOrder;let h=1/0;this.handle=c=>{const u=s(c);u<h&&o.fill(-1/0),h=u;const d=l.indexOf(a(c));let f=-1;if(d>=0&&o[d]<u)f=d;else{const g=s(c);for(f=0;f<o.length&&!(o[f]<g);f++);if(f>=o.length)throw new Error("Out of lanes!")}o[f]=r(c)+n,c[t]=f,this._propagate(c)}}else{const o=new jx,a=new jx;let l=-1/0,h=0;this.handle=c=>{const u=s(c);for(;o.length&&(o.peekValue()<=u||u<l);){const f=o.pop();a.push(f,f)}l=u;let d=a.pop();d===void 0&&(d=h++),c[t]=d,this._propagate(c),o.push(d,r(c)+n)}}}}class ube extends En{get behavior(){return ih}constructor(e){if(super(),e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(s=>Ai(s)),n=e.as?e.as:t.map(Cae);this.handle=s=>{const r={};for(let o=0;o<t.length;o++)r[n[o]]=t[o](s);this._propagate(r)}}}class dbe extends En{get behavior(){return nd}constructor(e){super();const t=new RegExp(e.regex),n=typeof e.as=="string"?[e.as]:e.as,s=Ai(e.field);this.handle=r=>{const o=s(r);if(hn(o)){const a=o.match(t);if(a){if(a.length-1!=n.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<n.length;l++)r[n[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<n.length;l++)r[n[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(r)}}}class fbe extends En{get behavior(){return ih}constructor(e){super();const t=to(e.columnRegex).map(d=>new RegExp(d)),n=to(e.asValue);if(t.length!=n.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const s=e.skipRegex?new RegExp(e.skipRegex):void 0,r=e.asKey||"sample";let o,a,l;const h=d=>{var f;const g=Object.keys(d),p=new Map;for(const[b,_]of t.entries())for(const w of g){const y=(f=_.exec(w))==null?void 0:f[1];if(y!==void 0){let x=p.get(y);x||(x=[],p.set(y,x)),x[b]=w}}o=[...p.entries()],a=g.filter(b=>!t.some(_=>_.test(b))&&!(s&&s.test(b)));const m=[...a.map(b=>JSON.stringify(b)+": datum["+JSON.stringify(b)+"]"),JSON.stringify(r)+": sampleId",...n.map(b=>JSON.stringify(b)+": null")];l=new Function("datum","sampleId",`return {
`+m.join(`,
`)+`
};`)},c=d=>{o||h(d);for(const[f,g]of o){const p=l(d,f);for(let m=0;m<g.length;m++)p[n[m]]=d[g[m]];this._propagate(p)}},u=d=>{h(d),c(d),this.handle=c};this.handle=u,this.beginBatch=d=>{zK(d)&&(this.handle=u),super.beginBatch(d)}}}class gbe extends En{get behavior(){return nd}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e.as||["y0","y1"],n=e.sort?Pj(e.sort.field,e.sort.order):void 0,s=e.field?Ai(e.field):()=>1,r=e.groupby.map(c=>Ai(c)),o=dle(this.buffer,c=>r.map(u=>u(c)).join()).map(c=>c[1]);let a=c=>!0;if(e.baseField){const c=Ai(e.baseField);a=u=>c(u)!==null}let l,h;switch(e.offset){case"normalize":l=(c,u)=>c/u,h=(c,u)=>Ny(c,u);break;case"center":l=(c,u)=>c-u/2,h=(c,u)=>Ny(c,u);break;case"information":{const c=Math.log2(e.cardinality??4);l=(u,d)=>u/d,h=(u,d)=>{const f=Ny(u,b=>+!a(b)),g=Ny(u,d),p=g-f;let m=0;for(let b=0;b<u.length;b++){const _=u[b];if(a(_)){const w=d(_)/p;m-=w*Math.log2(w)}}return p/(c-(m+0))*(p/g)}}break;default:l=(c,u)=>c,h=(c,u)=>1}for(const c of o){n&&c.sort(n);const u=h(c,s);let d=0;for(const f of c){const g=d+s(f);a(f)&&(f[t[0]]=l(d,u),f[t[1]]=l(g,u),this._propagate(f),d=g)}}super.complete()}}class pbe extends En{get behavior(){return ih}constructor(e){super();const t=Ai(e.field??"sequence"),[n,s]=e.as??["pos","sequence"];this.handle=r=>{const o=Object.assign({},r,{[s]:"",[n]:0}),a=t(r);for(let l=0;l<a.length;l++){const h=Object.assign({},o);h[n]=l,h[s]=a.charAt(l),this._propagate(h)}}}}class mbe extends En{get behavior(){return ih}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params.groupby,t=e.map(s=>Ai(s)),n=Xk(this.buffer,...t);for(const[s,r]of PP(n)){const o={count:r.length};for(let a=0;a<e.length;a++)o[e[a]]=s[a];this._propagate(o)}super.complete()}}const _be="_uniqueId",b7=1e4,v7=[null];class gZ extends En{get behavior(){return nd}constructor(e){super(),this.params=e,this.as=e.as??_be,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%b7==0&&(this._id=this._getBlock()*b7),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=v7.length;return v7[e]=this,this._blocks.push(e),this._usedBlocks++,e}}const bbe={aggregate:mbe,collect:uZ,coverage:j_e,filterScoredLabels:K_e,filter:Z_e,flatten:Y_e,flattenCompressedExons:J_e,flattenDelimited:ebe,flattenSequence:pbe,formula:ibe,identifier:gZ,linearizeGenomicCoordinate:dZ,measureText:lbe,pileup:cbe,project:ube,regexExtract:dbe,regexFold:fbe,sample:HK,stack:gbe};function vbe(i,e){const t=bbe[i.type];if(t)return new t(i,e);throw new Error("Unknown transform: "+i.type)}function pZ(i){if(!_Z(i)&&!w7(i))return;const e={...i.format};if(e.type??(e.type=w7(i)&&wbe(i.url)),e.parse??(e.parse="auto"),!e.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(i));return e}function wbe(i){var e;if(Array.isArray(i)&&(i=i[0]),i)return(e=i.match(/\.(csv|tsv|json)/))==null?void 0:e[1]}const mZ=i=>typeof i!="object"?ybe:Cbe,ybe=i=>({data:i}),Cbe=i=>i;function w7(i){return"url"in i}class qw extends En{get identifier(){}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}}function _Z(i){return"values"in i}class Sbe extends qw{constructor(e,t){var n;if(super(),this.params=e,typeof e.values=="string"&&!((n=e==null?void 0:e.format)!=null&&n.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}loadSynchronously(){const e=this.params.values;let t=[],n=s=>s;if(Array.isArray(e))e.length>0&&(t=e,n=mZ(e[0]));else if(typeof e=="object")t=[e];else if(typeof e=="string")t=_q(e,pZ(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of t)this._propagate(n(s));this.complete()}async load(){this.loadSynchronously()}}function xbe(i){return"url"in i}class Dbe extends qw{constructor(e,t){super(),this.params=e,this.baseUrl=t==null?void 0:t.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}async load(){const e=this.params.url,t=Array.isArray(e)?e:[e],n=async r=>tL({baseURL:this.baseUrl}).load(r).catch(o=>{throw new Error(`Cannot fetch: ${this.baseUrl}${r}: ${o.message}`)}),s=(r,o)=>{try{const a=_q(r,pZ(this.params));this.beginBatch({type:"file",url:o});for(const l of a)this._propagate(l)}catch(a){throw new Error(`Cannot parse: ${o}: ${a.message}`)}};this.reset(),await Promise.all(t.map(r=>n(r).then(s))),this.complete()}}function kbe(i){return"sequence"in i}class Lbe extends qw{constructor(e,t){if(super(),this.sequence=e.sequence,!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}loadSynchronously(){const e=this.sequence.as||"data",t=this.sequence.step||1,n=this.sequence.stop;this.reset(),this.beginBatch({type:"file"});for(let s=this.sequence.start;s<n;s+=t)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}function Ebe(i,e,t){return t=(t-i)/(e-i),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}class gg extends qw{constructor(e,t){if(super(),this.view=e,t){if(t!=="x"&&t!=="y")throw new Error(`Invalid channel specified for the dynamic data source: ${t}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the dynamic data source. Must be either "x" or "y".');if(this.channel=t,this.scaleResolution=this.view.getScaleResolution(t),!this.scaleResolution){const s=[`The dynamic data source cannot find a resolved scale for channel "${t}".`];throw this.view instanceof rr||s.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(s.join(" "))}const n=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",n),this.view.context.addBroadcastListener("layoutComputed",n)}getAxisLength(){const e=this.scaleResolution.members.map(t=>{var n;return(n=t.view.coords)==null?void 0:n[this.channel==="x"?"width":"height"]}).filter(t=>t>0);return e.length?e.reduce((t,n)=>Math.min(t,n),1e4):0}get genome(){return this.scaleResolution.getGenome()}async onDomainChanged(e,t){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this.reset(),this.beginBatch({type:"file"});for(const t of e)this._propagate(t);this.complete(),YN(this.view),this.requestRender()}}class Abe extends gg{constructor(e,t){const n={axis:{},...e};super(t,n.channel),Yo(this,"ticks",[]),this.params=e}async onDomainChanged(){const e=this.scaleResolution.getScale(),t=this.params.axis,n=this.getAxisLength(),s=l=>25+60*Ebe(100,700,l),r=Mr(t.tickCount)?t.tickCount:Math.round(n/s(n)),o=ZK(e,r,t.tickMinStep),a=t.values?YK(e,t.values,o):a_e(e,o);if(!Nx(a,this.ticks)){this.ticks=a;const l=h_e(e,r,t.format);this.publishData(a.map(h=>({value:h,label:l(h)})))}}}class Ibe extends gg{constructor(e,t){super(t,e.channel)}async load(){this.publishData(this.genome.chromosomes)}}var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function pg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Tbe(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var r=Function.bind.apply(e,s);return new r}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var ps={},IL={};IL.byteLength=Rbe;IL.toByteArray=Pbe;IL.fromByteArray=Vbe;var yl=[],yo=[],Nbe=typeof Uint8Array<"u"?Uint8Array:Array,qE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Jg=0,Mbe=qE.length;Jg<Mbe;++Jg)yl[Jg]=qE[Jg],yo[qE.charCodeAt(Jg)]=Jg;yo["-".charCodeAt(0)]=62;yo["_".charCodeAt(0)]=63;function bZ(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Rbe(i){var e=bZ(i),t=e[0],n=e[1];return(t+n)*3/4-n}function Obe(i,e,t){return(e+t)*3/4-t}function Pbe(i){var e,t=bZ(i),n=t[0],s=t[1],r=new Nbe(Obe(i,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=yo[i.charCodeAt(l)]<<18|yo[i.charCodeAt(l+1)]<<12|yo[i.charCodeAt(l+2)]<<6|yo[i.charCodeAt(l+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=yo[i.charCodeAt(l)]<<2|yo[i.charCodeAt(l+1)]>>4,r[o++]=e&255),s===1&&(e=yo[i.charCodeAt(l)]<<10|yo[i.charCodeAt(l+1)]<<4|yo[i.charCodeAt(l+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function Fbe(i){return yl[i>>18&63]+yl[i>>12&63]+yl[i>>6&63]+yl[i&63]}function Bbe(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(Fbe(n));return s.join("")}function Vbe(i){for(var e,t=i.length,n=t%3,s=[],r=16383,o=0,a=t-n;o<a;o+=r)s.push(Bbe(i,o,o+r>a?a:o+r));return n===1?(e=i[t-1],s.push(yl[e>>2]+yl[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(yl[e>>10]+yl[e>>4&63]+yl[e<<2&63]+"=")),s.join("")}var FP={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */FP.read=function(i,e,t,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=t?s-1:0,d=t?-1:1,f=i[e+u];for(u+=d,r=f&(1<<-c)-1,f>>=-c,c+=a;c>0;r=r*256+i[e+u],u+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=n;c>0;o=o*256+i[e+u],u+=d,c-=8);if(r===0)r=1-h;else{if(r===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-h}return(f?-1:1)*o*Math.pow(2,r-n)};FP.write=function(i,e,t,n,s,r){var o,a,l,h=r*8-s-1,c=(1<<h)-1,u=c>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=d/l:e+=d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,s),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;i[t+f]=a&255,f+=g,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;i[t+f]=o&255,f+=g,o/=256,h-=8);i[t+f-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=IL,t=FP,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=_,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const C=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(C,A),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const A=new Uint8Array(C);return Object.setPrototypeOf(A,a.prototype),A}function a(C,A,N){if(typeof C=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(C)}return l(C,A,N)}a.poolSize=8192;function l(C,A,N){if(typeof C=="string")return d(C,A);if(ArrayBuffer.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(Vi(C,ArrayBuffer)||C&&Vi(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vi(C,SharedArrayBuffer)||C&&Vi(C.buffer,SharedArrayBuffer)))return p(C,A,N);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=C.valueOf&&C.valueOf();if(q!=null&&q!==C)return a.from(q,A,N);const X=m(C);if(X)return X;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),A,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,A,N){return l(C,A,N)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function c(C,A,N){return h(C),C<=0?o(C):A!==void 0?typeof N=="string"?o(C).fill(A,N):o(C).fill(A):o(C)}a.alloc=function(C,A,N){return c(C,A,N)};function u(C){return h(C),o(C<0?0:b(C)|0)}a.allocUnsafe=function(C){return u(C)},a.allocUnsafeSlow=function(C){return u(C)};function d(C,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const N=w(C,A)|0;let q=o(N);const X=q.write(C,A);return X!==N&&(q=q.slice(0,X)),q}function f(C){const A=C.length<0?0:b(C.length)|0,N=o(A);for(let q=0;q<A;q+=1)N[q]=C[q]&255;return N}function g(C){if(Vi(C,Uint8Array)){const A=new Uint8Array(C);return p(A.buffer,A.byteOffset,A.byteLength)}return f(C)}function p(C,A,N){if(A<0||C.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<A+(N||0))throw new RangeError('"length" is outside of buffer bounds');let q;return A===void 0&&N===void 0?q=new Uint8Array(C):N===void 0?q=new Uint8Array(C,A):q=new Uint8Array(C,A,N),Object.setPrototypeOf(q,a.prototype),q}function m(C){if(a.isBuffer(C)){const A=b(C.length)|0,N=o(A);return N.length===0||C.copy(N,0,0,A),N}if(C.length!==void 0)return typeof C.length!="number"||Fn(C.length)?o(0):f(C);if(C.type==="Buffer"&&Array.isArray(C.data))return f(C.data)}function b(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function _(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,A){if(Vi(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),Vi(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(C)||!a.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===A)return 0;let N=C.length,q=A.length;for(let X=0,de=Math.min(N,q);X<de;++X)if(C[X]!==A[X]){N=C[X],q=A[X];break}return N<q?-1:q<N?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,A){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let N;if(A===void 0)for(A=0,N=0;N<C.length;++N)A+=C[N].length;const q=a.allocUnsafe(A);let X=0;for(N=0;N<C.length;++N){let de=C[N];if(Vi(de,Uint8Array))X+de.length>q.length?(a.isBuffer(de)||(de=a.from(de)),de.copy(q,X)):Uint8Array.prototype.set.call(q,de,X);else if(a.isBuffer(de))de.copy(q,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=de.length}return q};function w(C,A){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||Vi(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const N=C.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&N===0)return 0;let X=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return Je(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Ys(C).length;default:if(X)return q?-1:Je(C).length;A=(""+A).toLowerCase(),X=!0}}a.byteLength=w;function y(C,A,N){let q=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,A>>>=0,N<=A))return"";for(C||(C="utf8");;)switch(C){case"hex":return we(this,A,N);case"utf8":case"utf-8":return ie(this,A,N);case"ascii":return ye(this,A,N);case"latin1":case"binary":return Ee(this,A,N);case"base64":return $(this,A,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,A,N);default:if(q)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),q=!0}}a.prototype._isBuffer=!0;function x(C,A,N){const q=C[A];C[A]=C[N],C[N]=q}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<C;A+=2)x(this,A,A+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<C;A+=4)x(this,A,A+3),x(this,A+1,A+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<C;A+=8)x(this,A,A+7),x(this,A+1,A+6),x(this,A+2,A+5),x(this,A+3,A+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?ie(this,0,C):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const A=i.INSPECT_MAX_BYTES;return C=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(C+=" ... "),"<Buffer "+C+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(C,A,N,q,X){if(Vi(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(A===void 0&&(A=0),N===void 0&&(N=C?C.length:0),q===void 0&&(q=0),X===void 0&&(X=this.length),A<0||N>C.length||q<0||X>this.length)throw new RangeError("out of range index");if(q>=X&&A>=N)return 0;if(q>=X)return-1;if(A>=N)return 1;if(A>>>=0,N>>>=0,q>>>=0,X>>>=0,this===C)return 0;let de=X-q,xe=N-A;const Lt=Math.min(de,xe),_i=this.slice(q,X),Wt=C.slice(A,N);for(let zt=0;zt<Lt;++zt)if(_i[zt]!==Wt[zt]){de=_i[zt],xe=Wt[zt];break}return de<xe?-1:xe<de?1:0};function L(C,A,N,q,X){if(C.length===0)return-1;if(typeof N=="string"?(q=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,Fn(N)&&(N=X?0:C.length-1),N<0&&(N=C.length+N),N>=C.length){if(X)return-1;N=C.length-1}else if(N<0)if(X)N=0;else return-1;if(typeof A=="string"&&(A=a.from(A,q)),a.isBuffer(A))return A.length===0?-1:S(C,A,N,q,X);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(C,A,N):Uint8Array.prototype.lastIndexOf.call(C,A,N):S(C,[A],N,q,X);throw new TypeError("val must be string, number or Buffer")}function S(C,A,N,q,X){let de=1,xe=C.length,Lt=A.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(C.length<2||A.length<2)return-1;de=2,xe/=2,Lt/=2,N/=2}function _i(zt,bi){return de===1?zt[bi]:zt.readUInt16BE(bi*de)}let Wt;if(X){let zt=-1;for(Wt=N;Wt<xe;Wt++)if(_i(C,Wt)===_i(A,zt===-1?0:Wt-zt)){if(zt===-1&&(zt=Wt),Wt-zt+1===Lt)return zt*de}else zt!==-1&&(Wt-=Wt-zt),zt=-1}else for(N+Lt>xe&&(N=xe-Lt),Wt=N;Wt>=0;Wt--){let zt=!0;for(let bi=0;bi<Lt;bi++)if(_i(C,Wt+bi)!==_i(A,bi)){zt=!1;break}if(zt)return Wt}return-1}a.prototype.includes=function(C,A,N){return this.indexOf(C,A,N)!==-1},a.prototype.indexOf=function(C,A,N){return L(this,C,A,N,!0)},a.prototype.lastIndexOf=function(C,A,N){return L(this,C,A,N,!1)};function k(C,A,N,q){N=Number(N)||0;const X=C.length-N;q?(q=Number(q),q>X&&(q=X)):q=X;const de=A.length;q>de/2&&(q=de/2);let xe;for(xe=0;xe<q;++xe){const Lt=parseInt(A.substr(xe*2,2),16);if(Fn(Lt))return xe;C[N+xe]=Lt}return xe}function D(C,A,N,q){return xs(Je(A,C.length-N),C,N,q)}function T(C,A,N,q){return xs(on(A),C,N,q)}function M(C,A,N,q){return xs(Ys(A),C,N,q)}function j(C,A,N,q){return xs(po(A,C.length-N),C,N,q)}a.prototype.write=function(C,A,N,q){if(A===void 0)q="utf8",N=this.length,A=0;else if(N===void 0&&typeof A=="string")q=A,N=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(N)?(N=N>>>0,q===void 0&&(q="utf8")):(q=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-A;if((N===void 0||N>X)&&(N=X),C.length>0&&(N<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let de=!1;for(;;)switch(q){case"hex":return k(this,C,A,N);case"utf8":case"utf-8":return D(this,C,A,N);case"ascii":case"latin1":case"binary":return T(this,C,A,N);case"base64":return M(this,C,A,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,C,A,N);default:if(de)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),de=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(C,A,N){return A===0&&N===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(A,N))}function ie(C,A,N){N=Math.min(C.length,N);const q=[];let X=A;for(;X<N;){const de=C[X];let xe=null,Lt=de>239?4:de>223?3:de>191?2:1;if(X+Lt<=N){let _i,Wt,zt,bi;switch(Lt){case 1:de<128&&(xe=de);break;case 2:_i=C[X+1],(_i&192)===128&&(bi=(de&31)<<6|_i&63,bi>127&&(xe=bi));break;case 3:_i=C[X+1],Wt=C[X+2],(_i&192)===128&&(Wt&192)===128&&(bi=(de&15)<<12|(_i&63)<<6|Wt&63,bi>2047&&(bi<55296||bi>57343)&&(xe=bi));break;case 4:_i=C[X+1],Wt=C[X+2],zt=C[X+3],(_i&192)===128&&(Wt&192)===128&&(zt&192)===128&&(bi=(de&15)<<18|(_i&63)<<12|(Wt&63)<<6|zt&63,bi>65535&&bi<1114112&&(xe=bi))}}xe===null?(xe=65533,Lt=1):xe>65535&&(xe-=65536,q.push(xe>>>10&1023|55296),xe=56320|xe&1023),q.push(xe),X+=Lt}return be(q)}const pe=4096;function be(C){const A=C.length;if(A<=pe)return String.fromCharCode.apply(String,C);let N="",q=0;for(;q<A;)N+=String.fromCharCode.apply(String,C.slice(q,q+=pe));return N}function ye(C,A,N){let q="";N=Math.min(C.length,N);for(let X=A;X<N;++X)q+=String.fromCharCode(C[X]&127);return q}function Ee(C,A,N){let q="";N=Math.min(C.length,N);for(let X=A;X<N;++X)q+=String.fromCharCode(C[X]);return q}function we(C,A,N){const q=C.length;(!A||A<0)&&(A=0),(!N||N<0||N>q)&&(N=q);let X="";for(let de=A;de<N;++de)X+=Ds[C[de]];return X}function Dt(C,A,N){const q=C.slice(A,N);let X="";for(let de=0;de<q.length-1;de+=2)X+=String.fromCharCode(q[de]+q[de+1]*256);return X}a.prototype.slice=function(C,A){const N=this.length;C=~~C,A=A===void 0?N:~~A,C<0?(C+=N,C<0&&(C=0)):C>N&&(C=N),A<0?(A+=N,A<0&&(A=0)):A>N&&(A=N),A<C&&(A=C);const q=this.subarray(C,A);return Object.setPrototypeOf(q,a.prototype),q};function $e(C,A,N){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+A>N)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,A,N){C=C>>>0,A=A>>>0,N||$e(C,A,this.length);let q=this[C],X=1,de=0;for(;++de<A&&(X*=256);)q+=this[C+de]*X;return q},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,A,N){C=C>>>0,A=A>>>0,N||$e(C,A,this.length);let q=this[C+--A],X=1;for(;A>0&&(X*=256);)q+=this[C+--A]*X;return q},a.prototype.readUint8=a.prototype.readUInt8=function(C,A){return C=C>>>0,A||$e(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,A){return C=C>>>0,A||$e(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,A){return C=C>>>0,A||$e(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=In(function(C){C=C>>>0,he(C,"offset");const A=this[C],N=this[C+7];(A===void 0||N===void 0)&&ce(C,this.length-8);const q=A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,X=this[++C]+this[++C]*2**8+this[++C]*2**16+N*2**24;return BigInt(q)+(BigInt(X)<<BigInt(32))}),a.prototype.readBigUInt64BE=In(function(C){C=C>>>0,he(C,"offset");const A=this[C],N=this[C+7];(A===void 0||N===void 0)&&ce(C,this.length-8);const q=A*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],X=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+N;return(BigInt(q)<<BigInt(32))+BigInt(X)}),a.prototype.readIntLE=function(C,A,N){C=C>>>0,A=A>>>0,N||$e(C,A,this.length);let q=this[C],X=1,de=0;for(;++de<A&&(X*=256);)q+=this[C+de]*X;return X*=128,q>=X&&(q-=Math.pow(2,8*A)),q},a.prototype.readIntBE=function(C,A,N){C=C>>>0,A=A>>>0,N||$e(C,A,this.length);let q=A,X=1,de=this[C+--q];for(;q>0&&(X*=256);)de+=this[C+--q]*X;return X*=128,de>=X&&(de-=Math.pow(2,8*A)),de},a.prototype.readInt8=function(C,A){return C=C>>>0,A||$e(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,A){C=C>>>0,A||$e(C,2,this.length);const N=this[C]|this[C+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(C,A){C=C>>>0,A||$e(C,2,this.length);const N=this[C+1]|this[C]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=In(function(C){C=C>>>0,he(C,"offset");const A=this[C],N=this[C+7];(A===void 0||N===void 0)&&ce(C,this.length-8);const q=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(N<<24);return(BigInt(q)<<BigInt(32))+BigInt(A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=In(function(C){C=C>>>0,he(C,"offset");const A=this[C],N=this[C+7];(A===void 0||N===void 0)&&ce(C,this.length-8);const q=(A<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(q)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+N)}),a.prototype.readFloatLE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),t.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,A){return C=C>>>0,A||$e(C,4,this.length),t.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,A){return C=C>>>0,A||$e(C,8,this.length),t.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,A){return C=C>>>0,A||$e(C,8,this.length),t.read(this,C,!1,52,8)};function Qe(C,A,N,q,X,de){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>X||A<de)throw new RangeError('"value" argument is out of bounds');if(N+q>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,A,N,q){if(C=+C,A=A>>>0,N=N>>>0,!q){const xe=Math.pow(2,8*N)-1;Qe(this,C,A,N,xe,0)}let X=1,de=0;for(this[A]=C&255;++de<N&&(X*=256);)this[A+de]=C/X&255;return A+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,A,N,q){if(C=+C,A=A>>>0,N=N>>>0,!q){const xe=Math.pow(2,8*N)-1;Qe(this,C,A,N,xe,0)}let X=N-1,de=1;for(this[A+X]=C&255;--X>=0&&(de*=256);)this[A+X]=C/de&255;return A+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,1,255,0),this[A]=C&255,A+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,2,65535,0),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,2,65535,0),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,4,4294967295,0),this[A+3]=C>>>24,this[A+2]=C>>>16,this[A+1]=C>>>8,this[A]=C&255,A+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,4,4294967295,0),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4};function pt(C,A,N,q,X){E(A,q,X,C,N,7);let de=Number(A&BigInt(4294967295));C[N++]=de,de=de>>8,C[N++]=de,de=de>>8,C[N++]=de,de=de>>8,C[N++]=de;let xe=Number(A>>BigInt(32)&BigInt(4294967295));return C[N++]=xe,xe=xe>>8,C[N++]=xe,xe=xe>>8,C[N++]=xe,xe=xe>>8,C[N++]=xe,N}function lt(C,A,N,q,X){E(A,q,X,C,N,7);let de=Number(A&BigInt(4294967295));C[N+7]=de,de=de>>8,C[N+6]=de,de=de>>8,C[N+5]=de,de=de>>8,C[N+4]=de;let xe=Number(A>>BigInt(32)&BigInt(4294967295));return C[N+3]=xe,xe=xe>>8,C[N+2]=xe,xe=xe>>8,C[N+1]=xe,xe=xe>>8,C[N]=xe,N+8}a.prototype.writeBigUInt64LE=In(function(C,A=0){return pt(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=In(function(C,A=0){return lt(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,A,N,q){if(C=+C,A=A>>>0,!q){const Lt=Math.pow(2,8*N-1);Qe(this,C,A,N,Lt-1,-Lt)}let X=0,de=1,xe=0;for(this[A]=C&255;++X<N&&(de*=256);)C<0&&xe===0&&this[A+X-1]!==0&&(xe=1),this[A+X]=(C/de>>0)-xe&255;return A+N},a.prototype.writeIntBE=function(C,A,N,q){if(C=+C,A=A>>>0,!q){const Lt=Math.pow(2,8*N-1);Qe(this,C,A,N,Lt-1,-Lt)}let X=N-1,de=1,xe=0;for(this[A+X]=C&255;--X>=0&&(de*=256);)C<0&&xe===0&&this[A+X+1]!==0&&(xe=1),this[A+X]=(C/de>>0)-xe&255;return A+N},a.prototype.writeInt8=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,1,127,-128),C<0&&(C=255+C+1),this[A]=C&255,A+1},a.prototype.writeInt16LE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,2,32767,-32768),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeInt16BE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,2,32767,-32768),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeInt32LE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,4,2147483647,-2147483648),this[A]=C&255,this[A+1]=C>>>8,this[A+2]=C>>>16,this[A+3]=C>>>24,A+4},a.prototype.writeInt32BE=function(C,A,N){return C=+C,A=A>>>0,N||Qe(this,C,A,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4},a.prototype.writeBigInt64LE=In(function(C,A=0){return pt(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=In(function(C,A=0){return lt(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mi(C,A,N,q,X,de){if(N+q>C.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function te(C,A,N,q,X){return A=+A,N=N>>>0,X||mi(C,A,N,4),t.write(C,A,N,q,23,4),N+4}a.prototype.writeFloatLE=function(C,A,N){return te(this,C,A,!0,N)},a.prototype.writeFloatBE=function(C,A,N){return te(this,C,A,!1,N)};function se(C,A,N,q,X){return A=+A,N=N>>>0,X||mi(C,A,N,8),t.write(C,A,N,q,52,8),N+8}a.prototype.writeDoubleLE=function(C,A,N){return se(this,C,A,!0,N)},a.prototype.writeDoubleBE=function(C,A,N){return se(this,C,A,!1,N)},a.prototype.copy=function(C,A,N,q){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(N||(N=0),!q&&q!==0&&(q=this.length),A>=C.length&&(A=C.length),A||(A=0),q>0&&q<N&&(q=N),q===N||C.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),C.length-A<q-N&&(q=C.length-A+N);const X=q-N;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,N,q):Uint8Array.prototype.set.call(C,this.subarray(N,q),A),X},a.prototype.fill=function(C,A,N,q){if(typeof C=="string"){if(typeof A=="string"?(q=A,A=0,N=this.length):typeof N=="string"&&(q=N,N=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!a.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(C.length===1){const de=C.charCodeAt(0);(q==="utf8"&&de<128||q==="latin1")&&(C=de)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(A<0||this.length<A||this.length<N)throw new RangeError("Out of range index");if(N<=A)return this;A=A>>>0,N=N===void 0?this.length:N>>>0,C||(C=0);let X;if(typeof C=="number")for(X=A;X<N;++X)this[X]=C;else{const de=a.isBuffer(C)?C:a.from(C,q),xe=de.length;if(xe===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(X=0;X<N-A;++X)this[X+A]=de[X%xe]}return this};const me={};function G(C,A,N){me[C]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(C,A){return`The "${C}" argument must be of type number. Received type ${typeof A}`},TypeError),G("ERR_OUT_OF_RANGE",function(C,A,N){let q=`The value of "${C}" is out of range.`,X=N;return Number.isInteger(N)&&Math.abs(N)>2**32?X=fe(String(N)):typeof N=="bigint"&&(X=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(X=fe(X)),X+="n"),q+=` It must be ${A}. Received ${X}`,q},RangeError);function fe(C){let A="",N=C.length;const q=C[0]==="-"?1:0;for(;N>=q+4;N-=3)A=`_${C.slice(N-3,N)}${A}`;return`${C.slice(0,N)}${A}`}function R(C,A,N){he(A,"offset"),(C[A]===void 0||C[A+N]===void 0)&&ce(A,C.length-(N+1))}function E(C,A,N,q,X,de){if(C>N||C<A){const xe=typeof A=="bigint"?"n":"";let Lt;throw de>3?A===0||A===BigInt(0)?Lt=`>= 0${xe} and < 2${xe} ** ${(de+1)*8}${xe}`:Lt=`>= -(2${xe} ** ${(de+1)*8-1}${xe}) and < 2 ** ${(de+1)*8-1}${xe}`:Lt=`>= ${A}${xe} and <= ${N}${xe}`,new me.ERR_OUT_OF_RANGE("value",Lt,C)}R(q,X,de)}function he(C,A){if(typeof C!="number")throw new me.ERR_INVALID_ARG_TYPE(A,"number",C)}function ce(C,A,N){throw Math.floor(C)!==C?(he(C,N),new me.ERR_OUT_OF_RANGE(N||"offset","an integer",C)):A<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${A}`,C)}const je=/[^+/0-9A-Za-z-_]/g;function Me(C){if(C=C.split("=")[0],C=C.trim().replace(je,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Je(C,A){A=A||1/0;let N;const q=C.length;let X=null;const de=[];for(let xe=0;xe<q;++xe){if(N=C.charCodeAt(xe),N>55295&&N<57344){if(!X){if(N>56319){(A-=3)>-1&&de.push(239,191,189);continue}else if(xe+1===q){(A-=3)>-1&&de.push(239,191,189);continue}X=N;continue}if(N<56320){(A-=3)>-1&&de.push(239,191,189),X=N;continue}N=(X-55296<<10|N-56320)+65536}else X&&(A-=3)>-1&&de.push(239,191,189);if(X=null,N<128){if((A-=1)<0)break;de.push(N)}else if(N<2048){if((A-=2)<0)break;de.push(N>>6|192,N&63|128)}else if(N<65536){if((A-=3)<0)break;de.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((A-=4)<0)break;de.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return de}function on(C){const A=[];for(let N=0;N<C.length;++N)A.push(C.charCodeAt(N)&255);return A}function po(C,A){let N,q,X;const de=[];for(let xe=0;xe<C.length&&!((A-=2)<0);++xe)N=C.charCodeAt(xe),q=N>>8,X=N%256,de.push(X),de.push(q);return de}function Ys(C){return e.toByteArray(Me(C))}function xs(C,A,N,q){let X;for(X=0;X<q&&!(X+N>=A.length||X>=C.length);++X)A[X+N]=C[X];return X}function Vi(C,A){return C instanceof A||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===A.name}function Fn(C){return C!==C}const Ds=function(){const C="0123456789abcdef",A=new Array(256);for(let N=0;N<16;++N){const q=N*16;for(let X=0;X<16;++X)A[q+X]=C[N]+C[X]}return A}();function In(C){return typeof BigInt>"u"?ks:C}function ks(){throw new Error("BigInt not supported")}})(ps);const Qr={},Wbe=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"})),GE=typeof window<"u"?window:typeof self<"u"?self:{fetch:void 0};class Al{async getBufferFromResponse(e){if(typeof e.buffer=="function")return e.buffer();if(typeof e.arrayBuffer=="function"){const t=await e.arrayBuffer();return ps.Buffer.from(t)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(e,t={}){this.baseOverrides={},this.url=e;const n=t.fetch||GE.fetch&&GE.fetch.bind(GE);if(!n)throw new TypeError("no fetch function supplied, and none found in globalThis environment");t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=n}async fetch(e,t){let n;try{n=await this.fetchImplementation(e,t)}catch(s){if(`${s}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(e,{...t,cache:"reload"});else throw s}return n}async read(e,t=0,n,s=0,r={}){const{headers:o={},signal:a,overrides:l={}}=r;n<1/0?o.range=`bytes=${s}-${s+n}`:n===1/0&&s!==0&&(o.range=`bytes=${s}-`);const h={...this.baseOverrides,...l,headers:{...o,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:a},c=await this.fetch(this.url,h);if(!c.ok)throw new Error(`HTTP ${c.status} ${c.statusText} ${this.url}`);if(c.status===200&&s===0||c.status===206){const u=await this.getBufferFromResponse(c),d=u.copy(e,t,0,Math.min(n,u.length)),f=c.headers.get("content-range"),g=/\/(\d+)$/.exec(f||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:d,buffer:e}}throw c.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${c.status} fetching ${this.url}`)}async readFile(e={}){let t,n;typeof e=="string"?(t=e,n={}):(t=e.encoding,n=e,delete n.encoding);const{headers:s={},signal:r,overrides:o={}}=n,a={headers:s,method:"GET",redirect:"follow",mode:"cors",signal:r,...this.baseOverrides,...o},l=await this.fetch(this.url,a);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(t==="utf8")return l.text();if(t)throw new Error(`unsupported encoding: ${t}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){const e=ps.Buffer.allocUnsafe(10);if(await this.read(e,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}var mc={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(r,o){return Object.prototype.hasOwnProperty.call(r,o)}i.assign=function(r){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)t(a,l)&&(r[l]=a[l])}}return r},i.shrinkBuf=function(r,o){return r.length===o?r:r.subarray?r.subarray(0,o):(r.length=o,r)};var n={arraySet:function(r,o,a,l,h){if(o.subarray&&r.subarray){r.set(o.subarray(a,a+l),h);return}for(var c=0;c<l;c++)r[h+c]=o[a+c]},flattenChunks:function(r){var o,a,l,h,c,u;for(l=0,o=0,a=r.length;o<a;o++)l+=r[o].length;for(u=new Uint8Array(l),h=0,o=0,a=r.length;o<a;o++)c=r[o],u.set(c,h),h+=c.length;return u}},s={arraySet:function(r,o,a,l,h){for(var c=0;c<l;c++)r[h+c]=o[a+c]},flattenChunks:function(r){return[].concat.apply([],r)}};i.setTyped=function(r){r?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(e)})(mc);var Gw={},nh={},H0={},zbe=mc,Hbe=4,y7=0,C7=1,Ube=2;function U0(i){for(var e=i.length;--e>=0;)i[e]=0}var $be=0,vZ=1,jbe=2,qbe=3,Gbe=258,BP=29,Kw=256,Xv=Kw+1+BP,em=30,VP=19,wZ=2*Xv+1,$d=15,KE=16,Kbe=7,WP=256,yZ=16,CZ=17,SZ=18,QN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Zbe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],xZ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ybe=512,Th=new Array((Xv+2)*2);U0(Th);var Rb=new Array(em*2);U0(Rb);var Jv=new Array(Ybe);U0(Jv);var e1=new Array(Gbe-qbe+1);U0(e1);var zP=new Array(BP);U0(zP);var qx=new Array(em);U0(qx);function ZE(i,e,t,n,s){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=i&&i.length}var DZ,kZ,LZ;function YE(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function EZ(i){return i<256?Jv[i]:Jv[256+(i>>>7)]}function t1(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function Dr(i,e,t){i.bi_valid>KE-t?(i.bi_buf|=e<<i.bi_valid&65535,t1(i,i.bi_buf),i.bi_buf=e>>KE-i.bi_valid,i.bi_valid+=t-KE):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function Cl(i,e,t){Dr(i,t[e*2],t[e*2+1])}function AZ(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function Qbe(i){i.bi_valid===16?(t1(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function Xbe(i,e){var t=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,h,c,u,d,f,g,p=0;for(d=0;d<=$d;d++)i.bl_count[d]=0;for(t[i.heap[i.heap_max]*2+1]=0,h=i.heap_max+1;h<wZ;h++)c=i.heap[h],d=t[t[c*2+1]*2+1]+1,d>l&&(d=l,p++),t[c*2+1]=d,!(c>n)&&(i.bl_count[d]++,f=0,c>=a&&(f=o[c-a]),g=t[c*2],i.opt_len+=g*(d+f),r&&(i.static_len+=g*(s[c*2+1]+f)));if(p!==0){do{for(d=l-1;i.bl_count[d]===0;)d--;i.bl_count[d]--,i.bl_count[d+1]+=2,i.bl_count[l]--,p-=2}while(p>0);for(d=l;d!==0;d--)for(c=i.bl_count[d];c!==0;)u=i.heap[--h],!(u>n)&&(t[u*2+1]!==d&&(i.opt_len+=(d-t[u*2+1])*t[u*2],t[u*2+1]=d),c--)}}function IZ(i,e,t){var n=new Array($d+1),s=0,r,o;for(r=1;r<=$d;r++)n[r]=s=s+t[r-1]<<1;for(o=0;o<=e;o++){var a=i[o*2+1];a!==0&&(i[o*2]=AZ(n[a]++,a))}}function Jbe(){var i,e,t,n,s,r=new Array($d+1);for(t=0,n=0;n<BP-1;n++)for(zP[n]=t,i=0;i<1<<QN[n];i++)e1[t++]=n;for(e1[t-1]=n,s=0,n=0;n<16;n++)for(qx[n]=s,i=0;i<1<<_S[n];i++)Jv[s++]=n;for(s>>=7;n<em;n++)for(qx[n]=s<<7,i=0;i<1<<_S[n]-7;i++)Jv[256+s++]=n;for(e=0;e<=$d;e++)r[e]=0;for(i=0;i<=143;)Th[i*2+1]=8,i++,r[8]++;for(;i<=255;)Th[i*2+1]=9,i++,r[9]++;for(;i<=279;)Th[i*2+1]=7,i++,r[7]++;for(;i<=287;)Th[i*2+1]=8,i++,r[8]++;for(IZ(Th,Xv+1,r),i=0;i<em;i++)Rb[i*2+1]=5,Rb[i*2]=AZ(i,5);DZ=new ZE(Th,QN,Kw+1,Xv,$d),kZ=new ZE(Rb,_S,0,em,$d),LZ=new ZE(new Array(0),Zbe,0,VP,Kbe)}function TZ(i){var e;for(e=0;e<Xv;e++)i.dyn_ltree[e*2]=0;for(e=0;e<em;e++)i.dyn_dtree[e*2]=0;for(e=0;e<VP;e++)i.bl_tree[e*2]=0;i.dyn_ltree[WP*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function NZ(i){i.bi_valid>8?t1(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function eve(i,e,t,n){NZ(i),n&&(t1(i,t),t1(i,~t)),zbe.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function S7(i,e,t,n){var s=e*2,r=t*2;return i[s]<i[r]||i[s]===i[r]&&n[e]<=n[t]}function QE(i,e,t){for(var n=i.heap[t],s=t<<1;s<=i.heap_len&&(s<i.heap_len&&S7(e,i.heap[s+1],i.heap[s],i.depth)&&s++,!S7(e,n,i.heap[s],i.depth));)i.heap[t]=i.heap[s],t=s,s<<=1;i.heap[t]=n}function x7(i,e,t){var n,s,r=0,o,a;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+r*2]<<8|i.pending_buf[i.d_buf+r*2+1],s=i.pending_buf[i.l_buf+r],r++,n===0?Cl(i,s,e):(o=e1[s],Cl(i,o+Kw+1,e),a=QN[o],a!==0&&(s-=zP[o],Dr(i,s,a)),n--,o=EZ(n),Cl(i,o,t),a=_S[o],a!==0&&(n-=qx[o],Dr(i,n,a)));while(r<i.last_lit);Cl(i,WP,e)}function XN(i,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems,o,a,l=-1,h;for(i.heap_len=0,i.heap_max=wZ,o=0;o<r;o++)t[o*2]!==0?(i.heap[++i.heap_len]=l=o,i.depth[o]=0):t[o*2+1]=0;for(;i.heap_len<2;)h=i.heap[++i.heap_len]=l<2?++l:0,t[h*2]=1,i.depth[h]=0,i.opt_len--,s&&(i.static_len-=n[h*2+1]);for(e.max_code=l,o=i.heap_len>>1;o>=1;o--)QE(i,t,o);h=r;do o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],QE(i,t,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,t[h*2]=t[o*2]+t[a*2],i.depth[h]=(i.depth[o]>=i.depth[a]?i.depth[o]:i.depth[a])+1,t[o*2+1]=t[a*2+1]=h,i.heap[1]=h++,QE(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],Xbe(i,e),IZ(t,l,i.bl_count)}function D7(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,h=4;for(o===0&&(l=138,h=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)&&(a<h?i.bl_tree[r*2]+=a:r!==0?(r!==s&&i.bl_tree[r*2]++,i.bl_tree[yZ*2]++):a<=10?i.bl_tree[CZ*2]++:i.bl_tree[SZ*2]++,a=0,s=r,o===0?(l=138,h=3):r===o?(l=6,h=3):(l=7,h=4))}function k7(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,h=4;for(o===0&&(l=138,h=3),n=0;n<=t;n++)if(r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)){if(a<h)do Cl(i,r,i.bl_tree);while(--a!==0);else r!==0?(r!==s&&(Cl(i,r,i.bl_tree),a--),Cl(i,yZ,i.bl_tree),Dr(i,a-3,2)):a<=10?(Cl(i,CZ,i.bl_tree),Dr(i,a-3,3)):(Cl(i,SZ,i.bl_tree),Dr(i,a-11,7));a=0,s=r,o===0?(l=138,h=3):r===o?(l=6,h=3):(l=7,h=4)}}function tve(i){var e;for(D7(i,i.dyn_ltree,i.l_desc.max_code),D7(i,i.dyn_dtree,i.d_desc.max_code),XN(i,i.bl_desc),e=VP-1;e>=3&&i.bl_tree[xZ[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function ive(i,e,t,n){var s;for(Dr(i,e-257,5),Dr(i,t-1,5),Dr(i,n-4,4),s=0;s<n;s++)Dr(i,i.bl_tree[xZ[s]*2+1],3);k7(i,i.dyn_ltree,e-1),k7(i,i.dyn_dtree,t-1)}function nve(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return y7;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return C7;for(t=32;t<Kw;t++)if(i.dyn_ltree[t*2]!==0)return C7;return y7}var L7=!1;function sve(i){L7||(Jbe(),L7=!0),i.l_desc=new YE(i.dyn_ltree,DZ),i.d_desc=new YE(i.dyn_dtree,kZ),i.bl_desc=new YE(i.bl_tree,LZ),i.bi_buf=0,i.bi_valid=0,TZ(i)}function MZ(i,e,t,n){Dr(i,($be<<1)+(n?1:0),3),eve(i,e,t,!0)}function rve(i){Dr(i,vZ<<1,3),Cl(i,WP,Th),Qbe(i)}function ove(i,e,t,n){var s,r,o=0;i.level>0?(i.strm.data_type===Ube&&(i.strm.data_type=nve(i)),XN(i,i.l_desc),XN(i,i.d_desc),o=tve(i),s=i.opt_len+3+7>>>3,r=i.static_len+3+7>>>3,r<=s&&(s=r)):s=r=t+5,t+4<=s&&e!==-1?MZ(i,e,t,n):i.strategy===Hbe||r===s?(Dr(i,(vZ<<1)+(n?1:0),3),x7(i,Th,Rb)):(Dr(i,(jbe<<1)+(n?1:0),3),ive(i,i.l_desc.max_code+1,i.d_desc.max_code+1,o+1),x7(i,i.dyn_ltree,i.dyn_dtree)),TZ(i),n&&NZ(i)}function ave(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(e1[t]+Kw+1)*2]++,i.dyn_dtree[EZ(e)*2]++),i.last_lit===i.lit_bufsize-1}H0._tr_init=sve;H0._tr_stored_block=MZ;H0._tr_flush_block=ove;H0._tr_tally=ave;H0._tr_align=rve;function lve(i,e,t,n){for(var s=i&65535|0,r=i>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0}var RZ=lve;function hve(){for(var i,e=[],t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var cve=hve();function uve(i,e,t,n){var s=cve,r=n+t;i^=-1;for(var o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1}var OZ=uve,HP={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ir=mc,qo=H0,PZ=RZ,Mc=OZ,dve=HP,mg=0,fve=1,gve=3,hu=4,E7=5,Sl=0,A7=1,Fl=-2,pve=-3,XE=-5,mve=-1,_ve=1,$y=2,bve=3,vve=4,wve=0,yve=2,TL=8,Cve=9,Sve=15,xve=8,Dve=29,kve=256,JN=kve+1+Dve,Lve=30,Eve=19,Ave=2*JN+1,Ive=15,Bt=3,tu=258,xa=tu+Bt+1,Tve=32,NL=42,eM=69,bS=73,vS=91,wS=103,jd=113,ob=666,ms=1,Zw=2,Rf=3,$0=4,Nve=3;function iu(i,e){return i.msg=dve[e],e}function I7(i){return(i<<1)-(i>4?9:0)}function qc(i){for(var e=i.length;--e>=0;)i[e]=0}function Rc(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(ir.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function _s(i,e){qo._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,Rc(i.strm)}function Xt(i,e){i.pending_buf[i.pending++]=e}function A_(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function Mve(i,e,t,n){var s=i.avail_in;return s>n&&(s=n),s===0?0:(i.avail_in-=s,ir.arraySet(e,i.input,i.next_in,s,t),i.state.wrap===1?i.adler=PZ(i.adler,e,s,t):i.state.wrap===2&&(i.adler=Mc(i.adler,e,s,t)),i.next_in+=s,i.total_in+=s,s)}function FZ(i,e){var t=i.max_chain_length,n=i.strstart,s,r,o=i.prev_length,a=i.nice_match,l=i.strstart>i.w_size-xa?i.strstart-(i.w_size-xa):0,h=i.window,c=i.w_mask,u=i.prev,d=i.strstart+tu,f=h[n+o-1],g=h[n+o];i.prev_length>=i.good_match&&(t>>=2),a>i.lookahead&&(a=i.lookahead);do if(s=e,!(h[s+o]!==g||h[s+o-1]!==f||h[s]!==h[n]||h[++s]!==h[n+1])){n+=2,s++;do;while(h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&h[++n]===h[++s]&&n<d);if(r=tu-(d-n),n=d-tu,r>o){if(i.match_start=e,o=r,r>=a)break;f=h[n+o-1],g=h[n+o]}}while((e=u[e&c])>l&&--t!==0);return o<=i.lookahead?o:i.lookahead}function Of(i){var e=i.w_size,t,n,s,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-xa)){ir.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,n=i.hash_size,t=n;do s=i.head[--t],i.head[t]=s>=e?s-e:0;while(--n);n=e,t=n;do s=i.prev[--t],i.prev[t]=s>=e?s-e:0;while(--n);r+=e}if(i.strm.avail_in===0)break;if(n=Mve(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=n,i.lookahead+i.insert>=Bt)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+Bt-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<Bt)););}while(i.lookahead<xa&&i.strm.avail_in!==0)}function Rve(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Of(i),i.lookahead===0&&e===mg)return ms;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+t;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,_s(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-xa&&(_s(i,!1),i.strm.avail_out===0))return ms}return i.insert=0,e===hu?(_s(i,!0),i.strm.avail_out===0?Rf:$0):(i.strstart>i.block_start&&(_s(i,!1),i.strm.avail_out),ms)}function JE(i,e){for(var t,n;;){if(i.lookahead<xa){if(Of(i),i.lookahead<xa&&e===mg)return ms;if(i.lookahead===0)break}if(t=0,i.lookahead>=Bt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Bt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-xa&&(i.match_length=FZ(i,t)),i.match_length>=Bt)if(n=qo._tr_tally(i,i.strstart-i.match_start,i.match_length-Bt),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Bt){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Bt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else n=qo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(_s(i,!1),i.strm.avail_out===0))return ms}return i.insert=i.strstart<Bt-1?i.strstart:Bt-1,e===hu?(_s(i,!0),i.strm.avail_out===0?Rf:$0):i.last_lit&&(_s(i,!1),i.strm.avail_out===0)?ms:Zw}function ep(i,e){for(var t,n,s;;){if(i.lookahead<xa){if(Of(i),i.lookahead<xa&&e===mg)return ms;if(i.lookahead===0)break}if(t=0,i.lookahead>=Bt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Bt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Bt-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-xa&&(i.match_length=FZ(i,t),i.match_length<=5&&(i.strategy===_ve||i.match_length===Bt&&i.strstart-i.match_start>4096)&&(i.match_length=Bt-1)),i.prev_length>=Bt&&i.match_length<=i.prev_length){s=i.strstart+i.lookahead-Bt,n=qo._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Bt),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=s&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Bt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Bt-1,i.strstart++,n&&(_s(i,!1),i.strm.avail_out===0))return ms}else if(i.match_available){if(n=qo._tr_tally(i,0,i.window[i.strstart-1]),n&&_s(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return ms}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=qo._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Bt-1?i.strstart:Bt-1,e===hu?(_s(i,!0),i.strm.avail_out===0?Rf:$0):i.last_lit&&(_s(i,!1),i.strm.avail_out===0)?ms:Zw}function Ove(i,e){for(var t,n,s,r,o=i.window;;){if(i.lookahead<=tu){if(Of(i),i.lookahead<=tu&&e===mg)return ms;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Bt&&i.strstart>0&&(s=i.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){r=i.strstart+tu;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<r);i.match_length=tu-(r-s),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Bt?(t=qo._tr_tally(i,1,i.match_length-Bt),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=qo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(_s(i,!1),i.strm.avail_out===0))return ms}return i.insert=0,e===hu?(_s(i,!0),i.strm.avail_out===0?Rf:$0):i.last_lit&&(_s(i,!1),i.strm.avail_out===0)?ms:Zw}function Pve(i,e){for(var t;;){if(i.lookahead===0&&(Of(i),i.lookahead===0)){if(e===mg)return ms;break}if(i.match_length=0,t=qo._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(_s(i,!1),i.strm.avail_out===0))return ms}return i.insert=0,e===hu?(_s(i,!0),i.strm.avail_out===0?Rf:$0):i.last_lit&&(_s(i,!1),i.strm.avail_out===0)?ms:Zw}function sl(i,e,t,n,s){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=s}var Np;Np=[new sl(0,0,0,0,Rve),new sl(4,4,8,4,JE),new sl(4,5,16,8,JE),new sl(4,6,32,32,JE),new sl(4,4,16,16,ep),new sl(8,16,32,32,ep),new sl(8,16,128,128,ep),new sl(8,32,128,256,ep),new sl(32,128,258,1024,ep),new sl(32,258,258,4096,ep)];function Fve(i){i.window_size=2*i.w_size,qc(i.head),i.max_lazy_match=Np[i.level].max_lazy,i.good_match=Np[i.level].good_length,i.nice_match=Np[i.level].nice_length,i.max_chain_length=Np[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Bt-1,i.match_available=0,i.ins_h=0}function Bve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=TL,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ir.Buf16(Ave*2),this.dyn_dtree=new ir.Buf16((2*Lve+1)*2),this.bl_tree=new ir.Buf16((2*Eve+1)*2),qc(this.dyn_ltree),qc(this.dyn_dtree),qc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ir.Buf16(Ive+1),this.heap=new ir.Buf16(2*JN+1),qc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ir.Buf16(2*JN+1),qc(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function BZ(i){var e;return!i||!i.state?iu(i,Fl):(i.total_in=i.total_out=0,i.data_type=yve,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?NL:jd,i.adler=e.wrap===2?0:1,e.last_flush=mg,qo._tr_init(e),Sl)}function VZ(i){var e=BZ(i);return e===Sl&&Fve(i.state),e}function Vve(i,e){return!i||!i.state||i.state.wrap!==2?Fl:(i.state.gzhead=e,Sl)}function WZ(i,e,t,n,s,r){if(!i)return Fl;var o=1;if(e===mve&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>Cve||t!==TL||n<8||n>15||e<0||e>9||r<0||r>vve)return iu(i,Fl);n===8&&(n=9);var a=new Bve;return i.state=a,a.strm=i,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Bt-1)/Bt),a.window=new ir.Buf8(a.w_size*2),a.head=new ir.Buf16(a.hash_size),a.prev=new ir.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new ir.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=r,a.method=t,VZ(i)}function Wve(i,e){return WZ(i,e,TL,Sve,xve,wve)}function zve(i,e){var t,n,s,r;if(!i||!i.state||e>E7||e<0)return i?iu(i,Fl):Fl;if(n=i.state,!i.output||!i.input&&i.avail_in!==0||n.status===ob&&e!==hu)return iu(i,i.avail_out===0?XE:Fl);if(n.strm=i,t=n.last_flush,n.last_flush=e,n.status===NL)if(n.wrap===2)i.adler=0,Xt(n,31),Xt(n,139),Xt(n,8),n.gzhead?(Xt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Xt(n,n.gzhead.time&255),Xt(n,n.gzhead.time>>8&255),Xt(n,n.gzhead.time>>16&255),Xt(n,n.gzhead.time>>24&255),Xt(n,n.level===9?2:n.strategy>=$y||n.level<2?4:0),Xt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Xt(n,n.gzhead.extra.length&255),Xt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(i.adler=Mc(i.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=eM):(Xt(n,0),Xt(n,0),Xt(n,0),Xt(n,0),Xt(n,0),Xt(n,n.level===9?2:n.strategy>=$y||n.level<2?4:0),Xt(n,Nve),n.status=jd);else{var o=TL+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=$y||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=Tve),o+=31-o%31,n.status=jd,A_(n,o),n.strstart!==0&&(A_(n,i.adler>>>16),A_(n,i.adler&65535)),i.adler=1}if(n.status===eM)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),Rc(i),s=n.pending,n.pending===n.pending_buf_size));)Xt(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=bS)}else n.status=bS;if(n.status===bS)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),Rc(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.name.length?r=n.gzhead.name.charCodeAt(n.gzindex++)&255:r=0,Xt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.gzindex=0,n.status=vS)}else n.status=vS;if(n.status===vS)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),Rc(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.comment.length?r=n.gzhead.comment.charCodeAt(n.gzindex++)&255:r=0,Xt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=Mc(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.status=wS)}else n.status=wS;if(n.status===wS&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Rc(i),n.pending+2<=n.pending_buf_size&&(Xt(n,i.adler&255),Xt(n,i.adler>>8&255),i.adler=0,n.status=jd)):n.status=jd),n.pending!==0){if(Rc(i),i.avail_out===0)return n.last_flush=-1,Sl}else if(i.avail_in===0&&I7(e)<=I7(t)&&e!==hu)return iu(i,XE);if(n.status===ob&&i.avail_in!==0)return iu(i,XE);if(i.avail_in!==0||n.lookahead!==0||e!==mg&&n.status!==ob){var l=n.strategy===$y?Pve(n,e):n.strategy===bve?Ove(n,e):Np[n.level].func(n,e);if((l===Rf||l===$0)&&(n.status=ob),l===ms||l===Rf)return i.avail_out===0&&(n.last_flush=-1),Sl;if(l===Zw&&(e===fve?qo._tr_align(n):e!==E7&&(qo._tr_stored_block(n,0,0,!1),e===gve&&(qc(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Rc(i),i.avail_out===0))return n.last_flush=-1,Sl}return e!==hu?Sl:n.wrap<=0?A7:(n.wrap===2?(Xt(n,i.adler&255),Xt(n,i.adler>>8&255),Xt(n,i.adler>>16&255),Xt(n,i.adler>>24&255),Xt(n,i.total_in&255),Xt(n,i.total_in>>8&255),Xt(n,i.total_in>>16&255),Xt(n,i.total_in>>24&255)):(A_(n,i.adler>>>16),A_(n,i.adler&65535)),Rc(i),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Sl:A7)}function Hve(i){var e;return!i||!i.state?Fl:(e=i.state.status,e!==NL&&e!==eM&&e!==bS&&e!==vS&&e!==wS&&e!==jd&&e!==ob?iu(i,Fl):(i.state=null,e===jd?iu(i,pve):Sl))}function Uve(i,e){var t=e.length,n,s,r,o,a,l,h,c;if(!i||!i.state||(n=i.state,o=n.wrap,o===2||o===1&&n.status!==NL||n.lookahead))return Fl;for(o===1&&(i.adler=PZ(i.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(o===0&&(qc(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new ir.Buf8(n.w_size),ir.arraySet(c,e,t-n.w_size,n.w_size,0),e=c,t=n.w_size),a=i.avail_in,l=i.next_in,h=i.input,i.avail_in=t,i.next_in=0,i.input=e,Of(n);n.lookahead>=Bt;){s=n.strstart,r=n.lookahead-(Bt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+Bt-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++;while(--r);n.strstart=s,n.lookahead=Bt-1,Of(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Bt-1,n.match_available=0,i.next_in=l,i.input=h,i.avail_in=a,n.wrap=o,Sl}nh.deflateInit=Wve;nh.deflateInit2=WZ;nh.deflateReset=VZ;nh.deflateResetKeep=BZ;nh.deflateSetHeader=Vve;nh.deflate=zve;nh.deflateEnd=Hve;nh.deflateSetDictionary=Uve;nh.deflateInfo="pako deflate (from Nodeca project)";var _g={},ML=mc,zZ=!0,HZ=!0;try{String.fromCharCode.apply(null,[0])}catch{zZ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{HZ=!1}var i1=new ML.Buf8(256);for(var Sc=0;Sc<256;Sc++)i1[Sc]=Sc>=252?6:Sc>=248?5:Sc>=240?4:Sc>=224?3:Sc>=192?2:1;i1[254]=i1[254]=1;_g.string2buf=function(i){var e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new ML.Buf8(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};function UZ(i,e){if(e<65534&&(i.subarray&&HZ||!i.subarray&&zZ))return String.fromCharCode.apply(null,ML.shrinkBuf(i,e));for(var t="",n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t}_g.buf2binstring=function(i){return UZ(i,i.length)};_g.binstring2buf=function(i){for(var e=new ML.Buf8(i.length),t=0,n=e.length;t<n;t++)e[t]=i.charCodeAt(t);return e};_g.buf2string=function(i,e){var t,n,s,r,o=e||i.length,a=new Array(o*2);for(n=0,t=0;t<o;){if(s=i[t++],s<128){a[n++]=s;continue}if(r=i1[s],r>4){a[n++]=65533,t+=r-1;continue}for(s&=r===2?31:r===3?15:7;r>1&&t<o;)s=s<<6|i[t++]&63,r--;if(r>1){a[n++]=65533;continue}s<65536?a[n++]=s:(s-=65536,a[n++]=55296|s>>10&1023,a[n++]=56320|s&1023)}return UZ(a,n)};_g.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+i1[i[t]]>e?t:e};function $ve(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var $Z=$ve,Ob=nh,Pb=mc,tM=_g,iM=HP,jve=$Z,jZ=Object.prototype.toString,qve=0,eA=4,tm=0,T7=1,N7=2,Gve=-1,Kve=0,Zve=8;function Pf(i){if(!(this instanceof Pf))return new Pf(i);this.options=Pb.assign({level:Gve,method:Zve,chunkSize:16384,windowBits:15,memLevel:8,strategy:Kve,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jve,this.strm.avail_out=0;var t=Ob.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==tm)throw new Error(iM[t]);if(e.header&&Ob.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=tM.string2buf(e.dictionary):jZ.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=Ob.deflateSetDictionary(this.strm,n),t!==tm)throw new Error(iM[t]);this._dict_set=!0}}Pf.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s,r;if(this.ended)return!1;r=e===~~e?e:e===!0?eA:qve,typeof i=="string"?t.input=tM.string2buf(i):jZ.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Pb.Buf8(n),t.next_out=0,t.avail_out=n),s=Ob.deflate(t,r),s!==T7&&s!==tm)return this.onEnd(s),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(r===eA||r===N7))&&(this.options.to==="string"?this.onData(tM.buf2binstring(Pb.shrinkBuf(t.output,t.next_out))):this.onData(Pb.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&s!==T7);return r===eA?(s=Ob.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===tm):(r===N7&&(this.onEnd(tm),t.avail_out=0),!0)};Pf.prototype.onData=function(i){this.chunks.push(i)};Pf.prototype.onEnd=function(i){i===tm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function UP(i,e){var t=new Pf(e);if(t.push(i,!0),t.err)throw t.msg||iM[t.err];return t.result}function Yve(i,e){return e=e||{},e.raw=!0,UP(i,e)}function Qve(i,e){return e=e||{},e.gzip=!0,UP(i,e)}Gw.Deflate=Pf;Gw.deflate=UP;Gw.deflateRaw=Yve;Gw.gzip=Qve;var Yw={},qa={},jy=30,Xve=12,Jve=function(i,e){var t,n,s,r,o,a,l,h,c,u,d,f,g,p,m,b,_,w,y,x,L,S,k,D,T;t=i.state,n=i.next_in,D=i.input,s=n+(i.avail_in-5),r=i.next_out,T=i.output,o=r-(e-i.avail_out),a=r+(i.avail_out-257),l=t.dmax,h=t.wsize,c=t.whave,u=t.wnext,d=t.window,f=t.hold,g=t.bits,p=t.lencode,m=t.distcode,b=(1<<t.lenbits)-1,_=(1<<t.distbits)-1;e:do{g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=p[f&b];t:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y===0)T[r++]=w&65535;else if(y&16){x=w&65535,y&=15,y&&(g<y&&(f+=D[n++]<<g,g+=8),x+=f&(1<<y)-1,f>>>=y,g-=y),g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=m[f&_];i:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y&16){if(L=w&65535,y&=15,g<y&&(f+=D[n++]<<g,g+=8,g<y&&(f+=D[n++]<<g,g+=8)),L+=f&(1<<y)-1,L>l){i.msg="invalid distance too far back",t.mode=jy;break e}if(f>>>=y,g-=y,y=r-o,L>y){if(y=L-y,y>c&&t.sane){i.msg="invalid distance too far back",t.mode=jy;break e}if(S=0,k=d,u===0){if(S+=h-y,y<x){x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}}else if(u<y){if(S+=h+u-y,y-=u,y<x){x-=y;do T[r++]=d[S++];while(--y);if(S=0,u<x){y=u,x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}}}else if(S+=u-y,y<x){x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}for(;x>2;)T[r++]=k[S++],T[r++]=k[S++],T[r++]=k[S++],x-=3;x&&(T[r++]=k[S++],x>1&&(T[r++]=k[S++]))}else{S=r-L;do T[r++]=T[S++],T[r++]=T[S++],T[r++]=T[S++],x-=3;while(x>2);x&&(T[r++]=T[S++],x>1&&(T[r++]=T[S++]))}}else if(y&64){i.msg="invalid distance code",t.mode=jy;break e}else{w=m[(w&65535)+(f&(1<<y)-1)];continue i}break}}else if(y&64)if(y&32){t.mode=Xve;break e}else{i.msg="invalid literal/length code",t.mode=jy;break e}else{w=p[(w&65535)+(f&(1<<y)-1)];continue t}break}}while(n<s&&r<a);x=g>>3,n-=x,g-=x<<3,f&=(1<<g)-1,i.next_in=n,i.next_out=r,i.avail_in=n<s?5+(s-n):5-(n-s),i.avail_out=r<a?257+(a-r):257-(r-a),t.hold=f,t.bits=g},M7=mc,tp=15,R7=852,O7=592,P7=0,tA=1,F7=2,e1e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],t1e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i1e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n1e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],s1e=function(i,e,t,n,s,r,o,a){var l=a.bits,h=0,c=0,u=0,d=0,f=0,g=0,p=0,m=0,b=0,_=0,w,y,x,L,S,k=null,D=0,T,M=new M7.Buf16(tp+1),j=new M7.Buf16(tp+1),$=null,ie=0,pe,be,ye;for(h=0;h<=tp;h++)M[h]=0;for(c=0;c<n;c++)M[e[t+c]]++;for(f=l,d=tp;d>=1&&M[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&M[u]===0;u++);for(f<u&&(f=u),m=1,h=1;h<=tp;h++)if(m<<=1,m-=M[h],m<0)return-1;if(m>0&&(i===P7||d!==1))return-1;for(j[1]=0,h=1;h<tp;h++)j[h+1]=j[h]+M[h];for(c=0;c<n;c++)e[t+c]!==0&&(o[j[e[t+c]]++]=c);if(i===P7?(k=$=o,T=19):i===tA?(k=e1e,D-=257,$=t1e,ie-=257,T=256):(k=i1e,$=n1e,T=-1),_=0,c=0,h=u,S=r,g=f,p=0,x=-1,b=1<<f,L=b-1,i===tA&&b>R7||i===F7&&b>O7)return 1;for(;;){pe=h-p,o[c]<T?(be=0,ye=o[c]):o[c]>T?(be=$[ie+o[c]],ye=k[D+o[c]]):(be=32+64,ye=0),w=1<<h-p,y=1<<g,u=y;do y-=w,s[S+(_>>p)+y]=pe<<24|be<<16|ye|0;while(y!==0);for(w=1<<h-1;_&w;)w>>=1;if(w!==0?(_&=w-1,_+=w):_=0,c++,--M[h]===0){if(h===d)break;h=e[t+o[c]]}if(h>f&&(_&L)!==x){for(p===0&&(p=f),S+=u,g=h-p,m=1<<g;g+p<d&&(m-=M[g+p],!(m<=0));)g++,m<<=1;if(b+=1<<g,i===tA&&b>R7||i===F7&&b>O7)return 1;x=_&L,s[x]=f<<24|g<<16|S-r|0}}return _!==0&&(s[S+_]=h-p<<24|64<<16|0),a.bits=f,0},Xr=mc,nM=RZ,rl=OZ,r1e=Jve,Fb=s1e,o1e=0,qZ=1,GZ=2,B7=4,a1e=5,qy=6,Ff=0,l1e=1,h1e=2,lc=-2,KZ=-3,ZZ=-4,c1e=-5,V7=8,YZ=1,W7=2,z7=3,H7=4,U7=5,$7=6,j7=7,q7=8,G7=9,K7=10,Gx=11,fh=12,iA=13,Z7=14,nA=15,Y7=16,Q7=17,X7=18,J7=19,Gy=20,Ky=21,e9=22,t9=23,i9=24,n9=25,s9=26,sA=27,r9=28,o9=29,Xi=30,QZ=31,u1e=32,d1e=852,f1e=592,g1e=15,p1e=g1e;function a9(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function m1e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Xr.Buf16(320),this.work=new Xr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function XZ(i){var e;return!i||!i.state?lc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=YZ,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Xr.Buf32(d1e),e.distcode=e.distdyn=new Xr.Buf32(f1e),e.sane=1,e.back=-1,Ff)}function JZ(i){var e;return!i||!i.state?lc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,XZ(i))}function eY(i,e){var t,n;return!i||!i.state||(n=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?lc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,JZ(i))}function tY(i,e){var t,n;return i?(n=new m1e,i.state=n,n.window=null,t=eY(i,e),t!==Ff&&(i.state=null),t):lc}function _1e(i){return tY(i,p1e)}var l9=!0,rA,oA;function b1e(i){if(l9){var e;for(rA=new Xr.Buf32(512),oA=new Xr.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Fb(qZ,i.lens,0,288,rA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Fb(GZ,i.lens,0,32,oA,0,i.work,{bits:5}),l9=!1}i.lencode=rA,i.lenbits=9,i.distcode=oA,i.distbits=5}function iY(i,e,t,n){var s,r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Xr.Buf8(r.wsize)),n>=r.wsize?(Xr.arraySet(r.window,e,t-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),Xr.arraySet(r.window,e,t-n,s,r.wnext),n-=s,n?(Xr.arraySet(r.window,e,t-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}function v1e(i,e){var t,n,s,r,o,a,l,h,c,u,d,f,g,p,m=0,b,_,w,y,x,L,S,k,D=new Xr.Buf8(4),T,M,j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return lc;t=i.state,t.mode===fh&&(t.mode=iA),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,h=t.hold,c=t.bits,u=a,d=l,k=Ff;e:for(;;)switch(t.mode){case YZ:if(t.wrap===0){t.mode=iA;break}for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.wrap&2&&h===35615){t.check=0,D[0]=h&255,D[1]=h>>>8&255,t.check=rl(t.check,D,2,0),h=0,c=0,t.mode=W7;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((h&255)<<8)+(h>>8))%31){i.msg="incorrect header check",t.mode=Xi;break}if((h&15)!==V7){i.msg="unknown compression method",t.mode=Xi;break}if(h>>>=4,c-=4,S=(h&15)+8,t.wbits===0)t.wbits=S;else if(S>t.wbits){i.msg="invalid window size",t.mode=Xi;break}t.dmax=1<<S,i.adler=t.check=1,t.mode=h&512?K7:fh,h=0,c=0;break;case W7:for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.flags=h,(t.flags&255)!==V7){i.msg="unknown compression method",t.mode=Xi;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Xi;break}t.head&&(t.head.text=h>>8&1),t.flags&512&&(D[0]=h&255,D[1]=h>>>8&255,t.check=rl(t.check,D,2,0)),h=0,c=0,t.mode=z7;case z7:for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.head&&(t.head.time=h),t.flags&512&&(D[0]=h&255,D[1]=h>>>8&255,D[2]=h>>>16&255,D[3]=h>>>24&255,t.check=rl(t.check,D,4,0)),h=0,c=0,t.mode=H7;case H7:for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.head&&(t.head.xflags=h&255,t.head.os=h>>8),t.flags&512&&(D[0]=h&255,D[1]=h>>>8&255,t.check=rl(t.check,D,2,0)),h=0,c=0,t.mode=U7;case U7:if(t.flags&1024){for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.length=h,t.head&&(t.head.extra_len=h),t.flags&512&&(D[0]=h&255,D[1]=h>>>8&255,t.check=rl(t.check,D,2,0)),h=0,c=0}else t.head&&(t.head.extra=null);t.mode=$7;case $7:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Xr.arraySet(t.head.extra,n,r,f,S)),t.flags&512&&(t.check=rl(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=j7;case j7:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=rl(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=q7;case q7:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=rl(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=G7;case G7:if(t.flags&512){for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(h!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Xi;break}h=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=fh;break;case K7:for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}i.adler=t.check=a9(h),h=0,c=0,t.mode=Gx;case Gx:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,h1e;i.adler=t.check=1,t.mode=fh;case fh:if(e===a1e||e===qy)break e;case iA:if(t.last){h>>>=c&7,c-=c&7,t.mode=sA;break}for(;c<3;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}switch(t.last=h&1,h>>>=1,c-=1,h&3){case 0:t.mode=Z7;break;case 1:if(b1e(t),t.mode=Gy,e===qy){h>>>=2,c-=2;break e}break;case 2:t.mode=Q7;break;case 3:i.msg="invalid block type",t.mode=Xi}h>>>=2,c-=2;break;case Z7:for(h>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if((h&65535)!==(h>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Xi;break}if(t.length=h&65535,h=0,c=0,t.mode=nA,e===qy)break e;case nA:t.mode=Y7;case Y7:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Xr.arraySet(s,n,r,f,o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=fh;break;case Q7:for(;c<14;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.nlen=(h&31)+257,h>>>=5,c-=5,t.ndist=(h&31)+1,h>>>=5,c-=5,t.ncode=(h&15)+4,h>>>=4,c-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Xi;break}t.have=0,t.mode=X7;case X7:for(;t.have<t.ncode;){for(;c<3;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.lens[j[t.have++]]=h&7,h>>>=3,c-=3}for(;t.have<19;)t.lens[j[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},k=Fb(o1e,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid code lengths set",t.mode=Xi;break}t.have=0,t.mode=J7;case J7:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[h&(1<<t.lenbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(w<16)h>>>=b,c-=b,t.lens[t.have++]=w;else{if(w===16){for(M=b+2;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(h>>>=b,c-=b,t.have===0){i.msg="invalid bit length repeat",t.mode=Xi;break}S=t.lens[t.have-1],f=3+(h&3),h>>>=2,c-=2}else if(w===17){for(M=b+3;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=b,c-=b,S=0,f=3+(h&7),h>>>=3,c-=3}else{for(M=b+7;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=b,c-=b,S=0,f=11+(h&127),h>>>=7,c-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Xi;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===Xi)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Xi;break}if(t.lenbits=9,T={bits:t.lenbits},k=Fb(qZ,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid literal/lengths set",t.mode=Xi;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},k=Fb(GZ,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,k){i.msg="invalid distances set",t.mode=Xi;break}if(t.mode=Gy,e===qy)break e;case Gy:t.mode=Ky;case Ky:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,r1e(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,h=t.hold,c=t.bits,t.mode===fh&&(t.back=-1);break}for(t.back=0;m=t.lencode[h&(1<<t.lenbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(_&&!(_&240)){for(y=b,x=_,L=w;m=t.lencode[L+((h&(1<<y+x)-1)>>y)],b=m>>>24,_=m>>>16&255,w=m&65535,!(y+b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=y,c-=y,t.back+=y}if(h>>>=b,c-=b,t.back+=b,t.length=w,_===0){t.mode=s9;break}if(_&32){t.back=-1,t.mode=fh;break}if(_&64){i.msg="invalid literal/length code",t.mode=Xi;break}t.extra=_&15,t.mode=e9;case e9:if(t.extra){for(M=t.extra;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=t9;case t9:for(;m=t.distcode[h&(1<<t.distbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(!(_&240)){for(y=b,x=_,L=w;m=t.distcode[L+((h&(1<<y+x)-1)>>y)],b=m>>>24,_=m>>>16&255,w=m&65535,!(y+b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=y,c-=y,t.back+=y}if(h>>>=b,c-=b,t.back+=b,_&64){i.msg="invalid distance code",t.mode=Xi;break}t.offset=w,t.extra=_&15,t.mode=i9;case i9:if(t.extra){for(M=t.extra;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Xi;break}t.mode=n9;case n9:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Xi;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=Ky);break;case s9:if(l===0)break e;s[o++]=t.length,l--,t.mode=Ky;break;case sA:if(t.wrap){for(;c<32;){if(a===0)break e;a--,h|=n[r++]<<c,c+=8}if(d-=l,i.total_out+=d,t.total+=d,d&&(i.adler=t.check=t.flags?rl(t.check,s,d,o-d):nM(t.check,s,d,o-d)),d=l,(t.flags?h:a9(h))!==t.check){i.msg="incorrect data check",t.mode=Xi;break}h=0,c=0}t.mode=r9;case r9:if(t.wrap&&t.flags){for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(h!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Xi;break}h=0,c=0}t.mode=o9;case o9:k=l1e;break e;case Xi:k=KZ;break e;case QZ:return ZZ;case u1e:default:return lc}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,(t.wsize||d!==i.avail_out&&t.mode<Xi&&(t.mode<sA||e!==B7))&&iY(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&&d&&(i.adler=t.check=t.flags?rl(t.check,s,d,i.next_out-d):nM(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===fh?128:0)+(t.mode===Gy||t.mode===nA?256:0),(u===0&&d===0||e===B7)&&k===Ff&&(k=c1e),k}function w1e(i){if(!i||!i.state)return lc;var e=i.state;return e.window&&(e.window=null),i.state=null,Ff}function y1e(i,e){var t;return!i||!i.state||(t=i.state,!(t.wrap&2))?lc:(t.head=e,e.done=!1,Ff)}function C1e(i,e){var t=e.length,n,s,r;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==Gx)?lc:n.mode===Gx&&(s=1,s=nM(s,e,t,0),s!==n.check)?KZ:(r=iY(i,e,t,t),r?(n.mode=QZ,ZZ):(n.havedict=1,Ff))}qa.inflateReset=JZ;qa.inflateReset2=eY;qa.inflateResetKeep=XZ;qa.inflateInit=_1e;qa.inflateInit2=tY;qa.inflate=v1e;qa.inflateEnd=w1e;qa.inflateGetHeader=y1e;qa.inflateSetDictionary=C1e;qa.inflateInfo="pako inflate (from Nodeca project)";var nY={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function S1e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var x1e=S1e,im=qa,Bb=mc,yS=_g,Sn=nY,sM=HP,D1e=$Z,k1e=x1e,sY=Object.prototype.toString;function Bf(i){if(!(this instanceof Bf))return new Bf(i);this.options=Bb.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D1e,this.strm.avail_out=0;var t=im.inflateInit2(this.strm,e.windowBits);if(t!==Sn.Z_OK)throw new Error(sM[t]);if(this.header=new k1e,im.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=yS.string2buf(e.dictionary):sY.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=im.inflateSetDictionary(this.strm,e.dictionary),t!==Sn.Z_OK)))throw new Error(sM[t])}Bf.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,r,o,a,l,h,c=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?Sn.Z_FINISH:Sn.Z_NO_FLUSH,typeof i=="string"?t.input=yS.binstring2buf(i):sY.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Bb.Buf8(n),t.next_out=0,t.avail_out=n),r=im.inflate(t,Sn.Z_NO_FLUSH),r===Sn.Z_NEED_DICT&&s&&(r=im.inflateSetDictionary(this.strm,s)),r===Sn.Z_BUF_ERROR&&c===!0&&(r=Sn.Z_OK,c=!1),r!==Sn.Z_STREAM_END&&r!==Sn.Z_OK)return this.onEnd(r),this.ended=!0,!1;t.next_out&&(t.avail_out===0||r===Sn.Z_STREAM_END||t.avail_in===0&&(o===Sn.Z_FINISH||o===Sn.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=yS.utf8border(t.output,t.next_out),l=t.next_out-a,h=yS.buf2string(t.output,a),t.next_out=l,t.avail_out=n-l,l&&Bb.arraySet(t.output,t.output,a,l,0),this.onData(h)):this.onData(Bb.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(c=!0)}while((t.avail_in>0||t.avail_out===0)&&r!==Sn.Z_STREAM_END);return r===Sn.Z_STREAM_END&&(o=Sn.Z_FINISH),o===Sn.Z_FINISH?(r=im.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Sn.Z_OK):(o===Sn.Z_SYNC_FLUSH&&(this.onEnd(Sn.Z_OK),t.avail_out=0),!0)};Bf.prototype.onData=function(i){this.chunks.push(i)};Bf.prototype.onEnd=function(i){i===Sn.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Bb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function $P(i,e){var t=new Bf(e);if(t.push(i,!0),t.err)throw t.msg||sM[t.err];return t.result}function L1e(i,e){return e=e||{},e.raw=!0,$P(i,e)}Yw.Inflate=Bf;Yw.inflate=$P;Yw.inflateRaw=L1e;Yw.ungzip=$P;var E1e=mc.assign,A1e=Gw,I1e=Yw,T1e=nY,rY={};E1e(rY,A1e,I1e,T1e);var Kx=rY;async function Um(i){try{let e,t=0,n=0;const s=[];let r=0,o;do{const l=i.subarray(t);if(o=new Kx.Inflate,{strm:e}=o,o.push(l,Kx.Z_SYNC_FLUSH),o.err)throw new Error(o.msg);t+=e.next_in,s[n]=o.result,r+=s[n].length,n+=1}while(e.avail_in);const a=new Uint8Array(r);for(let l=0,h=0;l<s.length;l++)a.set(s[l],h),h+=s[l].length;return Buffer.from(a)}catch(e){throw`${e}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function oY(i,e){try{let t;const{minv:n,maxv:s}=e;let r=n.blockPosition,o=n.dataPosition;const a=[],l=[],h=[];let c=0,u=0;do{const f=i.subarray(r-n.blockPosition),g=new Kx.Inflate;if({strm:t}=g,g.push(f,Kx.Z_SYNC_FLUSH),g.err)throw new Error(g.msg);const p=g.result;a.push(p);let m=p.length;l.push(r),h.push(o),a.length===1&&n.dataPosition&&(a[0]=a[0].subarray(n.dataPosition),m=a[0].length);const b=r;if(r+=t.next_in,o+=m,b>=s.blockPosition){a[u]=a[u].subarray(0,s.blockPosition===n.blockPosition?s.dataPosition-n.dataPosition+1:s.dataPosition+1),l.push(r),h.push(o),c+=a[u].length;break}c+=a[u].length,u++}while(t.avail_in);const d=new Uint8Array(c);for(let f=0,g=0;f<a.length;f++)d.set(a[f],g),g+=a[f].length;return{buffer:Buffer.from(d),cpositions:l,dpositions:h}}catch(t){throw`${t}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):t}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Po=null;try{Po=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function qi(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}qi.prototype.__isLong__;Object.defineProperty(qi.prototype,"__isLong__",{value:!0});function Us(i){return(i&&i.__isLong__)===!0}function h9(i){var e=Math.clz32(i&-i);return i?31-e:e}qi.isLong=Us;var c9={},u9={};function bg(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=u9[i],n)?n:(t=ii(i,0,!0),s&&(u9[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=c9[i],n)?n:(t=ii(i,i<0?-1:0,!1),s&&(c9[i]=t),t))}qi.fromInt=bg;function Fo(i,e){if(isNaN(i))return e?Zh:wa;if(e){if(i<0)return Zh;if(i>=aY)return cY}else{if(i<=-f9)return kr;if(i+1>=f9)return hY}return i<0?Fo(-i,e).neg():ii(i%$m|0,i/$m|0,e)}qi.fromNumber=Fo;function ii(i,e,t){return new qi(i,e,t)}qi.fromBits=ii;var Zx=Math.pow;function jP(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?Zh:wa;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return jP(i.substring(1),e,t).neg();for(var s=Fo(Zx(t,8)),r=wa,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var h=Fo(Zx(t,a));r=r.mul(h).add(Fo(l))}else r=r.mul(s),r=r.add(Fo(l))}return r.unsigned=e,r}qi.fromString=jP;function Ga(i,e){return typeof i=="number"?Fo(i,e):typeof i=="string"?jP(i,e):ii(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}qi.fromValue=Ga;var d9=1<<16,N1e=1<<24,$m=d9*d9,aY=$m*$m,f9=aY/2,g9=bg(N1e),wa=bg(0);qi.ZERO=wa;var Zh=bg(0,!0);qi.UZERO=Zh;var Mp=bg(1);qi.ONE=Mp;var lY=bg(1,!0);qi.UONE=lY;var rM=bg(-1);qi.NEG_ONE=rM;var hY=ii(-1,2147483647,!1);qi.MAX_VALUE=hY;var cY=ii(-1,-1,!0);qi.MAX_UNSIGNED_VALUE=cY;var kr=ii(0,-2147483648,!1);qi.MIN_VALUE=kr;var ke=qi.prototype;ke.toInt=function(){return this.unsigned?this.low>>>0:this.low};ke.toNumber=function(){return this.unsigned?(this.high>>>0)*$m+(this.low>>>0):this.high*$m+(this.low>>>0)};ke.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(kr)){var e=Fo(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=Fo(Zx(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,h=l.toString(i);if(r=a,r.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};ke.getHighBits=function(){return this.high};ke.getHighBitsUnsigned=function(){return this.high>>>0};ke.getLowBits=function(){return this.low};ke.getLowBitsUnsigned=function(){return this.low>>>0};ke.getNumBitsAbs=function(){if(this.isNegative())return this.eq(kr)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};ke.isZero=function(){return this.high===0&&this.low===0};ke.eqz=ke.isZero;ke.isNegative=function(){return!this.unsigned&&this.high<0};ke.isPositive=function(){return this.unsigned||this.high>=0};ke.isOdd=function(){return(this.low&1)===1};ke.isEven=function(){return(this.low&1)===0};ke.equals=function(i){return Us(i)||(i=Ga(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};ke.eq=ke.equals;ke.notEquals=function(i){return!this.eq(i)};ke.neq=ke.notEquals;ke.ne=ke.notEquals;ke.lessThan=function(i){return this.comp(i)<0};ke.lt=ke.lessThan;ke.lessThanOrEqual=function(i){return this.comp(i)<=0};ke.lte=ke.lessThanOrEqual;ke.le=ke.lessThanOrEqual;ke.greaterThan=function(i){return this.comp(i)>0};ke.gt=ke.greaterThan;ke.greaterThanOrEqual=function(i){return this.comp(i)>=0};ke.gte=ke.greaterThanOrEqual;ke.ge=ke.greaterThanOrEqual;ke.compare=function(i){if(Us(i)||(i=Ga(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};ke.comp=ke.compare;ke.negate=function(){return!this.unsigned&&this.eq(kr)?kr:this.not().add(Mp)};ke.neg=ke.negate;ke.add=function(i){Us(i)||(i=Ga(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,h=0,c=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,c+=u>>>16,u&=65535,c+=t+o,h+=c>>>16,c&=65535,h+=e+r,h&=65535,ii(u<<16|d,h<<16|c,this.unsigned)};ke.subtract=function(i){return Us(i)||(i=Ga(i)),this.add(i.neg())};ke.sub=ke.subtract;ke.multiply=function(i){if(this.isZero())return this;if(Us(i)||(i=Ga(i)),Po){var e=Po.mul(this.low,this.high,i.low,i.high);return ii(e,Po.get_high(),this.unsigned)}if(i.isZero())return this.unsigned?Zh:wa;if(this.eq(kr))return i.isOdd()?kr:wa;if(i.eq(kr))return this.isOdd()?kr:wa;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(g9)&&i.lt(g9))return Fo(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,h=i.low&65535,c=0,u=0,d=0,f=0;return f+=r*h,d+=f>>>16,f&=65535,d+=s*h,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*h,c+=u>>>16,u&=65535,u+=s*l,c+=u>>>16,u&=65535,u+=r*a,c+=u>>>16,u&=65535,c+=t*h+n*l+s*a+r*o,c&=65535,ii(d<<16|f,c<<16|u,this.unsigned)};ke.mul=ke.multiply;ke.divide=function(i){if(Us(i)||(i=Ga(i)),i.isZero())throw Error("division by zero");if(Po){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?Po.div_u:Po.div_s)(this.low,this.high,i.low,i.high);return ii(e,Po.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Zh:wa;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Zh;if(i.gt(this.shru(1)))return lY;s=Zh}else{if(this.eq(kr)){if(i.eq(Mp)||i.eq(rM))return kr;if(i.eq(kr))return Mp;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(wa)?i.isNegative()?Mp:rM:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(kr))return this.unsigned?Zh:wa;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=wa}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:Zx(2,o-48),l=Fo(t),h=l.mul(i);h.isNegative()||h.gt(n);)t-=a,l=Fo(t,this.unsigned),h=l.mul(i);l.isZero()&&(l=Mp),s=s.add(l),n=n.sub(h)}return s};ke.div=ke.divide;ke.modulo=function(i){if(Us(i)||(i=Ga(i)),Po){var e=(this.unsigned?Po.rem_u:Po.rem_s)(this.low,this.high,i.low,i.high);return ii(e,Po.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};ke.mod=ke.modulo;ke.rem=ke.modulo;ke.not=function(){return ii(~this.low,~this.high,this.unsigned)};ke.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ke.clz=ke.countLeadingZeros;ke.countTrailingZeros=function(){return this.low?h9(this.low):h9(this.high)+32};ke.ctz=ke.countTrailingZeros;ke.and=function(i){return Us(i)||(i=Ga(i)),ii(this.low&i.low,this.high&i.high,this.unsigned)};ke.or=function(i){return Us(i)||(i=Ga(i)),ii(this.low|i.low,this.high|i.high,this.unsigned)};ke.xor=function(i){return Us(i)||(i=Ga(i)),ii(this.low^i.low,this.high^i.high,this.unsigned)};ke.shiftLeft=function(i){return Us(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?ii(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):ii(0,this.low<<i-32,this.unsigned)};ke.shl=ke.shiftLeft;ke.shiftRight=function(i){return Us(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?ii(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):ii(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};ke.shr=ke.shiftRight;ke.shiftRightUnsigned=function(i){return Us(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?ii(this.low>>>i|this.high<<32-i,this.high>>>i,this.unsigned):i===32?ii(this.high,0,this.unsigned):ii(this.high>>>i-32,0,this.unsigned)};ke.shru=ke.shiftRightUnsigned;ke.shr_u=ke.shiftRightUnsigned;ke.rotateLeft=function(i){var e;return Us(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?ii(this.high,this.low,this.unsigned):i<32?(e=32-i,ii(this.low<<i|this.high>>>e,this.high<<i|this.low>>>e,this.unsigned)):(i-=32,e=32-i,ii(this.high<<i|this.low>>>e,this.low<<i|this.high>>>e,this.unsigned))};ke.rotl=ke.rotateLeft;ke.rotateRight=function(i){var e;return Us(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?ii(this.high,this.low,this.unsigned):i<32?(e=32-i,ii(this.high<<e|this.low>>>i,this.low<<e|this.high>>>i,this.unsigned)):(i-=32,e=32-i,ii(this.low<<e|this.high>>>i,this.high<<e|this.low>>>i,this.unsigned))};ke.rotr=ke.rotateRight;ke.toSigned=function(){return this.unsigned?ii(this.low,this.high,!1):this};ke.toUnsigned=function(){return this.unsigned?this:ii(this.low,this.high,!0)};ke.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};ke.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};ke.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};qi.fromBytes=function(i,e,t){return t?qi.fromBytesLE(i,e):qi.fromBytesBE(i,e)};qi.fromBytesLE=function(i,e){return new qi(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};qi.fromBytesBE=function(i,e){return new qi(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};function p9(i,e){return i.offset+i.lineBytes*Math.floor(e/i.lineLength)+e%i.lineLength}async function M1e(i,e){const t=await i.readFile(e);if(!(t&&t.length))throw new Error("No data read from FASTA index (FAI) file");let n=0,s;const r=t.toString("utf8").split(/\r?\n/).filter(o=>/\S/.test(o)).map(o=>o.split("	")).filter(o=>o[0]!=="").map(o=>((!s||s.name!==o[0])&&(s={name:o[0],id:n},n+=1),{id:s.id,name:o[0],length:+o[1],start:0,end:+o[1],offset:+o[2],lineLength:+o[3],lineBytes:+o[4]}));return{name:Object.fromEntries(r.map(o=>[o.name,o])),id:Object.fromEntries(r.map(o=>[o.id,o]))}}class R1e{constructor({fasta:e,fai:t,path:n,faiPath:s,chunkSizeLimit:r=1e6}){if(e)this.fasta=e;else if(n)this.fasta=new Qr(n);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(t)this.fai=t;else if(s)this.fai=new Qr(s);else if(n)this.fai=new Qr(`${n}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile");this.chunkSizeLimit=r}async _getIndexes(e){return this.indexes||(this.indexes=M1e(this.fai,e)),this.indexes}async getSequenceNames(e){return Object.keys((await this._getIndexes(e)).name)}async getSequenceSizes(e){const t={},n=await this._getIndexes(e),s=Object.values(n.id);for(let r=0;r<s.length;r+=1)t[s[r].name]=s[r].length;return t}async getSequenceSize(e,t){var n;return(n=(await this._getIndexes(t)).name[e])===null||n===void 0?void 0:n.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t)).name[e]}async getResiduesById(e,t,n,s){const r=(await this._getIndexes(s)).id[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getResiduesByName(e,t,n,s){const r=(await this._getIndexes(s)).name[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getSequence(e,t,n,s){return this.getResiduesByName(e,t,n,s)}async _fetchFromIndexEntry(e,t=0,n,s){let r=n;if(t<0)throw new TypeError("regionStart cannot be less than 0");if((r===void 0||r>e.length)&&(r=e.length),t>=r)return"";const o=p9(e,t),a=p9(e,r)-o;if(a>this.chunkSizeLimit)throw new Error(`data size of ${a.toLocaleString()} bytes exceeded chunk size limit of ${this.chunkSizeLimit.toLocaleString()} bytes`);const l=Buffer.allocUnsafe(a);return await this.fasta.read(l,0,a,o,s),l.toString("utf8").replace(/\s+/g,"")}}function Qw(i){return class extends i{constructor(){super(...arguments),Yo(this,"lastQuantizedInterval",[0,0])}quantizeInterval(e,t){return[Math.max(Math.floor(e[0]/t-1)*t,0),Math.min(Math.ceil(e[1]/t+1)*t,this.genome.totalSize)]}checkAndUpdateLastInterval(e){return Nx(this.lastQuantizedInterval,e)?!1:(this.lastQuantizedInterval=e,!0)}}}function Xw(i,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(i)||i.startsWith("/")?i:(e.endsWith("/")||(e+="/"),e+i)}typeof window<"u"&&(window.Buffer=ps.Buffer);class O1e extends Qw(gg){constructor(e,t){const n={channel:"x",windowSize:7e3,...e};if(super(t,n.channel),this.params=n,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");const s=r=>new Al(Xw(r,this.view.getBaseUrl()));this.fasta=new R1e({fasta:s(this.params.url),fai:s(this.params.indexUrl??this.params.url+".fai")})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.fasta.getSequence(o.chrom,o.startPos,o.endPos).then(a=>({chrom:o.chrom,start:o.startPos,sequence:a}))));this.publishData(r)}}}const RL=BigInt(32);function P1e(i,e,t){const n=+!!t,s=+!t;return BigInt(i.getInt32(e,t)*s+i.getInt32(e+4,t)*n)<<RL|BigInt(i.getUint32(e,t)*n+i.getUint32(e+4,t)*s)}function F1e(i,e,t){const n=i.getUint32(e,t),s=i.getUint32(e+4,t),r=+!!t,o=+!t;return BigInt(n*o+s*r)<<RL|BigInt(n*r+s*o)}function B1e(i,e,t,n){const s=Number(t>>RL),r=Number(t&BigInt(4294967295));n?(i.setInt32(e+4,s,n),i.setUint32(e,r,n)):(i.setInt32(e,s,n),i.setUint32(e+4,r,n))}function V1e(i,e,t,n){const s=Number(t>>RL),r=Number(t&BigInt(4294967295));n?(i.setUint32(e+4,s,n),i.setUint32(e,r,n)):(i.setUint32(e,s,n),i.setUint32(e+4,r,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(i,e){return P1e(this,i,e)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(i,e){return F1e(this,i,e)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(i,e,t){B1e(this,i,e,t)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(i,e,t){V1e(this,i,e,t)});class W1e{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach(t=>{const n=this.references.get(t);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,t])=>!t.resolved&&!t.requested).map(([e,t])=>e)}}const ra=new Map,gd="___parser_",oa={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},Zy={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Yy={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};let ui=class aa{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new aa}primitiveGenerateN(e,t){const n=Zy[e],s=Yy[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${n}(offset, ${s});`),t.pushCode(`offset += ${oa[e]};`)}primitiveN(e,t,n){return this.setNextParser(e,t,n)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,n){return n.length=e,this.setNextParser("bit",t,n)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return ra.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!ra.has(t.type)&&!(t.type in oa))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const n in t.choices){const s=parseInt(n,10),r=t.choices[s];if(isNaN(s))throw new Error(`Choice key "${n}" is not a number.`);if(typeof r=="string"&&!ra.has(r)&&!(r in oa))throw new Error(`Choice type "${r}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof aa)&&!ra.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof aa)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in oa)&&!ra.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new W1e(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${gd+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){const e="imports";return this.getContext(e).code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${gd+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(n=>{var s;(s=ra.get(n))===null||s===void 0||s.addAliasedCode(e)})}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(oa).indexOf(this.type)>=0)e=oa[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=oa[this.options.type]:this.options.type instanceof aa&&(t=this.options.type.sizeOf()),e=this.options.length*t}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,n){const s=new aa;return s.type=e,s.varName=t,s.options=n,s.endian=this.endian,this.head?this.head.next=s:this.next=s,this.head=s,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=e.addImport(this.options.assert);e.pushCode(`if (!${n}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const n=e.generateTmpVariable();e.pushCode(`var ${n} = 0;`);const s=(c=0)=>{let u=0;for(let d=c;d<e.bitFields.length;d++){const f=e.bitFields[d].options.length;if(u+f>32)break;u+=f}return u},r=c=>(c<=8?(e.pushCode(`${n} = dataView.getUint8(offset);`),c=8):c<=16?(e.pushCode(`${n} = dataView.getUint16(offset);`),c=16):c<=24?(e.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),c=24):(e.pushCode(`${n} = dataView.getUint32(offset);`),c=32),e.pushCode(`offset += ${c/8};`),c);let o=0;const a=this.endian==="be";let l=0,h=0;e.bitFields.forEach((c,u)=>{let d=c.options.length;if(d>h){if(h){const p=-1>>>32-h;e.pushCode(`${c.varName} = (${n} & 0x${p.toString(16)}) << ${d-h};`),d-=h}o=0,h=l=r(s(u)-h)}const f=a?l-o-d:o,g=-1>>>32-d;e.pushCode(`${c.varName} ${d<c.options.length?"|=":"="} ${n} >> ${f} & 0x${g.toString(16)};`),c.options.length===32&&e.pushCode(`${c.varName} >>>= 0`),c.options.assert&&c.generateAssert(e),c.options.formatter&&c.generateFormatter(e,c.varName,c.options.formatter),o+=d,h-=d}),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable(),s=this.options.encoding,r=s.toLowerCase()==="hex",o='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const a=this.options.length;e.pushCode(`var ${n} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${a});`);const l=`offset - ${n} < ${a} ? offset - 1 : offset`;e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, ${l}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){const a=e.generateOption(this.options.length);e.pushCode(r?`${t} = Array.from(buffer.subarray(offset, offset + ${a}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${n} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset - 1), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${n} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){const n=this.options.readUntil,s=e.generateTmpVariable(),r=e.generateTmpVariable();e.pushCode(`var ${s} = offset;`),e.pushCode(`var ${r} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${r} = dataView.getUint8(offset);`);const o=e.addImport(n);e.pushCode(`if (${o}.call(${e.generateVariable()}, ${r}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${s}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${t} = buffer.subarray(offset);`);else{const n=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${n});`),e.pushCode(`offset += ${n};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),s=this.options.type,r=e.generateTmpVariable(),o=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,h=typeof l=="string";if(h?e.pushCode(`${o} = {};`):e.pushCode(`${o} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${r} = 0; offset < buffer.length; ${r}++) {`):n!==void 0?e.pushCode(`for (var ${r} = offset + ${n}; offset < ${r}; ) {`):e.pushCode(`for (var ${r} = ${t}; ${r} > 0; ${r}--) {`),typeof s=="string")if(ra.get(s)){const c=e.generateTmpVariable();if(e.pushCode(`var ${c} = ${gd+s}(offset, {`),e.useContextVariables){const u=e.generateVariable();e.pushCode(`$parent: ${u},`),e.pushCode(`$root: ${u}.$root,`),!this.options.readUntil&&n===void 0&&e.pushCode(`$index: ${t} - ${r},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${c}.result; offset = ${c}.offset;`),s!==this.alias&&e.addReference(s)}else{const c=Zy[s],u=Yy[s];e.pushCode(`var ${a} = dataView.get${c}(offset, ${u});`),e.pushCode(`offset += ${oa[s]};`)}else if(s instanceof aa){e.pushCode(`var ${a} = {};`);const c=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${c};`),e.pushCode(`${a}.$root = ${c}.$root;`),!this.options.readUntil&&n===void 0&&e.pushCode(`${a}.$index = ${t} - ${r};`)),s.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(h?e.pushCode(`${o}[${a}.${l}] = ${a};`):e.pushCode(`${o}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){const c=this.options.readUntil,u=e.addImport(c);e.pushCode(`while (!${u}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,n){if(typeof n=="string"){const s=e.generateVariable(this.varName);if(ra.has(n)){const r=e.generateTmpVariable();e.pushCode(`var ${r} = ${gd+n}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${s}.$parent,`),e.pushCode(`$root: ${s}.$root,`)),e.pushCode("});"),e.pushCode(`${s} = ${r}.result; offset = ${r}.offset;`),n!==this.alias&&e.addReference(n)}else{const r=Zy[n],o=Yy[n];e.pushCode(`${s} = dataView.get${r}(offset, ${o});`),e.pushCode(`offset += ${oa[n]}`)}}else n instanceof aa&&(e.pushPath(t),n.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),n=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){const s=e.generateVariable();e.pushCode(`${n}.$parent = ${s};`),e.pushCode(`${n}.$root = ${s}.$root;`)}e.pushCode(`switch(${t}) {`);for(const s in this.options.choices){const r=parseInt(s,10),o=this.options.choices[r];e.pushCode(`case ${r}:`),this.generateChoiceCase(e,this.varName,o),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof aa){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const n=e.generateVariable();e.pushCode(`${t}.$parent = ${n};`),e.pushCode(`${t}.$root = ${n}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(ra.has(this.options.type)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${gd+this.options.type}(offset, {`),e.useContextVariables){const s=e.generateVariable();e.pushCode(`$parent: ${s},`),e.pushCode(`$root: ${s}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){const l=this.options.readUntil,h=e.generateTmpVariable(),c=e.generateTmpVariable();e.pushCode(`var ${h} = offset;`),e.pushCode(`var ${c} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${c} = dataView.getUint8(offset);`);const u=e.addImport(l);e.pushCode(`if (${u}.call(${e.generateVariable()}, ${c}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${h}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${n} = buffer.subarray(offset);`);else{const l=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`);const s=e.generateTmpVariable(),r=e.generateTmpVariable(),o=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${n} = ${a}.call(this, ${n}).subarray(0);`),e.pushCode(`var ${s} = buffer;`),e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${o} = dataView;`),e.pushCode(`buffer = ${n};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof aa)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(ra.has(this.options.type)){const l=e.generateTmpVariable();e.pushCode(`var ${l} = ${gd+this.options.type}(0);`),e.pushCode(`${t} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${s};`),e.pushCode(`dataView = ${o};`),e.pushCode(`offset = ${r};`)}generateFormatter(e,t,n){if(typeof n=="function"){const s=e.addImport(n);e.pushCode(`${t} = ${s}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,n=e.generateOption(this.options.offset),s=e.generateTmpVariable(),r=e.generateVariable(this.varName);if(e.pushCode(`var ${s} = offset;`),e.pushCode(`offset = ${n};`),this.options.type instanceof aa){if(e.pushCode(`${r} = {};`),e.useContextVariables){const o=e.generateVariable();e.pushCode(`${r}.$parent = ${o};`),e.pushCode(`${r}.$root = ${o}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}else if(ra.has(this.options.type)){const o=e.generateTmpVariable();if(e.pushCode(`var ${o} = ${gd+this.options.type}(offset, {`),e.useContextVariables){const a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${r} = ${o}.result; offset = ${o}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(oa).indexOf(this.options.type)>=0){const o=Zy[t],a=Yy[t];e.pushCode(`${r} = dataView.get${o}(offset, ${a});`),e.pushCode(`offset += ${oa[t]};`)}e.pushCode(`offset = ${s};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}};var uY={},qP={},Vf={},Jw={};Object.defineProperty(Jw,"__esModule",{value:!0});function GP(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function m9(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function KP(i,e,t){return e&&m9(i.prototype,e),t&&m9(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function z1e(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&oM(i,e)}function jm(i){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jm(i)}function oM(i,e){return oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},oM(i,e)}function H1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ab(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function U1e(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ab(i)}function $1e(i){var e=H1e();return function(){var t=jm(i),n;if(e){var s=jm(this).constructor;n=Reflect.construct(t,arguments,s)}else n=t.apply(this,arguments);return U1e(this,n)}}function j1e(i,e){for(;!Object.prototype.hasOwnProperty.call(i,e)&&(i=jm(i),i!==null););return i}function CS(){return typeof Reflect<"u"&&Reflect.get?CS=Reflect.get.bind():CS=function(i,e,t){var n=j1e(i,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(arguments.length<3?i:t):s.value}},CS.apply(this,arguments)}var _9=function(){function i(){GP(this,i),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return KP(i,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners){for(var n=this.listeners[e],s=0,r=n.length;s<r;s++)if(n[s].callback===t){n.splice(s,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type],n=t.slice(),s=0,r=n.length;s<r;s++){var o=n[s];try{o.callback.call(this,e)}catch(a){Promise.resolve().then(function(){throw a})}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),i}(),ZP=function(i){z1e(t,i);var e=$1e(t);function t(){var n;return GP(this,t),n=e.call(this),n.listeners||_9.call(ab(n)),Object.defineProperty(ab(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(ab(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(ab(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return KP(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),CS(jm(t.prototype),"dispatchEvent",this).call(this,n)}}]),t}(_9),dY=function(){function i(){GP(this,i),Object.defineProperty(this,"signal",{value:new ZP,writable:!0,configurable:!0})}return KP(i,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(n===void 0)if(typeof document>"u")n=new Error("This operation was aborted"),n.name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch{n=new Error("This operation was aborted"),n.name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),i}();typeof Symbol<"u"&&Symbol.toStringTag&&(dY.prototype[Symbol.toStringTag]="AbortController",ZP.prototype[Symbol.toStringTag]="AbortSignal");function q1e(i){return i.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof i.Request=="function"&&!i.Request.prototype.hasOwnProperty("signal")||!i.AbortController}function G1e(i){typeof i=="function"&&(i={fetch:i});var e=i,t=e.fetch,n=e.Request,s=n===void 0?t.Request:n,r=e.AbortController,o=e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=o===void 0?!1:o;if(!q1e({fetch:t,Request:s,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:t,Request:l};var l=s;(l&&!l.prototype.hasOwnProperty("signal")||a)&&(l=function(u,d){var f;d&&d.signal&&(f=d.signal,delete d.signal);var g=new s(u,d);return f&&Object.defineProperty(g,"signal",{writable:!1,enumerable:!1,configurable:!0,value:f}),g},l.prototype=s.prototype);var h=t,c=function(u,d){var f=l&&l.prototype.isPrototypeOf(u)?u.signal:d?d.signal:void 0;if(f){var g;try{g=new DOMException("Aborted","AbortError")}catch{g=new Error("Aborted"),g.name="AbortError"}if(f.aborted)return Promise.reject(g);var p=new Promise(function(m,b){f.addEventListener("abort",function(){return b(g)},{once:!0})});return d&&d.signal&&delete d.signal,Promise.race([p,h(u,d)])}return h(u,d)};return{fetch:c,Request:l}}Jw.AbortController=dY;Jw.AbortSignal=ZP;Jw.abortableFetch=G1e;Object.defineProperty(Vf,"__esModule",{value:!0});Vf.AbortSignal=Vf.AbortController=void 0;const fY=Jw;var Yx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")};let K1e=typeof Yx().AbortController>"u"?fY.AbortController:Yx().AbortController;Vf.AbortController=K1e;let Z1e=typeof Yx().AbortController>"u"?fY.AbortSignal:Yx().AbortSignal;Vf.AbortSignal=Z1e;var YP={};Object.defineProperty(YP,"__esModule",{value:!0});const Y1e=Vf;class Q1e{}class X1e{constructor(){this.signals=new Set,this.abortController=new Y1e.AbortController}addSignal(e=new Q1e){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}YP.default=X1e;var QP={};Object.defineProperty(QP,"__esModule",{value:!0});class J1e{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach(t=>{t(e)})}}QP.default=J1e;var gY=Qv&&Qv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qP,"__esModule",{value:!0});const ewe=Vf,twe=gY(YP),iwe=gY(QP);class Qx{constructor({fill:e,cache:t}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof t!="object")throw new TypeError("must pass a cache object");if(typeof t.get!="function"||typeof t.set!="function"||typeof t.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,s){const r=new twe.default,o=new iwe.default;o.addCallback(s);const a={aborter:r,promise:this.fillCallback(t,r.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(n),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(e,a)}static checkSinglePromise(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(s=>(n(),s),s=>{throw n(),s})}has(e){return this.cache.has(e)}get(e,t,n,s){if(!n&&t instanceof ewe.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const r=this.cache.get(e);return r?r.aborted&&!r.settled?(this.evict(e,r),this.get(e,t,n,s)):r.settled?r.promise:(r.aborter.addSignal(n),r.statusReporter.addCallback(s),Qx.checkSinglePromise(r.promise,n)):(this.fill(e,t,n,s),Qx.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}qP.default=Qx;var nwe=Qv&&Qv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(uY,"__esModule",{value:!0});const swe=nwe(qP);var OL=uY.default=swe.default;let rwe=class{constructor(i={}){if(!(i.maxSize&&i.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=i.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(i,e){this.cache.set(i,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i)){const e=this.oldCache.get(i);return this.oldCache.delete(i),this._set(i,e),e}}set(i,e){return this.cache.has(i)?this.cache.set(i,e):this._set(i,e),this}has(i){return this.cache.has(i)||this.oldCache.has(i)}peek(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i))return this.oldCache.get(i)}delete(i){const e=this.cache.delete(i);return e&&this._size--,this.oldCache.delete(i)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[i]of this)yield i}*values(){for(const[,i]of this)yield i}*[Symbol.iterator](){for(const i of this.cache)yield i;for(const i of this.oldCache){const[e]=i;this.cache.has(e)||(yield i)}}get size(){let i=0;for(const e of this.oldCache.keys())this.cache.has(e)||i++;return this._size+i}};var owe=rwe;const XP=pg(owe);class Gc{constructor(e,t){this.ranges=arguments.length===2?[{min:e,max:t}]:0 in e?Object.assign({},e):[e]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(e){for(let t=0;t<this.ranges.length;t+=1){const n=this.ranges[t];if(n.min<=e&&n.max>=e)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new Gc(e.min,e.max))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const t=this.getRanges().concat(e.getRanges()).sort(this.rangeOrder),n=[];let s=t[0];for(let r=1;r<t.length;r+=1){const o=t[r];o.min()>s.max()+1?(n.push(s),s=o):o.max()>s.max()&&(s=new Gc(s.min(),o.max()))}return n.push(s),n.length===1?n[0]:new Gc(n)}intersection(e){let t=this,n=e;const s=this.ranges(),r=n.ranges(),o=s.length,a=r.length;let l=0,h=0;const c=[];for(;l<o&&h<a;){t=s[l],n=r[h];const u=Math.max(t.min(),n.min()),d=Math.min(t.max(),n.max());d>=u&&c.push(new Gc(u,d)),t.max()>n.max()?h+=1:l+=1}if(c.length===0)throw new Error("found range of length 0");return c.length===1?c[0]:new Gc(c)}coverage(){let e=0;const t=this.ranges();for(const n of t)e+=n.max()-n.min()+1;return e}rangeOrder(e,t){let n=e,s=t;return arguments.length<2&&(s=n,n=this),n.min()<s.min()?-1:n.min()>s.min()?1:n.max()<s.max()?-1:s.max()>n.max()?1:0}}function j0(i){let e=i.length;for(;--e>=0;)i[e]=0}const awe=3,lwe=258,pY=29,hwe=256,cwe=hwe+1+pY,mY=30,uwe=512,dwe=new Array((cwe+2)*2);j0(dwe);const fwe=new Array(mY*2);j0(fwe);const gwe=new Array(uwe);j0(gwe);const pwe=new Array(lwe-awe+1);j0(pwe);const mwe=new Array(pY);j0(mwe);const _we=new Array(mY);j0(_we);const bwe=(i,e,t,n)=>{let s=i&65535|0,r=i>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0};var aM=bwe;const vwe=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},wwe=new Uint32Array(vwe()),ywe=(i,e,t,n)=>{const s=wwe,r=n+t;i^=-1;for(let o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1};var ol=ywe,lM={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},JP={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const Cwe=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Swe=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Cwe(t,n)&&(i[n]=t[n])}}return i},xwe=i=>{let e=0;for(let n=0,s=i.length;n<s;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,s=0,r=i.length;n<r;n++){let o=i[n];t.set(o,s),s+=o.length}return t},_Y={assign:Swe,flattenChunks:xwe};let bY=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{bY=!1}const n1=new Uint8Array(256);for(let i=0;i<256;i++)n1[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;n1[254]=n1[254]=1;var Dwe=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const kwe=(i,e)=>{if(e<65534&&i.subarray&&bY)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t};var Lwe=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,s;const r=new Array(t*2);for(s=0,n=0;n<t;){let o=i[n++];if(o<128){r[s++]=o;continue}let a=n1[o];if(a>4){r[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<t;)o=o<<6|i[n++]&63,a--;if(a>1){r[s++]=65533;continue}o<65536?r[s++]=o:(o-=65536,r[s++]=55296|o>>10&1023,r[s++]=56320|o&1023)}return kwe(r,s)},Ewe=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+n1[i[t]]>e?t:e},hM={string2buf:Dwe,buf2string:Lwe,utf8border:Ewe};function Awe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Iwe=Awe;const Qy=16209,Twe=16191;var Nwe=function(i,e){let t,n,s,r,o,a,l,h,c,u,d,f,g,p,m,b,_,w,y,x,L,S,k,D;const T=i.state;t=i.next_in,k=i.input,n=t+(i.avail_in-5),s=i.next_out,D=i.output,r=s-(e-i.avail_out),o=s+(i.avail_out-257),a=T.dmax,l=T.wsize,h=T.whave,c=T.wnext,u=T.window,d=T.hold,f=T.bits,g=T.lencode,p=T.distcode,m=(1<<T.lenbits)-1,b=(1<<T.distbits)-1;e:do{f<15&&(d+=k[t++]<<f,f+=8,d+=k[t++]<<f,f+=8),_=g[d&m];t:for(;;){if(w=_>>>24,d>>>=w,f-=w,w=_>>>16&255,w===0)D[s++]=_&65535;else if(w&16){y=_&65535,w&=15,w&&(f<w&&(d+=k[t++]<<f,f+=8),y+=d&(1<<w)-1,d>>>=w,f-=w),f<15&&(d+=k[t++]<<f,f+=8,d+=k[t++]<<f,f+=8),_=p[d&b];i:for(;;){if(w=_>>>24,d>>>=w,f-=w,w=_>>>16&255,w&16){if(x=_&65535,w&=15,f<w&&(d+=k[t++]<<f,f+=8,f<w&&(d+=k[t++]<<f,f+=8)),x+=d&(1<<w)-1,x>a){i.msg="invalid distance too far back",T.mode=Qy;break e}if(d>>>=w,f-=w,w=s-r,x>w){if(w=x-w,w>h&&T.sane){i.msg="invalid distance too far back",T.mode=Qy;break e}if(L=0,S=u,c===0){if(L+=l-w,w<y){y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}}else if(c<w){if(L+=l+c-w,w-=c,w<y){y-=w;do D[s++]=u[L++];while(--w);if(L=0,c<y){w=c,y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}}}else if(L+=c-w,w<y){y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}for(;y>2;)D[s++]=S[L++],D[s++]=S[L++],D[s++]=S[L++],y-=3;y&&(D[s++]=S[L++],y>1&&(D[s++]=S[L++]))}else{L=s-x;do D[s++]=D[L++],D[s++]=D[L++],D[s++]=D[L++],y-=3;while(y>2);y&&(D[s++]=D[L++],y>1&&(D[s++]=D[L++]))}}else if(w&64){i.msg="invalid distance code",T.mode=Qy;break e}else{_=p[(_&65535)+(d&(1<<w)-1)];continue i}break}}else if(w&64)if(w&32){T.mode=Twe;break e}else{i.msg="invalid literal/length code",T.mode=Qy;break e}else{_=g[(_&65535)+(d&(1<<w)-1)];continue t}break}}while(t<n&&s<o);y=f>>3,t-=y,f-=y<<3,d&=(1<<f)-1,i.next_in=t,i.next_out=s,i.avail_in=t<n?5+(n-t):5-(t-n),i.avail_out=s<o?257+(o-s):257-(s-o),T.hold=d,T.bits=f};const ip=15,b9=852,v9=592,w9=0,aA=1,y9=2,Mwe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rwe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Owe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pwe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Fwe=(i,e,t,n,s,r,o,a)=>{const l=a.bits;let h=0,c=0,u=0,d=0,f=0,g=0,p=0,m=0,b=0,_=0,w,y,x,L,S,k=null,D;const T=new Uint16Array(ip+1),M=new Uint16Array(ip+1);let j=null,$,ie,pe;for(h=0;h<=ip;h++)T[h]=0;for(c=0;c<n;c++)T[e[t+c]]++;for(f=l,d=ip;d>=1&&T[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&T[u]===0;u++);for(f<u&&(f=u),m=1,h=1;h<=ip;h++)if(m<<=1,m-=T[h],m<0)return-1;if(m>0&&(i===w9||d!==1))return-1;for(M[1]=0,h=1;h<ip;h++)M[h+1]=M[h]+T[h];for(c=0;c<n;c++)e[t+c]!==0&&(o[M[e[t+c]]++]=c);if(i===w9?(k=j=o,D=20):i===aA?(k=Mwe,j=Rwe,D=257):(k=Owe,j=Pwe,D=0),_=0,c=0,h=u,S=r,g=f,p=0,x=-1,b=1<<f,L=b-1,i===aA&&b>b9||i===y9&&b>v9)return 1;for(;;){$=h-p,o[c]+1<D?(ie=0,pe=o[c]):o[c]>=D?(ie=j[o[c]-D],pe=k[o[c]-D]):(ie=32+64,pe=0),w=1<<h-p,y=1<<g,u=y;do y-=w,s[S+(_>>p)+y]=$<<24|ie<<16|pe|0;while(y!==0);for(w=1<<h-1;_&w;)w>>=1;if(w!==0?(_&=w-1,_+=w):_=0,c++,--T[h]===0){if(h===d)break;h=e[t+o[c]]}if(h>f&&(_&L)!==x){for(p===0&&(p=f),S+=u,g=h-p,m=1<<g;g+p<d&&(m-=T[g+p],!(m<=0));)g++,m<<=1;if(b+=1<<g,i===aA&&b>b9||i===y9&&b>v9)return 1;x=_&L,s[x]=f<<24|g<<16|S-r|0}}return _!==0&&(s[S+_]=h-p<<24|64<<16|0),a.bits=f,0};var Vb=Fwe;const Bwe=0,vY=1,wY=2,{Z_FINISH:C9,Z_BLOCK:Vwe,Z_TREES:Xy,Z_OK:Wf,Z_STREAM_END:Wwe,Z_NEED_DICT:zwe,Z_STREAM_ERROR:Pa,Z_DATA_ERROR:yY,Z_MEM_ERROR:CY,Z_BUF_ERROR:Hwe,Z_DEFLATED:S9}=JP,PL=16180,x9=16181,D9=16182,k9=16183,L9=16184,E9=16185,A9=16186,I9=16187,T9=16188,N9=16189,Xx=16190,gh=16191,lA=16192,M9=16193,hA=16194,R9=16195,O9=16196,P9=16197,F9=16198,Jy=16199,eC=16200,B9=16201,V9=16202,W9=16203,z9=16204,H9=16205,cA=16206,U9=16207,$9=16208,Ji=16209,SY=16210,xY=16211,Uwe=852,$we=592,jwe=15,qwe=jwe,j9=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Gwe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vg=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<PL||e.mode>xY?1:0},DY=i=>{if(vg(i))return Pa;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=PL,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Uwe),e.distcode=e.distdyn=new Int32Array($we),e.sane=1,e.back=-1,Wf},kY=i=>{if(vg(i))return Pa;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,DY(i)},LY=(i,e)=>{let t;if(vg(i))return Pa;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Pa:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,kY(i))},EY=(i,e)=>{if(!i)return Pa;const t=new Gwe;i.state=t,t.strm=i,t.window=null,t.mode=PL;const n=LY(i,e);return n!==Wf&&(i.state=null),n},Kwe=i=>EY(i,qwe);let q9=!0,uA,dA;const Zwe=i=>{if(q9){uA=new Int32Array(512),dA=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(Vb(vY,i.lens,0,288,uA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;Vb(wY,i.lens,0,32,dA,0,i.work,{bits:5}),q9=!1}i.lencode=uA,i.lenbits=9,i.distcode=dA,i.distbits=5},AY=(i,e,t,n)=>{let s;const r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(t-n,t-n+s),r.wnext),n-=s,n?(r.window.set(e.subarray(t-n,t),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},Ywe=(i,e)=>{let t,n,s,r,o,a,l,h,c,u,d,f,g,p,m=0,b,_,w,y,x,L,S,k;const D=new Uint8Array(4);let T,M;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vg(i)||!i.output||!i.input&&i.avail_in!==0)return Pa;t=i.state,t.mode===gh&&(t.mode=lA),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,h=t.hold,c=t.bits,u=a,d=l,k=Wf;e:for(;;)switch(t.mode){case PL:if(t.wrap===0){t.mode=lA;break}for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.wrap&2&&h===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=h&255,D[1]=h>>>8&255,t.check=ol(t.check,D,2,0),h=0,c=0,t.mode=x9;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((h&255)<<8)+(h>>8))%31){i.msg="incorrect header check",t.mode=Ji;break}if((h&15)!==S9){i.msg="unknown compression method",t.mode=Ji;break}if(h>>>=4,c-=4,S=(h&15)+8,t.wbits===0&&(t.wbits=S),S>15||S>t.wbits){i.msg="invalid window size",t.mode=Ji;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=h&512?N9:gh,h=0,c=0;break;case x9:for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.flags=h,(t.flags&255)!==S9){i.msg="unknown compression method",t.mode=Ji;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=Ji;break}t.head&&(t.head.text=h>>8&1),t.flags&512&&t.wrap&4&&(D[0]=h&255,D[1]=h>>>8&255,t.check=ol(t.check,D,2,0)),h=0,c=0,t.mode=D9;case D9:for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.head&&(t.head.time=h),t.flags&512&&t.wrap&4&&(D[0]=h&255,D[1]=h>>>8&255,D[2]=h>>>16&255,D[3]=h>>>24&255,t.check=ol(t.check,D,4,0)),h=0,c=0,t.mode=k9;case k9:for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.head&&(t.head.xflags=h&255,t.head.os=h>>8),t.flags&512&&t.wrap&4&&(D[0]=h&255,D[1]=h>>>8&255,t.check=ol(t.check,D,2,0)),h=0,c=0,t.mode=L9;case L9:if(t.flags&1024){for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.length=h,t.head&&(t.head.extra_len=h),t.flags&512&&t.wrap&4&&(D[0]=h&255,D[1]=h>>>8&255,t.check=ol(t.check,D,2,0)),h=0,c=0}else t.head&&(t.head.extra=null);t.mode=E9;case E9:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+f),S)),t.flags&512&&t.wrap&4&&(t.check=ol(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=A9;case A9:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=ol(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=I9;case I9:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=ol(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=T9;case T9:if(t.flags&512){for(;c<16;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.wrap&4&&h!==(t.check&65535)){i.msg="header crc mismatch",t.mode=Ji;break}h=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=gh;break;case N9:for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}i.adler=t.check=j9(h),h=0,c=0,t.mode=Xx;case Xx:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,zwe;i.adler=t.check=1,t.mode=gh;case gh:if(e===Vwe||e===Xy)break e;case lA:if(t.last){h>>>=c&7,c-=c&7,t.mode=cA;break}for(;c<3;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}switch(t.last=h&1,h>>>=1,c-=1,h&3){case 0:t.mode=M9;break;case 1:if(Zwe(t),t.mode=Jy,e===Xy){h>>>=2,c-=2;break e}break;case 2:t.mode=O9;break;case 3:i.msg="invalid block type",t.mode=Ji}h>>>=2,c-=2;break;case M9:for(h>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if((h&65535)!==(h>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Ji;break}if(t.length=h&65535,h=0,c=0,t.mode=hA,e===Xy)break e;case hA:t.mode=R9;case R9:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;s.set(n.subarray(r,r+f),o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=gh;break;case O9:for(;c<14;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.nlen=(h&31)+257,h>>>=5,c-=5,t.ndist=(h&31)+1,h>>>=5,c-=5,t.ncode=(h&15)+4,h>>>=4,c-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Ji;break}t.have=0,t.mode=P9;case P9:for(;t.have<t.ncode;){for(;c<3;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.lens[j[t.have++]]=h&7,h>>>=3,c-=3}for(;t.have<19;)t.lens[j[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},k=Vb(Bwe,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid code lengths set",t.mode=Ji;break}t.have=0,t.mode=F9;case F9:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[h&(1<<t.lenbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(w<16)h>>>=b,c-=b,t.lens[t.have++]=w;else{if(w===16){for(M=b+2;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(h>>>=b,c-=b,t.have===0){i.msg="invalid bit length repeat",t.mode=Ji;break}S=t.lens[t.have-1],f=3+(h&3),h>>>=2,c-=2}else if(w===17){for(M=b+3;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=b,c-=b,S=0,f=3+(h&7),h>>>=3,c-=3}else{for(M=b+7;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=b,c-=b,S=0,f=11+(h&127),h>>>=7,c-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Ji;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===Ji)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Ji;break}if(t.lenbits=9,T={bits:t.lenbits},k=Vb(vY,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid literal/lengths set",t.mode=Ji;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},k=Vb(wY,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,k){i.msg="invalid distances set",t.mode=Ji;break}if(t.mode=Jy,e===Xy)break e;case Jy:t.mode=eC;case eC:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,Nwe(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,h=t.hold,c=t.bits,t.mode===gh&&(t.back=-1);break}for(t.back=0;m=t.lencode[h&(1<<t.lenbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(_&&!(_&240)){for(y=b,x=_,L=w;m=t.lencode[L+((h&(1<<y+x)-1)>>y)],b=m>>>24,_=m>>>16&255,w=m&65535,!(y+b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=y,c-=y,t.back+=y}if(h>>>=b,c-=b,t.back+=b,t.length=w,_===0){t.mode=H9;break}if(_&32){t.back=-1,t.mode=gh;break}if(_&64){i.msg="invalid literal/length code",t.mode=Ji;break}t.extra=_&15,t.mode=B9;case B9:if(t.extra){for(M=t.extra;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=V9;case V9:for(;m=t.distcode[h&(1<<t.distbits)-1],b=m>>>24,_=m>>>16&255,w=m&65535,!(b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(!(_&240)){for(y=b,x=_,L=w;m=t.distcode[L+((h&(1<<y+x)-1)>>y)],b=m>>>24,_=m>>>16&255,w=m&65535,!(y+b<=c);){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}h>>>=y,c-=y,t.back+=y}if(h>>>=b,c-=b,t.back+=b,_&64){i.msg="invalid distance code",t.mode=Ji;break}t.offset=w,t.extra=_&15,t.mode=W9;case W9:if(t.extra){for(M=t.extra;c<M;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Ji;break}t.mode=z9;case z9:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Ji;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=eC);break;case H9:if(l===0)break e;s[o++]=t.length,l--,t.mode=eC;break;case cA:if(t.wrap){for(;c<32;){if(a===0)break e;a--,h|=n[r++]<<c,c+=8}if(d-=l,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ol(t.check,s,d,o-d):aM(t.check,s,d,o-d)),d=l,t.wrap&4&&(t.flags?h:j9(h))!==t.check){i.msg="incorrect data check",t.mode=Ji;break}h=0,c=0}t.mode=U9;case U9:if(t.wrap&&t.flags){for(;c<32;){if(a===0)break e;a--,h+=n[r++]<<c,c+=8}if(t.wrap&4&&h!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=Ji;break}h=0,c=0}t.mode=$9;case $9:k=Wwe;break e;case Ji:k=yY;break e;case SY:return CY;case xY:default:return Pa}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=h,t.bits=c,(t.wsize||d!==i.avail_out&&t.mode<Ji&&(t.mode<cA||e!==C9))&&AY(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ol(t.check,s,d,i.next_out-d):aM(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===gh?128:0)+(t.mode===Jy||t.mode===hA?256:0),(u===0&&d===0||e===C9)&&k===Wf&&(k=Hwe),k},Qwe=i=>{if(vg(i))return Pa;let e=i.state;return e.window&&(e.window=null),i.state=null,Wf},Xwe=(i,e)=>{if(vg(i))return Pa;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Wf):Pa},Jwe=(i,e)=>{const t=e.length;let n,s,r;return vg(i)||(n=i.state,n.wrap!==0&&n.mode!==Xx)?Pa:n.mode===Xx&&(s=1,s=aM(s,e,t,0),s!==n.check)?yY:(r=AY(i,e,t,t),r?(n.mode=SY,CY):(n.havedict=1,Wf))};var eye=kY,tye=LY,iye=DY,nye=Kwe,sye=EY,rye=Ywe,oye=Qwe,aye=Xwe,lye=Jwe,hye="pako inflate (from Nodeca project)",Nh={inflateReset:eye,inflateReset2:tye,inflateResetKeep:iye,inflateInit:nye,inflateInit2:sye,inflate:rye,inflateEnd:oye,inflateGetHeader:aye,inflateSetDictionary:lye,inflateInfo:hye};function cye(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uye=cye;const IY=Object.prototype.toString,{Z_NO_FLUSH:dye,Z_FINISH:fye,Z_OK:s1,Z_STREAM_END:fA,Z_NEED_DICT:gA,Z_STREAM_ERROR:gye,Z_DATA_ERROR:G9,Z_MEM_ERROR:pye}=JP;function ey(i){this.options=_Y.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Iwe,this.strm.avail_out=0;let t=Nh.inflateInit2(this.strm,e.windowBits);if(t!==s1)throw new Error(lM[t]);if(this.header=new uye,Nh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=hM.string2buf(e.dictionary):IY.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Nh.inflateSetDictionary(this.strm,e.dictionary),t!==s1)))throw new Error(lM[t])}ey.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?fye:dye,IY.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),r=Nh.inflate(t,o),r===gA&&s&&(r=Nh.inflateSetDictionary(t,s),r===s1?r=Nh.inflate(t,o):r===G9&&(r=gA));t.avail_in>0&&r===fA&&t.state.wrap>0&&i[t.next_in]!==0;)Nh.inflateReset(t),r=Nh.inflate(t,o);switch(r){case gye:case G9:case gA:case pye:return this.onEnd(r),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||r===fA))if(this.options.to==="string"){let l=hM.utf8border(t.output,t.next_out),h=t.next_out-l,c=hM.buf2string(t.output,l);t.next_out=h,t.avail_out=n-h,h&&t.output.set(t.output.subarray(l,l+h),0),this.onData(c)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===s1&&a===0)){if(r===fA)return r=Nh.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};ey.prototype.onData=function(i){this.chunks.push(i)};ey.prototype.onEnd=function(i){i===s1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_Y.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function e5(i,e){const t=new ey(e);if(t.push(i),t.err)throw t.msg||lM[t.err];return t.result}function mye(i,e){return e=e||{},e.raw=!0,e5(i,e)}var _ye=ey,bye=e5,vye=mye,wye=e5,yye=JP,Cye={Inflate:_ye,inflate:bye,inflateRaw:vye,ungzip:wye,constants:yye};const{Inflate:X$e,inflate:J$e,inflateRaw:Sye,ungzip:eje}=Cye;var xye=Sye;function Dye(i){return xye(i.subarray(2))}let kye=class extends Error{constructor(i){super(i),this.code="ERR_ABORTED"}};function Lye(i){i.sort((s,r)=>Number(s.offset)-Number(r.offset));const e=[];let t,n;for(const s of i)t&&n&&Number(s.offset)-n<=2e3?(t.length=BigInt(Number(t.length)+Number(s.length)-n+Number(s.offset)),t.blocks.push(s)):e.push(t={blocks:[s],length:s.length,offset:s.offset}),n=Number(t.offset)+Number(t.length);return e}function tC(i){if(i&&i.aborted)if(typeof DOMException>"u"){const e=new kye("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const Eye=1,Aye=2,Iye=3;function pA(i,e,t,n){return i<n&&e>=t}function Tye(i){const e=i?"big":"little",t=new ui().endianess(e).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new ui().endianess(e).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new ui().endianess(e).array("blocksToFetch",{length:"cnt",type:new ui().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new ui().array("recurOffsets",{length:"cnt",type:new ui().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),s=new ui().endianess(e).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new ui().endianess(e).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[Iye]:new ui().array("items",{length:"itemCount",type:new ui().floatle("score")}),[Aye]:new ui().array("items",{length:"itemCount",type:new ui().endianess(e).int32("start").floatle("score")}),[Eye]:new ui().array("items",{length:"itemCount",type:new ui().endianess(e).int32("start").int32("end").floatle("score")})}}),bigBedParser:s,summaryParser:t,leafParser:n}}class TY{constructor(e,t,n,s,r,o){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=n,this.isBigEndian=s,this.isCompressed=r,this.blockType=o,this.featureCache=new OL({cache:new XP({maxSize:1e3}),fill:async(l,h)=>{const c=Number(l.length),u=Number(l.offset),{buffer:d}=await this.bbi.read(ps.Buffer.alloc(c),0,c,u,{signal:h});return d}}),!(n>=0))throw new Error("invalid cirTreeOffset!");const a=Tye(s);this.leafParser=a.leafParser,this.bigBedParser=a.bigBedParser}async readWigData(e,t,n,s,r){try{const{refsByName:o,bbi:a,cirTreeOffset:l,isBigEndian:h}=this,c=o[e];c===void 0&&s.complete();const u={chrId:c,start:t,end:n};this.cirTreePromise||(this.cirTreePromise=a.read(ps.Buffer.alloc(48),0,48,Number(l),r));const{buffer:d}=await this.cirTreePromise,f=h?d.readUInt32BE(4):d.readUInt32LE(4);let g=[],p=0;const m=(y,x,L)=>{try{const S=y.subarray(x),k=this.leafParser.parse(S);if(k.blocksToFetch&&(g=g.concat(k.blocksToFetch.filter(D=>b(D)).map(D=>({offset:D.blockOffset,length:D.blockSize})))),k.recurOffsets){const D=k.recurOffsets.filter(T=>b(T)).map(T=>Number(T.blockOffset));D.length>0&&w(D,L+1)}}catch(S){s.error(S)}},b=y=>{const{startChrom:x,startBase:L,endChrom:S,endBase:k}=y;return(x<c||x===c&&L<=n)&&(S>c||S===c&&k>=t)},_=async(y,x,L)=>{try{const S=x.max()-x.min(),k=x.min(),D=await this.featureCache.get(`${S}_${k}`,{length:S,offset:k},r==null?void 0:r.signal);for(const T of y)x.contains(T)&&(m(D,T-k,L),p-=1,p===0&&this.readFeatures(s,g,{...r,request:u}))}catch(S){s.error(S)}},w=(y,x)=>{try{p+=y.length;const L=4+Number(f)*32;let S=new Gc(y[0],y[0]+L);for(let k=1;k<y.length;k+=1){const D=new Gc(y[k],y[k]+L);S=S.union(D)}S.getRanges().map(k=>_(y,k,x))}catch(L){s.error(L)}};return w([Number(l)+48],1)}catch(o){s.error(o)}}parseSummaryBlock(e,t,n){const s=[];let r=t;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;r<e.byteLength;){const a=o.getUint32(r,!0);r+=4;const l=o.getUint32(r,!0);r+=4;const h=o.getUint32(r,!0);r+=4;const c=o.getUint32(r,!0);r+=4;const u=o.getFloat32(r,!0);r+=4;const d=o.getFloat32(r,!0);r+=4;const f=o.getFloat32(r,!0);r+=4,r+=4,(!n||a===n.chrId&&pA(l,h,n.start,n.end))&&s.push({start:l,end:h,maxScore:d,minScore:u,summary:!0,score:f/(c||1)})}return s}parseBigBedBlock(e,t,n,s){const r=[];let o=t;for(;o<e.byteLength;){const a=this.bigBedParser.parse(e.subarray(o));r.push({...a,uniqueId:`bb-${n+o}`}),o+=a.offset}return s?r.filter(a=>pA(a.start,a.end,s.start,s.end)):r}parseBigWigBlock(e,t,n){const s=e.subarray(t),r=new DataView(s.buffer,s.byteOffset,s.length);let o=0;o+=4;const a=r.getInt32(o,!0);o+=8;const l=r.getUint32(o,!0);o+=4;const h=r.getUint32(o,!0);o+=4;const c=r.getUint8(o);o+=2;const u=r.getUint16(o,!0);o+=2;const d=new Array(u);switch(c){case 1:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getInt32(o,!0);o+=4;const m=r.getFloat32(o,!0);o+=4,d[f]={start:g,end:p,score:m}}break}case 2:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getFloat32(o,!0);o+=4,d[f]={score:p,start:g,end:g+h}}break}case 3:{for(let f=0;f<u;f++){const g=r.getFloat32(o,!0);o+=4;const p=a+f*l;d[f]={score:g,start:p,end:p+h}}break}}return n?d.filter(f=>pA(f.start,f.end,n.start,n.end)):d}async readFeatures(e,t,n={}){try{const{blockType:s,isCompressed:r}=this,{signal:o,request:a}=n,l=Lye(t);tC(o),await Promise.all(l.map(async h=>{tC(o);const{length:c,offset:u}=h,d=await this.featureCache.get(`${c}_${u}`,h,o);for(const f of h.blocks){tC(o);let g=Number(f.offset)-Number(h.offset),p=d;switch(r&&(p=Dye(d.subarray(g)),g=0),tC(o),s){case"summary":{e.next(this.parseSummaryBlock(p,g,a));break}case"bigwig":{e.next(this.parseBigWigBlock(p,g,a));break}case"bigbed":{e.next(this.parseBigBedBlock(p,g,Number(f.offset)*(1<<8),a));break}default:console.warn(`Don't know what to do with ${s}`)}}})),e.complete()}catch(s){e.error(s)}}}var cM=function(i,e){return cM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},cM(i,e)};function t5(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cM(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Nye(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})}function NY(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(c){return l([h,c])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(r=h[0]&2?s.return:h[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,h[1])).done)return r;switch(s=0,r&&(h=[h[0]&2,r.value]),h[0]){case 0:case 1:r=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!r||h[1]>r[0]&&h[1]<r[3])){t.label=h[1];break}if(h[0]===6&&t.label<r[1]){t.label=r[1],r=h;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(h);break}r[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(i,t)}catch(c){h=[6,c],s=0}finally{n=r=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function r1(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uM(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function dM(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function nm(i){return this instanceof nm?(this.v=i,this):new nm(i)}function Mye(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(g,p){r.push([d,f,g,p])>1||a(d,f)})})}function a(d,f){try{l(n[d](f))}catch(g){u(r[0][3],g)}}function l(d){d.value instanceof nm?Promise.resolve(d.value.v).then(h,c):u(r[0][2],d)}function h(d){a("next",d)}function c(d){a("throw",d)}function u(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function Rye(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof r1=="function"?r1(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(o){return new Promise(function(a,l){o=i[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(h){r({value:h,done:a})},o)}}function $n(i){return typeof i=="function"}function MY(i){var e=function(n){Error.call(n),n.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var mA=MY(function(i){return function(e){i(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function K9(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var i5=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,n,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=r1(o),l=a.next();!l.done;l=a.next()){var h=l.value;h.remove(this)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if($n(c))try{c()}catch(p){r=p instanceof mA?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=r1(u),f=d.next();!f.done;f=d.next()){var g=f.value;try{Z9(g)}catch(p){r=r??[],p instanceof mA?r=dM(dM([],uM(r)),uM(p.errors)):r.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}}if(r)throw new mA(r)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)Z9(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&K9(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&K9(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}();i5.EMPTY;function RY(i){return i instanceof i5||i&&"closed"in i&&$n(i.remove)&&$n(i.add)&&$n(i.unsubscribe)}function Z9(i){$n(i)?i():i.unsubscribe()}var OY={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Oye={setTimeout:function(i,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,dM([i,e],uM(t)))},clearTimeout:function(i){return clearTimeout(i)},delegate:void 0};function PY(i){Oye.setTimeout(function(){throw i})}function Y9(){}function Pye(i){i()}var n5=function(i){t5(e,i);function e(t){var n=i.call(this)||this;return n.isStopped=!1,t?(n.destination=t,RY(t)&&t.add(n)):n.destination=Wye,n}return e.create=function(t,n,s){return new Jx(t,n,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(i5),Fye=Function.prototype.bind;function _A(i,e){return Fye.call(i,e)}var Bye=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){iC(n)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){iC(n)}else iC(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){iC(t)}},i}(),Jx=function(i){t5(e,i);function e(t,n,s){var r=i.call(this)||this,o;if($n(t)||!t)o={next:t??void 0,error:n??void 0,complete:s??void 0};else{var a;r&&OY.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&_A(t.next,a),error:t.error&&_A(t.error,a),complete:t.complete&&_A(t.complete,a)}):o=t}return r.destination=new Bye(o),r}return e}(n5);function iC(i){PY(i)}function Vye(i){throw i}var Wye={closed:!0,next:Y9,error:Vye,complete:Y9},s5=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function FY(i){return i}function zye(i){return i.length===0?FY:i.length===1?i[0]:function(e){return i.reduce(function(t,n){return n(t)},e)}}var ea=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,n){var s=this,r=Uye(e)?e:new Jx(e,t,n);return Pye(function(){var o=s,a=o.operator,l=o.source;r.add(a?a.call(r,l):l?s._subscribe(r):s._trySubscribe(r))}),r},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var n=this;return t=Q9(t),new t(function(s,r){var o=new Jx({next:function(a){try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});n.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[s5]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zye(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=Q9(e),new e(function(n,s){var r;t.subscribe(function(o){return r=o},function(o){return s(o)},function(){return n(r)})})},i.create=function(e){return new i(e)},i}();function Q9(i){var e;return(e=i??OY.Promise)!==null&&e!==void 0?e:Promise}function Hye(i){return i&&$n(i.next)&&$n(i.error)&&$n(i.complete)}function Uye(i){return i&&i instanceof n5||Hye(i)&&RY(i)}function $ye(i){return $n(i==null?void 0:i.lift)}function q0(i){return function(e){if($ye(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function o1(i,e,t,n,s){return new jye(i,e,t,n,s)}var jye=function(i){t5(e,i);function e(t,n,s,r,o,a){var l=i.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(h){try{n(h)}catch(c){t.error(c)}}:i.prototype._next,l._error=r?function(h){try{r(h)}catch(c){t.error(c)}finally{this.unsubscribe()}}:i.prototype._error,l._complete=s?function(){try{s()}catch(h){t.error(h)}finally{this.unsubscribe()}}:i.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;i.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(n5),qye=new ea(function(i){return i.complete()});function Gye(i){return i&&$n(i.schedule)}function BY(i){return i[i.length-1]}function Kye(i){return Gye(BY(i))?i.pop():void 0}function Zye(i,e){return typeof BY(i)=="number"?i.pop():e}var VY=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function WY(i){return $n(i==null?void 0:i.then)}function zY(i){return $n(i[s5])}function HY(i){return Symbol.asyncIterator&&$n(i==null?void 0:i[Symbol.asyncIterator])}function UY(i){return new TypeError("You provided "+(i!==null&&typeof i=="object"?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Yye(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $Y=Yye();function jY(i){return $n(i==null?void 0:i[$Y])}function qY(i){return Mye(this,arguments,function(){var e,t,n,s;return NY(this,function(r){switch(r.label){case 0:e=i.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,nm(e.read())];case 3:return t=r.sent(),n=t.value,s=t.done,s?[4,nm(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,nm(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function GY(i){return $n(i==null?void 0:i.getReader)}function G0(i){if(i instanceof ea)return i;if(i!=null){if(zY(i))return Qye(i);if(VY(i))return Xye(i);if(WY(i))return Jye(i);if(HY(i))return KY(i);if(jY(i))return eCe(i);if(GY(i))return tCe(i)}throw UY(i)}function Qye(i){return new ea(function(e){var t=i[s5]();if($n(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Xye(i){return new ea(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function Jye(i){return new ea(function(e){i.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,PY)})}function eCe(i){return new ea(function(e){var t,n;try{for(var s=r1(i),r=s.next();!r.done;r=s.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}e.complete()})}function KY(i){return new ea(function(e){iCe(i,e).catch(function(t){return e.error(t)})})}function tCe(i){return KY(qY(i))}function iCe(i,e){var t,n,s,r;return Nye(this,void 0,void 0,function(){var o,a;return NY(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=Rye(i),l.label=1;case 1:return[4,t.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(r=t.return)?[4,r.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function cu(i,e,t,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var r=e.schedule(function(){t(),s?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(r),!s)return r}function ZY(i,e){return e===void 0&&(e=0),q0(function(t,n){t.subscribe(o1(n,function(s){return cu(n,i,function(){return n.next(s)},e)},function(){return cu(n,i,function(){return n.complete()},e)},function(s){return cu(n,i,function(){return n.error(s)},e)}))})}function YY(i,e){return e===void 0&&(e=0),q0(function(t,n){n.add(i.schedule(function(){return t.subscribe(n)},e))})}function nCe(i,e){return G0(i).pipe(YY(e),ZY(e))}function sCe(i,e){return G0(i).pipe(YY(e),ZY(e))}function rCe(i,e){return new ea(function(t){var n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function oCe(i,e){return new ea(function(t){var n;return cu(t,e,function(){n=i[$Y](),cu(t,e,function(){var s,r,o;try{s=n.next(),r=s.value,o=s.done}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),function(){return $n(n==null?void 0:n.return)&&n.return()}})}function QY(i,e){if(!i)throw new Error("Iterable cannot be null");return new ea(function(t){cu(t,e,function(){var n=i[Symbol.asyncIterator]();cu(t,e,function(){n.next().then(function(s){s.done?t.complete():t.next(s.value)})},0,!0)})})}function aCe(i,e){return QY(qY(i),e)}function lCe(i,e){if(i!=null){if(zY(i))return nCe(i,e);if(VY(i))return rCe(i,e);if(WY(i))return sCe(i,e);if(HY(i))return QY(i,e);if(jY(i))return oCe(i,e);if(GY(i))return aCe(i,e)}throw UY(i)}function hCe(i,e){return e?lCe(i,e):G0(i)}var cCe=MY(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}});function XY(i,e){var t=typeof e=="object";return new Promise(function(n,s){var r=new Jx({next:function(o){n(o),r.unsubscribe()},error:s,complete:function(){t?n(e.defaultValue):s(new cCe)}});i.subscribe(r)})}function JY(i,e){return q0(function(t,n){var s=0;t.subscribe(o1(n,function(r){n.next(i.call(e,r,s++))}))})}function uCe(i,e,t,n,s,r,o,a){var l=[],h=0,c=0,u=!1,d=function(){u&&!l.length&&!h&&e.complete()},f=function(p){return h<n?g(p):l.push(p)},g=function(p){r&&e.next(p),h++;var m=!1;G0(t(p,c++)).subscribe(o1(e,function(b){s==null||s(b),r?f(b):e.next(b)},function(){m=!0},void 0,function(){if(m)try{h--;for(var b=function(){var _=l.shift();o?cu(e,o,function(){return g(_)}):g(_)};l.length&&h<n;)b();d()}catch(_){e.error(_)}}))};return i.subscribe(o1(e,f,function(){u=!0,d()})),function(){a==null||a()}}function eQ(i,e,t){return t===void 0&&(t=1/0),$n(e)?eQ(function(n,s){return JY(function(r,o){return e(n,r,s,o)})(G0(i(n,s)))},t):(typeof e=="number"&&(t=e),q0(function(n,s){return uCe(n,s,i,t)}))}function dCe(i){return i===void 0&&(i=1/0),eQ(FY,i)}function fCe(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=Kye(i),n=Zye(i,1/0),s=i;return s.length?s.length===1?G0(s[0]):dCe(n)(hCe(s,t)):qye}function gCe(i,e,t,n,s){return function(r,o){var a=t,l=e,h=0;r.subscribe(o1(o,function(c){var u=h++;l=a?i(l,c,u):(a=!0,c),n&&o.next(l)},s&&function(){a&&o.next(l),o.complete()}))}}function tQ(i,e){return q0(gCe(i,e,arguments.length>=2,!1,!0))}var pCe=function(i,e){return i.push(e),i};function mCe(){return q0(function(i,e){tQ(pCe,[])(i).subscribe(e)})}const X9=-2003829722,bA=-2021002517;function _Ce(i){return new TextDecoder().decode(i)}function J9(i){const e=i?"big":"little",t=new ui().endianess(e).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new ui().endianess(e).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new ui().endianess(e).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),s=new ui().endianess(e).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),r=new ui().endianess(e).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:s,totalSummaryParser:n,headerParser:t,isLeafNode:r}}class iQ{getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:n=o=>o,path:s,url:r}=e;if(this.renameRefSeqs=n,t)this.bbi=t;else if(r)this.bbi=new Al(r);else if(s)this.bbi=new Qr(s);else throw new Error("no file given")}async _getHeader(e){const t=await this._getMainHeader(e),n=await this._readChromTree(t,e);return{...t,...n}}async _getMainHeader(e,t=2e3){const{buffer:n}=await this.bbi.read(ps.Buffer.alloc(t),0,t,0,e),s=this._isBigEndian(n),r=J9(s),o=r.headerParser.parse(n),{magic:a,asOffset:l,totalSummaryOffset:h}=o;if(o.fileType=a===bA?"bigbed":"bigwig",l>t||h>t)return this._getMainHeader(e,t*2);if(l){const c=Number(o.asOffset);o.autoSql=_Ce(n.subarray(c,n.indexOf(0,c)))}if(o.totalSummaryOffset>t)return this._getMainHeader(e,t*2);if(o.totalSummaryOffset){const c=n.subarray(Number(o.totalSummaryOffset)),u=r.totalSummaryParser.parse(c);o.totalSummary={...u,basesCovered:Number(u.basesCovered)}}return{...o,isBigEndian:s}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===X9||t===bA)return!1;if(t=e.readInt32BE(0),t===X9||t===bA)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(e,t){const n=e.isBigEndian,s=n?"big":"little",r=[],o={};let a=Number(e.unzoomedDataOffset);const l=Number(e.chromTreeOffset);for(;a%4!==0;)a+=1;const h=a-l,{buffer:c}=await this.bbi.read(ps.Buffer.alloc(h),0,h,Number(l),t),u=J9(n),{keySize:d}=u.chromTreeParser.parse(c),f=new ui().endianess(s).string("key",{stripNull:!0,length:d}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new ui().endianess(s).skip(d).uint64("childOffset").saveOffset("offset"),p=32,m=async b=>{let _=b;if(_>=c.length)throw new Error("reading beyond end of buffer");const w=u.isLeafNode.parse(c.subarray(_)),{isLeafNode:y,cnt:x}=w;if(_+=w.offset,y)for(let L=0;L<x;L+=1){const S=f.parse(c.subarray(_));_+=S.offset;const{key:k,refId:D,refSize:T}=S,M={name:k,id:D,length:T};o[this.renameRefSeqs(k)]=D,r[D]=M}else{const L=[];for(let S=0;S<x;S+=1){const k=g.parse(c.subarray(_)),{childOffset:D}=k;_+=k.offset,L.push(m(Number(D)-Number(l)))}await Promise.all(L)}};return await m(p),{refsByName:o,refsByNumber:r}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:n,uncompressBufSize:s,isBigEndian:r,fileType:o}=await this.getHeader(e);return new TY(this.bbi,n,t,r,s>0,o)}async getFeatureStream(e,t,n,s){await this.getHeader(s);const r=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:l}=s||{};return a?o=await this.getView(1/a,s):l?o=await this.getView(l,s):o=await this.getView(1,s),new ea(h=>{o.readWigData(r,t,n,h,s)})}async getFeatures(e,t,n,s){const r=await this.getFeatureStream(e,t,n,s);return(await XY(r.pipe(mCe()))).flat()}}class bCe extends iQ{async getView(e,t){const{zoomLevels:n,refsByName:s,fileSize:r,isBigEndian:o,uncompressBufSize:a}=await this.getHeader(t),l=1/e;let h=n.length;r||(h-=1);for(let c=h;c>=0;c-=1){const u=n[c];if(u&&u.reductionLevel<=2*l){const d=Number(u.indexOffset);return new TY(this.bbi,s,d,o,a>0,"summary")}}return this.getUnzoomedView(t)}}function vCe(i){return i.filter(e=>!!e)}class wCe extends iQ{constructor(){super(...arguments),this.readIndicesCache=new OL({cache:new XP({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})})}readIndices(e={}){const{signal:t,...n}=e;return this.readIndicesCache.get(JSON.stringify(n),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t,isBigEndian:n}=await this.getHeader(e),{buffer:s}=await this.bbi.read(ps.Buffer.alloc(64),0,64,Number(t)),r=n?"big":"little",o=new ui().endianess(r).uint16("size").uint16("count").uint64("offset").parse(s),{count:a,offset:l}=o;if(a===0)return[];const h=20,c=h*a,{buffer:u}=await this.bbi.read(ps.Buffer.alloc(c),0,c,Number(l)),d=new ui().endianess(r).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),f=[];for(let g=0;g<a;g+=1)f.push(d.parse(u.subarray(g*h)));return f}async searchExtraIndexBlocks(e,t={}){const{isBigEndian:n}=await this.getHeader(t),s=await this.readIndices(t);if(s.length===0)return[];const r=s.map(async o=>{const{offset:a,field:l}=o,{buffer:h}=await this.bbi.read(ps.Buffer.alloc(32),0,32,Number(a),t),c=n?"big":"little",u=new ui().endianess(c).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:d,keySize:f,valSize:g}=u.parse(h),p=new ui().endianess(c).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:new ui().array("leafkeys",{length:"cnt",type:new ui().endianess(c).string("key",{length:f,stripNull:!0}).uint64("offset")}),1:new ui().array("keys",{length:"cnt",type:new ui().endianess(c).string("key",{length:f,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),m=async _=>{const w=Number(_),y=4+d*(f+g),{buffer:x}=await this.bbi.read(ps.Buffer.alloc(y),0,y,w,t),L=p.parse(x);if(L.leafkeys){let S;for(let k=0;k<L.leafkeys.length;k+=1){const{key:D}=L.leafkeys[k];if(e.localeCompare(D)<0&&S)return m(S);S=L.leafkeys[k].offset}return m(S)}for(let S=0;S<L.keys.length;S+=1)if(L.keys[S].key===e)return{...L.keys[S],field:l}},b=32;return m(Number(a)+b)});return vCe(await Promise.all(r))}async searchExtraIndex(e,t={}){const n=await this.searchExtraIndexBlocks(e,t);if(n.length===0)return[];const s=await this.getUnzoomedView(t),r=n.map(o=>new ea(a=>{s.readFeatures(a,[o],t)}).pipe(tQ((a,l)=>a.concat(l)),JY(a=>{for(const l of a)l.field=o.field;return a})));return(await XY(fCe(...r))).filter(o=>{var a;return((a=o.rest)===null||a===void 0?void 0:a.split("	")[(o.field||0)-3])===e})}}function FL(i,e,t=!0){let n,s=r=>{};return function(...r){return new Promise((o,a)=>{const l=()=>{clearTimeout(n),s=h=>{},o(i(...r))};t&&s("debounced"),clearTimeout(n),s=a,n=window.setTimeout(l,e)})}}class yCe extends Qw(gg){constructor(e,t){const n={pixelsPerBin:2,channel:"x",...e};if(super(t,n.channel),Yo(this,"reductionLevels",[]),Yo(this,"lastRequestId",0),this.params=n,!this.params.url)throw new Error("No URL provided for BigWigSource");this.bbi=new bCe({filehandle:new Al(Xw(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=FL(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.reductionLevels=s.zoomLevels.map(r=>r.reductionLevel).reverse(),this.reductionLevels.push(1)})}async onDomainChanged(e){await this.headerPromise;const t=this.getAxisLength()||700,n=CCe(e,t,this.reductionLevels),s=Math.max(n*t,5e3),r=this.quantizeInterval(e,s);this.checkAndUpdateLastInterval(r)&&this.doDebouncedRequest(r,n)}async doRequest(e,t){const n=await this.getFeatures(e,.5/t/this.params.pixelsPerBin);n.requestId<this.lastRequestId||this.publishData(n.features)}async getFeatures(e,t){let n=++this.lastRequestId;const s=new AbortController,r=this.genome.continuousToDiscreteChromosomeIntervals(e),o=await Promise.all(r.map(a=>this.bbi.getFeatures(a.chrom,a.startPos,a.endPos,{scale:t,signal:s.signal}).then(l=>l.map(h=>({chrom:a.chrom,start:h.start,end:h.end,score:h.score})))));return{requestId:n,abort:()=>s.abort(),features:o.flat()}}}function CCe(i,e,t){const n=(i[1]-i[0])/e;return t.find(s=>s<n)??t.at(-1)}function SCe(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function qm(i,e,t,n){this.message=i,this.expected=e,this.found=t,this.location=n,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,qm)}SCe(qm,Error);qm.buildMessage=function(i,e){var t={literal:function(h){return'"'+s(h.text)+'"'},class:function(h){var c="",u;for(u=0;u<h.parts.length;u++)c+=h.parts[u]instanceof Array?r(h.parts[u][0])+"-"+r(h.parts[u][1]):r(h.parts[u]);return"["+(h.inverted?"^":"")+c+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function n(h){return h.charCodeAt(0).toString(16).toUpperCase()}function s(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function r(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function o(h){return t[h.type](h)}function a(h){var c=new Array(h.length),u,d;for(u=0;u<h.length;u++)c[u]=o(h[u]);if(c.sort(),c.length>0){for(u=1,d=1;u<c.length;u++)c[u-1]!==c[u]&&(c[d]=c[u],d++);c.length=d}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}function l(h){return h?'"'+s(h)+'"':"end of input"}return"Expected "+a(i)+" but "+l(e)+" found."};function xCe(i,e){e=e!==void 0?e:{};var t={},n={declaration:Yi},s=Yi,r="(",o=ee("(",!1),a=")",l=ee(")",!1),h=function(B,le,Pe,Ve){return{type:B,name:le,comment:Pe,fields:Ve}},c="simple",u=ee("simple",!1),d="object",f=ee("object",!1),g="table",p=ee("table",!1),m="auto",b=ee("auto",!1),_="primary",w=ee("primary",!1),y="index",x=ee("index",!1),L="unique",S=ee("unique",!1),k=function(B,le){return le},D=function(B,le){return B.name&&le.unshift(B),le},T="#",M=ee("#",!1),j=";",$=ee(";",!1),ie=function(B,le,Pe){return{type:B,name:le,comment:Pe}},pe="[",be=ee("[",!1),ye="]",Ee=ee("]",!1),we=function(B,le,Pe,Ve){return{type:B,size:le,name:Pe,comment:Ve}},Dt=function(B,le,Pe,Ve){return{type:B,vals:le,name:Pe,comment:Ve}},$e=",",Qe=ee(",",!1),pt=function(B,le){return le.unshift(B),le},lt="int",mi=ee("int",!1),te="uint",se=ee("uint",!1),me="short",G=ee("short",!1),fe="ushort",R=ee("ushort",!1),E="byte",he=ee("byte",!1),ce="ubyte",je=ee("ubyte",!1),Me="float",Je=ee("float",!1),on="char",po=ee("char",!1),Ys="string",xs=ee("string",!1),Vi="lstring",Fn=ee("lstring",!1),Ds="enum",In=ee("enum",!1),ks="double",C=ee("double",!1),A="bigint",N=ee("bigint",!1),q="set",X=ee("set",!1),de=function(B,le){return B+" "+le},xe=/^[a-zA-Z_]/,Lt=re([["a","z"],["A","Z"],"_"],!1,!1),_i=/^[a-zA-Z0-9_]/,Wt=re([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),zt=function(B){return U()},bi=/^[^\n\r]/,lh=re([`
`,"\r"],!0,!1),tl=function(B){return B.join("").replace(/^"/,"").replace(/"$/,"")},Ug=Ue("integer"),Qs=/^[0-9]/,od=re([["0","9"]],!1,!1),$g=function(){return parseInt(U(),10)},jg=Ue("whitespace"),ft=/^[ \t\n\r]/,il=re([" ","	",`
`,"\r"],!1,!1),O=0,Y=0,J=[{line:1,column:1}],P=0,W=[],F=0,I;if("startRule"in e){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function U(){return i.substring(Y,O)}function ee(B,le){return{type:"literal",text:B,ignoreCase:le}}function re(B,le,Pe){return{type:"class",parts:B,inverted:le,ignoreCase:Pe}}function Le(){return{type:"end"}}function Ue(B){return{type:"other",description:B}}function Ze(B){var le=J[B],Pe;if(le)return le;for(Pe=B-1;!J[Pe];)Pe--;for(le=J[Pe],le={line:le.line,column:le.column};Pe<B;)i.charCodeAt(Pe)===10?(le.line++,le.column=1):le.column++,Pe++;return J[B]=le,le}function tt(B,le){var Pe=Ze(B),Ve=Ze(le);return{start:{offset:B,line:Pe.line,column:Pe.column},end:{offset:le,line:Ve.line,column:Ve.column}}}function Ce(B){O<P||(O>P&&(P=O,W=[]),W.push(B))}function We(B,le,Pe){return new qm(qm.buildMessage(B,le),B,le,Pe)}function Yi(){var B,le,Pe,Ve,rt,Ti,Qi,mo,bc,ch,vc,uh,wc,dh;return B=O,le=Gt(),le!==t?(Pe=At(),Pe!==t?(Ve=Gt(),Ve!==t?(rt=Qn(),rt!==t?(Ti=Gt(),Ti!==t?(Qi=un(),Qi!==t?(mo=Gt(),mo!==t?(i.charCodeAt(O)===40?(bc=r,O++):(bc=t,F===0&&Ce(o)),bc!==t?(ch=Gt(),ch!==t?(vc=ad(),vc!==t?(uh=Gt(),uh!==t?(i.charCodeAt(O)===41?(wc=a,O++):(wc=t,F===0&&Ce(l)),wc!==t?(dh=Gt(),dh!==t?(Y=B,le=h(Pe,rt,Qi,vc),B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t),B}function At(){var B;return i.substr(O,6)===c?(B=c,O+=6):(B=t,F===0&&Ce(u)),B===t&&(i.substr(O,6)===d?(B=d,O+=6):(B=t,F===0&&Ce(f)),B===t&&(i.substr(O,5)===g?(B=g,O+=5):(B=t,F===0&&Ce(p)))),B}function Qn(){var B,le,Pe,Ve;return B=na(),B===t&&(B=O,le=na(),le!==t?(Pe=hh(),Pe!==t?(le=[le,Pe],B=le):(O=B,B=t)):(O=B,B=t),B===t&&(B=O,le=na(),le!==t?(i.substr(O,4)===m?(Pe=m,O+=4):(Pe=t,F===0&&Ce(b)),Pe!==t?(le=[le,Pe],B=le):(O=B,B=t)):(O=B,B=t),B===t&&(B=O,le=na(),le!==t?(Pe=hh(),Pe!==t?(i.substr(O,4)===m?(Ve=m,O+=4):(Ve=t,F===0&&Ce(b)),Ve!==t?(le=[le,Pe,Ve],B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)))),B}function hh(){var B;return i.substr(O,7)===_?(B=_,O+=7):(B=t,F===0&&Ce(w)),B===t&&(i.substr(O,5)===y?(B=y,O+=5):(B=t,F===0&&Ce(x)),B===t&&(i.substr(O,6)===L?(B=L,O+=6):(B=t,F===0&&Ce(S)))),B}function un(){var B;return B=YB(),B===t&&(B=Gt()),B}function ad(){var B,le,Pe,Ve,rt,Ti,Qi;if(B=O,le=hd(),le!==t)if(Pe=Gt(),Pe!==t){for(Ve=[],rt=O,Ti=Gt(),Ti!==t?(Qi=hd(),Qi!==t?(Y=rt,Ti=k(le,Qi),rt=Ti):(O=rt,rt=t)):(O=rt,rt=t);rt!==t;)Ve.push(rt),rt=O,Ti=Gt(),Ti!==t?(Qi=hd(),Qi!==t?(Y=rt,Ti=k(le,Qi),rt=Ti):(O=rt,rt=t)):(O=rt,rt=t);Ve!==t?(rt=Gt(),rt!==t?(Y=B,le=D(le,Ve),B=le):(O=B,B=t)):(O=B,B=t)}else O=B,B=t;else O=B,B=t;return B}function Ay(){var B;return i.charCodeAt(O)===35?(B=T,O++):(B=t,F===0&&Ce(M)),B}function ld(){var B,le,Pe,Ve,rt;return B=O,le=Gt(),le!==t?(Pe=Ay(),Pe!==t?(Ve=YB(),Ve!==t?(rt=Gt(),rt!==t?(le=[le,Pe,Ve,rt],B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t),B}function hd(){var B,le,Pe,Ve,rt,Ti,Qi,mo,bc,ch,vc,uh,wc,dh;return B=O,le=qg(),le!==t?(Pe=Gt(),Pe!==t?(Ve=na(),Ve!==t?(rt=Gt(),rt!==t?(i.charCodeAt(O)===59?(Ti=j,O++):(Ti=t,F===0&&Ce($)),Ti!==t?(Qi=Gt(),Qi!==t?(mo=un(),mo!==t?(Y=B,le=ie(le,Ve,mo),B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t),B===t&&(B=O,le=qg(),le!==t?(Pe=Gt(),Pe!==t?(i.charCodeAt(O)===91?(Ve=pe,O++):(Ve=t,F===0&&Ce(be)),Ve!==t?(rt=Gt(),rt!==t?(Ti=lre(),Ti!==t?(Qi=Gt(),Qi!==t?(i.charCodeAt(O)===93?(mo=ye,O++):(mo=t,F===0&&Ce(Ee)),mo!==t?(bc=Gt(),bc!==t?(ch=na(),ch!==t?(vc=Gt(),vc!==t?(i.charCodeAt(O)===59?(uh=j,O++):(uh=t,F===0&&Ce($)),uh!==t?(wc=Gt(),wc!==t?(dh=un(),dh!==t?(Y=B,le=we(le,Ti,ch,dh),B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t),B===t&&(B=O,le=qg(),le!==t?(Pe=Gt(),Pe!==t?(i.charCodeAt(O)===40?(Ve=r,O++):(Ve=t,F===0&&Ce(o)),Ve!==t?(rt=Gt(),rt!==t?(Ti=Iy(),Ti!==t?(Qi=Gt(),Qi!==t?(i.charCodeAt(O)===41?(mo=a,O++):(mo=t,F===0&&Ce(l)),mo!==t?(bc=Gt(),bc!==t?(ch=na(),ch!==t?(vc=Gt(),vc!==t?(i.charCodeAt(O)===59?(uh=j,O++):(uh=t,F===0&&Ce($)),uh!==t?(wc=Gt(),wc!==t?(dh=un(),dh!==t?(Y=B,le=Dt(le,Ti,ch,dh),B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t)):(O=B,B=t),B===t&&(B=ld()))),B}function Iy(){var B,le,Pe,Ve,rt,Ti,Qi;if(B=O,le=na(),le!==t){for(Pe=[],Ve=O,i.charCodeAt(O)===44?(rt=$e,O++):(rt=t,F===0&&Ce(Qe)),rt!==t?(Ti=Gt(),Ti!==t?(Qi=na(),Qi!==t?(Y=Ve,rt=k(le,Qi),Ve=rt):(O=Ve,Ve=t)):(O=Ve,Ve=t)):(O=Ve,Ve=t);Ve!==t;)Pe.push(Ve),Ve=O,i.charCodeAt(O)===44?(rt=$e,O++):(rt=t,F===0&&Ce(Qe)),rt!==t?(Ti=Gt(),Ti!==t?(Qi=na(),Qi!==t?(Y=Ve,rt=k(le,Qi),Ve=rt):(O=Ve,Ve=t)):(O=Ve,Ve=t)):(O=Ve,Ve=t);Pe!==t?(Y=B,le=pt(le,Pe),B=le):(O=B,B=t)}else O=B,B=t;return B}function qg(){var B,le,Pe,Ve;return i.substr(O,3)===lt?(B=lt,O+=3):(B=t,F===0&&Ce(mi)),B===t&&(i.substr(O,4)===te?(B=te,O+=4):(B=t,F===0&&Ce(se)),B===t&&(i.substr(O,5)===me?(B=me,O+=5):(B=t,F===0&&Ce(G)),B===t&&(i.substr(O,6)===fe?(B=fe,O+=6):(B=t,F===0&&Ce(R)),B===t&&(i.substr(O,4)===E?(B=E,O+=4):(B=t,F===0&&Ce(he)),B===t&&(i.substr(O,5)===ce?(B=ce,O+=5):(B=t,F===0&&Ce(je)),B===t&&(i.substr(O,5)===Me?(B=Me,O+=5):(B=t,F===0&&Ce(Je)),B===t&&(i.substr(O,4)===on?(B=on,O+=4):(B=t,F===0&&Ce(po)),B===t&&(i.substr(O,6)===Ys?(B=Ys,O+=6):(B=t,F===0&&Ce(xs)),B===t&&(i.substr(O,7)===Vi?(B=Vi,O+=7):(B=t,F===0&&Ce(Fn)),B===t&&(i.substr(O,4)===Ds?(B=Ds,O+=4):(B=t,F===0&&Ce(In)),B===t&&(i.substr(O,6)===ks?(B=ks,O+=6):(B=t,F===0&&Ce(C)),B===t&&(i.substr(O,6)===A?(B=A,O+=6):(B=t,F===0&&Ce(N)),B===t&&(i.substr(O,3)===q?(B=q,O+=3):(B=t,F===0&&Ce(X)),B===t&&(B=O,le=At(),le!==t?(Pe=Gt(),Pe!==t?(Ve=Qn(),Ve!==t?(Y=B,le=de(le,Ve),B=le):(O=B,B=t)):(O=B,B=t)):(O=B,B=t))))))))))))))),B}function lre(){var B;return B=hre(),B===t&&(B=na()),B}function na(){var B,le,Pe,Ve,rt;if(B=O,le=O,xe.test(i.charAt(O))?(Pe=i.charAt(O),O++):(Pe=t,F===0&&Ce(Lt)),Pe!==t){for(Ve=[],_i.test(i.charAt(O))?(rt=i.charAt(O),O++):(rt=t,F===0&&Ce(Wt));rt!==t;)Ve.push(rt),_i.test(i.charAt(O))?(rt=i.charAt(O),O++):(rt=t,F===0&&Ce(Wt));Ve!==t?(Pe=[Pe,Ve],le=Pe):(O=le,le=t)}else O=le,le=t;return le!==t&&(Y=B,le=zt()),B=le,B}function YB(){var B,le,Pe;for(B=O,le=[],bi.test(i.charAt(O))?(Pe=i.charAt(O),O++):(Pe=t,F===0&&Ce(lh));Pe!==t;)le.push(Pe),bi.test(i.charAt(O))?(Pe=i.charAt(O),O++):(Pe=t,F===0&&Ce(lh));return le!==t&&(Y=B,le=tl(le)),B=le,B}function hre(){var B,le,Pe,Ve;if(F++,B=O,le=Gt(),le!==t){if(Pe=[],Qs.test(i.charAt(O))?(Ve=i.charAt(O),O++):(Ve=t,F===0&&Ce(od)),Ve!==t)for(;Ve!==t;)Pe.push(Ve),Qs.test(i.charAt(O))?(Ve=i.charAt(O),O++):(Ve=t,F===0&&Ce(od));else Pe=t;Pe!==t?(Y=B,le=$g(),B=le):(O=B,B=t)}else O=B,B=t;return F--,B===t&&(le=t,F===0&&Ce(Ug)),B}function Gt(){var B,le;for(F++,B=[],ft.test(i.charAt(O))?(le=i.charAt(O),O++):(le=t,F===0&&Ce(il));le!==t;)B.push(le),ft.test(i.charAt(O))?(le=i.charAt(O),O++):(le=t,F===0&&Ce(il));return F--,B===t&&(le=t,F===0&&Ce(jg)),B}if(I=s(),I!==t&&O===i.length)return I;throw I!==t&&O<i.length&&Ce(Le()),We(W,P<i.length?i.charAt(P):null,P<i.length?tt(P,P+1):tt(P,P))}var nQ={SyntaxError:qm,parse:xCe};const DCe=pg(nQ),kCe=`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,LCe=`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,ECe=`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,ACe=`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,ICe=`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,TCe=`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,NCe=`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,MCe=`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,RCe=`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,OCe=`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`,PCe=Object.freeze(Object.defineProperty({__proto__:null,bigChain:kCe,bigGenePred:LCe,bigInteract:ECe,bigLink:ACe,bigMaf:ICe,bigNarrowPeak:TCe,bigPsl:NCe,defaultBedSchema:MCe,mafFrames:RCe,mafSummary:OCe},Symbol.toStringTag,{value:"Module"})),vA=Object.fromEntries(Object.entries(PCe).map(([i,e])=>[i,nQ.parse(e.trim())]));function wA(i){const e=["uint","int","float","long"];return{...i,fields:i.fields.map(t=>({...t,isArray:t.size&&t.type!=="char",arrayIsNumeric:t.size&&e.includes(t.type),isNumeric:!t.size&&e.includes(t.type)}))}}const FCe={".":0,"-":-1,"+":1};function BCe(i){var e;return i.length>=12&&!Number.isNaN(parseInt(i[9],10))&&((e=i[10])===null||e===void 0?void 0:e.split(",").filter(t=>!!t).length)===parseInt(i[9],10)}class VCe{constructor(e={}){if(e.autoSql)this.autoSql=wA(DCe.parse(e.autoSql));else if(e.type){if(!vA[e.type])throw new Error("Type not found");this.autoSql=wA(vA[e.type])}else this.autoSql=wA(vA.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:n}=this,{uniqueId:s}=t,r=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&BCe(r))for(let a=0;a<n.fields.length;a++){const l=n.fields[a];let h=r[a];const{isNumeric:c,isArray:u,arrayIsNumeric:d,name:f}=l;if(h==null)break;if(h!=="."){if(c){const g=Number(h);h=Number.isNaN(g)?h:g}else u&&(h=h.split(","),h[h.length-1]===""&&h.pop(),d&&(h=h.map(g=>Number(g))));o[f]=h}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(r.map((l,h)=>[a[h]||"field"+h,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return s&&(o.uniqueId=s),o.strand=FCe[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}class WCe extends Qw(gg){constructor(e,t){const n={channel:"x",windowSize:1e6,...e};if(super(t,n.channel),Yo(this,"lastRequestId",0),Yo(this,"parser"),this.params=n,!this.params.url)throw new Error("No URL provided for BigBedSource");this.bbi=new wCe({filehandle:new Al(Xw(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=FL(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.parser=new VCe({autoSql:s.autoSql})})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);this.checkAndUpdateLastInterval(n)&&this.doDebouncedRequest(n)}async doRequest(e){const t=await this.getFeatures(e);t.requestId<this.lastRequestId||this.publishData(t.features)}async getFeatures(e){let t=++this.lastRequestId;const n=new AbortController,s=this.genome.continuousToDiscreteChromosomeIntervals(e),r=await Promise.all(s.map(o=>this.bbi.getFeatures(o.chrom,o.startPos,o.endPos,{signal:n.signal}).then(a=>a.map(l=>this.parser.parseLine(`${o.chrom}	${l.start}	${l.end}	${l.rest}`,{uniqueId:l.uniqueId})))));return{requestId:t,abort:()=>n.abort(),features:r.flat()}}}var zCe=Oi,Bo=null;try{Bo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Oi(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Oi.prototype.__isLong__;Object.defineProperty(Oi.prototype,"__isLong__",{value:!0});function Fr(i){return(i&&i.__isLong__)===!0}Oi.isLong=Fr;var eV={},tV={};function wg(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=tV[i],n)?n:(t=Pi(i,(i|0)<0?-1:0,!0),s&&(tV[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=eV[i],n)?n:(t=Pi(i,i<0?-1:0,!1),s&&(eV[i]=t),t))}Oi.fromInt=wg;function Vo(i,e){if(isNaN(i))return e?qd:Wo;if(e){if(i<0)return qd;if(i>=sQ)return aQ}else{if(i<=-nV)return Lr;if(i+1>=nV)return oQ}return i<0?Vo(-i,e).neg():Pi(i%Gm|0,i/Gm|0,e)}Oi.fromNumber=Vo;function Pi(i,e,t){return new Oi(i,e,t)}Oi.fromBits=Pi;var eD=Math.pow;function r5(i,e,t){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return Wo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return r5(i.substring(1),e,t).neg();for(var s=Vo(eD(t,8)),r=Wo,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var h=Vo(eD(t,a));r=r.mul(h).add(Vo(l))}else r=r.mul(s),r=r.add(Vo(l))}return r.unsigned=e,r}Oi.fromString=r5;function Ka(i,e){return typeof i=="number"?Vo(i,e):typeof i=="string"?r5(i,e):Pi(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Oi.fromValue=Ka;var iV=1<<16,HCe=1<<24,Gm=iV*iV,sQ=Gm*Gm,nV=sQ/2,sV=wg(HCe),Wo=wg(0);Oi.ZERO=Wo;var qd=wg(0,!0);Oi.UZERO=qd;var Rp=wg(1);Oi.ONE=Rp;var rQ=wg(1,!0);Oi.UONE=rQ;var fM=wg(-1);Oi.NEG_ONE=fM;var oQ=Pi(-1,2147483647,!1);Oi.MAX_VALUE=oQ;var aQ=Pi(-1,-1,!0);Oi.MAX_UNSIGNED_VALUE=aQ;var Lr=Pi(0,-2147483648,!1);Oi.MIN_VALUE=Lr;var Te=Oi.prototype;Te.toInt=function(){return this.unsigned?this.low>>>0:this.low};Te.toNumber=function(){return this.unsigned?(this.high>>>0)*Gm+(this.low>>>0):this.high*Gm+(this.low>>>0)};Te.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Lr)){var e=Vo(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=Vo(eD(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,h=l.toString(i);if(r=a,r.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};Te.getHighBits=function(){return this.high};Te.getHighBitsUnsigned=function(){return this.high>>>0};Te.getLowBits=function(){return this.low};Te.getLowBitsUnsigned=function(){return this.low>>>0};Te.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Lr)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};Te.isZero=function(){return this.high===0&&this.low===0};Te.eqz=Te.isZero;Te.isNegative=function(){return!this.unsigned&&this.high<0};Te.isPositive=function(){return this.unsigned||this.high>=0};Te.isOdd=function(){return(this.low&1)===1};Te.isEven=function(){return(this.low&1)===0};Te.equals=function(i){return Fr(i)||(i=Ka(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};Te.eq=Te.equals;Te.notEquals=function(i){return!this.eq(i)};Te.neq=Te.notEquals;Te.ne=Te.notEquals;Te.lessThan=function(i){return this.comp(i)<0};Te.lt=Te.lessThan;Te.lessThanOrEqual=function(i){return this.comp(i)<=0};Te.lte=Te.lessThanOrEqual;Te.le=Te.lessThanOrEqual;Te.greaterThan=function(i){return this.comp(i)>0};Te.gt=Te.greaterThan;Te.greaterThanOrEqual=function(i){return this.comp(i)>=0};Te.gte=Te.greaterThanOrEqual;Te.ge=Te.greaterThanOrEqual;Te.compare=function(i){if(Fr(i)||(i=Ka(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};Te.comp=Te.compare;Te.negate=function(){return!this.unsigned&&this.eq(Lr)?Lr:this.not().add(Rp)};Te.neg=Te.negate;Te.add=function(i){Fr(i)||(i=Ka(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,h=0,c=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,c+=u>>>16,u&=65535,c+=t+o,h+=c>>>16,c&=65535,h+=e+r,h&=65535,Pi(u<<16|d,h<<16|c,this.unsigned)};Te.subtract=function(i){return Fr(i)||(i=Ka(i)),this.add(i.neg())};Te.sub=Te.subtract;Te.multiply=function(i){if(this.isZero())return Wo;if(Fr(i)||(i=Ka(i)),Bo){var e=Bo.mul(this.low,this.high,i.low,i.high);return Pi(e,Bo.get_high(),this.unsigned)}if(i.isZero())return Wo;if(this.eq(Lr))return i.isOdd()?Lr:Wo;if(i.eq(Lr))return this.isOdd()?Lr:Wo;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(sV)&&i.lt(sV))return Vo(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,h=i.low&65535,c=0,u=0,d=0,f=0;return f+=r*h,d+=f>>>16,f&=65535,d+=s*h,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*h,c+=u>>>16,u&=65535,u+=s*l,c+=u>>>16,u&=65535,u+=r*a,c+=u>>>16,u&=65535,c+=t*h+n*l+s*a+r*o,c&=65535,Pi(d<<16|f,c<<16|u,this.unsigned)};Te.mul=Te.multiply;Te.divide=function(i){if(Fr(i)||(i=Ka(i)),i.isZero())throw Error("division by zero");if(Bo){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?Bo.div_u:Bo.div_s)(this.low,this.high,i.low,i.high);return Pi(e,Bo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?qd:Wo;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return qd;if(i.gt(this.shru(1)))return rQ;s=qd}else{if(this.eq(Lr)){if(i.eq(Rp)||i.eq(fM))return Lr;if(i.eq(Lr))return Rp;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(Wo)?i.isNegative()?Rp:fM:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(Lr))return this.unsigned?qd:Wo;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=Wo}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:eD(2,o-48),l=Vo(t),h=l.mul(i);h.isNegative()||h.gt(n);)t-=a,l=Vo(t,this.unsigned),h=l.mul(i);l.isZero()&&(l=Rp),s=s.add(l),n=n.sub(h)}return s};Te.div=Te.divide;Te.modulo=function(i){if(Fr(i)||(i=Ka(i)),Bo){var e=(this.unsigned?Bo.rem_u:Bo.rem_s)(this.low,this.high,i.low,i.high);return Pi(e,Bo.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};Te.mod=Te.modulo;Te.rem=Te.modulo;Te.not=function(){return Pi(~this.low,~this.high,this.unsigned)};Te.and=function(i){return Fr(i)||(i=Ka(i)),Pi(this.low&i.low,this.high&i.high,this.unsigned)};Te.or=function(i){return Fr(i)||(i=Ka(i)),Pi(this.low|i.low,this.high|i.high,this.unsigned)};Te.xor=function(i){return Fr(i)||(i=Ka(i)),Pi(this.low^i.low,this.high^i.high,this.unsigned)};Te.shiftLeft=function(i){return Fr(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Pi(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):Pi(0,this.low<<i-32,this.unsigned)};Te.shl=Te.shiftLeft;Te.shiftRight=function(i){return Fr(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Pi(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):Pi(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};Te.shr=Te.shiftRight;Te.shiftRightUnsigned=function(i){if(Fr(i)&&(i=i.toInt()),i&=63,i===0)return this;var e=this.high;if(i<32){var t=this.low;return Pi(t>>>i|e<<32-i,e>>>i,this.unsigned)}else return i===32?Pi(e,0,this.unsigned):Pi(e>>>i-32,0,this.unsigned)};Te.shru=Te.shiftRightUnsigned;Te.shr_u=Te.shiftRightUnsigned;Te.toSigned=function(){return this.unsigned?Pi(this.low,this.high,!1):this};Te.toUnsigned=function(){return this.unsigned?this:Pi(this.low,this.high,!0)};Te.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};Te.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};Te.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Oi.fromBytes=function(i,e,t){return t?Oi.fromBytesLE(i,e):Oi.fromBytesBE(i,e)};Oi.fromBytesLE=function(i,e){return new Oi(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Oi.fromBytesBE=function(i,e){return new Oi(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};const lQ=pg(zCe);let hQ=class{constructor(i,e){this.blockPosition=i,this.dataPosition=e}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(i){return this.blockPosition-i.blockPosition||this.dataPosition-i.dataPosition}static min(...i){let e,t=0;for(;!e;t+=1)e=i[t];for(;t<i.length;t+=1)e.compareTo(i[t])>0&&(e=i[t]);return e}};function sm(i,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new hQ(i[e+7]*1099511627776+i[e+6]*4294967296+i[e+5]*16777216+i[e+4]*65536+i[e+3]*256+i[e+2],i[e+1]<<8|i[e])}let tD=class{constructor(i,e,t,n=void 0){this.minv=i,this.maxv=e,this.bin=t,this._fetchedSize=n}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(i){return this.minv.compareTo(i.minv)||this.maxv.compareTo(i.maxv)||this.bin-i.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+(1<<16)-this.minv.blockPosition}},cQ=class{constructor({filehandle:i,renameRefSeq:e=t=>t}){this.filehandle=i,this.renameRefSeq=e}_findFirstData(i,e){const t=i.firstDataLine;t?i.firstDataLine=t.compareTo(e)>0?e:t:i.firstDataLine=e}async parse(i={}){return this.setupP||(this.setupP=this._parse(i).catch(e=>{throw this.setupP=void 0,e})),this.setupP}async hasRefSeq(i,e={}){return!!((await this.parse(e)).indices[i]||{}).binIndex}};function UCe(i){return new Promise(e=>setTimeout(e,i))}function uQ(i){if(i.greaterThan(Number.MAX_SAFE_INTEGER)||i.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return i.toNumber()}function dQ(i){if(i&&i.aborted){if(typeof DOMException<"u")throw new DOMException("aborted","AbortError");{const e=new Error("aborted");throw e.code="ERR_ABORTED",e}}}async function fQ(i){await Promise.resolve(),dQ(i)}function $Ce(i,e){return e.minv.blockPosition-i.maxv.blockPosition<65e3&&e.maxv.blockPosition-i.minv.blockPosition<5e6}function jCe(i={}){return"aborted"in i?{signal:i}:i}function gQ(i,e){const t=[];let n=null;return i.length===0?i:(i.sort((s,r)=>{const o=s.minv.blockPosition-r.minv.blockPosition;return o!==0?o:s.minv.dataPosition-r.minv.dataPosition}),i.forEach(s=>{(!e||s.maxv.compareTo(e)>0)&&(n===null?(t.push(s),n=s):$Ce(n,s)?s.maxv.compareTo(n.maxv)>0&&(n.maxv=s.maxv):(t.push(s),n=s))}),t)}const qCe=21578050;function GCe(i,e){return i-i%e}function KCe(i,e){return i-i%e+e}class I_ extends cQ{parsePseudoBin(e,t){return{lineCount:uQ(lQ.fromBytesLE(Array.prototype.slice.call(e,t+16,t+24),!0))}}async lineCount(e,t={}){const n=(await this.parse(t)).indices[e];if(!n)return-1;const s=n.stats||{};return s.lineCount===void 0?-1:s.lineCount}fetchBai(e={}){return this.baiP||(this.baiP=this.filehandle.readFile(e).catch(t=>{throw this.baiP=void 0,t})),this.baiP}async _parse(){const e={bai:!0,maxBlockSize:65536},t=await this.fetchBai();if(t.readUInt32LE(0)!==qCe)throw new Error("Not a BAI file");e.refCount=t.readInt32LE(4);const n=((1<<(5+1)*3)-1)/7;e.indices=new Array(e.refCount);let s=8;for(let r=0;r<e.refCount;r+=1){const o=t.readInt32LE(s);let a;s+=4;const l={};for(let u=0;u<o;u+=1){const d=t.readUInt32LE(s);if(s+=4,d===n+1)s+=4,a=this.parsePseudoBin(t,s),s+=32;else{if(d>n+1)throw new Error("bai index contains too many bins, please use CSI");{const f=t.readInt32LE(s);s+=4;const g=new Array(f);for(let p=0;p<f;p+=1){const m=sm(t,s),b=sm(t,s+8);s+=16,this._findFirstData(e,m),g[p]=new tD(m,b,d)}l[d]=g}}}const h=t.readInt32LE(s);s+=4;const c=new Array(h);for(let u=0;u<h;u+=1)c[u]=sm(t,s),s+=8,this._findFirstData(e,c[u]);e.indices[r]={binIndex:l,linearIndex:c,stats:a}}return e}async indexCov(e,t,n,s={}){const r=t!==void 0,o=(await this.parse(s)).indices[e];if(!o)return[];const{linearIndex:a=[],stats:l}=o;if(!a.length)return[];const h=n!==void 0?KCe(n,16384):(a.length-1)*16384,c=t!==void 0?GCe(t,16384):0;let u;r?u=new Array((h-c)/16384):u=new Array(a.length-1);const d=a[a.length-1].blockPosition;if(h>(a.length-1)*16384)throw new Error("query outside of range of linear index");let f=a[c/16384].blockPosition;for(let g=c/16384,p=0;g<h/16384;g++,p++)u[p]={score:a[g+1].blockPosition-f,start:g*16384,end:g*16384+16384},f=a[g+1].blockPosition;return u.map(g=>({...g,score:g.score*l.lineCount/d}))}reg2bins(e,t){return t-=1,[[0,0],[1+(e>>26),1+(t>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s);if(!r)return[];const o=r.indices[e];if(!o)return[];const a=this.reg2bins(t,n),l=[];for(const[f,g]of a)for(let p=f;p<=g;p++)if(o.binIndex[p]){const m=o.binIndex[p];for(let b=0;b<m.length;++b)l.push(new tD(m[b].minv,m[b].maxv,p))}const h=o.linearIndex.length;let c=null;const u=Math.min(t>>14,h-1),d=Math.min(n>>14,h-1);for(let f=u;f<=d;++f){const g=o.linearIndex[f];g&&(!c||g.compareTo(c)<0)&&(c=g)}return gQ(l,c)}}const ZCe=21582659,YCe=38359875;function QCe(i,e){return i*2**e}function rV(i,e){return Math.floor(i/2**e)}let yA=class extends cQ{constructor(i){super(i),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(i){const e=await this.parse();if(!e||!e.indices[i])return-1;const{stats:t}=e.indices[i];return t?t.lineCount:-1}async indexCov(){return[]}parseAuxData(i,e,t){if(t<30)return{};const n={};if(n.formatFlags=i.readInt32LE(e),n.coordinateType=n.formatFlags&65536?"zero-based-half-open":"1-based-closed",n.format={0:"generic",1:"SAM",2:"VCF"}[n.formatFlags&15],!n.format)throw new Error(`invalid Tabix preset format flags ${n.formatFlags}`);n.columnNumbers={ref:i.readInt32LE(e+4),start:i.readInt32LE(e+8),end:i.readInt32LE(e+12)},n.metaValue=i.readInt32LE(e+16),n.metaChar=n.metaValue?String.fromCharCode(n.metaValue):"",n.skipLines=i.readInt32LE(e+20);const s=i.readInt32LE(e+24);return Object.assign(n,this._parseNameBytes(i.subarray(e+28,e+28+s))),n}_parseNameBytes(i){let e=0,t=0;const n=[],s={};for(let r=0;r<i.length;r+=1)if(!i[r]){if(t<r){let o=i.toString("utf8",t,r);o=this.renameRefSeq(o),n[e]=o,s[o]=e}t=r+1,e+=1}return{refNameToId:s,refIdToName:n}}async _parse(i){const e={csi:!0,maxBlockSize:65536},t=await this.filehandle.readFile(i),n=await Um(t);if(n.readUInt32LE(0)===ZCe)e.csiVersion=1;else if(n.readUInt32LE(0)===YCe)e.csiVersion=2;else throw new Error("Not a CSI file");this.minShift=n.readInt32LE(4),this.depth=n.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=n.readInt32LE(12);s&&Object.assign(e,this.parseAuxData(n,16,s)),e.refCount=n.readInt32LE(16+s),e.indices=new Array(e.refCount);let r=16+s+4;for(let o=0;o<e.refCount;o+=1){await fQ(i.signal);const a=n.readInt32LE(r);r+=4;const l={};let h;for(let c=0;c<a;c+=1){const u=n.readUInt32LE(r);if(u>this.maxBinNumber)h=this.parsePseudoBin(n,r+4),r+=4+8+4+16+16;else{const d=sm(n,r+4);this._findFirstData(e,d);const f=n.readInt32LE(r+12);r+=16;const g=new Array(f);for(let p=0;p<f;p+=1){const m=sm(n,r),b=sm(n,r+8);r+=16,g[p]=new tD(m,b,u)}l[u]=g}}e.indices[o]={binIndex:l,stats:h}}return e}parsePseudoBin(i,e){return{lineCount:uQ(lQ.fromBytesLE(Array.prototype.slice.call(i,e+28,e+36),!0))}}async blocksForRange(i,e,t,n={}){e<0&&(e=0);const s=await this.parse(n),r=s==null?void 0:s.indices[i];if(!r)return[];const o=this.reg2bins(e,t),a=[];for(const[l,h]of o)for(let c=l;c<=h;c++)if(r.binIndex[c]){const u=r.binIndex[c];for(let d=0;d<u.length;++d)a.push(new tD(u[d].minv,u[d].maxv,c))}return gQ(a,new hQ(0,0))}reg2bins(i,e){i-=1,i<1&&(i=1),e>2**50&&(e=2**34),e-=1;let t=0,n=0,s=this.minShift+this.depth*3;const r=[];for(;t<=this.depth;s-=3,n+=QCe(1,t*3),t+=1){const o=n+rV(i,s),a=n+rV(e,s);if(a-o+r.length>this.maxBinNumber)throw new Error(`query ${i}-${e} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);r.push([o,a])}return r}};var Oc=ps.Buffer,gM=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(gM=new Int32Array(gM));function pQ(i){if(Oc.isBuffer(i))return i;var e=typeof Oc.alloc=="function"&&typeof Oc.from=="function";if(typeof i=="number")return e?Oc.alloc(i):new Oc(i);if(typeof i=="string")return e?Oc.from(i):new Oc(i);throw new Error("input must be buffer, number, or string, received "+typeof i)}function XCe(i){var e=pQ(4);return e.writeInt32BE(i,0),e}function o5(i,e){i=pQ(i),Oc.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<i.length;n++)t=gM[(t^i[n])&255]^t>>>8;return t^-1}function a5(){return XCe(o5.apply(null,arguments))}a5.signed=function(){return o5.apply(null,arguments)};a5.unsigned=function(){return o5.apply(null,arguments)>>>0};var JCe=a5;const eSe=pg(JCe);var CA,oV;function tSe(){if(oV)return CA;oV=1;var i=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},e=function(n,s){return Object.prototype.propertyIsEnumerable.call(n,s)};function t(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");var s=[];for(var r in n)i(n,r)&&e(n,r)&&s.push([r,n[r]]);return s}return CA=t,CA}var iSe=typeof Object.entries=="function"?Object.entries:tSe();const nSe=pg(iSe);class sSe{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}var rSe=sSe;const oSe=pg(rSe),_o={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},aV="=ACMGRSVTWYHKDBN".split(""),T_="MIDNSHP=X???????".split("");class aSe{constructor(e){this.data={},this._tagList=[],this._allTagsParsed=!1;const{bytes:t,fileOffset:n}=e,{byteArray:s,start:r}=t;this.data={},this.bytes=t,this._id=n,this._refID=s.readInt32LE(r+4),this.data.start=s.readInt32LE(r+8),this.flags=(s.readInt32LE(r+16)&4294901760)>>16}get(e){return this[e]?this.data[e]?this.data[e]:(this.data[e]=this[e](),this.data[e]):this._get(e.toLowerCase())}end(){return this.get("start")+this.get("length_on_ref")}seq_id(){return this._refID}_get(e){return e in this.data?this.data[e]:(this.data[e]=this._parseTag(e),this.data[e])}_tags(){this._parseAllTags();let e=["seq"];this.isSegmentUnmapped()||e.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&e.push("next_segment_position","pair_orientation"),e=e.concat(this._tagList||[]),Object.keys(this.data).forEach(n=>{n[0]!=="_"&&n!=="next_seq_id"&&e.push(n)});const t={};return e.filter(n=>{if(n in this.data&&this.data[n]===void 0||n==="CG"||n==="cg")return!1;const s=n.toLowerCase(),r=t[s];return t[s]=!0,!r})}parent(){}children(){return this.get("subfeatures")}id(){return this._id}mq(){const e=(this.get("_bin_mq_nl")&65280)>>8;return e===255?void 0:e}score(){return this.get("mq")}qual(){var e;return(e=this.qualRaw())===null||e===void 0?void 0:e.join(" ")}qualRaw(){if(this.isSegmentUnmapped())return;const{start:e,byteArray:t}=this.bytes,n=e+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes"),s=this.get("seq_length");return t.subarray(n,n+s)}strand(){return this.isReverseComplemented()?-1:1}multi_segment_next_segment_strand(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}name(){return this.get("_read_name")}_read_name(){const e=this.get("_l_read_name"),{byteArray:t,start:n}=this.bytes;return t.toString("ascii",n+36,n+36+e-1)}_parseTag(e){if(this._allTagsParsed)return;const{byteArray:t,start:n}=this.bytes;let s=this._tagOffset||n+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes")+this.get("seq_length");const r=this.bytes.end;let o;for(;s<r&&o!==e;){const a=String.fromCharCode(t[s],t[s+1]);o=a.toLowerCase();const l=String.fromCharCode(t[s+2]);s+=3;let h;switch(l){case"A":h=String.fromCharCode(t[s]),s+=1;break;case"i":h=t.readInt32LE(s),s+=4;break;case"I":h=t.readUInt32LE(s),s+=4;break;case"c":h=t.readInt8(s),s+=1;break;case"C":h=t.readUInt8(s),s+=1;break;case"s":h=t.readInt16LE(s),s+=2;break;case"S":h=t.readUInt16LE(s),s+=2;break;case"f":h=t.readFloatLE(s),s+=4;break;case"Z":case"H":for(h="";s<=r;){const c=t[s++];if(c===0)break;h+=String.fromCharCode(c)}break;case"B":{h="";const c=t[s++],u=String.fromCharCode(c),d=t.readInt32LE(s);if(s+=4,u==="i")if(a==="CG")for(let f=0;f<d;f++){const g=t.readInt32LE(s),p=g>>4,m=T_[g&15];h+=p+m,s+=4}else for(let f=0;f<d;f++)h+=t.readInt32LE(s),f+1<d&&(h+=","),s+=4;if(u==="I")if(a==="CG")for(let f=0;f<d;f++){const g=t.readUInt32LE(s),p=g>>4,m=T_[g&15];h+=p+m,s+=4}else for(let f=0;f<d;f++)h+=t.readUInt32LE(s),f+1<d&&(h+=","),s+=4;if(u==="s")for(let f=0;f<d;f++)h+=t.readInt16LE(s),f+1<d&&(h+=","),s+=2;if(u==="S")for(let f=0;f<d;f++)h+=t.readUInt16LE(s),f+1<d&&(h+=","),s+=2;if(u==="c")for(let f=0;f<d;f++)h+=t.readInt8(s),f+1<d&&(h+=","),s+=1;if(u==="C")for(let f=0;f<d;f++)h+=t.readUInt8(s),f+1<d&&(h+=","),s+=1;if(u==="f")for(let f=0;f<d;f++)h+=t.readFloatLE(s),f+1<d&&(h+=","),s+=4;break}default:console.warn(`Unknown BAM tag type '${l}', tags may be incomplete`),h=void 0,s=r}if(this._tagOffset=s,this._tagList.push(a),o===e)return h;this.data[o]=h}this._allTagsParsed=!0}_parseAllTags(){this._parseTag("")}_parseCigar(e){return e.match(/\d+\D/g).map(t=>[t.match(/\D/)[0].toUpperCase(),parseInt(t,10)])}isPaired(){return!!(this.flags&_o.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&_o.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&_o.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&_o.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&_o.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&_o.BAM_FMREVERSE)}isRead1(){return!!(this.flags&_o.BAM_FREAD1)}isRead2(){return!!(this.flags&_o.BAM_FREAD2)}isSecondary(){return!!(this.flags&_o.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&_o.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&_o.BAM_FDUP)}isSupplementary(){return!!(this.flags&_o.BAM_FSUPPLEMENTARY)}cigar(){if(this.isSegmentUnmapped())return;const{byteArray:e,start:t}=this.bytes,n=this.get("_n_cigar_op");let s=t+36+this.get("_l_read_name");const r=this.get("seq_length");let o="",a=0,l=e.readInt32LE(s),h=l>>4,c=T_[l&15];if(c==="S"&&h===r)return s+=4,l=e.readInt32LE(s),h=l>>4,c=T_[l&15],c!=="N"&&console.warn("CG tag with no N tag"),this.data.length_on_ref=h,this.get("CG");for(let u=0;u<n;++u)l=e.readInt32LE(s),h=l>>4,c=T_[l&15],o+=h+c,c!=="H"&&c!=="S"&&c!=="I"&&(a+=h),s+=4;return this.data.length_on_ref=a,o}_flags(){}length_on_ref(){return this.data.length_on_ref?this.data.length_on_ref:(this.get("cigar"),this.data.length_on_ref)}_n_cigar_op(){return this.get("_flag_nc")&65535}_l_read_name(){return this.get("_bin_mq_nl")&255}_seq_bytes(){return this.get("seq_length")+1>>1}getReadBases(){return this.seq()}seq(){const{byteArray:e,start:t}=this.bytes,n=t+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4,s=this.get("_seq_bytes"),r=this.get("seq_length");let o="",a=0;for(let l=0;l<s;++l){const h=e[n+l];o+=aV[(h&240)>>4],a++,a<r&&(o+=aV[h&15],a++)}return o}getPairOrientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let n=" ",s=" ";this.isRead1()?(n="1",s="2"):this.isRead2()&&(n="2",s="1");const r=[];return this.template_length()>0?(r[0]=e,r[1]=n,r[2]=t,r[3]=s):(r[2]=e,r[3]=n,r[0]=t,r[1]=s),r.join("")}return null}_bin_mq_nl(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}_flag_nc(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}seq_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}_next_refid(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}_next_pos(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}template_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}toJSON(){const e={};return Object.keys(this).forEach(t=>{t.charAt(0)==="_"||t==="bytes"||(e[t]=this[t])}),e}}function lSe(i){const e=i.split(/\r?\n/),t=[];return e.forEach(n=>{const[s,...r]=n.split(/\t/),o=r.map(a=>{const[l,h]=a.split(":",2);return{tag:l,value:h}});s&&t.push({tag:s.substr(1),data:o})}),t}const hSe=21840194,SA=1<<16;function xA(i){return[].concat(...i)}async function cSe(i){const e=[];for await(const t of i)e.push(t);return e}class uSe{constructor({bamFilehandle:e,bamPath:t,bamUrl:n,baiPath:s,baiFilehandle:r,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:h,fetchSizeLimit:c,chunkSizeLimit:u,yieldThreadTime:d=100,renameRefSeqs:f=g=>g}){if(this.featureCache=new OL({cache:new oSe({maxSize:50}),fill:async({chunk:g,opts:p},m)=>{const{data:b,cpositions:_,dpositions:w}=await this._readChunk({chunk:g,opts:{...p,signal:m}});return await this.readBamFeatures(b,_,w,g)}}),this.renameRefSeq=f,e)this.bam=e;else if(t)this.bam=new Qr(t);else if(n)this.bam=new Al(n);else throw new Error("unable to initialize bam");if(l)this.index=new yA({filehandle:l});else if(a)this.index=new yA({filehandle:new Qr(a)});else if(h)this.index=new yA({filehandle:new Al(h)});else if(r)this.index=new I_({filehandle:r});else if(s)this.index=new I_({filehandle:new Qr(s)});else if(o)this.index=new I_({filehandle:new Al(o)});else if(t)this.index=new I_({filehandle:new Qr(`${t}.bai`)});else if(n)this.index=new I_({filehandle:new Al(`${n}.bai`)});else throw new Error("unable to infer index format");this.fetchSizeLimit=c||5e8,this.chunkSizeLimit=u||3e8,this.yieldThreadTime=d}async getHeader(e={}){const t=jCe(e),n=await this.index.parse(t),s=n.firstDataLine?n.firstDataLine.blockPosition+65535:void 0;let r;if(s){const c=await this.bam.read(Buffer.alloc(s+SA),0,s+SA,0,t),{bytesRead:u}=c;if({buffer:r}=c,!u)throw new Error("Error reading header");u<s?r=r.subarray(0,u):r=r.subarray(0,s)}else r=await this.bam.readFile(t);const o=await Um(r);if(o.readInt32LE(0)!==hSe)throw new Error("Not a BAM file");const a=o.readInt32LE(4);this.header=o.toString("utf8",8,8+a);const{chrToIndex:l,indexToChr:h}=await this._readRefSeqs(a+8,65535,t);return this.chrToIndex=l,this.indexToChr=h,lSe(this.header)}async getHeaderText(e={}){return await this.getHeader(e),this.header}async _readRefSeqs(e,t,n={}){if(e>t)return this._readRefSeqs(e,t*2,n);const s=t+SA,{bytesRead:r,buffer:o}=await this.bam.read(Buffer.alloc(s),0,t,0,n);if(!r)throw new Error("Error reading refseqs from header");const a=await Um(o.subarray(0,Math.min(r,t))),l=a.readInt32LE(e);let h=e+4;const c={},u=[];for(let d=0;d<l;d+=1){const f=a.readInt32LE(h),g=this.renameRefSeq(a.toString("utf8",h+4,h+4+f-1)),p=a.readInt32LE(h+f+4);if(c[g]=d,u.push({refName:g,length:p}),h=h+8+f,h>a.length)return console.warn(`BAM header is very big.  Re-fetching ${t} bytes.`),this._readRefSeqs(e,t*2,n)}return{chrToIndex:c,indexToChr:u}}async getRecordsForRange(e,t,n,s={viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5}){return xA(await cSe(this.streamRecordsForRange(e,t,n,s)))}async*streamRecordsForRange(e,t,n,s={}){const{signal:r}=s,o=this.chrToIndex&&this.chrToIndex[e];let a;if(!(o>=0))a=[];else if(a=await this.index.blocksForRange(o,t-1,n,s),!a)throw new Error("Error in index fetch");for(let h=0;h<a.length;h+=1){await fQ(r);const c=a[h].fetchedSize();if(c>this.chunkSizeLimit)throw new Error(`Too many BAM features. BAM chunk size ${c} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit}`)}const l=a.map(h=>h.fetchedSize()).reduce((h,c)=>h+c,0);if(l>this.fetchSizeLimit)throw new Error(`data size of ${l.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);yield*this._fetchChunkFeatures(a,o,t,n,s)}async*_fetchChunkFeatures(e,t,n,s,r){const{viewAsPairs:o=!1}=r,a=[];let l=!1;for(let h=0;h<e.length;h++){const c=e[h],u=await this.featureCache.get(c.toString(),{chunk:c,opts:r},r.signal),d=[];for(let f=0;f<u.length;f+=1){const g=u[f];if(g.seq_id()===t)if(g.get("start")>=s){l=!0;break}else g.get("end")>=n&&d.push(g)}if(a.push(d),yield d,l)break}dQ(r.signal),o&&(yield this.fetchPairs(t,a,r))}async fetchPairs(e,t,n){const{pairAcrossChr:s=!1,maxInsertSize:r=2e5}=n,o={},a={};t.map(d=>{const f={};for(let g=0;g<d.length;g++){const p=d[g].name(),m=d[g].id();f[p]||(f[p]=0),f[p]++,a[m]=1}nSe(f).forEach(([g,p])=>{p===1&&(o[g]=!0)})});const l=[];t.map(d=>{for(let f=0;f<d.length;f++){const g=d[f],p=g.name(),m=g.get("start"),b=g._next_pos(),_=g._next_refid();o[p]&&(s||_===e&&Math.abs(m-b)<r)&&l.push(this.index.blocksForRange(_,b,b+1,n))}});const h=xA(await Promise.all(l)).sort().filter((d,f,g)=>!f||d.toString()!==g[f-1].toString()),c=h.map(d=>d.fetchedSize()).reduce((d,f)=>d+f,0);if(c>this.fetchSizeLimit)throw new Error(`data size of ${c.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const u=h.map(async d=>{const{data:f,cpositions:g,dpositions:p,chunk:m}=await this._readChunk({chunk:d,opts:n}),b=await this.readBamFeatures(f,g,p,m),_=[];for(let w=0;w<b.length;w+=1){const y=b[w];o[y.get("name")]&&!a[y.id()]&&_.push(y)}return _});return xA(await Promise.all(u))}async _readChunk({chunk:e,opts:t}){const n=e.fetchedSize(),{buffer:s,bytesRead:r}=await this.bam.read(Buffer.alloc(n),0,n,e.minv.blockPosition,t),{buffer:o,cpositions:a,dpositions:l}=await oY(s.subarray(0,Math.min(r,n)),e);return{data:o,cpositions:a,dpositions:l,chunk:e}}async readBamFeatures(e,t,n,s){let r=0;const o=[];let a=0,l=+Date.now();for(;r+4<e.length;){const h=e.readInt32LE(r),c=r+4+h-1;if(n){for(;r+s.minv.dataPosition>=n[a++];);a--}if(c<e.length){const u=new aSe({bytes:{byteArray:e,start:r,end:c},fileOffset:t?t[a]*256+(r-n[a])+s.minv.dataPosition+1:eSe.signed(e.slice(r,c))});o.push(u),this.yieldThreadTime&&+Date.now()-l>this.yieldThreadTime&&(await UCe(1),l=+Date.now())}r=c+1}return o}async hasRefSeq(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.hasRefSeq(t)}async lineCount(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.lineCount(t)}async indexCov(e,t,n){await this.index.parse();const s=this.chrToIndex&&this.chrToIndex[e];return this.index.indexCov(s,t,n)}async blocksForRange(e,t,n,s){await this.index.parse();const r=this.chrToIndex&&this.chrToIndex[e];return this.index.blocksForRange(r,t,n,s)}}(function(){(function(i){(function(e){var t={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function n(D){return D&&DataView.prototype.isPrototypeOf(D)}if(t.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(D){return D&&s.indexOf(Object.prototype.toString.call(D))>-1};function o(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function a(D){return typeof D!="string"&&(D=String(D)),D}function l(D){var T={next:function(){var M=D.shift();return{done:M===void 0,value:M}}};return t.iterable&&(T[Symbol.iterator]=function(){return T}),T}function h(D){this.map={},D instanceof h?D.forEach(function(T,M){this.append(M,T)},this):Array.isArray(D)?D.forEach(function(T){this.append(T[0],T[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(T){this.append(T,D[T])},this)}h.prototype.append=function(D,T){D=o(D),T=a(T);var M=this.map[D];this.map[D]=M?M+", "+T:T},h.prototype.delete=function(D){delete this.map[o(D)]},h.prototype.get=function(D){return D=o(D),this.has(D)?this.map[D]:null},h.prototype.has=function(D){return this.map.hasOwnProperty(o(D))},h.prototype.set=function(D,T){this.map[o(D)]=a(T)},h.prototype.forEach=function(D,T){for(var M in this.map)this.map.hasOwnProperty(M)&&D.call(T,this.map[M],M,this)},h.prototype.keys=function(){var D=[];return this.forEach(function(T,M){D.push(M)}),l(D)},h.prototype.values=function(){var D=[];return this.forEach(function(T){D.push(T)}),l(D)},h.prototype.entries=function(){var D=[];return this.forEach(function(T,M){D.push([M,T])}),l(D)},t.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function c(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function u(D){return new Promise(function(T,M){D.onload=function(){T(D.result)},D.onerror=function(){M(D.error)}})}function d(D){var T=new FileReader,M=u(T);return T.readAsArrayBuffer(D),M}function f(D){var T=new FileReader,M=u(T);return T.readAsText(D),M}function g(D){for(var T=new Uint8Array(D),M=new Array(T.length),j=0;j<T.length;j++)M[j]=String.fromCharCode(T[j]);return M.join("")}function p(D){if(D.slice)return D.slice(0);var T=new Uint8Array(D.byteLength);return T.set(new Uint8Array(D)),T.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:t.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:t.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():t.arrayBuffer&&t.blob&&n(D)?(this._bodyArrayBuffer=p(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||r(D))?this._bodyArrayBuffer=p(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var D=c(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var D=c(this);if(D)return D;if(this._bodyBlob)return f(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(D){var T=D.toUpperCase();return b.indexOf(T)>-1?T:D}function w(D,T){T=T||{};var M=T.body;if(D instanceof w){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,T.headers||(this.headers=new h(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!M&&D._bodyInit!=null&&(M=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new h(T.headers)),this.method=_(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function y(D){var T=new FormData;return D.trim().split("&").forEach(function(M){if(M){var j=M.split("="),$=j.shift().replace(/\+/g," "),ie=j.join("=").replace(/\+/g," ");T.append(decodeURIComponent($),decodeURIComponent(ie))}}),T}function x(D){var T=new h,M=D.replace(/\r?\n[\t ]+/g," ");return M.split(/\r?\n/).forEach(function(j){var $=j.split(":"),ie=$.shift().trim();if(ie){var pe=$.join(":").trim();T.append(ie,pe)}}),T}m.call(w.prototype);function L(D,T){T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in T?T.statusText:"OK",this.headers=new h(T.headers),this.url=T.url||"",this._initBody(D)}m.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},L.error=function(){var D=new L(null,{status:0,statusText:""});return D.type="error",D};var S=[301,302,303,307,308];L.redirect=function(D,T){if(S.indexOf(T)===-1)throw new RangeError("Invalid status code");return new L(null,{status:T,headers:{location:D}})},e.DOMException=i.DOMException;try{new e.DOMException}catch{e.DOMException=function(D,T){this.message=D,this.name=T;var M=Error(D);this.stack=M.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(D,T){return new Promise(function(M,j){var $=new w(D,T);if($.signal&&$.signal.aborted)return j(new e.DOMException("Aborted","AbortError"));var ie=new XMLHttpRequest;function pe(){ie.abort()}ie.onload=function(){var be={status:ie.status,statusText:ie.statusText,headers:x(ie.getAllResponseHeaders()||"")};be.url="responseURL"in ie?ie.responseURL:be.headers.get("X-Request-URL");var ye="response"in ie?ie.response:ie.responseText;M(new L(ye,be))},ie.onerror=function(){j(new TypeError("Network request failed"))},ie.ontimeout=function(){j(new TypeError("Network request failed"))},ie.onabort=function(){j(new e.DOMException("Aborted","AbortError"))},ie.open($.method,$.url,!0),$.credentials==="include"?ie.withCredentials=!0:$.credentials==="omit"&&(ie.withCredentials=!1),"responseType"in ie&&t.blob&&(ie.responseType="blob"),$.headers.forEach(function(be,ye){ie.setRequestHeader(ye,be)}),$.signal&&($.signal.addEventListener("abort",pe),ie.onreadystatechange=function(){ie.readyState===4&&$.signal.removeEventListener("abort",pe)}),ie.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return k.polyfill=!0,i.fetch||(i.fetch=k,i.Headers=h,i.Request=w,i.Response=L),e.Headers=h,e.Request=w,e.Response=L,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:Qv)})();class dSe extends Qw(gg){constructor(e,t){const n={channel:"x",windowSize:2e4,...e};if(super(t,n.channel),Yo(this,"lastRequestId",0),Yo(this,"chrPrefixFixer",r=>r),this.params=n,!this.params.url)throw new Error("No URL provided for BamSource");const s=r=>new Al(Xw(r,this.view.getBaseUrl()));this.bam=new uSe({bamFilehandle:s(this.params.url),baiFilehandle:s(this.params.indexUrl??this.params.url+".bai")}),this.headerPromise=this.bam.getHeader(),this.headerPromise.then(r=>{var o,a;const l=this.genome.hasChrPrefix(),h=(a=(o=this.bam.indexToChr)==null?void 0:o[0])==null?void 0:a.refName.startsWith("chr");l&&!h?this.chrPrefixFixer=c=>c.replace("chr",""):!l&&h&&(this.chrPrefixFixer=c=>"chr"+c)})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;await this.headerPromise;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.bam.getRecordsForRange(this.chrPrefixFixer(o.chrom),o.startPos,o.endPos).then(a=>a.map(l=>({chrom:o.chrom,start:l.get("start"),end:l.get("end"),name:l.get("name"),MD:l.get("MD"),cigar:l.get("cigar"),mapq:l.get("mq"),strand:l.get("strand")===1?"+":"-"})))));this.publishData(r.flat())}}}var l5={exports:{}},rm=typeof Reflect=="object"?Reflect:null,lV=rm&&typeof rm.apply=="function"?rm.apply:function(i,e,t){return Function.prototype.apply.call(i,e,t)},SS;rm&&typeof rm.ownKeys=="function"?SS=rm.ownKeys:Object.getOwnPropertySymbols?SS=function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:SS=function(i){return Object.getOwnPropertyNames(i)};function fSe(i){console&&console.warn&&console.warn(i)}var mQ=Number.isNaN||function(i){return i!==i};function Ci(){Ci.init.call(this)}l5.exports=Ci;l5.exports.once=_Se;Ci.EventEmitter=Ci;Ci.prototype._events=void 0;Ci.prototype._eventsCount=0;Ci.prototype._maxListeners=void 0;var hV=10;function BL(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Ci,"defaultMaxListeners",{enumerable:!0,get:function(){return hV},set:function(i){if(typeof i!="number"||i<0||mQ(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");hV=i}});Ci.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ci.prototype.setMaxListeners=function(i){if(typeof i!="number"||i<0||mQ(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this};function _Q(i){return i._maxListeners===void 0?Ci.defaultMaxListeners:i._maxListeners}Ci.prototype.getMaxListeners=function(){return _Q(this)};Ci.prototype.emit=function(i){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=i==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var r;if(e.length>0&&(r=e[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var a=s[i];if(a===void 0)return!1;if(typeof a=="function")lV(a,this,e);else for(var l=a.length,h=CQ(a,l),t=0;t<l;++t)lV(h[t],this,e);return!0};function bQ(i,e,t,n){var s,r,o;if(BL(t),r=i._events,r===void 0?(r=i._events=Object.create(null),i._eventsCount=0):(r.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),r=i._events),o=r[e]),o===void 0)o=r[e]=t,++i._eventsCount;else if(typeof o=="function"?o=r[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),s=_Q(i),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=i,a.type=e,a.count=o.length,fSe(a)}return i}Ci.prototype.addListener=function(i,e){return bQ(this,i,e,!1)};Ci.prototype.on=Ci.prototype.addListener;Ci.prototype.prependListener=function(i,e){return bQ(this,i,e,!0)};function gSe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vQ(i,e,t){var n={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},s=gSe.bind(n);return s.listener=t,n.wrapFn=s,s}Ci.prototype.once=function(i,e){return BL(e),this.on(i,vQ(this,i,e)),this};Ci.prototype.prependOnceListener=function(i,e){return BL(e),this.prependListener(i,vQ(this,i,e)),this};Ci.prototype.removeListener=function(i,e){var t,n,s,r,o;if(BL(e),n=this._events,n===void 0)return this;if(t=n[i],t===void 0)return this;if(t===e||t.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[i],n.removeListener&&this.emit("removeListener",i,t.listener||e));else if(typeof t!="function"){for(s=-1,r=t.length-1;r>=0;r--)if(t[r]===e||t[r].listener===e){o=t[r].listener,s=r;break}if(s<0)return this;s===0?t.shift():pSe(t,s),t.length===1&&(n[i]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",i,o||e)}return this};Ci.prototype.off=Ci.prototype.removeListener;Ci.prototype.removeAllListeners=function(i){var e,t,n;if(t=this._events,t===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[i]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete t[i]),this;if(arguments.length===0){var s=Object.keys(t),r;for(n=0;n<s.length;++n)r=s[n],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=t[i],typeof e=="function")this.removeListener(i,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(i,e[n]);return this};function wQ(i,e,t){var n=i._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?mSe(s):CQ(s,s.length)}Ci.prototype.listeners=function(i){return wQ(this,i,!0)};Ci.prototype.rawListeners=function(i){return wQ(this,i,!1)};Ci.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):yQ.call(i,e)};Ci.prototype.listenerCount=yQ;function yQ(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ci.prototype.eventNames=function(){return this._eventsCount>0?SS(this._events):[]};function CQ(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i[n];return t}function pSe(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function mSe(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function _Se(i,e){return new Promise(function(t,n){function s(o){i.removeListener(e,r),n(o)}function r(){typeof i.removeListener=="function"&&i.removeListener("error",s),t([].slice.call(arguments))}SQ(i,e,r,{once:!0}),e!=="error"&&bSe(i,s,{once:!0})})}function bSe(i,e,t){typeof i.on=="function"&&SQ(i,"error",e,t)}function SQ(i,e,t,n){if(typeof i.on=="function")n.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function s(r){n.once&&i.removeEventListener(e,s),t(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var h5=l5.exports,pM={exports:{}};typeof Object.create=="function"?pM.exports=function(i,e){e&&(i.super_=e,i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:pM.exports=function(i,e){if(e){i.super_=e;var t=function(){};t.prototype=e.prototype,i.prototype=new t,i.prototype.constructor=i}};var K0=pM.exports,cV,uV;function xQ(){return uV||(uV=1,cV=h5.EventEmitter),cV}const DQ=Tbe(Wbe);var DA,dV;function vSe(){if(dV)return DA;dV=1;function i(d,f){var g=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);f&&(p=p.filter(function(m){return Object.getOwnPropertyDescriptor(d,m).enumerable})),g.push.apply(g,p)}return g}function e(d){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?i(Object(g),!0).forEach(function(p){t(d,p,g[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(g)):i(Object(g)).forEach(function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(g,p))})}return d}function t(d,f,g){return f in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g,d}function n(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function s(d,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}function r(d,f,g){return f&&s(d.prototype,f),g&&s(d,g),d}var o=ps,a=o.Buffer,l=DQ,h=l.inspect,c=h&&h.custom||"inspect";function u(d,f,g){a.prototype.copy.call(d,f,g)}return DA=function(){function d(){n(this,d),this.head=null,this.tail=null,this.length=0}return r(d,[{key:"push",value:function(f){var g={data:f,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(f){var g={data:f,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var f=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,f}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(f){if(this.length===0)return"";for(var g=this.head,p=""+g.data;g=g.next;)p+=f+g.data;return p}},{key:"concat",value:function(f){if(this.length===0)return a.alloc(0);for(var g=a.allocUnsafe(f>>>0),p=this.head,m=0;p;)u(p.data,g,m),m+=p.data.length,p=p.next;return g}},{key:"consume",value:function(f,g){var p;return f<this.head.data.length?(p=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):f===this.head.data.length?p=this.shift():p=g?this._getString(f):this._getBuffer(f),p}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var g=this.head,p=1,m=g.data;for(f-=m.length;g=g.next;){var b=g.data,_=f>b.length?b.length:f;if(_===b.length?m+=b:m+=b.slice(0,f),f-=_,f===0){_===b.length?(++p,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=b.slice(_));break}++p}return this.length-=p,m}},{key:"_getBuffer",value:function(f){var g=a.allocUnsafe(f),p=this.head,m=1;for(p.data.copy(g),f-=p.data.length;p=p.next;){var b=p.data,_=f>b.length?b.length:f;if(b.copy(g,g.length-f,0,_),f-=_,f===0){_===b.length?(++m,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=b.slice(_));break}++m}return this.length-=m,g}},{key:c,value:function(f,g){return h(this,e({},g,{depth:0,customInspect:!1}))}}]),d}(),DA}var kA,fV;function kQ(){if(fV)return kA;fV=1;function i(o,a){var l=this,h=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return h||c?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,o)):process.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(u){!a&&u?l._writableState?l._writableState.errorEmitted?process.nextTick(t,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,u)):process.nextTick(e,l,u):a?(process.nextTick(t,l),a(u)):process.nextTick(t,l)}),this)}function e(o,a){s(o,a),t(o)}function t(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}function r(o,a){var l=o._readableState,h=o._writableState;l&&l.autoDestroy||h&&h.autoDestroy?o.destroy(a):o.emit("error",a)}return kA={destroy:i,undestroy:n,errorOrDestroy:r},kA}var LA={},gV;function Z0(){if(gV)return LA;gV=1;function i(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function t(a,l,h){h||(h=Error);function c(d,f,g){return typeof l=="string"?l:l(d,f,g)}var u=function(d){i(f,d);function f(g,p,m){return d.call(this,c(g,p,m))||this}return f}(h);u.prototype.name=h.name,u.prototype.code=a,e[a]=u}function n(a,l){if(Array.isArray(a)){var h=a.length;return a=a.map(function(c){return String(c)}),h>2?"one of ".concat(l," ").concat(a.slice(0,h-1).join(", "),", or ")+a[h-1]:h===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function s(a,l,h){return a.substr(!h||h<0?0:+h,l.length)===l}function r(a,l,h){return(h===void 0||h>a.length)&&(h=a.length),a.substring(h-l.length,h)===l}function o(a,l,h){return typeof h!="number"&&(h=0),h+l.length>a.length?!1:a.indexOf(l,h)!==-1}return t("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(a,l,h){var c;typeof l=="string"&&s(l,"not ")?(c="must not be",l=l.replace(/^not /,"")):c="must be";var u;if(r(a," argument"))u="The ".concat(a," ").concat(c," ").concat(n(l,"type"));else{var d=o(a,".")?"property":"argument";u='The "'.concat(a,'" ').concat(d," ").concat(c," ").concat(n(l,"type"))}return u+=". Received type ".concat(typeof h),u},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),LA.codes=e,LA}var EA,pV;function LQ(){if(pV)return EA;pV=1;var i=Z0().codes.ERR_INVALID_OPT_VALUE;function e(n,s,r){return n.highWaterMark!=null?n.highWaterMark:s?n[r]:null}function t(n,s,r,o){var a=e(s,o,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?r:"highWaterMark";throw new i(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return EA={getHighWaterMark:t},EA}var AA,mV;function wSe(){if(mV)return AA;mV=1,AA=i;function i(t,n){if(e("noDeprecation"))return t;var s=!1;function r(){if(!s){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),s=!0}return t.apply(this,arguments)}return r}function e(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return AA}var IA,_V;function EQ(){if(_V)return IA;_V=1,IA=k;function i(te){var se=this;this.next=null,this.entry=null,this.finish=function(){mi(se,te)}}var e;k.WritableState=L;var t={deprecate:wSe()},n=xQ(),s=ps.Buffer,r=globalThis.Uint8Array||function(){};function o(te){return s.from(te)}function a(te){return s.isBuffer(te)||te instanceof r}var l=kQ(),h=LQ(),c=h.getHighWaterMark,u=Z0().codes,d=u.ERR_INVALID_ARG_TYPE,f=u.ERR_METHOD_NOT_IMPLEMENTED,g=u.ERR_MULTIPLE_CALLBACK,p=u.ERR_STREAM_CANNOT_PIPE,m=u.ERR_STREAM_DESTROYED,b=u.ERR_STREAM_NULL_VALUES,_=u.ERR_STREAM_WRITE_AFTER_END,w=u.ERR_UNKNOWN_ENCODING,y=l.errorOrDestroy;K0(k,n);function x(){}function L(te,se,me){e=e||Km(),te=te||{},typeof me!="boolean"&&(me=se instanceof e),this.objectMode=!!te.objectMode,me&&(this.objectMode=this.objectMode||!!te.writableObjectMode),this.highWaterMark=c(this,te,"writableHighWaterMark",me),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var G=te.decodeStrings===!1;this.decodeStrings=!G,this.defaultEncoding=te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){be(se,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=te.emitClose!==!1,this.autoDestroy=!!te.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}L.prototype.getBuffer=function(){for(var te=this.bufferedRequest,se=[];te;)se.push(te),te=te.next;return se},function(){try{Object.defineProperty(L.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var S;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(te){return S.call(this,te)?!0:this!==k?!1:te&&te._writableState instanceof L}})):S=function(te){return te instanceof this};function k(te){e=e||Km();var se=this instanceof e;if(!se&&!S.call(k,this))return new k(te);this._writableState=new L(te,this,se),this.writable=!0,te&&(typeof te.write=="function"&&(this._write=te.write),typeof te.writev=="function"&&(this._writev=te.writev),typeof te.destroy=="function"&&(this._destroy=te.destroy),typeof te.final=="function"&&(this._final=te.final)),n.call(this)}k.prototype.pipe=function(){y(this,new p)};function D(te,se){var me=new _;y(te,me),process.nextTick(se,me)}function T(te,se,me,G){var fe;return me===null?fe=new b:typeof me!="string"&&!se.objectMode&&(fe=new d("chunk",["string","Buffer"],me)),fe?(y(te,fe),process.nextTick(G,fe),!1):!0}k.prototype.write=function(te,se,me){var G=this._writableState,fe=!1,R=!G.objectMode&&a(te);return R&&!s.isBuffer(te)&&(te=o(te)),typeof se=="function"&&(me=se,se=null),R?se="buffer":se||(se=G.defaultEncoding),typeof me!="function"&&(me=x),G.ending?D(this,me):(R||T(this,G,te,me))&&(G.pendingcb++,fe=j(this,G,R,te,se,me)),fe},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var te=this._writableState;te.corked&&(te.corked--,!te.writing&&!te.corked&&!te.bufferProcessing&&te.bufferedRequest&&we(this,te))},k.prototype.setDefaultEncoding=function(te){if(typeof te=="string"&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new w(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function M(te,se,me){return!te.objectMode&&te.decodeStrings!==!1&&typeof se=="string"&&(se=s.from(se,me)),se}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function j(te,se,me,G,fe,R){if(!me){var E=M(se,G,fe);G!==E&&(me=!0,fe="buffer",G=E)}var he=se.objectMode?1:G.length;se.length+=he;var ce=se.length<se.highWaterMark;if(ce||(se.needDrain=!0),se.writing||se.corked){var je=se.lastBufferedRequest;se.lastBufferedRequest={chunk:G,encoding:fe,isBuf:me,callback:R,next:null},je?je.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else $(te,se,!1,he,G,fe,R);return ce}function $(te,se,me,G,fe,R,E){se.writelen=G,se.writecb=E,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new m("write")):me?te._writev(fe,se.onwrite):te._write(fe,R,se.onwrite),se.sync=!1}function ie(te,se,me,G,fe){--se.pendingcb,me?(process.nextTick(fe,G),process.nextTick(pt,te,se),te._writableState.errorEmitted=!0,y(te,G)):(fe(G),te._writableState.errorEmitted=!0,y(te,G),pt(te,se))}function pe(te){te.writing=!1,te.writecb=null,te.length-=te.writelen,te.writelen=0}function be(te,se){var me=te._writableState,G=me.sync,fe=me.writecb;if(typeof fe!="function")throw new g;if(pe(me),se)ie(te,me,G,se,fe);else{var R=Dt(me)||te.destroyed;!R&&!me.corked&&!me.bufferProcessing&&me.bufferedRequest&&we(te,me),G?process.nextTick(ye,te,me,R,fe):ye(te,me,R,fe)}}function ye(te,se,me,G){me||Ee(te,se),se.pendingcb--,G(),pt(te,se)}function Ee(te,se){se.length===0&&se.needDrain&&(se.needDrain=!1,te.emit("drain"))}function we(te,se){se.bufferProcessing=!0;var me=se.bufferedRequest;if(te._writev&&me&&me.next){var G=se.bufferedRequestCount,fe=new Array(G),R=se.corkedRequestsFree;R.entry=me;for(var E=0,he=!0;me;)fe[E]=me,me.isBuf||(he=!1),me=me.next,E+=1;fe.allBuffers=he,$(te,se,!0,se.length,fe,"",R.finish),se.pendingcb++,se.lastBufferedRequest=null,R.next?(se.corkedRequestsFree=R.next,R.next=null):se.corkedRequestsFree=new i(se),se.bufferedRequestCount=0}else{for(;me;){var ce=me.chunk,je=me.encoding,Me=me.callback,Je=se.objectMode?1:ce.length;if($(te,se,!1,Je,ce,je,Me),me=me.next,se.bufferedRequestCount--,se.writing)break}me===null&&(se.lastBufferedRequest=null)}se.bufferedRequest=me,se.bufferProcessing=!1}k.prototype._write=function(te,se,me){me(new f("_write()"))},k.prototype._writev=null,k.prototype.end=function(te,se,me){var G=this._writableState;return typeof te=="function"?(me=te,te=null,se=null):typeof se=="function"&&(me=se,se=null),te!=null&&this.write(te,se),G.corked&&(G.corked=1,this.uncork()),G.ending||lt(this,G,me),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Dt(te){return te.ending&&te.length===0&&te.bufferedRequest===null&&!te.finished&&!te.writing}function $e(te,se){te._final(function(me){se.pendingcb--,me&&y(te,me),se.prefinished=!0,te.emit("prefinish"),pt(te,se)})}function Qe(te,se){!se.prefinished&&!se.finalCalled&&(typeof te._final=="function"&&!se.destroyed?(se.pendingcb++,se.finalCalled=!0,process.nextTick($e,te,se)):(se.prefinished=!0,te.emit("prefinish")))}function pt(te,se){var me=Dt(se);if(me&&(Qe(te,se),se.pendingcb===0&&(se.finished=!0,te.emit("finish"),se.autoDestroy))){var G=te._readableState;(!G||G.autoDestroy&&G.endEmitted)&&te.destroy()}return me}function lt(te,se,me){se.ending=!0,pt(te,se),me&&(se.finished?process.nextTick(me):te.once("finish",me)),se.ended=!0,te.writable=!1}function mi(te,se,me){var G=te.entry;for(te.entry=null;G;){var fe=G.callback;se.pendingcb--,fe(me),G=G.next}se.corkedRequestsFree.next=te}return Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(te){this._writableState&&(this._writableState.destroyed=te)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(te,se){se(te)},IA}var TA,bV;function Km(){if(bV)return TA;bV=1;var i=Object.keys||function(h){var c=[];for(var u in h)c.push(u);return c};TA=o;var e=AQ(),t=EQ();K0(o,e);for(var n=i(t.prototype),s=0;s<n.length;s++){var r=n[s];o.prototype[r]||(o.prototype[r]=t.prototype[r])}function o(h){if(!(this instanceof o))return new o(h);e.call(this,h),t.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(l,this)}function l(h){h.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),TA}var mM={},_M={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(i,e){var t=ps,n=t.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?i.exports=t:(s(t,e),e.Buffer=r);function r(o,a,l){return n(o,a,l)}r.prototype=Object.create(n.prototype),s(n,r),r.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},r.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=n(o);return a!==void 0?typeof l=="string"?h.fill(a,l):h.fill(a):h.fill(0),h},r.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},r.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(_M,_M.exports);var ySe=_M.exports,c5=ySe.Buffer,vV=c5.isEncoding||function(i){switch(i=""+i,i&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function CSe(i){if(!i)return"utf8";for(var e;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(e)return;i=(""+i).toLowerCase(),e=!0}}function SSe(i){var e=CSe(i);if(typeof e!="string"&&(c5.isEncoding===vV||!vV(i)))throw new Error("Unknown encoding: "+i);return e||i}var xSe=mM.StringDecoder=ty;function ty(i){this.encoding=SSe(i);var e;switch(this.encoding){case"utf16le":this.text=ISe,this.end=TSe,e=4;break;case"utf8":this.fillLast=LSe,e=4;break;case"base64":this.text=NSe,this.end=MSe,e=3;break;default:this.write=RSe,this.end=OSe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c5.allocUnsafe(e)}ty.prototype.write=function(i){if(i.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(i),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<i.length?e?e+this.text(i,t):this.text(i,t):e||""};ty.prototype.end=ASe;ty.prototype.text=ESe;ty.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length};function NA(i){return i<=127?0:i>>5===6?2:i>>4===14?3:i>>3===30?4:i>>6===2?-1:-2}function DSe(i,e,t){var n=e.length-1;if(n<t)return 0;var s=NA(e[n]);return s>=0?(s>0&&(i.lastNeed=s-1),s):--n<t||s===-2?0:(s=NA(e[n]),s>=0?(s>0&&(i.lastNeed=s-2),s):--n<t||s===-2?0:(s=NA(e[n]),s>=0?(s>0&&(s===2?s=0:i.lastNeed=s-3),s):0))}function kSe(i,e,t){if((e[0]&192)!==128)return i.lastNeed=0,"";if(i.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return i.lastNeed=1,"";if(i.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return i.lastNeed=2,""}}function LSe(i){var e=this.lastTotal-this.lastNeed,t=kSe(this,i);if(t!==void 0)return t;if(this.lastNeed<=i.length)return i.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,e,0,i.length),this.lastNeed-=i.length}function ESe(i,e){var t=DSe(this,i,e);if(!this.lastNeed)return i.toString("utf8",e);this.lastTotal=t;var n=i.length-(t-this.lastNeed);return i.copy(this.lastChar,0,n),i.toString("utf8",e,n)}function ASe(i){var e=i&&i.length?this.write(i):"";return this.lastNeed?e+"":e}function ISe(i,e){if((i.length-e)%2===0){var t=i.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",e,i.length-1)}function TSe(i){var e=i&&i.length?this.write(i):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function NSe(i,e){var t=(i.length-e)%3;return t===0?i.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",e,i.length-t))}function MSe(i){var e=i&&i.length?this.write(i):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function RSe(i){return i.toString(this.encoding)}function OSe(i){return i&&i.length?this.write(i):""}var MA,wV;function u5(){if(wV)return MA;wV=1;var i=Z0().codes.ERR_STREAM_PREMATURE_CLOSE;function e(r){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];r.apply(this,l)}}}function t(){}function n(r){return r.setHeader&&typeof r.abort=="function"}function s(r,o,a){if(typeof o=="function")return s(r,null,o);o||(o={}),a=e(a||t);var l=o.readable||o.readable!==!1&&r.readable,h=o.writable||o.writable!==!1&&r.writable,c=function(){r.writable||d()},u=r._writableState&&r._writableState.finished,d=function(){h=!1,u=!0,l||a.call(r)},f=r._readableState&&r._readableState.endEmitted,g=function(){l=!1,f=!0,h||a.call(r)},p=function(_){a.call(r,_)},m=function(){var _;if(l&&!f)return(!r._readableState||!r._readableState.ended)&&(_=new i),a.call(r,_);if(h&&!u)return(!r._writableState||!r._writableState.ended)&&(_=new i),a.call(r,_)},b=function(){r.req.on("finish",d)};return n(r)?(r.on("complete",d),r.on("abort",m),r.req?b():r.on("request",b)):h&&!r._writableState&&(r.on("end",c),r.on("close",c)),r.on("end",g),r.on("finish",d),o.error!==!1&&r.on("error",p),r.on("close",m),function(){r.removeListener("complete",d),r.removeListener("abort",m),r.removeListener("request",b),r.req&&r.req.removeListener("finish",d),r.removeListener("end",c),r.removeListener("close",c),r.removeListener("finish",d),r.removeListener("end",g),r.removeListener("error",p),r.removeListener("close",m)}}return MA=s,MA}var RA,yV;function PSe(){if(yV)return RA;yV=1;var i;function e(b,_,w){return _ in b?Object.defineProperty(b,_,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[_]=w,b}var t=u5(),n=Symbol("lastResolve"),s=Symbol("lastReject"),r=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),h=Symbol("stream");function c(b,_){return{value:b,done:_}}function u(b){var _=b[n];if(_!==null){var w=b[h].read();w!==null&&(b[a]=null,b[n]=null,b[s]=null,_(c(w,!1)))}}function d(b){process.nextTick(u,b)}function f(b,_){return function(w,y){b.then(function(){if(_[o]){w(c(void 0,!0));return}_[l](w,y)},y)}}var g=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((i={get stream(){return this[h]},next:function(){var b=this,_=this[r];if(_!==null)return Promise.reject(_);if(this[o])return Promise.resolve(c(void 0,!0));if(this[h].destroyed)return new Promise(function(L,S){process.nextTick(function(){b[r]?S(b[r]):L(c(void 0,!0))})});var w=this[a],y;if(w)y=new Promise(f(w,this));else{var x=this[h].read();if(x!==null)return Promise.resolve(c(x,!1));y=new Promise(this[l])}return this[a]=y,y}},e(i,Symbol.asyncIterator,function(){return this}),e(i,"return",function(){var b=this;return new Promise(function(_,w){b[h].destroy(null,function(y){if(y){w(y);return}_(c(void 0,!0))})})}),i),g),m=function(b){var _,w=Object.create(p,(_={},e(_,h,{value:b,writable:!0}),e(_,n,{value:null,writable:!0}),e(_,s,{value:null,writable:!0}),e(_,r,{value:null,writable:!0}),e(_,o,{value:b._readableState.endEmitted,writable:!0}),e(_,l,{value:function(y,x){var L=w[h].read();L?(w[a]=null,w[n]=null,w[s]=null,y(c(L,!1))):(w[n]=y,w[s]=x)},writable:!0}),_));return w[a]=null,t(b,function(y){if(y&&y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=w[s];x!==null&&(w[a]=null,w[n]=null,w[s]=null,x(y)),w[r]=y;return}var L=w[n];L!==null&&(w[a]=null,w[n]=null,w[s]=null,L(c(void 0,!0))),w[o]=!0}),b.on("readable",d.bind(null,w)),w};return RA=m,RA}var CV,SV;function FSe(){return SV||(SV=1,CV=function(){throw new Error("Readable.from is not available in the browser")}),CV}var OA,xV;function AQ(){if(xV)return OA;xV=1,OA=D;var i;D.ReadableState=k,h5.EventEmitter;var e=function(R,E){return R.listeners(E).length},t=xQ(),n=ps.Buffer,s=globalThis.Uint8Array||function(){};function r(R){return n.from(R)}function o(R){return n.isBuffer(R)||R instanceof s}var a=DQ,l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var h=vSe(),c=kQ(),u=LQ(),d=u.getHighWaterMark,f=Z0().codes,g=f.ERR_INVALID_ARG_TYPE,p=f.ERR_STREAM_PUSH_AFTER_EOF,m=f.ERR_METHOD_NOT_IMPLEMENTED,b=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_,w,y;K0(D,t);var x=c.errorOrDestroy,L=["error","close","destroy","pause","resume"];function S(R,E,he){if(typeof R.prependListener=="function")return R.prependListener(E,he);!R._events||!R._events[E]?R.on(E,he):Array.isArray(R._events[E])?R._events[E].unshift(he):R._events[E]=[he,R._events[E]]}function k(R,E,he){i=i||Km(),R=R||{},typeof he!="boolean"&&(he=E instanceof i),this.objectMode=!!R.objectMode,he&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=d(this,R,"readableHighWaterMark",he),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(_||(_=mM.StringDecoder),this.decoder=new _(R.encoding),this.encoding=R.encoding)}function D(R){if(i=i||Km(),!(this instanceof D))return new D(R);var E=this instanceof i;this._readableState=new k(R,this,E),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),t.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),D.prototype.destroy=c.destroy,D.prototype._undestroy=c.undestroy,D.prototype._destroy=function(R,E){E(R)},D.prototype.push=function(R,E){var he=this._readableState,ce;return he.objectMode?ce=!0:typeof R=="string"&&(E=E||he.defaultEncoding,E!==he.encoding&&(R=n.from(R,E),E=""),ce=!0),T(this,R,E,!1,ce)},D.prototype.unshift=function(R){return T(this,R,null,!0,!1)};function T(R,E,he,ce,je){l("readableAddChunk",E);var Me=R._readableState;if(E===null)Me.reading=!1,be(R,Me);else{var Je;if(je||(Je=j(Me,E)),Je)x(R,Je);else if(Me.objectMode||E&&E.length>0)if(typeof E!="string"&&!Me.objectMode&&Object.getPrototypeOf(E)!==n.prototype&&(E=r(E)),ce)Me.endEmitted?x(R,new b):M(R,Me,E,!0);else if(Me.ended)x(R,new p);else{if(Me.destroyed)return!1;Me.reading=!1,Me.decoder&&!he?(E=Me.decoder.write(E),Me.objectMode||E.length!==0?M(R,Me,E,!1):we(R,Me)):M(R,Me,E,!1)}else ce||(Me.reading=!1,we(R,Me))}return!Me.ended&&(Me.length<Me.highWaterMark||Me.length===0)}function M(R,E,he,ce){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,R.emit("data",he)):(E.length+=E.objectMode?1:he.length,ce?E.buffer.unshift(he):E.buffer.push(he),E.needReadable&&ye(R)),we(R,E)}function j(R,E){var he;return!o(E)&&typeof E!="string"&&E!==void 0&&!R.objectMode&&(he=new g("chunk",["string","Buffer","Uint8Array"],E)),he}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(R){_||(_=mM.StringDecoder);var E=new _(R);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var he=this._readableState.buffer.head,ce="";he!==null;)ce+=E.write(he.data),he=he.next;return this._readableState.buffer.clear(),ce!==""&&this._readableState.buffer.push(ce),this._readableState.length=ce.length,this};var $=1073741824;function ie(R){return R>=$?R=$:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function pe(R,E){return R<=0||E.length===0&&E.ended?0:E.objectMode?1:R!==R?E.flowing&&E.length?E.buffer.head.data.length:E.length:(R>E.highWaterMark&&(E.highWaterMark=ie(R)),R<=E.length?R:E.ended?E.length:(E.needReadable=!0,0))}D.prototype.read=function(R){l("read",R),R=parseInt(R,10);var E=this._readableState,he=R;if(R!==0&&(E.emittedReadable=!1),R===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return l("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?me(this):ye(this),null;if(R=pe(R,E),R===0&&E.ended)return E.length===0&&me(this),null;var ce=E.needReadable;l("need readable",ce),(E.length===0||E.length-R<E.highWaterMark)&&(ce=!0,l("length less than watermark",ce)),E.ended||E.reading?(ce=!1,l("reading or ended",ce)):ce&&(l("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(R=pe(he,E)));var je;return R>0?je=se(R,E):je=null,je===null?(E.needReadable=E.length<=E.highWaterMark,R=0):(E.length-=R,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),he!==R&&E.ended&&me(this)),je!==null&&this.emit("data",je),je};function be(R,E){if(l("onEofChunk"),!E.ended){if(E.decoder){var he=E.decoder.end();he&&he.length&&(E.buffer.push(he),E.length+=E.objectMode?1:he.length)}E.ended=!0,E.sync?ye(R):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,Ee(R)))}}function ye(R){var E=R._readableState;l("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(l("emitReadable",E.flowing),E.emittedReadable=!0,process.nextTick(Ee,R))}function Ee(R){var E=R._readableState;l("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(R.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,te(R)}function we(R,E){E.readingMore||(E.readingMore=!0,process.nextTick(Dt,R,E))}function Dt(R,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var he=E.length;if(l("maybeReadMore read 0"),R.read(0),he===E.length)break}E.readingMore=!1}D.prototype._read=function(R){x(this,new m("_read()"))},D.prototype.pipe=function(R,E){var he=this,ce=this._readableState;switch(ce.pipesCount){case 0:ce.pipes=R;break;case 1:ce.pipes=[ce.pipes,R];break;default:ce.pipes.push(R);break}ce.pipesCount+=1,l("pipe count=%d opts=%j",ce.pipesCount,E);var je=(!E||E.end!==!1)&&R!==process.stdout&&R!==process.stderr,Me=je?on:ks;ce.endEmitted?process.nextTick(Me):he.once("end",Me),R.on("unpipe",Je);function Je(C,A){l("onunpipe"),C===he&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,xs())}function on(){l("onend"),R.end()}var po=$e(he);R.on("drain",po);var Ys=!1;function xs(){l("cleanup"),R.removeListener("close",Ds),R.removeListener("finish",In),R.removeListener("drain",po),R.removeListener("error",Fn),R.removeListener("unpipe",Je),he.removeListener("end",on),he.removeListener("end",ks),he.removeListener("data",Vi),Ys=!0,ce.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&po()}he.on("data",Vi);function Vi(C){l("ondata");var A=R.write(C);l("dest.write",A),A===!1&&((ce.pipesCount===1&&ce.pipes===R||ce.pipesCount>1&&fe(ce.pipes,R)!==-1)&&!Ys&&(l("false write response, pause",ce.awaitDrain),ce.awaitDrain++),he.pause())}function Fn(C){l("onerror",C),ks(),R.removeListener("error",Fn),e(R,"error")===0&&x(R,C)}S(R,"error",Fn);function Ds(){R.removeListener("finish",In),ks()}R.once("close",Ds);function In(){l("onfinish"),R.removeListener("close",Ds),ks()}R.once("finish",In);function ks(){l("unpipe"),he.unpipe(R)}return R.emit("pipe",he),ce.flowing||(l("pipe resume"),he.resume()),R};function $e(R){return function(){var E=R._readableState;l("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&e(R,"data")&&(E.flowing=!0,te(R))}}D.prototype.unpipe=function(R){var E=this._readableState,he={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return R&&R!==E.pipes?this:(R||(R=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,R&&R.emit("unpipe",this,he),this);if(!R){var ce=E.pipes,je=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var Me=0;Me<je;Me++)ce[Me].emit("unpipe",this,{hasUnpiped:!1});return this}var Je=fe(E.pipes,R);return Je===-1?this:(E.pipes.splice(Je,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),R.emit("unpipe",this,he),this)},D.prototype.on=function(R,E){var he=t.prototype.on.call(this,R,E),ce=this._readableState;return R==="data"?(ce.readableListening=this.listenerCount("readable")>0,ce.flowing!==!1&&this.resume()):R==="readable"&&!ce.endEmitted&&!ce.readableListening&&(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,l("on readable",ce.length,ce.reading),ce.length?ye(this):ce.reading||process.nextTick(pt,this)),he},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(R,E){var he=t.prototype.removeListener.call(this,R,E);return R==="readable"&&process.nextTick(Qe,this),he},D.prototype.removeAllListeners=function(R){var E=t.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&process.nextTick(Qe,this),E};function Qe(R){var E=R._readableState;E.readableListening=R.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:R.listenerCount("data")>0&&R.resume()}function pt(R){l("readable nexttick read 0"),R.read(0)}D.prototype.resume=function(){var R=this._readableState;return R.flowing||(l("resume"),R.flowing=!R.readableListening,lt(this,R)),R.paused=!1,this};function lt(R,E){E.resumeScheduled||(E.resumeScheduled=!0,process.nextTick(mi,R,E))}function mi(R,E){l("resume",E.reading),E.reading||R.read(0),E.resumeScheduled=!1,R.emit("resume"),te(R),E.flowing&&!E.reading&&R.read(0)}D.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function te(R){var E=R._readableState;for(l("flow",E.flowing);E.flowing&&R.read()!==null;);}D.prototype.wrap=function(R){var E=this,he=this._readableState,ce=!1;R.on("end",function(){if(l("wrapped end"),he.decoder&&!he.ended){var Je=he.decoder.end();Je&&Je.length&&E.push(Je)}E.push(null)}),R.on("data",function(Je){if(l("wrapped data"),he.decoder&&(Je=he.decoder.write(Je)),!(he.objectMode&&Je==null)&&!(!he.objectMode&&(!Je||!Je.length))){var on=E.push(Je);on||(ce=!0,R.pause())}});for(var je in R)this[je]===void 0&&typeof R[je]=="function"&&(this[je]=function(Je){return function(){return R[Je].apply(R,arguments)}}(je));for(var Me=0;Me<L.length;Me++)R.on(L[Me],this.emit.bind(this,L[Me]));return this._read=function(Je){l("wrapped _read",Je),ce&&(ce=!1,R.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=PSe()),w(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),D._fromList=se,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function se(R,E){if(E.length===0)return null;var he;return E.objectMode?he=E.buffer.shift():!R||R>=E.length?(E.decoder?he=E.buffer.join(""):E.buffer.length===1?he=E.buffer.first():he=E.buffer.concat(E.length),E.buffer.clear()):he=E.buffer.consume(R,E.decoder),he}function me(R){var E=R._readableState;l("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,process.nextTick(G,E,R))}function G(R,E){if(l("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,E.readable=!1,E.emit("end"),R.autoDestroy)){var he=E._writableState;(!he||he.autoDestroy&&he.finished)&&E.destroy()}}typeof Symbol=="function"&&(D.from=function(R,E){return y===void 0&&(y=FSe()),y(D,R,E)});function fe(R,E){for(var he=0,ce=R.length;he<ce;he++)if(R[he]===E)return he;return-1}return OA}var PA,DV;function IQ(){if(DV)return PA;DV=1,PA=a;var i=Z0().codes,e=i.ERR_METHOD_NOT_IMPLEMENTED,t=i.ERR_MULTIPLE_CALLBACK,n=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,r=Km();K0(a,r);function o(c,u){var d=this._transformState;d.transforming=!1;var f=d.writecb;if(f===null)return this.emit("error",new t);d.writechunk=null,d.writecb=null,u!=null&&this.push(u),f(c);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);r.call(this,c),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function l(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(u,d){h(c,u,d)}):h(this,null,null)}a.prototype.push=function(c,u){return this._transformState.needTransform=!1,r.prototype.push.call(this,c,u)},a.prototype._transform=function(c,u,d){d(new e("_transform()"))},a.prototype._write=function(c,u,d){var f=this._transformState;if(f.writecb=d,f.writechunk=c,f.writeencoding=u,!f.transforming){var g=this._readableState;(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(c){var u=this._transformState;u.writechunk!==null&&!u.transforming?(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform)):u.needTransform=!0},a.prototype._destroy=function(c,u){r.prototype._destroy.call(this,c,function(d){u(d)})};function h(c,u,d){if(u)return c.emit("error",u);if(d!=null&&c.push(d),c._writableState.length)throw new s;if(c._transformState.transforming)throw new n;return c.push(null)}return PA}var FA,kV;function BSe(){if(kV)return FA;kV=1,FA=e;var i=IQ();K0(e,i);function e(t){if(!(this instanceof e))return new e(t);i.call(this,t)}return e.prototype._transform=function(t,n,s){s(null,t)},FA}var BA,LV;function VSe(){if(LV)return BA;LV=1;var i;function e(d){var f=!1;return function(){f||(f=!0,d.apply(void 0,arguments))}}var t=Z0().codes,n=t.ERR_MISSING_ARGS,s=t.ERR_STREAM_DESTROYED;function r(d){if(d)throw d}function o(d){return d.setHeader&&typeof d.abort=="function"}function a(d,f,g,p){p=e(p);var m=!1;d.on("close",function(){m=!0}),i===void 0&&(i=u5()),i(d,{readable:f,writable:g},function(_){if(_)return p(_);m=!0,p()});var b=!1;return function(_){if(!m&&!b){if(b=!0,o(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();p(_||new s("pipe"))}}}function l(d){d()}function h(d,f){return d.pipe(f)}function c(d){return!d.length||typeof d[d.length-1]!="function"?r:d.pop()}function u(){for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];var p=c(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new n("streams");var m,b=f.map(function(_,w){var y=w<f.length-1,x=w>0;return a(_,y,x,function(L){m||(m=L),L&&b.forEach(l),!y&&(b.forEach(l),p(m))})});return f.reduce(h)}return BA=u,BA}var TQ=Qo,d5=h5.EventEmitter,WSe=K0;WSe(Qo,d5);Qo.Readable=AQ();Qo.Writable=EQ();Qo.Duplex=Km();Qo.Transform=IQ();Qo.PassThrough=BSe();Qo.finished=u5();Qo.pipeline=VSe();Qo.Stream=Qo;function Qo(){d5.call(this)}Qo.prototype.pipe=function(i,e){var t=this;function n(c){i.writable&&i.write(c)===!1&&t.pause&&t.pause()}t.on("data",n);function s(){t.readable&&t.resume&&t.resume()}i.on("drain",s),!i._isStdio&&(!e||e.end!==!1)&&(t.on("end",o),t.on("close",a));var r=!1;function o(){r||(r=!0,i.end())}function a(){r||(r=!0,typeof i.destroy=="function"&&i.destroy())}function l(c){if(h(),d5.listenerCount(this,"error")===0)throw c}t.on("error",l),i.on("error",l);function h(){t.removeListener("data",n),i.removeListener("drain",s),t.removeListener("end",o),t.removeListener("close",a),t.removeListener("error",l),i.removeListener("error",l),t.removeListener("end",h),t.removeListener("close",h),i.removeListener("close",h)}return t.on("end",h),t.on("close",h),i.on("close",h),i.emit("pipe",t),i};function Wb(i){return i.replace(/%([0-9A-Fa-f]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16)))}function NQ(i,e){return String(e).replace(i,t=>`%${t.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}`)}function lb(i){return NQ(/[\n;\r\t=%&,\x00-\x1f\x7f-\xff]/g,i)}function xh(i){return NQ(/[\n\r\t%\x00-\x1f\x7f-\xff]/g,i)}function MQ(i){if(!(i&&i.length)||i===".")return{};const e={};return i.replace(/\r?\n$/,"").split(";").forEach(t=>{const n=t.split("=",2);if(!(n[1]&&n[1].length))return;n[0]=n[0].trim();let s=e[n[0].trim()];s||(s=[],e[n[0]]=s),s.push(...n[1].split(",").map(r=>r.trim()).map(Wb))}),e}function RQ(i){const e=i.split("	").map(t=>t==="."||t===""?null:t);return{seq_id:e[0]&&Wb(e[0]),source:e[1]&&Wb(e[1]),type:e[2]&&Wb(e[2]),start:e[3]===null?null:parseInt(e[3],10),end:e[4]===null?null:parseInt(e[4],10),score:e[5]===null?null:parseFloat(e[5]),strand:e[6],phase:e[7],attributes:e[8]===null?null:MQ(e[8])}}function OQ(i){const e=/^\s*##\s*(\S+)\s*(.*)/.exec(i);if(!e)return null;const[,t]=e;let[,,n]=e;const s={directive:t};if(n.length&&(n=n.replace(/\r?\n$/,""),s.value=n),t==="sequence-region"){const r=n.split(/\s+/,3);return{...s,seq_id:r[0],start:r[1]&&r[1].replace(/\D/g,""),end:r[2]&&r[2].replace(/\D/g,"")}}else if(t==="genome-build"){const[r,o]=n.split(/\s+/,2);return{...s,source:r,buildName:o}}return s}function PQ(i){const e=[];return Object.entries(i).forEach(([t,n])=>{if(!n)return;let s;n.hasOwnProperty("toString")?s=lb(n.toString()):Array.isArray(n)?s=n.map(lb).join(","):s=lb(n),e.push(`${lb(t)}=${s}`)}),e.length?e.join(";"):"."}function zSe(i,e){const t=i.attributes===null||i.attributes===void 0?".":PQ(i.attributes),n=`${[i.seq_id===null?".":xh(i.seq_id),i.source===null?".":xh(i.source),i.type===null?".":xh(i.type),i.start===null?".":xh(i.start),i.end===null?".":xh(i.end),i.score===null?".":xh(i.score),i.strand===null?".":xh(i.strand),i.phase===null?".":xh(i.phase),t].join("	")}
`;return e[n]?"":(e[n]=!0,n)}function xS(i,e){if(Array.isArray(i))return i.map(n=>xS(n,e)).join("");const t=[zSe(i,e)];return HSe(i)&&t.push(...i.child_features.map(n=>xS(n,e)),...i.derived_features.map(n=>xS(n,e))),t.join("")}function FQ(i){return xS(i,{})}function BQ(i){let e=`##${i.directive}`;return i.value&&(e+=` ${i.value}`),e+=`
`,e}function VQ(i){return`# ${i.comment}
`}function f5(i){return`>${i.id}${i.description?` ${i.description}`:""}
${i.sequence}
`}function iD(i){function e(t){return"attributes"in t?FQ(t):"directive"in t?BQ(t):"sequence"in t?f5(t):"comment"in t?VQ(t):`# (invalid item found during format)
`}return Array.isArray(i)?i.map(e):e(i)}function HSe(i){return i.child_features!==void 0&&i.derived_features!==void 0}const USe=Object.freeze(Object.defineProperty({__proto__:null,escape:lb,escapeColumn:xh,formatAttributes:PQ,formatComment:VQ,formatDirective:BQ,formatFeature:FQ,formatItem:iD,formatSequence:f5,parseAttributes:MQ,parseDirective:OQ,parseFeature:RQ,unescape:Wb},Symbol.toStringTag,{value:"Module"})),EV={Parent:"child_features",Derives_from:"derived_features"};class AV{constructor(e){this.seqCallback=e,this.currentSequence=void 0}addLine(e){const t=/^>\s*(\S+)\s*(.*)/.exec(e);t?(this._flush(),this.currentSequence={id:t[1],sequence:""},t[2]&&(this.currentSequence.description=t[2].trim())):this.currentSequence&&/\S/.test(e)&&(this.currentSequence.sequence+=e.replace(/\s/g,""))}_flush(){this.currentSequence&&this.seqCallback(this.currentSequence)}finish(){this._flush()}}class WQ{constructor(e){this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};const t=()=>{};this.featureCallback=e.featureCallback||t,this.endCallback=e.endCallback||t,this.commentCallback=e.commentCallback||t,this.errorCallback=e.errorCallback||t,this.directiveCallback=e.directiveCallback||t,this.sequenceCallback=e.sequenceCallback||t,this.disableDerivesFromReferences=e.disableDerivesFromReferences||!1,this.bufferSize=e.bufferSize===void 0?1e3:e.bufferSize}addLine(e){if(this.fastaParser){this.fastaParser.addLine(e);return}if(this.eof)return;if(this.lineNumber+=1,/^\s*[^#\s>]/.test(e)){this._bufferLine(e);return}const t=/^\s*(#+)(.*)/.exec(e);if(t){const[,n]=t;let[,,s]=t;if(n.length===3)this._emitAllUnderConstructionFeatures();else if(n.length===2){const r=OQ(e);r&&(r.directive==="FASTA"?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new AV(this.sequenceCallback)):this._emitItem(r))}else s=s.replace(/\s*/,""),this._emitItem({comment:s})}else if(!/^\s*$/.test(e))if(/^\s*>/.test(e))this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new AV(this.sequenceCallback),this.fastaParser.addLine(e);else{const n=e.replace(/\r?\n?$/g,"");throw new Error(`GFF3 parse error.  Cannot parse '${n}'.`)}}finish(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}_emitItem(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}_enforceBufferSizeLimit(e=0){const t=n=>{n&&Array.isArray(n)&&n[0].attributes&&n[0].attributes.ID&&n[0].attributes.ID[0]&&(n[0].attributes.ID.forEach(s=>{delete this._underConstructionById[s],delete this._completedReferences[s]}),n.forEach(s=>{s.child_features&&s.child_features.forEach(r=>t(r)),s.derived_features&&s.derived_features.forEach(r=>t(r))}))};for(;this._underConstructionTopLevel.length+e>this.bufferSize;){const n=this._underConstructionTopLevel.shift();n&&(this._emitItem(n),t(n))}}_emitAllUnderConstructionFeatures(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw new Error(`some features reference other features that do not exist in the file (or in the same '###' scope). ${Object.keys(this._underConstructionOrphans)}`)}_bufferLine(e){var t,n,s;const r={...RQ(e),child_features:[],derived_features:[]},o=((t=r.attributes)===null||t===void 0?void 0:t.ID)||[],a=((n=r.attributes)===null||n===void 0?void 0:n.Parent)||[],l=this.disableDerivesFromReferences?[]:((s=r.attributes)===null||s===void 0?void 0:s.Derives_from)||[];if(!o.length&&!a.length&&!l.length){this._emitItem([r]);return}let h;o.forEach(c=>{const u=this._underConstructionById[c];u?(u[u.length-1].type!==r.type&&this._parseError(`multi-line feature "${c}" has inconsistent types: "${r.type}", "${u[u.length-1].type}"`),u.push(r),h=u):(h=[r],this._enforceBufferSizeLimit(1),!a.length&&!l.length&&this._underConstructionTopLevel.push(h),this._underConstructionById[c]=h,this._resolveReferencesTo(h,c))}),this._resolveReferencesFrom(h||[r],{Parent:a,Derives_from:l},o)}_resolveReferencesTo(e,t){const n=this._underConstructionOrphans[t];n&&(e.forEach(s=>{s.child_features.push(...n.Parent)}),e.forEach(s=>{s.derived_features.push(...n.Derives_from)}),delete this._underConstructionOrphans[t])}_parseError(e){this.eof=!0,this.errorCallback(`${this.lineNumber}: ${e}`)}_resolveReferencesFrom(e,t,n){function s(r,o,a){let l=r[o];l||(l={},r[o]=l);const h=l[a]||!1;return l[a]=!0,h}t.Parent.forEach(r=>{const o=this._underConstructionById[r];if(o){const a=EV.Parent;n.filter(l=>s(this._completedReferences,l,`Parent,${r}`)).length||o.forEach(l=>{l[a].push(e)})}else{let a=this._underConstructionOrphans[r];a||(a={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=a),a.Parent.push(e)}}),t.Derives_from.forEach(r=>{const o=this._underConstructionById[r];if(o){const a=EV.Derives_from;n.filter(l=>s(this._completedReferences,l,`Derives_from,${r}`)).length||o.forEach(l=>{l[a].push(e)})}else{let a=this._underConstructionOrphans[r];a||(a={Parent:[],Derives_from:[]},this._underConstructionOrphans[r]=a),a.Derives_from.push(e)}})}}function bM(i){process&&process.nextTick?process.nextTick(i):i()}function zQ(i){const e={encoding:"utf8",parseFeatures:!0,parseDirectives:!1,parseSequences:!0,parseComments:!1,bufferSize:1e3,disableDerivesFromReferences:!1,...i};return i.parseAll&&(e.parseFeatures=!0,e.parseDirectives=!0,e.parseComments=!0,e.parseSequences=!0),e}class $Se extends TQ.Transform{constructor(e={}){super({objectMode:!0}),this.textBuffer="";const t=zQ(e);this.encoding=e.encoding||"utf8",this.decoder=new xSe;const n=this.push.bind(this);this.parser=new WQ({featureCallback:t.parseFeatures?n:void 0,directiveCallback:t.parseDirectives?n:void 0,commentCallback:t.parseComments?n:void 0,sequenceCallback:t.parseSequences?n:void 0,errorCallback:s=>this.emit("error",s),bufferSize:t.bufferSize,disableDerivesFromReferences:t.disableDerivesFromReferences})}_addLine(e){e&&this.parser.addLine(e)}_nextText(e){const t=(this.textBuffer+e).split(/\r?\n/);this.textBuffer=t.pop()||"",t.forEach(n=>this._addLine(n))}_transform(e,t,n){this._nextText(this.decoder.write(e)),bM(n)}_flush(e){this.decoder.end&&this._nextText(this.decoder.end()),this.textBuffer!=null&&this._addLine(this.textBuffer),this.parser.finish(),bM(e)}}function jSe(i={}){return new $Se(i)}function qSe(i,e={}){if(!i)return[];const t=zQ(e),n=[],s=n.push.bind(n),r=new WQ({featureCallback:t.parseFeatures?s:void 0,directiveCallback:t.parseDirectives?s:void 0,commentCallback:t.parseComments?s:void 0,sequenceCallback:t.parseSequences?s:void 0,disableDerivesFromReferences:t.disableDerivesFromReferences||!1,bufferSize:1/0,errorCallback:o=>{throw o}});return i.split(/\r?\n/).forEach(r.addLine.bind(r)),r.finish(),n}function GSe(i){const e=[],t=[];i.forEach(s=>{"sequence"in s?t.push(s):e.push(s)});let n=e.map(iD).join("");return t.length&&(n+=`##FASTA
`,n+=t.map(f5).join("")),n}class HQ extends TQ.Transform{constructor(e={}){super(Object.assign(e,{objectMode:!0})),this.linesSinceLastSyncMark=0,this.haveWeEmittedData=!1,this.fastaMode=!1,this.minLinesBetweenSyncMarks=e.minSyncLines||100,this.insertVersionDirective=e.insertVersionDirective||!1}_transform(e,t,n){let s;if(!this.haveWeEmittedData&&this.insertVersionDirective){const r=Array.isArray(e)?e[0]:e;"directive"in r&&r.directive!=="gff-version"&&this.push(`##gff-version 3
`)}if("sequence"in e&&!this.fastaMode&&(this.push(`##FASTA
`),this.fastaMode=!0),Array.isArray(e)?s=e.map(iD).join(""):s=iD(e),this.push(s),this.linesSinceLastSyncMark>=this.minLinesBetweenSyncMarks)this.push(`###
`),this.linesSinceLastSyncMark=0;else{let r=0;for(let o=0;o<s.length;o+=1)s[o]===`
`&&(r+=1);this.linesSinceLastSyncMark+=r}this.haveWeEmittedData=!0,bM(n)}}function KSe(i={}){return new HQ(i)}function ZSe(i,e,t={}){const n={insertVersionDirective:!0,...t};return new Promise((s,r)=>{i.pipe(new HQ(n)).on("end",()=>s(null)).on("error",r).pipe(e)})}const YSe={parseStream:jSe,parseStringSync:qSe,formatSync:GSe,formatStream:KSe,formatFile:ZSe,util:USe};function UQ(i){if(i.greaterThan(Number.MAX_SAFE_INTEGER)||i.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return i.toNumber()}class QSe extends Error{}function xd(i){if(i&&i.aborted){if(typeof DOMException<"u")throw new DOMException("aborted","AbortError");{const e=new QSe("aborted");throw e.code="ERR_ABORTED",e}}}function XSe(i,e){return e.minv.blockPosition-i.maxv.blockPosition<65e3&&e.maxv.blockPosition-i.minv.blockPosition<5e6}function $Q(i,e){const t=[];let n=null;return i.length===0?i:(i.sort(function(s,r){const o=s.minv.blockPosition-r.minv.blockPosition;return o!==0?o:s.minv.dataPosition-r.minv.dataPosition}),i.forEach(s=>{(!e||s.maxv.compareTo(e)>0)&&(n===null?(t.push(s),n=s):XSe(n,s)?s.maxv.compareTo(n.maxv)>0&&(n.maxv=s.maxv):(t.push(s),n=s))}),t)}var JSe=Fi,zo=null;try{zo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Fi(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Fi.prototype.__isLong__;Object.defineProperty(Fi.prototype,"__isLong__",{value:!0});function Br(i){return(i&&i.__isLong__)===!0}Fi.isLong=Br;var IV={},TV={};function yg(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=TV[i],n)?n:(t=Bi(i,(i|0)<0?-1:0,!0),s&&(TV[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=IV[i],n)?n:(t=Bi(i,i<0?-1:0,!1),s&&(IV[i]=t),t))}Fi.fromInt=yg;function Ho(i,e){if(isNaN(i))return e?Gd:Uo;if(e){if(i<0)return Gd;if(i>=jQ)return KQ}else{if(i<=-MV)return Er;if(i+1>=MV)return GQ}return i<0?Ho(-i,e).neg():Bi(i%Zm|0,i/Zm|0,e)}Fi.fromNumber=Ho;function Bi(i,e,t){return new Fi(i,e,t)}Fi.fromBits=Bi;var nD=Math.pow;function g5(i,e,t){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return Uo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return g5(i.substring(1),e,t).neg();for(var s=Ho(nD(t,8)),r=Uo,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var h=Ho(nD(t,a));r=r.mul(h).add(Ho(l))}else r=r.mul(s),r=r.add(Ho(l))}return r.unsigned=e,r}Fi.fromString=g5;function Za(i,e){return typeof i=="number"?Ho(i,e):typeof i=="string"?g5(i,e):Bi(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Fi.fromValue=Za;var NV=1<<16,exe=1<<24,Zm=NV*NV,jQ=Zm*Zm,MV=jQ/2,RV=yg(exe),Uo=yg(0);Fi.ZERO=Uo;var Gd=yg(0,!0);Fi.UZERO=Gd;var Op=yg(1);Fi.ONE=Op;var qQ=yg(1,!0);Fi.UONE=qQ;var vM=yg(-1);Fi.NEG_ONE=vM;var GQ=Bi(-1,2147483647,!1);Fi.MAX_VALUE=GQ;var KQ=Bi(-1,-1,!0);Fi.MAX_UNSIGNED_VALUE=KQ;var Er=Bi(0,-2147483648,!1);Fi.MIN_VALUE=Er;var Ne=Fi.prototype;Ne.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ne.toNumber=function(){return this.unsigned?(this.high>>>0)*Zm+(this.low>>>0):this.high*Zm+(this.low>>>0)};Ne.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Er)){var e=Ho(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=Ho(nD(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,h=l.toString(i);if(r=a,r.isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}};Ne.getHighBits=function(){return this.high};Ne.getHighBitsUnsigned=function(){return this.high>>>0};Ne.getLowBits=function(){return this.low};Ne.getLowBitsUnsigned=function(){return this.low>>>0};Ne.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Er)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};Ne.isZero=function(){return this.high===0&&this.low===0};Ne.eqz=Ne.isZero;Ne.isNegative=function(){return!this.unsigned&&this.high<0};Ne.isPositive=function(){return this.unsigned||this.high>=0};Ne.isOdd=function(){return(this.low&1)===1};Ne.isEven=function(){return(this.low&1)===0};Ne.equals=function(i){return Br(i)||(i=Za(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};Ne.eq=Ne.equals;Ne.notEquals=function(i){return!this.eq(i)};Ne.neq=Ne.notEquals;Ne.ne=Ne.notEquals;Ne.lessThan=function(i){return this.comp(i)<0};Ne.lt=Ne.lessThan;Ne.lessThanOrEqual=function(i){return this.comp(i)<=0};Ne.lte=Ne.lessThanOrEqual;Ne.le=Ne.lessThanOrEqual;Ne.greaterThan=function(i){return this.comp(i)>0};Ne.gt=Ne.greaterThan;Ne.greaterThanOrEqual=function(i){return this.comp(i)>=0};Ne.gte=Ne.greaterThanOrEqual;Ne.ge=Ne.greaterThanOrEqual;Ne.compare=function(i){if(Br(i)||(i=Za(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};Ne.comp=Ne.compare;Ne.negate=function(){return!this.unsigned&&this.eq(Er)?Er:this.not().add(Op)};Ne.neg=Ne.negate;Ne.add=function(i){Br(i)||(i=Za(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,h=0,c=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,c+=u>>>16,u&=65535,c+=t+o,h+=c>>>16,c&=65535,h+=e+r,h&=65535,Bi(u<<16|d,h<<16|c,this.unsigned)};Ne.subtract=function(i){return Br(i)||(i=Za(i)),this.add(i.neg())};Ne.sub=Ne.subtract;Ne.multiply=function(i){if(this.isZero())return Uo;if(Br(i)||(i=Za(i)),zo){var e=zo.mul(this.low,this.high,i.low,i.high);return Bi(e,zo.get_high(),this.unsigned)}if(i.isZero())return Uo;if(this.eq(Er))return i.isOdd()?Er:Uo;if(i.eq(Er))return this.isOdd()?Er:Uo;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(RV)&&i.lt(RV))return Ho(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,h=i.low&65535,c=0,u=0,d=0,f=0;return f+=r*h,d+=f>>>16,f&=65535,d+=s*h,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*h,c+=u>>>16,u&=65535,u+=s*l,c+=u>>>16,u&=65535,u+=r*a,c+=u>>>16,u&=65535,c+=t*h+n*l+s*a+r*o,c&=65535,Bi(d<<16|f,c<<16|u,this.unsigned)};Ne.mul=Ne.multiply;Ne.divide=function(i){if(Br(i)||(i=Za(i)),i.isZero())throw Error("division by zero");if(zo){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?zo.div_u:zo.div_s)(this.low,this.high,i.low,i.high);return Bi(e,zo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Gd:Uo;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Gd;if(i.gt(this.shru(1)))return qQ;s=Gd}else{if(this.eq(Er)){if(i.eq(Op)||i.eq(vM))return Er;if(i.eq(Er))return Op;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(Uo)?i.isNegative()?Op:vM:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(Er))return this.unsigned?Gd:Uo;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=Uo}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:nD(2,o-48),l=Ho(t),h=l.mul(i);h.isNegative()||h.gt(n);)t-=a,l=Ho(t,this.unsigned),h=l.mul(i);l.isZero()&&(l=Op),s=s.add(l),n=n.sub(h)}return s};Ne.div=Ne.divide;Ne.modulo=function(i){if(Br(i)||(i=Za(i)),zo){var e=(this.unsigned?zo.rem_u:zo.rem_s)(this.low,this.high,i.low,i.high);return Bi(e,zo.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};Ne.mod=Ne.modulo;Ne.rem=Ne.modulo;Ne.not=function(){return Bi(~this.low,~this.high,this.unsigned)};Ne.and=function(i){return Br(i)||(i=Za(i)),Bi(this.low&i.low,this.high&i.high,this.unsigned)};Ne.or=function(i){return Br(i)||(i=Za(i)),Bi(this.low|i.low,this.high|i.high,this.unsigned)};Ne.xor=function(i){return Br(i)||(i=Za(i)),Bi(this.low^i.low,this.high^i.high,this.unsigned)};Ne.shiftLeft=function(i){return Br(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Bi(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):Bi(0,this.low<<i-32,this.unsigned)};Ne.shl=Ne.shiftLeft;Ne.shiftRight=function(i){return Br(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Bi(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):Bi(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};Ne.shr=Ne.shiftRight;Ne.shiftRightUnsigned=function(i){if(Br(i)&&(i=i.toInt()),i&=63,i===0)return this;var e=this.high;if(i<32){var t=this.low;return Bi(t>>>i|e<<32-i,e>>>i,this.unsigned)}else return i===32?Bi(e,0,this.unsigned):Bi(e>>>i-32,0,this.unsigned)};Ne.shru=Ne.shiftRightUnsigned;Ne.shr_u=Ne.shiftRightUnsigned;Ne.toSigned=function(){return this.unsigned?Bi(this.low,this.high,!1):this};Ne.toUnsigned=function(){return this.unsigned?this:Bi(this.low,this.high,!0)};Ne.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};Ne.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};Ne.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Fi.fromBytes=function(i,e,t){return t?Fi.fromBytesLE(i,e):Fi.fromBytesBE(i,e)};Fi.fromBytesLE=function(i,e){return new Fi(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Fi.fromBytesBE=function(i,e){return new Fi(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};const ZQ=pg(JSe);class p5{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function om(i,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new p5(i[e+7]*1099511627776+i[e+6]*4294967296+i[e+5]*16777216+i[e+4]*65536+i[e+3]*256+i[e+2],i[e+1]<<8|i[e])}class sD{constructor(e,t,n,s=void 0){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=s}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+(1<<16)-this.minv.blockPosition}}class YQ{constructor({filehandle:e,renameRefSeqs:t=n=>n}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){const{indices:t,...n}=await this.parse(e);return n}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch(t=>{throw this.parseP=void 0,t})),this.parseP}async hasRefSeq(e,t={}){return!!((await this.parse(t)).indices[e]||{}).binIndex}}const txe=21578324,OV=14;function ixe(i,e){return i+=1,e-=1,[[0,0],[1+(i>>26),1+(e>>26)],[9+(i>>23),9+(e>>23)],[73+(i>>20),73+(e>>20)],[585+(i>>17),585+(e>>17)],[4681+(i>>14),4681+(e>>14)]]}class VA extends YQ{async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const s=n.refNameToId[e];if(!n.indices[s])return-1;const{stats:r}=n.indices[s];return r?r.lineCount:-1}async _parse(e={}){const t=await this.filehandle.readFile(e),n=await Um(t);if(xd(e.signal),n.readUInt32LE(0)!==txe)throw new Error("Not a TBI file");const s=n.readInt32LE(4),r=n.readInt32LE(8),o=r&65536?"zero-based-half-open":"1-based-closed",a={0:"generic",1:"SAM",2:"VCF"}[r&15];if(!a)throw new Error(`invalid Tabix preset format flags ${r}`);const l={ref:n.readInt32LE(12),start:n.readInt32LE(16),end:n.readInt32LE(20)},h=n.readInt32LE(24),c=5,u=((1<<(c+1)*3)-1)/7,d=2**(14+c*3),f=h?String.fromCharCode(h):null,g=n.readInt32LE(28),p=n.readInt32LE(32),{refNameToId:m,refIdToName:b}=this._parseNameBytes(n.slice(36,36+p));let _=36+p,w;return{indices:new Array(s).fill(0).map(()=>{const y=n.readInt32LE(_);_+=4;const x={};let L;for(let D=0;D<y;D+=1){const T=n.readUInt32LE(_);if(_+=4,T>u+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(T===u+1){const M=n.readInt32LE(_);_+=4,M===2&&(L=this.parsePseudoBin(n,_)),_+=16*M}else{const M=n.readInt32LE(_);_+=4;const j=new Array(M);for(let $=0;$<M;$+=1){const ie=om(n,_),pe=om(n,_+8);_+=16,w=this._findFirstData(w,ie),j[$]=new sD(ie,pe,T)}x[T]=j}}const S=n.readInt32LE(_);_+=4;const k=new Array(S);for(let D=0;D<S;D+=1)k[D]=om(n,_),_+=8,w=this._findFirstData(w,k[D]);return{binIndex:x,linearIndex:k,stats:L}}),metaChar:f,maxBinNumber:u,maxRefLength:d,skipLines:g,firstDataLine:w,columnNumbers:l,coordinateType:o,format:a,refIdToName:b,refNameToId:m,maxBlockSize:1<<16}}parsePseudoBin(e,t){return{lineCount:UQ(ZQ.fromBytesLE(e.slice(t+16,t+24),!0))}}_parseNameBytes(e){let t=0,n=0;const s=[],r={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),s[t]=a,r[a]=t}n=o+1,t+=1}return{refNameToId:r,refIdToName:s}}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s);if(!r)return[];const o=r.refNameToId[e],a=r.indices[o];if(!a)return[];(a.linearIndex.length?a.linearIndex[t>>OV>=a.linearIndex.length?a.linearIndex.length-1:t>>OV]:new p5(0,0))||console.warn("querying outside of possible tabix range");const l=ixe(t,n),h=[];for(const[g,p]of l)for(let m=g;m<=p;m++)if(a.binIndex[m]){const b=a.binIndex[m];for(let _=0;_<b.length;++_)h.push(new sD(b[_].minv,b[_].maxv,m))}const c=a.linearIndex.length;let u=null;const d=Math.min(t>>14,c-1),f=Math.min(n>>14,c-1);for(let g=d;g<=f;++g){const p=a.linearIndex[g];p&&(!u||p.compareTo(u)<0)&&(u=p)}return $Q(h,u)}}const nxe=21582659,sxe=38359875;function rxe(i,e){return i*2**e}function PV(i,e){return Math.floor(i/2**e)}class FV extends YQ{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const s=n.refNameToId[e];if(!n.indices[s])return-1;const{stats:r}=n.indices[s];return r?r.lineCount:-1}async indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,t){const n=e.readInt32LE(t),s=n&65536?"zero-based-half-open":"1-based-closed",r={0:"generic",1:"SAM",2:"VCF"}[n&15];if(!r)throw new Error(`invalid Tabix preset format flags ${n}`);const o={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},a=e.readInt32LE(t+16),l=a?String.fromCharCode(a):null,h=e.readInt32LE(t+20),c=e.readInt32LE(t+24),{refIdToName:u,refNameToId:d}=this._parseNameBytes(e.slice(t+28,t+28+c));return{refIdToName:u,refNameToId:d,skipLines:h,metaChar:l,columnNumbers:o,format:r,coordinateType:s}}_parseNameBytes(e){let t=0,n=0;const s=[],r={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),s[t]=a,r[a]=t}n=o+1,t+=1}return{refNameToId:r,refIdToName:s}}async _parse(e={}){const t=await Um(await this.filehandle.readFile(e));let n;if(t.readUInt32LE(0)===nxe)n=1;else if(t.readUInt32LE(0)===sxe)n=2;else throw new Error("Not a CSI file");this.minShift=t.readInt32LE(4),this.depth=t.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const s=2**(this.minShift+this.depth*3),r=t.readInt32LE(12),o=r&&r>=30?this.parseAuxData(t,16):{refIdToName:[],refNameToId:{},metaChar:null,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},a=t.readInt32LE(16+r);let l,h=16+r+4;const c=new Array(a).fill(0).map(()=>{const u=t.readInt32LE(h);h+=4;const d={};let f;for(let g=0;g<u;g+=1){const p=t.readUInt32LE(h);if(p>this.maxBinNumber)f=this.parsePseudoBin(t,h+4),h+=4+8+4+16+16;else{const m=om(t,h+4);l=this._findFirstData(l,m);const b=t.readInt32LE(h+12);h+=16;const _=new Array(b);for(let w=0;w<b;w+=1){const y=om(t,h),x=om(t,h+8);h+=16,_[w]=new sD(y,x,p)}d[p]=_}}return{binIndex:d,stats:f}});return{...o,csi:!0,refCount:a,maxBlockSize:1<<16,firstDataLine:l,csiVersion:n,indices:c,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(e,t){return{lineCount:UQ(ZQ.fromBytesLE(e.slice(t+28,t+36),!0))}}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s);if(!r)return[];const o=r.refNameToId[e],a=r.indices[o];if(!a)return[];const l=this.reg2bins(t,n),h=[];for(const[c,u]of l)for(let d=c;d<=u;d++)if(a.binIndex[d]){const f=a.binIndex[d];for(let g=0;g<f.length;++g)h.push(new sD(f[g].minv,f[g].maxv,d))}return $Q(h,new p5(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,s=0,r=this.minShift+this.depth*3;const o=[];for(;n<=this.depth;r-=3,s+=rxe(1,n*3),n+=1){const a=s+PV(e,r),l=s+PV(t,r);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}const BV=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function oxe(i){return new Promise(e=>setTimeout(e,i))}class axe{constructor({path:e,filehandle:t,tbiPath:n,tbiFilehandle:s,csiPath:r,csiFilehandle:o,yieldTime:a=500,chunkSizeLimit:l=5e7,renameRefSeqs:h=u=>u,chunkCacheSize:c=5*2**20}){if(t)this.filehandle=t;else if(e)this.filehandle=new Qr(e);else throw new TypeError("must provide either filehandle or path");if(s)this.index=new VA({filehandle:s,renameRefSeqs:h});else if(o)this.index=new FV({filehandle:o,renameRefSeqs:h});else if(n)this.index=new VA({filehandle:new Qr(n),renameRefSeqs:h});else if(r)this.index=new FV({filehandle:new Qr(r),renameRefSeqs:h});else if(e)this.index=new VA({filehandle:new Qr(`${e}.tbi`),renameRefSeqs:h});else throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, or csiPath");this.chunkSizeLimit=l,this.renameRefSeq=h,this.yieldTime=a,this.chunkCache=new OL({cache:new XP({maxSize:Math.floor(c/(1<<16))}),fill:(u,d)=>this.readChunk(u,{signal:d})})}async getLines(e,t,n,s){let r,o={},a;if(typeof s>"u")throw new TypeError("line callback must be provided");if(typeof s=="function"?a=s:(o=s,a=s.lineCallback),e===void 0)throw new TypeError("must provide a reference sequence name");if(!a)throw new TypeError("line callback must be provided");const l=await this.index.getMetadata(o);if(xd(r),t||(t=0),n||(n=l.maxRefLength),!(t<=n))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(t===n)return;const h=await this.index.blocksForRange(e,t,n,o);xd(r);for(let u=0;u<h.length;u+=1){const d=h[u].fetchedSize();if(d>this.chunkSizeLimit)throw new Error(`Too much data. Chunk size ${d.toLocaleString()} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit.toLocaleString()}.`)}let c=Date.now();for(let u=0;u<h.length;u+=1){let d;const f=h[u],{buffer:g,cpositions:p,dpositions:m}=await this.chunkCache.get(f.toString(),f);xd(r);let b=0,_=0;for(;b<g.length;){const w=g.indexOf(`
`,b);if(w===-1)break;const y=g.slice(b,w),x=(BV==null?void 0:BV.decode(y))||y.toString();if(m){for(;b+f.minv.dataPosition>=m[_++];);_--}const{startCoordinate:L,overlaps:S}=this.checkLine(l,e,t,n,x);if(d!==void 0&&L!==void 0&&d>L)throw new Error(`Lines not sorted by start coordinate (${d} > ${L}), this file is not usable with Tabix.`);if(d=L,S)a(x.trim(),p[_]*(1<<8)+(b-m[_])+f.minv.dataPosition+1);else if(L!==void 0&&L>=n)return;this.yieldTime&&c-Date.now()>this.yieldTime&&(c=Date.now(),xd(r),await oxe(1)),b=w+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:t,metaChar:n,maxBlockSize:s}=await this.getMetadata(e);xd(e.signal);const r=((t==null?void 0:t.blockPosition)||0)+s;let o=await this._readRegion(0,r,e);xd(e.signal);try{o=await Um(o)}catch(a){throw console.error(a),new Error(`error decompressing block ${a.code} at 0 (length ${r}) ${a}`)}if(n){let a=-1;const l=`
`.charCodeAt(0),h=n.charCodeAt(0);for(let c=0;c<o.length&&!(c===a+1&&o[c]!==h);c+=1)o[c]===l&&(a=c);o=o.slice(0,a+1)}return o}async getHeader(e={}){return(await this.getHeaderBuffer(e)).toString("utf8")}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,t,n,s,r){const{columnNumbers:o,metaChar:a,coordinateType:l,format:h}=e;if(r.charAt(0)===a)return{overlaps:!1};let{ref:c,start:u,end:d}=o;c||(c=0),u||(u=0),d||(d=0),h==="VCF"&&(d=8);const f=Math.max(c,u,d);let g=1,p=0,m="",b=-1/0;for(let _=0;_<r.length+1;_+=1)if(r[_]==="	"||_===r.length){if(g===c){if(this.renameRefSeq(r.slice(p,_))!==t)return{overlaps:!1}}else if(g===u){if(b=parseInt(r.slice(p,_),10),l==="1-based-closed"&&(b-=1),b>=s)return{startCoordinate:b,overlaps:!1};if((d===0||d===u)&&b+1<=n)return{startCoordinate:b,overlaps:!1}}else if(h==="VCF"&&g===4)m=r.slice(p,_);else if(g===d){let w;if(h==="VCF"?w=this._getVcfEnd(b,m,r.slice(p,_)):w=parseInt(r.slice(p,_),10),w<=n)return{overlaps:!1}}if(p=_+1,g+=1,g>f)break}return{startCoordinate:b,overlaps:!0}}_getVcfEnd(e,t,n){let s=e+t.length;const r=n.indexOf("SVTYPE=TRA")!==-1;if(n[0]!=="."&&!r){let o=";";for(let a=0;a<n.length;a+=1){if(o===";"&&n.slice(a,a+4)==="END="){let l=n.indexOf(";",a);l===-1&&(l=n.length),s=parseInt(n.slice(a+4,l),10);break}o=n[a]}}else if(r)return e+1;return s}async lineCount(e,t={}){return this.index.lineCount(e,t)}async _readRegion(e,t,n={}){const s=Buffer.alloc(t),{bytesRead:r,buffer:o}=await this.filehandle.read(s,0,t,e,n);return o.slice(0,r)}async readChunk(e,t={}){const n=await this._readRegion(e.minv.blockPosition,e.fetchedSize(),t);try{return oY(n,e)}catch(s){throw new Error(`error decompressing c ${e.toString()} ${s}`)}}}class lxe extends Qw(gg){constructor(e,t){const n={channel:"x",windowSize:3e6,debounceDomainChange:200,...e};if(super(t,n.channel),Yo(this,"lastRequestId",0),Yo(this,"tbiIndex"),this.params=n,!this.params.url)throw new Error("No URL provided for TabixSource");const s=r=>new Al(Xw(r,this.view.getBaseUrl()));this.tbiIndex=new axe({filehandle:s(this.params.url),tbiFilehandle:s(this.params.indexUrl??this.params.url+".tbi")}),this.params.debounceDomainChange>0&&(this.onDomainChanged=FL(this.onDomainChanged.bind(this),this.params.debounceDomainChange,!1))}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);this.checkAndUpdateLastInterval(n)&&this.doRequest(n)}async doRequest(e){const t=await this.getFeatures(e);t.requestId<this.lastRequestId||this.publishData(t.features)}async getFeatures(e){let t=++this.lastRequestId;const n=new AbortController,s=this.genome.continuousToDiscreteChromosomeIntervals(e),r=await Promise.all(s.map(async o=>{const a=[];return await this.tbiIndex.getLines(o.chrom,o.startPos,o.endPos,{lineCallback:l=>{a.push(l)},signal:n.signal}),this._parseFeatures(a)}));return{requestId:t,abort:()=>n.abort(),features:r.flat()}}_parseFeatures(e){return[]}}class hxe extends lxe{_parseFeatures(e){return YSe.parseStringSync(e.join(`
`),{parseSequences:!1})}}function cxe(i,e){if(_Z(i))return new Sbe(i,e);if(xbe(i))return new Dbe(i,e);if(kbe(i))return new Lbe(i,e);if(uxe(i))return vxe(i.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function uxe(i){return"lazy"in i}function dxe(i){return(i==null?void 0:i.type)=="axisTicks"}function fxe(i){return(i==null?void 0:i.type)=="axisGenome"}function gxe(i){return(i==null?void 0:i.type)=="indexedFasta"}function pxe(i){return(i==null?void 0:i.type)=="bigwig"}function mxe(i){return(i==null?void 0:i.type)=="bigbed"}function _xe(i){return(i==null?void 0:i.type)=="bam"}function bxe(i){return(i==null?void 0:i.type)=="gff3"}function vxe(i,e){if(dxe(i))return new Abe(i,e);if(fxe(i))return new Ibe(i,e);if(gxe(i))return new O1e(i,e);if(pxe(i))return new yCe(i,e);if(mxe(i))return new WCe(i,e);if(_xe(i))return new dSe(i,e);if(bxe(i))return new hxe(i,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function wxe(i){const e=Object.keys(i).filter(n=>typeof n=="string"),t=new Function("source","return { "+e.map(n=>JSON.stringify(n)).map(n=>`${n}: source[${n}]`).join(`,
`)+" };");return t.properties=e,t}class rD extends En{get behavior(){return ih}constructor(){super();const e=t=>{const n=wxe(t);this.handle=s=>this._propagate(n(s)),this.handle(t)};this.handle=e,this.beginBatch=t=>{zK(t)&&(this.handle=e),super.beginBatch(t)}}}function yxe(i){return"name"in i}var DS;class QQ extends qw{constructor(e,t,n){super(),Kt(this,DS,void 0),this.provider=n,this.params=e}get identifier(){return this.params.name}updateDynamicData(e){jh(this,DS,e),this.loadSynchronously()}loadSynchronously(){const e=it(this,DS)??this.provider(this.params.name)??[];let t=n=>n;if(Array.isArray(e))e.length>0&&(t=mZ(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const n of e)this._propagate(t(n));this.complete()}async load(){this.loadSynchronously()}}DS=new WeakMap;class XQ{constructor(){this._dataSourcesByHost=new Map,this._collectorsByHost=new Map,this._observers=new Map}get dataSources(){return[...new Set(this._dataSourcesByHost.values()).values()]}get collectors(){return[...this._collectorsByHost.values()]}addObserver(e,t){let n=this._observers.get(t);n||(n=[],this._observers.set(t,n)),n.push(e)}_relayObserverCallback(e,t){const n=this._observers.get(t);if(n)for(const s of n)s(e)}addDataSource(e,t){this._dataSourcesByHost.set(t,e)}findDataSourceByKey(e){return this._dataSourcesByHost.get(e)}findNamedDataSource(e){let t,n=[];for(const[s,r]of this._dataSourcesByHost.entries())if(r instanceof QQ&&e==r.identifier){if(t&&t!==r)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);t=r,n.push(s)}if(t)return{dataSource:t,hosts:n}}addCollector(e,t){this._collectorsByHost.set(t,e),e.observers.push(n=>this._relayObserverCallback(n,t))}findCollectorByKey(e){return this._collectorsByHost.get(e)}initialize(){for(const e of this.dataSources)e.visit(t=>t.initialize())}}function Cxe(i,e){const t=new Map,n=[];for(const s of i)t.set(s,{ref:s,children:[]});for(const s of t.values()){const r=t.get(e(s.ref));r?r.children.push(s):n.push(s)}return n}function JQ(i,e,t){var n,s;const r=(n=e.preOrder)==null?void 0:n.call(e,i);if(r)return r;for(const o of t(i)){const a=JQ(o,e,t);if(a==="stop")return a}return(s=e.postOrder)==null?void 0:s.call(e,i)}function Sxe(i,e){return JQ(i,e,t=>t.children)}function xxe(i,e){const t=[];let n;const s=e??new XQ,r=[];function o(u,d=()=>{}){if(!n)throw d()||new Error("Cannot append data flow node, no parent exist!");return n.addChild(u),n=u,u}function a(u,d){return o(u,()=>new Error(`Cannot append a transform because no (inherited) data are available! ${d?JSON.stringify(d):""}`))}function l(u,d){for(const f of u){let g;try{g=vbe(f,d)}catch(p){throw console.warn(p),new Error(`Cannot initialize "${f.type}" transform: ${p}`)}g.behavior&nd&&a(new rD),a(g)}}const h=u=>{if(t.push(n),u.spec.data){const d=yxe(u.spec.data)?new QQ(u.spec.data,u,u.context.getNamedDataFromProvider):cxe(u.spec.data,u);n=d,s.addDataSource(d,u)}if(u.spec.transform&&l(u.spec.transform,u),u instanceof rr){if(!n)throw new Error(`A unit view (${u.getPathString()}) has no (inherited) data source`);const d=Dxe(u);if(d){r.push(d.rewrite);for(const g of d.transforms)a(g)}u.mark.isPickingParticipant()&&(a(new rD),a(new gZ({type:"identifier"})));const f=new uZ({type:"collect",groupby:u.getFacetFields(),sort:kxe(u,d==null?void 0:d.rewrittenEncoding)});o(f),s.addCollector(f,u)}},c=Cxe(i.getDescendants(),u=>u.dataParent);for(const u of c)Sxe(u,{preOrder:d=>h(d.ref),postOrder:()=>{n=t.pop()}});return r.forEach(u=>u()),s}function Dxe(i){var e;const t=[],n={},s=[];for(const[o,a]of Object.entries(i.getEncoding())){const l=o;qv(l)&&LG(a)&&s.push({channel:l,chromPosDef:a})}const r=Xk(s,o=>Mf(o.channel),o=>o.chromPosDef.chrom);for(const[o,a]of r.entries())for(const[l,h]of a.entries()){const c=[],u=[],d=[];for(const{channel:f,chromPosDef:g}of h){const p=_=>_.replace(/[^A-Za-z0-9_]/g,""),m=["_linearized_",p(g.chrom),"_",p(g.pos)].join(""),b={...((e=i.spec.encoding)==null?void 0:e[f])??i.getEncoding()[f]??{},field:m};delete b.chrom,delete b.pos,!b.type&&g.type&&(b.type=g.type),n[f]=b,c.push(g.pos),d.push(g.offset??0),u.push(m)}t.push(new rD),t.push(new dZ({type:"linearizeGenomicCoordinate",channel:o,chrom:l,pos:c,offset:d,as:u},i))}return t.length?{transforms:t,rewrittenEncoding:n,rewrite:()=>{i.spec.encoding={...i.spec.encoding,...n},OK(i.mark,"encoding")}}:void 0}function kxe(i,e){var t;const n={...i.getEncoding(),...e}.x;if(Oo(n)&&(t=i.getScaleResolution("x"))!=null&&t.isZoomable()){if(Vw(n))return{field:n.field};if(!Ww(n))throw new Error("A zoomable x channel must be mapped to a field.")}}function eX(i,e=void 0){if(i.parent!==e)return!1;for(const t of i.children)if(!eX(t,i))return!1;return!0}function wM(i,e=!1){if(i.behavior&RP&&(e=!0),i instanceof rD)if(e)e=!1;else{const t=i.children[0];i.excise(),t&&wM(t,e);return}i.behavior&ih&&(e=!1);for(let t=0,n=i.children.length;t<n;t++)wM(i.children[t],e||n>1)}function Lxe(i){const e=[...i._dataSourcesByHost.entries()],t=new Map;for(const n of e){const s=n[1];s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s)}i._dataSourcesByHost.clear();for(let[n,s]of e){const r=t.get(s.identifier);r&&(r.adoptChildrenOf(s),s=r),i.addDataSource(s,n)}}function Exe(i){if(wM(i),!eX(i))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function Axe(i){for(const e of i.dataSources)Exe(e);Lxe(i)}function Ixe(i){i.visit(t=>{t instanceof rr&&t.resolve("scale")});const e=new Set;i.visit(t=>{for(const n of Object.values(t.resolutions.scale)){const s=n.name;if(s&&e.has(s))throw new Error(`The same scale name "${s}" occurs in multiple scale resolutions!`);e.add(s)}}),i.visit(t=>{t instanceof rr&&t.resolve("axis")}),i.visit(t=>t.onScalesResolved())}function Txe(i){for(const e of F0){const t=i.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}async function Nxe(i,e,t){var n;if(!i.import.url)throw new Error("Cannot import, not an import spec: "+JSON.stringify(i));const s=tL({baseURL:e}),r=i.import.url,o=JSON.parse(await s.load(r).catch(a=>{throw new Error(`Could not load imported view spec: ${r} 
Reason: ${a.message}`)}));if(t.isViewSpec(o))return o.baseUrl=(n=r.match(/^[^?#]*\//))==null?void 0:n[0],o;throw new Error(`The imported spec "${r}" is not a view spec: ${JSON.stringify(i)}`)}async function tX(i){const e=[];i.visit(t=>{if(t instanceof cZ)return e.push(t),jK});for(const t of e){const n=t.context,s=await Nxe(t.spec,t.getBaseUrl(),n),r=n.createView(s,t.layoutParent,t.dataParent,t.name);t.layoutParent.replaceChild(t,r),await tX(r)}}function Mxe(i){const e=i.getSize().addPadding(i.getOverhang()),t=n=>n.grow>0?void 0:n.px;return{width:t(e.width),height:t(e.height)}}function ph(i){return()=>i}const zc=class{static create(i,e,t,n){return new zc(ph(i),ph(e),ph(t),ph(n))}_offset(i,e){const t=this["_"+i];if(e===0)return t;switch(typeof e){case"number":return()=>t()+e;case"function":return()=>t()+e();default:throw new Error("Not a number of function")}}_passThrough(i){return this._offset(i,0)}constructor(i,e,t,n){this._x=i,this._y=e,this._width=t,this._height=n}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(i){return i?this===i||this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height:!1}modify(i){if(!Object.keys(i).length)return this;const e=t=>{const n=i[t];return typeof n=="number"?ph(n):typeof n=="function"?n:this._passThrough(t)};return new zc(e("x"),e("y"),e("width"),e("height"))}translate(i,e){return i===0&&e===0?this:new zc(this._offset("x",i),this._offset("y",e),this._passThrough("width"),this._passThrough("height"))}translateBy(i){return this.translate(i.x,i.y)}expand(i,e=1){return i.left==0&&i.top==0&&i.right==0&&i.bottom==0?this:new zc(i.left?this._offset("x",-i.left*e):this._passThrough("x"),i.top?this._offset("y",-i.top*e):this._passThrough("y"),i.width?this._offset("width",i.width*e):this._passThrough("width"),i.height?this._offset("height",i.height*e):this._passThrough("height"))}shrink(i){return this.expand(i,-1)}intersect(i){return this===i?this:new zc(()=>Math.max(this.x,i.x),()=>Math.max(this.y,i.y),()=>Math.min(this.x2,i.x2)-Math.max(this.x,i.x),()=>Math.min(this.y2,i.y2)-Math.max(this.y,i.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new zc(ph(this.x),ph(this.y),ph(this.width),ph(this.height))}containsPoint(i,e){return i>=this.x&&i<this.x2&&e>=this.y&&e<this.y2}normalizePoint(i,e){return{x:(i-this.x)/this.width,y:(e-this.y)/this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}};let VL=zc;Yo(VL,"ZERO",zc.create(0,0,0,0));class iX{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}}class VV extends iX{constructor(e,t){super(e),this.webGLHelper=t,this.buffer=[],this.coords=void 0,this.views=new Set}pushView(e,t){this.views.add(e),this.coords=t}renderMark(e,t){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const n=e.render(t);n&&this.buffer.push({mark:e,callback:n,coords:this.coords,clipRect:t.clipRect})}render(){if(this.batch||this._buildBatch(),this.batch.length==0)return;const e=this.webGLHelper.gl,t=this.globalOptions.picking;e.bindFramebuffer(e.FRAMEBUFFER,t?this.webGLHelper._pickingBufferInfo.framebuffer:null),this.webGLHelper.clearAll();for(const n of this.views)n.onBeforeRender();for(const n of this.batch)n();t&&e.bindFramebuffer(e.FRAMEBUFFER,null)}_buildBatch(){this.batch=[];let e=!0,t=!0;const n=o=>()=>{e&&o()},s=o=>()=>{e&&t&&o()},r=Xk(this.buffer.reverse(),o=>o.mark);for(const[o,a]of[...r.entries()].reverse()){if(!o.isReady())continue;this.batch.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.batch.push(...o.prepareRender(this.globalOptions).map(h=>n(h)));let l;for(const h of a){const c=h.coords;c.equals(l)||this.batch.push(n(()=>{t=o.setViewport(c,h.clipRect)})),this.batch.push(s(h.callback)),l=h.coords}}}}class Rxe extends iX{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const n of this.contexts)n.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const n of this.contexts)n.renderMark(e,t)}}class Oxe{constructor(e,t){this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}}class Pxe{constructor(e,t){this.x=e,this.y=t}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}const Fxe=i=>new Promise(e=>setTimeout(e,i));function Bxe(i){const e=i.requestAnimationFrame||window.requestAnimationFrame,t=i.signal,n=()=>new Promise((s,r)=>{if(t!=null&&t.aborted)return r("aborted");const o=performance.now(),a=o+(i.duration||1e3),l=typeof i.from=="number"?i.from:0,h=typeof i.to=="number"?i.to:1,c=i.easingFunction||(p=>p),u=p=>(p-o)/(a-o),d=p=>p*(h-l)+l,f=p=>Math.max(0,Math.min(1,p)),g=p=>{t!=null&&t.aborted?r("aborted"):(i.onUpdate(d(c(f(u(p))))),p<a?e(g):(i.onUpdate(d(c(1))),s()))};e(g)});return i.delay?t!=null&&t.aborted?Promise.reject("aborted"):Fxe(i.delay).then(n):n()}class Vxe{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let n;for(;n=t.shift();)n(e);this._renderCallback(e)}))}transition(e){return Bxe({requestAnimationFrame:t=>this.requestTransition(t),...e})}}class Wxe{constructor(e){this.genomes=new Map,this.baseUrl=e}async initialize(e){const t=new T_e(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(n=>n.load(this.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const zxe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAEFzklEQVR4AezcRXjr2BnG8b8SQ+gJOiA5d1NmZuZVuU133Zf3++6XxW27Ku7LzIzDrMgByxQGaxwfWVFGMly088z7e76Zi5bu6nvP+Y4sKwgC2n4KP4QfgEcvAVdZGHfuM++Fj8HHwUZERO6aMTocsMGhl4C7bbrzr7C5N0REFAC30nct7qwhdH8REQXAfKf7FrjTLPpJ7EPuMhERycB36XD+hX0/DuzSlsnw3OfyilcwAA/vn/yzQQMoUHg9r59hhn7Oz/njH9ncJAiAXNj9P2qTxdhARETufgDYNs4fsH/Cv2jL53nzm1lcZH2dngKCP/Gnn/LTEiXg+Tw/Q+btvJ1+/vlPfvYz/v1vEwA26w4fs8lm4R4GgIiIAmB5GdvGnmbuh9Rq8MIXcuMGpVJ6AFhEXNwneOI//OfnSz8fL49/jI+9lJcecjjJJD15Ho8+yo9/TKUCb7J5vY1tcw+JiOgMILYJcDpNuFQKq5+neMrFbRXLnI+fu7im6KlSCS9fqXDBccLb31siIgqARBOu1SiV8DzKZbpr0nRxWxnQqs8tv51lol/2Xf63qlS6euOpKYZIREQ7ANOHTYdu1SDL/wMOlguFlxW+Hf8dujMX9ryrNx4KEREFgGXd9BQoWu97S0vLbU36T4EOD6NwGf78R0REAZBoxWaJ3qqDA9Kcx3p9YXW1sLLSCoBM5jIV+i7/gwCWl8Nbzs0xLCIiCgDbDiub7b8JMF3exT3kMOM4a3bLmuNczoX22ScpPluK33KIREQUALmc2QS0KjGqT3BxzWKf2VmKhl0sEhD0ngKZS5ZKOgAQERmVAEg05KhVBwFXnXJ62eWLRYoGrRofv8yGHsv/gwOYmwtvtryMiIgMLQCSxwCHh92mQNGg/4gjEwCTxRZMRdOhPfbSl/86/hURGbUAmJ4eaAoULf/N/OeibDsKgPhf0AOgIiLXIQASbTn+la3ICSfRSS+xru84YY2NpU+BqtXwYr4PU1PaAYiIjFoAxNpy9NKGajV5/HvMcTwApqYuf2X+govboJG+/I82GiIiMiIBsLAQdualpStfCIg/AJqc/9DWewqUfABUy38RkREKgPjpbKJtc8xxdAIc7/dXAyBlCnR8HIuSbFYHACIioxgA6e+EODqKr+tPOU0GQHwKtMmm2SvUqcdzpNmM3SCXQ0RERicAVlbCFj07C81m/CjYrP1T5z/pUyArnALFJ0k6/hURGdEASL4XyNQRR2b5n5z/9JsCRdfQA6AiIqMdAClTIM+Ljn/POEsGQHIK5BF+ZGurZpb/+/uxS09PIyIiIxgApiYnYX/fjIDcrc7x79xc6vyn27NArY/qBXAiItcjAMbGnrkJOLzo4rH3/6yvR8v/vlMgz3tKb4AQEbkWAZBo1Ftb3vb25s6mi3vOeXyRn2S+5GuqRMk9cLd2Wp9u7O5CoRBedH4eEREZzQCIdgCZDJTLZd/f8Xe2m9u95z/JKdB2dXunsuP7uzr+FRG5HgGQz8fadbPpV6t+zW9VvLv3DQDLotwol+vlet2/HvMfEREFQLxdW1Cp16v1amWx0jMArOitotHf8hu+v+c3Gj5zc+HllpcREZFRDoD4AzvVWq1Sq1zOf9bW6CkKgPLr/Uqj0njkA/HLiYjIsGQYwMxMuAlYW+Oz//8/X/4/L3lJcvlvQdBrChR896vf1QHAdSIi2gEkm/Yg85/kFOjC5KQOAERERkEGPjT4McC6w/rfYQ6KS93nPx9K3QS8ulVPgdMJE8tCRESGGgAbDGBhAcdhw4YlWIUiqcv/b8Gn2UgNgI0iWGB3MkBERIYdAJ9iMO8Je3e7iu1Klbjg9HS7+5syV3AsRERk2AGQZzB52/TudhVhjVSpF8ybT0X5kUNERIZrjMGtJpb/gyuaCiPk+hARUQAYzq0GwMzVEZCIiAybFQQBIiLyrN4BiIiIAqAK34T3wxp8CX7N0+zZAQYCQRzF4bfMAQroCKETRMfYvWRHqFt0kI4wkaaQDQQ7+33mDPPz9wBwAQAgAAAIAAALU3KeWwEu+dglp7yNATqEADT35Np+/zGNAHQOEIDWgFsyBQAbAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAH8iAAAIAAACAIAAACAAAAgAAAIAgAAAULLPD9v0CYCSKXOO6RYAJaPff40ASg75tnm+5QLACAyAAAAgAAAMtdasBAAuAADKkJcHO3eZ3Uh2wFH8GtRkZmb2kXrCWUNWHGbmxAwyW2RmtpXSyOrwfJ9X93f+ghW8K6xZSP3LRvgvf4bvw/fgl7wq8iUlSaqlYgn2P62SgWYqcjBXWSAkyQBUXMCv/ysDST73d5j7/P6csEiSAajYgcy/LzWX7Z3rZQ5WkCSFGICKJ/jrp/cBh4f7f/9xam4q9ffUe94jSQo2ABWH8BPIzM9n5uYyf9/KHGe+zbd76UWSFG4AKtLp1YWF/dLOjjiqp94AxIAkA/D8zNISi4vXCwtn1L/hTTTCJ0n+EWx1lZWVaIn9wgwz0aaYInCSZACKRdbXWVtjdXWSySmmppnuppvASZIB2NxkY4N0mkJhnPFok0wSPkkyAFtbpW1ujjASbYyxDjoInCQZgNNTdnfZ2WFvb4ihYYajIUkKPwCZTGn7+3XU9dM/wMAgg4RPkgxAPk8uRzbbQ08vvX30VVNN4CTJANzfc3BAoRCtm+7yCJ8kGYCjo9dBO+0ddHTSSfgkyQCcnXF6yslJE01ttEXzGnDxIMkAXFxwfh6tmeZoLbQgKRZkAK6uymugIVojjUiKBRmA29vSbm4+8KGOumhIkmIRgLu70u7v3/O+PCRJ4Qfg8fF1kCDhJaAlKTYBeH7m5aV0D7XU1lATDUlS+AEoFl9XQhVV0ZAkhR+AqqrSqquBIsUXXqIhSQo/ALW1pdXUAE88lYckKRYBSCR484aqqgceykOSFH4AIu/elXfL7Q030ZAkxSIAHz6UVld3xdU119E9kqRYBKC+noaGaJdcXnARDUlSLALQ1FRac/MZZ6ecnnCCJCkWAWhpobU12jXXxxxHO+ccSVL4AWhvL62jg0TigIPykCSFH4Dqarq6SuvuLlDIkcuSRZIUfgAiPT309tLXlyWbIRPNH4NKUjwC0NdHfz8DA0+Jqj32dtndYQdJUvgB+PCBwUGGhhgZ2WFnm+1oSJLCD0BkZITR0Wh58ptspknbgHiQZAD6+hgfZ2KC4eE06XXW11hDkhR+ACITE0xOMj29xdYqqyuspEkjSbEXgwAMDzMzU9rU1DLLUQCiEiBJCkItX2x2lu3tod3d5P5d63XrW94iKQ5kAJp6elKpVDKTSWbbkr9Nfo2vETxJMgDJ8j5+TGXzyVxyND/KFpKkkAPQD0lIlQPw7l3qs+8k8glylHaHJCnAANR/OvcrTzqAkQQfeQ3AHwiNJBmAmX8596NN8C8+g1xlewRCkgxAz3+98H/Hv6v7lwbk4ZEvNUlSVbFYRJLkH8FiQpL0D/buAqqtNd/7+DcUSQrBQ4TgGg6NNEyZqZ13pvJed3dZet3d71123WXZdR13OX7OSIVOE6BKC6USCMGC9oS2+z6bTUIoFkrP9Ib+P+u3Uk+C/X/7efZOycHEanzwy/Aq643CS/Cn8MPQBQWk6YU/htNg2jTrmDZJDnwV/Cn087TNwz/B14Ips9TBL8I5duwe/AUcA9Nq/o8TQshVQL3gTMaDIQF9azPKWl6IwdhywuxOIJlOstZ0MkIIkT0FkN4BLihhcO3ov8Im/DAGseVEeFK1cDBZAFksnowQQmRVAYxAL7iYck71Hy9Ln/4zbK7C6IBkHrBzFggkUyoFIIQQz+KVwL30O/v7nH19rnf1NTf3wTCbej9JHoi9SSzKGPRgcOI8ylEUE2g8JhxmYABNS9v8cQd4TwvLvp2thMPh4eHhRCJRWVnZ0dFRVVW11bMzzMOn2Lk6OISy7dOKRLhy5cHUVDw/P15XN+PzIYQQWVQAceJfevClvl41/Qf6XAV91dUPLRYyKQDF72fsc3pi00ZpBAlasfrwsYYJuHWLM2d4/XUePgRaqQpwOkAgkMmkPXPmzJtvvnn58uXFxcWampqxsbETJ05UVFRsUwBP0gF1y2H7Ahgf54031DObHh2dtlimOztZWqKri2whhJACGGDgLd46c+dMX99CzO2mtpaurkwLoLiYQIBYjLHPqhooX7TkkefE6cBhx06ahQVCIT3nzjE4VaaP/oMHCQQwm9nO1NSUGv2qA954443p6Wmv15ubm+t2uw8fPszjPsJ68+Rt3QGvwImlJZRaqCNDg4P09vLaa/H+/nh5eXxxEaeTjg727ycrCCGkAAoosGBZYCHW309dHfX1NDRQUUGGmpqW1wFjxGKTX/ximLADhxPnKU6RJhRayeAgvC9AYDk1NWRgZmZmYmLi7t27k5OTwMDAgN/vV02AYbvD9dIt1hYaXISX4FTsP15+qVqrLqGkkEIysbDAzAyjo3FNi09MxCMRxseZnpYCyBpCSAG00OLBM8jgzbmbsStXaGykuZnDh8lcIKAKwMilG5ecOI1FwAEOsOzmzdUCwOslEFhJZgoKCvbv319SUsIytftfVFRksVi2LoBtpr+G7hb0xLjwMhcufFlr76LLi7eRRjJhtVJeTk3N9NTUtM2maoDsIoSQAjBjbqf9Bjeucz129TwtLQwM0N6uT7cMmc3GRpCesbHwzMoiQKWSytnZ1el/v8xJILn5kzGHw9HS0hIMBvPy8hYWFurq6jo7OxsaGmC9byJNof7rdTRWxOP0vKRGv4pjMu8UXUGCKhYsmS59vF4WF+NtbfEy0/TgJIWF2XT4L4SQAlBaaW2hpZnmy4nLUzduoDI4mGkBGGprjY0gldgbb4QJG4uAE5xITf/he7nGWV89Nhs7cejQoZycnKampkQiYbPZVAHU19fzBDRW9fSo0W+6cKHg5t2TnDSmfzXVZKi0lBdfnKiqmpy8MW39UOLf7Nhs+m9mESGEFEAeeU00NdLYQMPUzesMDenx+cjLI2Ppi4C+K31GATivO0OhDqMAjAN/PR4PO1RaWnry5MmpqamlpSX18/z8/N1O/y9/WY1+lhPkPcb076STHamqGqgaHGLobnCUr+uipobsIoSQAlDqqVepo+7i3EVteJjbt7lzh8bGHczVffvw+03GyYBYLDwediaczj5VAI5QiCV3g7H5o6nbJBM7U1ZWxhPTSDGpektOf4/WHiRohB0aNA320nul8sr1/++hrY2mJrKOEEL+N9ASSmqoceOuppq7d/Xcu8d2ND1pnE413zW//77fHyUajoTDw+Fr13rvThfNqd9fDlbrun/+DvskaBhMKtPTqenvmMw3Rn8XXfvZzxZMjydqip7hTE9uT+jg3H2fj85OSkrIOkIIKQBFjX4VFy599I+M6HnwgHW0tKxnXORzMRD4XZ8v3BgOR8PRaPg3Dx4MGZs/DQ1b3OHTVwg/lD7Adcnpr2/9p6a/C9dOn9YII5fyLvUcuT7Y3U1XF14vQgiRjVtAyuoLuJaWiEaNnRycTnZoqCkQahxTsQyM1X506LW8Xw4H/r8jUG4PlDfzDJhYs/W/UgA9PUEOd9Gl8gIvkKKRIVepy9ftm+vOzTl8+ILqgOwlhJACsGK1YVMpoSQ+Po7KxMROC2B+nlCoIhQKhEK/0fhXFY7PePI/E1G/sh+02/PsDhxFFD2b0a8MDaWmvwdPV/K6TwwaO+CiqrvqePfxfd1VOd3dORbLebKWEEIKQKmgQqWc8vjkJFNTKlvOVY11QiEjnqGhoZPek46I93ok4vyhL4S0kB27ylGOZnp/O2dic9PTqenvnDJ3pV/1r5Hyd/DtUMmWmqFbj6PbceyQIweMnCVrCSGkAMooK6VUhfh14nFmZnY0bwcGCIW4eFG/7aCj09tZH/E6IhFGRsKmsAOHscXUQgtfecnpbx6MBJNX/bs0F2neC9/BdrzQnUwnVXAMcpL5EtlJCCEFUEyxFasK8/PMzel59IicHDKgyiIUWknR2xV+/P58f8DrNc4nJyKR0P2VRYADhxUrOxePx43XAeTm5rITxta/8cqvIEf06a8F07f+Tej+H9v1XXdaGjFUru2AL5CFhBBSAIUUGkFZWFhJURHbW53+d+5wAr9f8/vxO+rr8XqJRFTunDsXYqUDjnGMnZidne3p6RkcHEwkElVVVZ2dnW1tbWRoaCg1/TvoCGorV/6wI4Vrp7+DdOXrOuARWUUIIQVgwaJixozy9ttGMimAq1dXC+AABwIE/Ph9+ACjAIyE765uBLXSSsbOnj376quv9vb2Liws1NfXT05OWiyW2tpatjU9TU+PMf2dk2Zj9KuYMe/s9WhzbK0UvlZPdhJCSAHkkptPvooJk7a0hJHtTE6ubv1XPLD78RvBUFi40gEjI0sjnwk9XN0IKqaYDESj0YGBgQsXLrz00kuapjU1NVmt1paWlkwKwBj9Kub/iATPnlw+99vq5DYqm47+JqgkpRshxN4nBaDsY5+KaoKlhw9RefQo882fkYjpNH7j8N+GjZSWFqMA1O3dixfDhI0OOM5xMnD//v25ubmpqSk1/YGRkZGZmRm1FGBbly+nLvwPvv9IF21BbndsNfqVpuUgBfDcEUIKwIRJBUXTkrdbuXRptQACyWP/tPOrST6fUQAqoWjIWAGoZLIRVFRUVFZW5nK5SkpK4vF4c3OzzWZTP89k7cCtW/T1AV3vvxNEBRNbaIQmHvPHPBeEEFIAj3ikoqGRk4PJpOdxx0mKxVZ2fhZDHIdmmo0CYL3S0pWNoGj0wcJCiFl78oRwCSVsqaKioqOjY3x8vLi4eHFx0e12BwKB1tZWtnhmBk3T35q2Jdq4yO2L8EdwfOsCeG4JIaQAHvDACPv2Gdniu26FQkyHOKQSXbmKNEiwjDI21NHB+DgWCw8f3oMw2BmzE3qRF9nO4cOHLRZLe3t7IpGorKz0eDxqEZDRN4Ts1COE2IaQAkiQMIKSn29kszEbDeMN6aEPgxnzNofzx4/j8RjnFUJgB4eeaBt2thNYpmmayWTCsG0BvKBHCLE9IQWwwMIiiyooZvNKHmdHGcUeAiM7kjxyf2h0QDKlZGSL6a/YN/+1EEKIHDY3x5zKPPPk5LB/vx6LhfUewcXk9J/giUUgvJwQz5QQQsgKYIYZI1itKpu+BCyUzGV2Z3UR4IB2nhEhhJACmGRyiikVSkspKdGzoYPL+VUypPGsvG85f48QQmxNtoDGGZ9gYpJJystXIoTY84QUwDjjY4ypLLCAzaanogIhxJ4npABGGBllVIWiIhwOqqqorEQIsecJKYC73L3HvQgRqqtxOnG5EELseUIKYJTR29y+w50YMWpqVPQaEELseUIKYIihW9xSwWajvp66OimAvU8IIQUQJ36Tm4MMqhqgqYmGBr0DhBB7npACuMa161wfYOB+qZnmZhW9BoQQe5uQAhhn/CpXjQ6gvZ22NlpbsVgQQuxtQgpgmGFVAFe4Mu+w0tGBx6PXgBBCiD0nd92vc61Y22lf6rRffeEFvQPMZoQQe56QAvDhS5BwdDjc3v6aAwf6PZ4RhBB7nZACMLyr7F01vhq3113j9dZAH/TDIkKIvU5IAeDD4XU4fI4aOzXghhroh+sIIfYwIQXQBl7wgZd2cCcLwGiCfhhDCLH3CCmAYvAlk4NSBO82pn/aUqAPEggh9hIhBeBLHv67SFe9nJq0JugnuwkhhDBpmoYQQgh5IVgaIYQQUgCmjXIY/gzukrke+C3wg2mzZPK4Rk7BX8Ntnoj6Z38C74Zq+Bn4ArtzAX4FmsCUWerhF+EcG/hx+Ev4LAyzVlR/ezme8WPkwnfDh8lEDP4W3gsm6ITfhStsYhT+Kvk0fPAHG1wcZnraqYDvYnMP4b/gW1P/4ImfzPNg03eWKS1e+H24yjv1kX0P/N7az/8p+Hf4Xih9Sg+RbgD+GI7tfuyY4TvhP2CerX0GfhSsO3zOJ+EfYIrtDcMfwaHN7+o74P1PswA0NpCHkcw1QSN69rE7juQd1bIXzKx+NXwCPZ9Ev30ZvV7FQT3iK8eMkXeEGw5Ap367qgw6wKPfPn31yVif1h0V7uHLQDOXb4TNGIe6Q2s/zKkOGGAXjLtoIOvNw1W4podDxtpEzw0Y0G/1tOnB9RxP/6CejGmIXb6zLO9kAaSmv4U1OvRZwS39llGepjxoSKaXXUjdC89hAWjrVkp5WxWACQrAt9HoblLZTQFYocHoALLY4iLXrnHNz7VkB/wuKUMqRg3oMWog2gZ27DxP6iG4ixWACfGEKwCLyjs5/Vt4XAF0ZFYAuzh230UBOJN34XwuCyC9A85zfphhLV8jj2/Me6wCvj31hefTk/L+1BWljZ+lcQZ3an+juJiuLioq2FyceA89k0ymHf43UNCVesiNvX/TMwBnSeOCI2zo28egiqcskdBHv8rVWq6BUQCzrHdjNUYNfLKNNpVKKslIxu+XGLzOWp3gSXtHvD91CuCt9S8cpzX1gcjU6CiRCBMTzM+ztERODmYzJSU4HNTVkZcHFCdHfxDKSDmzflf7/OrEN9VR58CBMjvL8DDRqPqJ/hC5uRQVYbfrnzlWK7szPj5+7969iYmJ2dnZJXXnUFBQYLVabTab2+0uUW/IU6Ge/L17q++lffvYv5/yclwu3G629b/sfQdYFGnW9SmBJgoNKJIzggKCIKLojDppZ76dmY3On3POOeecc845rRu+71t3djbNrI6ZIAgiUTI0OTTdQHdD/ef1LmUrdFMdGNedPs996oEOVV1vOOfe+4Zqxs6yaoNAFTnPwfIg1FWGh9WFNjZgscQdOhRXWhrH9wLCzAzGxiC/1uN5+muzspCXByBV2F/Z7qgAhrzMgDotG8ziIpxOSGtJTMShQ8jPR0aGmaaeDhR+jMJ5FBija/x6Y6P6hb4xh7lWtK5gxUtDqoEKo7X7JpmPADuCxBtP2/tlX5cYAe5hb1ze8WeIKSAdE9rEXdz9FJ9SAC5b2FrghW8Y7J8niwp2I53iYhT/KorvbgsAa5Ed/rXX4Bud6PwxfjyIQRwQAfglnmWvW8P3LuOLAD7wqwHZu39f3cm/Um+FE5ub29Tfg94F9OYr6l+Cf/Q+jQOc/bjaj/4KVFAGUpEaugD40IBKoMq7LOQru2nACW+Vv2yS1B4+RH8/ezV5VLGzIQCpqYraSkpw7BjNSP6U7PXjh7e57gAOnMGZ9/T3LO0PtUePMDiIqSksL4sA0NVQ5y8rQ02N2uY2KJD0u7q6BgYGRkdHZ2dnKQAbGxuaplEAyPtHjhwpKCg4evRoVVVVIkkqaHiX0uwsVldFAIT4yKfqLqqqeDuB1vPgtgbwZPX1eP99WDqacf8+r6Uuur7OO4nLzIyraow98XVZELo3WInt7WzVSnEpA/y1IgD8tXTs+GtZp5WVVfn5wv5+/BcjCOBRB9SvYn8ZGnrOXRAtJwnwtLwNEsieRVBYiMIOFN7eFoCKCvXzTp+Gb3Sg44f44RjGkMDvR6PwS+osgG8BCF0DXofArwAYrd4E+4dXAACn7lzRVvpi+o7HtHsVu+4ddEcbS8p8CQCtC12/ioUF4L33VIcnF7Bl7wYq8BCGBjDwK/gVd3EBit5X36dnYRLkL82HBvhgfx3hh/C+lwA0YR4msQU8gsQBN1kONEMGkpEctAD40IBKmt+vGBpwQllA4I03N6OjA2RnupxknJWVGDegwZ1ggZDF0aPkkRNzc/VnztTFxNTtqE5fveEeUKqXFtmLlu9cO9zaigcP0NeH8XFtYUEXAbBaVXhByiCV8BXKQGAgHfU3Nzd3dHT09PQMDQ1NT08vLy9vbm7qum6xWKxWa1ZWVnFx8fHjxycnJxsbG7MNgg6xlPhrLRZsbdGHIPGRhlSXobadOcOYMMB6Fg2g36Xn5GDp/t2M69e1O3fQ2cmyYmYyPi4hvvhy/Hg8pgAbVA3n7CGJuHED9+6hq0u1TZstcWXD4rFsRm3akzQ9I4NlTrYtHh+vbmiorq2thj8UAMdEAFZXH7ISqSvd3eq0/G2GEFIARMt57xQGvnjhAjVgbwGgkdR/BUvuRH5eyVVtrSrY3TCPeeY52NG+i++i8Liw/y574/8AvnAA30/GajDs77seTWvA5f0aBHbB5dJdriSXxcJGv3vK1WD/UuwCegZ0CEQGlABQ3mmPH/sSAHk8PT/khlu+pqJ4c/itUKXn0APPB18Mn/svXgzN0ICZeAQON9ClZEAFATSRAWoAlSDxpZiXwBu/fh23bqGlhe5tNrKLUJGBjAQkQIfT4Zx2TA+PDk0ODuZOT9fZ7XVud/3581HP989x+ADfyF7NdnzqcNz8acadO8XD9/PyFtOaVE93uehgeAYH56Za58hQ6v/4eOoNkyABsf/169dv3brV0tLCIIDkTk//0KFD8fHxFACn0zkzM/P48eNHjx6NjY0tLCwwMrhw4QIlIWD2v3ZNlRLpj8THSOWVV+jukHoU+y8vq5iABcjj0pJytC0Wn91hGH6YIzOTxdC30dys8VrXr6csbCYiFUhdX1+P646Lm4qDDZiCshPAKewOXVdaRQH49FP+4DJPUSkaWaexiKUuUh0nlice93cuDg1Vzc5WOzerPalRpwpA+A8C5ueHbt0aunvX2dZGIU+YWGS3z0R9EpKiEOXcck4tTfUs9ayTGFggBAMCaqE/UDVYTmIMeByK/fl1HhlL+aYdagAA45vmmVYLH3/gLeyKVL7zmY0BkKolCnOvrrqI/+qy/OiqxZKIjjS6JGxNBsFmP91NzifI4aIBdBrWhf15rK7e9dmTpH4xJhNZB/wa/cRABwN1UxrgFchcQOjgfXnzPs06tUbKPoqjWcgKzHmXaPrEifXY2I6+voHR74kA8EiTsYF4xOPnFnTfSFu3b5NrWJn1qD+Jk/zNLAf2agCrWJ3EJO+ly9Z16JPoeldaPXIOw4Lz4MEkHLcdzptLjuvX34y/efw9nS2FTkVsLBMbpH02NvIqo4IJUpX40eYFgEl/+v5k/2vXrg0ODp4+ffrkyZNlZWWZmZkJKo9MN3SVXj8jg9bW1rt3766trR04cIBZoLfeeovZoQCGRuhK81dSA1ZW8MYbOHkSpaXMdLNrUADYAdmo+LPVZ27eVPfGvBm5nO8GiA2Fzo3u9uzm5qqFU3nIk4pgwE1/Im4xToWDU9t2yreoM3Rgzd69ywo9h3NVqMpBDpuiB54FLIxilK20d7C32lFa7a4u2CzAJtAIP8iYxfEbg0M3W4ZvfdzS3Hzcc7QK58pQlotcdhkKAJsKeZlXue68bmfskpLCaIC0sNd4gKpwMQZXW6R+mg8B2MSmvE0NYGnL13Y//+V9Zn8fSew0efmzEAC2ue5u+j8Shbnsdhex6YqJuxLznSSyEkufvMwoj7Ge5sX+KfAFCrZoAI2+oAOGBtDf2cH+IsVsTCg+JxFAqHPeNB/vhHHuCBvPs9SfMm4n7wtT8w/x3GEeLLJz59jbmSHh2Ry9vW2UgbEBkQGaIQMWWBB+6CGWC6uZ3Y7My1omU1zAhbM4ewIn8pEfhzgA61gnWXSjm/08ai2q7kYd7wUC0xpAAXDcufPXs2+91aAzwcPiIDdaLCQ7XlY1VZdLJVSWWWCDg6qOFhdVkZoAXf729nb6/mT/hoYGuvZnz56trq7mkG8cfXPA4XCMjIzk5+dTD9g/Hjx4IGPCOTk5dXV1MAlqFJMe5FP2tbfeUpmNs2dVrt9qNWYQqM5IyqMYfPQRi1Qy7EGks1yufper19Xd/frEa6dwqhSlVlh16MtY1qDxXxC92wLwF3yFXeMsWTbIdKSzWl/BK01oYg0CkDpl/+1BTzWq82x5VderFPuLNfleaXgTx24eG7o5NHJvJAUJbCQ1qOGgEDmY414UAP5CthM2G2rVp85PeXWVEBsd3UsAWIqGBpBvxiUI2DX5TMIR4yVQeALynV3xBV+v/SdlAePfmdGYVHntsxCAvj42R0ZhJDJJR7pWVtxs4B6PJf7Kr0lOth06pFEhqaJsB7W1NQ0NNVFRNdib20jjYmQGcfF3FQBJ/tCY9fOd/zEXBPhgMx1hxfi4wftiySOLivFxwVsAVN4jUOTn0ygALG0aq2alt7e5t7d/QrE/zVsG2E/CxvyhY2aGIsWMNr1FzmStRe1pnKYGHMZhbIP9mcXCO6RXAKByvRI3QASkARv/em3sUuWFV/7q2bOv0HXeBsc1lX+ytqa6PPmTHMsEOhszO78ZAWBuh/kfevednZ3M/NTW1jK/f/HixVSv79LZZ+o/OTmZKRQODnOImJpRWFjINFFlZaWpIGBignXKUuJPZKjH3qSmqZw/D29Qzfi6283fxG7Bz1PJ2DEDFwCK4sDG6OBf6c95A+dexatkWJ+rFG/AJ5aW6CCyJA+hjMEcG56wv1GnPC21ZA5zVJf4uXhc3xYAD3Bux4rQSbK/soM3D9a01Gxgg84+2wMFIBOZRlOkDHCof1abZYNnSn+F5Sa1aQJeAqC8NNGAnQJguP9qwpjxHdP4CG9fAb4B2AMhqNcVrf+eD7BjdkcyfLyw3wIgSVuG7a2t5Gm2cSZh3IWF7vj4xNH45ssrhy8vHaqf4lsSHxyZnz+xulpz7twJEwEp1drgcw6nSRBAGSfHeY/DCPurmiiuheR/LJYwerR6GKeOsxU+O9KbNDSr6BjnvKk/xHy9lJoIAI/Ug6Xe3juUgcmnMmAMEePnBOPK21I1CfDX84fRJfRmf2/K4FsQrD9LPa9hT5wBzh7G+WqcOLlLZdNXZkCgOrsw18qKMhNgTp/ePfP7zPUXFRXJJB/F/jvAgIAywDlC/Fh3dzcHivlFfr20tNTMZVQpsRdI0plKz/Hq3cCmRJ3gxdgxlWzYbIYbax4D9q/8OLHh3W+/W/9KPWk6mC6g6zIuzSNzJh541rCGHYhBDLUBgkVANMADdbzk3Ugg7K8q/T7YgDlKRA1gO9nphdC/ydKzOB86TUtbWR6G1KbHo4b6/aKgQJL5KhyclzEAGQr2+iJpR9x/hqQorBb29znR6Ns+JADOYOnk0lMJ+OoLXAdAF6O5mXlGagB5mblIOlFkZ1damivhkeVfnHvNsgLLwoQ+MaANPHr8aGbmxyfsjhpX/Ak9K+18JeLNUhmNzCApIB55iZ2BGAeOTbj/Wz5e8IFNIA9be330gNef/srK4H2h/gHbUdWDG71zPirHGi6QUGjbMkCb7+u7SRmYUuzvPVOIn8MLx/S0TPzXoDF1SzefdQkzEA0wLQBnoeyED8GnM8d0vTgnWF+nDwyXy1wAM2Oz2Tjxn2l9RgBkefK7b4op4Ac49ksB4KgAv8iv7xSAsV1bEUuJhH74MD0t5OQg3Qk4oe24lWQoArNalU+2sMBEFhnQWwDysDeYpqdzzZZJ9g8y26dpqjSTkmgTqxN96LuN29QAnpZxwAFf/WVFNOBZARjdpn4eOyBI1pPhG3SkeAtxehw0sCrFyOMmgwBW4HyLHYYGlJTsdP99DP+anKLzPcCJgHERghcuAHQxjKQtLl1CUxPDUlKw6/CUK7HD8u9+v8Uy8K5ljiXVp/cVaoXdq90112tObJ2oRCUkZo/fuyaMoeDp7SwQryJTPN1wG8O/Qv08+gjYfUwQ/D5g3z0LJMiGfGdM2W56/ZrXOjAfO5LNAz0Y68WHvXikNODUXzloTS/MPHymOK/46CHF+7SDOLgfGRfyvmHrfX3D5eVkqbn5+T+8cLV/QGTAXY7S8he7aNrtJj2RpGhpirfS6dNJ3t+8BpjEnwZ0v3x14IAy8V7FTPx899LSEmf18JiWlkbHPz09nZM+fYe2GfwAPymLBhYXF/nFvRur0wkpJYeD7K/IPe0B8ACaj2xmLC1WuaX8PL9LPfPCn8DeSEbeYeTnoIBMGvyIT2amLEpYu3//Jm4y6c9Z8+RLOu80iv3uSuCA0gCPd3oTyn7dnmkSFXKsremkes2jHdg8oG1pJmrT51CwW1JAXgKwhS1j/g/FXD7qb5nqd+EbVxMD04BLPzcrgdkW6YzTm2R6p7paLZfgeNSZM8yIufAtl+aKOeWKiclJseS8hxMckOEUguM4XugurLlRA4E5DTCmA01P60YQIAJgDP/aYUdx047hX3Na/JE/DTjD7/hlf4FvAXACo4Yld43GPx79+jffsXJuYEZGQVHB0fLC5PJCHDqI/cRGwdG+jbLejb4B9+NJi23u4MJU0p+MH4hPQGY8QEuAsswXuOkFGYo8BXDkg3RjREL7oQFSxWEE53c6ngAAB3iZ60+iz+sbMvmHnyQ4NYhf5BmwA38Sz6Bxfd0oJeXXJ32CPwDcAzQfYekPobC8rMKFzU1aoAIA5AnvhjTqL+vRGLt4PDOdnd/H9xkHMMIzBIB/k0F3yXyuKw0wB413abNRTRUtra6ynLSNDd0jSaQtBAjvrD4ZblQiAAZSQjtC/TwuYxmFtXtn/y/DF74ugvJSbgUh0ej4OEWV96+82Lo6lhwbGtnfBZfFsmWxaDExugaNLn+BXsAxGTp3ye5k3IBpDRBWl7lAWPGaD0rvxhj+lTleyhgU+8PH2A2Wj2AxOqCRXfuHUNzvxOX/9vF/+29YAmCFNy7ADBKAk0ApUFaF0hiU0hX/X9/u+ST9WlpWlsa+QQXt62PpMRskEXrYN5Xg6Xt7edR6e8v7+spHR+3Rs9Vvud6qiFJjABVIKQdywjkcrAUTAdBcLkkHW2ChIVCsA3gxGuB5AtnvIWYb8AvjY6R+fpHgpPgopjF94y4ZXAycHnvg8oOCywUoK4BP/Aco8ENEfHxQA2M/Af6wtI7gNcBqpXfIMlK0mpvL/jo4OjroHGRyRtx/SfeRIupQ93zez7P3Nk7kA5rsBDE7qwTAbldCycXXbverm5uXgiJYbwGAsSDAEADRAJkzFLQAfA0GXkYBYDFTdhmQxsWxIEheEgSR+tmbeVSdWJn0NdCno0HgftZfexO+QZ5/OhLQ3m43pgPZKqzy1wQmUHxe8j9BTJeN3fmqDoxKtNBx9YMx4N2rwLmQRn8P1uNUCRT7M+FO+93zvT3zPb29VzfZvkj9chQZYDHukfzRTJKqUL/3MX4+t0KR/rsyx5RHdr+ft/mgenDkXB3CpK/wIbjH52maUWKm8lOeDzybqN7EMbNlLVQVzKStvDDUNvsmQ5bMTNX2SaNk68nJtampgcnJgZWBFKTQ/WcvZhyvQWN2yOTGfeT6tjaVHGbvGR3lKemUpi5a0u3JybwceanroOVK1P1vRCEIUKoksX/kCKaNuUC1tQvaorj/PBruv1SKT/wSduJtAC+1AIgzQmH3Tq6JAIgGbAuAj7birQFvmh0KZmV7toOA4YpUkWKkpJie/Xl5J/tf9pli71ACQO7/b/HUgNCJzQprIxpLvWSgzN3b09XT23cVO2UgLS0Eh3QX6o+Zy6reJn05eve0F6wBMTE0aStsOeJABLyXYwOAF6MB4stL0l9CAddeQ8fubTAdxC/y6+L+7+EKiQEbX9tgMn0NJUCtmbLWQ9psWzdf23nAmK8pfa+/ruZwk6qZNpiaImGr0ezBweXu7ubF5iUsUdzSkEaPhBN49mT/hQW1Eu7uXTqFaixyNKFCdf+abHqiMvStx8U9ZI1EDyGqH98JKQiYvrtkzAcdLloU9n9m3fAvNKL9d1rGWqo2pqdZo0zFiADQkrwFwLcGmEFqqqEBpLMpsr/z8eOh8bShXBn+PSbuv/o9e+CNPf7XvfcB6gAxKR+KB86FrgEEk2BNaHpGBly9PZ09A5QByQXJUZSAdx4IOPzV0/M8+2uzGce2SZ/2WU37uQ2chUnExzN3zk4ry33pCa5gJaAyxWllLwoJCir1L6u9Vp8AvsFsj5H657IAGQ8wtdKbUTQTKZpm1+wr+gpz0Lum3nSEF5qc1YzCXISq+AH4QFYWjRkhcgU1gGLABkrS4DTC/ul+WSUwjvECFGAvtLbiyf4UuNdu4UoITkFkl6HfTqWhAOgsKGYmLBNQAuBz6Nj8UPD6kxTQFmfsPhEAmvE2L/e5FAA2xJQUcVQp43TOqb2sWlcO1EZAmuuJOtD0sHgjJSWGAKi03+jw8MiofTh3eD3a81Qcwg1t356ykoEMmrcM9Gz09Hb2DvVffRoKUN0uXlQdxjQ+/lgFxQb1b86kG/6+8QeCAt1TmkS6koqmnw6faAfuBBYBWK1UOx4XlxbnMT+DGQccptZDWKCov0HZi0J0dDRn/qQ9wcITcFsI7vTALYB8zRnlB/gxADIdKNWM0rP009QkKQ7qzs3MzWgzNt3GiY0MCkLh/fDGSxcAC5R1+89l5eQoq6lBZ6di6sVFepCzmGUcQPk3s2iEzfvBA7UpBk7XUgCUVVczy/RsOUxgFbgWtK4/JfmeXuX+c+3eiH1h5OCIkt7CeiP7/7kUAJY1q7CgQA3Okm+Yd9N1hgKuo0ddhS7XATUGwBFgskZYIHsA06jxrP+Jyclx2xrnkxnsr9QorNB8tHwJAsICujw0QwZ47Fnv6X3QOyoy4HZTGkwLAGlF1cMPfqAqZGPaupP6Q1n6y04qbjrBLsoOwL66a/ksoFuxv7IMmAcFUVrU0hJ9wFGMcmyvGtV+NhyUgWJhf3WswwsEN3nmvH5u6kBa59R+LuziCq/jPjaUZiJhfHx8ii4wwK9wsyBODDV5Gdno3z0zwyIa0ob60FetV/tpxMwUyYRaHAdeAy5BHa2h9glfDt1FIBbKLEC7GeGvq5N1tpS3LQLKTGy7BBYeUzKQxXsVFZyDLhGk/ty8gJvALQQLLwHo0cEVG1NTk9Pz4wfHKcPyBgnw8yoADLJIUlVVsNnUPn/NzbINoaukxFVgdV1xWX75lsUyAk8OHaRwTHAXnteoAWvj67bZ2anZ9cm5SRS/bW74N7Dra+aD4JCRi1zaMzKw1tO7NDjBvhDIiKKu06gaB/Omn6d+cmXIWQ7lo7PZM/Cbtk9zyI7JN47dZSLTKB+P7ulARzOa7+HmCG4DM0Cm+UE3WYJJ+RrEYA96mAfgMk4KJJ4FL92GNuaIuDqprqZO2J/HEN3a0GSdLJTH5V3c55k7fXIvoN7eXi4EI61zuu9O9n/48CH3jeCyYfr+/Bi/yK+b3OpDlsaQkPqd/d3opiOdoqXsOpI/hakudNlgY0m+mv8qJEvWCFj3MUFUAli2LdZ4okZ3N5xOVjE1fud2EzS2WjJ/EpISkGBmv0KXS31pfV1FpkpFYmOF/Z8Bs3B3pnBLD0UAZG9JGmWXHhY38JiZnZsunUZhuZH9/7wKAMEIjlrMqmU1tLfLriPuoiJ3Xp4rlxHAty2DOfhODiueDVc5dyFBBEDnMa9L+3Nzc7Y5B2pz8CX1KusnLOyvmWvqEgSEF+ylNC8Z6JWnQNoCYWmgPNeb+sO6/WdmJouZNUmK9pCgKVqyOY8VVgAMCEa0EVLSfdy3nX/72IXZ0b88ij8RgAvNcEe5ckND8w8ftqOdp+Wo4AmcYLGQGljqvARVpxOdLWiZxvRq8WpKQ0rJ6RLF/vF4sSDRc/sHuvzMEty/f5/PA2BWhwO83OSHi36Z5dd1fWVlhe/yLXlgAHfa5H5Bx44d446hatqoGaSk0OuSodS5u3db0cqSoctchSpqQApSGOTR5WcuRbbYfIiHAxg4n34+qTGp7nSdEoCcfU8Q5QEWL7vd2uphanJ+XlXuiRP8/cp3NNj//n15losExMyLcpAMMDUczqhUtr9WLDQ+Tp4x+ijPqTNDRK+Uu9TcHADCEASsPJgTrFo28KUiefXzLQCshHPnFPvLbqsDA2yXGwMDroGB2fh4S/Z3LP0q00fvSJEb57xXVobC1AcOiAYsFhf/1z/Z/N2i+9/iNujhcf8dgRD69rrCiwg/JJ9FAVCG3jJAZGB2rx4BlAMVPH5xm/pJDQgrWNKsQ5LPxAQeLj20wEJGpo8pa5jpkk9isj+6X2/sPNf0tYGmRJxFYGDzGB+Xx0V1jnRq0Oywc7SNvMDBANIcx4eZ9GPSg/KwlrVG9reetvJ4KONQOPgrVHDjT2Z1uLKX2f+2tjZN07jZPff8YXaIY7wUAA788gMMDvguX6+vrz916lRNTQ13DYJ58MOTk+J4dXd2slgWsch0mWweTsmkR72ABabR+CJ1eiZlJq4xThVUY0pJeQk+ExwxckHT07GdndQAB+lYJoAyGmC+i9Th8VAV6DWSpulTVKKSzgSd6jSkmZkVInthMOdJ2lGjtPHxJBmlCS4XE9G8Fh/3VtHefqb81x7+V55Hv/t66AKQ3bH6V+cVjJcYDn++BUBckjfeYI2SHmQ9hnt83DU1FT81ZXn82DI4yIqhAMhe0HwXDQ3sKFAIeih4oLh4kE/cG4q1hmf497/62TzP9xsp+Oky/hX2BdtBAI8rpYAhA7sh2qB+2mko6qcniH0AuxwduNlZtW63pYV+/n2yM1NAZGcdugMOe870iROL9fX66cbvTjUlxiXFrZ9AYMMAbB5OJ9WVF3jw6AGTGAwp6BUyjiHT8RI22MhrK8dycLKp5cwJ6+mKlJJDb6hSePHg0764CzTZn9TPlcDc6ZNbAzG9w2Fe7wfCcGyAue5XXnmF7N/U1MSvqAmg5iEPKWT6Q9P4N3cfnXBMSCmxIigALriWsUwxZu1sHS1F9aWWU3XWM8dT6kqsQPpnVhoyINzZZekaT+hce/BobXjiQ5AQGEJyKNtiUQKwtESXkfNHKu353LyTm0VTBswl3FSnP3ZM+SJMpvFsbJcMUakrsq2IZWKiZrn/1KlHjY3fXDybihDAUxqE/6c4K/wq8OabL4P7XwD8Kdo+C4BMEJE5WFR4sv/EhKttyn1lyvKVSVaDzPSiMfdJ547dm548fb0gZxkkOg6UDB4oHogqHkTsUWF/hDzQ/Dt9LdarUvZCoEFT8zXhKQNKlaFsl/IqN9ifxxglAGnYT9TXK+aJiaEYUO7Z6RbX1xddioiQq7ZuVfFBbS08pxKSEpNOBzExk16CrtOPk0G22ZGR2dkhOLrU0KDFQodLXTj/ouwu0F5fb62uTgGswBl4owg+UASz7xQFGSQVkf3p73OXf+7zzEmD8gQYeSYwnwpAkaioqOBQATM/3DKaD43hJxEoGFW/+qo8sIxur314+IHNxgwc1PY3miq95GRVUDnV8vDkoZqaloYGKSiKZZTZZV55CA0JPbjQeSG+Mz6tO40JQ675Gm0enWu+tmr1eGJiojc3E+1ahjujEOfZ1OtQdxZnj+CIyS3m6IswCiLbMxrgqMriL/d5Dh1iJi3F48k6tFJSsnq8kbQUH9eQlpqfmufvXl41HwSkPwQytv9nxunzgWiTjgl7P8314yXXnank5C9ZvvqBZaxBqQIlurOT0RpDe8kXMeG7+7YH2h6jwmrzsuKBgZKB1X4X3i8OPf/zwy/6WB9MVNP8fxl/AJh5a1+LPrpS2F8dvVEmpO91PJyGzwLM+dGBY/tnOMdQWzzRhATWpzysV6cnMIhCOnRsDQgC9OusVsVx5eX0J3gNiQmU7CQlkfL4lrh/bEUtgPAaj8f2WnpfSjO1QlB0NUiQ9zm0y0Hd8vJyzgWSh8LLujB5KDxHhvlMGNkv2kj9B6MBZD4eWdysCbpWKyvgVQgKAJWSBcUUCeuJH8jOvr9dULTGPZbGC4qUhYJVoBPRndFNnU1MT9FTY+jGAXympxxLjk1scriCQ77M+JOdGe9Wo9ok+xubNlME2SL4B1Niy8tuj2eKxclbJ7vwRTZF5hoGkrM4WUDGFYJ+NK4kON4uUpqIbCmbInxuEK0YptfsHBiXy+pypVomK2O+HBMz9j6GRiTrx5lC7M/yfCLZ9ybQBShuuAcxOHB4YPB3DqJcUb8yOjshwCd75yszgwzsO2KBE8+Q1zvPUn8mPluQe+VR24zgxemkM0pVYMcTlKDksHZ4DWvBz72gMdk9NYXFRaacRADoZPAyjPR5NEimZVsAeMzyzWplynZHK1Dv9ZUKZSGBa7vOnDnD4V+6/0wZM/VvCIDxCDBGA6EvP2PGTMZk6Awr74pX0TQJlaQ+vOdGS0FJWVX4Z7/Q2Z/oVIYuYAqyXpZZKRtsi1h0wikCwMweM/4yGTq4hDC/ydY4PQ27HR6POAmKWuidUwEJBhZxWpwd9lAEgKguVAZaNo+0g58nATgHbAGaqRmbbrfGdmjhJKBEi6XCgop3lJ/C5u5wsD8zccD2yhoLYnxOsT8GeKQTgeJGw/3/nCABBt7dZv8cvCAwjcc+RvMVsiUjmRbqrCPaXpgAjDjgPQjq8Syi5CXfMN63qL/CA3I9gwDsNyiKdKdo/rFDLKVk0YgdiFKvhogxEQBlBmT7z3CvwaafoMwP9opETYUdRwoBbwFIwOdPADaBxwD8rzon+1MDYOFWQJrFoltAMF23vEzqp+/PdB1jVXor6kMBxr9kfzFFPOL+0wH4POJd7/AkgofeAuAbEYx7ieW72Ddsebn/63hB0MPOgt4CEA68rQz/6aUSAB6HfY7cCvuLbe8EaoG+PYPEaqVTZOwip4b1AgETiOL+M4pE8asiAPic4ueT/XW8OIhvG8Ge6PoMBKBrWwAG8AsFQwA+Z25nNMq9BIDHMZ8U4HKJBuzY1d1rx1CRhiDcf0kBqeRm8TPDvxFE4FIaEMGLF0vM70z+vFBfREPYkA78dnwOEQ3imJcAfApMQBblk+0LtIID+gFjD3ojAlAaoFsgWFxUmR+7HSkpNIYCu+ygXeUndB2X5M8okpGYJe6/OkMoiGBzP915/ecpWIgCfq2yvWEBfgPtcxtSGUUVLNL3qQD1F1WIEURDUOUVB1xX64Bu47YTTo7B1KP+MA4DpH6dg8CUgURYRANAzM4az+xRxM3JCbvOff7Av/s/P4AmGX9Ugz6lpXi5UK8Mf3ef11/+QWURRBBBBOEWAOKECACmNqfaP22/PnPdBhttXpvnloQVqHC5LNQAJoIsUCPAPKrZgi0taqegnh7qg5q6VVDA0WDz07FmMDOIzAFcHjQmoGRnIzFx//Psf0JZBBFEEEFEAAQ4CX1L79js6Njq6LjZ0TPTs4CFaUyPYrQPfTmunCfrAOos/RbLA4s2+zGGhtDZqfbtfvAAdXVqDXBFxe7T+yp8uf8ZyiLBXAQRRBDBC18J3FGvdWyld6Cgx1KDVk/nQCcHAx5rj7lT5xH3kWRXssv16yxXHlrW2jA/rzI/8nSS6mo0NlID1KxQ01gCBoEBdYwggggiiOCFCoAN6KA1NDx4suxaVt0t9PXdmrzVoXUcKjh08DcddLkSYq64Y9buqKWiNpvK+F+4gNpaJQBnzwb0mEOD/TfwWSOCCCKIIAJN13Vs4wfb1g1gdJTpHZXcHxigp69PTzcvLn7D6fxva2uXLZYP4uIuyLY/+flqpSIjALr/TP68dIgggggiiEQAD8T9F/YnyOwczi0r05non5jAzIyLezI5HJb1b1ssX46JjZVdCRkiyK6EkYmbLyUiiCCCiADMKOoXDfCCpumyFQmzPXNzrrFl1xWn5TtXLd9MtMR+RXYljHj9LzciiCCCiAB0bNv8rsssrFaa+zF+thPcBYsFCUAlXlpEEEEEEURwAEDnNvt3+Vxkp9FcLo0LwX62ExwseJkRQQQRRBBB9JyR/d+d/eugcBKAy6UsweW1E9xLiwgiiCCCCKKN5M/sLuz/d409HLa2FPvX0DZRjvJMZELDS68BEUQQQQQRAeh8nv0Hn9vAgezf4FZGkP0TkADgZdeACCKIIIKIAOz0/UvwLOJcKHEBNC+8vBoQQQQRRBDBgQ5g2szWqm5gVwEgNLyUiCCCCCKICADMOPEuwK0MiGhABBFEEMEvzFYQn09EEEEEEUTWAUQQQQQRRBARALQAfwYoAjRT5oUfAX8cOBbo12DuC9nA7wC+CTiggFd3ntIkaoC/CfTBBLR9ts/gGsHDiWBxD/gHwLvAwTD91uvAHwKOBHX/2cAfAW7ue+2+ppoVbiMofAj8diB5r2sUAX8aaMY+oVj1fbSGu1v4Pksc8JuAXzX7iNP/C3zN92lfCOSXHAX+AtARdGF9AFx50ZvBhY4qYAwYV4ZVhBtV25ZorE+bB7r3ZzpSBMPAgirkoHDaa8rANXX8hUc90CCGwOEBVoBlwI4XiG7sByLQTYrVyy8AWUC1Yn8lA3cQVhxTp1ZWAcBbAGjTCAQTiMAMepQAoARIQVA4C7i8NOAXGmWK93GKx+C607IyrOAFYgpoRQT7pwGE9osuAEYQYMQB4UGS4f4/53MtKAHAjwCPySBgALiLCPbEgJcANAadWRQNkFDgNn5RccTL909DUFgRQwgIKQZeV+yPFoQf+xib6y+Bf/9ShALRz6efWoAheScaiYlqx/+CAqT5bdvGKeKB6n6Mt3sLQApS6lB3CIdgDhsbuHsX09PYRjWtCNWnkOn9fPnK7Qhg4VlW14BvYDd0deHOIyM0qQGOwg8uwxw2NzE6CpsNS0tYW+O/UmyqwLKykJOD8ICnHhtThbK8rApI1+H1yDajdsxUkRn0XEXvmirbEmWXTNXd5R3XiKMGrMB1Da51uMTDhAYtDWlsD1ZYzf/U68A0QkQ2cM5E7ZrA48fo78fKirR3of5TKC/ECVPFshPL7VjuxzJMopBX9NlcDYr5Bkyj5QZaprwjgGKgPpRuMYKRKUwtYnENa5vYjEZ0EpLYinKRexiHYQLNuw8CtG17FwfykS+nwvo6hoZUD2SNuFyIikJSEjIyFGulpiJ0sLqnprC4qC5ExMXxtKpjFxYC6EGPHXYIYFG8so2GvTRgZgbNzXA6jbINgYbAJtk/MDCwurqanJx89OjRoqKiYAXA0AAyGSkmMxMlJaiuxsmTptilrExR1dj3MTaChyDykMdG8A7egTm0tuKTT/BQfZfItaLqHVRVoWpnqRhZINoAnuKDnQXHkr5zB8rcSMIJqaiQBeDRI/T0qObHFrKwoOpSBIAtkMzMRsKSq6xEXh6Ch8eDzk709WF4mJcRnVECYLEgOdl4IpsqoZSUsAgA70jZPREA3kHWeZwPRgAI/sKzZ6kBytw2PABRhCK2hzfxpumfGroGZLFRmKtdE3Tw8cdoa8PcHIT9UdWA108I+wcnAGSulU+xYjPF/jRTzfUDk/fKjsYe13pTCUCW1A+Kg+4WpP4udA1gYAIT85h3wsm6jkFMkpaU8aOMAhQUohyoAp6l5je8//RTYoOiAVGIakDDe3gvpmeQjp3S48lJxdEiAGx1ZK3SUtUpyFpBY2REdT2enITG7s1+R8THIz1dqcvx49212T849ANKHRRinmtjDXvFAb29bEo8t8+C/YYdOGiyz/Z88sknHR0dCwsLhw4dqquru3TpUgn7bpACACT3osIVPTObskAHs6KCaqUczzNnTHVZqsX4OJR9nx7rJVzKQhYVuxKV2AsTE6pFdnTgww95QYpG9SuoJvvHIQ47kPSsBizu+ntcLqF+GiMLNpQTqrOGCDkrew6bnzwxE/PzcDiUAIhuigtSXq7u6PRpVSTBgCxz7x7a29HdjcFBnktdRgQgNlYxPqOM4mIcO0Zt4GUoBiEKAOWG7M+m2fMp5mzRJXiXGkBjDSK4KINKqDTAJTLAs7+BN47gCJ3BYzgW0E+9BswEyf6XERZQfVnldCZ+/GMqQS1qSf1kolM4FVLwxahO2fcAZ1DsH/zFSZuK/Wk3sD4l7E8LEg/x8DZu38d9+g9Ugtn42fjk+KioKJfLpS/qWVeyilGcicfAGPAbYOCLAEwJgKEBRXoR3cql2y2HWRfsHXTESNbkaFIGBcBqpc+lWMtmU07ZuXMIAqR+9vD793ly+l4kQPY7ht009m1xc+cWGh6ff3xVv4qjMTvb2N/fKxe0uqoa1Ecfwf72Lp/Af5ZTmhWAlpaWH//4x6Ojo8XFxZubm5mZmeYFwBuq9PjFy5dZmJ7x8fn29vn2H40x/GHsozozdXVPMGtE7SUp0m7eZLOg8lMAeGQkuKc/QiOrsirJ+2JlKIMPFHhpwE927VrC+yIA9BHCAdLvjRv49FOeWLUQNrNsZJch6yAOMjhd96zPL86PLo729q4NDZHDWXhslvQYAmf/69dZgGhpwYMHMQ4Hw7oj9fWJiYmapq2trc3Ozo4MDq5SG0ZHeWuqyC5eDDHrRPYXy/lb9X/wO1n/82qPbwEwjexs0QCxrsddZH8xlhhM48gRmvn0cBvwCa1ztRsWi5LlkCFkSSP7k8tI/WKxiEXQYK2trNBIVdXVZIKvK/ORH2Oqj6KfkBC2tKLcDdtX4p8r/X3fzP7o+lgI08aGb+HWNVy7i7vzqfNVVVVnC85arVYRgLm5ucetjz8c/DAJo8A//rcH0n4v86S0HdL57+Rsfi+VgQzHDYfjxrXDt28rsmBTYj2QmlmYlAH2OqoCO4XdDk1TV6mtRUAg6bN7s5PT/aLjxfOfOqXYj+7/1hZPq/r8T35iX1+3H7DPvjbrQLbZwZa4pxpAf1Fsl+b7TgDsz7TP4uLi1NQU2R9g23w8OTnJUGB9fT2OpB2oAJDh2cKoTtROeoIsPYdjoZ8xL51NvkczA/L2+LjYzIiKCikAtDM44599WJsUAEZdzBFXo1oEAH7hHQS0wws2m0H9tIzkf13/3pXvf/f7YeEBnlg0IHYj+RLqK1BBlyQFKQxOGfbOYGYQg+1oZ2KO3Yzkw6iUfgObEMyPLdC7uXWLGsAOSuqvvXSprKwsOzv74MGDFACn02mz2Zj1Y9z3iD9IREZyTwwOggLPIe4/j2eys7Kys28fvvsbZ3+mAaw+BA0mTN1uEQCb61rX+M80oAlNMAEWHeWTR9PsPwDc68TdT/7y9/DaaxRFJR0hoq3NEACmsw32598IBcL+y8tRfz3qOFIqkQLabgOGQmUM9uh9hgXkfbHpq2lvXqmvdwx8hODBPt6GNkYAi6mLzD+cPn2azTU9PT0mJoZMxLb68OHD5NvJzFSc/g2nexNrf5KUVEdXhpoWeNWstq067jhWb7SoJvveeygqUmkZEYDpadWCeVdMI7DjS8cj9/BC5h0vo4fThSX119erWD4zk8xIAWBl8XXPo0f227ft8QWORAfM43+olQ+E06k7HBppluczoBvjOG/DNNjdY+Pj4w8+gd1uT01N5TBAQkICXw8mAhCPzQjfGaRQAvs/GqOiMmLkzSsnZE9YLEYQQHu49VAEgEGAL1+SekPqFyOE+qkBZkaNZEaQ2CgUGLV5Z34KCuYbG6/Mn3HhzwK/D6FgdpbRIR1/xc9k/4u4SFWrQQ1dwnSkUwAo6kyA8j6oB1vYGhwfpDsi4wHmBYBKSC9GOig70quvvsoeVVlZWVBQkJKScuDAAdb0+Pg4O1VaWhqdrC5+nvUiQwLMe4bm/sfMZeXm5ubk51qLinrCIgAyOORyiQx0XruWM9MpGmDmtIzmyX1Op8l5IesP8eD7aL2He3P/LkcNkPDSVKAQwOZksL8FFoP9WekIDZL/oQakfMD6SzmDlHzfk0bogDK3oWmhzzNh+zJuCK866uscR+ucDxAsRjFKj6cXvY/x+NVq1VZfe+01ZqLZMrdlboW5aYYCVILey73lieXDiV+oSyzVk5O1wKvG0exw3Ot20LF64w3U1Sl2Zsu3WKgHinDYOfm3w8HkrGIT5kj5BxOkJsGQWno4T8XQ4ZVXVBKppoY9i6eVmyEnOnJyVuPjV7/1U/wDIGBJFt9faUDoc5ooscz21NTUuN3u+fn5jIwM/s1X6CaGOg2UHZSyR3GllmwsLFANePOmBABguRtxwFpHh5EI8iUABvszm12IQiP/AxNIezYOcDCCM9j/wYOKCr2xcfrUGfeVM27UIkRQDvv6VCNht72Ak2R/0QAN2vaPSWM0wCiV7D+HOYbGvb2bpLCREeVJmFJll4tBEONQ/niKeX19fVNTEzWg1Cv8YiIo8wmio6MdDsf09PQsy45ETReRoxzseAGCzojh/lehpLC4sKCkgNQ52Nvbs6w0QAyhoLJSgoCN6OgutzsXP9MA5s2wB0h8ZqcEPkDfIzxiUxrRRnDpEgWAFipHG2S5uNiAc8L+tSE3JmETseSK5BRdaUB5SBMHJ4FsMyNtxg1VrtfVNdfVr6+fZKwKDUFhHvOMeun30BXNz8/nLBQ2Wrop2AabMVlpaGgoLy/v0ZcfTelTs5idxwX6TEFMkl//I7aN1x0uVi7ZubERBuihUwyokyxSMg95n92V4i2OPH/PniDL8Vu9vYqJSHzsSlSOV19VaW2vm1E+1sGDKky3j2PxMQLC+8CvigDQVBXroe6qyZs75fF4cnJy6BfSQSwvLz9p2guM3ktelFFrN9h1xYMzDRkNliCgd6GX7C9WjnI8i5kZSf2rI51o8f1pvLhZ/9IQgLa2T7cdf1I1y+HMGTaSraUzm5vlm9AQyBDwBVmjuX10M17jDZHKORmEGWneCEeUG9FosL8B+obsD2QiEtyIa4SBKUOH+XmJrkx0UF5jaIh0U1pXd+zYsdraWrL/bgqdy7fGWLy9vbO8ZX6Lv29yknwZtPtvWcrgfZUnlJeWF1CH2B967oZJAAhpl/n5g5ubXUAunJQBxk/hmhC+hjX6oX1aH4/IUe6/RABhSf2TTdgmDfcfut8NcXWz6iLGAf1kJNN8n8UMSaRiLzCQMlL/cbbCerolm/V1ntuax1OEGAQFFrsTThJaUlISuZ5ZCLL/jpHBwxwSYJoCgENzOHXnOtaDXCtVb8WpEkX9tJ0gx7CzMLBgA2BXokdpsymKoTO7J4SvqBns6nRh2XjotZD9d6L0MFY0LELZiMlSWnduM79z1el4AgC3Ibi9c1XVQXjjLHyAzv7Zs2c57sLMMKuA3mHYFoJR5MToVNJMqaj3oJUxGHDtmvdo8HOzeoT6afRDa7Z9/6IAJyTUbW7O37mj7O7d7jt3DkyMnWkS9lfH7+QjcHz9WQFYmZtbnplZmZ5ejltbyUQmyZ3Bii8HlgpBBycVqSMYsdtVtbPvmQKFgnLBhgvQxyfLc2QfPsC36FVlcYSG4Lfm5ujFBCoADO0M9/8kysmatOiKIrI/bbS/v2fhZxrA0Y4waAAN6ARyty09TGuByPu9Wi+PC1jA0XC4/+3thgCw3f6M/fWGeMT7/jnBRAApqEjRUhgEhLYIKg64CrwL3xDqp032JL+J+jrmUPTcVIQEdgExfRvYAe+31Ie1A5quBVmE9cpwyu+8AyaFSNwycW5xkU3clABQJ6gWdKEI9qncXH/JwzpgEfgz/lJAbYBDGZzyBz50YMapOTmG8QTOPwZc8cH+NJgTAIEMA4R5JfD6uhpZoanAKi5OGRBcEDD5+LExGuw9c25wUNhf5VXImHSyxBAYVi1Rd+qK784P3pmPvTPvmqu6JOyv8+gRCddCFQBieXm5bmmlBMvUQ7J/tu+I2wILLRrRMr1SdNRsOsZu59XoRrFGGdPRdYIPMOjmB/gx/rHGb/G7DkfQ7n/i6hFhfxWlxUepgFqCgFtPgwAJy0LHgpcGXAyZ+sWvJPWLkQJCd/8ZURnsn6pbhfp5pLSHbSKORADr6ylQ7M8jQoUVIKv8E1+TG0n9ck9NivrrGAGUwGOu1H2664lI5IQu/vgZ+8zS0hLn/OycgsLsP6emsPvI4lB+PlFLDFI1/wXUYF68nzKwsjhVQEWwU0i/MOkKUS3oQiUl0X9Vo3b+KfUN+MeVZ9hf/r7mwLDj1zucX1BBgLC/2kbzA//sT/xjhIIgBEDKjabrSl9YoDwGpNhUehkNljjgoetpECCju0wpGVM/CSP1T8cZAWAOuEPLyrpTX39nYcHBtkflFvefVTmF4JBJ8ybmhNWVL68ur6yusNfSi2Gex8/vdMHlhtsDjwyKSzLN5BQgKgaNAkCokTS/iNoGXC75YqDTTQ33v2Gb/SlvACgAEgRM9fcbo8FKm8MEEYAcdURpaOwPDX3oE1vCEo7Whur+2+0G+0fNLzXoaso/zc+kZA2BRQUy/EvjRNJkPZm0mIAEeltSg5o0moADjFTA6iu9YWSzKlwnSP00RgDAPVNF7vvFDC1D1vp0bXQNDw9zWjojV6ahmY7Ydqxn7t+/z0lxnKqYgxwOkvHzvN/gd4nIhj8Y3qq3D2smO+ZwKL5jB+RwAhMp8vtN1rcPATDYf1PTyIf8bfpXy64D35jGlQMY/+q3L2+evnwaNM1LAD4zRJsITxWBiaKyUAJukQUFRhxgb2szggAuEAOM1D/fBMklKPdfNp8Tu1tZyWUQnDVI/WamQX9KnhpCRlL2Ki0b5pyJRSySiVh+AAuP0um7Oe1gdI660Diws7GxwSn/HN+P8aEejKnpR/AzhLqANLKg3P+UdTWqQSNxGlPMngYBs4+MIEDxVDigP5sIiguW+gk6Kjvdf1roqX/ee4N+RrH/akP9ag7cY6wgEgTdTA2mUA7YgGU/+Z/+lJR7KclL8bB/i2GBRreI9WixGGvK2Yk0s7piVRqAV4Hrz007MVL/MdO5Qv00UXottF13jugqcKTfZtNsnJfMMQB2Qg5NceaPTAPlLPXu7u579+6N94+z43MNIGeUB7dTkKlvsfuIBRJ9GzOVjcFPWijsTww+O2GTxKTzV0mK7AYUvv1t/J8o4Ks+Bv1ftABIhKoITEwB84Hue2VMCWUQMPN0Sqh1odiY/GOBxXD/tQDKoc+gfmOrEA7d0/YFq2Im2pLiibEpTE1jmqKZlRXIOgB+QeKt2VlGzQyoGT4z0e8jSzHC3kUPa1Pclvj4gNYB2GxP3f+m7ey/kILACALmGATYfhYEkDgQJox5aUBDoOyvwYDB/mywOHoyVPZ/8MAQgOOu4w0PGxpGGhpmRmDvIk1oFADWUXq6oubi4j3rlZ3btm1TPO4cAf5WSspCUsriNxl2aPRDDQFgG2Aim92FiazKSmOlt18xSBUN8JX6H+2NfxOK+uv1ekbh4dpzjSP5c5hb19ctvZbrvddn/sYM5yhTCThLjU4MFy0ODg4udi/KlDle3XcgFSYN0HVlhKbJ0dQKT29oGi28e7vpHP2qqVEXuolt/DpcBiAaAPy8CYAk0LwF4N8icPCLxv4QH38so8G0tEdFDx9qZH+m3eq3ff9A5pt3bFM/j492lvYLFAC61GTNIQw54DhRwnwUO69p15zMwm7PMavBQbpRnDzHmJpDwTsn9nLWV2dnJ6cAcfkfiNRUyX4G4f4f8mQa2f/nnSkJApQAtBtBAFsDwgIfAmDS8RewkTLzIwJAsQ0x+0/dRUeHmgne1pY1kHHqw1OnurMahr6XNDWlka9dLtnvSaiZF2KzJaOaEQDF/t62suKUCOCbhSkL30xZXNRWVrTNLRLPFrZkXqNqBkVFqKjgyKRsKrIXDcZva0Ai4DDkzEj9N6rMjzJWdLjYX2Y/n184H9Mck9aZlt+XP544/iDzgeN/OjajNmNcMcn2ZOZ8mtB0HMd56bM4G4YOqvtdX00RpREWi2RgzUTeYt5p2DDu76kbWfHnGnEU5PIvJAiIlov6z4khN4ktnm7p6yHMATfWhXFWCedHliyUHOo/2ttbzrHfDGQEMvFfYFA/bRj+oYWJ/e3qiC34B12hTnR2o5t8RDY+dowsYXYNtczuVMxC1/LRI/pNpHiG0vSkOM2Lc+mwDSZb+dadO3eYXeXfIEgWDDT4GXOgHBvu/6vb7L9zUpORBVpmImjiZ0FAIxrDqKqiAc9CN1+bQv3UACoBjtaJAJhy+nytkurspAZYZmfrfvjFuvbEUw++Vz84yJH2Y9HRTMdxJJMuLYMARc1s2NPTqp9wTroPnNqOm23P2fIyberI8szQzJX5wz9G8ZeRRLqiALjgojJMOaco7etU95ER2eyMRKbEgNg7C0RzAKrPGdmsMvdxet9iXsXpn17N7UnmdGbdaH7rxq1/3tKSmvrb33t7xl497/zTzs18tRkch3wZbTD1z4qp0Cv2fTtocpYxG0Jyr2ZmRjJ09h45oDGt6h+fAq+E/HvDt132FvDNbdPNXT1aPrBrYxARdbmUiqrSoYUAIwigsa/2P+5fHuReBuW8hPj+ZH81D9osfrrN/tPh3i9cD8X9Z9dlqM0tsR7gAZXg4knmo6hsAaxFZ2mTc+n+s6C4M+rdu3c5wMsJSBQDLvPjIu+trS36/hMTE319fWT/27dvy9Q3zv6kePjYBbfKl/s/3KPe88r+74CmkXQoACoISJ0pwc80QO2CECb0PCMAekBazhyKCIDh/ivfn8egIKooY1Mu4Hu/53vDlZU/LSv7Wm0tZ1sxo+1yubj1CpdhM/Dqp1RMTKhIeWuLxKEGiX0jXRkqgTVh/9VVm7YydX7FVvrlFVv2EduRNFvaQdvB2LFYCgBHLTmAxK7Cm2JbeszCp1dL9pf13juq2EcWaJw0aKT+tZkj5H1x/2P1WHM94D8BH5hUTY2XuXHjfNTtxsarr702E1235Dzg3NK3mIxPRCJbi+kdpUzMAuqFvwBGFt0sLMhkdImMzfQ7cXNVHtVul+wcQwGfyyq7gJZQqF/bVQN04B0EA2re8tracmLickKCHkwKaIcSyORe3j7bN41lEYoqM2EqgwHa2NiU3jw8Nrw+yvyGTQ0f2auqkqoqURmII/+JYn+s7P1DtCDYP3gB4HYo3ISgGc0d6GDGj72N7lZNTeBiabOp9ufx2FtafvSjH5FxuA8EN1fhdE8KgKz+/TcTEx81NFh/rfWjP/zhFlmPtFxUZHInX8YMJLq0XlweAJGJTHH/dy8DyUGvrzvd7h6gBCOUAdkmOoyJoODCOIP96fXhaH2o7j91l2zb1yeL7M+dO8dllsePH2fhc9cNvsKMNhfcMy/HDZr4CuWZWzYxV8PEHTXYzGZ88UARLWkFX1mx2ZZttt+wYsvJtGWm29IpABabBf8PHnjmMc8UIjOl9Ip06ENjQwxKlMCXqDVQewkAzeqd+h/qi3lTpv3odSRi35kM79p/2+SeZJoEGiy3jo64JpJtQmpqYY5LaeK+oBVIA1KBDB8L6RkwUZjZgyiZ9AlkTYAJUCpk9idvhyrCM/A8u2+yO25HK5Rlhsz+OzTg+8B/DnR/SnqB/f3LDsdycvLysWOs6hDHAHRATXOQOQh0eTAzQ85gaVIeg/a3ZV3YL4+PX8kZv/9nx91jY5vnS6ovv2M2+aM/FwG49oP9QxEAbohIAaDdxd3jx9U8VKZtT50KfGsGTeOXqbiyCetWf//DJzv/kP25x5Ou68709Jmioh++9VZHnaOjoWOLQyqs9fJyn4nvHX7ceg/e6AFoCmCQngO/5MWtRgsL6QcoARDDVNh8OmA6qAwe3WRj9iczYOL7KwsODocsBIUaUyHNNnIHDu7DwRmNjL3gBeoxX6EecPLVA6bYmTJiFfDqAezGukzLzFzJzPwKEIcVr4GCs4j+o9FHcETWEpL9F7HI5KmHMsdaJrvV1flNalslAqBeGKn/U4r6VeaHHc1fNltHENA9HtKuGr52Oll+bW0aNzkg5SYm8mey8fNIY1vmK4xhyMb8W/N1MrMCYLXjgmNnbocixNwp1Yj+E3sE64WRsVktYpGzFVHIx9TuZ2wG9JIoukbi3qh+pfr37qNlFDbgIAKEFuZcECv4pz9Fc/MScfgwE5SKpUlAIQ4CFxbqLMDaWjhuakNs4snJmJpSgRJeB9KCebhGUpIxI6j/j/yIWfLT75yWjR+EfczDBPsHQ/2hCAA3oLiJmzTKQP7R9aYm7oJMGieBB3VFlvalS3RJ2HzloTNs0Gsu11pUlP5kBPIn+fltR6faT9ycKJrBF77AgqWT7tvzrYA3BlDRA/QCwwEkpoRY3YChAeGi/6A123D/HXAY7j+7a7AqNK3KeXKSOldYWMhtNrivGTWAurtzEw4qMeMwTsFias7R3886Ug3bIZRk/lGQHRAkK8NRwA3YgD8KAWfL2GDjEDxDgcG1Qf429SPn5pQr5hMJQOroqLW1NaG11UlyKHKXGckf+EDu801SA74Ac5ANb/Un06K03glmzru7NbbcHQJAAqAAkGPJLWyt/BKCQec0rO2IT2Y18SxKdBUpgcVCT4A8SAmiJJMEZfyNMVMAw28UjOJieQIHT6LESuZBMDJgu1pZUcLA12Wz3vz30POPgT8SrsZtaMBvD3TFYlcXd6hettuXjxxZYrHyrkMXADIXm8z6+nJS0t3h4anpD/+OanYxbyOUpysxm9w7hoxxxIxnux9VIb0KBaSufaFsLXynMgRg0if7f4pPb+AGBeBI2Qo3EKRRA/LzQ5Ao9hgKCJsv29zMDBuf7nbjyRzE1vT0lpwbrYWtbVobowyqNNNMbLhmb7dHDMHBEABaPl4YFrBgCAB9tzDM/ZdVoOQRgBke7sPKHVgN9t+5uQ13PeP0ds7Q5TQtGPs9mRWAZWU7EQPkefvkyEUuE3TMoQ9iEEtLsnzMrwDAbif7pz4x59b/S6//RFF/Curuwfht2i6t8RPRJXzy3BD2QQguwSfYShdPnhzc2PjWo0e/t7W1RYtf+3SNzCkCwD8sFhKyKht5oiKDJWrZ+fNBbdT9r4/gWjZ9XlUU9PQZnPHUHo8qHHmMF/NyLCIOy7Nf0DFiWZkEU3n8ZbJ3I/md5+GvZ6vgmBCFS9Mo8HQRZD9ItUlc3xmAFlbXJtDQiCrIeyczkP2BZe5Us7jIv2X0ItStIJIrx6wJtw/ldjomRvS/P++JSeI3QkY1MA6MVeER/6IlvshHNush64dif1K/WHrpIps1jQJA6g49OiHTMJw2appuyGD0SAt+rCJ7rZWulOyuw7Zu3m2GuP/jwU9L6HnxAgAj+bOGNRw9Far7T6ytydQ3LsAmv3OHpXwKuG9wvSs/xpEAmTQd4D4cZp8Er3ZNQKJafGesa3W54BcjrakdLVbOx+nrm3jrSn0q6lqUyb1ou9b0e8BHV2AHrsCAseXO3gLQ5aloT/H0FqaOaGVfP3TIUXbEWep0lbrc75KZlK1jnVHaHOa6YYuN5SCXKiry9i/9EgJGE+DKwKceXL0KVhAjD7pK5DvqAVWFLYJqc+ECA3DlGzHvFeiiJXkIMMuZ0dMPf8iUIJNCssqSzYMyz8sp9q9pQl8jkBoK+4cONnh5NvhabS23KlvOyWGSAGIhRgCsMI5nXiu6dqfoTt9Zy+q7775OuolByMgEqoDf/kPgTwHlCDOuARfMaoAOA8NAIYKAsL+4/9biBfH9KQD0JIKmft1XTVss85jnqF4r6GS1LCa6hPppZtcZu0N1/wWDz8QBLwAsh/C6/yKxYvT6OduKOxlQCfyu2EuMfwKZM+dz5vhvAW4D/XgGunr4l8mt1jRoNACm1jS1I5VTMVtTLa1WAG1X6toUkdcCmg9iOiSPKcEVYf+3gTlhf5o3/jV2x/376uFI9+5VPXz4/mD1+V95553V48VrpWuuIpdH97g1twsuCgAf5DJzbab/p/3N15pbWpbYYEknDG7J4YGhBvAAUReZQmK6n346+VqVv8ySYlKIfY8KU1/PGDzguYskd8oGJZYqQsdrcFDFdszvaZo8I50np0goXZlvBLIBDSjbd+ov2GuS/dzcUmLikt2+lNmOx2rjgTAsBHuMx91aN+mmLWca77/PYUB126q5hyUIUHgT0BF+/AHgX+2tAToM/IMgHxzLwV7D908pWiDvi5GITNxZwOKwiU1x/FkpQxhC7Tlx/5n8Cdj9tyEkvGgBMNifzIKjDcL+yusJAWQQMf0JONsKfqFvQ/LgPt2uC4AFiAG6fdCC7o80GN9wVihN6InEpMwXRoBWWFutFICszay38Bbm2gDa3wP/3rX93QauPMQV9B/HZbR/wNECYxagppnYQFOjAHDs6/r1WNu5d9n6L7EDcM8D6OR9SiLdf5euBGAFK5OuyXZXO5zgxDby6sKC8tqDQT2QVCN0rLz+lRVKrzyPm96ALJ1TXhFfCQI8gwy/FRQwFyQP4pZHsjHdRNVSJ6+qwZWkz8jxLwWa4A8shzfftJWVzTl/ZeH3L+LLauJTaAKggZjF7BSmhjGMjBwORaoRFR7Dg3jsMzKAGX8aoMPA6eDZXxx/HpMLDfbniJGZtFIw0ifUL+sMFN8Z7r9JrIXH/ReMemlABT5TsGUaAsA+GR73HzC2AHOOj3OAl09b5XZM0b5JhHMuuCCDHwMgq414Bp8CINYeMEvwZhewsIQlQNbk+/bvVoBWZYmtidVz1bIqxZz30f3X0B1zGUAtUAbpMaS80lJey/8vJv3SP2aS3Barxnb1qioZftSgxSKW5t3OqxqrNmY2+AA77hW6ubnOtI0e9EZA5UD+F+WJ7bDbKQBUX1mhTZpSpRQKmNZ77TXVoiYmVHixvi77uDHdxJOrSyyHzu/mUAE0KfOP5bSo3rS+x7GPx75YSv0zH1VF+2mLlG6J3YxR/HDO8/A9GrX/4wHmr2bK9z9YIJkfnceKihBcAc2fS8hkN6lfDFYreV/cf/aygN3/OYQBL04AjOw/2yd7qXn33+w0cIBrfbkFE6d7cjoQfIB7W/IB3NyISYZqyA67L9Eq2Wb/GHXEPZgHb5AemOwrBYuFvh4v5GtimbA/WoB+sGWwUOiAm2F/JQAw3KCTsjerTgVITt6zKTscpF9FkohTo73+W6PL5eJCCq6mprKyCVNcKJrBQ+b50PYJubnK9gfGVkMSJDHCo1hKaKtDr5AuVbXN/uf81QOzlkwMPMCD7lM9y8e/QA+UTTFAAdB2fS9ajOoqA82hRzqhf18PyFHYc0xYAxqCZH9x/xPy5kn94vvT9Qn4xjRTL85gxmB/O+w4eUnc/wAaqD2c7r9gSjQAnylYFPvi/gMyB5xFSmbhLnuc38lJPhwK3vX52pz5w3e5xbHah4NeIX2unByfjmeelwDQbgFbaEYz74V7JBzH8SQk+aD01i50UeoYBKD0uOwqtXsK6L6ifmWtT7fpN9+LxoEiq/F6ivlZFLJLAKkY8wuw2bhzeHpGhmW3VAFXs7e3t7PcuMNVXJyHt8KSllxFcEHAi4YWinLJnChpzyMY4VCiFdZpTLO6xfmurq1+yv6F/q7JhsSvt5S1tDNFLxOfTCPaz10kIIHGZrQgWwLZ7T8BLuNlh47QwIFxw/ePz517Qv1uWlElnL6bRxzifD/81tT2EmJ0BtWYj+H+AwG7/0sIG16EABjsz05isL+5bK8JMiMtlZTQhxpub+fOxlx6zdVefJ6t90IwPniP+0C0trY2NzerVWCAqfnmR4CLT0OBttttH69//AiPClBAH78c5YUo9N5izwYb32WNy6pyJCfTv+AP83mV1m3bCrgHaL6I1YQGsGBkU9TBwSW0t38rMTF9eTmdq9YPH+YgOXcx4VAKd4Q29s9guVEGTp0iTakyS0oKjX71l4z6jQwTyy0rSy0160Qn652JPpKtLGzMRGbWqay8pjxrk1Wxfy78YxnLk2WTM03ZW41qrz82lfDsBkqvhFPQaFhZpHwrA37vz4sG3AziHePtWdrz9Zhj6Ow5v+wvjj8tLuf2+fM3z59fSDlvb61yt/ptHixMEnYxihE4DPZnW2HDMeZ9BrDhwWL43X/BnDrlZwe6SEb+h8kQ8xt/mgUZlp1yfBxzc9zmgQMATPEz1ZOdnc3N4DgpiEt/mfPhHm1MZHODezqzaGhgdZDP9l5wlCrjARixjLRZ2qgBP1r5UQlKKADUszzkMRqgo6BDd8BBARjEIGucTW7V4sLpV9VVTpygz+xPAOYDY3/NBLHqfjmvoEAJ0+SkPG244w85HF8bHk7PyUlLT+dMKkMAuIMeU2qPFbpOn3adOcNi894i5SWSAQ0hg1EcGwsdOaYP+/tXPsJHD/GQKaBVrDqtk1VVJztP5+Y25b5y7hVkYk8crz2+2Lh4oNF5oKnpflFR2LaDpi6JYXlYtkYytrXS8cLxDfiCB/i2D4fmDwM//cbsLl/OFV3zLwDMshm+f0zW3z937ttZ56bvnpu3V9tdcPlvGFnI4hyRIASgG92GAAAg74v7TyIIxv1fRdjR8yLcfw88hvuvBqjCBRlcWVjA2trGnTsff/wxaYtZiyNHjtCfFQHgQxooCXRmlxgZNzbKfHOzu68kYfWCq80y3GaZa0v0LN63tgy1kOiLUMR8cypSRQCccNIlHMUogwCVz62/yKvwWv5mtbcAAwGwv2aeWPfiWFL5+joTQapJcn/HT+4MaFo6n2PKCbJUUAoA8/7M/2xtzeTnb3LiP7WSpcUbslh8FZLA9HsHATv2Hwd3/oKkYKebUfyWljhuRTGgs7Hlco2wNHLSmE1ki+6src091piHQ7mAX0KPAhqR25j7SuMrBxpdBwoLDwCt4RKAZCSLUdyNh5dyKPiFhl8GrsAPPMB3nmnJ/xQCzB6+csUv+xP/zPe8WAbjZP85zL079duHzjfcPT8zVzPn0BzYC1/BV9awRtpSYyqmMYlJg/35dfH9xd8MlKTF9gPL+Iwwhann5/7L5j/hBfM5Gxtq1gej366u7icjAdwKlP4sh0XJZcxmbLEH0/WtqFDzzZnOaGpSymEObRZL24ULbfHxA/wKswA9PYt8WMr4gzZPG9OtFlhk6uc61tWQclEdfw/ZglchZfpb5tZqlv21cPvXdBI5ZYY6xfzZ8LCKBrhf3urqPEtxa4s/mZwhz7aRZBFviJGMv1u57PNKvt/77cB/xn7it++8dk4I6RCWA9mfZcI4wFjGwBaRnc23PJWVnTExuQAtzydLH1TsL5bdmP1KBg5ADM1hEQAmf5i4oD19fJ3dLgKww79+DwHibYSIGvhFvQeYhYGPgIPqojU4DLOohcAYaudIvVrNCFUxV8EG58Z/VjsvohbBw/d36QYK9beicwpHYMlTvC/uf6AQ938dLwF8N6Xtp77oW/giGyZpUVEw+03YwUKWSd8MqIeGwE07l5a4167iM4uFwiBzDSWMN78Kj3gItIkxaOD55Wlfwppzc5x56nC5ZMYhyYAiZzwObO90iW7q3fd9FfBJZbvjfSj86h4TaClP1OKxMZaWiqAYHRkCEBuryuzQIeodRWLvmT8fYDdYfb3h1cnfxv7go53XzpWXQkBBAU22/RUBoEyyzkUah4EuQDTg5O5DSo1eloRM4BUYGoC7oQsAUxYJSIhHfCxiN1ifTidtD802hy8geJi5Yr2ykPFByOcO/ipG6v9hK7K65UN0GEg69ARTU4MRANpLgcs+g6FejPahhiZLosiMKv28T+DJc3MVpclGTBL+6jq7KeleNn/+/+y9B1wU2bru/S8FGhAkJ4liAAOimJ0czz5p9rlnNt64z3dzzjnnnHPO+Y4n3JmTdpysM86YYVRMgAhKjgJNqu9Zs37UbYWWohsanKlnv7umraaraq1a63ned721akkezNY3uj32h2kQF1qfWacwNNDfL9a060GqdPa1mboGOYQihhV57uG/QeNy2d/C/vjbS69lJwMV4nEBUJ0lJcXhHW5cHXKP9YqyVu5yiouNRV8rr9xsKSASWx9l/w1YFD6qAZ/EKQDek6BSAvskaPQlAU7GXpcrLQANshXJ5TTGz/6xl+MKt86x5TyN57DARowxPjbRAjM8HTgZrQR5LZxsAdcbRhW1rCrS0uxCpTb29QTAvtJsudMOZiLY/wERsDKgniW32S4I7PnMHu+vBPuH4aS/DhM/7GhGfAgwFLFe6ks+n2HMh28as4hbAOy7UVxcOyUgeqMP4RshVgSZPr+IHdt5FBsW7Fr5s1jchXNst3N6pp62RK1/+G8f96CFUAvcYC1gc2HxwWP/L1gAT91XHK6PfhdivSJA83wEINvBKmAD0THIYD/9QwxNMGEnoHvu51OPGtYtRuAcWPbvIYDBDaw9rbgdIQABAiwHTdBsbHWQxALYVOc441e5ep3r7bTz5VIPFBWZD6uMAN58fst3ATqgBWM3n9pI3lL/eRgjgXDX/3H9YyP8OmPrBFnw22U+6mp9w3FxH0u1neb0AAOTTHbQcZ7zH2z8yH3hBb1tjh//cerq/JRv/SNAgAABAiRFe/B8mmmzFl3pOHtesfNc7LPnXxUECBAgQCAAz7MQd5hpS04hcw9btrB9O/X1Zhai4/DVQYAAAQIEAnCSBagwtnGjyfraBRB27OCrhgABAgQIBKBxMfYX7OoKoRBfTQQIECBAIACFPIpCAgQIECDA1wAbCBAgQIAAgQAECBAgQICvDxzXdQkQIECAAEEEECBAgAABvt4CMAz/Hn4EnEetBv48XMEvRuE/wjfAgTT4/+CXiAbHh5XDt+E/wG3fJ145i/N00dEB/xCOgQOvwL+GfnxhAv4L/AQ4UA9/HW7gIeYaSjTG4H/AX/XfrtZhGR1/9jr8G+/ufg5/CrYtp8W0w9+HIz7OtB/+BtyIcnGvwb+DIXyiCf4i1IIDu+EvQTP+8Dn8SagCBw7A34q+atl78Idhawxd0fFnb2CIo48n4R78IzgOIfhN8A4eVoluDsPfhTaWQBj+O7wRB3mFDHPyzlMdARTA8XnbRoCvyote2ozRru3TW0bXn7OVDTnGDBiEIWMGAaqssTqomD96PgGeSgHYDMfhmDF2E+Crwv7MU7+1u1/hV6R57L8BmIUhGJQlpMTrH1vnKTonwfKy/hEIQMo89R+HBlYHAX6RNcA96/5726eujP6Z1rJ/NkIE+7sE8DTA2kojK6oABEg6FTUJ8D2ioAb2LVjUKspxRuE7RCANfgJY8HOHR9HWRksLIyMYeCM/Bcd58dHfwSkfZ10MGzaQnExaGllZ5OVRUkJ6OkvAx+mSkqiuXnQBVwfcKAfogE95BC9DnlfKaCeeWCSlUg87gWi/9V9FDk4yyWmkbWZzHnkllGSQ4b96/KL9NG1dHvvLXq83d8Q//De/hdjAhhRSVMYssmwZ9TluDXCIgJrwxYv09GDZnwM5bKeRU4O3GLzIkJ1yrxazf7+vSm2Hz+K/LA+vQfaSvalpwXpCu2AvPvH5AlU/ANu9k0aetWqYqu9RBZdh1lsv8ciRGN5H0ELLda5PMRUhLNvZeGCpst6DT/BACN7w05tsQ4sDh6FqkTrxEIZ3iBcLSkSjJwC+NWAn1PjrgQvrJg0a/SyKePcuH3zA2bP09WF9f6qP8eIxji34XYxd3xMAkb5de7W01HTD2tonLGXn63QpKRw/rharQ/k9wAINeBnw1exgHH4ZD/ug3tdvF1bRz0QVAJFjAQWllG5lay21IsoVE4CxMaP07W/TBrNou7eNmnb27cM//Dc/fmZxAUgn3StjNdUqo/7pK+/rLk2258/z/e9z6xaQzSs55OS8BUgABhk6z+AdTCt87rnHVoZ1o1aqpwHx4zX/vSlSA3YZs4hBAw4Yg0XJTj2xqoiqt6nq4DYG7NmjvmQ0YDnoo+8MZz7iozHGcKzv/2NUVfkrq6cBKXDSR2+KXwMOweFodbKiGhCyR/clAJ4G7Nv3a+EkvOkJwPJ7/gh8NxVO+omau7v55BM+/ZT33+f69f3sF/Uf57gslVS/J/bOSlQ4jiHrTZsM4xcWUlHBjh20t3P4sFECixhOV1amHq2mrMPaHu3/AHfhLLy8zBN7GrBPtrzfelWUGjUCEDlmk11IYQUV29neSmsDDbvZvTICIPa3Nv05kNdOZrv5l38B8N/8SI0aAWxiU2QZdUEHOagPvjRAcKNqQDhMVxfXrvH22477LcP+8/7FqaEhpAGDP4TaExw6xPR0xI+XKlwbfE58eHW59XgFWmJhf4vPoB32w4Enn1Usbewyt3+I8c6Skti1SwH1soIA3cE73DnHuSaaqNpK1Td1UFW+77J2wAVojI0ClolDMr9nmYxjDNPTM/9rAv816yebeM9r0yLKlV+71MFTnGFRvzWx/y52ifetWacsBrySmsrJZ2jEPi7pYdadnQxPDoWHHgw8uHNn6NIldu826jMxYYLyykpiw717nDuHFYBXX0Unf8xptPW4rvAKqfDMwuWgw4SHGe6h5zM+u8hFucaddGrPNNP11BM/pLeytraa/1jz5s9t/5u//MtWDu7eVTNb2QLCYmWcYWaSySGGHvDgNrcvcUlNTp+N5whWA+IIBQzFW3Nz5tlfbQvm5rD7JQN4X0U9zAFfu1w4D6fgraGL2a1Q/zTO8tF9txqQn09f37htHsZqavAH3VO1KutZeJJiLFE4Ia062AiyN+Lo6yf87Y0CF8bg+/A9bbvP3L6t0Daf/M1s9i0AkXqxG08DcnJWUABcIjE5aXx/a5cuacBBYz7W5J0RKxoRSuHEY9H5LLMTTKgb3uNeCy0XJi9cuDA1NkZSkumMW7YYRz42NDdbATD27LOsf0RWUaQAWHK8z/1b3LrCFflTAwyI/eU1q3CVVBIPJJW2b/f2FhTUFBQU3N28+cW2EdvlV1AA/jUWi5RRbWCccbUBCdtNbkoALnBBCufiKiwooCCLrFg1wAXHY3lL8dq6WGFwBwcd7Z8LpZGbq/1kZrpPvj8R+DVP6knD8JayDvxN4M2nUQO2brUmAcC2EMmAfwGw1C8NGGVUdZt4AWgEquEgXjOI8TAL8PKyOPUiXOjn4ve5ffsG+Qrc5bTtZKdfAXB5FDvjLE/UMzjMw/P9z57dwhbP96+gIm52W0QDbOfvp1/N5TKX00l/l3dv3JC8qbUo7jRNLga8/o3Xf9j4w3O/d9YKgJSgrs5HRi4B8F1FkQIgxu+g4ypX88jToKqI8nM+zyW3lNI4BcBz7hzXKTpbVFhYWFBY2N46Yrt8vU0Fr1TpomiA2sBDHqoNiC+aadYde5/3FQrIUVILlNN0hCNAzBoglrcaQMGX7D8/CmFVQVvttOYyj/8D34KNUUvwU0uw/yngz3o/ego1wGPsy5eZ6uqy7cTE5kVF+ECk+++JSeJ7k38N8CkALy3Lnb42woXvIUfgwoUyeJ2GAxyQBqhV+xIAd+nzOCv7wJx1/K2Jayz1y/ffwQ7iQx7eyXIXErBYTFF/JpkiArGbQgG1Hfmm9+/HKADT4UOHwsNn7509t9cKgNmWlz/KE2ukAf6ryEMZZfvYV0JJMsnSy1/hV8SPqqVaaiUM5ZQTE2z61/ZtNcqSYv2vJHXLltlbt+xu2b59Kx1jLlZGuflim73stVGm6FpN8AY3lOdQAQ9z2MGJWQPk6Q8NGQ1gZ2QCAMv+ngB4wsBvW8j+wnbmUblECc8v9qPtC3loPSMjA08D5JB5iSI/AtBHn3X/de9ISkq8+y+ULvgUU92XEoEQlPpv5b294n3L/s70dMM8+6sj+5oH4OIH7gr2Sl2r5/5vmkr2Rn7qqEvAE9tppO1hj/wEebVgAk/roMWGsBGAQzXhGrksSgZYGx31X4PrEWo9ysaL9LexDVDv6qKrm258I3r6d7qCirLSstLSUsrKSE/3Rn0TOQEqREhcL9JXARULyhtQ6cQmAwzEms5ichLL8qNjjijeNUNAXgRgtQHL/makQqiALNkKZdQcnlo8ytueRxAOsxQWH/3fvBmf2LhRJuWwps+x139iuru74MCua9nfEfvfv6/OZdlfWxZDUvyPPMfbWK9e9Xz/pJHx4/PP/BziECsEJ/qTGp4bmEuuHfANh03XnZrCdWNYBVk/PFQ5PXxoemjIHWpxur1kwEsvrU4NrmoVRUACqWigmGJFAJYZRWLxp39TSVUbrUyqrKyooLJS1n/tWuyp4Dg6nDSghJJ88tUSFOuMMSYZ0Ic88lgOJp1JPV8AjAxaT38sN6fioWX/jZMIc3hDQGO5uQ9NEJCN85A9sBljbAKDTbGzz9ON0lJL3cbp7+4eV2vwkwqeYca6/7IY079paY/bSvamyH3Oajk4ov4vfX+amuTKeOyvRuZLANwETzK/fdvz/RW5HOc5z/1PJMElkyzplwGOYz5pK4sBc3Pls7OHDs2qgw/9kB+eOzfpJQMaGha5FvvJWfcaYAUyk0zAMuMEE/GnfyupEevLUrWxZgSAOFPBLrFAPV4ykEKKTQ/I5phjOfiYj1Wwaaaxw0nGdPez3zIs3wlv2f3Thv1FL5u+3D9LutlPlrVXPeb/Lcssp7PUHXXBecpSwRKAiCBAAuDD/R9hxKbyjJWXJ14ABMfPQPpncAT4uyvVxJ27d637bww89n/CQHpSwgclXDx0dhret+5/hxlvFe9b919cvBpnjdZdRhn1GC03V2Rto8aYsfcQEgBjp+dOawjISwZUV/vIq6xLDUgiydNI0aK1ONO/gHH/qdSW4mJsEFBU1N7ebb/fv183InEuyRRT8iJlgFUCeQb4xk1uypE5zemwE8aFIasBSi/knMppIrsJwYFb2P3P52h/D7mnsNgse9MW2BMA/3B83NGnNBU80dWl1rBkKthz/2NP/4ZChvTT08nI0DYeAXCffJMqoRFjBn8y/qM7wPi4N/Qv7qmhxhv9JzqS1oz9+/ocO+FLduuWEhTeYz+KXBL8Mqw73Omks4ceMBxdVhZ9VqY/Fi3hkNEAd2jYGW4eaPZmBsgkMLBOZcAlKqSOYcIywDKjLJ70ryyffOv22+yLPloNmO3utn/if1KYywqgjz4xs/EfQffKRjxEwwJu0W/VhC5zuRWoNt//BFyaYWCAb/3bgT/xb+eH0l7jt8HPwrXkpG+9ff3n3qbVHi3riFqJLIa75fhQ9acrCEhL8zRAMWHE86BRBKCffhsB3OWueDz29O+WLeYRwLw864usLPvHDh9hn8f+otM88jz2DxEiOpLWhv3FApb6pQHNzRIrb+Qnh5xEsv8009e4pkcbr3JVo9tqMHV11NaybVuctZKqHMYQQ8MMa3vnzj1PAF55RY607ZRrLwP+K+o+93vpteP+YqnNbM4gIy73f2rKsr/3mK/+ZU3tuL192v6VBCAxuM51NQDRh+5XCSU24SEB8P+gtpRjBGeERluZb4vluxj6Oer/wJVs9g1CNgafaj+zg/xsLrk5vParUAMO2Pno8bC/fw14jacAkQLgJY28WcHRHv9/5JebNrFcyHOTb/PwISUlsvXM/g4RuH7dsr/Zgsf+1rVaQgAShe97/2V01Dl/3rD/+fOVbqU38qMqX/E8V/OiHx1D/WOMPeCB3P8rXJEcFe0a0N0/etQ9cMCEgHFC9CENsAIgu3hxbD4ZoFOsmEvrOAv/sfLsP8poCy2ttHbQAeg2FVJYQAExYN6338AGkb01LDZt8oKA/lu34kwF+8ccc3ICNNv5Epf0AdjN7u1sl7MO+BeAYbKHaRyen4Y52MzQVWYmTmQ3vpnDkez5Yg7SK/ZXk9jGNu3UV1jHXC1jxw784LMovcG3Bnwf/h3rHcXFlsaNU97V9dALAti5k0cxy+yKzf4V+4sF4sCZhR+dqOR7xP9s398ki3K8vj6P/QmHRf2W/f1M109K4POIpxDeATtcdedO+tmzO365ft+Vfcdrjh8PHdcdW41o/xQWn8se8/2VzJRXe3fz3f4t/31nVW5t7WYNOh854qMb+utttdQOu8NDjhEAzTCKTAbU1BA/NmywtuAfK+37K6l0jnPNNPfQk056NdVibfnI8aV/t1r3P3J6uqjfaoDCWPV0/6ngW/jHLSwcptwpue0qoHx/OQFnOdtJp2RbnaeOuhpqeAIOEYkRGDZ6z4xl+Q6GPsZkgMnOOWRSvXDIphks+8szMF+hr+oheRmDM3/cB/v70IDfAUNPTSpYAoDnOkgAorn/upuP6MYawCOc95Zk/0b/L4EIPfFgHvt3dpZT7uV+8YEkN5E18w7eM9L1k5OlP/ZrS//vjoqKmrIDDcXP1pC1SmddhP1d3Jn8mfGS8f6S/l9X8sef3/Kz5eV527eW7K2sLDHNayMrBDsQZDv8xdGLX2qANaeoyCU+JCVZW/CPZaJ1wUdvprQEUo6/xsc0SiYfGdjP/j3sETmKuONJ/1rfX/EfEXDLyx2rATk5bW2D/lPBp/CJJpnXk6Y+nRrdPdqzuUfccZ3rYcLP8Zx9GGG5TyEPz5v7yFQvJ8fOASPHyxOoMWibRZbdn0zyMp4TrPTB/r41IPupSgWPRU8FP+7+W9FYI7yF8C6/B2NdLIpkaCQa/tGyBj489lcdpZHmsX8uSyQbEz4E1DAJDVjMzl7u77/8K/8nP/9sbe2OsbEcBV4vv2zpa4WxyW4Woo/M0czNPZu/0/7vfzG7qrSgYItchm3bTAqooYHSUlYCG9loNcBaa0dr5KviQqH4Dr4R1VtKCo6Dq//oH7IYm6zwhSxyYGSCiX7673HvBjfEj4DI8ShHrYMcT/pX9Gfcf7dCWx6F++UQkGRg9tKg/1TwW/jBFVlkZ5o+Pj32v8b6d/dn7c7amrRVYzIa/FHnOcIR23/8o3yIP/Kz/JHfjoVlf20rsM/5W7LFsr8sx9sfU1jmxBedPi1Qo/Y0oLkZr/1ECoCaqHX/Tfo3Pd1Qv/3BGqF/G40XshuzeQOcKLe3cqXmdnR0eLlfwGP/nez02aqSEvuOjO1wwAoAnZ189lnf6aMff+yKtTT8K3vmmWXViYsPnPTeZrcAM+GZ8e7x/u7+v0qHCO5W0ecmulSdDg+7L7xgnyCOv5/luXmHnP+XEG5qGvQSwipv/D1EJiGZtJ9ky8epBezvCYB9UyZQTrnIUe6/BEAOsnyNuNK/bq2NAJyFzdsGBtKAS5fsL/wIwCWWQGolJ89OnD0Lf5yWGnBdw8O9va//yut5bXn57flbDm+pKq6qoWYve2N5wGnMGM/A6ci5vk69a1g+MgKwQUAO3v5lt2oHi6+FBkQKgNeEIlPB9tHPx0f/U1PX9NVaDbDN/7BejHd5YsJjfzUrkb6X+/VB/WsjAPMaMDPjNjc7GzYwOcl5R93SCoD0+8CBlT/twlWM7J2ZYcamAZQHrqAio/vMpe6PGBiQPjm6moICrxm5xAW5lp4A/IAfnDvn2lGgrCx3717igS7Q2qT3afm4YTdR3pWv9lRCiXrVDnbI8dc/de3xpH8JUzlVaWcATC2kpU05Ng8crqgI3b1rf7QCqeCTwNG/T+VP2JPNzXH/PmfPnv+VN3e35RU+yKuZKX711YrMzHT84QqP4mELY2EeggOjdq4vMxPJ2VcMy98l++6jQ0AapND+MDlXsPfRmR/ZdnxNX/naaEDkjK6OjsdTwbPMLv78D6ypAMSrAQ4+4LH/zZsKWD32Fwv4jyWT1uolSeJ7KZi18atXpQFif5l2686uIKoiP0aBgkeRmvSgn/6OL74wQ85lZSYXLHpeof5ykIPeE0GfT34emRAuww+qowlAWhq5xtKQ6d+xcSO/BpKJgIPjLZZSRFE55ZIxWfyzf8veKhP7h6j8VfLsqRbQUqXVgP929+5fnvf5tGMluuURqARcabxu9Oxs//f/ykcfdYbDZGSQm4sCP584tXCAa+z/MmZpHoYwGeA/n625XpeQWUyBYX+1BLH/fXJOWSnFyczkxRc5ciSBb3pwYpv678ZxQie+VLAEAFF/ZCrYc/9VpY+8QWINsSfi0+rNvWhpWfS5zzLKolH/H4WTcGxtBGAhiebnu8eOORKAyUlZ7507VgNsHCD6FRLm64iPppnuoquFlg46uHXL+JxdXVYA4j+zbQKRCeEbD254yYDsg2T4Y+mFMKqZxsk0MJZGcnLs3MhPQXJkd/WWSyykMN75GV6/hcpTlR0YW8Bp3j+noZKcCrFyW9uYj1SwD9Qt+CSxHBigX6KfeuFCODfXlQDI6upiFoBBxn6A8Br8WhhE7P8uOfB7oQUL/gUMAl+Q8wV/BX4DBpw4sfR5nQT0yuiTwLW179tRT5HhD/aP9St7HGvxpIKHOzuxDaKnh8LChe6/hGK9zadfeQ3o7/fYX+SpgVnL/voQbbJYWZS0c9JaVo1o/tgxFcDGAe3t9z/7zAqA2ebkkLCXwdmHUoopzicf742gw8OsKDazOXJ22PXrPVlZTna2GQ560T9LLxCAxnTwLCb8yIKPK4yxMS9yT0/fdGnTJf7XJfgr0d94lo19q/0tZq/iIxUcSyNwa2sddSTZwMDMmTN6eWJeHlYDSkvdJd3mFh7F7Cxzc+wtc/dyEX72ND87Q1L5/W9x9k3K6ikDOrWfn/+56Q19yXkv0vYtyl6lzIEi7HsHEsH7MYQCqaTKD1AsaF8DJaEbYQR/GGXUvlYPML4KabIYHnaI1ACvQQwUJln3X1syM22YYMd/vuIa4LH/vXty+R957tNdXvtJWuOq2bHDCoC2WgT46tVBbyBIr88MhRLn6CSRFCJk3wpn3uY4NcXMjGxln0yqoMJqwHwyYMpmg7M2cIAno4HFsCstgv3T1uuAcET6t6L6Nx6vhE/haPS26UI3vA2VD7j6q+/4TAXHUM6GBgmAtZ6WlvPnDfvn5cmcZY+lVVYqp+/W1wODsssMNf3FHX90RzY/nkO6Pe0XMPiAgZ8lZ7I9548fzsZSFZnGbHyzHpFFlswmflRTffT10CO/Xp1lSfbXX+rv1doB+/yz3KA4nwf1mlPb/qS2lAWj/zYIXp8asPh8vr8JjbADn7h0ybK/PkibPfbXwyYxeA9JrCGsKtbVWQHQVhqg12d6CeHnn1+5E/mIVSeZnGJqllk7IdB7rH4FR4GEfezzgoAzs2e+TAYkZR3fmJ2UtDW2FMcfN2Zwfr0mBT0fnl8RTx4xT4BGd4pcDIqgUvYOxcX/6cGDWFLBPsrppqU5ERpw/XqfBMDash/Q2rbNLSmx76wffNc+BfS7c04eMY978k0MGGhm8Jr215U0lZhHgHgVcrHsb7brFKqPQgqLKMokU5zeQYc49za3a6ld8hVb+stOOu0b13UEbWOIACBybUe1o4e2Rd29m9K+fcHzP+sE7tJh1xGE/dC4vFzawuc+3QM11MQWOyatC208ciQyDohMCB88iB/E/3YO+zI40QAgSjb+WEYGq4PIV0Rc7XfOnevLygplp6RkQw5x4OC6fDCks9NL/xYW/tiXT3jyoyU+AuOKa9hJYQ8etPtIBcc+DulpwPe/f+GC6w0E7dq1vAZmW62dAqZt0nRado55BCgDbx0Ya527c3fnuHYSQA6W/Y2tX5RSWkGF+LWJJlH/da7rswj9CZmhbrqbaW6h5Ra3AP29jqDjxD8rWM1APNjd2Xm/M6Nze6e6UuRa8uub/Z0oO2U+IHr02H9gYAc7Gtyoz306+ELSmj8PZhlAyQArALLJTz+NfDBU/XDl4RAJ9f7LXL7JTRtO2teBUli4OnKHeCIyIXz7dkpWVkp2YSgbXoENy3lMo6+v78aNG8PDw+np6dXV1eXl5YnXAN/uv/eiB389R39q7dKltrawj1RwrKiv94KAyfOCHQgy26KiZfd0bwpYNiU5To6IHgMePsR+NTm+IXISgAs/aYMA1i+2YmbJ7WSn2Pw+9y9xSRJpl1ErppgFuMc9zRs/xzl1KzvrTb/VEXSc+CcE6L7Q1dVz/37Pg5zume715/4vl/1907XH/jduqF15T/6kkRb9NOsuAojCbSkpkQnhgcuXI+OAePy+URjDYizy7PaRhjHG1KBF/Re5eJ7zIhn7ICrV1fasK6kBEd5uCSURCeGSCxceZr/8zWzIgiO+b+GDBw/ef//9ixcv9vb2bt68ua6u7vnnn9+xY8eKNFJ3pdO/yckepUfJjrkLEtxmSrBRjNmbNyUiPlLBMY7MRSYDutrarAbIXnuNpKTlOXmieBsE5Ni5vk42Lp4wDAxg2V/asMG1Wm/Zn3TWL/LJ381u3QF1ljOcUU8R+08zrfoSs8uvzyIriSTtUZO2a2tLJM5yVhGDfX3IXvbWUmszyfFrABdm+nt7+76Eide96GA9oA/6wW580bKDkIdFHlFw44aX+6WPhv4Gy/7lpEP/cqg/L/Jj0jqaFJKVFRkHdLS0RMYBMcd2p7DotR9x8OBNBBNFXeWqmixiqcOHjZ+5Zw8FBauaEtrFLu8VER/wwbvvvv0uy8O1a9c+++yzd99999atWyUlJWNjWmEwd9u2bRs2bFh5jY4//bvNuv9ORobvJyTm14nk5k17GCsAK39DRCIRGtDcPOoNBB096l80I8d52GmJfj4CGBhw7H7r+8u8Kv6f8APWO5S76qZbbVUOmrwlyYA+y9NXx7HvzZYAqEPZl+tp9P8LvrjBDeAoRxUoiK10hJWaFZx0mf/TLxhQtRu7V81+HcDSTBec8s/+rzseLf9uFsPAgMf+Ysj6U/WG/ck6wFmM4eAT+z0BsCdLSkQO0L9nXFQUGQe0tNy17C97+eUY1+c5FYX9rQCMM25fdzPGGMXFZjTgyBHT6UUHq4/Ip0IVLLNMyP25d+/elStXXNeVBlRWVnZ3dw8NDUkGVly44hr/keG5/8tZ4q6sDPubvDx1dT+p4NjLtm2bupk1JaIiB4J27PAf0WPdfxsBWHtMGEofewuQg/CqyzpHGmmi8jBh+1nekl1Co4IKxQcZZFgBGGVUHpVuuT5vZrN9sdIJTmi7gQ3xu4ieBnzrSv/rL/ZP1U3zzXU2/nPKY39/zCz29xBNAK5f59Ilw/4dHaUvlx44ldfAhQNcWOaATz3sBxYKwNprQKTKe3GAthcu9NpRIJmmSsaAX9Vx/uuv8l+jv1J582YKSigtNRQgx//AASMAycmrUtRHXd1kkiMTwuo2y3x1eXIoFNLgj3IAjuOkpaWlpKQkRRuzSHwoEDFnJyfHSwAss615QUB/f+ypYH+IDALGmpqsBngy4Ace+yfNpFpPX8z42Fd7yLZfPXXvZiii6HmeTyVVF7+FLXLwdTc0fCrjUaiAGpGxL1ZqoEHKoZ+s7Auib9/u/N4/7fRe/WZUdX0g/G74Xf47Mj846PhayUPtpqvLyAB0vtv5n5EtF2VQv4o5gJ8kOlLs175RW2sjAEDbs7Dpoo0D5J2v6InF/qmpZGSYAaaSEtOMamp09kSVE/t4nI0DJplcboxcUVGxe/duufxdXV3y+pUD2Lp1q/TA/0X7v+I34J3lNgPrsae2aa9q2mZV/BOe46WCdV/27pVCt80fcmREqh3/bbGlihDljRutBugEOulduNBD7nmbDPDVFCzFpwzyDTZKtXRzI5ebzcrScZxULwLwU8UxNKm9slXUgFd5tZBCla6W2g46euiRB6PuOstsEklppKlo+oMKKrazXeOc9dRrPx7iK2J5OZbwf7IAeqGKhLv//nuTDzgyx+85XmXFkRSnF+L9phFiePW1wX+Dby8YBJYbPjtLWRnh8DSchXTY1GLiAPnoHuI6sRUA9Uv7Fhi7KHl0xHu66OPd6ifqP3nkSQPwC1tJB8bHx/Py8gYHBzdt2lRTU3No8cWMGuO7Yu9GGXzbZ/XY9G+drN26OKpd0bhPOJFhv7Iy0unJyVlohzZsJmBFb4uHwkITgKpJSAPgIuRC3gPJwMInkhsXFYDiQRqH2MCGUkojlmRS2VUCRkdzwLD/Rjb6rOJGloM9skSMBanRyv3vpLOX3hFG1HTnmFOhFB9kkSXlU/GrqdZn/Hcq35mA56tANgdbZVmJFQD/vckvFmpAY0LYX0iKfczX8fGqmhT7RUwQl8kdm54GhsDEAZAuC7M1tEInlgD4GOpZuXKGIcRiqKNuD3ummV5ms3GeffZZ8f7o6GhqaqrWM/B70bHfGVsGH9WT3M63LF1PeS6wz7bmLIwId+60LaFt3vaxas1v2zaZndIlnIdcKwNhqkJLnHPPoDEGsW9SIgJlZdafycE+/u+7ik8m3vf3AfkrMvuKw1FGIwUgk8xlTvdd3k3aUSWbFwD7IUFY+d6EI/NxjldZJSTFmPdzoqxZ5muvb1gPHYMuLw7AWGHsJ44Jq386+YyhmI5T8CWWe9Gh1a6ekCXqdl/xo++W0D9/0LtQ4eu2xBSVRejVEFyA3Hnb/ORaHYQhGCQaQiHL/jK/COEboTV7UUT8rcY/QhmQAAFIWG9yfNBpKHEC4KNfOqwJbs4LgLYvQQYB1i06wQpAzwq/Cd0bBYIKEoTbNgLAbF8iOgbnbeYJxbLsn008CLBVNi8Am3mK4bC2SCIKBqLs0MQW+aqrNiV4CVyeFwBtXybAukWbJWr/SST/3cGLLEYS1/cjBoJgH1GwlPsPDmRjLId4EGALVMGs2T71cGRreHLXZSGGhzl16l+fOsUPfkBjIydf4qcxcNjClhd44ZExPpenDgECBAgQIIno+N1YL7sX3vLcs+d4roqqOup4mhEgQIAAAZKe50mYeXaO++/yTzD2PLBzhhkXl6ccAQIECBAg6STR8QZfVQQIECBAgKTGryX7BwgQIECApEIWQxZfbQQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fF0RIECAAEEEECBAgAABAgE4DX8YtoDzqL0J/wfmeBxOAi0Z3lit06bAT8N/hB6w6IP/Dr8R8lboFPHDWV2Liln43/AmOFAMfxA+Wt8FibR9ROAm/At4A0IxVIfjw47An4cPeTJGMU3tG6vTSiC+s0cv62H4u9DG0rgH/wiOQwh+E7yDQQf8Q8zOVPi2dsZ0wcv7rcV34LdBJjjwCvxr6E/EiRfiV+G3RlzIv4GBZV9HGvx/8EtfxwhgH9SxSqiZt0KwyIc675xPJwKUwAEisAP2z9vKo3L+0AeIDS5rCZcAwasg1isKoc7YaiAUIQCRqIPOebtFvAjgJJZkUqBBtnBZ7G6M9UAbK4e0eeqXZQbsHyAQgJV3/2Wr6v7nL4iPIjVggqcJwVtvGxYVgE3zGtCj7QreVEv9+2EbMeBt1hJv8/VEgKRTiyQBuoiCN2EDHhpZPsYYe8CDAQZGGBlnfJrpOebsWijppGeRlU9+CSUppBCJXfPsv4dlYHCQe/fo62N0lKkpu4w6GRnk5FBczPz6Wamwc94WojxCA84yj+lp7t7lwQOGhpicZG6OlBQ2b6aoiIoKc4plYmJi4sqVK52dnYAW9tLqvlrikZhhr03FHx9nZoaNG0lPJztbpfa3eN6CRjELP8+jKIbniIbGlWZ/3cTubgYGzK1Uhc/O4jimzlVLKldBAaWlppgR2A4HrAAsLFU17P+Ennt0wydYqAXuY18VVfjDZ5/R3h55tv2k7OdHDpD6SB2cijqo+x0fqulsZGMaaZlk5pJbRJG2+ISPs8f2cvbDRNZRY5Sz3INPHo2x34AO+HTBzhiqy/vlApxqXDQDMMqjeBnyHm2qp3ycdeF5G72f+k8CjBGBVyA38nD+L4U0+AmWi8ZoAuBDA96MbyXPDjpuc1vb+9zvo2+YYQnAFFMurhWATWzKJruAgi1sUT/czvY8e5cyoQ5rfiGaaGri5k3TR0UcIyN4ApCZSV6eYX+7BPy2bZ77nxc99uict3tgjnzjBq2t3L8vShJ5GwGwa36XlFBdze7d1NezHHz00UenT5++desW6Iq2aY3fV199NVlXu1zcvs21a9y5Q1cX/f08fIgnALbU9vK2b/fJG1E0oPhJd/+tFaV+1YkKZSXNarkq3BMAK+fS3fJyVZy5oampQM489R+ATYuWav9+0zC6v0d3H3cQcsiROyL/I4Ol9fv6dT75hNOnwWAz7Of1AzKd3UdvXtCnfxPRYJdZ38xm9YUSSsopr6ZaXQN/8H92nzgEh4GlBMDTgAULJnoaELK/XX512V9GgXl3PUtowMsLCuBPebzz+hIAHxrwChYxiGCa/eNVEgAoaKEA4T/DKfjlK1d+mtghum+i6RrXbnGrjbYuunrpHWLoIQ8jBUAdT52wkEK18q1sraFmL3v3s3/Dvg1Y9i/BF+T1nz3LpUtcvWqoUDQtPz0cRhBNSwDkMJaViQTFLOn792sl9Zq0tBqiIt3TgIGBznPnXHtkEZNOZEnWdc2Rc3ONH7pzp9k/PMxzz+H4IUDp1E25/9KATz/91HXdI0eOpKWlVVZW7hZTLwuffsr581jl6+igt5exMSsAxlNWqcWSujx9NTjI4cPL5A1PA4qiLoDqrqjjL8a/fNnomYrT1kZnpxEAVWykAOhuqtqlu5WV7NhhpKKuTh88378yWqnS0owG9PTQ/V16vqeKOsIRudgi2ROcWDKwVBOQffyxaVy8YKjfHK2iwndVWozAdwkBTxIALzKWY1RJ5Q527GJXHXX6J9Hh/+z+cUi2vLN0wAVoXLDzIjTGdsGGhWMos8e7Ly/nV95ZLfv7/6kPDXgZYrwUUuHkquUA5EyJd/LzXRi31/IpXGmEv0BMuMGNc5xTf2mmWZ/vcMfFBeOPlmSaLrxhg7rz3OTkxMjIxI3hXv2NWrx8HIULnXT2VvYeqTuSU5fDPvxAPVLutOman3/OlSviffXqPLbJjXJwJsOTg+HBzj6J0TV5cfIra/r6tKR6zTPP5GRlER07oPP+/c4zZzrPnr1y/ryOnE+fOCevxjCJAoCRkXBn5/1b5+4byRkYMLSrL0SyPjA0NNTT09Pa2qqBIEBxwIMHDxQEsCycOcOHHxoNuHhR5ZKOKsYRcYhBwrPhgZGBeyP3RsSPMgnD5KRRhYYGVhDuijr+ukG6gypLc7PulDTVjtLkkptOUTLJc+5cOBweDY8O9KnJ3CAnx7j/7e1qAPUDAw1Hj1oBeBKqqmwcIJMzf5nLYn9r8j+IDsv+0ibD/rt26SDGDhwgJjxDCA4RBdNMjzE2wMBFLsrkG+1kp7yoBzw4xKE97CE+nCAEB7EIECSBjV+cnu7Kc7T4xBu1Owk1LBMi/dOcPsvZ85y/whUwbmh1tXGU9UHemyJmx5EAIOobHjbU1NlJa+v4lcEr7bT3JPUM7Rsarxs/UXeiKKWIJaEDXbggEpQGyBEupliO0ja2iQ0lKg7OBBN99N3l7k1uXuu4ltE9WDOSWTO1s2YOnoEcoqOjLuVM5+SZzq4znZfPydeUSm7dKrlUbRkBEF23tYkXxMMDYXGxPG59J4koLGQJqBJSNeKfm5vbpkMYaczLyMgIhUL4x9WrGpMWi6ngqcPhgzwjJ7GCCtGlBGCSSZW6lVZxXHNHs6nrpCSys20iZB2yv+6dkXDdx3PnTNFAZREpl1KaR56GCo0AMBcmPMyw+Fs39NbgrTH9fWdnaV9fw+how9TUgRMnjMg9GZ4A9PSEb96M1IBUUqPVtGV/bXWrLPXLvHP5xz/Bw1Y4zAK4uBKAUUb76e+kU87Tda530KHP2iNh0LcSH2LCP8JDNYEGBALgwfVIYdx3YiiK7y/2/5APz3BGPktKiukme/YYiamoMMSYlRUpAIZD1RM7OuQCq5uJBIaH976XVPcwvy5cVD0Nx6F86aHZ5mZ1Tf1YZKGlKw9zuJZafbYDu+OMq7urIykE0M7BqcGaj2pqZmuyZrOYhWcgn8XQCmfy8s7U1Z3u7Lw8OmoKsm+fGU2RkonqJQCSLvmsKtH0tLhrxFxJTY08cT8CUFFRUVtbK69fvA/oswZ/quSf+sTDh7bUosvk4fHneUmDGOIFKV8BBeJKyZ4cRnGHTSE29zWb2Ki8HOlY/AKwssM+IHdeKmrDOLWGTDIbaJCru4Md8n9VIt1KFcrFlbANMthFl1pXCy3yNm533G4YmW0IZzTMFubPbOQZSOFJSEmxGiAB0LZtpM3TgKMcZQH6+w31W/Z3XSz16wj6RdzjsVWLaoBETgLQQ494X15LFVUXuKBbqZ1TTDk4IUIS+xjP/lXTAJc4EQiAG/fK7d64v0Z+5Ptb9hczyiE7dIj6ehGcfGc5zosOhhg/uqXFKERZmXFS6+o+27dvCqZB2xNQzRPQ3m6GOES+IAY8znFpwGOrV4pKdrNbHUnxgcRAnWfnmZ3MgbVnoJBHcRPOYOx0Xd0XAwPY/PHBg6Sl4UF0KqqfnDQCJvUa6Ow0nCLC8IGsrKzjx4+npKTs0ngCKnjZgQMH8vPz8QkNOok0pT8PHhw4ceToTx194adeOL7juKjBo2SpnUjNxdV90e0Yk8aqru7dIxwmFFqp7uYQN/r7JWNK4UgDVJWie4mZRufrqded0l3bwAYehTRAA1vVVG9hyxd80TDccODDAxJ1ZmAWTkA60WDv3HwyoFtjaIpTvSCgggoegaV+mWoauQB28EdteoW4qoToGGBAXovKmE32x3wsJ0Y9S2GKzQ8rxo377KU83XBjcFMDJPlh/xg0oIkm9RSN/IhuRJTPPMPzz3P8uOHN6M83GsZXh6quFglqa/0z8eOleQHQVlYT9ckf9eGuLnXmMsrk/4rrDfsvgKhfpr40wog6uboQn8LsvD0LxczjmqV+zLbFcXjxRaamzIUthIjUDm3l5DBw9yHj4yau8QcFAaWlpcoEgI5QkJSUxGJ4CUZgeH4bBgOJzd27koHMUGZNeU1ded3h8sOW/SNvl8pbQ41IRJVzffa6odrBQYaHJVzrhf3t4I9Y9sIF6ZN8f7G/JFxbjXdvZCOLIYccfVtOeRFFknZJXcPDBj7ACoDZPrPExCxPAGQPW1psEKAWoq1CDebxxRd4o/9qQd7gT2I8VUVvz/CMtrqzs8w+5OE97ikakEbqOl/hlZU8e/xMunGjMTVja/oM9nOkrZbX7y6zUQYC4LKSuMtdEY1Ccjvu39DA0aNGA559Fj/YvNn88d69aiGeWnyxtACMjRkNEKNBFlnqKk92i0QWROJzmLPm5dibItj/duSwQTRs2IDjGLP/MeYT32PjWxtL/n0Jws9AI/wkC/GtRwVgRDY+PtzTM9LdPez25VVu31KxpaqialPq4hqrChFdGsETJiclZbJ1NM9LEYniGBGtRqhA5KoRPIVxZjRmKYj9v8E3pOi2dIThw3kB0PbHiQpLTPX1XjLg9uBtbyBI0uLNQ7DsLzO32Rv8yc9P5DiFwiCx/yijffR9l++qi0nOlR3ZwQ65MutolCQt7TGzyS5jkTvjQ/wDFgGS/LcJ//Wq+FTjlS202Ai7rs70lMOHn3D/fgFOYWwmYmBk4VCMjQN+Z9QMsDVwcKyxLJy3QYAnAB/Os387/jAwYARISmRELCMjSrDzWdRdWRD2zn6ECBzxBOAxDRgZGdb/a4eGS5iby922I3dLZV40bvZcL+ujichk8fa7/n6nt9dIr33eVKUuLIyBFu1Ylsn/tLTguqIz+xCwpWCfMOzvYQY+8CcAQmkpXjLgvfciB4JKKY188kffc9BQv7HduxM/Sq1qkVLZWTW3uHWDG9qqx/kRADdmVX8WTsJ/jUsA7AerAVYMVpf9Aw3wUVtJ7krXvtwTRQBttLXSap8qqqkxud9QKP6O0AZTRENyMtZgmOF++u9z33Pz/eISzDGPD+AMdPqfgyXuam/HDBAfKKe4WDzo8znfIfg+kXgeWCgAhRjzMA4jjA2/NjYyMibhkQBUVOSWluZg8TcfP9VDHk4wMckkQmam0af09Lie07961RFr68PICNPTRlykfKLNbdsk+8uTgYcPuXvXVF9rK6ARvJ3slMNr5Sp2nIZZ/MAKgLWRq1cjNeCLpg2W/U1kUl6+cPAnwaihRnlgOf6ifvUydTfpgW7uJjatrtf/i1CML4RCYnm1LjkE2noRgD6o1cnszkTkewMNcBP7LqAHPBDzdtHl4ooNKiqU8hUhxNwgre/RuHTTE6PpfNnZdtaxeogdw62nPoss/OMK4EUA3X6lqQ37CH5zM/aZdCN9VVX+J3oMwg+isL/w91gE6bLiseLiMZAJOZBrtsLNxSdj6+700WcnT8lVV3XFMjRsa+nCdxw7KdpOfJuask+XGopUNrunxwzklZUtQ07u36ezk9lZOfLyZ6uoqqaa+PEpvuA4kU8EtfS3lDglJW5JSU9J8+X9Nv0rXrPUb3NTa/WQShllqp9SSlVRI4yor+m2SrgWVpfL2mHLFtMM8vKorKSoyIu07E51De1cXfYPNMBdi5fByfUWxfTQY2eViWfUEhKB9HQ53WIfaY58ybOcVR5qjDGxntzJcsptLO8f/tlfjuH580YAPvmE9r5NPHfUPvFq6XUB2omCQRghxPIwNm9CrrHFIMdfLu0lLt3ghhxG9j7Pjh3qhDFyxFn45LxmHqRdvFg6c116l7LF8H9/P61X2l2RpSTh4UPpgVhSwuz3+Z++PpGvzVXYHGyCu4ZN7To2IfzDHyoTYC6jqaTpUvGlS8W9vXDMUL8r9lftRYGTkMH3IopUS/nkSwDU3dTpBhjwBGBdZHUOHTLhuJqBjaMsDh60O0UK2rmK7B9ogLtGbwNVixxmeIghQNQgXzM/P1FOiR1vamsTjwxPDv+AH8gzUpgsX1JOkwRAW9kKMsvEBGfPcu6c8f21vTFSzIsHOXaMo0YDSATGYHReAP4F/PNODFzuubgzzIj6Bxm8x70WWi5w4Vz6Ofaf4MgRt77eDGHHgHNwGj76YN/tM2/U91RWmvubkkI4bGjz+nVTIf3yltXP8/JMfasq/GBkhKEhmX2wJ5dcsdsadIr6evdLAQh3d6c2N1/pvVJyu6TlWklzc8mt6uptPgZ/7Cmc1WR/W0VZZMnsgKc63SijLMAo/jHqh/0zl9wROSQrDVg48UI748JF778B/Df0xAnAOOMPeSgDM9aXkWFdwISguhp10cFBpqfFx9MDZgL9da7beNnTgEoqNX66ne0ppBAHdBJNVzp92lCeIoC+gl28etD4OGrix4+TIERGAO4/ARdrEy7vzDI7yaRoVYNyrQWtP1c2VbLtxQ0KTXSFUqnYnsM7Lev8S8Mff+MbfV++d8fEeaEQdg6Ejfa+8x3mmpt1OxTvi1J9pfvGx42p4YAGiTPIkK1Jp7ADQZe7u/9qT89fLLxa8hdLejpKfmdGxuUDB4oPHNikb30kTtxVdnnSSZelkWZ7nGRexgK8hU/0wltLsv+PL8L3v41E4xTCp8Z8IGD/d+CNhArAFFOyaaZtKsja45iN9q/o2Bj53+gQr83MGMYpKKClBb1gp79fzq8sk0wJgMRAAqBguZZa+6IIYsXlyxoFwWrAVN1Bkb6I1ZgYNtHsPwfuc+A+YuFZfkECIPew5yd7/njJz/y85hpUVW2tqdm1b19qrCm4wT/J9RdKX3zx548de66hwYZ3jqe/jiPytPnwCSMI9++bf1dWsiTUaqyBhFmWSiprAbWc9v37L3V3X+rpyfje9y53Xu5r+mH6c0eL9+8p3r/3RFXVepicmkyyNUBxnrVY31PWC6c86o/O/hZrLgBv8QkyHwjY/9vQmNAIYI45F1fmPRdv7ckN8x0I80S8CMVY/DqeCHWKl14yA09lZXY4yNBQZyddXaNDQ4oGZEUUyf1vpbWbbgXOMb9NRQfW4T7/nKmtNXaqm5Gf0lISgctQHyEA7lEWgZM8s7G+OTROxif5P//fPy7cUlheXr4j27wy7TCHJYcsH8dzOFGrV51qVocq+/FhD2X7y80DUEZysXPNhoZ8CYDrMjdntmBbjYPDWiAc5vKdvZfvdF++3eP+i9Pf+M7xX5P8nd+4/3LxgWKZ96q49QM3usp8lyUQCocb//t3//t/58l4lnWDvfdgLzGgJRvOf53YPxUaEz0EZLuubMGj+UuEpu/AJFHwEhZ+BMAbyZU7KvffvvBAAiBXVBpgXzXXPWae9eukc5hhXV0aaTXUsHzI6ZLDOjaGEZvaWk6coKSEBGEL/Bv4hfk+7pzF/Qc8ihBzjeYKHz5kYKCv85/33bx59WJL1m52q/gT7sSLvBhDOuS4tSSx/yJZtpwcOwXCG9XxOx1arcZOTZAM6KZYYw3gTfjaf/v2qzv37Szt2l3a1TX5z85f/lOXi5OL7SRhtZm1XQXT8/ptNOBN71g2fiQEL74Nb4DD04BGYNeyNeAGtADnvzbs70BobXIAdtRH8fskk+Ewk5PGRAqP4BcWf8h4ZgV9j8xM9u0z9uCBqN+anHa7ZIr6dxtt6j/ppBdQUEGF/y4dmdCyNmWfdxb5JQ4FsAVKIAuGMXD+GO5dIlevEJdiJaq3l7t3uXqVz/OHT5/+ZIyxjc7GLLI8AfDPUn8b/jSkRp9Ua83qv67AmP/aDIUkGGHCajUyVhjOkkVtb7eve3O0VTOu3Vdb1VVV1rXP7epyytrM5ADXCMAxjvk/z2poQOS4v5quupuMGHDStqWXIuO4dS8Ay9SAG8YEtdwg67vqApBBhjV14NFRZCMjFBYuETeo9/+4HWZ0oRVOyTqVyH076hgo0/hDcbGxhgbDgurfN25QXi550OD9Pe5d5aodDlpsyliKTwFAAiBTH0woSqwGWAGwqFj4KWKhhJISQ83DwzQ1N+WRJ9nbyU4V3xc3RiCLlYd9YEBb0ZpajWyEEd25RK5PPDnpuf8mbDrqmvm++/btK+2alPegGjQPhjpqTMaqqFrD1fCHGLIP/9j5zzL1uDj4NB9eejqelqyO/OQPN75uz/w4aykA2WTbx/j66BscpL/fEO/27U96JreGmh/jx6aZjihJJ5wCGqOsWPcMfAhzy0zu2eUIjKvuugwN0dRk50b10rt45/AhAN80ApBiBCDRsOyv7XU/PCP2V4air4+bN2luxi7PqbDICoDFWg5rZGXJdGt0iQMM9NOvmyJ9In5ULSOrb+3OHSqprKfeWG09nRM2ghxvarKTA+w0hRChtaq0HnpUP6olQFqu7iYjBmz2LitzfT8xH389OgH7J0IA8sm3E3lucMOb3Tk9TXJyVA2opVZdfdadBYt7kWnik4u54idgBj5m+VBPOXIEXdm1axIAuVFyNhVQxyYAP5oCsnSsAKxRBJAO4376R34+RUXk5RmPsXfE0IccSSzWXAN0WZLnwkIJlCRZdKv4bJLJeJ8FKoJj+IFdz8eamN2yv2wTm9i3zyaQtL3Tf8dqgATgCEdYC6h+rHgPMgjoSuy8MOLG060B65/9Xdda5IsjEzrykwAB2MKWUkrLKVdMOjY+Zl/ucusWu3YtuHsRg44bXJs69tscn4FZjH0SG9fYZGVy8ty0GaWOkm/8Jk/EcyH4fwKwJv2gZGpqS2trSXv77YkJtmzh8OEl+od0yr6Ja2RkMkxYtvID6rFBXnVJCaWl0tXwVLiNNvtKwTrqiBmb4Rgc9TWhz77tRzY+zlHM4I9dVMfGjlYDjL3/vicA2lZQkXjVbKFFAZx915Z9rFndbTObE8CnT6cGOKwTqMPJ7LPOKdZWlv2dtReAJJKqqLIzreROacDh+nW2bjVdW5Tr3T2fIjYFISBKBGDt8zik2N6FZJKJASkQkq2RAPTJaS35vLWktVUacHt0VP6qhtDt9F4n2sCn5M6ag2ONdQKJUkUFlZWmrbS03OLWda5XU11GWQ45xIBkOGaNJeGt8+UN/lhjHlYArD28ccNbM0Cm9pNIsrVrn13jmiJsQKGzVMp7MjXQgPXL/mNjcrtQR52edhzvnXgJ8P0TKwCCqL+GGjkp8uO6u4euXDEdJTtbD8pbxfN7967DNTywCRqwINsGAfMacBED+xIICgt58mwd+8oB3YyZmSyyMsmUEQP2G+NvkGi0GqONLa1b5lq3XGjd8lFbaHY2LNd+505qa+3Ei532Eh+ba9Xba5eBQfGZWmA66awfVFfbl3koYOyb7WuiSSQr9n+e5/0MBPXTr5S+4kh57iqapX6OLi0Ara3e254XDP54cJxIDbg9dttLBhzmcMLIVn3KrrCts0vHxf672V1LrZRyxfnUBeep1wCH9YPOTrq76euzg7G5uYYSHWcF2d9ZLwKgTruHPTa/+h7vXbhAVpao3ziehw6p5N7lRi3NHbgG1+GPY0EFNBjzQN58HDBrjCti/+9/nxs32LaNhgYOHoy6TndLi6RC3diOn9qXasU0D2Cmvb19YmIiMzOzsrKSBOCKx/5mm9KaUt5aXjlWeYkqOYYqukom7RN7zePSYwua377N3btyQaiiWKW2mcP1gpISM1Bo5+5dvHiRi9lki/pd3EMcyiPvyWsQfc7nIkf54+OMP3/o+dCxkB/2n5gQ70cZ/Fm4ZoCnAWfORGaDFaastgY85KG8fumUyvgJn6hzqd0e5KCEai97iRMLeuS6hP9rdlhvUNtS51SAqe4HW7ao6chTTQj7J14ABLXLHnrkaavhfjb32enTYn9VgjxQ9XGRlGRgkcHkcNgubsiNeQGwOAAN8xaJIm8sSGhuviov7ld/1fRf+2rJ3bt1pse7+xdfmBc4NDXpfsgLVuxcSeVyOzDoDP1nzpy5fv366OhoXl7e3r17n3322VAoxKribY/9zVbQ9cv7U8glAVDJxFE5OSQlLfI2CsVhZ8+K5kzyW9CvVHDfk4ETFWvX1YleTSsZHlY7OM1pF1eE3kef/Nwqqh6TAX1rV/mX73+BC9IABXPJe5KTjiW9cOyFDcc2kOZz2pfigCiDP7DoQNBoW1tkMmC587AG/e3zFoWXwikj0kyziqk4wFstWRqwYjdxQY90wXn6RoQc1haTk6YBp6YaP99xTNz94IGhnXPnaG5Wy0lONrFuZSXl5cSCe95//XW9soiPCRMAReJqnRNMzDCzkY2fT37+3nszAwPcu4eyAhUVFBWZCCg9XWwlbRD1O6Oj9PS4nZ3GBTSZgx7uQi40RNgOHkepHQtqbp5tapprarqufizq15lU6XJ3y8p0G8zNcF3pj9l565a6u7hQ/6znmV3s2sGOGEZC5KF++OGHn376aV9fn96vMDQ0lJGRcfTo0UQIwAAexD52tE0E0dTf9OmnJuwZGzM+dEmJqV7XNf/s7JTeoVBMfzA4iHxGhWj6YTnlsJ5Gj9UmFCSqKagXue5Ua+v7vD/AwD3u3eCGdFrEJ4oX284xN8WUyLGXXpVd317hijIHodra5OP3ko51JR+9/2xu6ZKDP9b3jzL4swChUKQG3Jy66QmAiJjlIBf+DZF4AKcWvuNhmmm7AGQnndI55UX0T4m3TneMY9IAXe2qOteu+zRqwNphZoYf/AAF4xrgz8lRbxS1iZGMV2tpB7UwOcEarZUTHPvb8G7K/LD/tkdY/48kTADsQNCzPCslSCMtm+wmmi5fvqcuJ/UrLTXhT1YWaWlWACST6vWqKOf+fdrb70gnHM6bVd0p89z/aNVV0c+J5s2zzVs2NO9OY+zS6CX3gw90FJ1JsZa5DVYA5P7buWDygUdG1IU0enuAAzFE0PL6Ozo6rl279vHHH4OilrsKAvbs2bPqAnCehVAtiY366Zfc3mq9pVJK5kT3BQWmeq3wdXerBcr/MBUgV1rc0UDDPvatL/ffYts202dcl5QUNm8WN4vZW2lVrLOFLXnkKW7zBGCMMRVc5CgJnNK+/YfChw+fOXYs6fjx5NLSJDj2xKDcc/9VaQsGf6Jg61ZPA+TTRWaDl+uJ/y54BYv70V7cKQFQGSWB97kfJiz9s2M+dsFkbRPAqq7Lc0RFgHrohh6YA3Uw09N+4RfkfKn1SgAMtQ0MyCPTfhviHjnCgQPs3UuMOLUc9pexRgJg5wS8zMtZZBVSKGezhZY7I3cuXepQl7Prd4mhVEWua99YoIoyYrCJut1UbuMnRFViN7X4/RTzBDRR3VS9oWlD2qBRGnVIOUp32u7Q1mZOIKcyFDLnmJw0J5ieLqJoNwfFgHbB8RieNJ/9EtPT0xigNICGoLRnbm5uw4YNJBYiBXHBJJPS2s1svvbg2g8eTFy5Iv/CEz4bFBlJPsEucZxKLQ3QTWF9QmN3ipMzMkz0VlYmNRttbb0yqzJdCRGSe+4JwEMezjJLUpIR+9pa9Sr1rbEjR85UVCRDEiQT1TP3nvtsa/Mx+BNlIGikq8sOBFlTsMty8EOEsP1vNKSQoh4kr1/6V0WVAlaFrRJvfSZR+Aj+GYsjwE9Dj9UAWTjcHQ4PhsMY1xD7bivvOeeaGuNiyEuUZWURGyY/mfyE/4rsyQjBNpZE0mqHW/LXXuAF23ZrqGmjrZPOHnoGRwdHBcLqwA6OunQW6eVslounjiS1kMdnV4VdgqduQ7OxquYqT2nUSXQiOU0DEwMPJx5OM6ZTiOizqNHB1dt1JepCCgJiSv9KU7KLioqqq6vl9ff29ioDXFVVpT3+2L8i6mGNxQKVV+wvZlTp9Pkud/t6+oZ7xvqYBlTwYjbXU1RBhb6V/yjxe+LgT3L0L/x+k0x82LHDrltJVZX6jYIs7t+XiIVHR8MmPpgzXSs1m4wy+2dUVuondvkBeRZDcMYKgNl6pP6TkevP2+c+Cy6ZvdIV6aId/PH7mikJgER1drYFimktxoQCC11yHTw6Usz34SUeqk4jTbquhmqnHUgJ1Hp9phx+cqmT+8Ib8A4JgI8Ljv0YL63Sia0AeBowOSnr3TI59IIJMaen5REaLzQnh9JSBbcmOdfQIDGI4VLsdawwkuKcz+OfoZSotEPV4uVeeocYGmMsHCEAtqHLS5WHXkqpBEMfeDLC0GSMZnDRb1/kRSmHfc9BN92DDI4zPs20TqFOruNbhVCYv5vd8WUr6zTuLyWwSeD6+vq9foO6kyyGHPtFrFCJxBGqNI0U2xEhece24HIhLYOUUWYXQlBVxHCFaXDS308y4OSKzA1+8UW2bxdbm9xRdzeDg4yN2QEiEzmGQnak1SSUysrUvSJXH+2FM48LQKO3/ryoP+MSb16GSWzKSq6G/8UhpEm6GAUo1r+7DMVQQrNNCfibTZ7sfcl/X/zvbL+QfmeSmUuuuoMcKZaDRh8n94X/xh+AB98mBiT2gv/bon/34mqe2Hb7KasBU1M9h6b6qqZGRowAzMzgOEYAsrIM6VdWmoazlJfY6P864kdSTNM6HZYPB0caIJtgoo++YYbFUJ4AJJNsG7pIvIACfKJ53u7ioZJK2QgjVmZ0Ok8AdHzrSRE35PKnp6fX1taOj49v3rx5+/btehg05kaevRJ3N4ssBZeKbB7wwD5/ZV8XLAFQwfPIEzc5OLFdYVr0K3wbvhnxZcbKtlQxu2xykp4ehoYMeU9NiXaNAKSkGAHIzqagYNE38d2fjwN+z6MqlXSZH78MsjYsrEyyLBw7Znw51wWG4DKUQLEx18FZQktJ8SmREgA7rBQbTvo/uQ8UhyGEHyTggv0f4KWEnDgFymT7ptg3NTFhBGBiQgJg6D4UUlCKX3rgpP/riB9Jyx/XcYgP8vTlg8uIE90RArAA9hWJrCYKvwTLxhEfu+Kq3rhXLPkmj2Kjdvn7SYo+rd48YdkycRfO4CGEcJvQJZBdJk5ETuS/7gkA7MdDNMIMLVJ/LiuOkP+9sWNdXXAoyq6E1dSULC1Nhn/4KkICBMCHBjisHzTPj/+MEA0BAtwhAg/h8rxNsrKwA0GexZ5WC/AUY8oaTwmSWICwE37oPmQR5LF+cGPe979KgAB+cWne2llxDDyqAQQa8HXE9NMtABo+/piP+53+9d4Qm+YtQAD/eMYYf5UY4LJyyITfaiwGrMPTu+v8gr9hjP+QmLO+Zox/t77umH8BaKX1Ez65xCUceMg83k3szfeBN419dfC6Mf49FuuutjfCr5P5y4X9Rtk6LUckAgQIkMTzRMK+HP8aM/eBH8WC55/nq4YAAQIECATgJAuww9hXHAECBAgQCEBjwP5fTwQIECAQgEIeRSFfAwQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fE0QIECAAAGCCCBAgAABAmxwwL+9CP8Cenkczhrb47gOfwdOrNyRnZWwZ+DvQktMa8CdhN8G3yGR8FHyDfC6KRUXWZ9wlml74C/DVVYUw/Dv4UfAgZ3w5+AyfjAL/xveBAeK4Q/CR8SJhHVFZ40sOn4Rvg2pkAW/A74Hq3oTnAUWRAAJQ5UxKiGN9YJ0qJq3SHTzNOPgvB1gfcJleUgyxsaoHTpAAB9wWEsEApAKlZZt15Mm2UsK8Qh+BT6DMZ5CVEcIwFcFSdae6p4dIECQA6iytv6CEhYIgOxX4QtixzRcIrHIiWD/bNYz3PgFIAgFnnYE7n/sawLfvUtnJwMDTE7OL3D8IhRg0UjsePCAnh4GBzFrA4fNwe06fxkZ5ORQWEhx8XIHyz0UQyXfqWS0BO4nJVFezqFDJB7nztHRsWVmxggAWUW8jodGhFR4B9qhzWzZEykS34fXTj1arkz4BkLjp3AMA27BF3AV9rM0bt682dnZqcUstaJ9SkqKlrQsLS3Vcmb4QB99t7k9zTR47J/O1gYi8CyxYGBg4MGDB9pqfc3JyUmtsO84ji5Pa65lZWXl5+eXlJSkpqYSK9xovfLhQ9ra6O5mZITpaTW/jZmZSYWFSWVl5OX56OXuo60vGoYXDDnvhPqIhhDlALPw8zyKYniOaGhkRTDOeAcdPfQMMxwmPMdcCikZZOSRV0ppAQWsHFTrugNigqEhwwGCt4JuZSWx4tSiKYBJIpFFRGdsXKk74BA/1P7b29vVI9RP1R1c11Vf0LKDBQUF5eXl+pAoAdA9uXCBq1dpb6evj/FxXBdeiLfNSUhu3aK1lXv3zJ2XtEgAtNMKgPq5BCA31y70SlUVO3aoUcRw36vMj9+u4vz9lBTsgr0J1oDPPuOHP6S5uWp6upJDlXxzYdX9GFTCF/Ar0D6vAbshv8Xs5bVGODlftEz7G97CfEflfUos9dvtn+EJkNT2nD9//urVq2pbotqpqSm1Kq1mrBXtd+/effDgQTWvJ7UFht7n/c/5fJLJL6k/jYOv0mAJ//+n7jzAokizd38KUERUGhHMNJKlQR1QEAzj5GfdnHdvjk+8Oeecc8453/vf8E8zOzlgwKwgTZLUKCCSJEuy7s86Q03ZQFNd3Yzs2e9hR+jqrq4633ve857zfeU9AHR2dnZ0dPT09PT39w8NDY2Pj4cFAEIUj10jSvEMTgIVwUDiZc3N0tCAK0pfn4yN8aRJ3C9px46kvWVJB78vB0SHpLndv19vlYsYUGAFAIkUAFZGoD0R5hteEbuxEWSDNLRKa7d0szO8PlHVFFOfKgr081Q2nupaKqW7JA43orVVgkHp6IBhwgPBAA0Awk0G/QsLecI/JDA+AQCDac3a6O+8kvxjo9wBvLK5paWFedHX18c8nZmZefr0aXJyMkxoz549zNbCwkIeSM7UWOcAACeqrZXLl3l+NpPkwMCsb8onZobEaC0t3HPuPFOf3EL6+3cNDe3YOr5ly5OEhKeLiwmzsymTMztGMjIWuPPQdp70zXOUAwE5fNhDAGD4+QI7fmNmcZF/8T4aS74EI17i2nx46i9+kTPxdT0ZWWZfEcm2RpCxFAO6nzwJBIOBxgDPSV76VtvkV37guDnBYDC7qVoDAEKeVEkkA1tra2svX758584dkgC8B0KNb4G2oCo5weTk5Llz5yLA6025eUNufCQf9R0akYo3pOK0VKyg/f9TcWnQ7oGGhgYCEufT3d2Nuw8ODo6NjXFWdgBITU1NT0/fvXs3xCc3N7eoqCgQCBw7diyJlC7GJACvvnRJrl+H3+CHwE/ynJFIAEivStx/LOlAEtAvB4Wf8jvFfSoABBhrxIACRjSwZSPQbuLLum6uDd+/Ile40UEJkur1Su+IjCxsXkhgZj55mkb+Krt52mixFPdJX6VUEgkkBuPaX73KfQASuAMyPMzDuzeJyNbN83A/5j2TdXBQamokNzcuAcCOATu4kvG8A/ZNMGIl/nV1dbC0u3fvMinu37/PtJ2amiIDYLYyEfbt28csgK6RHFRVVREP1jMAcGe4P599tvVKQ7VUl0gJMZ/nU/NgcbiAeDDSbe45b3v3LmFud+e9nJyh/YWSeYpH5gPLPD1ZiHVPnkxNTEwND/c/fNjY82lGV1M+MEqugC9IZaVEowOAnn7xP0Pe8f3N5Jk6CCRfjunHhUL+iYN6GjyVfsXHwZ+CzC8NAP1TYkBjYyj4i1AwFDACRaap4o96GYGs6a4RDL7Z9DA7mOEfLCwkXQgwJIKRyN26cuXKZ599hj+dPXsWHkEM4HH2ZAP8CdgFcEkt33zzzRXVzFtyC1x4NnwdEH+gn0GiHgP1a71+/frt27fxdf6bDEBEoDl4OXx/06ZNeMLs7CyKUIdlTICCggL+48GDB8QJvH8nOaLnGMDH4YoXLsjFi5BP+GyOnPCJL3ExMXEocfPQ5qT6JGa7HAgLAK5SAXP9deD1QH+YPk+CuiAXrspVHgeSsDMBZlCxt2Lbtm0EAIgCYNTV1fWb3b8ZkhCBAWkINPD89GkwgPjLHQBjeoeShVl59IBY4sbU48edXV2dHzSTmIEZhoEigB7s8rEp62/e0D9N1jKc8eKFCxeYp0xJIJ6s9/DhwxB/rj/TFsIEeyM/YAogDZHBv/zyy0yWdQkAoC1zlLvEPDkhp8/JuSqpOiAHuOV7ZA/AKlEa8Z1kAkkETdxXX1+a11/8dYI8FJ9bC5IQAMi/QTcepQ+9hbGSG6ASDbe1DTd+GLqPUkSKCKc+fVpwB9cG7Opo7r6tcPwlBwBGjlRYiUgkRVOhxq9jcBB6/04wSABgsvEWX8B7p7wThLOSRDU2JWcX+/1fyc4ObNnCn/Miyiz4TX19PV711ltv4Tfw6O3btwOvfBDY+v777+NbBw4cYM5DMZY/Iwjo1yHgvg5e5tGQxBrxdRz9xo0bnICQAGVnHzp0CIKDJAXiEABgPYAOihDKFVQI6CdUEK6YBiqMnj59Gs3KcxqK+IMrgv5n5MxJOQmrhd8kSVKCJODhsF0ZEGHcjK725wwDxi8P+mOAPvreJblEGMANKisrcRJVnAEg0jKcp62tDWyCpRItgIIdsoOcYKtErUUgLdfXC5efGDDwJE1ePy0vvYRHKaVg8nODkIGCFy5ACgkKe/fKq6+uhvgcwvDpzw3aZZAqsLzIBh9iRmgMIBMlHQf9mRdQIv7JVCVF5vrDmbj++D+MLSUlBcZGohz/AIA0z9wAvHYtphdK4TE59oq8wvQQbwZ2K9uqq8t/dK3i7ALSXkmJoO2DzWhZy66ksbAA6Yf6kyrIvn0Pr1//qAEywG/xCHzBtQLAZFbw3fvwTj9wCiITWHCo9TbYi/Vx+wYSNQIxVWQtK1Y5qDuYbQaDBxuDp0c0BgSMHsM4b9QZ7e/A/Y2mpoL0YMlbhVkB/0wguzVQcTTy5YAywN1IKiHRpaWlJ0+eREsRy+AXo6Oj+ld+ArUEgDBZwEb/0fJDXwQAr8YHoUTh5ZcuXQLQOYGXXnqJrBbQAW7AdCKTHQDAenCHl5ElEACQjEhiSFwWFxeZFa+++irRIuokAHzp7sa3GIgYfBn4DYKGd1E7ciqw4aFfy/vN0oz6j8pHvb2mpgaWQFmIm4IKJyJccHyD688/4Z7IFOmSTkE4T/IAB4m68IMbCKGf6ru8dlzOnJFTp4Qqnc+n4iAlYOY4pcG7d+5kZwveWlYmVrjfYcO9/kfYPzci+m+x0L9GIhgaLPwMPnSVhEi4HmdOnTrFvNCiF65Ojs4sYAowX5gChAFuBEkwKtBx6prxDwBjY4RpaDu3mYnBnfaO/tTWrlyB/hMAApNXa15ByAFAuKPc4tUuoMmflLpnZxsZGQSJOaP2Yn1dIpkCoCVVVeLaVH5h9NsqEAHgy9J/NPzw0/V6sc4TJxr9/qA1JOjvv3U21P+X+jMzz2292PXhxe2Tt1871oM6GggEA4HsgC/bxzeMjF1oJvBoGER1dTUg6+z5ISTAMpjzgDKvIc1fLv3r6MhZjBn9cahh9XI+DofGfcGaEydOHDlypLiYfMaPry8rRY2TwRCWeDFsFIoEV6IGoA1C4FS08o85NGTQewYPQOSXg0BYmVlmo39cY0A4QBgb9Qm89Pzgr+3SToWfG0GVBVc57MiVuS8U4bngpAKU64nibeNtyMI90uMhAEAvoXfMD2ailnrJ7MU2KgAnT9IbwivkGSlJ7+/3DQ6mZ2auiPvOX255YehvrI6vNToiZ6QtpMLgO0AP9KNwotMyNezpwJVnnhIMIP7IQcxTAobdGUGjRLwDwPw8wM1IkjQaABji1ZCfSfaQ+ooeX0VLIthT1Tl0yKUjg1AmJC8hwZidfTr2/vXuWz40I5ICxKNoVaA73XdmFJePHVvXUrA2FzJSux849R8XtqDF4Kyst/mWfj+jhdH36wPTTxaebBrxf/X/+n/f+UBJIJAbQJET7E9bWcM5Wc2YsXgMKSSUAXKNr4SBLL7F7/krr6EUDL+2Gwxuy+3PA0DavS+kf8R3r4aLozXBH6n6cibKNMEayCY6g6xkgD54hDxFLky2CxUlBSYGaHHYdQ+rFmh/oHfHnJw00BlF0P13mjtJEx3z+KvWy2j1SIlXDFghw91I6I8NyzBNn/3Sj6qgsKLoH2Zcc03UYAyt460DMkDqMC7jaEHisMj5DzIv1x56yZD9VrPf8rmMFoT3M2u/970Jn28qMX16ekX0T97o60sU+k8xInVDoHASU1F4uLDa5oAEt5wMcVPgQ7we8sQkIi0mlYcelZeXxzkAgLg69BHBDPFmPT2ofcSAPW03Kt+Q6moivbb3msvlU9jHpExqmzkhJ1VSt2zeIt+Vvf9LTpwwR0eNhw8n79+9u0hOiEyB07guBX9Ow5/kNGsZYJ1LwfoRDP+sJh9a/nV3O65/Xd75OgvDHlx9cM8M3ssO3ssP9gz2VL5X/WQurfGdb83l7kkOFSQHJDlgZGa+LH/3vNVJVCarGIi5YBn+lGSZPG/oLfp7fRmvF81hjG6b/ps296du49VQoihFwHRQEkQEr8XLiQFucli4D3kxp0eIgv4wW4glIBGVA9cBAAPWfwUhEX5jzs8niLHJ3MSt2SSbvMOy2xgQIRK8eEPTp/ef2bctdZuyBFnFiAGEZFXeOIQDmbZ2AHATBvAvBjdBnY9B9V+WG4rQkyfcqbn09GfDp4i/WTaGmW5Wfp1aGjWRThxtDUBHgBUR/DkvL48kjIYIWckQS9vb20mImUQcwoE0UMQ/AECQGSgv3F0dnptaKflB/I4cmabMw0wPR39DpmRKe86gIRMyYQcAeo12Ze06mHUwtzY39+yWQMDs6jLa2tpbkA8RcJGQ4A5RqkDNodtfRi/QUpjJkeN8NEPcW0Aehx4He56VgIMI/v7g5pJgxZF/Har+Sdr75w//mZ82/u7Gnh4qAyjjhwKWpaSUyuoGs060zI4E8rwp6GMaBpR3QOts9B95yR8m/nirc0Jz8F1oC/o+Hkw1AqbjXsEEmHB0rQnDevgJY+INmQZMm5WE1edOtW8liDZ6DX1huO38IgHYL25tclIXNGk/Ow1rRnq6SbKa4plFRng1H4OQtbR+jc4INHKG12Bl6PB2rOvzNpyYz+dR5yFFJSeT5Qbiv/66ICFbA1DY+EZKhGwialVK/yWtRnZoRi0rc1YkNeRZ6BGzj0wXqYcMLMIs4AW8jESNNJqjOJY6meeW0KQVUzU+h9ybn1PSDy8Alz0S4bY2uokKEjoQrUFsfoah/1252yRNbdKGmDgog+AOVxCXIgBAK3Zn7vZn+r+dlVcsufn5eUxz0LQlFCJoUjchAHgpBWsAoEjL1FwH0+I5Y/+jTW7Lv04BaKsESx8Ge64GQ7Wjhcj87SUl5u7Ar3T+67kn21/5+mxGdnd20PDXhogBmaHp0tCuQCDHKJZVDT0HeQfKhrYDfSaFBH9REp0iO79HJlIhiNc7pf92//wX6G8dZXrCLz4CqoLLgt0iAs1hPcvhKMMwfk/OSwghfpAEKAMiEhAA1uzpvqQxQAyRK87X3BfGMvT/vtj2R9xpfvCc9nayHF0yrySK1cRGdrZZXCxHJX7GB+jqKcoYhAENAExYIIDMOBBAWI92VTSdPCTcrPWdmp7iTiEGyiqGSM1f8RYR4fUcCFWMKoLhe2A7Gg+1PZI5YibTmTJAhG1OGHPisP9o3aAdsqGM7imq6MqVBabE8oUaefmUtraq/bEVr6eW6JiGdMGhagLlSv9XM2QiXkMDKLOJAzmcy+g9AKyYqnHWDOThcWkFlBkeAwB5Db0WRVR64NzPIcYT40md1AExXLUWaenKGRwCkSnwJm27PD//s8eP/8Hwx29l7a7IOpSZmQdi7N2by9/5mtuu9U3SJwD9wTyXgjk33m49uz/5xKjKvx2gv47iYoJcoKenem8T05l2qZu5It9AmuaEzfNaGkj0Nx2a/kUg0JOT0yPCCKzOVdFPcBd8C6YAZYCJ27KJUmllEJg2VtIReNOwAsCOVlv6Z76a4t34CJgO3Q40+CMjoN5Q8oXLSJQG1nMghxMAlP7wtiQxsKdIAcAZA2yrlvsEgLA0Pl0rBe4DAKCv61so5XHbATVIrYZe4XLm5xvd3Y+HMqSa38QuOrQRnN8TNDQ+DNykv479E/juTBw6Z2iXgX/QIkHMwVwrUOzxkCVZ+2Rf/XQ9EjMXlsjKdV7WzzFHFOdWgjs7ZSfMhqSDMBAlIzD37OFkCY0ydGsIfBC+C58FQ1zJ5nTYJ/yWhf7GxtJ/gDI6aGullhUSRPsTFvTT2UScwyIEAPrcaMNjxa/KazT20Am9phzKy3ixdlVwLO8QHwnIJgf4kw74OI2ABACEGjhCVPs94Iv46O4pPIl5yy13UF1jQVedsPLw1q5bQ8hDh6sFsrRzJ/nhr8/OPhqt3TbcmPlgIDNzICMDVCQG5LJMlb/7UkcnuV58Z9QMXN9DKVg1ekgHczTu5V/rzVO7e9F/XJZ/BwB9xyBfOI+y87inpCQUCISoxdw0ZGmWQfZNf5rfH/DnBJpJEOzFw4zfvzpx1m4BBBN68PEw6AZ8n5+I8vwGMIVZK7bSdWrT/6dL3N8kYMRmeKoyHREhGhFsIDISvZH5cqwuFmM7I6U/vDnhTcLs8nMyBRUtqkHJ8sp01R+ePjXNZjfm5Yq5r3XIw78j8nfkxnFR+2rU7b50OOuaYpbNzDxNFrxs7y4EIJY1dkxOttUOwHGnquWpyMsxathBglgzPXUU1ZhfTE/YIAGAi0sCQlSAb+m8QGFhyrlFMkPohmJJFw3frPlQJ+EKQ9WdERpvofsQ6ZkMDNAB33Ill50holeyuEKkgGZhIeBvjHHmUDFQDxWLc47QZrNR9+Jj/cRluUwAYBwIjCn019S4EuQ038JEhDSdWUlThkS0HZbxSr0p2rsRtxrAbatb4m9zMzQGbN48MTdBAEAFii4AsJQMnv6MWi5yfy30N+1bSLsx0E8MuLi/de7Uq0Jn6JEjoAzXbHTT/ODszwZHBjPOTWZ9V1cATgisVBo5KZqSGeAsi8IYXIyoS8GzVilYB+x6nVb/zrkt/15zQL8pUinCOQUOHAicZ60WqP5z3RsIW/q/QMrj4PG/eZwY4GcnH+vA+ogBAOhHbIHpM2/pv6S/nrYz+j0QhSB0zGpmO3I8QScjJ+MD+UDp//Cxg6Loz8+Ybcwy+I6IUGOEvyjTidZAJaU/vAnozxvqO2sAiGCH5TDlpcfm4+mr09P/r29afuXvyPdJm8/8QW358QIrYC8NbnV1wp4poD/4xYImGtdIVBGACABM0JHe3k9bvv/00g8Sk4Ra81nPG/C2WyGNTwIxAwGcC8YIWyISkA3TV09UgEqjCIH+/InYQBBySWih8/R0UocbM8bqOuvo0+U6E1khBPZCMDIt3IYuXtaC0fqJZ9A+ywI6idqYtegBTJSnrG2qre2Q63+YWQ3UoGXBAiNXWTdWDDCETjnQX8fe4jGFfoZLejNjGTNR8MElk4jG7dCXsYSTA9XiXATOx9+IMBbiTs0Bt89GtIu/ECvhJhl7yVnA8eeajuulHoi5uv36XNUbdIbSG2TSmqmBQ9oeJT8aTBvMOhFW1lrAQ7SCpC2q+LonFYgAcGtdA4CWf13qP+9YCP5QRHFef+I8sp3/DMlfsfXoEoazVpxZSg+Q+HWs9RAryqeQBeQXujA//vhj6APeQyTAddDiWXLC6jBew01R9L+XPSsVZwX0p0hLDhKz8UEIx0pVtCahFMaDcSCH8yYEAN4TczMBAmaAln94zIx0Tsv/mxZoPy20nc9igPclzfS4ccmW0P/cORrYkTLIuZg7NLuQ4dO6MHbw4K/UvfMrn17/K7GUgq8wpkiphe06mCzwZ+YGkwG9iVQb+s8nfvwxpJrfA6OEfUiVuDYAnWofp0LzRfNo83sn3qPEgiptbwXB1UYwHPrNoZo9NUeMI2wNcEJOeG4QTz3SWtrfMjTUPjrKGu82vghuRngHDVZr8FuQBZPzM0THJlnRNn2Z+k+jNIL7Sv/T84cV+okBLlsUVVWbtUzIDi2LXADA7Fdi3BfeAVMVNJ57AcEj+BwGWAt1YkTntiQ1DKSGQq0miG2UfFl2SPm3sqzsW+Xl36qqylb01wBA7mAM0pVcmknYYIQRQIZ9AtFlnloKZuwduNOvZQAtBa9b+ZfTdxMAitB8lqA/37l7SNOPVY9ettlPkwRKmHr2c2YYkUMNBJmOe0ATCcXeDRRXQ09E+YH704nfk97zufizvRnp31yS/kVEsZvqMbxDU9RoDbmGT+Sn033FkzkPZ+bwnpibWUsWyAD0nTUFwTE89fwDvNBubXPjjeH+oD8xAGi2PxPuAxCr93MR5YP3xbP99gE51SosfKOTmozZmT/Rmwvl5yJQf/jgAzovCAP4YVQBAInsZXl5W8e2PR17Cu4X9Pyenv/15/8X9xqf0QCA0Py1P/u1Uz87lbsvt+RQyUtFL2WmeGk6IswgANxJuhM8Hmwba6v678H5U8Utl4Kic1tjABH0eaNVhGIhHaTK/b+9agD4rfJlGZVLcF8DQErOgEI/g5nv3uwePF1tZ7fhRTZ9GeZ8h3gHAM7JNBls+oFzMKLq/GBqkpySOjI1UlKIJnqYjBqjqMyd0jmSPnKm8Iyf/S6cDQCGAP3EgNHtg0A/VMaJNni4DoEv6IjS7HW5ui0EgwAQ9+5PO9UQF/amzf2X34ySZf9lW8FzCXGprP1hSOfnz59n6S8lPvt5AMgpugUQXVg2/V9ckv5RM1CEKRpT90NqJADQI0ShWHeQ3uT6+j+1jMPtHFZNPJkeq41MvKe+ebQrdgxHt763ttaeHu42VXRIDjcgn7orgOtAf4dVFslkg4yKjKCFiUcL7JYT5SylAR+Xb4dF2gH/APpJBZBeKUxDbqBSTCH35asENv5qaPC3tnaGQjQGfLJ3LzIdd5yrTaAl8frWz+5l75nwHxjLy5+QrinySoq3UT0UhRopoMl+c9r9kXUs6/T583I42fzjZut3Gp0xwNi/33webd+Rd9CiwaHvWKmCvIgAYJ8Sq6YvG58rP3LggUI/MSDaYpm5ZCpvqrkRQtXC3iF+AaC/H3/Cgchh90g5TQI+0yfRGPGDkchIFIZt4Dv7jLOdLNklvRzsAQajc65IBP15TVbWDK4bRv/RD1T8FxRD6rcMzJMKVN9dP60BgPDDu8VunJyu/g31sbWk+/4fuH9JPDYx2eYOOossExHdTscmZTb6Dx3dr7o/FeDLFy8i+KL8EjPQ2XEy+CCBRKMIC9Zd7s4fhviLSyaeTI8F9O135otEpa0YEeb319xvZy1gLLNE6+xAIUx81Y+tgPtQW9PI7cmO8yb8TAP9V6v1IzyT63FmpAKor2iwLgMA6Yzu/Y4LkNH4ExJICr9dVUVxyM4AyBrfffCACvCdW7eIdiYQQeg7exbty/1yM7plaP2g+Hct8dri6dO9lZUdZE6BObPYFBH2e3LGAJuczZgzU8YU3Si/Lr/+HVQJa7zA5h/muco+/Jzd2312SfeHA0RrSmWcbMYNlOvLMOc7eA4AvxK2K6DcE2p26JqJLS3lc0dLTehNPmpGtNU6hpmQwEk6+Rl3kUXgAP3BnQeBj7DandJ/hqJ/mPfyB7x6dMJqIdYKWJSmpWAGa3Sb7X7QkpJ4qv9zOfoRLuXRGnkx5gRNG/3bDs6w0T/oz5q9Omv7aPZdYNcR7U7jEPptWINOCAEOQOHXXnst1V34TF6y2SUDU7w924gDbdmUSgbvSSrjHf01CYjatMIl+CQnoWWuSGibBnzH4/n7Ebq9mRQ+n6bMzF8EWEiJyy1Muf80F7H3OxXt4vx8tqOhIERxiGAP8dcisG4H/awsfOUKz5YwqOcTwiFhfHfKOS4uIvVSbZghDMjJU7oHXB5y1s5RU6z/GWYbGYwjBmgtFcRgAB18mnaC4Lxfvn0kanMDoL/xDP1HM26cq0lT9C8t9fJkSHQbXYqvYo6aG+FITd9BLU4BQDuB6qequ7r2/OPiouwiSj0vyUsSpalEs7Bpk9ZriQHK/9hGHCLAYN4iKIc916b3am9/VT8L6o4sLRVxCuwMaMeEMh2vCx/s9vzm7puq2BAA4rn9Qxj93/DWYDR8Lv1vC9rSf6fV88f+tHQNsQfD0aNH6drUAEDnKFGBvTxVDmInH3FhduEX4NbWN4rS3nYz51i79Y33xFwGIcxYc9uG3xT5b66anLXIRRiSXds4DyGYRZZID0lM9ofWgFjNidFb9fx0uLoCtKk2NenzP3b5fOzNp7tRhu2xQTxgiwJ4gPZ0QQv41kxDMgB90J4R8euT9wclqN0fQqoE8a+qAuLxjDzZKXqsdXQb7+yIAXwEgAApZN8hPpxGcJDhhdj/UwATOgimWSuzWPCdc0feq64u51JRxPS234dWfeExWhDGlNlENl6jLwb3ORxjbnoOAIOyzHa2TX83UJj1s8yc/J1l/T7f6e3RVvt1JwmGtmsi3cAS7I5sfurOBM7yHbWBdl9799/s7vvzfZVb9A2cG+bpcyQTpSQXDHcW2j2Wgh8trQomsNCmGoMhuWoysX9ws7P8u/HtvnHf7vpfWJL+mevt778P0NP0TXsoWAAiAAd4GwuvSNq4a2+//bZuxEYxwE1Z2GcZ7ZsQSbIHAgn/weESpeH6HGgvftF+UE7AO/ovjwG/A9FhzeYNLXKJTmISHIbnz459eyElkzqUIqoG69J7cV0q2nwrvaHQ/xVvDYkg2zfRDkQqwKPc5ltbaeekMcnNk1aZaez4gpRPXEIp50BKJrb6SoMW9N8OA/eIRgZmmFYM6N3d22/2PzQe5u6xE60XYD+VBX5oP9JY0tgf2pFc5hs45puoyOCa53jb72Prktmdctia/RS8EmMuaJVeD/ccAL6//OEk35bxhl9rvrD7g86yTvg6SS5JTrTNegxokb3zH/+yF53zNyYwnkRzuq4+vT90/3rf9YbdDQNpA3/23LmG+U+ZY0wwEgncGHxCeKTd4t7WUpQ2ipPiUJ+9l4KXdJtYA4C+ibP8u+FNd2Gy0X/wyF5t+uQn/A6JnyUC+CJ7NoAINs0HcFFg6CNiTzdWonP7CAlu8NdejcyiM9aa6v4nWoeIdkc5jqUorRVp3hP/WbMUYUSLrylrirCi2qZz50SJ0WKPAZwTA7MZtDsxCyWLPEA7BWgK4KbLKkYMQAUiHeSycwe13sD0JsJLRCMDIIen1wBMEMR9GlUZDkNntpMA7N7t2/oVeBRG15n+UFZoNGGY5J+ZytEvxJLkB99RCJb5toW2f3az9v7Y2AEQSpU3T4nJdst0Bo1bxuxzs6SGV+pWvjssiyUA/CAM/fk3Wny6pD8eeGyMf8A5QrdNdJJodp3mcuAszPuhXl0TZvAeglBpZmQZzxad3+m6A4gAKExpJvPDRw/v9t29+qevHk87Xu579IFFqalLkWVC9ZqbrYeJtefKuQrKtmF6W6ylYOgPKRxkJMbyb7ej/LthzVhhr//WA1NSUaP0HwpJjxAUm/BMvg/C7nt+wlG6100jgHKIvMtl6EAG7wO4oPsRV4guNJXTYqQVaffGUQQeDtczIQvhbb2jv9d6gAK+Bi8YCqGAEe0OPHHeg1hXxjAwe8mMC9MMHTfWhzCDJpEZJS+wZTftyoAjRgYHJF8aeOCByAGybR9vsSJcEgM0AOjPe5A+w2gxjHvG044z7F/CXkcm8xZAekH2/STIsfV1PjM/mzamD7bf4IubwDfn9NprK5YmjIi3Trd/wEREM2PmnUQ0XsDLMBFhhuq6yFgCgJM98Q/9uYtGHWA6Y2brMJMN/Obz+Kri1kjVaEiAUfTfSOnrmyHLpGeMOcOic1aQs4Cwd6yXh3sQyoAYitrDI8NdfV1Vf7mqMquyfN+tu3dyttdCMBGCUFpBV6kfKR07e5w2OPJNz1vSh5eC5/zNdj9oIBDr3p/zzvLvi4f4yMY6jM8DQOpde8Mfsmvn6kQt0oQ9dcveM05XYPFKl837MEfd7VY3n9A93UBw90/14hCUBzYB1QDA4bwh2xV4vQzeYwAAqyNcD4pg9SJH1w39nVgs0bXJaS7DMJKStKXEbQ+iHquHRzTUKGQTRqTsxBSsgP+J2GHAMG7+E8NoNtJ7ftj5la88IvMnOYk1fHu3VxQxq2WUSEYNiKjWduOGQTzT3TNZCBKlMZU0MyaLBdl1yyzYfQRSr/tfkUZrxsaxsLH4PxRe90ln4NzKLCJHs+Ucib40SNr4Pn93dwsLU1DwaZKGObGCfMgYwuOa+5oB/fYt7alm6r7ZfW/JWywxr86vzi2bnx0b+6R5562PR5INYzotbRLFn2ZquD89A3iBw8zYVCBKwbEHAI0BlH9/WfSfB/LApv/z9oY/kHFH274uLUmwbMWeTu3FxMSdIStrIREWjwezoT/uC3mhwOCmh4GN5NiHgNoj8UNrkmQPvKdmAPEzV26OJgrGErk4cZ5RoBXhSCh0n4RLYrV+MqmISo6KrZp/qy7hLjjzfRizU8+M6jricoT1qLp3rAZ+LX6s2ZVJaQIkIWLaCQeXa7VrRQz4PAB0mfJfpel33mgy9h858kdLSy+WlJzZv39XnKK9d3KAOsIzRLnlOvqvX9cAwPDQUaKZMeksxS19NgAThNqbrGTspmVLr0QODtQnacc/AAD5OogCWlyKaopggCEkjXl/71ZLayuh22C3NzyNbafQfNKN9CIpGpXRxSeLcBWqpvyeDUkO5B6Q0wvMLbR+hC6YAhcXBUG3ujVJLOJhbGSoYL3vUX1fLKVgkhTrcMq/GlQ2fvkX8mKj/6Oy3WI1ffLT+YgYDM4+bxnNBmGL19W0/9L9cjA4DuUE/BvfpbmIdlJoDu9ALwBVx8hOTMbAU8D0WWBEAqRPniLJEwV0Q+n1sciNLaArGEsuypycpSGU/1t14dWEhf43iFq8WQxdQLzJG6s/BUub5DgNjOSbM3GHC6pfc3vAZXilPkGaOC0rGeRUNwSFrsIF+P5uIg3hhZ3FfOKj+DeBZsh5hkLUc+CIK8aAQv7XLmadKRflo2Kzt69j/1uXZo8aw2XGsJxhWVKM0B97DKCCUWlWThjPAsBHEx9NEgNAfx0Q32hMHwBAOoskzqJLElz6L4gHK84I2A95MNqp7qmuGziuwzOB24XFQRQJAQvtLWNIlEZ+Ak8Dx/s6O4PBJi4LOwzW1Jgiggp00Dz4wHhADkUqgH/ohrT2w4BIHUh1IBsEAIKBGdmbvSYBCtl9SxoOAcBz9ydv9ctC/230b9k/IRVvKP136sVoMkAz3TUwEa0HhEmQ6P4AAeKj1qDEtYHaYAdvSB8nGQC9pKQRMEpwBzrPTNBNKJ0t/+QKnAZTgl2Mrl27xgQgZtCLwt4VNKeiIMkLMtU4YSZArjbSkOQCu+FxA8J75Zpc75KbY9IWw0KwW1RgIZ+rPFywrY0gSZMctwdEEa2WutTW+A68GBwJhQAg1v3BK5EmwKDlGzqRhIFTxGNuDQjEPOVwN+uy9speHmLKBEF7RMujeZQryIH8DGOTBBnaUgtpBgVV6669XzXzgwu5/+8/XTP+lGH4cA7jjJxh97oXvh9cQAKaAQBin/R9Is4YwHBtTDQSWfyfi4+Ta2bMtGJ7LmcMgCdx8TUJRgjlNQRplmRybLwDwN8WWrX4VgzKHdrPo84UtUHQQiG4yZ33B3btGuay8Jik8nJutJASHjJXbY2mriKMNTL0vZaqesz6+SPPCwLqQ45VwdF8Te6+ij+p3f1+qdz47f+6fdXnAWBrvS39MwmdLAxJEWGR1BK6TbKJX0I0gFqFAAgILB4ajgijj7AQ10a/M23mIL5mFfg6O9NRzoJUKu6QJRB+yCrIEYEYSkTEBv4KLQL6ORmAiYnBgySJAfo0sRdl+lxqfIilSybgSys9lwi2FAhoumzofhH8+erVgrq6vKPp8kdF/qLnuD0uvi6ehiEJSc4GSkV/lnHRyM85aMc+0Ox+SxqwGFlVGzofdnVx07lNKDxAEveXkg8hWTeDwxNAH/YKBaf4phA1QTbks1wYnA9er3uOjnC50tO5SswgzpZACr8E4QwIH+GUi9bWBtel889vmmdPs9I2+c+IlBdf1eqBxgB0GHkh5hCuWCOlOyUzbrTcsNGfgnCUMHlY55Q+7Z0pwDWHe5EW6AJMTbwIvXAgbhAcCI2orKyMlJpEPH4BwPhiva4O6toAsQ7xYNxaxKzBwenHj69e/TQ5ecZq5TaIAVGeNmcD0hpEItyVE7WhX3/GWgq2+0HxaQ+rfxec5d+Na8w9m/7P2crPsmQfRZ6cVFvClWvoQwVwRBy0wTJcEIAgCY2Wg9MOxMIC/BvHJYGot4yUlk/kT7g7EK8BACUavwd3ECXQPTVZZuNScJ+2VGKAvEgjIwX6AEBoN5HM2hgafRMIA7yYLIbBf5PFsoDl4O3bVYf+4EzVr0iVeLbUf7d36wc7t9bW8rZ8JOm1gqagqPBP+DIxABWorIyBEs3Jud+OALenDZQ5xhsSlbnyJGpkXSRkCkb8hjhNAOaX7A6yyOytrsZ5CEUuV+SQ4h+RIyzpAjHZRGGcrj5yI65PMIj6JLwhzVTUBhDTSKc6OhKbm8tmisrN8sqWypOSeNRqb73SecUZA9CUXmwMSDQTK40vigGtziTgxIloWibTcWwyYwgWrTFkxvoEPZIw8gPmHf8kFSbxYrJwL5QAIZwyQ2PtbQ1H/7AAYH8fzwat5p1mZgYWFmprL8/OTo2PE+YNzpzchaUeLjaWNjo7mVZMJWBIvvY1gMLGfYaqwDGWgm8ol/cWAKD/G1//IZmz0X+gNJPZq2M1SoL/Ab64IyQd5yMtoPALK0GQoRKFC+KyAU+Vc1RL0B9qCd8nfsDuec+gZfg6/UV2ALD3edZFZ+S8iEh8LmkEUUpesAGzkGboDcBFf+oD+fBDwItzJWPGswE4HD2vs6OqqqOm5jevVKVuzdk67bl1rXzLlpFDWz6+I2+/ja8BmsQb8JrJBe4zN/gp3A4aUYjrTLqoLDeXA4FgggqxpK21lTIA4ZYbRCeYbgbHrad4g/pHaGGa8CnEgKhgjg0FEJbpCIJ7sSS4E47PxOZyUUhAC+LTuWIjI0n9/bnzh4rkdTSWo3K0oriiQBZ1fQM/67rqnDEAZvpiYwBB6IuCsDnR54wB0bQ449t4Oy0VUCsVgki1ycDQggjA/IlJx8UnJED88X8mIJtxScyWtGIhhSitA0mEEWPnLY7C3YVoDGzZ8uGNm0NDffgqfUFweYpAJAmkg3yIrf2aJvECx4YNwEt0mS0KJ06e+MYbZd3dxxwBID0+peDB+j5V863ClNvyr3XI/qHkjVX+Pb6G9N8sqSCFov9q6i28D4qBUIMaoNDM/Mc7QW1SgTfffBP2gRSDO4onI6vgTYjkEH94jVaGSS/QfBAfKAzg9KQCYBAMCJWJD0WGQnSC8uS547ZrTb6t+pIYDK0MAMRXyZPxYUoAQ2MXL5JAoc/gzZmbZgoKZo9YRZa8k6l3A6mpRup8pBrApgh/SClJSZlISZk7LXBn+D5ArKAJ8hB/EKTYiRo+zgkx3ZhUURrH6pNk8H/QaJ5Hh6L5MFFnZ5mQlIj4UihFZHDMW16gnyVRhmEgmywZ9YZ6AAuDe6eRg0ZmpEMfA47WnCEH91p0ijUBPMOHdIYXS7HYAYAzvPx02pBLdgwAa11dyfj/jbkzRxQ4aBzUGABgfjT20awzBnC5XBtzCvQnLQb3cXUSX2YE3AsyBGFirjElEYUgZ+g/xADmZjwCgLEyW6T8SxFYtmy3K8DeDe85exb3IpBM79p1ubEx9DZ9QRPop4R/ZpHPp08EIkbQg0ifCZOK+AMbYAUCzAZV0Oicyp8rKio0SkOho8eOHU1JORz/UrAOJkA03Z8brvz7fVluQQla6J96U76pHTnAUmSYwOFeffVVNBkAF3TW7aABZeCY30BDQGSJwfB1Crm8lf1cYkQGNB/kZupdBADyAD6O+UDyQQZA3kAS4H7Xwx9EFFT07zEbJA+n1dYP+4HAnPwYhIYaJ27BM/0RQYdytrO25k1508Mppyz9YUfVjq1JlcwWtDD4BxSJqQIEM610Tx4+DMWVYOD9ywBYxFe+CeIM/Au5yQ4AiP6EB3xGnzbjNfZXSRUFYfZ+YP70Sz+Nq1QcNQBANvVRw6wW4gWsQ3LmpNp1ynfkfC6JGAxp0BhA5HB587/n0WlSIjsMtQ3QH8mEMzHvm3J9XnZc12JAVCtMaWxDdoMVkYEB/VB+uL8GACYCUw9K5L3w674LiCUbOrQBlNsf++aTgmhLroeH+f29bQW9XV07Pr6/ZyvawmJaGt4VFgDwPQIAOXTWwD5aFLLxSwhIN32EZWWhlPRiiY8p+tOBGuoOTSmmM4WWlYLTlnXDaQDY1j2z8QMAa/puytab8o2bIrP2Rh0u9tLA4eDp6Dykn/YDYfR5AArEsRsEv9wybS4izDgDAHIQfq+V4XjEQbWt+sd4mT4Ckp9kj3gs3TG4Mf5MkQCQpMaJY2dJyaQxSc4V7Smn2L81hMa5PRXlzCCQWnQ3ZuYoM4uLo08B4yRivC8qXrNTG6k3X4ZJyGzUAAALJPbwQbwmNqOHksHmbloSmLW8kgDAJjHwfTJpNCLBzHBdkgvNWWk2cFHE0CEDZ8QgeKx587/n0WlS3DgMBWF+UucwOe8gV5JhEgbIzKLrLrMMjk/7A2k304HMWyVTpp69f+L6BgD28GeA/eAxg0xT4mFkjjAlBEeyZdBzvLd3fGCgDaIxOA7k85Bvg++akLCgK1MAqcJ0OZWp/RZgLLwjdOBAt0hIJF4BgHUsLEeAlfjmfXPdczD6FUvB31+5+zN988I3WdXMO2yg8u/zvPwJ4o/sA/oZD8WL7bdM1tkyLZP4WZmHv3g1XJWF7gzEGBgzIAxa4sI2hrHS5ZysCQTfDJ+G/GrF9iMGsxLxRwMAHBOAjqPB+ZinjPU0UiKGRGWkIAw1RwxgnCGtW/1KYl8XzP0diHwTVsbMk3JSbLtOAFga5RKtxbTDT+wBgEQGBYsCy0Pdy406V7wMtoL4EAgg65BmwvAJ6bgyAYA1R8R26BPezOzhlTAOnET7lPXG94O91hiAn0p8jOXHzM9SKV0ILQjhpbtv7QBA8hqqku4qYiTpqq5f35h2c2k0/X/2zjOuqXTb/98tVQIiIFEIwtBU0BksyH/G+Yin934O8++99zf/3st9dc+r++b23u89vdw+fYQpeKyoY4NANIAh5BAgkFD2/V122CcaxBDAwjzfWbMNO/t5kuDH9XvWWjvPYtMxyBXLHgX6Z6LA+YONnaYBRY/rfVjpWZR7NSCrnM1jEwA1Y1eeTq7t2vDL9Pdz+TKlpdTVablBeTnrR/5dsbFMsUUkokhTAkC6AJSWpi9tBsEJAnazYeityAiBf8kCsJdUPkEKQ+D/BH4I84RzJUUAth4Gw+K9GvAJniTG79UA79MjADXUNNHUSmuQ4JWzZykqkptWlC4BoLGRj32MjUITao0vy5jBZQ04DPlsNP5ledn7kGtkTzgjKd5/FsOjx2bzMSzA6SdTAIQ/RQM+yxOIZWOzEnL9r/LqaU6f5ez1kusTjfXJL+996Ut0dbl7ntiPY0OOF+GL8CVo3vA9ofI09bKVsAJR+B58d+m48Ij8wzeWrAS64FMYDAbDZkYAoprqk5wspLCKqtbJ1tD5UIzY4qkEtv0kyKoTBDSz0cylLPCfXTVEWOCR0YXsUWEwGIwAiDrqlJ1ppDFAIEx4hhkbmyeAO8uJoBBUPuKY+7kl+59sZQwGgxEA4cFzhCPOd7hXEQCbrYXBYDAYAXAppljGVsFgMBgM2/jgYDAYDAYjAAaDwWDIxSZDDAaDwWAiAIPBYDAYAbAet63CJPwqfCq7eTIZ8+mlF5jkoSzA78NXV3659b6P1cf/BfwrqMrw6lvw09Cx2kUrzlMN/xpezuqtr8o34SXIgb8J3yYD3oP/CM9k/OqF8HfhBxgMRgAMW26PgOqkZUb5sqViZf0q62cxy9+WwWAwAmDwyTJ3zWVQDhWQv5kyk6m+2EkzGAybKgAG60l8YYt1sxOqwQeVWQQBmeFdfomdbCyLj14ADAbzRTD1Zb148eKdO3cANahUJ271ZmIjGGd8lFEdo0RnmZ1n3sLKI6+IolJKnW2oCylkjXzjgUWAP035qLkNNLTRth6nfP48AwPMz+PCp6AEhy4E75DOAvQuT23VUbeHPcCtW9y+rYYLJBLk51Nejnpt1dbauCwu6iKGh3UR8bjT/cNp/7T6FqrfIYXqS1TfxAchnDbWxzi2gx0P+IDlt26VLy6Ww0hNjfrLprTATmGe+Xd59y53wfH+OjbDIZb4chYi+IekYzNv851FXHLgK7h0YTAYNl4A3nrrre7u7ps3bwLqP6nOZB//+Mdz5H3WQT/9t7g1xNAww2HCEoAZZlwB8OCRY5IA+PCpvWIzzbvYtS4BSNOAfPJPcUrT6iXICgliby+vv87cXIr3536P9I3VdoZlG9vUOehD4c+fPZt/+bIlOQmHkwLg9dLczLFjdHQgGBriwgWuXSMQIBJhdjbZ/2/PHhobefZZXcoD+MP7e0i9S/UrnE92wZQWnuQkaYRC+oDlr71WPj9fAXobUhm9pZWbDL/GazqC4/0/plcBMheAG9y4w50o0UUWt7O94hsVPnyS/7TWpLOL/GAbWORadAFGAAyGTRSAGzduaPkvDXjnnXcAtaLX8l9tYNWNnqzQOvEiF69w5QY3/PjvcCdEaIIJVwDcdqC72V1Djdbp+9l/kIOHOSxtWJ8AiCj8mdP1RQJTT33WAnD1KleucOYM16+73n9155uuAe812831wfpXuyd6e73nzqGpRketeFx9n/H5aGsjFiMvjyMlNzl9GglOXx9SiVDIEYBkA/KWFp2RbmiJ/vBfSEXFkgYUU/GdnPDkl/myNHieeckA9xIMSuTKL18uv3ixvLZWg3RmZQHQDAECL/NyZBdUf1mXpnYK+j1WQ33A3+O9S1waZDBCRAKg+M/7DW8NNbXUSp9kHjzAEEMhQhFGPFws4mvSCQwGw6YKgNb7agKutvRKBAGKA0ZGRtSwm6y4zvVees9x7hKXrnFtkEEgPz+/vLzc6/Hm5ubatp1IJKLR6K3xWwoRCilsokkPbnM7RKiDjvRQIOt3Is8iAdBRL8Ea6e+XAMgc778at1d9sjpUHeuOvfnmdE9PZcHZpiN4CyiYZXYkPvJ+//tvTkTz8uSxQzV573rfeiuvu/tA/rWaQ5SUOM3TFvz+SP+liDJHytORn09ZGQcOkMZCWmNfmdz0QvjSCCOOyeGuJABF0oB/8A/Kf/u3S4LBSZ2Jx5E4pSLx1nBpwBhjVD+nadHkmREn3k33m7x5hjP6G9EMkqJiip0OdHXU6W/HSZFZWH78ffT106+VwS52lVPOClxK/yErnk19ZDB8QAWgsLDQ4/HIQfv9fpAzqtCPOsnaUYqgm+53eEca0EcfsHfv3vr6ejUZ17TFxcV5eXkSAHW+lwCEQqFAIHDr1q2+SJ90YpRRLRUVJShZ4cXL+vha19e++cffvDp91REAHXPIIWNsW2v/pABA0ec+99kf/vAbZMV07/TwO9Pd3Z89dO5TinLkmLWwjRHTR9bjN8JvXL5MY+OVlvkLpb29JxquHTlCfT07dyIBCIXQG3j7bc6di6BIxOtFy+X9+7EsVkc+2nHTly45vlt2nwCEw/L+0gCKi8tFzRsVwf80qet0Rm8gFXcGhDOtjpnRR99ZzvbQc5rTcvTHOa6PP820ZnuFVyqo0N+O4gBH9RU7at0wyugn+aTO6w0/NNqZgR+SBccxAmAwAiBqa2sPHDigVb8cNKDMT2tr6zNyNGvkJjd76NFaTxrgx68m90eOHDl48KCKCpKBysrKkpISVwAUdoyOjkpyrl+/funSpQsXLmig3OICC7nkfoSPlFDCOoi1xn7Nf/wf9vYqEyXvL3uWZ9eU/HFsaIhfbG/9RryFbIm9F/uL3m+d/JkPPX/y+SMcabQaHQ8oscwnP0Kk1z8eCPQHJ6+3e/s6OzlxgoMHJcNIALTu372b+XkpgR4Po5BpcFCPpKusTmWlowGKGIYjw04EkLb8dyIAypcJBv06ky4ActaO6VLH+2fY1HOe+X76FQhe4EIrrZL2AxzQ8n+SSQV8fvwyXaDgoIwyIEJEz77Ii/pF6Xp9gExSbjPwg7V6f1kK/w+D4YMqAKWlpS+88IKyNHL9zppdjlvugLUQIfIjfqQbRd7mbT/+3bt3nzhxor29va2tTeoiOUkvKU9OTmr5f+XKlT179kgtVIU+s3hG63TnBqEP8SHWwUzrzMxAixJbrWM/CQLkXDIaO5P0/goCRsrLv9HSEh9chwD8vP2Rlzrk1DrprKEGG+GxPB10yCm/z/vnphtGRv79v7/m/+IXbS3/pQFu++S6OubmCATQO5HbR054dJSxMUcAMgkCZNHIZUcAxhhLTa/J9TsRQFtbuagor7gcTKqCJCc3FzeH43h/zUB1S3LazAgR0ij5eun6czynX4KsggqFegqAZH78AQJ6IzojtSiiSLO30NJOu4yVaVvpVFYYDEYAnCBAWRpVAgAt1ZWpZ40ocj/PeQX7/fRLUeT9Ozs7dTx27Fi663dQQHD48GHpTVlZmeRnYWGhp6fHWQx68frwNdOcvQC0SABaZwcGxt56yw0C5HPXtPzX7yPxYktcAnC9hexpL6J9Lx33JDRssFCmW95Qn/fllwfb2/0+Hw0N3EdNDQoCFBAgJiaIRqWcZIBbBuDyZdeDuwIQiSR9vdSuqqpyz56qam91QXxHMBh1ztfW3r/8lxN3RYUVOcx9TDE1yeQEE/vw6uM306yCPyCBr6MuSlQaIAEYOT+ix5q/kEIvXl0jtXjw7QBd3MtfQ5YtBoMRAP6cnD/MqfrlKsTfgy74PJmjFZwcZh99ivQBBRC6lUjeX0cehmoDJ0+enJ+fn5qaCofD165dk5YoKSwv0ESThUVWJFoTcwPMDbTaAwOe21fcIKCSSlZDJfHk2l9Hu6qqv6VlzmqZm2sle9rhODSRRhFFcnkFFMBveDxSREpL0ys0FBWxfTuS0YXZWRIJZJkg3XDy9Tt2jESTdeBDHEpZ/sv0vGNJ1+4IwPDw/QKgsXpzzoSaOTPPjHw6zHcxDwVQqM9LCjvYobycbOL8hHRikcUCCqSIueSyGl8jhQ5kmWIwGAF4jzSSp0ohDi8h0v9Zdax6y/8Nblzn+iKLyvYcOnRImZ/jx4+TGao9KFBQ/BFQLry//87cHU2lisIAA5IBsiMHu9W2B1oYGIjd/nMFAY4AnOJUhsv/iQk41mK3tJBose08sue/gM1KSN62sc0RuW3bkpaOZaHzOmLbSXPJrBQ8Gr3qFHKnmfbgcQsAsoMHlwRA4NPV7wbfd867aJQzluo6t/yboQDkuOdW3QqutKu0dF8pBoNh8wXgG6TxY/gLUukEMhSAGLEhhpxqHtDY2Lhv3z6VEyzLgsw9VbVKBSoINzQ0KAiQ69eEmjZ7ARBN0NoqAZBduZHMAskUXnA/NljAyEjKzT8qg8v7yy7sZ71YYPPIcTM2+jyOH5c10ihtc8q/09P3RAD605ouDganHA3QKTf/EyOW9P6yB9G8yglrybZhMBieNAEQEXj5wd5ffJ2VcZaH8hjzzCv7r3KCvkSWxU1EultUA1USkAAECGhCTZsgkU9+9i63pYGBv9IAWxow7wQBjgCsjFv7jceXxEPef58EALCeSg1wb9ksLh6ZGnEFwC3/6knHRDVuFui6KwDu8p+SkuTzVVVkw2oRgCvBBoNhswVgkAcQgSgFrJEw4RAhZ5cYr9er+3+0nGftaJRuB9IMBQUF8Xhcc44xpsmrqCJrapATl/fXDgz9ly5dJXlH0AEOkIbfnxSA99+HAwdsZ/lPipI9zRowcn3IWcsvshgMbnMiAGmcKwD607Gzw0kBSK0Au9kkssRZ/uvIBmtAx5J9HYPB8Bh2A51gQhYhAuzcuVO39Di3kGaBBmq4JnH2D9C0UaKsE2chr2NxsSoBMjn5OHHScGu/5OdrSNKeclzHPcusEwGoIOxEAFNTK0cAcxNFjgDcvTvuLP8jRFwhITsc7y8zGAxbSQBixKaZlgEej0cVXd3fSVYUL6FJAE2omWWsk4oKeX/H5Mvk/R0Z4F6uXUsu/wcGwPX+VVVbRABkRUXJL/QGhx3/nur9nU3rnBNLWSCWbPkLwB5PWgFgo1NADjYGg+FpEoAECceA/CWUwyErNNCZ4b5ps8RKCwIqK90gQBEGyyQSKbXfkpK05b/F08u2ba4GOAn90eDovTeA4uJcp3P3C4CrIpZFFpgisMGwVQXAxl5kUUc0+xJWtm4idbjmdKddL0VF9rIGyO9LABxLr/3K2zlqYevisjK2BO43wvTZwzPh8HB4eHgmGl1BAJzlvyw2XjgysjAyMjb247EQodQCwPojABMEGAxbRwCUOsghR0dgYYlFue6sSB2uOd1pNwAnAtCxttbNAjm7m0WjSQGQKUTY5Oy/9RjLABQWRu5GQqPahenH6d7f+Z27peDR0XHVAMKh8EJhXnoBIPsisMFg2EoCUECBY0B8Ce31RlbMLqEZUqfdqEyIqwFx4k4WSMfU2m8kkpL9LyraOg0pc3PdHM7E6MTdu9HR0eiD9nRwS8FjY5Oh0MREaMINIJAiw/qLwCYIMBi2jgB48BRT7Gzeqe0ctMVbNBolKzR2aglAc2pm2Yb52cbGpAbs23eNa04Q0B/qd5f/Tt8V55rUKbZMECCbvDs5Oqo9nydXjACEGwEEQy1jY1OTY5OkasX6U0AGw1bCCEAppTvZmdzONxIJh8NjY2Osnbm5OQ0cHx/XJEA55ZpTk7NB2KnV4Lw8JwjQl86WvL8Vi+Eu/22FC1sLdxXf/5XAr/961OdzBGCFmm4eeclS8LTvN8d+6lrXwIYKwDbABAGPC4Mhl42mkkov3t3s1rJaW/yrr4Cay8uba+t/1sLt27eDwaCGqwywne2aUzPvYtfGLoTdzSGGLly4Gb3ZP9B/69bta9eW4wNZUxNrpD6LJ+szncNlL6txglXJz0/m8Y9Xw88VFPycz2frp3TcUrCOVX9cxTM4AzWDiQDux2AwAlBFlfxFDTUePNOx6cHBQXWXVF/JtbYUVm8A9YcZGhoC9rLXcUPWRrsMVwBk/iG/f9Cv/+cXt+l81rXfLh5EkyyDMV/gYdRoRJbvIUX8amU+GLQspcGsmpqVV9o11Oxn/1f5KqIafKxj+X8A/heyLLB50jEYjADkkltHXT31jTRe5KJcv/Iq2tOtpqYm82+EqTH91atXtRmc/DHQQIPTKXDj918oK8MNAgLnA0u4yR/27s0iX/8SK9KMbEV+pDFr8P57ZVm8h3QBeKkaZDmwsHt36ge078sCfZyPH+UouY73l5VjMBiMAKyIXH8zzVo29tOvHM7Fixe1I5B2dFBPmEwSQcr8nDlz5vz58319fYAzlY4+fGwoNlggR+8IQPwf+odG/+Du9u/T+VlHALJbdx4jnRydzmDAoezmT6eah7FdebWkO4fAQ+/sqkb/kbRCVsZgMBgBqKCildYhhoIEu+k+e/astgXV13qVzT969OiuVfvHKmKQ91cvsN7eXpUBSilto+0QhzThJqUF5ApdDQjMz1NXl/T+Xi9bGjehA4FML3dGGAyGLUHuJm28qx5+o4yGCU8yeXHh4unTp+X9dUOn2ryoPYD2edY2n5Zlpd7yPzw8rGqBMj9a+7/33ntqDZ9Pfgcdxzh2mMM+fNibtgtnayuDg0Qit51b/g8dQg/Sh201XI+ewb6kVopeGAxbCBMBbLwGFFDQTvsUUwkSFtaF2QuvvfaabglVUVctYlQPUBygkoAyQrZty/tPTExIG1QxVvZfmR9d5ol6ni95/gQnpAGaig3E1YDUT67+5BUVTE+Tn09TEzt2APZW9v7CA39HZuquH3AMJgVkw5twio1jD3te5EVHDHaw4wIXVAxQhkedXqqqqrTVs3b6dAQgHo9Ho9FQKKScj1P1rf2vtUd6jrSfan+h8AVpAGlsfBwgj9/RsVnf1cqBv4FsdQ4t2f/lYXxpyX4Hg8GwUZgaQBz+KfwSG8de9n6YD5dQsotdPnzXuDYQG7i8hHZ50z7PrgDEYjHE59gTLhmdOlDfc7gtr+1E3tHOzo7c3Bw2Exsss/z9YGMwGAFIINtodrP7E3xC0UAddfvZP8hgkGCIUHQxOjM5M8+8s3uEpKKsu8z7htc3F/e98cb/7TmvL+fm5TXl5tLZufqq3AY+z4PJf/DTX4Dv8zC+kD6+BpnBYNhqGAHIhXk2lDzyVMhtoqmf/iGGRhgJE44SnWVWAmBh6QKP7Sm1SysTldUJv29u7n+88UZPT1NeHhIAHV944SHZmK4HvzZd2QQB9oPn9jmnDAbDVsEIwOKyAMyzOZRSeoQjsjHGxhmfZPInAmDnFVFUapVWnKgomXuHuTkSidhpq6dH3j9p7e1r/95Tvp7IJhFkP3juGudng8GwhTAC4Hj/OEvYNkksi41G9QDZyrn2fDhxQgLg2MS770oDnCBA1tbGgyjI9GwWFKT/YDAYthJGAOJLlgAWF5meJhZjdhaKCikspKCAR4bHo4yPqwFjZ8+6cYCU4ODBTa8G23zAMBgMJgK4eTMxNZUAxse5cYNgkEQCnvFSXs7OnZvodNMpK5MG6OUdG+nrkwa49YB9+9gwzJ0/BoPBCMDwcOLllxOBQAKYnOTmTS5cgPx8mpupq8Pn4xHj9bq5IHn9QDicmguqryczSuAfIdtAGuG/IDMYDFsEIwCz44noaOLPv5GYgOlpgkGorKSzjWPHlHbZLAGwH9a0RBpgWehBNNoPebK+pAbU1LAeDAaDwZDLKzBEYiiRCCTiTZU3pjsRh4upqmL/fo4epaODR4vFMs88Q1kZgQCxGLZ9DXIdGbhDZy579mAwGAyGrMnloxAhPhSPBw4n7lYjV2tZFBWhCKC+Xsv/x5xuLy1FtsxlRwAgF05BBevBYDAYTAqojETZc4m25xLRKDMzSAC2b6ekhCeS88sCoOMp/rKdO+BQIIgCOP5mupRGYQpQxSEFEZAAhPvcg44OKAClQGkXxoJb2BubAw539txp+v889OYL/GVqpCMVAAB3APltOh0J8wcKqeLtMwBhXgQAUD0A8v+UfMvrbwUAAAjAezk/VtzlL/EBAKooCnk8AAAtAIBoEAAAAAEAABAAAAABAAA8yVeyLNvtdpfLRSnV7/dns1mj0ZC4AQAByPPcObderw+HQ61WG4/H3vvVaiVxAwACsN/vt9utc26z2dTr9cVi0W63n0sCIGIgAN77JEmOx2NeOp1OYQ2HAiBu4BK42WwaY6y1tzV8CGs4FABxA98AhsPhZDK5Xq+9Xk9rPZ1OwzoajQRA3EAArLXL5dIYcz6flVKDwWA+n7daLQHwCMBjcOE8TVOtdbfbFQAAr4ECAPgnMACAAAAA7s0HoDFhsamH/bcAAAAASUVORK5CYII=",Hxe={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class Uxe{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new Lf([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:FN(fZ),texture:e?this._createTextureNow(zxe):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",n="regular"){if(hn(n)&&(n=Hxe[n.toLowerCase()],!n))throw new Error("Unknown font weight: "+n);const s={family:e,style:t,weight:n};let r=this._fonts.get(s);return r||(r={metrics:void 0,texture:void 0},this._fonts.set(s,r),this._promises.push(this._loadFontEntry(r,s))),r}async _loadFontEntry(e,t){try{const n=await this._loadMetadata(t.family),s=jxe(n,t),r=this.fontRepository+WV(t.family)+"/"+s.replace(/\.\w+/,""),o=this._createTexture(r+".png"),a=this._loadFont(r+".json");e.texture=await o,e.metrics=await a}catch(n){console.log("Cannot load font. Using default.",n),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(n=>{if(!n.ok)throw new Error("Could not load font: "+n.status);return n}).then(n=>n.json()).then(n=>FN(n)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=WV(e);let n=this._metadataPromises.get(t);return n||(n=fetch(this.fontRepository+t+"/METADATA.pb").then(s=>{if(!s.ok)throw new Error("Could not load font metadata: "+s.status);return s}).then(s=>s.text()).then(s=>$xe(s)).catch(s=>{console.warn(s)}),this._metadataPromises.set(t,n)),n}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((n,s)=>{Kv(t,{src:e,min:t.LINEAR},(r,o,a)=>{r?s(r):n(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let n;const s=new Promise((r,o)=>{n=Kv(t,{src:e,min:t.LINEAR},(a,l,h)=>{a?o(a):r(l)})});return this._promises.push(s),n}}function WV(i){return i.toLowerCase().replaceAll(/[^\w]/g,"")}function $xe(i){const e=i.split(`
`),t=[];let n;for(const s of e)if(s.startsWith("fonts {")&&(n={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),s.startsWith("}")&&(t.push(n),n=void 0),n){let r=s.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(r){const o=r[1];n[o]=r[2]}if(r=s.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),r){const o=r[1];n[o]=+r[2]}}return t}function jxe(i,e){let t,n=Number.POSITIVE_INFINITY;for(const s of i)if(e.family.localeCompare(s.name,void 0,{sensitivity:"accent"})==0&&e.style==s.style){const r=Math.abs(e.weight-s.weight);r<n&&(n=r,t=s)}return t==null?void 0:t.filename}function qxe(i,e){const t=[];let n;for(const s of i.split(`
`))if(s.startsWith(">"))n={identifier:s.match(/>(\S+)/)[1],sequence:""},t.push(n);else if(n)n.sequence+=s.trim();else throw new Error("Invalid fasta file!");return t}class Gxe{constructor(e,t){this.animator=e,this.disabled=!!t,this.damping=.015,this.acceleration=.3,this.accelerationThreshold=100,this.lowerLimit=.5,this.loop=!1,this.momentum=0,this.timestamp=0,this.callback=null,this._transitionCallback=this.animate.bind(this),this.clear()}clear(){this.momentum=0,this.timestamp=null,this.loop=null,this.callback=null}cancel(){this.loop&&(this.animator.cancelTransition(this._transitionCallback),this.clear())}setMomentum(e,t){if(this.disabled){t(e);return}e*this.momentum<0?this.momentum=0:Math.abs(e)>this.accelerationThreshold?this.momentum=Hae([this.momentum,e],this.acceleration):this.momentum=e,this.callback=t,this.loop||this.animate()}animate(e){this.callback(this.momentum);const t=e-this.timestamp||0;this.timestamp=e;const n=Math.abs(this.momentum);this.momentum=Math.sign(this.momentum)*Math.max(0,n-((n*this.damping)**1.5+.04)*t),Math.abs(this.momentum)>this.lowerLimit?(this.loop=!0,this.animator.requestTransition(this._transitionCallback)):this.clear()}}function Kxe(i){const e={},t=["string","number","boolean"],n=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const s in i){const r=s;!n.includes(s)&&t.includes(typeof i[r])&&(e[r]=i[r])}return e}const zV=new Map;async function Zxe(i,e,t){const n=i.symbol;let s=zV.get(n)??await Xxe(i.symbol);return s?(zV.set(n,s),zh`<div class="title"><strong>${s.name}</strong> ${s.description}</div><p class="summary">${s.summary}</p><p class="source">Source: NCBI RefSeq Gene</p>`):null}async function Yxe(i){console.log("Searching: "+i);const e={mode:"cors"},t=(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=gene&term=${i}[GENE]&sort=relevance&retmode=json`,e).then(n=>n.json())).esearchresult.idlist[0];return t?(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&id=${t}&retmode=json`,e).then(n=>n.json())).result[t]:null}const Qxe=FL(Yxe,500);function Xxe(i){return Qxe(i)}const Jxe=vs(".4~r"),eDe=vs(".4~e");function nX(i){return i==null?zh`<span class="na">NA</span>`:hn(i)?i.substring(0,30):Number.isInteger(i)?""+i:Mr(i)?Math.abs(i)>Math.pow(10,8)||Math.abs(i)<Math.pow(10,-8)?eDe(i):Jxe(i):Zk(i)?i?"True":"False":lo(i)?zh`${i.map((e,t)=>[nX(e),t<i.length-1?", ":Hn])}`:"?"+typeof i+" "+i}async function tDe(i,e,t){const n=(l,h)=>{var c;for(const[u,d]of Object.entries(e.encoders))if((c=d==null?void 0:d.accessor)!=null&&c.fields.includes(l))switch(u){case"color":case"fill":case"stroke":return zh`<span class="color-legend" style="${`background-color: ${d(h)}`}"></span>`}return""},s=Object.entries(i).filter(([l,h])=>!l.startsWith("_"));if(s.length===0)return;const r=zh`<table class="attributes">${s.map(([l,h])=>zh`<tr><th>${l}</th><td>${nX(h)} ${n(l,i)}</td></tr>`)}</table>`,o=e.unitView.getTitleText(),a=o?zh`<div class="title"><strong>${o}</strong></div>`:"";return zh`${a}${r}`}class iy extends Hm{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e,this.children=(e.layer||[]).map((o,a)=>{if(gX(o)||fX(o))return t.createView(o,this,this,"layer"+a);throw new Error("LayerView accepts only unit or layer specs as children!")}),this.needsAxes={x:!0,y:!0}}*[Symbol.iterator](){for(const e of this.children)yield e}render(e,t,n={}){if(this.isConfiguredVisible()){e.pushView(this,t);for(const s of this.children)s.render(e,t,n);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0);for(let t=this.children.length-1;t>=0;t--)if(this.children[t].propagateInteractionEvent(e),e.stopped)return;this.handleInteractionEvent(void 0,e,!1)}}class sX{constructor(e,t){this.n=e,this.maxCols=t??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<n;s++){const r=[];e.push(r);for(let o=0;o<t;o++){const a=s*t+o;a<this.n&&r.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<t;s++){const r=[];e.push(r);for(let o=0;o<n;o++){const a=o*t+s;a<this.n&&r.push(a)}}return e}getCellIndex(e,t){let n=0;if(this.maxCols==1/0)n=t==0?e:void 0;else{if(e>=this.maxCols)return;n=t*this.nCols+e}return n<this.n?n:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}const iDe="chromosome_ticks_and_labels",nDe={x:"width",y:"height"};function yM(i){return i=="x"?"y":"x"}const oD={x:["bottom","top"],y:["left","right"]},m5=Object.fromEntries(Object.entries(oD).map(([i,e])=>e.map(t=>[t,i])).flat(1));function Tu(i){return m5[i]}class rX extends iy{constructor(e,t,n,s,r){const o=t=="locus",a={...o?rDe:oX,...sDe(t,e),...e};super(o?oDe(a,t):aX(a,t),n,s,r,`axis_${e.orient}`),this.axisProps=a,this.blockEncodingInheritance=!0,this.contributesToScaleDomain=!1}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return m5[this.axisProps.orient]=="x"?new Yv(t,e):new Yv(e,t)}getPerpendicularSize(){return _5(this.axisProps)}isPickingSupported(){return!1}}function _5(i){const e=Tu(i.orient);let t=i.ticks&&i.tickSize||0;return i.labels&&(t+=i.labelPadding,e=="x"?t+=i.labelFontSize:t+=30),i.title&&(t+=i.titlePadding+i.titleFontSize),t=Math.min(i.maxExtent||1/0,Math.max(i.minExtent||0,t)),t}const oX={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function sDe(i,e){const t=e.orient,n=i=="nominal"||i=="ordinal";let s="center",r="middle",o=e.labelAngle??((t=="top"||t=="bottom")&&n?-90:0);switch(t){case"left":s="right";break;case"right":s="left";break;case"top":case"bottom":Math.abs(o)>30?(s=o>0==(t=="bottom")?"left":"right",r="middle"):r=t=="top"?"alphabetic":"top";break}return{labelAlign:s,labelAngle:o,labelBaseline:r}}function aX(i,e){const t={...i,extent:_5(i)},n=Tu(t.orient),s=yM(n),r=t.orient=="bottom"||t.orient=="right"?1:-1,o=t.orient=="bottom"||t.orient=="left"?1:0,a=()=>({name:"domain",data:{values:[0]},mark:{type:"rule",clip:!1,strokeDash:t.domainDash,strokeCap:t.domainCap,color:t.domainColor,[s]:o,size:t.domainWidth}}),l=()=>({name:"labels",mark:{type:"text",clip:!1,align:t.labelAlign,angle:t.labelAngle,baseline:t.labelBaseline,[s+"Offset"]:(t.tickSize+t.labelPadding)*r,[s]:o,size:t.labelFontSize,color:t.labelColor,minBufferSize:1500},encoding:{[n]:{field:"value",type:e},text:{field:"label"}}}),h=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:t.tickDash,strokeCap:t.tickCap,color:t.tickColor,size:t.tickWidth,minBufferSize:300},encoding:{[s]:{value:o},[s+"2"]:{value:o-t.tickSize/t.extent*(o?1:-1)}}}),c=()=>({name:"title",data:{values:[0]},mark:{type:"text",clip:!1,align:"center",baseline:t.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(t.orient)],text:t.title,color:t.titleColor,[n]:.5,[s]:1-o}}),u=()=>{const f={name:"ticks_and_labels",encoding:{[n]:{field:"value",type:e}},layer:[]};return t.ticks&&f.layer.push(h()),t.labels&&f.layer.push(l()),f},d={resolve:{scale:{[n]:"forced"}},[nDe[yM(n)]]:t.extent,data:{lazy:{type:"axisTicks",channel:n,axis:i}},layer:[]};return t.domain&&d.layer.push(a()),(t.ticks||t.labels)&&d.layer.push(u()),t.title&&d.layer.push(c()),d}const rDe={...oX,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function oDe(i,e){const t={...i,extent:_5(i)},n=Tu(t.orient),s=yM(n),r=t.orient=="bottom"||t.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:i.chromTickDash,strokeDashOffset:i.chromTickDashOffset,[s]:r,[s+"2"]:r-t.chromTickSize/t.extent*(r?1:-1),color:i.chromTickColor,size:t.chromTickWidth}}),a=()=>{let c;switch(t.orient){case"top":c={y:0,angle:0,paddingX:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":c={y:1,angle:0,paddingX:4,dy:t.chromLabelPadding+t.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":c={x:1,angle:-90,paddingY:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":c={x:0,angle:90,align:"right",paddingY:4,dy:-t.chromLabelPadding};break;default:c={}}return{name:"chromosome_labels",mark:{type:"text",size:t.chromLabelFontSize,font:t.chromLabelFont,fontWeight:t.chromLabelFontWeight,fontStyle:t.chromLabelFontStyle,color:t.chromLabelColor,align:i.chromLabelAlign,baseline:"alphabetic",clip:!1,...c},encoding:{[n+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let l;switch(t.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const h=aX({...i,...l},e);if(i.chromTicks||i.chromLabels){const c={name:iDe,data:{lazy:{type:"axisGenome",channel:Tu(t.orient)}},encoding:{[n]:{field:"continuousStart",type:e,band:0}},layer:[]};if(i.chromTicks&&c.layer.push(o()),i.chromLabels){c.layer.push(a());let u;h.layer.filter(d=>d.name=="ticks_and_labels").forEach(d=>d.layer.filter(f=>f.name=="labels").forEach(f=>{u=f.mark})),u&&(t.orient=="top"||t.orient=="bottom"?(u.viewportEdgeFadeWidthLeft=30,u.viewportEdgeFadeDistanceLeft=40):(u.viewportEdgeFadeWidthBottom=30,u.viewportEdgeFadeDistanceBottom=40))}h.layer.push(c)}return h}class aDe extends iy{constructor(e,t,n,s,r){const o={...t=="locus"?lDe:lX,...e};super(dDe(o,t),n,s,r,`axisGrid_${e.orient}`),this.axisProps=o,this.blockEncodingInheritance=!0,this.contributesToScaleDomain=!1}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const lX={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},lDe={...lX,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function hDe(i,e){const t=i,n=Tu(t.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:n,axis:i}},mark:{type:"rule",strokeDash:t.gridDash,strokeCap:t.gridCap,color:t.gridColor,size:t.gridWidth,opacity:t.gridOpacity,minBufferSize:300},encoding:{[n]:{field:"value",type:e}}}}function cDe(i,e){const t=i,n=Tu(t.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rule",strokeDash:t.chromGridDash,strokeCap:t.chromGridCap,color:t.chromGridColor,size:t.chromGridWidth,opacity:t.chromGridOpacity},encoding:{[n]:{field:"continuousStart",type:e,band:0}}}}function uDe(i,e){const t=i,n=Tu(t.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rect"},encoding:{[n]:{field:"continuousStart",type:e,band:0},[n+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[t.chromGridFillEven??"white",t.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[t.chromGridFillEven?1:0,t.chromGridFillOdd?1:0]}}}}}function dDe(i,e){const t={...i},n=[];return t.chromGrid&&(t.chromGridFillOdd||t.chromGridFillEven)&&n.push(uDe(t,e)),t.chromGrid&&t.chromGridOpacity>0&&n.push(cDe(t,e)),t.grid&&t.gridOpacity>0&&n.push(hDe(t,e)),{name:"grid_layers",configurableVisibility:!1,resolve:{scale:{[Tu(i.orient)]:"forced",fill:"independent",opacity:"independent"}},layer:n}}const HV={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},fDe={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},gDe={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},pDe={start:0,middle:.5,end:1},mDe={start:"left",middle:"center",end:"right"};function _De(i){if(!i)return;const e=hn(i)?{text:i}:i;if(!e.text||e.orient=="none")return;const t={"track-title":fDe,overlay:gDe}[e.style]??{},n={...HV,...t,...e};let s={},r={x:0,y:0};const o=pDe[n.anchor??"middle"];switch(n.orient){case"top":r={x:o,y:1},s={baseline:"alphabetic",angle:0};break;case"right":r={x:1,y:1-o},s={baseline:"alphabetic",angle:90};break;case"bottom":r={x:o,y:0},s={baseline:"top",angle:0};break;case"left":r={x:0,y:o},s={baseline:"alphabetic",angle:-90};break}const a={...HV,...s,...t,...e},l={xOffset:0,yOffset:0};switch(n.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...r,...l,text:a.text,align:a.align??mDe[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}function bDe(i,e,t,n){if(i.type=="wheel"){i.uiEvent.preventDefault();const s=i.uiEvent,r=s.deltaMode?120:1;let{x:o,y:a}=i.point;if(n){const l=n.mark.encoders;l.x&&!l.x2&&!l.x.constantValue&&(o=+l.x(n.datum)*e.width+e.x),l.y&&!l.y2&&!l.y.constantValue&&(a=(1-+l.y(n.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:o,y:a,xDelta:0,yDelta:0,zDelta:s.deltaY*r/300}):t({x:o,y:a,xDelta:-s.deltaX*r,yDelta:0,zDelta:0})}else if(i.type=="mousedown"&&i.uiEvent.button===0){const s=i.uiEvent;s.preventDefault();let r=s;const o=l=>{t({x:r.clientX,y:r.clientY,xDelta:l.clientX-r.clientX,yDelta:l.clientY-r.clientY,zDelta:0}),r=l},a=l=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a,!1),document.addEventListener("mousemove",o,!1)}}var zb,Hb,Co,am,hb,nu,Kd,CM,UV,SM,hX,Cp,N_,kS,xM,LS,DM,ES,kM,LM,cX,cb,AS,EM,uX;class dX extends Hm{constructor(e,t,n,s,r,o){super(e,t,n,s,r),Kt(this,nu),Kt(this,CM),Kt(this,SM),Kt(this,Cp),Kt(this,kS),Kt(this,LS),Kt(this,ES),Kt(this,LM),Kt(this,cb),Kt(this,EM),Kt(this,zb,1/0),Kt(this,Hb,10),Kt(this,Co,[]),Kt(this,am,{}),Kt(this,hb,0),this.spec=e,jh(this,Hb,e.spacing??10),jh(this,zb,o),jh(this,Co,[]),this.wrappingFacet=!1,this._createChildren()}_createChildren(){}appendChild(e){e.layoutParent??(e.layoutParent=this),it(this,Co).push(new jV(e,this,it(this,hb))),yae(this,hb)._++}setChildren(e){jh(this,Co,[]);for(const t of e)this.appendChild(t)}replaceChild(e,t){const n=it(this,Co).findIndex(s=>s.view==e);if(n>=0)it(this,Co)[n]=new jV(t,this,it(this,hb));else throw new Error("Not my child view!")}get children(){return it(this,Co).map(e=>e.view)}get childCount(){return it(this,Co).length}onScalesResolved(){super.onScalesResolved(),Ct(this,SM,hX).call(this)}*[Symbol.iterator](){for(const e of it(this,Co))yield*e.getChildren();for(const e of Object.values(it(this,am)))yield e}getOverhang(){return Ct(this,LM,cX).call(this).union(Ct(this,cb,AS).call(this))}getSize(){return this._cache("size",()=>new Yv(Ct(this,LS,DM).call(this,"column"),Ct(this,LS,DM).call(this,"row")).addPadding(Ct(this,cb,AS).call(this)))}render(e,t,n={}){if(!this.isConfiguredVisible())return;this.layoutParent||(t=t.shrink(this.getPadding())),t=t.shrink(Ct(this,cb,AS).call(this)),e.pushView(this,t);const s={devicePixelRatio:this.context.devicePixelRatio},r=c7(Ct(this,kS,xM).call(this,"column"),t.width,s),o=c7(Ct(this,kS,xM).call(this,"row"),t.height,s),a=new sX(it(this,nu,Kd).length,it(this,zb)??1/0);for(const[l,h]of it(this,nu,Kd).entries()){const{view:c,axes:u,gridLines:d,background:f,backgroundStroke:g,title:p}=h,[m,b]=a.getCellCoords(l),_=r[Ct(this,ES,kM).call(this,"column",m)],w=o[Ct(this,ES,kM).call(this,"row",b)],y=c.getSize(),x=c.getOverhang(),L=_.location-x.left,S=w.location-x.top,k=(y.width.grow?_.size:y.width.px)+x.width,D=(y.height.grow?w.size:y.height.px)+x.height,T=new VL(()=>t.x+L,()=>t.y+S,()=>k,()=>D);h.coords=T;const M=n.clipRect?T.intersect(n.clipRect):T;f==null||f.render(e,M,{...n,clipRect:void 0});for(const $ of Object.values(d))$.render(e,T,n);const j=CDe(c);j&&c.render(e,T,n),g==null||g.render(e,M,{...n,clipRect:void 0});for(const[$,ie]of Object.entries(u))ie.render(e,$V(T,$,ie),n);for(const $ of Object.values(it(this,am))){const ie=$.axisProps.orient;(ie=="left"&&m==0||ie=="right"&&m==a.nCols-1||ie=="top"&&b==0||ie=="bottom"&&b==a.nRows-1)&&$.render(e,$V(T.shrink(h.view.getOverhang()),ie,$),n)}j||c.render(e,T,n),p==null||p.render(e,T,n)}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const t=it(this,nu,Kd).find(s=>s.coords.containsPoint(e.point.x,e.point.y)),n=t==null?void 0:t.view;n&&(n.propagateInteractionEvent(e),(n instanceof rr||n instanceof iy)&&bDe(e,t.coords,s=>Ct(this,EM,uX).call(this,t.coords,t.view,s),this.context.getCurrentHover())),!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return"independent"}}zb=new WeakMap,Hb=new WeakMap,Co=new WeakMap,am=new WeakMap,hb=new WeakMap,nu=new WeakSet,Kd=function(){return it(this,Co).filter(i=>i.view.isConfiguredVisible())},CM=new WeakSet,UV=function(){return new sX(it(this,nu,Kd).length,it(this,zb)??1/0)},SM=new WeakSet,hX=function(){for(const i of F0){const e=this.resolutions.axis[i];if(e){const t=e.getAxisProps();if(t){const n={title:e.getTitle(),orient:oD[i][0],...t},s=new rX(n,e.scaleResolution.type,this.context,this,this);it(this,am)[i]=s,s.visit(r=>{r instanceof rr&&r.resolve("scale")})}}}for(const i of it(this,Co))i.createAxes()},Cp=new WeakSet,N_=function(i){const e=i=="column"?"width":"height",t=(n,s)=>n.map(r=>{const o=it(this,nu,Kd)[r].getOverhangAndPadding();return i=="column"?s?o.right:o.left:s?o.bottom:o.top}).reduce((r,o)=>Math.max(r,o),0);return this._cache(`size/directionSizes/${i}`,()=>it(this,CM,UV)[i=="column"?"colIndices":"rowIndices"].map(n=>({axisBefore:t(n,0),axisAfter:t(n,1),view:X0e(n.map(s=>it(this,nu,Kd)[s].view.getSize()[e]))})))},kS=new WeakSet,xM=function(i){const e=Ct(this,Cp,N_).call(this,i),t=[];t.push(Tb);for(const[n,s]of e.entries())n>0&&t.push({px:it(this,Hb),grow:0}),(n==0||this.wrappingFacet)&&t.push(Tb),t.push({px:s.axisBefore,grow:0}),t.push(s.view),t.push({px:s.axisAfter,grow:0}),(n==e.length-1||this.wrappingFacet)&&t.push(Tb);return t},LS=new WeakSet,DM=function(i){let e=0,t=0;const n=(i=="row"&&this.spec.height)??(i=="column"&&this.spec.width);if(n||n===0)return $K(n);const s=Ct(this,Cp,N_).call(this,i);for(const[r,o]of s.entries())r>0&&(t+=it(this,Hb)),(r==0||this.wrappingFacet)&&(t+=0),t+=o.axisBefore,t+=o.view.px??0,e+=o.view.grow??0,t+=o.axisAfter,(r==s.length-1||this.wrappingFacet)&&(t+=0);return{px:t,grow:e}},ES=new WeakSet,kM=function(i,e){return i=="row"&&this.wrappingFacet?1+6*e+2:2+4*e+1},LM=new WeakSet,cX=function(){const i=Ct(this,Cp,N_).call(this,"column"),e=Ct(this,Cp,N_).call(this,"row");return!i.length||!e.length?Ns.zero():new Ns(e.at(0).axisBefore,i.at(-1).axisAfter,e.at(-1).axisAfter,i.at(0).axisBefore)},cb=new WeakSet,AS=function(){const i=e=>{const t=m5[e],n=it(this,am)[t];return(n==null?void 0:n.axisProps.orient)!==e?0:Math.max(n.getPerpendicularSize()+n.axisProps.offset,0)};return new Ns(i("top"),i("right"),i("bottom"),i("left"))},EM=new WeakSet,uX=function(i,e,t){for(const[n,s]of Object.entries(yDe(e))){if(s.size<=0)continue;const r=i.normalizePoint(t.x,t.y),o=i.normalizePoint(t.x+t.xDelta,t.y+t.yDelta),a={x:o.x-r.x,y:o.y-r.y};for(const l of s)l.zoom(2**t.zDelta,n=="y"?1-r[n]:r[n],n=="x"?a.x:-a.y)}this.context.animator.requestRender()};function vDe(i){if(!(!i||!i.fill||i.fillOpacity===0))return{configurableVisibility:!1,data:{values:[{}]},mark:{color:i.fill,opacity:i.fillOpacity??1,type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0}}}function wDe(i){if(!(!i||!i.stroke||i.strokeWidth===0||i.strokeOpacity===0))return{configurableVisibility:!1,resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:i.strokeWidth??1,color:i.stroke??"lightgray",strokeCap:"square",strokeOpacity:i.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}function yDe(i){const e={x:new Set,y:new Set};return i.visit(t=>{for(const[n,s]of Object.entries(e)){const r=t.getScaleResolution(n);r&&r.isZoomable()&&s.add(r)}}),e}function CDe(i){let e=!0;return i.visit(t=>{t instanceof rr&&e&&(e=t.mark.properties.clip===!0)}),e}function $V(i,e,t){const n=t.axisProps,s=t.getPerpendicularSize();if(e=="bottom")return i.translate(0,i.height+n.offset).modify({height:s});if(e=="top")return i.translate(0,-s-n.offset).modify({height:s});if(e=="left")return i.translate(-s-n.offset,0).modify({width:s});if(e=="right")return i.translate(i.width+n.offset,0).modify({width:s})}class jV{constructor(e,t,n){if(this.layoutParent=t,this.view=e,this.serial=n,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.title=void 0,this.coords=VL.ZERO,e.needsAxes.x||e.needsAxes.y){const s=e.spec,r="view"in s?s==null?void 0:s.view:void 0,o=vDe(r);o&&(this.background=new rr(o,t.context,t,e,"background"+n),this.background.blockEncodingInheritance=!0);const a=wDe(r);a&&(this.backgroundStroke=new rr(a,t.context,t,e,"backgroundStroke"+n),this.backgroundStroke.blockEncodingInheritance=!0);const l=_De(e.spec.title);if(l){const h=new rr(l,t.context,t,e,"title"+n);h.blockEncodingInheritance=!0,this.title=h}}}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view}createAxes(){const{view:e,axes:t,gridLines:n}=this,s=(a,l)=>{const h=a.getAxisProps();if(h===null)return;const c=h?{...h}:{};if(!c.orient){for(const u of oD[l])if(!t[u]){c.orient=u;break}if(!c.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(c.title??(c.title=a.getTitle()),!oD[l].includes(c.orient))throw new Error(`Invalid axis orientation "${c.orient}" on channel "${l}"!`);return c},r=(a,l,h)=>{const c=s(a,l);if(c){if(t[c.orient])throw new Error(`An axis with the orient "${c.orient}" already exists!`);t[c.orient]=new rX(c,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,h)}},o=(a,l,h)=>{const c=s(a,l);c&&(c.grid||c.chromGrid)&&(n[c.orient]=new aDe(c,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,h))};for(const a of["x","y"])if(e.needsAxes[a]){const l=e.resolutions.axis[a];if(!l)continue;r(l,a,e)}for(const a of["x","y"])if(e.needsAxes[a]){const l=e.getAxisResolution(a);if(!l)continue;o(l,a,e)}if(e instanceof iy){for(const a of e.children)for(const[l,h]of Object.entries(a.resolutions.axis)){const c=h.getAxisProps();c&&c.orient&&r(h,l,a)}for(const a of e.children)for(const[l,h]of Object.entries(a.resolutions.axis)){const c=h.getAxisProps();c&&!c.orient&&r(h,l,a)}}[...Object.values(t),...Object.values(n)].forEach(a=>a.visit(l=>{l instanceof rr&&l.resolve("scale")}))}getOverhang(){const e=t=>{const n=this.axes[t];return n?Math.max(n.getPerpendicularSize()+n.axisProps.offset,0):0};return new Ns(e("top"),e("right"),e("bottom"),e("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}class WA extends dX{constructor(e,t,n,s,r){super(e,t,n,s,r,AM(e)?e.columns:IS(e)?1:1/0),this.spec=e}_createChildren(){const e=this.spec,t=AM(e)?e.concat:IS(e)?e.vconcat:e.hconcat;this.setChildren(t.map((n,s)=>this.context.createView(n,this,this,"grid"+s)))}getDefaultResolution(e,t){if(t=="axis")return"independent";if(IS(this.spec)&&e==="x"||pX(this.spec)&&e==="y"){const n=new Set(this.children.map(s=>s.getEncoding()[e]).filter(s=>s).map(s=>"type"in s&&s.type).filter(s=>s));return n.size===1&&(n.has("index")||n.has("locus"))?"shared":"independent"}else return"independent"}}class SDe{constructor(){this.types=[];const e=t=>(n,s,r,o,a)=>new t(n,s,r,o,n.name??a);this.addViewType(xDe,e(cZ)),this.addViewType(gX,e(iy)),this.addViewType(fX,e(rr)),this.addViewType(IS,e(WA)),this.addViewType(pX,e(WA)),this.addViewType(AM,e(WA))}addViewType(e,t){this.types.push({specGuard:e,factory:t})}createView(e,t,n,s,r){const o=this.types.find(a=>a.specGuard(e));if(o)return o.factory(e,t,n,s,r??"unnamed");throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=this.types.filter(n=>n.specGuard(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}}function fX(i){return"mark"in i&&(hn(i.mark)||$a(i.mark))}function gX(i){return"layer"in i&&$a(i.layer)}function xDe(i){return"import"in i}function IS(i){return"vconcat"in i&&lo(i.vconcat)}function pX(i){return"hconcat"in i&&lo(i.hconcat)}function AM(i){return"concat"in i&&lo(i.concat)}class DDe extends dX{constructor(e,t){super({vconcat:[]},e,void 0,void 0,"implicitRoot",1),t.layoutParent=this,t.dataParent=this,this.appendChild(t)}}mq("fasta",qxe);class kDe{constructor(e,t,n={}){this.container=e,this.spec=t,this.accessorFactory=new afe,this.viewFactory=new SDe,this.namedDataProviders=[],this.animator=new Vxe(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=s=>s.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new Gxe(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this._extraBroadcastListeners=new Map,this.tooltipHandlers={default:tDe,refseqgene:Zxe,...n.tooltipHandlers??{}},this.viewRoot=void 0}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const t of this.namedDataProviders){const n=t(e);if(n)return n}}updateNamedData(e,t){const n=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!n)throw new Error("No such named data source: "+e);n.dataSource.updateDynamicData(t),YN(n.hosts),this.animator.requestRender()}broadcast(e,t){var n;const s={type:e,payload:t};this.viewRoot.visit(r=>r.handleBroadcast(s)),(n=this._extraBroadcastListeners.get(e))==null||n.forEach(r=>r(s))}_prepareContainer(){this.container.classList.add("genome-spy"),this.container.classList.add("loading"),this._glHelper=new x0e(this.container,()=>this.viewRoot?Mxe(this.viewRoot):{width:void 0,height:void 0},this.spec.background),this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="loading-message",this.loadingMessageElement.innerHTML='<div class="message">Loading<span class="ellipsis">...</span></div>',this.container.appendChild(this.loadingMessageElement),this.tooltip=new Sce(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})}destroy(){this.container.classList.remove("genome-spy"),this.container.classList.remove("loading");for(const[e,t]of this._keyboardListeners)for(const n of t)document.removeEventListener(e,n);for(this._glHelper.finalize();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new Wxe(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome));const e=this,t={dataFlow:new XQ,accessorFactory:this.accessorFactory,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new Uxe(this._glHelper),get devicePixelRatio(){return e._glHelper.dpr},requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this._currentHover,addKeyboardListener:(a,l)=>{document.addEventListener(a,l);let h=this._keyboardListeners.get(a);h||(h=[],this._keyboardListeners.set(a,h)),h.push(l)},addBroadcastListener(a,l){const h=e._extraBroadcastListeners;let c=h.get(a);c||(c=new Set,h.set(a,c)),c.add(l)},removeBroadcastListener(a,l){var h;(h=e._extraBroadcastListeners.get(a))==null||h.delete(l)},isViewConfiguredVisible:e.viewVisibilityPredicate,isViewSpec:a=>e.viewFactory.isViewSpec(a),createView:function(a,l,h,c){return e.viewFactory.createView(a,t,l,h,c)}},n=this.spec;n.datasets&&this.registerNamedDataProvider(a=>n.datasets[a]),this.viewRoot=t.createView(n,null,null,"viewRoot"),await tX(this.viewRoot),(this.viewRoot.needsAxes.x||this.viewRoot.needsAxes.y)&&(this.viewRoot=new DDe(t,this.viewRoot)),Ixe(this.viewRoot),Txe(this.viewRoot),this._glHelper.invalidateSize();const s=[];this.viewRoot.visit(a=>{a instanceof rr&&s.push(a)});const r=xxe(this.viewRoot,t.dataFlow);Axe(r),this.broadcast("dataFlowBuilt",r),s.forEach(a=>a.mark.initializeEncoders());const o=Promise.all(s.map(a=>a.mark.initializeGraphics()));for(const a of s)r.addObserver(l=>{a.mark.initializeData(),a.mark.updateGraphicsData()},a);await t.fontManager.waitUntilReady(),r.initialize(),await Promise.all(r.dataSources.map(a=>a.load())),YN(this.viewRoot),this.broadcast("dataLoaded"),await o,this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))this._glHelper.createRangeTexture(l)});for(const a of s)a.mark.finalizeGraphicsInitialization();t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(a=>hS(a,"size")),this._glHelper.invalidateSize()}async launch(){try{return this._prepareContainer(),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),this._glHelper.addEventListener("resize",()=>{this.computeLayout(),this.renderAll()}),!0}catch(e){const t=`${e.view?`At "${e.view.getPathString()}": `:""}${e.toString()}`;return console.error(e.stack),LDe(this.container,t),!1}finally{this.container.classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const e=this._glHelper.canvas,t=n=>{var s;if(n instanceof MouseEvent){n.type=="mousemove"&&(this.tooltip.handleMouseMove(n),this._tooltipUpdateRequested=!1,n.buttons==0&&this.renderPickingFramebuffer());const r=e.getBoundingClientRect(),o=new Pxe(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop),a=l=>{this.viewRoot.propagateInteractionEvent(new Oxe(o,l)),this._tooltipUpdateRequested||this.tooltip.clear()};if(n.type!="wheel"&&this._wheelInertia.cancel(),n.type=="mousemove")this._handlePicking(o.x,o.y);else if(n.type=="mousedown"||n.type=="mouseup")this.renderPickingFramebuffer();else if(n.type=="wheel"){this._tooltipUpdateRequested=!1;const l=n;if(Math.abs(l.deltaX)>Math.abs(l.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const h=Kxe(l);this._wheelInertia.setMomentum(l.deltaY*(l.deltaMode?80:1),c=>{const u=new WheelEvent("wheel",{...h,deltaMode:0,deltaX:0,deltaY:c});a(u)}),l.preventDefault();return}}if(n.type=="click"){const l=this._currentHover?{type:n.type,viewPath:this._currentHover.mark.unitView.getLayoutAncestors().map(h=>h.name).reverse(),datum:this._currentHover.datum}:{type:n.type,viewPath:null,datum:null};(s=this._eventListeners.get("click"))==null||s.forEach(h=>h(l))}a(n)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu"].forEach(n=>e.addEventListener(n,t)),e.addEventListener("mousedown",()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)}),e.addEventListener("dragstart",n=>n.stopPropagation())}_handlePicking(e,t){var n;const s=this._glHelper.readPickingPixel(e,t),r=s[0]|s[1]<<8|s[2]<<16;if(r==0){this._currentHover=null;return}if(r!==((n=this._currentHover)==null?void 0:n.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(o=>{if(o instanceof rr){if(o.mark.isPickingParticipant()){const a=o.mark.encoders.uniqueId.accessor;o.getCollector().visitData(l=>{a(l)==r&&(this._currentHover={mark:o.mark,datum:l,uniqueId:r})})}if(this._currentHover)return Nb}}),this._currentHover){const o=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async a=>{if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const h=(l==null?void 0:l.handler)??"default",c=this.tooltipHandlers[h];if(!c)throw new Error("No such tooltip handler: "+h);return c(a,o,l==null?void 0:l.params)}})}}updateTooltip(e,t){if(!this._tooltipUpdateRequested||!e)this.tooltip.updateWithDatum(e,t),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}computeLayout(){const e=this.viewRoot;if(!e)return;this.broadcast("layout");const t=this._glHelper.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}this._renderingContext=new VV({picking:!1},this._glHelper),this._pickingContext=new VV({picking:!0},this._glHelper),e.render(new Rxe(this._renderingContext,this._pickingContext),VL.create(0,0,t.width,t.height)),this.broadcast("layoutComputed")}renderAll(){var e;(e=this._renderingContext)==null||e.render(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){this._dirtyPickingBuffer&&(this._pickingContext.render(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof rr&&t.getAccessor("search")&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const n of Object.values(t.resolutions.scale))n.name&&e.set(n.name,n)}),e}}function LDe(i,e){const t=document.createElement("div");t.className="message-box";const n=document.createElement("div");n.textContent=e,t.appendChild(n),i.appendChild(t)}const EDe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNSI+PHBhdGggZD0iTTQuNyAyMS4ycy40IDIuMyAxLjMgMy42QzcgMjYgOS44IDI4IDkuOCAyOHMzLjQtMi42IDYuNC04LjVjMCAwIDEgLjEgMS45LS40LjktLjYuOC0uNCAxLTEuMiAwIDAgMi45LjUgNi42IDAgMi4xLS4zIDQuMy0xIDYuMi0yLjUgMCAwLTEuMS0xLjctMi41LTUuMS0uNS0xLjMtMi0xLjgtNC42LTQuNmwtOC4yIDguNi0xMS45IDYuOXoiIGZpbGwtb3BhY2l0eT0iLjEiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSIjN2ZiYmRkIi8+PHBhdGggZD0iTTEyLjQgMTUuNWMtLjctLjUtMi40LS44LTQuNC0uNC0yIC40LTQgMS4zLTQuOCAxLjgtLjUuMy0xLjIgMS0xLjIgMS40IDAgLjcuMyAxLjguOCAyLjQuMy4zLjcuNSAxLjQuNi44IDAgMi41LTEuNCAzLjUtMiAxLS42IDEuNi0uOCAyLjctMS4ybC0yLjkgMi40Yy0xLjMgMS4yLTIuMiAxLjUtMi40IDIuMyAwIC41IDAgMS40LjUgMS44LjQuNS42LjggMS42LjguNiAwIDEgMCAyLjYtMS41LjktLjkgMi4zLTMgMi43LTMuNy42LTEuMSAxLTIuMi43LTMtLjItMS0uNC0xLjQtLjgtMS43ek0xNy40IDE0LjJjLS4zLS41LS45LTEuMi0uMi0yLjVsMS45LTNjLjUtLjggMi0yLjMgMi42LTIuNi42LS40IDEuNS0uNiAyLS4yLjYuNCAxIDEgMS4zIDEuNS40LjYuNyAxLjMuMiAyLS43IDEtMS42LjktMi44IDEuNy0xLjIuOC0xLjkgMS4yLTIuNSAxLjlsMy44LTEuOGMxLjMtLjYgMi43LTEuMSAzLjQtLjcuOC41LjguNyAxIDEuNC4zIDEtLjIgMS45LS44IDIuNC0uNS42LTEuNS45LTIuNiAxLjItMS40LjQtNC41IDEtNS44LjUtMS4zLS41LTEuMy0xLjQtMS41LTEuOHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0iIzdmYmJkZCIvPjxwYXRoIGQ9Ik0xMy44IDE1LjNjLjkuOC42IDIgMS40IDEuOCAxLS4yIDEuNC0uOCAxLjMtMS41IDAtLjcgMC0uOC0uNC0xLjYtLjMtLjctMS0xLjEtMi0uNS0uNy41LTEuNCAxLjMtMS40IDEuM3MuMi0uMyAxLjEuNXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41Ii8+PC9zdmc+";async function ADe(i,e,t={}){let n;if(hn(i)){if(n=document.querySelector(i),!n)throw new Error(`No such element: ${i}`)}else if(i instanceof HTMLElement)n=i;else throw new Error(`Invalid element: ${i}`);let s;try{const r=$a(e)?e:await TDe(e);if(r.baseUrl??(r.baseUrl=""),r.width??(r.width="container"),r.padding??(r.padding=10),n==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",n.appendChild(o),n=o}s=new kDe(n,r,t),IDe(s,t),await s.launch()}catch(r){n.innerText=r.toString(),console.error(r)}return{finalize(){for(s.destroy();n.firstChild;)n.firstChild.remove()},addEventListener(r,o){const a=s._eventListeners;let l=a.get(r);l||(l=new Set,a.set(r,l)),l.add(o)},removeEventListener(r,o){var a;(a=s._eventListeners.get(r))==null||a.delete(o)},getScaleResolutionByName(r){return s.getNamedScaleResolutions().get(r)},updateNamedData:s.updateNamedData.bind(s)}}function IDe(i,e){e.namedDataProvider&&i.registerNamedDataProvider(e.namedDataProvider)}async function TDe(i){let e;try{e=JSON.parse(await tL().load(i))}catch(t){throw new Error(`Could not load or parse configuration: ${i}, reason: ${t.message}`)}if(!e.baseUrl){const t=i.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}function NDe(i,e,t=!0){let n,s=o=>{};return function(...a){return new Promise((l,h)=>{const c=()=>{clearTimeout(n),s=u=>{},l(i(...a))};t&&s("debounced"),clearTimeout(n),s=h,n=window.setTimeout(c,e)})}}const MDe=`{
  "data": {
    "sequence": { "start": 0, "stop": 60, "as": "x" }
  },
  "transform": [
    {
      "type": "formula",
      "expr": "sin((datum.x - 30) / 4) + (datum.x - 30) / 30",
      "as": "y"
    }
  ],
  "mark": "rect",
  "encoding": {
    "x": { "field": "x", "type": "index", "scale": { "padding": 0.1 } },
    "y": { "field": "y", "type": "quantitative" },
    "y2": { "datum": 0 },
    "color": {
      "field": "y",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [0],
        "range": ["#ed553b", "#20639b"]
      }
    }
  }
}
`;function RDe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,s){const r=s[0];return typeof e[r]<"u"?e[r]:n}),t}function v(i,e,...t){return RDe(e,t)}var zA;const TS="en";let aD=!1,lD=!1,NS=!1,mX=!1,_X=!1,b5=!1,nC,HA=TS,ODe,Pc;const ai=typeof self=="object"?self:typeof global=="object"?global:{};let ts;typeof ai.vscode<"u"&&typeof ai.vscode.process<"u"?ts=ai.vscode.process:typeof process<"u"&&(ts=process);const PDe=typeof((zA=ts==null?void 0:ts.versions)===null||zA===void 0?void 0:zA.electron)=="string"&&ts.type==="renderer";if(typeof navigator=="object"&&!PDe)Pc=navigator.userAgent,aD=Pc.indexOf("Windows")>=0,lD=Pc.indexOf("Macintosh")>=0,b5=(Pc.indexOf("Macintosh")>=0||Pc.indexOf("iPad")>=0||Pc.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,NS=Pc.indexOf("Linux")>=0,_X=!0,nC=navigator.language,HA=nC;else if(typeof ts=="object"){aD=ts.platform==="win32",lD=ts.platform==="darwin",NS=ts.platform==="linux",NS&&ts.env.SNAP&&ts.env.SNAP_REVISION,nC=TS,HA=TS;const i=ts.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];nC=e.locale,HA=t||TS,ODe=e._translationsConfigFile}catch{}mX=!0}else console.error("Unable to resolve platform.");const qn=aD,vt=lD,Ws=NS,lm=mX,ny=_X,Nu=b5,FDe=Pc,IM=function(){if(ai.setImmediate)return ai.setImmediate.bind(ai);if(typeof ai.postMessage=="function"&&!ai.importScripts){let t=[];ai.addEventListener("message",s=>{if(s.data&&s.data.vscodeSetImmediateId)for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.id===s.data.vscodeSetImmediateId){t.splice(r,1),a.callback();return}}});let n=0;return s=>{const r=++n;t.push({id:r,callback:s}),ai.postMessage({vscodeSetImmediateId:r},"*")}}if(typeof(ts==null?void 0:ts.nextTick)=="function")return ts.nextTick.bind(ts);const e=Promise.resolve();return t=>e.then(t)}(),Ao=lD||b5?2:aD?1:3;let qV=!0,GV=!1;function bX(){if(!GV){GV=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,qV=new Uint16Array(i.buffer)[0]===(2<<8)+1}return qV}const vX="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function BDe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of vX)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const wX=BDe();function hD(i){let e=wX;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const VDe={maxLen:1e3,windowSize:15,timeBudget:150};function cD(i,e,t,n,s=VDe){if(t.length>s.maxLen){let h=i-s.maxLen/2;return h<0?h=0:n+=h,t=t.substring(h,i+s.maxLen/2),cD(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let h=1;!(Date.now()-r>=s.timeBudget);h++){const c=o-s.windowSize*h;e.lastIndex=Math.max(0,c);const u=WDe(e,t,o,a);if(!u&&l||(l=u,c<=0))break;a=c}if(l){let h={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,h}return null}function WDe(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}const Fc=8;class yX{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class zDe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class CX{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class wn{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}compute(e,t,n){return n}}class Y0{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class Cg{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Be(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class ut extends Cg{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return Be(e,this.defaultValue)}}function TM(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class Jt extends Cg{constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}static clampedInt(e,t,n,s){return TM(e,t,n,s)}validate(e){return Jt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Il extends Cg{constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(Il.float(e,this.defaultValue))}}class tr extends Cg{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return tr.string(e,this.defaultValue)}}function Ms(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class en extends Cg{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return Ms(e,this.defaultValue,this._allowedValues)}}class M_ extends wn{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function HDe(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class UDe extends wn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[v("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),v("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),v("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:v("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class $De extends wn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:v("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:v("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Be(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Be(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function jDe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Dn;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(Dn||(Dn={}));function qDe(i){switch(i){case"line":return Dn.Line;case"block":return Dn.Block;case"underline":return Dn.Underline;case"line-thin":return Dn.LineThin;case"block-outline":return Dn.BlockOutline;case"underline-thin":return Dn.UnderlineThin}}class GDe extends Y0{constructor(){super(126,[65,33])}compute(e,t,n){const s=["monaco-editor"];return t.get(33)&&s.push(t.get(33)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(65)==="default"?s.push("mouse-default"):t.get(65)==="copy"&&s.push("mouse-copy"),t.get(99)&&s.push("showUnused"),t.get(124)&&s.push("showDeprecated"),s.join(" ")}}class KDe extends ut{constructor(){super(32,"emptySelectionClipboard",!0,{description:v("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class ZDe extends wn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:v("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[v("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),v("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),v("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:v("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[v("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),v("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),v("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:v("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:v("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:vt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:v("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:v("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Be(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ms(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ms(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Be(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Be(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Be(t.loop,this.defaultValue.loop)}}}class yr extends wn{constructor(){super(44,"fontLigatures",yr.OFF,{anyOf:[{type:"boolean",description:v("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:v("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:v("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?yr.OFF:e==="true"?yr.ON:e:e?yr.ON:yr.OFF}}yr.OFF='"liga" off, "calt" off';yr.ON='"liga" on, "calt" on';class YDe extends Y0{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class QDe extends Cg{constructor(){super(45,"fontSize",ws.fontSize,{type:"number",minimum:6,maximum:100,default:ws.fontSize,description:v("fontSize","Controls the font size in pixels.")})}validate(e){let t=Il.float(e,this.defaultValue);return t===0?ws.fontSize:Il.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class xl extends wn{constructor(){super(46,"fontWeight",ws.fontWeight,{anyOf:[{type:"number",minimum:xl.MINIMUM_VALUE,maximum:xl.MAXIMUM_VALUE,errorMessage:v("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:xl.SUGGESTION_VALUES}],default:ws.fontWeight,description:v("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Jt.clampedInt(e,ws.fontWeight,xl.MINIMUM_VALUE,xl.MAXIMUM_VALUE))}}xl.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];xl.MINIMUM_VALUE=1;xl.MAXIMUM_VALUE=1e3;class XDe extends wn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[v("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),v("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),v("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:v("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:v("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:v("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:v("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:v("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:v("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:v("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:v("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:v("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:v("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:v("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,s,r,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Ms(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Ms(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Ms(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:Ms(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:Ms(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:Ms(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:tr.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:tr.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:tr.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:tr.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:tr.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class JDe extends wn{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:v("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:v("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:v("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:v("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Be(t.enabled,this.defaultValue.enabled),delay:Jt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Be(t.sticky,this.defaultValue.sticky),above:Be(t.above,this.defaultValue.above)}}}class hm extends Y0{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(e,t,n){return hm.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,s=(e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,h=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,m=e.verticalScrollbarWidth,b=e.viewLineCount,_=e.remainingWidth,w=e.isViewportWrapping,y=u?2:3;let x=Math.floor(r*s);const L=x/r;let S=!1,k=!1,D=y*d,T=d/r,M=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:Ee,extraLinesBeyondLastLine:we,desiredRatio:Dt,minimapLineCount:$e}=hm.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:c,height:s,lineHeight:l,pixelRatio:r});if(b/$e>1)S=!0,k=!0,d=1,D=1,T=d/r;else{let pt=!1,lt=d+1;if(g==="fit"){const mi=Math.ceil((b+we)*D);w&&a&&_<=t.stableFitRemainingWidth?(pt=!0,lt=t.stableFitMaxMinimapScale):pt=mi>x}if(g==="fill"||pt){S=!0;const mi=d;D=Math.min(l*r,Math.max(1,Math.floor(1/Dt))),w&&a&&_<=t.stableFitRemainingWidth&&(lt=t.stableFitMaxMinimapScale),d=Math.min(lt,Math.max(1,Math.floor(D/y))),d>mi&&(M=Math.min(2,d/mi)),T=d/r/M,x=Math.ceil(Math.max(Ee,b+we)*D),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=_,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const j=Math.floor(f*T),$=Math.min(j,Math.max(0,Math.floor((_-m-2)*T/(h+T)))+Fc);let ie=Math.floor(r*$);const pe=ie/r;ie=Math.floor(ie*M);const be=u?1:2,ye=p==="left"?0:n-$-m;return{renderMinimap:be,minimapLeft:ye,minimapWidth:$,minimapHeightIsEditorHeight:S,minimapIsSampling:k,minimapScale:d,minimapLineHeight:D,minimapCanvasInnerWidth:ie,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:pe,minimapCanvasOuterHeight:L}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,h=t.pixelRatio,c=t.viewLineCount,u=e.get(121),d=u==="inherit"?e.get(120):u,f=d==="inherit"?e.get(116):d,g=e.get(119),p=e.get(2),m=t.isDominatedByLongLines,b=e.get(49),_=e.get(59).renderType!==0,w=e.get(60),y=e.get(93),x=e.get(64),L=e.get(91),S=L.verticalScrollbarSize,k=L.verticalHasArrows,D=L.arrowSize,T=L.horizontalScrollbarSize,M=e.get(57),j=e.get(37);let $;if(typeof M=="string"&&/^\d+(\.\d+)?ch$/.test(M)){const me=parseFloat(M.substr(0,M.length-2));$=Jt.clampedInt(me*a,0,0,1e3)}else $=Jt.clampedInt(M,0,0,1e3);j&&($+=16);let ie=0;if(_){const me=Math.max(o,w);ie=Math.round(me*l)}let pe=0;b&&(pe=r);let be=0,ye=be+pe,Ee=ye+ie,we=Ee+$;const Dt=n-pe-ie-$;let $e=!1,Qe=!1,pt=-1;p!==2&&(d==="inherit"&&m?($e=!0,Qe=!0):f==="on"||f==="bounded"?Qe=!0:f==="wordWrapColumn"&&(pt=g));const lt=hm._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:h,scrollBeyondLastLine:y,minimap:x,verticalScrollbarWidth:S,viewLineCount:c,remainingWidth:Dt,isViewportWrapping:Qe},t.memory||new CX);lt.renderMinimap!==0&&lt.minimapLeft===0&&(be+=lt.minimapWidth,ye+=lt.minimapWidth,Ee+=lt.minimapWidth,we+=lt.minimapWidth);const mi=Dt-lt.minimapWidth,te=Math.max(1,Math.floor((mi-S-2)/a)),se=k?D:0;return Qe&&(pt=Math.max(1,te),f==="bounded"&&(pt=Math.min(pt,g))),{width:n,height:s,glyphMarginLeft:be,glyphMarginWidth:pe,lineNumbersLeft:ye,lineNumbersWidth:ie,decorationsLeft:Ee,decorationsWidth:$,contentLeft:we,contentWidth:mi,minimap:lt,viewportColumn:te,isWordWrapMinified:$e,isViewportWrapping:Qe,wrappingColumn:pt,verticalScrollbarWidth:S,horizontalScrollbarHeight:T,overviewRuler:{top:se,width:S,height:s-2*se,right:0}}}}class eke extends wn{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:v("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Be(e.enabled,this.defaultValue.enabled)}}}class tke extends wn{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(125,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:v("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:v("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:v("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Be(t.enabled,this.defaultValue.enabled),fontSize:Jt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:tr.string(t.fontFamily,this.defaultValue.fontFamily)}}}class ike extends Il{constructor(){super(58,"lineHeight",ws.lineHeight,e=>Il.clamp(e,0,150),{markdownDescription:v("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class nke extends wn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:v("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[v("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),v("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),v("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:v("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:v("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:v("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:v("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:v("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:v("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Be(t.enabled,this.defaultValue.enabled),size:Ms(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ms(t.side,this.defaultValue.side,["right","left"]),showSlider:Ms(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Be(t.renderCharacters,this.defaultValue.renderCharacters),scale:Jt.clampedInt(t.scale,1,1,3),maxColumn:Jt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function ske(i){return i==="ctrlCmd"?vt?"metaKey":"ctrlKey":"altKey"}class rke extends wn{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Jt.clampedInt(t.top,0,0,1e3),bottom:Jt.clampedInt(t.bottom,0,0,1e3)}}}class oke extends wn{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:v("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:v("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Be(t.enabled,this.defaultValue.enabled),cycle:Be(t.cycle,this.defaultValue.cycle)}}}class ake extends Y0{constructor(){super(127)}compute(e,t,n){return e.pixelRatio}}class lke extends wn{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:v("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:v("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:v("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:v("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Be(t.other,this.defaultValue.other),comments:Be(t.comments,this.defaultValue.comments),strings:Be(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class hke extends wn{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[v("lineNumbers.off","Line numbers are not rendered."),v("lineNumbers.on","Line numbers are rendered as absolute number."),v("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),v("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:v("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function v5(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class cke extends wn{constructor(){const e=[],t={type:"number",description:v("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:v("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:v("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Jt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:Jt.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}function KV(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let uke=class extends wn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),v("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),v("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),v("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),v("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:v("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:v("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:v("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Jt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Jt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Jt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:KV(t.vertical,this.defaultValue.vertical),horizontal:KV(t.horizontal,this.defaultValue.horizontal),useShadows:Be(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Be(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Be(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Be(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Be(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Jt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Jt.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Be(t.scrollByPage,this.defaultValue.scrollByPage)}}};class dke extends wn{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:v("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Be(t.enabled,this.defaultValue.enabled),mode:Ms(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class fke extends wn{constructor(){const e={enabled:is.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:v("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Be(e.enabled,this.defaultValue.enabled)}}}class gke extends wn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairs.true","Enables bracket pair guides."),v("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),v("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:v("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),v("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),v("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:v("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:v("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:v("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:v("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:ZV(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:ZV(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Be(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Be(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Be(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function ZV(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class pke extends wn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[v("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),v("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:v("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:v("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:v("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:v("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:v("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:v("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:v("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:v("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:v("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:v("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:v("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ms(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Be(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Be(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Be(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Be(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Be(t.showIcons,this.defaultValue.showIcons),showStatusBar:Be(t.showStatusBar,this.defaultValue.showStatusBar),preview:Be(t.preview,this.defaultValue.preview),previewMode:Ms(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Be(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Be(t.showMethods,this.defaultValue.showMethods),showFunctions:Be(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Be(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Be(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Be(t.showFields,this.defaultValue.showFields),showVariables:Be(t.showVariables,this.defaultValue.showVariables),showClasses:Be(t.showClasses,this.defaultValue.showClasses),showStructs:Be(t.showStructs,this.defaultValue.showStructs),showInterfaces:Be(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Be(t.showModules,this.defaultValue.showModules),showProperties:Be(t.showProperties,this.defaultValue.showProperties),showEvents:Be(t.showEvents,this.defaultValue.showEvents),showOperators:Be(t.showOperators,this.defaultValue.showOperators),showUnits:Be(t.showUnits,this.defaultValue.showUnits),showValues:Be(t.showValues,this.defaultValue.showValues),showConstants:Be(t.showConstants,this.defaultValue.showConstants),showEnums:Be(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Be(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Be(t.showKeywords,this.defaultValue.showKeywords),showWords:Be(t.showWords,this.defaultValue.showWords),showColors:Be(t.showColors,this.defaultValue.showColors),showFiles:Be(t.showFiles,this.defaultValue.showFiles),showReferences:Be(t.showReferences,this.defaultValue.showReferences),showFolders:Be(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Be(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Be(t.showSnippets,this.defaultValue.showSnippets),showUsers:Be(t.showUsers,this.defaultValue.showUsers),showIssues:Be(t.showIssues,this.defaultValue.showIssues)}}}class mke extends wn{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:v("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Be(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class _ke extends Y0{constructor(){super(128,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function bke(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class vke extends Y0{constructor(){super(130,[129])}compute(e,t,n){const s=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}const wke="Consolas, 'Courier New', monospace",yke="Menlo, Monaco, 'Courier New', monospace",Cke="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",ws={fontFamily:vt?yke:Ws?Cke:wke,fontWeight:"normal",fontSize:vt?12:14,lineHeight:0,letterSpacing:0},is={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},Pp=[];function ue(i){return Pp[i.id]=i,i}const Sg={acceptSuggestionOnCommitCharacter:ue(new ut(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:v("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ue(new en(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",v("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:v("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ue(new UDe),accessibilityPageSize:ue(new Jt(3,"accessibilityPageSize",10,1,1073741824,{description:v("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:ue(new tr(4,"ariaLabel",v("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:ue(new en(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),v("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:v("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:ue(new en(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ue(new en(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ue(new en(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),v("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:v("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ue(new M_(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],HDe,{enumDescriptions:[v("editor.autoIndent.none","The editor will not insert indentation automatically."),v("editor.autoIndent.keep","The editor will keep the current line's indentation."),v("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),v("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),v("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:v("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ue(new ut(10,"automaticLayout",!1)),autoSurround:ue(new en(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[v("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),v("editor.autoSurround.quotes","Surround with quotes but not brackets."),v("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:v("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ue(new fke),bracketPairGuides:ue(new gke),stickyTabStops:ue(new ut(103,"stickyTabStops",!1,{description:v("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ue(new ut(14,"codeLens",!0,{description:v("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ue(new tr(15,"codeLensFontFamily","",{description:v("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ue(new Jt(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:v("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:ue(new ut(17,"colorDecorators",!0,{description:v("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:ue(new ut(18,"columnSelection",!1,{description:v("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ue(new $De),contextmenu:ue(new ut(20,"contextmenu",!0)),copyWithSyntaxHighlighting:ue(new ut(21,"copyWithSyntaxHighlighting",!0,{description:v("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ue(new M_(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],jDe,{description:v("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ue(new ut(23,"cursorSmoothCaretAnimation",!1,{description:v("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ue(new M_(24,"cursorStyle",Dn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],qDe,{description:v("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ue(new Jt(25,"cursorSurroundingLines",0,0,1073741824,{description:v("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ue(new en(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[v("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),v("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:v("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:ue(new Jt(27,"cursorWidth",0,0,1073741824,{markdownDescription:v("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ue(new ut(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:ue(new ut(29,"disableMonospaceOptimizations",!1)),domReadOnly:ue(new ut(30,"domReadOnly",!1)),dragAndDrop:ue(new ut(31,"dragAndDrop",!0,{description:v("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ue(new KDe),extraEditorClassName:ue(new tr(33,"extraEditorClassName","")),fastScrollSensitivity:ue(new Il(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:v("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ue(new ZDe),fixedOverflowWidgets:ue(new ut(36,"fixedOverflowWidgets",!1)),folding:ue(new ut(37,"folding",!0,{description:v("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ue(new en(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[v("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),v("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:v("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ue(new ut(39,"foldingHighlight",!0,{description:v("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ue(new ut(40,"foldingImportsByDefault",!1,{description:v("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:ue(new ut(41,"unfoldOnClickAfterEndOfLine",!1,{description:v("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ue(new tr(42,"fontFamily",ws.fontFamily,{description:v("fontFamily","Controls the font family.")})),fontInfo:ue(new YDe),fontLigatures2:ue(new yr),fontSize:ue(new QDe),fontWeight:ue(new xl),formatOnPaste:ue(new ut(47,"formatOnPaste",!1,{description:v("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ue(new ut(48,"formatOnType",!1,{description:v("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ue(new ut(49,"glyphMargin",!0,{description:v("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ue(new XDe),hideCursorInOverviewRuler:ue(new ut(51,"hideCursorInOverviewRuler",!1,{description:v("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ue(new JDe),inDiffEditor:ue(new ut(53,"inDiffEditor",!1)),letterSpacing:ue(new Il(55,"letterSpacing",ws.letterSpacing,i=>Il.clamp(i,-5,20),{description:v("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ue(new eke),lineDecorationsWidth:ue(new Cg(57,"lineDecorationsWidth",10)),lineHeight:ue(new ike),lineNumbers:ue(new hke),lineNumbersMinChars:ue(new Jt(60,"lineNumbersMinChars",5,1,300)),linkedEditing:ue(new ut(61,"linkedEditing",!1,{description:v("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:ue(new ut(62,"links",!0,{description:v("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ue(new en(63,"matchBrackets","always",["always","near","never"],{description:v("matchBrackets","Highlight matching brackets.")})),minimap:ue(new nke),mouseStyle:ue(new en(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ue(new Il(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:v("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ue(new ut(67,"mouseWheelZoom",!1,{markdownDescription:v("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ue(new ut(68,"multiCursorMergeOverlapping",!0,{description:v("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ue(new M_(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],ske,{markdownEnumDescriptions:[v("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:v({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ue(new en(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[v("multiCursorPaste.spread","Each cursor pastes a single line of the text."),v("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:v("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:ue(new ut(71,"occurrencesHighlight",!0,{description:v("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:ue(new ut(72,"overviewRulerBorder",!0,{description:v("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ue(new Jt(73,"overviewRulerLanes",3,0,3)),padding:ue(new rke),parameterHints:ue(new oke),peekWidgetDefaultFocus:ue(new en(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[v("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),v("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:v("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:ue(new ut(77,"definitionLinkOpensInPeek",!1,{description:v("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ue(new lke),quickSuggestionsDelay:ue(new Jt(79,"quickSuggestionsDelay",10,0,1073741824,{description:v("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ue(new ut(80,"readOnly",!1)),renameOnType:ue(new ut(81,"renameOnType",!1,{description:v("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:v("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ue(new ut(82,"renderControlCharacters",!0,{description:v("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ue(new ut(83,"renderFinalNewline",!0,{description:v("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ue(new en(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",v("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:v("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ue(new ut(85,"renderLineHighlightOnlyWhenFocus",!1,{description:v("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ue(new en(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ue(new en(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",v("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),v("renderWhitespace.selection","Render whitespace characters only on selected text."),v("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:v("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ue(new Jt(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:ue(new ut(89,"roundedSelection",!0,{description:v("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ue(new cke),scrollbar:ue(new uke),scrollBeyondLastColumn:ue(new Jt(92,"scrollBeyondLastColumn",5,0,1073741824,{description:v("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ue(new ut(93,"scrollBeyondLastLine",!0,{description:v("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ue(new ut(94,"scrollPredominantAxis",!0,{description:v("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ue(new ut(95,"selectionClipboard",!0,{description:v("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Ws})),selectionHighlight:ue(new ut(96,"selectionHighlight",!0,{description:v("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ue(new ut(97,"selectOnLineNumbers",!0)),showFoldingControls:ue(new en(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[v("showFoldingControls.always","Always show the folding controls."),v("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:v("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ue(new ut(99,"showUnused",!0,{description:v("showUnused","Controls fading out of unused code.")})),showDeprecated:ue(new ut(124,"showDeprecated",!0,{description:v("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ue(new tke),snippetSuggestions:ue(new en(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[v("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),v("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),v("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),v("snippetSuggestions.none","Do not show snippet suggestions.")],description:v("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ue(new mke),smoothScrolling:ue(new ut(102,"smoothScrolling",!1,{description:v("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ue(new Jt(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ue(new pke),inlineSuggest:ue(new dke),suggestFontSize:ue(new Jt(106,"suggestFontSize",0,0,1e3,{markdownDescription:v("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:ue(new Jt(107,"suggestLineHeight",0,0,1e3,{markdownDescription:v("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:ue(new ut(108,"suggestOnTriggerCharacters",!0,{description:v("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ue(new en(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[v("suggestSelection.first","Always select the first suggestion."),v("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),v("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:v("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ue(new en(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[v("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),v("tabCompletion.off","Disable tab completions."),v("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:v("tabCompletion","Enables tab completions.")})),tabIndex:ue(new Jt(111,"tabIndex",0,-1,1073741824)),unusualLineTerminators:ue(new en(112,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[v("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),v("unusualLineTerminators.off","Unusual line terminators are ignored."),v("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:v("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ue(new ut(113,"useShadowDOM",!0)),useTabStops:ue(new ut(114,"useTabStops",!0,{description:v("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:ue(new tr(115,"wordSeparators",vX,{description:v("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ue(new en(116,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),v({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:v({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ue(new tr(117,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:ue(new tr(118,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:ue(new Jt(119,"wordWrapColumn",80,1,1073741824,{markdownDescription:v({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ue(new en(120,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ue(new en(121,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:ue(new M_(122,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],bke,{enumDescriptions:[v("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),v("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),v("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),v("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:v("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:ue(new en(123,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[v("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),v("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:v("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:ue(new GDe),pixelRatio:ue(new ake),tabFocusMode:ue(new _ke),layoutInfo:ue(new hm),wrappingInfo:ue(new vke)};class Ske{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const SX=new Ske;function nt(i){sd(i)||SX.onUnexpectedError(i)}function ta(i){sd(i)||SX.onUnexpectedExternalError(i)}function YV(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const NM="Canceled";function sd(i){return i instanceof Error&&i.name===NM&&i.message===NM}function Q0(){const i=new Error(NM);return i.name=i.message,i}function Bl(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function xke(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class Dke extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function zf(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var bt;(function(i){function e(_){return _&&typeof _=="object"&&typeof _[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(_){yield _}i.single=s;function r(_){return _||t}i.from=r;function o(_){return!_||_[Symbol.iterator]().next().done===!0}i.isEmpty=o;function a(_){return _[Symbol.iterator]().next().value}i.first=a;function l(_,w){for(const y of _)if(w(y))return!0;return!1}i.some=l;function h(_,w){for(const y of _)if(w(y))return y}i.find=h;function*c(_,w){for(const y of _)w(y)&&(yield y)}i.filter=c;function*u(_,w){let y=0;for(const x of _)yield w(x,y++)}i.map=u;function*d(..._){for(const w of _)for(const y of w)yield y}i.concat=d;function*f(_){for(const w of _)for(const y of w)yield y}i.concatNested=f;function g(_,w,y){let x=y;for(const L of _)x=w(x,L);return x}i.reduce=g;function*p(_,w,y=_.length){for(w<0&&(w+=_.length),y<0?y+=_.length:y>_.length&&(y=_.length);w<y;w++)yield _[w]}i.slice=p;function m(_,w=Number.POSITIVE_INFINITY){const y=[];if(w===0)return[y,_];const x=_[Symbol.iterator]();for(let L=0;L<w;L++){const S=x.next();if(S.done)return[y,i.empty()];y.push(S.value)}return[y,{[Symbol.iterator](){return x}}]}i.consume=m;function b(_,w,y=(x,L)=>x===L){const x=_[Symbol.iterator](),L=w[Symbol.iterator]();for(;;){const S=x.next(),k=L.next();if(S.done!==k.done)return!1;if(S.done)return!0;if(!y(S.value,k.value))return!1}}i.equals=b})(bt||(bt={}));class kke extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function xX(i){return typeof i.dispose=="function"&&i.dispose.length===0}function mt(i){if(bt.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new kke(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function uu(...i){return xt(()=>mt(i))}function xt(i){return{dispose:zf(()=>{i()})}}class ve{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{mt(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ve.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}ve.DISABLE_DISPOSED_WARNING=!1;class ne{constructor(){this._store=new ve,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}ne.None=Object.freeze({dispose(){}});class Vr{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class Lke{constructor(e){this.object=e}dispose(){}}let Wi=class MM{constructor(e){this.element=e,this.next=MM.Undefined,this.prev=MM.Undefined}};Wi.Undefined=new Wi(void 0);class Ar{constructor(){this._first=Wi.Undefined,this._last=Wi.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Wi.Undefined}clear(){let e=this._first;for(;e!==Wi.Undefined;){const t=e.next;e.prev=Wi.Undefined,e.next=Wi.Undefined,e=t}this._first=Wi.Undefined,this._last=Wi.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Wi(e);if(this._first===Wi.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Wi.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Wi.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Wi.Undefined&&e.next!==Wi.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Wi.Undefined&&e.next===Wi.Undefined?(this._first=Wi.Undefined,this._last=Wi.Undefined):e.next===Wi.Undefined?(this._last=this._last.prev,this._last.next=Wi.Undefined):e.prev===Wi.Undefined&&(this._first=this._first.next,this._first.prev=Wi.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Wi.Undefined;)yield e.element,e=e.next}}const Eke=ai.performance&&typeof ai.performance.now=="function";class hc{constructor(e){this._highResolution=Eke&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new hc(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ai.performance.now():Date.now()}}var Re;(function(i){i.None=()=>ne.None;function e(_){return(w,y=null,x)=>{let L=!1,S;return S=_(k=>{if(!L)return S?S.dispose():L=!0,w.call(y,k)},null,x),L&&S.dispose(),S}}i.once=e;function t(_,w){return l((y,x=null,L)=>_(S=>y.call(x,w(S)),null,L))}i.map=t;function n(_,w){return l((y,x=null,L)=>_(S=>{w(S),y.call(x,S)},null,L))}i.forEach=n;function s(_,w){return l((y,x=null,L)=>_(S=>w(S)&&y.call(x,S),null,L))}i.filter=s;function r(_){return _}i.signal=r;function o(..._){return(w,y=null,x)=>uu(..._.map(L=>L(S=>w.call(y,S),null,x)))}i.any=o;function a(_,w,y){let x=y;return t(_,L=>(x=w(x,L),x))}i.reduce=a;function l(_){let w;const y=new H({onFirstListenerAdd(){w=_(y.fire,y)},onLastListenerRemove(){w.dispose()}});return y.event}function h(_,w,y=100,x=!1,L){let S,k,D,T=0;const M=new H({leakWarningThreshold:L,onFirstListenerAdd(){S=_(j=>{T++,k=w(k,j),x&&!D&&(M.fire(k),k=void 0),clearTimeout(D),D=setTimeout(()=>{const $=k;k=void 0,D=void 0,(!x||T>1)&&M.fire($),T=0},y)})},onLastListenerRemove(){S.dispose()}});return M.event}i.debounce=h;function c(_,w=(y,x)=>y===x){let y=!0,x;return s(_,L=>{const S=y||!w(L,x);return y=!1,x=L,S})}i.latch=c;function u(_,w){return[i.filter(_,w),i.filter(_,y=>!w(y))]}i.split=u;function d(_,w=!1,y=[]){let x=y.slice(),L=_(D=>{x?x.push(D):k.fire(D)});const S=()=>{x&&x.forEach(D=>k.fire(D)),x=null},k=new H({onFirstListenerAdd(){L||(L=_(D=>k.fire(D)))},onFirstListenerDidAdd(){x&&(w?setTimeout(S):S())},onLastListenerRemove(){L&&L.dispose(),L=null}});return k.event}i.buffer=d;class f{constructor(w){this.event=w}map(w){return new f(t(this.event,w))}forEach(w){return new f(n(this.event,w))}filter(w){return new f(s(this.event,w))}reduce(w,y){return new f(a(this.event,w,y))}latch(){return new f(c(this.event))}debounce(w,y=100,x=!1,L){return new f(h(this.event,w,y,x,L))}on(w,y,x){return this.event(w,y,x)}once(w,y,x){return e(this.event)(w,y,x)}}function g(_){return new f(_)}i.chain=g;function p(_,w,y=x=>x){const x=(...D)=>k.fire(y(...D)),L=()=>_.on(w,x),S=()=>_.removeListener(w,x),k=new H({onFirstListenerAdd:L,onLastListenerRemove:S});return k.event}i.fromNodeEventEmitter=p;function m(_,w,y=x=>x){const x=(...D)=>k.fire(y(...D)),L=()=>_.addEventListener(w,x),S=()=>_.removeEventListener(w,x),k=new H({onFirstListenerAdd:L,onLastListenerRemove:S});return k.event}i.fromDOMEventEmitter=m;function b(_){return new Promise(w=>e(_)(w))}i.toPromise=b})(Re||(Re={}));class WL{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${WL._idPool++}`}start(e){this._stopWatch=new hc(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}WL._idPool=0;let H=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new WL(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var s;this._listeners||(this._listeners=new Ar);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(s=this._leakageMon)===null||s===void 0?void 0:s.check(this._listeners.size),l=xt(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof ve?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Ar);for(let s of this._listeners)this._deliveryQueue.push([s,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[s,r]=this._deliveryQueue.shift();try{typeof s=="function"?s.call(void 0,r):s[0].call(s[1],r)}catch(o){nt(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,s,r;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(s=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||s===void 0||s.call(n),(r=this._leakageMon)===null||r===void 0||r.dispose())}};class uD extends H{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Ar,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Ake extends uD{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class w5{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,s)=>e(r=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,r)):t.call(n,r)},void 0,s)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(s=>s()),n}}class QV{constructor(){this.listening=!1,this.inputEvent=Re.None,this.inputEventListener=ne.None,this.emitter=new H({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const DX=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var ri;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof MS?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Re.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:DX})})(ri||(ri={}));class MS{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?DX:(this._emitter||(this._emitter=new H),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Ya{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new MS),this._token}cancel(){this._token?this._token instanceof MS&&this._token.cancel():this._token=ri.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof MS&&this._token.dispose():this._token=ri.None}}class y5{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const RS=new y5,RM=new y5,OM=new y5,kX=new Array(230),Ike=Object.create(null),Tke=Object.create(null),C5=[];for(let i=0;i<=193;i++)C5[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const s of e){const[r,o,a,l,h,c,u,d,f,g]=s;if(n[a]||(n[a]=!0,Ike[l]=a,Tke[l.toLowerCase()]=a,o&&(C5[a]=h)),!t[h]){if(t[h]=!0,!c)throw new Error(`String representation missing for key code ${h} around scan code ${l}`);RS.define(h,c),RM.define(h,f||c),OM.define(h,g||f||c)}u&&(kX[u]=h)}})();var Zd;(function(i){function e(a){return RS.keyCodeToStr(a)}i.toString=e;function t(a){return RS.strToKeyCode(a)}i.fromString=t;function n(a){return RM.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return OM.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return RM.strToKeyCode(a)||OM.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return RS.keyCodeToStr(a)}i.toElectronAccelerator=o})(Zd||(Zd={}));function $s(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}let cm;if(typeof ai.vscode<"u"&&typeof ai.vscode.process<"u"){const i=ai.vscode.process;cm={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()},nextTick(e){return IM(e)}}}else typeof process<"u"?cm={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()},nextTick(i){return process.nextTick(i)}}:cm={get platform(){return qn?"win32":vt?"darwin":"linux"},get arch(){},nextTick(i){return IM(i)},get env(){return{}},cwd(){return"/"}};const PM=cm.cwd,Nke=cm.env,xg=cm.platform,Mke=65,Rke=97,Oke=90,Pke=122,du=46,Jn=47,mr=92,xc=58,Fke=63;class LX extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function pn(i,e){if(typeof i!="string")throw new LX(e,"string",i)}function Et(i){return i===Jn||i===mr}function FM(i){return i===Jn}function Dc(i){return i>=Mke&&i<=Oke||i>=Rke&&i<=Pke}function dD(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let h=0;h<=i.length;++h){if(h<i.length)l=i.charCodeAt(h);else{if(n(l))break;l=Jn}if(n(l)){if(!(o===h-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==du||s.charCodeAt(s.length-2)!==du){if(s.length>2){const c=s.lastIndexOf(t);c===-1?(s="",r=0):(s=s.slice(0,c),r=s.length-1-s.lastIndexOf(t)),o=h,a=0;continue}else if(s.length!==0){s="",r=0,o=h,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,h)}`:s=i.slice(o+1,h),r=h-o-1;o=h,a=0}else l===du&&a!==-1?++a:a=-1}return s}function EX(i,e){if(e===null||typeof e!="object")throw new LX("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const or={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],pn(r,"path"),r.length===0)continue}else e.length===0?r=PM():(r=Nke[`=${e}`]||PM(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===mr)&&(r=`${e}\\`));const o=r.length;let a=0,l="",h=!1;const c=r.charCodeAt(0);if(o===1)Et(c)&&(a=1,h=!0);else if(Et(c))if(h=!0,Et(r.charCodeAt(1))){let u=2,d=u;for(;u<o&&!Et(r.charCodeAt(u));)u++;if(u<o&&u!==d){const f=r.slice(d,u);for(d=u;u<o&&Et(r.charCodeAt(u));)u++;if(u<o&&u!==d){for(d=u;u<o&&!Et(r.charCodeAt(u));)u++;(u===o||u!==d)&&(l=`\\\\${f}\\${r.slice(d,u)}`,a=u)}}}else a=1;else Dc(c)&&r.charCodeAt(1)===xc&&(l=r.slice(0,2),a=2,o>2&&Et(r.charCodeAt(2))&&(h=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=h,h&&e.length>0)break}return t=dD(t,!n,"\\",Et),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){pn(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return FM(r)?"\\":i;if(Et(r))if(s=!0,Et(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Et(i.charCodeAt(a));)a++;if(a<e&&a!==l){const h=i.slice(l,a);for(l=a;a<e&&Et(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Et(i.charCodeAt(a));)a++;if(a===e)return`\\\\${h}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${h}\\${i.slice(l,a)}`,t=a)}}}else t=1;else Dc(r)&&i.charCodeAt(1)===xc&&(n=i.slice(0,2),t=2,e>2&&Et(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?dD(i.slice(t),!s,"\\",Et):"";return o.length===0&&!s&&(o="."),o.length>0&&Et(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){pn(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return Et(t)||e>2&&Dc(t)&&i.charCodeAt(1)===xc&&Et(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];pn(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&Et(t.charCodeAt(0))){++s;const r=t.length;r>1&&Et(t.charCodeAt(1))&&(++s,r>2&&(Et(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&Et(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return or.normalize(e)},relative(i,e){if(pn(i,"from"),pn(e,"to"),i===e)return"";const t=or.resolve(i),n=or.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===mr;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===mr;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===mr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===mr;)l--;const h=l-a,c=o<h?o:h;let u=-1,d=0;for(;d<c;d++){const g=i.charCodeAt(s+d);if(g!==e.charCodeAt(a+d))break;g===mr&&(u=d)}if(d!==c){if(u===-1)return n}else{if(h>c){if(e.charCodeAt(a+d)===mr)return n.slice(a+d+1);if(d===2)return n.slice(a+d)}o>c&&(i.charCodeAt(s+d)===mr?u=d:d===2&&(u=3)),u===-1&&(u=0)}let f="";for(d=s+u+1;d<=r;++d)(d===r||i.charCodeAt(d)===mr)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===mr&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=or.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===mr){if(e.charCodeAt(1)===mr){const t=e.charCodeAt(2);if(t!==Fke&&t!==du)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Dc(e.charCodeAt(0))&&e.charCodeAt(1)===xc&&e.charCodeAt(2)===mr)return`\\\\?\\${e}`;return i},dirname(i){pn(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return Et(s)?i:".";if(Et(s)){if(t=n=1,Et(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Et(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Et(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Et(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else Dc(s)&&i.charCodeAt(1)===xc&&(t=e>2&&Et(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(Et(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&pn(e,"ext"),pn(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&Dc(i.charCodeAt(0))&&i.charCodeAt(1)===xc&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(Et(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(Et(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){pn(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===xc&&Dc(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(Et(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===du?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:EX.bind(null,"\\"),parse(i){pn(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return Et(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Et(s)){if(n=1,Et(i.charCodeAt(1))){let u=2,d=u;for(;u<t&&!Et(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&Et(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&!Et(i.charCodeAt(u));)u++;u===t?n=u:u!==d&&(n=u+1)}}}}else if(Dc(s)&&i.charCodeAt(1)===xc){if(t<=2)return e.root=e.dir=i,e;if(n=2,Et(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,h=i.length-1,c=0;for(;h>=n;--h){if(s=i.charCodeAt(h),Et(s)){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),s===du?r===-1?r=h:c!==1&&(c=1):r!==-1&&(c=-1)}return a!==-1&&(r===-1||c===0||c===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},ln={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:PM();pn(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Jn)}return e=dD(e,!t,"/",FM),t?`/${e}`:e.length>0?e:"."},normalize(i){if(pn(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Jn,t=i.charCodeAt(i.length-1)===Jn;return i=dD(i,!e,"/",FM),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return pn(i,"path"),i.length>0&&i.charCodeAt(0)===Jn},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];pn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ln.normalize(e)},relative(i,e){if(pn(i,"from"),pn(e,"to"),i===e||(i=ln.resolve(i),e=ln.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,h=0;for(;h<a;h++){const u=i.charCodeAt(t+h);if(u!==e.charCodeAt(r+h))break;u===Jn&&(l=h)}if(h===a)if(o>a){if(e.charCodeAt(r+h)===Jn)return e.slice(r+h+1);if(h===0)return e.slice(r+h)}else s>a&&(i.charCodeAt(t+h)===Jn?l=h:h===0&&(l=0));let c="";for(h=t+l+1;h<=n;++h)(h===n||i.charCodeAt(h)===Jn)&&(c+=c.length===0?"..":"/..");return`${c}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(pn(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Jn;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===Jn){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&pn(e,"ext"),pn(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===Jn){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===Jn){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){pn(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===Jn){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===du?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:EX.bind(null,"/"),parse(i){pn(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Jn;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,h=0;for(;l>=n;--l){const c=i.charCodeAt(l);if(c===Jn){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),c===du?s===-1?s=l:h!==1&&(h=1):s!==-1&&(h=-1)}if(o!==-1){const c=r===0&&t?1:r;s===-1||h===0||h===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(c,o):(e.name=i.slice(c,s),e.base=i.slice(c,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ln.win32=or.win32=or;ln.posix=or.posix=ln;const S5=xg==="win32"?or.normalize:ln.normalize,Bke=xg==="win32"?or.resolve:ln.resolve,Vke=xg==="win32"?or.relative:ln.relative,AX=xg==="win32"?or.dirname:ln.dirname,uf=xg==="win32"?or.basename:ln.basename,Wke=xg==="win32"?or.extname:ln.extname,OS=xg==="win32"?or.sep:ln.sep,zke=/^\w[\w\d+.-]*$/,Hke=/^\//,Uke=/^\/\//;function XV(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!zke.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!Hke.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Uke.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function $ke(i,e){return!i&&!e?"file":i}function jke(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==pa&&(e=pa+e):e=pa;break}return e}const xi="",pa="/",qke=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ke{constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||xi,this.authority=e.authority||xi,this.path=e.path||xi,this.query=e.query||xi,this.fragment=e.fragment||xi):(this.scheme=$ke(e,o),this.authority=t||xi,this.path=jke(this.scheme,n||xi),this.query=s||xi,this.fragment=r||xi,XV(this,o))}static isUri(e){return e instanceof Ke?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return fD(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=xi),n===void 0?n=this.authority:n===null&&(n=xi),s===void 0?s=this.path:s===null&&(s=xi),r===void 0?r=this.query:r===null&&(r=xi),o===void 0?o=this.fragment:o===null&&(o=xi),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new np(t,n,s,r,o)}static parse(e,t=!1){const n=qke.exec(e);return n?new np(n[2]||xi,sC(n[4]||xi),sC(n[5]||xi),sC(n[7]||xi),sC(n[9]||xi),t):new np(xi,xi,xi,xi,xi)}static file(e){let t=xi;if(qn&&(e=e.replace(/\\/g,pa)),e[0]===pa&&e[1]===pa){const n=e.indexOf(pa,2);n===-1?(t=e.substring(2),e=pa):(t=e.substring(2,n),e=e.substring(n)||pa)}return new np("file",t,e,xi,xi)}static from(e){const t=new np(e.scheme,e.authority,e.path,e.query,e.fragment);return XV(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return qn&&e.scheme==="file"?n=Ke.file(or.join(fD(e,!0),...t)).path:n=ln.join(e.path,...t),e.with({path:n})}toString(e=!1){return BM(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ke)return e;{const t=new np(e);return t._formatted=e.external,t._fsPath=e._sep===IX?e.fsPath:null,t}}else return e}}const IX=qn?1:void 0;class np extends Ke{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=fD(this,!1)),this._fsPath}toString(e=!1){return e?BM(this,!0):(this._formatted||(this._formatted=BM(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=IX),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const TX={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function JV(i,e){let t,n=-1;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t!==void 0&&(t+=i.charAt(s));else{t===void 0&&(t=i.substr(0,s));const o=TX[r];o!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t+=o):n===-1&&(n=s)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function Gke(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=TX[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function fD(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,qn&&(t=t.replace(/\//g,"\\")),t}function BM(i,e){const t=e?Gke:JV;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=pa,n+=pa),r){let h=r.indexOf("@");if(h!==-1){const c=r.substr(0,h);r=r.substr(h+1),h=c.indexOf(":"),h===-1?n+=t(c,!1):(n+=t(c.substr(0,h),!1),n+=":",n+=t(c.substr(h+1),!1)),n+="@"}r=r.toLowerCase(),h=r.indexOf(":"),h===-1?n+=t(r,!1):(n+=t(r.substr(0,h),!1),n+=r.substr(h))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const h=o.charCodeAt(1);h>=65&&h<=90&&(o=`/${String.fromCharCode(h+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const h=o.charCodeAt(0);h>=65&&h<=90&&(o=`${String.fromCharCode(h+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:JV(l,!1)),n}function NX(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+NX(i.substr(3)):i}}const eW=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function sC(i){return i.match(eW)?i.replace(eW,e=>NX(e)):i}class K{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new K(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return K.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return K.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return K.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){let r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new K(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new K(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}let V=class Xn{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return Xn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Xn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return Xn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Xn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Xn.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new Xn(n,s,r,o)}intersectRanges(e){return Xn.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,h=t.endLineNumber,c=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>h?(r=h,o=c):r===h&&(o=Math.min(o,c)),n>r||n===r&&s>o?null:new Xn(n,s,r,o)}equalsRange(e){return Xn.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Xn.getEndPosition(this)}static getEndPosition(e){return new K(e.endLineNumber,e.endColumn)}getStartPosition(){return Xn.getStartPosition(this)}static getStartPosition(e){return new K(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Xn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Xn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Xn.collapseToStart(this)}static collapseToStart(e){return new Xn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new Xn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Xn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const h=e.endLineNumber|0,c=t.endLineNumber|0;if(h===c){const u=e.endColumn|0,d=t.endColumn|0;return u-d}return h-c}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}};class Ge extends V{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ge.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ge(this.startLineNumber,this.startColumn,e,t):new Ge(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new K(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ge(e,t,this.endLineNumber,this.endColumn):new Ge(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ge(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new Ge(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===0?new Ge(e,t,n,s):new Ge(n,s,e,t)}}let zL=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class x5{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class HL{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}var VM;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(VM||(VM={}));var WM;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(WM||(WM={}));var zM;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(zM||(zM={}));var HM;(function(i){i[i.Deprecated=1]="Deprecated"})(HM||(HM={}));var UM;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(UM||(UM={}));var $M;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})($M||($M={}));var jM;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(jM||(jM={}));var qM;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(qM||(qM={}));var GM;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(GM||(GM={}));var KM;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(KM||(KM={}));var ZM;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unusualLineTerminators=112]="unusualLineTerminators",i[i.useShadowDOM=113]="useShadowDOM",i[i.useTabStops=114]="useTabStops",i[i.wordSeparators=115]="wordSeparators",i[i.wordWrap=116]="wordWrap",i[i.wordWrapBreakAfterCharacters=117]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=118]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=119]="wordWrapColumn",i[i.wordWrapOverride1=120]="wordWrapOverride1",i[i.wordWrapOverride2=121]="wordWrapOverride2",i[i.wrappingIndent=122]="wrappingIndent",i[i.wrappingStrategy=123]="wrappingStrategy",i[i.showDeprecated=124]="showDeprecated",i[i.inlayHints=125]="inlayHints",i[i.editorClassName=126]="editorClassName",i[i.pixelRatio=127]="pixelRatio",i[i.tabFocusMode=128]="tabFocusMode",i[i.layoutInfo=129]="layoutInfo",i[i.wrappingInfo=130]="wrappingInfo"})(ZM||(ZM={}));var YM;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(YM||(YM={}));var QM;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(QM||(QM={}));var XM;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(XM||(XM={}));var JM;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(JM||(JM={}));var eR;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(eR||(eR={}));var tR;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(tR||(tR={}));var iR;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(iR||(iR={}));var nR;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(nR||(nR={}));var sR;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(sR||(sR={}));var rR;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(rR||(rR={}));var oR;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(oR||(oR={}));var aR;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(aR||(aR={}));var lR;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(lR||(lR={}));var hR;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(hR||(hR={}));var cR;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(cR||(cR={}));var uR;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(uR||(uR={}));var dR;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(dR||(dR={}));var fR;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(fR||(fR={}));var gR;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(gR||(gR={}));var pR;(function(i){i[i.Deprecated=1]="Deprecated"})(pR||(pR={}));var mR;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(mR||(mR={}));var _R;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(_R||(_R={}));var bR;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(bR||(bR={}));var vR;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(vR||(vR={}));class sy{static chord(e,t){return $s(e,t)}}sy.CtrlCmd=2048;sy.Shift=1024;sy.Alt=512;sy.WinCtrl=256;function MX(){return{editor:void 0,languages:void 0,CancellationTokenSource:Ya,Emitter:H,KeyCode:tR,KeyMod:sy,Position:K,Range:V,Selection:Ge,SelectionDirection:dR,MarkerSeverity:iR,MarkerTag:nR,Uri:Ke,Token:zL}}var ya;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(ya||(ya={}));const qt=kt("instantiationService");function RX(i,e,t,n){e[ya.DI_TARGET]===e?e[ya.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[ya.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[ya.DI_TARGET]=e)}function kt(i){if(ya.serviceIds.has(i))return ya.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");RX(e,t,s,!1)};return e.toString=()=>i,ya.serviceIds.set(i,e),e}function Kke(i){return function(e,t,n){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");RX(i,e,n,!0)}}const li=kt("codeEditorService");class Hf{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new H,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}Hf.INSTANCE=new Hf;function wR(){return Hf.INSTANCE.getZoomLevel()}function Zke(){return Hf.INSTANCE.getTimeSinceLastZoomLevelChanged()}function OX(i){return Hf.INSTANCE.onDidChangeZoomLevel(i)}function Yke(){return Hf.INSTANCE.getZoomFactor()}function gD(){return Hf.INSTANCE.getPixelRatio()}const ry=navigator.userAgent,Vs=ry.indexOf("Firefox")>=0,df=ry.indexOf("AppleWebKit")>=0,pD=ry.indexOf("Chrome")>=0,$o=!pD&&ry.indexOf("Safari")>=0,Qke=!pD&&!$o&&df,ub=ry.indexOf("Android")>=0,PX=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,UL={clipboard:{writeText:lm||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:lm||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>lm||PX?0:navigator.keyboard||$o?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function yR(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new mD([UA(t,e),UA(n,e)]):new mD([UA(t,e)])}function UA(i,e){const t=!!(i&2048),n=!!(i&256),s=e===2?n:t,r=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new Uf(s,r,o,a,l)}class Uf{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new mD([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class mD{constructor(e){if(e.length===0)throw Bl("parts");this.parts=e}}class Xke{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class Jke{}function eLe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return Zd.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(Vs){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(vt&&e===224)return 57}else if(df){if(e===91)return 57;if(vt&&e===93)return 57;if(!vt&&e===92)return 57}return kX[e]||0}const tLe=vt?256:2048,iLe=512,nLe=1024,sLe=vt?2048:256;class pi{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=eLe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=tLe),this.altKey&&(t|=iLe),this.shiftKey&&(t|=nLe),this.metaKey&&(t|=sLe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Uf(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let CR=!1,sp=null;function rLe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return CR=!0,null}catch{return CR=!0,null}return i.parent}class SR{static getSameOriginWindowChain(){if(!sp){sp=[];let e=window,t;do t=rLe(e),t?sp.push({window:e,iframeElement:e.frameElement||null}):sp.push({window:e,iframeElement:null}),e=t;while(e)}return sp.slice(0)}static hasDifferentOriginAncestor(){return sp||this.getSameOriginWindowChain(),CR}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain();for(const o of r){if(n+=o.window.scrollY,s+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,s+=a.left}return{top:n,left:s}}}class Jr{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=SR.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Ym{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let s=e,r=e;if(typeof s.wheelDeltaY<"u")this.deltaY=s.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS<"u"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Vs&&!vt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX<"u")$o&&qn?this.deltaX=-(s.wheelDeltaX/120):this.deltaX=s.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS<"u"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Vs&&!vt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var tW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function oLe(i){return!!i&&typeof i.then=="function"}function Wr(i){const e=new Ya,t=i(e.token),n=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),r(Q0())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel()}then(s,r){return n.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}function FX(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class aLe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}}class X0{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,s)=>{this.doResolve=n,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(Q0()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class lLe{constructor(e){this.delayer=new X0(e),this.throttler=new aLe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function a1(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(Q0())})}):Wr(t=>a1(i,t))}function Qm(i,e=0){const t=setTimeout(i,e);return xt(()=>clearTimeout(t))}class js{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class oy{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class yi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let xR;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?xR=i=>{const e=setTimeout(()=>{const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0,clearTimeout(e))}}}:xR=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class Ub{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=xR(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}var DR;(function(i){function e(n){return tW(this,void 0,void 0,function*(){let s;const r=yield Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r})}i.settled=e;function t(n){return new Promise((s,r)=>tW(this,void 0,void 0,function*(){try{yield n(s,r)}catch(o){r(o)}}))}i.withAsyncBody=t})(DR||(DR={}));var dt;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp"})(dt||(dt={}));class hLe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&tkn=${encodeURIComponent(r)}`),Ke.from({scheme:ny?this._preferredWebSchema:dt.vscodeRemoteResource,authority:`${n}:${s}`,path:"/vscode-remote-resource",query:o})}}const BX=new hLe;class l1{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===dt.vscodeRemote?BX.rewrite(n):n.scheme===dt.file&&(lm||typeof ai.importScripts=="function"&&ai.origin===`${dt.vscodeFileResource}://${l1.FALLBACK_AUTHORITY}`)?n.with({scheme:dt.vscodeFileResource,authority:n.authority||l1.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return Ke.isUri(e)?e:Ke.parse(t.toUrl(e))}}l1.FALLBACK_AUTHORITY="vscode-app";const VX=new l1;function jn(i){for(;i.firstChild;)i.firstChild.remove()}function D5(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class cLe{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function oe(i,e,t,n){return new cLe(i,e,t,n)}function WX(i){return function(e){return i(new Jr(e))}}function uLe(i){return function(e){return i(new pi(e))}}let cn=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"?r=WX(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=uLe(n)),oe(e,t,r,s)},dLe=function(e,t,n){let s=WX(t);return k5(e,s,n)};function k5(i,e,t){return oe(i,Nu&&UL.pointerEvents?Oe.POINTER_DOWN:Oe.MOUSE_DOWN,e,t)}function zX(i,e,t){return oe(i,Nu&&UL.pointerEvents?Oe.POINTER_UP:Oe.MOUSE_UP,e,t)}function L5(i,e){return oe(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function fLe(i,e){return oe(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}let $A=null;function gLe(i){if(!$A){const e=t=>setTimeout(()=>t(new Date().getTime()),0);$A=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return $A.call(self,i)}let HX,jl;class jA{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){nt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,s=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(jA.sort),e.shift().execute();n=!1};jl=(r,o=0)=>{let a=new jA(r,o);return i.push(a),t||(t=!0,gLe(s)),a},HX=(r,o)=>{if(n){let a=new jA(r,o);return e.push(a),a}else return jl(r,o)}})();const pLe=8,mLe=function(i,e){return e};class _Le extends ne{constructor(e,t,n,s=mLe,r=pLe){super();let o=null,a=0,l=this._register(new js),h=()=>{a=new Date().getTime(),n(o),o=null};this._register(oe(e,t,c=>{o=s(o,c);let u=new Date().getTime()-a;u>=r?(l.cancel(),h()):l.setIfNotSet(h,r-u)}))}}function E5(i,e,t,n,s){return new _Le(i,e,t,n,s)}function A5(i){return document.defaultView.getComputedStyle(i,null)}function $L(i){if(i!==document.body)return new jt(i.clientWidth,i.clientHeight);if(Nu&&window.visualViewport)return new jt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new jt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new jt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new jt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class wi{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let s=A5(e),r="0";return s&&(s.getPropertyValue?r=s.getPropertyValue(t):r=s.getAttribute(n)),wi.convertToPixels(e,r)}static getBorderLeftWidth(e){return wi.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return wi.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return wi.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return wi.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return wi.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return wi.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return wi.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return wi.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return wi.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return wi.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return wi.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return wi.getDimension(e,"margin-bottom","marginBottom")}}class jt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new jt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof jt?e:new jt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function UX(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const s=jX(i)?null:A5(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=wi.getBorderLeftWidth(i),t+=wi.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function bLe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Un(i){let e=i.getBoundingClientRect();return{left:e.left+ec.scrollX,top:e.top+ec.scrollY,width:e.width,height:e.height}}const ec=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function So(i){let e=wi.getMarginLeft(i)+wi.getMarginRight(i);return i.offsetWidth+e}function qA(i){let e=wi.getBorderLeftWidth(i)+wi.getBorderRightWidth(i),t=wi.getPaddingLeft(i)+wi.getPaddingRight(i);return i.offsetWidth-e-t}function vLe(i){let e=wi.getBorderTopWidth(i)+wi.getBorderBottomWidth(i),t=wi.getPaddingTop(i)+wi.getPaddingBottom(i);return i.offsetHeight-e-t}function kR(i){let e=wi.getMarginTop(i)+wi.getMarginBottom(i);return i.offsetHeight+e}function Vl(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function $X(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function iW(i,e,t){return!!$X(i,e,t)}function jX(i){return i&&!!i.host&&!!i.mode}function I5(i){return!!J0(i)}function J0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return jX(i)?i:null}function um(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function so(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let GA=null;function qX(){return GA||(GA=so()),GA}function wLe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function LR(i,e,t=qX()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function _D(i,e=qX()){if(!e)return;let t=wLe(e),n=[];for(let s=0;s<t.length;s++)t[s].selectorText.indexOf(i)!==-1&&n.push(s);for(let s=n.length-1;s>=0;s--)e.sheet.deleteRule(n[s])}function GX(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Oe={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:df?"webkitAnimationStart":"animationstart",ANIMATION_END:df?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:df?"webkitAnimationIteration":"animationiteration"},Ot={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function yLe(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function CLe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class SLe extends ne{constructor(e){super(),this._onDidFocus=this._register(new H),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new H),this.onDidBlur=this._onDidBlur.event;let t=Vl(document.activeElement,e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Vl(document.activeElement,e)!==t&&(t?r():s())},this._register(oe(e,Oe.FOCUS,s,!0)),this._register(oe(e,Oe.BLUR,r,!0))}}function Xm(i){return new SLe(i)}function ae(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function xLe(i,e){return i.insertBefore(e,i.firstChild),e}function ay(i,...e){i.innerText="",ae(i,...e)}const DLe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var h1;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(h1||(h1={}));function KX(i,e,t,...n){let s=DLe.exec(e);if(!s)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let r=s[1]||"div",o;return i!==h1.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function _e(i,e,...t){return KX(h1.HTML,i,e,...t)}_e.SVG=function(i,e,...t){return KX(h1.SVG,i,e,...t)};function Cr(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function Rs(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function kLe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function nW(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function ZX(i){window.open(i,"_blank","noopener")}function LLe(i){const e=()=>{i(),t=jl(e)};let t=jl(e);return xt(()=>t.dispose())}BX.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function cc(i){return i?`url('${VX.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function sW(i){return`'${i.replace(/'/g,"%27")}'`}class Yd extends H{constructor(){super(),this._subscriptions=new ve,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(oe(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new pi(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(oe(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(oe(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(oe(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(oe(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(oe(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Yd.instance||(Yd.instance=new Yd),Yd.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function ELe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function YX(i){return!i||typeof i!="string"?!0:i.trim().length===0}const ALe=/{(\d+)}/g;function Lo(i,...e){return e.length===0?i:i.replace(ALe,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function T5(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Fa(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function QX(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function ILe(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function TLe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function XX(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=Fa(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function NLe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function KA(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function ql(i){return i.split(/\r\n|\r|\n/)}function ar(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function nn(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==32&&s!==9)return i.substring(e,n)}return i.substring(e,t)}function e_(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function c1(i,e){return i<e?-1:i>e?1:0}function N5(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),h=e.charCodeAt(s);if(l<h)return-1;if(l>h)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function ER(i,e){return ly(i,e,0,i.length,0,e.length)}function ly(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),h=e.charCodeAt(s);if(l===h)continue;if(l>=128||h>=128)return N5(i.toLowerCase(),e.toLowerCase(),t,n,s,r);Fp(l)&&(l-=32),Fp(h)&&(h-=32);const c=l-h;if(c!==0)return c}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function Fp(i){return i>=97&&i<=122}function Hc(i){return i>=65&&i<=90}function db(i,e){return i.length===e.length&&ly(i,e)===0}function M5(i,e){const t=e.length;return e.length>i.length?!1:ly(i,e,0,t)===0}function u1(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function AR(i,e){let t,n=Math.min(i.length,e.length);const s=i.length-1,r=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(s-t)!==e.charCodeAt(r-t))return t;return n}function kn(i){return 55296<=i&&i<=56319}function Jm(i){return 56320<=i&&i<=57343}function R5(i,e){return(i-55296<<10)+(e-56320)+65536}function Mh(i,e,t){const n=i.charCodeAt(t);if(kn(n)&&t+1<e){const s=i.charCodeAt(t+1);if(Jm(s))return R5(n,s)}return n}function dm(i,e){const t=i.charCodeAt(e-1);if(Jm(t)&&e>1){const n=i.charCodeAt(e-2);if(kn(n))return R5(n,t)}return t}function bD(i,e){const t=Yh.getInstance(),n=e,s=i.length,r=Mh(i,s,e);e+=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e<s;){const a=Mh(i,s,e),l=t.getGraphemeBreakType(a);if(jb(o,l))break;e+=a>=65536?2:1,o=l}return e-n}function MLe(i,e){const t=Yh.getInstance(),n=e,s=dm(i,e);e-=s>=65536?2:1;let r=t.getGraphemeBreakType(s);for(;e>0;){const o=dm(i,e),a=t.getGraphemeBreakType(o);if(jb(a,r))break;e-=o>=65536?2:1,r=a}return n-e}const RLe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function jL(i){return RLe.test(i)}const OLe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function PLe(i){return OLe.test(i)}const FLe=/^[\t\n\r\x20-\x7E]*$/;function O5(i){return FLe.test(i)}const JX=/[\u2028\u2029]/;function eJ(i){return JX.test(i)}function BLe(i){for(let e=0,t=i.length;e<t;e++)if(Da(i.charCodeAt(e)))return!0;return!1}function Da(i){return i=+i,i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function $b(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129003||i>=129280&&i<=129535||i>=129648&&i<=129750}const VLe=String.fromCharCode(65279);function P5(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function WLe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function tJ(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function rp(i){return Yh.getInstance().getGraphemeBreakType(i)}function jb(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class Yh{constructor(){this._data=zLe()}static getInstance(){return Yh._INSTANCE||(Yh._INSTANCE=new Yh),Yh._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Yh._INSTANCE=null;function zLe(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function HLe(i,e){if(i===0)return 0;const t=ULe(i,e);if(t!==void 0)return t;const n=dm(e,i);return i-=PS(n),i}function ULe(i,e){let t=dm(e,i);for(i-=PS(t);$Le(t)||t===65039||t===8419;){if(i===0)return;t=dm(e,i),i-=PS(t)}if($b(t)){if(i>=0){const n=dm(e,i);n===8205&&(i-=PS(n))}return i}}function PS(i){return i>=65536?2:1}function $Le(i){return 127995<=i&&i<=127999}var rW,oW;class jLe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class qLe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?N5(e,this._value,0,e.length,this._from,this._to):ly(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class GLe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?N5(e,this._value,0,e.length,this._from,this._to):ly(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class KLe{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new GLe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return ER(e,this._value.scheme);if(this._states[this._stateIdx]===2)return ER(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return c1(e,this._value.query);if(this._states[this._stateIdx]===5)return c1(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class rC{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class fm{constructor(e){this._iter=e}static forUris(e=()=>!1){return new fm(new KLe(e))}static forStrings(){return new fm(new jLe)}static forConfigKeys(){return new fm(new qLe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new rC,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new rC,s.left.segment=n.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new rC,s.right.segment=n.value()),r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new rC,s.mid.segment=n.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const h=l.balanceFactor();if(h<-1||h>1){const c=r[a][0],u=r[a+1][0];if(c===1&&u===1)r[a][1]=l.rotateLeft();else if(c===-1&&u===-1)r[a][1]=l.rotateRight();else if(c===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(c===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const s=this._iter.reset(e),r=[];let o=this._root;for(;o;){const a=s.cmp(o.segment);if(a>0)r.push([-1,o]),o=o.left;else if(a<0)r.push([1,o]),o=o.right;else if(s.hasNext())s.next(),r.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:h,segment:c}=a;this._delete(a.key,!1),o.key=l,o.value=h,o.segment=c}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(r.length>0){const[l,h]=r[r.length-1];switch(l){case-1:h.left=a;break;case 0:h.mid=a;break;case 1:h.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const h=l.balanceFactor();if(h>1?(l.right.balanceFactor()>=0||(l.right=r[a+1][1]=r[a+1][1].rotateRight()),r[a][1]=l.rotateLeft()):h<-1&&(l.left.balanceFactor()<=0||(l.left=r[a+1][1]=r[a+1][1].rotateLeft()),r[a][1]=l.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class ZLe{constructor(e,t){this.uri=e,this.value=t}}class fs{constructor(e,t){this[rW]="ResourceMap",e instanceof fs?(this.map=new Map(e.map),this.toKey=t??fs.defaultToKey):(this.map=new Map,this.toKey=e??fs.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new ZLe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(rW=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}fs.defaultToKey=i=>i.toString();class YLe{constructor(){this[oW]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(oW=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class F5 extends YLe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}const aW=typeof Buffer<"u";let ZA;class qL{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return aW&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new qL(e)}toString(){return aW?this.buffer.toString():(ZA||(ZA=new TextDecoder),ZA.decode(this.buffer))}}function QLe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function XLe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function la(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function ha(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function lW(i,e){return i[e]}function hW(i,e,t){i[t]=e}function IR(i){let e=JSON.parse(i);return e=TR(e),e}function TR(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return Ke.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof qL||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=TR(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=TR(i[t],e+1))}return i}function JLe(i){return i.replace(/[\\/]/g,ln.sep)}function e2e(i){return i.indexOf("/")===-1&&(i=JLe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function t2e(i,e,t,n=OS){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!M5(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function i2e(i){return i>=65&&i<=90||i>=97&&i<=122}function n2e(i){const e=S5(i);return qn?i.length>3?!1:iJ(e)&&(i.length===2||e.charCodeAt(2)===92):e===ln.sep}function iJ(i){return qn?i2e(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function YA(i){return fD(i,!0)}class s2e{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:c1(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return Ke.joinPath(e,...t)}basenameOrAuthority(e){return Ba(e)||e.authority}basename(e){return ln.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===dt.file?t=Ke.file(AX(YA(e))).path:(t=ln.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===dt.file?t=Ke.file(S5(YA(e))).path:t=ln.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===dt.file){const n=Ke.file(Bke(YA(e),t));return e.with({authority:n.authority,path:n.path})}return t=e2e(t),e.with({path:ln.resolve(e.path,t)})}}const zs=new s2e(()=>!1),nJ=zs.isEqual.bind(zs),sJ=zs.basenameOrAuthority.bind(zs),Ba=zs.basename.bind(zs),B5=zs.dirname.bind(zs);zs.joinPath.bind(zs);const r2e=zs.normalizePath.bind(zs),cW=zs.resolvePath.bind(zs);var Mu;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(Mu||(Mu={}));function rJ(i){return Array.isArray(i)}function Va(i){return typeof i=="string"}function Ps(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function $f(i){return typeof i=="number"&&!isNaN(i)}function oJ(i){return i===!0||i===!1}function bs(i){return typeof i>"u"}function o2e(i){return!jr(i)}function jr(i){return bs(i)||i===null}function $i(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function qb(i){return typeof i=="function"}function a2e(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)l2e(i[n],e[n])}function l2e(i,e){if(Va(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(qb(e)){try{if(i instanceof e)return}catch{}if(!jr(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function h2e(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function V5(i){const e=[];for(const t of h2e(i))typeof i[t]=="function"&&e.push(t);return e}function c2e(i,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)};let n={};for(const s of i)n[s]=t(s);return n}function Qd(i){return i===null?void 0:i}function u2e(i,e="Unreachable"){throw new Error(e)}const An=kt("commandService"),Ft=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new H,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const o=[];for(let l of i.description.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...h){return a2e(h,o),a(l,...h)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new Ar,this._commands.set(t,n));let s=n.unshift(i),r=xt(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return Ft.registerCommand(i,(t,...n)=>t.get(An).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return bt.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Ft.registerCommand("noop",()=>{});var vD;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(vD||(vD={}));var uW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const Ru=kt("openerService"),d2e=Object.freeze({_serviceBrand:void 0,registerOpener(){return ne.None},registerValidator(){return ne.None},registerExternalUriResolver(){return ne.None},setDefaultExternalOpener(){},registerExternalOpener(){return ne.None},open(){return uW(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return uW(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function Sp(i,e){return Ke.isUri(i)?db(i.scheme,e):M5(i,e+":")}var W5=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wD=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Ed=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};let NR=class{constructor(e){this._commandService=e}open(e,t){return Ed(this,void 0,void 0,function*(){if(!Sp(e,dt.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=Ke.parse(e));let n=[];try{n=IR(decodeURIComponent(e.query))}catch{try{n=IR(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};NR=W5([wD(0,An)],NR);let MR=class{constructor(e){this._editorService=e}open(e,t){return Ed(this,void 0,void 0,function*(){typeof e=="string"&&(e=Ke.parse(e));let n;const s=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return s&&(n={startLineNumber:parseInt(s[1]),startColumn:s[2]?parseInt(s[2]):1},e=e.with({fragment:""})),e.scheme===dt.file&&(e=r2e(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?vD.USER:vD.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};MR=W5([wD(0,li)],MR);let RR=class{constructor(e,t){this._openers=new Ar,this._validators=new Ar,this._resolvers=new Ar,this._resolvedUriTargets=new fs(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Ar,this._defaultExternalOpener={openExternal:n=>Ed(this,void 0,void 0,function*(){return Sp(n,dt.http)||Sp(n,dt.https)?ZX(n):window.location.href=n,!0})},this._openers.push({open:(n,s)=>Ed(this,void 0,void 0,function*(){return s!=null&&s.openExternal||Sp(n,dt.mailto)||Sp(n,dt.http)||Sp(n,dt.https)?(yield this._doOpenExternal(n,s),!0):!1})}),this._openers.push(new NR(t)),this._openers.push(new MR(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return Ed(this,void 0,void 0,function*(){const s=typeof e=="string"?Ke.parse(e):e,r=(n=this._resolvedUriTargets.get(s))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(r)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return Ed(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const s=yield n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return Ed(this,void 0,void 0,function*(){const n=typeof e=="string"?Ke.parse(e):e;let s;try{s=(yield this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(r,{sourceUri:n,preferredOpenerId:o},ri.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},ri.None)})}dispose(){this._validators.clear()}};RR=W5([wD(0,li),wD(1,An)],RR);function FS(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Kc(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Kc(i[t]):e[t]=i[t]}),e}function f2e(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(aJ.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return i}const aJ=Object.prototype.hasOwnProperty;function g2e(i,e){return OR(i,e,new Set)}function OR(i,e,t){if(jr(i))return i;const n=e(i);if(typeof n<"u")return n;if(rJ(i)){const s=[];for(const r of i)s.push(OR(r,e,t));return s}if(Ps(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(let r in i)aJ.call(i,r)&&(s[r]=OR(i[r],e,t));return t.delete(i),s}return i}function Qa(i,e,t=!0){return Ps(i)?(Ps(e)&&Object.keys(e).forEach(n=>{n in i?t&&(Ps(i[n])&&Ps(e[n])?Qa(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function ka(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!ka(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!ka(s,r))return!1;for(t=0;t<s.length;t++)if(!ka(i[s[t]],e[s[t]]))return!1}return!0}function al(i,e,t){const n=e(i);return typeof n>"u"?t:n}const p2e={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class m2e extends ne{constructor(e,t={}){super(),this._onDidUpdate=this._register(new H),this._editor=e,this._options=Qa(t,p2e,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new V(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new V(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new V(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>V.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let s=0,r=this.ranges.length;s<r&&!t;s++){let o=this.ranges[s].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=s+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(FS(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let s=n.range.getStartPosition();this._editor.setPosition(s),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const yD=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new H,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},_2e=vt?1.5:1.35,QA=8;class ff{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,s){const r=e.get(42),o=e.get(46),a=e.get(45),l=e.get(44),h=e.get(58),c=e.get(55);return ff._create(r,o,a,l,h,c,t,n,s)}static _create(e,t,n,s,r,o,a,l,h){r===0?r=_2e*n:r<QA&&(r=r*n),r=Math.round(r),r<QA&&(r=QA);const c=1+(h?0:yD.getZoomLevel()*.1);return n*=c,r*=c,new ff({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,lineHeight:r,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=ff._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const b2e=1;class PR extends ff{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=b2e,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}function v2e(i){return i&&typeof i.id=="string"}const GL={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Gl;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Gl||(Gl={}));var Wl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Wl||(Wl={}));class BS{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&ka(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class d1{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var gf;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(gf||(gf={}));class Bp{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class FR{constructor(e,t){this.top=e,this.endColumn=t}}class XA{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class w2e{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function y2e(i){return z5(i,0)}function z5(i,e){switch(typeof i){case"object":return i===null?Qh(349,e):Array.isArray(i)?S2e(i,e):x2e(i,e);case"string":return H5(i,e);case"boolean":return C2e(i,e);case"number":return Qh(i,e);case"undefined":return Qh(937,e);default:return Qh(617,e)}}function Qh(i,e){return(e<<5)-e+i|0}function C2e(i,e){return Qh(i?433:863,e)}function H5(i,e){e=Qh(149417,e);for(let t=0,n=i.length;t<n;t++)e=Qh(i.charCodeAt(t),e);return e}function S2e(i,e){return e=Qh(104579,e),i.reduce((t,n)=>z5(n,t),e)}function x2e(i,e){return e=Qh(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=H5(n,t),z5(i[n],t)),e)}function JA(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function dW(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}function D2e(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function R_(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):D2e((i>>>0).toString(16),e/4)}class KL{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(kn(o))if(a+1<t){const h=e.charCodeAt(a+1);Jm(h)?(a++,l=R5(o,h)):l=65533}else{r=o;break}else Jm(o)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),R_(this._h0)+R_(this._h1)+R_(this._h2)+R_(this._h3)+R_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,dW(this._buff,this._buffLen),this._buffLen>56&&(this._step(),dW(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=KL._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,JA(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,h,c;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,h=1518500249):u<40?(l=s^r^o,h=1859775393):u<60?(l=s&r|s&o|r&o,h=2400959708):(l=s^r^o,h=3395469782),c=JA(n,5)+l+a+h+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=JA(s,30),s=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}KL._bigBlock32=new DataView(new ArrayBuffer(320));function ko(i,e,t){return Math.min(Math.max(i,e),t)}const eI="**",fW="/",VS="[/\\\\]",WS="[^/\\\\]",k2e=/\//g;function gW(i){switch(i){case 0:return"";case 1:return`${WS}*?`;default:return`(?:${VS}|${WS}+${VS}|${VS}${WS}+)*?`}}function pW(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function lJ(i){if(!i)return"";let e="";const t=pW(i,fW);if(t.every(n=>n===eI))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===eI){n||(e+=gW(2),n=!0);return}let o=!1,a="",l=!1,h="";for(const c of s){if(c!=="}"&&o){a+=c;continue}if(l&&(c!=="]"||!h)){let u;c==="-"?u=c:(c==="^"||c==="!")&&!h?u="^":c===fW?u="":u=Fa(c),h+=u;continue}switch(c){case"{":o=!0;continue;case"[":l=!0;continue;case"}":const d=`(?:${pW(a,",").map(f=>lJ(f)).join("|")})`;e+=d,o=!1,a="";break;case"]":e+="["+h+"]",l=!1,h="";break;case"?":e+=WS;continue;case"*":e+=gW(1);continue;default:e+=Fa(c)}}r<t.length-1&&(t[r+1]!==eI||r+2<t.length)&&(e+=VS),n=!1})}return e}const L2e=/^\*\*\/\*\.[\w\.-]+$/,E2e=/^\*\*\/([\w\.-]+)\/?$/,A2e=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,I2e=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,T2e=/^\*\*((\/[\w\.-]+)+)\/?$/,N2e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,mW=new F5(1e4),_W=function(){return!1},zl=function(){return null};function U5(i,e){if(!i)return zl;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=mW.get(n);if(s)return bW(s,i);let r;if(L2e.test(t)){const o=t.substr(4);s=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(r=E2e.exec(tI(t,e)))?s=M2e(r[1],t):(e.trimForExclusions?I2e:A2e).test(t)?s=R2e(t,e):(r=T2e.exec(tI(t,e)))?s=vW(r[1].substr(1),t,!0):(r=N2e.exec(tI(t,e)))?s=vW(r[1],t,!1):s=O2e(t);return mW.set(n,s),bW(s,i)}function bW(i,e){return typeof e=="string"?i:function(t,n){return t2e(t,e.base)?i(Vke(e.base,t),n):null}}function tI(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function M2e(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function R2e(i,e){const t=cJ(i.slice(1,-1).split(",").map(a=>U5(a,e)).filter(a=>a!==zl),i),n=t.length;if(!n)return zl;if(n===1)return t[0];const s=function(a,l){for(let h=0,c=t.length;h<c;h++)if(t[h](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function vW(i,e,t){const n=OS===ln.sep,s=n?i:i.replace(k2e,OS),r=OS+s,o=ln.sep+i,a=t?function(l,h){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:function(l,h){return typeof l=="string"&&(l===s||!n&&l===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function O2e(i){try{const e=new RegExp(`^${lJ(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return zl}}function P2e(i,e,t){return!i||typeof e!="string"?!1:hJ(i)(e,void 0,t)}function hJ(i,e={}){if(!i)return _W;if(typeof i=="string"||F2e(i)){const t=U5(i,e);if(t===zl)return _W;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return B2e(i,e)}function F2e(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function B2e(i,e){const t=cJ(Object.getOwnPropertyNames(i).map(a=>V2e(a,i[a],e)).filter(a=>a!==zl)),n=t.length;if(!n)return zl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(c,u){for(let d=0,f=t.length;d<f;d++){const g=t[d](c,u);if(g)return g}return null},l=t.find(c=>!!c.allBasenames);l&&(a.allBasenames=l.allBasenames);const h=t.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return h.length&&(a.allPaths=h),a}const s=function(a,l,h){let c;for(let u=0,d=t.length;u<d;u++){const f=t[u];f.requiresSiblings&&h&&(l||(l=uf(a)),c||(c=l.substr(0,l.length-Wke(a).length)));const g=f(a,l,c,h);if(g)return g}return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function V2e(i,e,t){if(e===!1)return zl;const n=U5(i,t);if(n===zl)return zl;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,h)=>{if(!h||!n(o,a))return null;const c=s.replace("$(basename)",l),u=h(c);return oLe(u)?u.then(d=>d?i:null):u?i:null};return r.requiresSiblings=!0,r}}return n}function cJ(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const h=l.basenames;return h?a.concat(h):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const h=l.patterns;return h?a.concat(h):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let c;for(c=a.length;c>0;c--){const u=a.charCodeAt(c-1);if(u===47||u===92)break}l=a.substr(c)}const h=n.indexOf(l);return h!==-1?s[h]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}function uJ(i,e,t,n){if(Array.isArray(i)){let s=0;for(const r of i){const o=uJ(r,e,t,n);if(o===10)return o;o>s&&(s=o)}return s}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:s,pattern:r,scheme:o,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(s)if(s===t)l=10;else if(s==="*")l=Math.max(l,5);else return 0;if(r){let h;if(typeof r=="string"?h=r:h=Object.assign(Object.assign({},r),{base:S5(r.base)}),h===e.fsPath||P2e(h,e.fsPath))l=10;else return 0}return l}else return 0}}const qs=kt("modelService");function W2e(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}function dJ(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(dJ):!!i.exclusive}class Ii{constructor(){this._clock=0,this._entries=[],this._onDidChange=new H}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),xt(()=>{if(n){let s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,r=>{n&&s===r._score?n.push(r.provider):(s=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=uJ(n.selector,e.uri,e.getLanguageId(),W2e(e)),dJ(n.selector)&&n._score>0){for(let s of this._entries)s._score=0;n._score=1e3;break}this._entries.sort(Ii._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class z2e{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),xt(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,s=!1;return this._promises.set(e,t.then(r=>{this._promises.delete(e),!(s||!r)&&(n=this.register(e,r))})),xt(()=>{s=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(s=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}let H2e=class{constructor(){this._icons=new Map,this._onDidRegister=new H}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const fJ=new H2e,CD=fJ;function ia(i,e){return new De(i,e)}function U2e(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class De{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,fJ.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var sr;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9\\-]+",i.iconModifierExpression="~[A-Za-z]+";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(r){if(r instanceof De)return["codicon","codicon-"+r.id];const o=e.exec(r.id);if(!o)return t(De.error);let[,a,l]=o;const h=["codicon","codicon-"+a];return l&&h.push("codicon-modifier-"+l.substr(1)),h}i.asClassNameArray=t;function n(r){return t(r).join(" ")}i.asClassName=n;function s(r){return"."+t(r).join(".")}i.asCSSSelector=s})(sr||(sr={}));(function(i){i.add=new i("add",{fontCharacter:"\\ea60"}),i.plus=new i("plus",i.add.definition),i.gistNew=new i("gist-new",i.add.definition),i.repoCreate=new i("repo-create",i.add.definition),i.lightbulb=new i("lightbulb",{fontCharacter:"\\ea61"}),i.lightBulb=new i("light-bulb",{fontCharacter:"\\ea61"}),i.repo=new i("repo",{fontCharacter:"\\ea62"}),i.repoDelete=new i("repo-delete",{fontCharacter:"\\ea62"}),i.gistFork=new i("gist-fork",{fontCharacter:"\\ea63"}),i.repoForked=new i("repo-forked",{fontCharacter:"\\ea63"}),i.gitPullRequest=new i("git-pull-request",{fontCharacter:"\\ea64"}),i.gitPullRequestAbandoned=new i("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),i.recordKeys=new i("record-keys",{fontCharacter:"\\ea65"}),i.keyboard=new i("keyboard",{fontCharacter:"\\ea65"}),i.tag=new i("tag",{fontCharacter:"\\ea66"}),i.tagAdd=new i("tag-add",{fontCharacter:"\\ea66"}),i.tagRemove=new i("tag-remove",{fontCharacter:"\\ea66"}),i.person=new i("person",{fontCharacter:"\\ea67"}),i.personFollow=new i("person-follow",{fontCharacter:"\\ea67"}),i.personOutline=new i("person-outline",{fontCharacter:"\\ea67"}),i.personFilled=new i("person-filled",{fontCharacter:"\\ea67"}),i.gitBranch=new i("git-branch",{fontCharacter:"\\ea68"}),i.gitBranchCreate=new i("git-branch-create",{fontCharacter:"\\ea68"}),i.gitBranchDelete=new i("git-branch-delete",{fontCharacter:"\\ea68"}),i.sourceControl=new i("source-control",{fontCharacter:"\\ea68"}),i.mirror=new i("mirror",{fontCharacter:"\\ea69"}),i.mirrorPublic=new i("mirror-public",{fontCharacter:"\\ea69"}),i.star=new i("star",{fontCharacter:"\\ea6a"}),i.starAdd=new i("star-add",{fontCharacter:"\\ea6a"}),i.starDelete=new i("star-delete",{fontCharacter:"\\ea6a"}),i.starEmpty=new i("star-empty",{fontCharacter:"\\ea6a"}),i.comment=new i("comment",{fontCharacter:"\\ea6b"}),i.commentAdd=new i("comment-add",{fontCharacter:"\\ea6b"}),i.alert=new i("alert",{fontCharacter:"\\ea6c"}),i.warning=new i("warning",{fontCharacter:"\\ea6c"}),i.search=new i("search",{fontCharacter:"\\ea6d"}),i.searchSave=new i("search-save",{fontCharacter:"\\ea6d"}),i.logOut=new i("log-out",{fontCharacter:"\\ea6e"}),i.signOut=new i("sign-out",{fontCharacter:"\\ea6e"}),i.logIn=new i("log-in",{fontCharacter:"\\ea6f"}),i.signIn=new i("sign-in",{fontCharacter:"\\ea6f"}),i.eye=new i("eye",{fontCharacter:"\\ea70"}),i.eyeUnwatch=new i("eye-unwatch",{fontCharacter:"\\ea70"}),i.eyeWatch=new i("eye-watch",{fontCharacter:"\\ea70"}),i.circleFilled=new i("circle-filled",{fontCharacter:"\\ea71"}),i.primitiveDot=new i("primitive-dot",{fontCharacter:"\\ea71"}),i.closeDirty=new i("close-dirty",{fontCharacter:"\\ea71"}),i.debugBreakpoint=new i("debug-breakpoint",{fontCharacter:"\\ea71"}),i.debugBreakpointDisabled=new i("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),i.debugHint=new i("debug-hint",{fontCharacter:"\\ea71"}),i.primitiveSquare=new i("primitive-square",{fontCharacter:"\\ea72"}),i.edit=new i("edit",{fontCharacter:"\\ea73"}),i.pencil=new i("pencil",{fontCharacter:"\\ea73"}),i.info=new i("info",{fontCharacter:"\\ea74"}),i.issueOpened=new i("issue-opened",{fontCharacter:"\\ea74"}),i.gistPrivate=new i("gist-private",{fontCharacter:"\\ea75"}),i.gitForkPrivate=new i("git-fork-private",{fontCharacter:"\\ea75"}),i.lock=new i("lock",{fontCharacter:"\\ea75"}),i.mirrorPrivate=new i("mirror-private",{fontCharacter:"\\ea75"}),i.close=new i("close",{fontCharacter:"\\ea76"}),i.removeClose=new i("remove-close",{fontCharacter:"\\ea76"}),i.x=new i("x",{fontCharacter:"\\ea76"}),i.repoSync=new i("repo-sync",{fontCharacter:"\\ea77"}),i.sync=new i("sync",{fontCharacter:"\\ea77"}),i.clone=new i("clone",{fontCharacter:"\\ea78"}),i.desktopDownload=new i("desktop-download",{fontCharacter:"\\ea78"}),i.beaker=new i("beaker",{fontCharacter:"\\ea79"}),i.microscope=new i("microscope",{fontCharacter:"\\ea79"}),i.vm=new i("vm",{fontCharacter:"\\ea7a"}),i.deviceDesktop=new i("device-desktop",{fontCharacter:"\\ea7a"}),i.file=new i("file",{fontCharacter:"\\ea7b"}),i.fileText=new i("file-text",{fontCharacter:"\\ea7b"}),i.more=new i("more",{fontCharacter:"\\ea7c"}),i.ellipsis=new i("ellipsis",{fontCharacter:"\\ea7c"}),i.kebabHorizontal=new i("kebab-horizontal",{fontCharacter:"\\ea7c"}),i.mailReply=new i("mail-reply",{fontCharacter:"\\ea7d"}),i.reply=new i("reply",{fontCharacter:"\\ea7d"}),i.organization=new i("organization",{fontCharacter:"\\ea7e"}),i.organizationFilled=new i("organization-filled",{fontCharacter:"\\ea7e"}),i.organizationOutline=new i("organization-outline",{fontCharacter:"\\ea7e"}),i.newFile=new i("new-file",{fontCharacter:"\\ea7f"}),i.fileAdd=new i("file-add",{fontCharacter:"\\ea7f"}),i.newFolder=new i("new-folder",{fontCharacter:"\\ea80"}),i.fileDirectoryCreate=new i("file-directory-create",{fontCharacter:"\\ea80"}),i.trash=new i("trash",{fontCharacter:"\\ea81"}),i.trashcan=new i("trashcan",{fontCharacter:"\\ea81"}),i.history=new i("history",{fontCharacter:"\\ea82"}),i.clock=new i("clock",{fontCharacter:"\\ea82"}),i.folder=new i("folder",{fontCharacter:"\\ea83"}),i.fileDirectory=new i("file-directory",{fontCharacter:"\\ea83"}),i.symbolFolder=new i("symbol-folder",{fontCharacter:"\\ea83"}),i.logoGithub=new i("logo-github",{fontCharacter:"\\ea84"}),i.markGithub=new i("mark-github",{fontCharacter:"\\ea84"}),i.github=new i("github",{fontCharacter:"\\ea84"}),i.terminal=new i("terminal",{fontCharacter:"\\ea85"}),i.console=new i("console",{fontCharacter:"\\ea85"}),i.repl=new i("repl",{fontCharacter:"\\ea85"}),i.zap=new i("zap",{fontCharacter:"\\ea86"}),i.symbolEvent=new i("symbol-event",{fontCharacter:"\\ea86"}),i.error=new i("error",{fontCharacter:"\\ea87"}),i.stop=new i("stop",{fontCharacter:"\\ea87"}),i.variable=new i("variable",{fontCharacter:"\\ea88"}),i.symbolVariable=new i("symbol-variable",{fontCharacter:"\\ea88"}),i.array=new i("array",{fontCharacter:"\\ea8a"}),i.symbolArray=new i("symbol-array",{fontCharacter:"\\ea8a"}),i.symbolModule=new i("symbol-module",{fontCharacter:"\\ea8b"}),i.symbolPackage=new i("symbol-package",{fontCharacter:"\\ea8b"}),i.symbolNamespace=new i("symbol-namespace",{fontCharacter:"\\ea8b"}),i.symbolObject=new i("symbol-object",{fontCharacter:"\\ea8b"}),i.symbolMethod=new i("symbol-method",{fontCharacter:"\\ea8c"}),i.symbolFunction=new i("symbol-function",{fontCharacter:"\\ea8c"}),i.symbolConstructor=new i("symbol-constructor",{fontCharacter:"\\ea8c"}),i.symbolBoolean=new i("symbol-boolean",{fontCharacter:"\\ea8f"}),i.symbolNull=new i("symbol-null",{fontCharacter:"\\ea8f"}),i.symbolNumeric=new i("symbol-numeric",{fontCharacter:"\\ea90"}),i.symbolNumber=new i("symbol-number",{fontCharacter:"\\ea90"}),i.symbolStructure=new i("symbol-structure",{fontCharacter:"\\ea91"}),i.symbolStruct=new i("symbol-struct",{fontCharacter:"\\ea91"}),i.symbolParameter=new i("symbol-parameter",{fontCharacter:"\\ea92"}),i.symbolTypeParameter=new i("symbol-type-parameter",{fontCharacter:"\\ea92"}),i.symbolKey=new i("symbol-key",{fontCharacter:"\\ea93"}),i.symbolText=new i("symbol-text",{fontCharacter:"\\ea93"}),i.symbolReference=new i("symbol-reference",{fontCharacter:"\\ea94"}),i.goToFile=new i("go-to-file",{fontCharacter:"\\ea94"}),i.symbolEnum=new i("symbol-enum",{fontCharacter:"\\ea95"}),i.symbolValue=new i("symbol-value",{fontCharacter:"\\ea95"}),i.symbolRuler=new i("symbol-ruler",{fontCharacter:"\\ea96"}),i.symbolUnit=new i("symbol-unit",{fontCharacter:"\\ea96"}),i.activateBreakpoints=new i("activate-breakpoints",{fontCharacter:"\\ea97"}),i.archive=new i("archive",{fontCharacter:"\\ea98"}),i.arrowBoth=new i("arrow-both",{fontCharacter:"\\ea99"}),i.arrowDown=new i("arrow-down",{fontCharacter:"\\ea9a"}),i.arrowLeft=new i("arrow-left",{fontCharacter:"\\ea9b"}),i.arrowRight=new i("arrow-right",{fontCharacter:"\\ea9c"}),i.arrowSmallDown=new i("arrow-small-down",{fontCharacter:"\\ea9d"}),i.arrowSmallLeft=new i("arrow-small-left",{fontCharacter:"\\ea9e"}),i.arrowSmallRight=new i("arrow-small-right",{fontCharacter:"\\ea9f"}),i.arrowSmallUp=new i("arrow-small-up",{fontCharacter:"\\eaa0"}),i.arrowUp=new i("arrow-up",{fontCharacter:"\\eaa1"}),i.bell=new i("bell",{fontCharacter:"\\eaa2"}),i.bold=new i("bold",{fontCharacter:"\\eaa3"}),i.book=new i("book",{fontCharacter:"\\eaa4"}),i.bookmark=new i("bookmark",{fontCharacter:"\\eaa5"}),i.debugBreakpointConditionalUnverified=new i("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),i.debugBreakpointConditional=new i("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),i.debugBreakpointConditionalDisabled=new i("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),i.debugBreakpointDataUnverified=new i("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),i.debugBreakpointData=new i("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),i.debugBreakpointDataDisabled=new i("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),i.debugBreakpointLogUnverified=new i("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),i.debugBreakpointLog=new i("debug-breakpoint-log",{fontCharacter:"\\eaab"}),i.debugBreakpointLogDisabled=new i("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),i.briefcase=new i("briefcase",{fontCharacter:"\\eaac"}),i.broadcast=new i("broadcast",{fontCharacter:"\\eaad"}),i.browser=new i("browser",{fontCharacter:"\\eaae"}),i.bug=new i("bug",{fontCharacter:"\\eaaf"}),i.calendar=new i("calendar",{fontCharacter:"\\eab0"}),i.caseSensitive=new i("case-sensitive",{fontCharacter:"\\eab1"}),i.check=new i("check",{fontCharacter:"\\eab2"}),i.checklist=new i("checklist",{fontCharacter:"\\eab3"}),i.chevronDown=new i("chevron-down",{fontCharacter:"\\eab4"}),i.dropDownButton=new i("drop-down-button",i.chevronDown.definition),i.chevronLeft=new i("chevron-left",{fontCharacter:"\\eab5"}),i.chevronRight=new i("chevron-right",{fontCharacter:"\\eab6"}),i.chevronUp=new i("chevron-up",{fontCharacter:"\\eab7"}),i.chromeClose=new i("chrome-close",{fontCharacter:"\\eab8"}),i.chromeMaximize=new i("chrome-maximize",{fontCharacter:"\\eab9"}),i.chromeMinimize=new i("chrome-minimize",{fontCharacter:"\\eaba"}),i.chromeRestore=new i("chrome-restore",{fontCharacter:"\\eabb"}),i.circleOutline=new i("circle-outline",{fontCharacter:"\\eabc"}),i.debugBreakpointUnverified=new i("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),i.circleSlash=new i("circle-slash",{fontCharacter:"\\eabd"}),i.circuitBoard=new i("circuit-board",{fontCharacter:"\\eabe"}),i.clearAll=new i("clear-all",{fontCharacter:"\\eabf"}),i.clippy=new i("clippy",{fontCharacter:"\\eac0"}),i.closeAll=new i("close-all",{fontCharacter:"\\eac1"}),i.cloudDownload=new i("cloud-download",{fontCharacter:"\\eac2"}),i.cloudUpload=new i("cloud-upload",{fontCharacter:"\\eac3"}),i.code=new i("code",{fontCharacter:"\\eac4"}),i.collapseAll=new i("collapse-all",{fontCharacter:"\\eac5"}),i.colorMode=new i("color-mode",{fontCharacter:"\\eac6"}),i.commentDiscussion=new i("comment-discussion",{fontCharacter:"\\eac7"}),i.compareChanges=new i("compare-changes",{fontCharacter:"\\eafd"}),i.creditCard=new i("credit-card",{fontCharacter:"\\eac9"}),i.dash=new i("dash",{fontCharacter:"\\eacc"}),i.dashboard=new i("dashboard",{fontCharacter:"\\eacd"}),i.database=new i("database",{fontCharacter:"\\eace"}),i.debugContinue=new i("debug-continue",{fontCharacter:"\\eacf"}),i.debugDisconnect=new i("debug-disconnect",{fontCharacter:"\\ead0"}),i.debugPause=new i("debug-pause",{fontCharacter:"\\ead1"}),i.debugRestart=new i("debug-restart",{fontCharacter:"\\ead2"}),i.debugStart=new i("debug-start",{fontCharacter:"\\ead3"}),i.debugStepInto=new i("debug-step-into",{fontCharacter:"\\ead4"}),i.debugStepOut=new i("debug-step-out",{fontCharacter:"\\ead5"}),i.debugStepOver=new i("debug-step-over",{fontCharacter:"\\ead6"}),i.debugStop=new i("debug-stop",{fontCharacter:"\\ead7"}),i.debug=new i("debug",{fontCharacter:"\\ead8"}),i.deviceCameraVideo=new i("device-camera-video",{fontCharacter:"\\ead9"}),i.deviceCamera=new i("device-camera",{fontCharacter:"\\eada"}),i.deviceMobile=new i("device-mobile",{fontCharacter:"\\eadb"}),i.diffAdded=new i("diff-added",{fontCharacter:"\\eadc"}),i.diffIgnored=new i("diff-ignored",{fontCharacter:"\\eadd"}),i.diffModified=new i("diff-modified",{fontCharacter:"\\eade"}),i.diffRemoved=new i("diff-removed",{fontCharacter:"\\eadf"}),i.diffRenamed=new i("diff-renamed",{fontCharacter:"\\eae0"}),i.diff=new i("diff",{fontCharacter:"\\eae1"}),i.discard=new i("discard",{fontCharacter:"\\eae2"}),i.editorLayout=new i("editor-layout",{fontCharacter:"\\eae3"}),i.emptyWindow=new i("empty-window",{fontCharacter:"\\eae4"}),i.exclude=new i("exclude",{fontCharacter:"\\eae5"}),i.extensions=new i("extensions",{fontCharacter:"\\eae6"}),i.eyeClosed=new i("eye-closed",{fontCharacter:"\\eae7"}),i.fileBinary=new i("file-binary",{fontCharacter:"\\eae8"}),i.fileCode=new i("file-code",{fontCharacter:"\\eae9"}),i.fileMedia=new i("file-media",{fontCharacter:"\\eaea"}),i.filePdf=new i("file-pdf",{fontCharacter:"\\eaeb"}),i.fileSubmodule=new i("file-submodule",{fontCharacter:"\\eaec"}),i.fileSymlinkDirectory=new i("file-symlink-directory",{fontCharacter:"\\eaed"}),i.fileSymlinkFile=new i("file-symlink-file",{fontCharacter:"\\eaee"}),i.fileZip=new i("file-zip",{fontCharacter:"\\eaef"}),i.files=new i("files",{fontCharacter:"\\eaf0"}),i.filter=new i("filter",{fontCharacter:"\\eaf1"}),i.flame=new i("flame",{fontCharacter:"\\eaf2"}),i.foldDown=new i("fold-down",{fontCharacter:"\\eaf3"}),i.foldUp=new i("fold-up",{fontCharacter:"\\eaf4"}),i.fold=new i("fold",{fontCharacter:"\\eaf5"}),i.folderActive=new i("folder-active",{fontCharacter:"\\eaf6"}),i.folderOpened=new i("folder-opened",{fontCharacter:"\\eaf7"}),i.gear=new i("gear",{fontCharacter:"\\eaf8"}),i.gift=new i("gift",{fontCharacter:"\\eaf9"}),i.gistSecret=new i("gist-secret",{fontCharacter:"\\eafa"}),i.gist=new i("gist",{fontCharacter:"\\eafb"}),i.gitCommit=new i("git-commit",{fontCharacter:"\\eafc"}),i.gitCompare=new i("git-compare",{fontCharacter:"\\eafd"}),i.gitMerge=new i("git-merge",{fontCharacter:"\\eafe"}),i.githubAction=new i("github-action",{fontCharacter:"\\eaff"}),i.githubAlt=new i("github-alt",{fontCharacter:"\\eb00"}),i.globe=new i("globe",{fontCharacter:"\\eb01"}),i.grabber=new i("grabber",{fontCharacter:"\\eb02"}),i.graph=new i("graph",{fontCharacter:"\\eb03"}),i.gripper=new i("gripper",{fontCharacter:"\\eb04"}),i.heart=new i("heart",{fontCharacter:"\\eb05"}),i.home=new i("home",{fontCharacter:"\\eb06"}),i.horizontalRule=new i("horizontal-rule",{fontCharacter:"\\eb07"}),i.hubot=new i("hubot",{fontCharacter:"\\eb08"}),i.inbox=new i("inbox",{fontCharacter:"\\eb09"}),i.issueClosed=new i("issue-closed",{fontCharacter:"\\eba4"}),i.issueReopened=new i("issue-reopened",{fontCharacter:"\\eb0b"}),i.issues=new i("issues",{fontCharacter:"\\eb0c"}),i.italic=new i("italic",{fontCharacter:"\\eb0d"}),i.jersey=new i("jersey",{fontCharacter:"\\eb0e"}),i.json=new i("json",{fontCharacter:"\\eb0f"}),i.kebabVertical=new i("kebab-vertical",{fontCharacter:"\\eb10"}),i.key=new i("key",{fontCharacter:"\\eb11"}),i.law=new i("law",{fontCharacter:"\\eb12"}),i.lightbulbAutofix=new i("lightbulb-autofix",{fontCharacter:"\\eb13"}),i.linkExternal=new i("link-external",{fontCharacter:"\\eb14"}),i.link=new i("link",{fontCharacter:"\\eb15"}),i.listOrdered=new i("list-ordered",{fontCharacter:"\\eb16"}),i.listUnordered=new i("list-unordered",{fontCharacter:"\\eb17"}),i.liveShare=new i("live-share",{fontCharacter:"\\eb18"}),i.loading=new i("loading",{fontCharacter:"\\eb19"}),i.location=new i("location",{fontCharacter:"\\eb1a"}),i.mailRead=new i("mail-read",{fontCharacter:"\\eb1b"}),i.mail=new i("mail",{fontCharacter:"\\eb1c"}),i.markdown=new i("markdown",{fontCharacter:"\\eb1d"}),i.megaphone=new i("megaphone",{fontCharacter:"\\eb1e"}),i.mention=new i("mention",{fontCharacter:"\\eb1f"}),i.milestone=new i("milestone",{fontCharacter:"\\eb20"}),i.mortarBoard=new i("mortar-board",{fontCharacter:"\\eb21"}),i.move=new i("move",{fontCharacter:"\\eb22"}),i.multipleWindows=new i("multiple-windows",{fontCharacter:"\\eb23"}),i.mute=new i("mute",{fontCharacter:"\\eb24"}),i.noNewline=new i("no-newline",{fontCharacter:"\\eb25"}),i.note=new i("note",{fontCharacter:"\\eb26"}),i.octoface=new i("octoface",{fontCharacter:"\\eb27"}),i.openPreview=new i("open-preview",{fontCharacter:"\\eb28"}),i.package_=new i("package",{fontCharacter:"\\eb29"}),i.paintcan=new i("paintcan",{fontCharacter:"\\eb2a"}),i.pin=new i("pin",{fontCharacter:"\\eb2b"}),i.play=new i("play",{fontCharacter:"\\eb2c"}),i.run=new i("run",{fontCharacter:"\\eb2c"}),i.plug=new i("plug",{fontCharacter:"\\eb2d"}),i.preserveCase=new i("preserve-case",{fontCharacter:"\\eb2e"}),i.preview=new i("preview",{fontCharacter:"\\eb2f"}),i.project=new i("project",{fontCharacter:"\\eb30"}),i.pulse=new i("pulse",{fontCharacter:"\\eb31"}),i.question=new i("question",{fontCharacter:"\\eb32"}),i.quote=new i("quote",{fontCharacter:"\\eb33"}),i.radioTower=new i("radio-tower",{fontCharacter:"\\eb34"}),i.reactions=new i("reactions",{fontCharacter:"\\eb35"}),i.references=new i("references",{fontCharacter:"\\eb36"}),i.refresh=new i("refresh",{fontCharacter:"\\eb37"}),i.regex=new i("regex",{fontCharacter:"\\eb38"}),i.remoteExplorer=new i("remote-explorer",{fontCharacter:"\\eb39"}),i.remote=new i("remote",{fontCharacter:"\\eb3a"}),i.remove=new i("remove",{fontCharacter:"\\eb3b"}),i.replaceAll=new i("replace-all",{fontCharacter:"\\eb3c"}),i.replace=new i("replace",{fontCharacter:"\\eb3d"}),i.repoClone=new i("repo-clone",{fontCharacter:"\\eb3e"}),i.repoForcePush=new i("repo-force-push",{fontCharacter:"\\eb3f"}),i.repoPull=new i("repo-pull",{fontCharacter:"\\eb40"}),i.repoPush=new i("repo-push",{fontCharacter:"\\eb41"}),i.report=new i("report",{fontCharacter:"\\eb42"}),i.requestChanges=new i("request-changes",{fontCharacter:"\\eb43"}),i.rocket=new i("rocket",{fontCharacter:"\\eb44"}),i.rootFolderOpened=new i("root-folder-opened",{fontCharacter:"\\eb45"}),i.rootFolder=new i("root-folder",{fontCharacter:"\\eb46"}),i.rss=new i("rss",{fontCharacter:"\\eb47"}),i.ruby=new i("ruby",{fontCharacter:"\\eb48"}),i.saveAll=new i("save-all",{fontCharacter:"\\eb49"}),i.saveAs=new i("save-as",{fontCharacter:"\\eb4a"}),i.save=new i("save",{fontCharacter:"\\eb4b"}),i.screenFull=new i("screen-full",{fontCharacter:"\\eb4c"}),i.screenNormal=new i("screen-normal",{fontCharacter:"\\eb4d"}),i.searchStop=new i("search-stop",{fontCharacter:"\\eb4e"}),i.server=new i("server",{fontCharacter:"\\eb50"}),i.settingsGear=new i("settings-gear",{fontCharacter:"\\eb51"}),i.settings=new i("settings",{fontCharacter:"\\eb52"}),i.shield=new i("shield",{fontCharacter:"\\eb53"}),i.smiley=new i("smiley",{fontCharacter:"\\eb54"}),i.sortPrecedence=new i("sort-precedence",{fontCharacter:"\\eb55"}),i.splitHorizontal=new i("split-horizontal",{fontCharacter:"\\eb56"}),i.splitVertical=new i("split-vertical",{fontCharacter:"\\eb57"}),i.squirrel=new i("squirrel",{fontCharacter:"\\eb58"}),i.starFull=new i("star-full",{fontCharacter:"\\eb59"}),i.starHalf=new i("star-half",{fontCharacter:"\\eb5a"}),i.symbolClass=new i("symbol-class",{fontCharacter:"\\eb5b"}),i.symbolColor=new i("symbol-color",{fontCharacter:"\\eb5c"}),i.symbolConstant=new i("symbol-constant",{fontCharacter:"\\eb5d"}),i.symbolEnumMember=new i("symbol-enum-member",{fontCharacter:"\\eb5e"}),i.symbolField=new i("symbol-field",{fontCharacter:"\\eb5f"}),i.symbolFile=new i("symbol-file",{fontCharacter:"\\eb60"}),i.symbolInterface=new i("symbol-interface",{fontCharacter:"\\eb61"}),i.symbolKeyword=new i("symbol-keyword",{fontCharacter:"\\eb62"}),i.symbolMisc=new i("symbol-misc",{fontCharacter:"\\eb63"}),i.symbolOperator=new i("symbol-operator",{fontCharacter:"\\eb64"}),i.symbolProperty=new i("symbol-property",{fontCharacter:"\\eb65"}),i.wrench=new i("wrench",{fontCharacter:"\\eb65"}),i.wrenchSubaction=new i("wrench-subaction",{fontCharacter:"\\eb65"}),i.symbolSnippet=new i("symbol-snippet",{fontCharacter:"\\eb66"}),i.tasklist=new i("tasklist",{fontCharacter:"\\eb67"}),i.telescope=new i("telescope",{fontCharacter:"\\eb68"}),i.textSize=new i("text-size",{fontCharacter:"\\eb69"}),i.threeBars=new i("three-bars",{fontCharacter:"\\eb6a"}),i.thumbsdown=new i("thumbsdown",{fontCharacter:"\\eb6b"}),i.thumbsup=new i("thumbsup",{fontCharacter:"\\eb6c"}),i.tools=new i("tools",{fontCharacter:"\\eb6d"}),i.triangleDown=new i("triangle-down",{fontCharacter:"\\eb6e"}),i.triangleLeft=new i("triangle-left",{fontCharacter:"\\eb6f"}),i.triangleRight=new i("triangle-right",{fontCharacter:"\\eb70"}),i.triangleUp=new i("triangle-up",{fontCharacter:"\\eb71"}),i.twitter=new i("twitter",{fontCharacter:"\\eb72"}),i.unfold=new i("unfold",{fontCharacter:"\\eb73"}),i.unlock=new i("unlock",{fontCharacter:"\\eb74"}),i.unmute=new i("unmute",{fontCharacter:"\\eb75"}),i.unverified=new i("unverified",{fontCharacter:"\\eb76"}),i.verified=new i("verified",{fontCharacter:"\\eb77"}),i.versions=new i("versions",{fontCharacter:"\\eb78"}),i.vmActive=new i("vm-active",{fontCharacter:"\\eb79"}),i.vmOutline=new i("vm-outline",{fontCharacter:"\\eb7a"}),i.vmRunning=new i("vm-running",{fontCharacter:"\\eb7b"}),i.watch=new i("watch",{fontCharacter:"\\eb7c"}),i.whitespace=new i("whitespace",{fontCharacter:"\\eb7d"}),i.wholeWord=new i("whole-word",{fontCharacter:"\\eb7e"}),i.window=new i("window",{fontCharacter:"\\eb7f"}),i.wordWrap=new i("word-wrap",{fontCharacter:"\\eb80"}),i.zoomIn=new i("zoom-in",{fontCharacter:"\\eb81"}),i.zoomOut=new i("zoom-out",{fontCharacter:"\\eb82"}),i.listFilter=new i("list-filter",{fontCharacter:"\\eb83"}),i.listFlat=new i("list-flat",{fontCharacter:"\\eb84"}),i.listSelection=new i("list-selection",{fontCharacter:"\\eb85"}),i.selection=new i("selection",{fontCharacter:"\\eb85"}),i.listTree=new i("list-tree",{fontCharacter:"\\eb86"}),i.debugBreakpointFunctionUnverified=new i("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),i.debugBreakpointFunction=new i("debug-breakpoint-function",{fontCharacter:"\\eb88"}),i.debugBreakpointFunctionDisabled=new i("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),i.debugStackframeActive=new i("debug-stackframe-active",{fontCharacter:"\\eb89"}),i.debugStackframeDot=new i("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),i.debugStackframe=new i("debug-stackframe",{fontCharacter:"\\eb8b"}),i.debugStackframeFocused=new i("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),i.debugBreakpointUnsupported=new i("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),i.symbolString=new i("symbol-string",{fontCharacter:"\\eb8d"}),i.debugReverseContinue=new i("debug-reverse-continue",{fontCharacter:"\\eb8e"}),i.debugStepBack=new i("debug-step-back",{fontCharacter:"\\eb8f"}),i.debugRestartFrame=new i("debug-restart-frame",{fontCharacter:"\\eb90"}),i.callIncoming=new i("call-incoming",{fontCharacter:"\\eb92"}),i.callOutgoing=new i("call-outgoing",{fontCharacter:"\\eb93"}),i.menu=new i("menu",{fontCharacter:"\\eb94"}),i.expandAll=new i("expand-all",{fontCharacter:"\\eb95"}),i.feedback=new i("feedback",{fontCharacter:"\\eb96"}),i.groupByRefType=new i("group-by-ref-type",{fontCharacter:"\\eb97"}),i.ungroupByRefType=new i("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),i.account=new i("account",{fontCharacter:"\\eb99"}),i.bellDot=new i("bell-dot",{fontCharacter:"\\eb9a"}),i.debugConsole=new i("debug-console",{fontCharacter:"\\eb9b"}),i.library=new i("library",{fontCharacter:"\\eb9c"}),i.output=new i("output",{fontCharacter:"\\eb9d"}),i.runAll=new i("run-all",{fontCharacter:"\\eb9e"}),i.syncIgnored=new i("sync-ignored",{fontCharacter:"\\eb9f"}),i.pinned=new i("pinned",{fontCharacter:"\\eba0"}),i.githubInverted=new i("github-inverted",{fontCharacter:"\\eba1"}),i.debugAlt=new i("debug-alt",{fontCharacter:"\\eb91"}),i.serverProcess=new i("server-process",{fontCharacter:"\\eba2"}),i.serverEnvironment=new i("server-environment",{fontCharacter:"\\eba3"}),i.pass=new i("pass",{fontCharacter:"\\eba4"}),i.stopCircle=new i("stop-circle",{fontCharacter:"\\eba5"}),i.playCircle=new i("play-circle",{fontCharacter:"\\eba6"}),i.record=new i("record",{fontCharacter:"\\eba7"}),i.debugAltSmall=new i("debug-alt-small",{fontCharacter:"\\eba8"}),i.vmConnect=new i("vm-connect",{fontCharacter:"\\eba9"}),i.cloud=new i("cloud",{fontCharacter:"\\ebaa"}),i.merge=new i("merge",{fontCharacter:"\\ebab"}),i.exportIcon=new i("export",{fontCharacter:"\\ebac"}),i.graphLeft=new i("graph-left",{fontCharacter:"\\ebad"}),i.magnet=new i("magnet",{fontCharacter:"\\ebae"}),i.notebook=new i("notebook",{fontCharacter:"\\ebaf"}),i.redo=new i("redo",{fontCharacter:"\\ebb0"}),i.checkAll=new i("check-all",{fontCharacter:"\\ebb1"}),i.pinnedDirty=new i("pinned-dirty",{fontCharacter:"\\ebb2"}),i.passFilled=new i("pass-filled",{fontCharacter:"\\ebb3"}),i.circleLargeFilled=new i("circle-large-filled",{fontCharacter:"\\ebb4"}),i.circleLargeOutline=new i("circle-large-outline",{fontCharacter:"\\ebb5"}),i.combine=new i("combine",{fontCharacter:"\\ebb6"}),i.gather=new i("gather",{fontCharacter:"\\ebb6"}),i.table=new i("table",{fontCharacter:"\\ebb7"}),i.variableGroup=new i("variable-group",{fontCharacter:"\\ebb8"}),i.typeHierarchy=new i("type-hierarchy",{fontCharacter:"\\ebb9"}),i.typeHierarchySub=new i("type-hierarchy-sub",{fontCharacter:"\\ebba"}),i.typeHierarchySuper=new i("type-hierarchy-super",{fontCharacter:"\\ebbb"}),i.gitPullRequestCreate=new i("git-pull-request-create",{fontCharacter:"\\ebbc"}),i.runAbove=new i("run-above",{fontCharacter:"\\ebbd"}),i.runBelow=new i("run-below",{fontCharacter:"\\ebbe"}),i.notebookTemplate=new i("notebook-template",{fontCharacter:"\\ebbf"}),i.debugRerun=new i("debug-rerun",{fontCharacter:"\\ebc0"}),i.workspaceTrusted=new i("workspace-trusted",{fontCharacter:"\\ebc1"}),i.workspaceUntrusted=new i("workspace-untrusted",{fontCharacter:"\\ebc2"}),i.workspaceUnspecified=new i("workspace-unspecified",{fontCharacter:"\\ebc3"}),i.terminalCmd=new i("terminal-cmd",{fontCharacter:"\\ebc4"}),i.terminalDebian=new i("terminal-debian",{fontCharacter:"\\ebc5"}),i.terminalLinux=new i("terminal-linux",{fontCharacter:"\\ebc6"}),i.terminalPowershell=new i("terminal-powershell",{fontCharacter:"\\ebc7"}),i.terminalTmux=new i("terminal-tmux",{fontCharacter:"\\ebc8"}),i.terminalUbuntu=new i("terminal-ubuntu",{fontCharacter:"\\ebc9"}),i.terminalBash=new i("terminal-bash",{fontCharacter:"\\ebca"}),i.arrowSwap=new i("arrow-swap",{fontCharacter:"\\ebcb"}),i.copy=new i("copy",{fontCharacter:"\\ebcc"}),i.personAdd=new i("person-add",{fontCharacter:"\\ebcd"}),i.filterFilled=new i("filter-filled",{fontCharacter:"\\ebce"}),i.wand=new i("wand",{fontCharacter:"\\ebcf"}),i.debugLineByLine=new i("debug-line-by-line",{fontCharacter:"\\ebd0"}),i.inspect=new i("inspect",{fontCharacter:"\\ebd1"}),i.layers=new i("layers",{fontCharacter:"\\ebd2"}),i.layersDot=new i("layers-dot",{fontCharacter:"\\ebd3"}),i.layersActive=new i("layers-active",{fontCharacter:"\\ebd4"}),i.compass=new i("compass",{fontCharacter:"\\ebd5"}),i.compassDot=new i("compass-dot",{fontCharacter:"\\ebd6"}),i.compassActive=new i("compass-active",{fontCharacter:"\\ebd7"}),i.azure=new i("azure",{fontCharacter:"\\ebd8"}),i.issueDraft=new i("issue-draft",{fontCharacter:"\\ebd9"}),i.gitPullRequestClosed=new i("git-pull-request-closed",{fontCharacter:"\\ebda"}),i.gitPullRequestDraft=new i("git-pull-request-draft",{fontCharacter:"\\ebdb"}),i.debugAll=new i("debug-all",{fontCharacter:"\\ebdc"}),i.debugCoverage=new i("debug-coverage",{fontCharacter:"\\ebdd"}),i.runErrors=new i("run-errors",{fontCharacter:"\\ebde"}),i.folderLibrary=new i("folder-library",{fontCharacter:"\\ebdf"}),i.debugContinueSmall=new i("debug-continue-small",{fontCharacter:"\\ebe0"}),i.beakerStop=new i("beaker-stop",{fontCharacter:"\\ebe1"}),i.graphLine=new i("graph-line",{fontCharacter:"\\ebe2"}),i.graphScatter=new i("graph-scatter",{fontCharacter:"\\ebe3"}),i.pieChart=new i("pie-chart",{fontCharacter:"\\ebe4"}),i.bracket=new i("bracket",i.json.definition),i.bracketDot=new i("bracket-dot",{fontCharacter:"\\ebe5"}),i.bracketError=new i("bracket-error",{fontCharacter:"\\ebe6"}),i.lockSmall=new i("lock-small",{fontCharacter:"\\ebe7"}),i.azureDevops=new i("azure-devops",{fontCharacter:"\\ebe8"}),i.verifiedFilled=new i("verified-filled",{fontCharacter:"\\ebe9"})})(De||(De={}));class qr{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;return s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;"),s&4&&(r+="text-decoration: underline;"),r}}const $2e=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&CD.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=De.symbolProperty),n.classNames}}();let gJ=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Gr;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Gr||(Gr={}));var wW;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(wW||(wW={}));var yW;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(yW||(yW={}));function j2e(i){return i&&Ke.isUri(i.uri)&&V.isIRange(i.range)&&(V.isIRange(i.originSelectionRange)||V.isIRange(i.targetSelectionRange))}var CW;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}i.fromString=n;function s(o){return t.get(o)}i.toString=s;function r(o,a){const l=t.get(o);let h=l&&CD.get("symbol-"+l);return h||(console.info("No codicon found for SymbolKind "+o),h=De.symbolProperty),`${a?"inline":"block"} ${h.classNames}`}i.toCssClassName=r})(CW||(CW={}));class Wa{constructor(e){this.value=e}}Wa.Comment=new Wa("comment");Wa.Imports=new Wa("imports");Wa.Region=new Wa("region");var SW;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(SW||(SW={}));const SD=new Ii,BR=new Ii,ba=new Ii,$5=new Ii,VR=new Ii,f1=new Ii,WR=new Ii,xD=new Ii,q2e=new Ii,g1=new Ii,DD=new Ii,kD=new Ii,LD=new Ii,zR=new Ii,HR=new Ii,Hl=new Ii,Gb=new Ii,Zc=new Ii,pJ=new Ii,mJ=new Ii,e0=new Ii,G2e=new Ii,UR=new Ii,t0=new Ii,_J=new Ii,Ri=new z2e;class K2e{clone(){return this}equals(e){return this===e}}const ZL=new K2e,Ou="vs.editor.nullMode";function Z2e(i,e,t,n){return new x5([new zL(n,"",i)],t)}function bJ(i,e,t,n){let s=new Uint32Array(2);return s[0]=n,s[1]=(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new HL(s,t===null?ZL:t)}const Y2e="editorWorkerService",rd=kt(Y2e),Gs=kt("modeService"),Kl=kt("textModelService"),Q2e="$initialize";let xW=!1;function $R(i){ny&&(xW||(xW=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class X2e{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.method=n,this.args=s,this.type=0}}class DW{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=1}}class J2e{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=s,this.type=2}}class eEe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class tEe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class iEe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new X2e(this._workerId,n,e,t))})}listen(e,t){let n=null;const s=new H({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,s),this._send(new J2e(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new tEe(this._workerId,n)),n=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new DW(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=YV(s.detail)),this._send(new DW(this._workerId,t,void 0,YV(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new eEe(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class nEe extends ne{constructor(e,t,n){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",h=>{this._protocol.handleMessage(h)},h=>{s&&s(h)})),this._protocol=new iEe({sendMessage:(h,c)=>{this._worker.postMessage(h,c)},handleMessage:(h,c)=>{if(typeof n[h]!="function")return Promise.reject(new Error("Missing method "+h+" on main thread host."));try{return Promise.resolve(n[h].apply(n,c))}catch(u){return Promise.reject(u)}},handleEvent:(h,c)=>{if(wJ(h)){const u=n[h].call(n,c);if(typeof u!="function")throw new Error(`Missing dynamic event ${h} on main thread host.`);return u}if(vJ(h)){const u=n[h];if(typeof u!="function")throw new Error(`Missing event ${h} on main thread host.`);return u}throw new Error(`Malformed event name ${h}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;typeof ai.require<"u"&&typeof ai.require.getConfig=="function"?r=ai.require.getConfig():typeof ai.requirejs<"u"&&(r=ai.requirejs.s.contexts._.config);const o=V5(n);this._onModuleLoaded=this._protocol.sendMessage(Q2e,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,o]);const a=(h,c)=>this._request(h,c),l=(h,c)=>this._protocol.listen(h,c);this._lazyProxy=new Promise((h,c)=>{s=c,this._onModuleLoaded.then(u=>{h(sEe(u,a,l))},u=>{c(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function vJ(i){return i[0]==="o"&&i[1]==="n"&&Hc(i.charCodeAt(2))}function wJ(i){return/^onDynamic/.test(i)&&Hc(i.charCodeAt(9))}function sEe(i,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},s=o=>function(a){return t(o,a)};let r={};for(const o of i){if(wJ(o)){r[o]=s(o);continue}if(vJ(o)){r[o]=t(o,void 0);continue}r[o]=n(o)}return r}var iI;const kW=(iI=window.trustedTypes)===null||iI===void 0?void 0:iI.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function rEe(i,e){if(ai.MonacoEnvironment){if(typeof ai.MonacoEnvironment.getWorker=="function")return ai.MonacoEnvironment.getWorker(i,e);if(typeof ai.MonacoEnvironment.getWorkerUrl=="function"){const t=ai.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(kW?kW.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function oEe(i){return typeof i.then=="function"}class aEe{constructor(e,t,n,s,r){this.id=t;const o=rEe("workerMain.js",n);oEe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class YL{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let s=++YL.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new aEe(e,s,this._label||"anonymous"+s,t,r=>{$R(r),this._webWorkerFailedBeforeError=r,n(r)})}}YL.LAST_WORKER_ID=0;var gn;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(gn||(gn={}));class nI{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}}class lEe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)O_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),O_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),O_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),O_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&O_(this.autoClosingPairsCloseSingleChar,t.close,t)}}function O_(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function oC(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n),r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new hEe(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class hEe{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function dl(i){return(i&7)!==0}class i0{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new nI(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new nI({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=LW(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=LW(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new nI({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,n){if(t.getTokenCount()===0)return!0;const s=t.findTokenIndexAtOffset(n-2),r=t.getStandardTokenType(s);return e.isOK(r)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}i0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function LW(i){return i.filter(([e,t])=>e!==""&&t!=="")}let sI;function yJ(){return sI||(sI=new TextDecoder("UTF-16LE")),sI}let rI;function cEe(){return rI||(rI=new TextDecoder("UTF-16BE")),rI}let oI;function CJ(){return oI||(oI=bX()?yJ():cEe()),oI}const SJ=typeof TextDecoder<"u";let jf,jR;SJ?(jf=i=>new dEe(i),jR=uEe):(jf=i=>new fEe,jR=xJ);function uEe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?xJ(i,e,t):yJ().decode(n)}function xJ(i,e,t){let n=[],s=0;for(let r=0;r<t;r++){const o=QLe(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class dEe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return CJ().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||kn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class fEe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class ED{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=ED._toSet(this.open),this._closeSet=ED._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function gEe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,h]=o,[c,u]=a;return l===c||l===u||h===c||h===u},s=(o,a)=>{const l=Math.min(o,a),h=Math.max(o,a);for(let c=0;c<e;c++)t[c]===h&&(t[c]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const h=i[l];n(a,h)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){let a=[],l=[];for(let h=0;h<e;h++)if(t[h]===o){const[c,u]=i[h];a.push(c),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class pEe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=gEe(t);this.brackets=n.map((s,r)=>new ED(e,r,s.open,s.close,mEe(s.open,s.close,n,r),_Ee(s.open,s.close,n,r))),this.forwardRegex=bEe(this.brackets),this.reversedRegex=vEe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function DJ(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function kJ(i,e){return i.length-e.length}function QL(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function mEe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)DJ(s[r],t,n,s);return s=QL(s),s.sort(kJ),s.reverse(),XL(s)}function _Ee(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)DJ(s[r],t,n,s);return s=QL(s),s.sort(kJ),s.reverse(),XL(s.map(j5))}function bEe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=QL(e),XL(e)}function vEe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=QL(e),XL(e.map(j5))}function wEe(i){const e=/^[\w ]+$/.test(i);return i=Fa(i),e?`\\b${i}\\b`:i}function XL(i){let e=`(${i.map(wEe).join(")|(")})`;return XX(e,!0)}const j5=function(){function i(n){if(SJ){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return CJ().decode(s)}else{let s=[],r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charAt(o);return s.join("")}}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class wo{static _findPrevBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=n.length-(r.index||0),a=r[0].length,l=s+o;return new V(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=j5(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=r.index||0,a=r[0].length;if(a===0)return null;let l=s+o;return new V(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class yEe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return e=e.filter((t,n,s)=>s.indexOf(t)===n),e}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(dl(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=wo.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const c=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:l}:null}}function aC(i){return i.global&&(i.lastIndex=0),!0}class CEe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&aC(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&aC(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&aC(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&aC(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Vp{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Vp._createOpenBracketRegExp(t[0]),s=Vp._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(h=>h.reg?(h.reg.lastIndex=0,h.reg.test(h.text)):!0))return a.action}if(e>=2&&n.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:gn.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:gn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Fa(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Vp._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Fa(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Vp._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return nt(t),null}}}class SEe{constructor(){this.data=new Map}add(e,t){FS(Va(e)),FS(Ps(t)),FS(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Pn=new SEe,JL={JSONContribution:"base.contributions.json"};function xEe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class DEe{constructor(){this._onDidChangeSchema=new H,this.schemasById={}}registerSchema(e,t){this.schemasById[xEe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const kEe=new DEe;Pn.add(JL.JSONContribution,kEe);const t_={Configuration:"base.contributions.configuration"},aI="vscode://schemas/settings/resourceLanguage",EW=Pn.as(JL.JSONContribution);class LEe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new H,this._onDidUpdateConfiguration=new H,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:v("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},EW.registerSchema(aI,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);EW.registerSchema(aI,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(s=>{n.push(...this.validateAndRegisterProperties(s,t,s.extensionInfo)),this.configurationContributors.push(s),this.registerJSONConfiguration(s)}),n}validateAndRegisterProperties(e,t=!0,n,s=3){var r;s=jr(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let h in a){if(t&&TEe(h)){delete a[h];continue}const c=a[h];if(this.updatePropertyDefaultValue(h,c),q5.test(h)?c.scope=void 0:(c.scope=jr(c.scope)?s:c.scope,c.restricted=jr(c.restricted)?!!(!((r=n==null?void 0:n.restrictedConfigurations)===null||r===void 0)&&r.includes(h)):c.restricted),a[h].hasOwnProperty("included")&&!a[h].included){this.excludedConfigurationProperties[h]=a[h],delete a[h];continue}else this.configurationProperties[h]=a[h];!a[h].deprecationMessage&&a[h].markdownDeprecationMessage&&(a[h].deprecationMessage=a[h].markdownDeprecationMessage),o.push(h)}let l=e.allOf;if(l)for(let h of l)o.push(...this.validateAndRegisterProperties(h,t,n,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);let r=n.allOf;r&&r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:v("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:aI};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];bs(n)&&(n=t.default),bs(n)&&(n=IEe(t.type)),t.default=n}}const EEe="\\[.*\\]$",q5=new RegExp(EEe);function AEe(i){return i.substring(1,i.length-1)}function IEe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const LJ=new LEe;Pn.add(t_.Configuration,LJ);function TEe(i){return i.trim()?q5.test(i)?v("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):LJ.getConfigurationProperties()[i]!==void 0?v("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:v("config.property.empty","Cannot register an empty property")}const Ki=kt("configurationService");function EJ(i,e){const t=Object.create(null);for(let n in i)G5(t,n,i[n],e);return t}function G5(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){let l=s[a],h=o[l];switch(typeof h){case"undefined":h=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(h)}`);return}o=h}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function NEe(i,e){const t=e.split(".");AJ(i,t)}function AJ(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(AJ(n,e),Object.keys(n).length===0&&delete i[t])}}function MEe(i,e,t){function n(o,a){let l=o;for(const h of a){if(typeof l!="object"||l===null)return;l=l[h]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function REe(){const i=Pn.as(t_.Configuration).getConfigurationProperties();return Object.keys(i)}function OEe(){const i=Object.create(null),e=Pn.as(t_.Configuration).getConfigurationProperties();for(let t in e){let n=e[t].default;G5(i,t,n,s=>console.error(`Conflict in default settings: ${s}`))}return i}class Uc{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const IJ=[];function Dg(i,e,t){e instanceof Uc||(e=new Uc(e,[],t)),IJ.push([i,e])}function PEe(){return IJ}var FEe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class lI{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const hy=kt("languageConfigurationService");let AD=class extends ne{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new H),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(qR));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>n.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(h=>n.has(h))).map(([a])=>this.modeService.validateLanguageId(a));if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new lI(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new lI(a)))})),this._register(zi.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new lI(s.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=BEe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};AD=FEe([AW(0,Ki),AW(1,Gs)],AD);function BEe(i,e,t){let n=zi.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new p1(a,{})}const s=VEe(n.languageId,e),r=TJ([n.underlyingConfig,s]);return new p1(n.languageId,r)}const qR={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function VEe(i,e){const t=e.getValue(qR.brackets,{overrideIdentifier:i}),n=e.getValue(qR.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:IW(t),colorizedBracketPairs:IW(n)}}function IW(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class TW{constructor(e){this.languageId=e}}class WEe{constructor(){this._entries=new Map,this._onDidChange=new H,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let s=this._entries.get(e);s||(s=new zEe(e),this._entries.set(e,s));const r=s.register(t,n);return this._onDidChange.fire(new TW(e)),xt(()=>{r.dispose(),this._onDidChange.fire(new TW(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let s=oC(t,n-1),r=this._getElectricCharacterSupport(s.languageId);return r?r.onElectricCharacter(e,s,n-s.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new lEe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():i0.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,n){const s=oC(t,n-1);return i0.shouldAutoClosePair(e,s,n-s.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return hD(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let s=e.getLanguageIdAtPosition(t,0);if(t>1){let r,o=-1;for(r=t-1;r>=1;r--){if(e.getLanguageIdAtPosition(r,0)!==s)return o;let a=e.getLineContent(r);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=r;continue}return r}}return-1}getInheritIndentForLine(e,t,n,s=!0){if(e<4)return null;const r=this.getIndentRulesSupport(t.getLanguageId());if(!r)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,r);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(r.shouldIncrease(a)||r.shouldIndentNextLine(a))return{indentation:nn(a),action:gn.Indent,line:o};if(r.shouldDecrease(a))return{indentation:nn(a),action:null,line:o};{if(o===1)return{indentation:nn(t.getLineContent(o)),action:null,line:o};const l=o-1,h=r.getIndentMetadata(t.getLineContent(l));if(!(h&3)&&h&4){let c=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(t.getLineContent(u))){c=u;break}return{indentation:nn(t.getLineContent(c+1)),action:null,line:c+1}}if(s)return{indentation:nn(t.getLineContent(o)),action:null,line:o};for(let c=o;c>0;c--){const u=t.getLineContent(c);if(r.shouldIncrease(u))return{indentation:nn(u),action:gn.Indent,line:c};if(r.shouldIndentNextLine(u)){let d=0;for(let f=c-1;f>0;f--)if(!r.shouldIndentNextLine(t.getLineContent(c))){d=f;break}return{indentation:nn(t.getLineContent(d+1)),action:null,line:d+1}}else if(r.shouldDecrease(u))return{indentation:nn(u),action:null,line:c}}return{indentation:nn(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,s,r){if(e<4)return null;const o=this.getLanguageConfiguration(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,s),h=t.getLineContent(s);if(l){const c=l.line;if(c!==void 0){const u=o.onEnter(e,"",t.getLineContent(c),"");if(u){let d=nn(t.getLineContent(c));return u.removeText&&(d=d.substring(0,d.length-u.removeText)),u.indentAction===gn.Indent||u.indentAction===gn.IndentOutdent?d=r.shiftIndent(d):u.indentAction===gn.Outdent&&(d=r.unshiftIndent(d)),a.shouldDecrease(h)&&(d=r.unshiftIndent(d)),u.appendText&&(d+=u.appendText),nn(d)}}return a.shouldDecrease(h)?l.action===gn.Indent?l.indentation:r.unshiftIndent(l.indentation):l.action===gn.Indent?r.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,s){if(e<4)return null;t.forceTokenization(n.startLineNumber);const r=t.getLineTokens(n.startLineNumber),o=oC(r,n.startColumn-1),a=o.getLineContent();let l=!1,h;o.firstCharOffset>0&&r.getLanguageId(0)!==o.languageId?(l=!0,h=a.substr(0,n.startColumn-1-o.firstCharOffset)):h=r.getLineContent().substring(0,n.startColumn-1);let c;n.isEmpty()?c=a.substr(n.startColumn-1-o.firstCharOffset):c=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const u=this.getIndentRulesSupport(o.languageId);if(!u)return null;const d=h,f=nn(h),g={getLineTokens:_=>t.getLineTokens(_),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(_,w)=>t.getLanguageIdAtPosition(_,w),getLineContent:_=>_===n.startLineNumber?d:t.getLineContent(_)},p=nn(r.getLineContent()),m=this.getInheritIndentForLine(e,g,n.startLineNumber+1);if(!m){const _=l?p:f;return{beforeEnter:_,afterEnter:_}}let b=l?p:m.indentation;return m.action===gn.Indent&&(b=s.shiftIndent(b)),u.shouldDecrease(c)&&(b=s.unshiftIndent(b)),{beforeEnter:l?p:f,afterEnter:b}}getIndentActionForType(e,t,n,s,r){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),h=l.substr(0,n.startColumn-1-o.firstCharOffset);let c;if(n.isEmpty()?c=l.substr(n.startColumn-1-o.firstCharOffset):c=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(h+c)&&a.shouldDecrease(h+s+c)){const u=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!u)return null;let d=u.indentation;return u.action!==gn.Indent&&(d=r.unshiftIndent(d)),d}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),r=this.getLanguageConfiguration(s.languageId);if(!r)return null;const o=s.getLineContent(),a=o.substr(0,n.startColumn-1-s.firstCharOffset);let l;n.isEmpty()?l=o.substr(n.startColumn-1-s.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);let h="";if(n.startLineNumber>1&&s.firstCharOffset===0){const p=this.getScopedLineTokens(t,n.startLineNumber-1);p.languageId===s.languageId&&(h=p.getLineContent())}const c=r.onEnter(e,h,a,l);if(!c)return null;const u=c.indentAction;let d=c.appendText;const f=c.removeText||0;d?u===gn.Indent&&(d="	"+d):u===gn.Indent||u===gn.IndentOutdent?d="	":d="";let g=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:g}}getIndentationAtPosition(e,t,n){const s=e.getLineContent(t);let r=nn(s);return r.length>n-1&&(r=r.substring(0,n-1)),r}getScopedLineTokens(e,t,n){e.forceTokenization(t);const s=e.getLineTokens(t),r=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return oC(s,r)}}const zi=new WEe;class zEe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new NW(e,t,++this._order);return this._entries.push(n),this._resolved=null,xt(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new p1(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(NW.cmp),TJ(this._entries.map(e=>e.configuration)))}}function TJ(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class NW{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class p1{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Vp(this.underlyingConfig):null,this.comments=p1._handleComments(this.underlyingConfig),this.characterPair=new i0(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||wX,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new CEe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return hD(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new pEe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new yEe(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[s,r]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=r}return n}}Dg(hy,AD);class Bc{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class MW{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function HEe(i,e,t){return new Dl(new MW(i),new MW(e)).ComputeDiff(t).changes}class op{static Assert(e,t){if(!e)throw new Error(t)}}class ap{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}class RW{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Bc(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Dl{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=Dl._getElements(e),[a,l,h]=Dl._getElements(t);this._hasStrings=o&&h,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Dl._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=H5(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Dl._getStrictElement(this._originalSequence,e),s=Dl._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let u;return n<=s?(op.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Bc(e,0,n,s-n+1)]):e<=t?(op.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Bc(e,t-e+1,n,0)]):(op.Assert(e===t+1,"originalStart should only be one more than originalEnd"),op.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),h=o[0],c=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,h,n,c,r);let d=[];return r[0]?d=[new Bc(h+1,t-(h+1)+1,c+1,s-(c+1)+1)]:d=this.ComputeDiffRecursive(h+1,t,c+1,s,r),this.ConcatenateChanges(u,d)}return[new Bc(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p,m,b,_){let w=null,y=null,x=new RW,L=t,S=n,k=f[0]-m[0]-s,D=-1073741824,T=this.m_forwardHistory.length-1;do{const M=k+e;M===L||M<S&&h[M-1]<h[M+1]?(u=h[M+1],g=u-k-s,u<D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g),k=M+1-e):(u=h[M-1]+1,g=u-k-s,u<D&&x.MarkNextChange(),D=u-1,x.AddOriginalElement(u,g+1),k=M-1-e),T>=0&&(h=this.m_forwardHistory[T],e=h[0],L=1,S=h.length-1)}while(--T>=-1);if(w=x.getReverseChanges(),_[0]){let M=f[0]+1,j=m[0]+1;if(w!==null&&w.length>0){const $=w[w.length-1];M=Math.max(M,$.getOriginalEnd()),j=Math.max(j,$.getModifiedEnd())}y=[new Bc(M,d-M+1,j,p-j+1)]}else{x=new RW,L=o,S=a,k=f[0]-m[0]-l,D=1073741824,T=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const M=k+r;M===L||M<S&&c[M-1]>=c[M+1]?(u=c[M+1]-1,g=u-k-l,u>D&&x.MarkNextChange(),D=u+1,x.AddOriginalElement(u+1,g+1),k=M+1-r):(u=c[M-1],g=u-k-l,u>D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g+1),k=M-1-r),T>=0&&(c=this.m_reverseHistory[T],r=c[0],L=1,S=c.length-1)}while(--T>=-1);y=x.getChanges()}return this.ConcatenateChanges(w,y)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,h=0,c=0,u=0,d=0,f=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-n),p=g+1,m=new Int32Array(p),b=new Int32Array(p),_=s-n,w=t-e,y=e-n,x=t-s,S=(w-_)%2===0;m[_]=e,b[w]=t,a[0]=!1;for(let k=1;k<=g/2+1;k++){let D=0,T=0;c=this.ClipDiagonalBound(_-k,k,_,p),u=this.ClipDiagonalBound(_+k,k,_,p);for(let j=c;j<=u;j+=2){j===c||j<u&&m[j-1]<m[j+1]?l=m[j+1]:l=m[j-1]+1,h=l-(j-_)-y;const $=l;for(;l<t&&h<s&&this.ElementsAreEqual(l+1,h+1);)l++,h++;if(m[j]=l,l+h>D+T&&(D=l,T=h),!S&&Math.abs(j-w)<=k-1&&l>=b[j])return r[0]=l,o[0]=h,$<=b[j]&&1447>0&&k<=1447+1?this.WALKTRACE(_,c,u,y,w,d,f,x,m,b,l,t,r,h,s,o,S,a):null}const M=(D-e+(T-n)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(D,M))return a[0]=!0,r[0]=D,o[0]=T,M>0&&1447>0&&k<=1447+1?this.WALKTRACE(_,c,u,y,w,d,f,x,m,b,l,t,r,h,s,o,S,a):(e++,n++,[new Bc(e,t-e+1,n,s-n+1)]);d=this.ClipDiagonalBound(w-k,k,w,p),f=this.ClipDiagonalBound(w+k,k,w,p);for(let j=d;j<=f;j+=2){j===d||j<f&&b[j-1]>=b[j+1]?l=b[j+1]-1:l=b[j-1],h=l-(j-w)-x;const $=l;for(;l>e&&h>n&&this.ElementsAreEqual(l,h);)l--,h--;if(b[j]=l,S&&Math.abs(j-_)<=k&&l<=m[j])return r[0]=l,o[0]=h,$>=m[j]&&1447>0&&k<=1447+1?this.WALKTRACE(_,c,u,y,w,d,f,x,m,b,l,t,r,h,s,o,S,a):null}if(k<=1447){let j=new Int32Array(u-c+2);j[0]=_-c+1,ap.Copy2(m,c,j,1,u-c+1),this.m_forwardHistory.push(j),j=new Int32Array(f-d+2),j[0]=w-d+1,ap.Copy2(b,d,j,1,f-d+1),this.m_reverseHistory.push(j)}}return this.WALKTRACE(_,c,u,y,w,d,f,x,m,b,l,t,r,h,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const h=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!h)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,h=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const d=n.originalStart-u,f=n.modifiedStart-u;if(d<s||f<r||o&&!this.OriginalElementsAreEqual(d,d+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const p=(d===s&&f===r?5:0)+this._boundaryScore(d,n.originalLength,f,n.modifiedLength);p>h&&(h=p,l=u)}n.originalStart-=l,n.modifiedStart-=l;const c=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],c)){e[t-1]=c[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,h=l-a,c=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,d=u-c;if(o<5&&h<20&&d<20){const f=this._findBetterContiguousSequence(a,h,c,d,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,h=0,c=0;for(let u=e;u<o;u++)for(let d=n;d<a;d++){const f=this._contiguousSequenceScore(u,d,r);f>0&&f>l&&(l=f,h=u,c=d)}return l>0?[h,c]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return ap.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],ap.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return ap.Copy(e,0,s,0,e.length),ap.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(op.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),op.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Bc(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}const UEe=3;function NJ(i,e,t,n){return new Dl(i,e,t).ComputeDiff(n)}class OW{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=GR(e[s],1),n[s]=KR(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const h=this.lines[l],c=e?this._startColumns[l]:1,u=e?this._endColumns[l]:h.length+1;for(let d=c;d<u;d++)s[a]=h.charCodeAt(d-1),r[a]=l+1,o[a]=d,a++}return new $Ee(s,r,o)}}class $Ee{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class m1{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let s,r,o,a,l,h,c,u;return e.originalLength===0?(s=0,r=0,o=0,a=0):(s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,h=0,c=0,u=0):(l=n.getStartLineNumber(e.modifiedStart),h=n.getStartColumn(e.modifiedStart),c=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new m1(s,r,o,a,l,h,c,u)}}function jEe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<UEe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class Kb{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,h,c,u,d;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,h=0):(l=n.getStartLineNumber(t.originalStart),h=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(c=s.getStartLineNumber(t.modifiedStart)-1,u=0):(c=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let p=NJ(f,g,r,!0).changes;a&&(p=jEe(p)),d=[];for(let m=0,b=p.length;m<b;m++)d.push(m1.createFromDiffChange(p[m],f,g))}return new Kb(l,h,c,u,d)}}class qEe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new OW(e),this.modified=new OW(t),this.continueLineDiff=PW(n.maxComputationTime),this.continueCharDiff=PW(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=NJ(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,h=t.length;l<h;l++)a.push(Kb.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const h=a+1<l?t[a+1]:null,c=h?h.originalStart:this.originalLines.length,u=h?h.modifiedStart:this.modifiedLines.length;for(;r<c&&o<u;){const d=this.originalLines[r],f=this.modifiedLines[o];if(d!==f){{let g=GR(d,1),p=GR(f,1);for(;g>1&&p>1;){const m=d.charCodeAt(g-2),b=f.charCodeAt(p-2);if(m!==b)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=KR(d,1),p=KR(f,1);const m=d.length+1,b=f.length+1;for(;g<m&&p<b;){const _=d.charCodeAt(g-1),w=d.charCodeAt(p-1);if(_!==w)break;g++,p++}(g<m||p<b)&&this._pushTrimWhitespaceCharChange(s,r+1,g,m,o+1,p,b)}}r++,o++}h&&(s.push(Kb.createFromDiffResult(this.shouldIgnoreTrimWhitespace,h,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=h.originalLength,o+=h.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new m1(t,n,t,s,r,o,r,a)]),e.push(new Kb(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const h=e[l-1];return h.originalEndLineNumber===0||h.modifiedEndLineNumber===0?!1:h.originalEndLineNumber+1===t&&h.modifiedEndLineNumber+1===r?(h.originalEndLineNumber=t,h.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&h.charChanges&&h.charChanges.push(new m1(t,n,t,s,r,o,r,a)),!0):!1}}function GR(i,e){const t=ar(i);return t===-1?e:t+1}function KR(i,e){const t=e_(i);return t===-1?e:t+2}function PW(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}function ID(i){return i<0?0:i>255?255:i|0}function lp(i){return i<0?0:i>4294967295?4294967295:i|0}class MJ{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class GEe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=lp(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=lp(e),t=lp(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=lp(e),t=lp(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;let r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=lp(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new MJ(s,e-o)}}class KEe{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new K(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new GEe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=ql(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class i_{constructor(e){let t=ID(e);this._defaultValue=t,this._asciiMap=i_._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=ID(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class ZEe{constructor(){this._actual=new i_(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class YEe{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class QEe{constructor(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++){let[a,l,h]=e[r];l>t&&(t=l),a>n&&(n=a),h>n&&(n=h)}t++,n++;let s=new YEe(n,t,0);for(let r=0,o=e.length;r<o;r++){let[a,l,h]=e[r];s.set(a,l,h)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let hI=null;function XEe(){return hI===null&&(hI=new QEe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),hI}let P_=null;function JEe(){if(P_===null){P_=new i_(0);const i=` 	<>'"`;for(let t=0;t<i.length;t++)P_.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)P_.set(e.charCodeAt(t),2)}return P_}class TD{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=XEe()){const n=JEe();let s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let h=0,c=0,u=0,d=1,f=!1,g=!1,p=!1,m=!1;for(;h<l;){let b=!1;const _=a.charCodeAt(h);if(d===13){let w;switch(_){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:p=!0,g=!0,w=0;break;case 93:p=!1,w=g?0:1;break;case 123:m=!0,w=0;break;case 125:w=m?0:1;break;case 39:w=u===34||u===96?0:1;break;case 34:w=u===39||u===96?0:1;break;case 96:w=u===39||u===34?0:1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=p?0:1;break;default:w=n.get(_)}w===1&&(s.push(TD._createLink(n,a,r,c,h)),b=!0)}else if(d===12){let w;_===91?(g=!0,w=0):w=n.get(_),w===1?b=!0:d=13}else d=t.nextState(d,_),d===0&&(b=!0);b&&(d=1,f=!1,g=!1,m=!1,c=h+1,u=_),h++}d===13&&s.push(TD._createLink(n,a,r,c,l))}return s}}function eAe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:TD.computeLinks(i)}class ZR{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,s,r){if(e&&t){let o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){let o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),s=Number(e),r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}ZR.INSTANCE=new ZR;var hp=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class tAe extends KEe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=cD(e.column,hD(t),this._lines[e.lineNumber-1],0);return n?new V(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!K.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{let r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}class qf{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new tAe(Ke.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeDiff(e,t,n,s){return hp(this,void 0,void 0,function*(){const r=this._getModel(e),o=this._getModel(t);if(!r||!o)return null;const a=r.getLinesContent(),l=o.getLinesContent(),c=new qEe(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:s}).computeDiff(),u=c.changes.length>0?!1:this._modelsAreIdentical(r,o);return{quitEarly:c.quitEarly,identical:u,changes:c.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return hp(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const s=[];let r;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return V.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,h=a.range?0:1;return l-h});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(r=l),V.isEmpty(o)&&!a)continue;const h=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),h===a)continue;if(Math.max(a.length,h.length)>qf._diffLimit){s.push({range:o,text:a});continue}const c=HEe(h,a,!1),u=n.offsetAt(V.lift(o).getStartPosition());for(const d of c){const f=n.positionAt(u+d.originalStart),g=n.positionAt(u+d.originalStart+d.originalLength),p={text:a.substr(d.modifiedStart,d.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:g.lineNumber,endColumn:g.column}};n.getValueInRange(p.range)!==p.text&&s.push(p)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return hp(this,void 0,void 0,function*(){let t=this._getModel(e);return t?eAe(t):null})}textualSuggest(e,t,n,s){return hp(this,void 0,void 0,function*(){const r=new hc(!0),o=new RegExp(n,s),a=new Set;e:for(let l of e){const h=this._getModel(l);if(h){for(let c of h.words(o))if(!(c===t||!isNaN(Number(c)))&&(a.add(c),a.size>qf._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}})}computeWordRanges(e,t,n,s){return hp(this,void 0,void 0,function*(){let r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let h=r.getLineWords(l,o);for(const c of h){if(!isNaN(Number(c.word)))continue;let u=a[c.word];u||(u=[],a[c.word]=u),u.push({startLineNumber:l,startColumn:c.startColumn,endLineNumber:l,endColumn:c.endColumn})}}return a})}navigateValueSet(e,t,n,s,r){return hp(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),h=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!h)return null;let c=o.getValueInRange(h);return ZR.INSTANCE.navigateValueSet(t,l,h,c,n)})}loadForeignModule(e,t,n){let o={host:c2e(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(V5(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}qf._diffLimit=1e5;qf._suggestionsLimit=1e4;typeof importScripts=="function"&&(ai.monaco=MX());const RJ=kt("textResourceConfigurationService"),OJ=kt("textResourcePropertiesService");function zr(i,e=0){return i[i.length-(1+e)]}function iAe(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function Ul(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function K5(i,e,t){let n=0,s=i.length-1;for(;n<=s;){const r=(n+s)/2|0,o=t(i[r],e);if(o<0)n=r+1;else if(o>0)s=r-1;else return r}return-(n+1)}function PJ(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const s=Math.floor((t+n)/2);e(i[s])?n=s:t=s+1}return t}function YR(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(let a of e){const l=t(a,n);l<0?s.push(a):l>0?r.push(a):o.push(a)}return i<s.length?YR(i,s,t):i<s.length+o.length?o[0]:YR(i-(s.length+o.length),r,t)}function FW(i,e){const t=[];let n;for(const s of i.slice(0).sort(e))!n||e(n[0],s)!==0?(n=[s],t.push(n)):n.push(s);return t}function e2(i){return i.filter(e=>!!e)}function FJ(i){return!Array.isArray(i)||i.length===0}function $l(i){return Array.isArray(i)&&i.length>0}function ND(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function nAe(i,e){const t=sAe(i,e);if(t!==-1)return i[t]}function sAe(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function QR(i,e){return i.length>0?i[0]:e}function Z5(i){return[].concat(...i)}function ds(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function _1(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function cI(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function lC(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function BJ(i){return Array.isArray(i)?i:[i]}function rAe(i,e,t){const n=VJ(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function BW(i,e,t,n){const s=VJ(i,e),r=i.splice(s,t);return rAe(i,s,n),r}function VJ(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class Zb{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}}const _c=kt("logService");var Ca;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Ca||(Ca={}));const WJ=Ca.Info;class oAe extends ne{constructor(){super(...arguments),this.level=WJ,this._onDidChangeLogLevel=this._register(new H)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class aAe extends oAe{constructor(e=WJ){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Ca.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Ca.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Ca.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Ca.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class lAe extends ne{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var hAe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},XR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const VW=60*1e3,WW=5*60*1e3;function Wp(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let JR=class extends ne{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new uAe(this._modelService)),this._logService=n,this._register(mJ.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(s,r)=>Wp(this._modelService,s.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(s.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(ba.register("*",new cAe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,n,s){return this._workerManager.withWorker().then(r=>r.computeDiff(e,t,n,s))}computeMoreMinimalEdits(e,t){if($l(t)){if(!Wp(this._modelService,e))return Promise.resolve(t);const n=hc.create(!0),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([s,a1(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Wp(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,n))}canComputeWordRanges(e){return Wp(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};JR=hAe([uI(0,qs),uI(1,RJ),uI(2,_c)],JR);class cAe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return XR(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const s=[];if(n.wordBasedSuggestionsMode==="currentDocument")Wp(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())Wp(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=zi.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new V(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):V.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),c=yield(yield this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(c)return{duration:c.duration,suggestions:c.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class uAe extends ne{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new oy).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(WW/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>WW&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new zJ(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class dAe extends ne{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let s=new oy;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(VW/2)),this._register(s)}}dispose(){for(let e in this._syncedModels)mt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>VW&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let s=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new ve;r.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(xt(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],mt(t)}}class zW{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class dI{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class zJ extends ne{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new YL(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new nEe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new dI(this)))}catch(e){$R(e),this._worker=new zW(new qf(new dI(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>($R(e),this._worker=new zW(new qf(new dI(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new dAe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return XR(this,void 0,void 0,function*(){return this._disposed?Promise.reject(Q0()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computeDiff(e,t,n,s){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),n,s))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return XR(this,void 0,void 0,function*(){const s=yield this._withSyncedResources(e),r=n.source,o=KA(n);return s.textualSuggest(e.map(a=>a.toString()),t,r,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);let r=zi.getWordDefinition(s.getLanguageId()),o=r.source,a=KA(r);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(s=>{let r=this._modelService.getModel(e);if(!r)return null;let o=zi.getWordDefinition(r.getLanguageId()),a=o.source,l=KA(o);return s.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function fAe(i,e){return new gAe(i,e)}class gAe extends zJ{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?V5(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){const h=Array.prototype.slice.call(arguments,0);return l(a,h)};let o={};for(const a of n)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class Ln{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=Ln.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new Ln(s,e,t)}equals(e){return e instanceof Ln?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=qr.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return qr.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return qr.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return qr.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return qr.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ln.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new Y5(this,e,t,n)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const h=this._tokens[(t<<1)+1];r.push(s.length,h),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const h=this._tokens[(t<<1)+1];r.push(s.length,h),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new Ln(new Uint32Array(r),s,this._languageIdCodec)}}Ln.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;class Y5{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}equals(e){return e instanceof Y5?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Ir{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!Ir._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,r=n+1,o=n-t,a=[];let l=0;for(const h of e)h.endColumn<=s||h.startColumn>=r||(a[l++]=new Ir(Math.max(1,h.startColumn-s+1),Math.min(o+1,h.endColumn-s+1),h.className,h.type));return a}static filter(e,t,n,s){if(e.length===0)return[];let r=[],o=0;for(let a=0,l=e.length;a<l;a++){const h=e[a],c=h.range;if(c.endLineNumber<t||c.startLineNumber>t||c.isEmpty()&&(h.type===0||h.type===3))continue;const u=c.startLineNumber===t?c.startColumn:n,d=c.endLineNumber===t?c.endColumn:s;r[o++]=new Ir(u,d,h.inlineClassName,h.type)}return r}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Ir._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class HW{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class MD{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new HW(t,this.stopOffsets[s],this.classNames.join(" "),MD._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new HW(t,e-1,this.classNames.join(" "),MD._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class pAe{static normalize(e,t){if(t.length===0)return[];let n=[];const s=new MD;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let h=l.startColumn,c=l.endColumn;const u=l.className,d=l.type===1?2:l.type===2?4:0;if(h>1){const p=e.charCodeAt(h-2);kn(p)&&h--}if(c>1){const p=e.charCodeAt(c-2);kn(p)&&c--}const f=h-1,g=c-2;r=s.consumeLowerThan(f,r,n),s.count===0&&(r=f),s.insert(g,u,d)}return s.consumeLowerThan(1073741824,r,n),n}}class bn{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class mAe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class kg{constructor(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p,m,b,_,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=h.sort(Ir.compare),this.tabSize=c,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace=m==="all"?4:m==="boundary"?1:m==="selection"?2:m==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=_,this.selectionsOnLine=w&&w.sort((L,S)=>L.startOffset<S.startOffset?-1:1);const y=Math.abs(g-d),x=Math.abs(f-d);y<x?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Ir.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Q5{constructor(e,t){this.partIndex=e,this.charIndex=t}}class bl{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,s){const r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._absoluteOffsets[e-1]=s+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=bl.getPartIndex(t),s=bl.getCharIndex(t);return new Q5(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let s=(e<<16|n<<0)>>>0,r=0,o=this.length-1;for(;r+1<o;){let p=r+o>>>1,m=this._data[p];if(m===s)return p;m>s?o=p:r=p}if(r===o)return r;let a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;let h=bl.getPartIndex(a),c=bl.getCharIndex(a),u=bl.getPartIndex(l),d;h!==u?d=t:d=bl.getCharIndex(l);let f=n-c,g=d-n;return f<=g?r:o}}class e3{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function t2(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,s=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,n++));e.appendASCIIString("</span>");const r=new bl(1,t+n);return r.setColumnInfo(1,t,0,0),new e3(r,!1,s)}return e.appendASCIIString("<span><span></span></span>"),new e3(new bl(0,0),!1,0)}return DAe(vAe(i),e)}class _Ae{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}}function i2(i){let e=jf(1e4),t=t2(i,e);return new _Ae(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class bAe{constructor(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=h,this.startVisibleColumn=c,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=p}}function vAe(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let s=wAe(i.lineTokens,i.fauxIndentLength,n);(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(s=SAe(i,e,n,s));let r=0;if(i.lineDecorations.length>0){for(let o=0,a=i.lineDecorations.length;o<a;o++){const l=i.lineDecorations[o];l.type===3||l.type===1?r|=1:l.type===2&&(r|=2)}s=xAe(e,n,s,i.lineDecorations)}return i.containsRTL||(s=yAe(e,s,!i.isBasicASCII||i.fontLigatures)),i.renderControlCharacters&&!i.isBasicASCII&&(s=CAe(e,s)),new bAe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,s,r,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function wAe(i,e,t){let n=[],s=0;e>0&&(n[s++]=new bn(e,"",0));for(let r=0,o=i.getCount();r<o;r++){const a=i.getEndOffset(r);if(a<=e)continue;const l=i.getClassName(r);if(a>=t){n[s++]=new bn(t,l,0);break}n[s++]=new bn(a,l,0)}return n}function yAe(i,e,t){let n=0,s=[],r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],h=l.endIndex;if(n+50<h){const c=l.type,u=l.metadata;let d=-1,f=n;for(let g=n;g<h;g++)i.charCodeAt(g)===32&&(d=g),d!==-1&&g-f>=50&&(s[r++]=new bn(d+1,c,u),f=d+1,d=-1);f!==h&&(s[r++]=new bn(h,c,u))}else s[r++]=l;n=h}else for(let o=0,a=e.length;o<a;o++){const l=e[o],h=l.endIndex;let c=h-n;if(c>50){const u=l.type,d=l.metadata,f=Math.ceil(c/50);for(let g=1;g<f;g++){let p=n+g*50;s[r++]=new bn(p,u,d)}s[r++]=new bn(h,u,d)}else s[r++]=l;n=h}return s}function HJ(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function CAe(i,e){let t=[],n=new bn(0,"",0),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=i.charCodeAt(s);HJ(a)&&(s>n.endIndex&&(n=new bn(s,r.type,r.metadata),t.push(n)),n=new bn(s+1,"mtkcontrol",r.metadata),t.push(n))}s>n.endIndex&&(n=new bn(o,r.type,r.metadata),t.push(n))}return t}function SAe(i,e,t,n){const s=i.continuesWithWrappedLine,r=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,h=i.selectionsOnLine,c=i.renderWhitespace===1,u=i.renderWhitespace===3,d=i.renderSpaceWidth!==i.spaceWidth;let f=[],g=0,p=0,m=n[p].type,b=n[p].endIndex;const _=n.length;let w=!1,y=ar(e),x;y===-1?(w=!0,y=t,x=t):x=e_(e);let L=!1,S=0,k=h&&h[S],D=a%o;for(let M=r;M<t;M++){const j=e.charCodeAt(M);k&&M>=k.endOffset&&(S++,k=h&&h[S]);let $;if(M<y||M>x)$=!0;else if(j===9)$=!0;else if(j===32)if(c)if(L)$=!0;else{const ie=M+1<t?e.charCodeAt(M+1):0;$=ie===32||ie===9}else $=!0;else $=!1;if($&&h&&($=!!k&&k.startOffset<=M&&k.endOffset>M),$&&u&&($=w||M>x),L){if(!$||!l&&D>=o){if(d){const ie=g>0?f[g-1].endIndex:r;for(let pe=ie+1;pe<=M;pe++)f[g++]=new bn(pe,"mtkw",1)}else f[g++]=new bn(M,"mtkw",1);D=D%o}}else(M===b||$&&M>r)&&(f[g++]=new bn(M,m,0),D=D%o);for(j===9?D=o:Da(j)?D+=2:D++,L=$;M===b&&(p++,p<_);)m=n[p].type,b=n[p].endIndex}let T=!1;if(L)if(s&&c){let M=t>0?e.charCodeAt(t-1):0,j=t>1?e.charCodeAt(t-2):0;M===32&&j!==32&&j!==9||(T=!0)}else T=!0;if(T)if(d){const M=g>0?f[g-1].endIndex:r;for(let j=M+1;j<=t;j++)f[g++]=new bn(j,"mtkw",1)}else f[g++]=new bn(t,"mtkw",1);else f[g++]=new bn(t,m,0);return f}function xAe(i,e,t,n){n.sort(Ir.compare);const s=pAe.normalize(i,n),r=s.length;let o=0,a=[],l=0,h=0;for(let u=0,d=t.length;u<d;u++){const f=t[u],g=f.endIndex,p=f.type,m=f.metadata;for(;o<r&&s[o].startOffset<g;){const b=s[o];if(b.startOffset>h&&(h=b.startOffset,a[l++]=new bn(h,p,m)),b.endOffset+1<=g)h=b.endOffset+1,a[l++]=new bn(h,p+" "+b.className,m|b.metadata),o++;else{h=g,a[l++]=new bn(h,p+" "+b.className,m|b.metadata);break}}g>h&&(h=g,a[l++]=new bn(h,p,m))}const c=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===c)for(;o<r&&s[o].startOffset===c;){const u=s[o];a[l++]=new bn(h,u.className,u.metadata),o++}return a}function DAe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,r=i.lineContent,o=i.len,a=i.isOverflowing,l=i.parts,h=i.fauxIndentLength,c=i.tabSize,u=i.startVisibleColumn,d=i.containsRTL,f=i.spaceWidth,g=i.renderSpaceCharCode,p=i.renderWhitespace,m=i.renderControlCharacters,b=new bl(o+1,l.length);let _=!1,w=0,y=u,x=0,L=0,S=0,k=0;d?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let D=0,T=l.length;D<T;D++){k+=S;const M=l[D],j=M.endIndex,$=M.type,ie=p!==0&&M.isWhitespace(),pe=ie&&!t&&($==="mtkw"||!s),be=w===j&&M.isPseudoAfter();if(x=0,e.appendASCIIString('<span class="'),e.appendASCIIString(pe?"mtkz":$),e.appendASCII(34),ie){let ye=0;{let Ee=w,we=y;for(;Ee<j;Ee++){const $e=(r.charCodeAt(Ee)===9?c-we%c:1)|0;ye+=$e,Ee>=h&&(we+=$e)}}for(pe&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*ye)),e.appendASCIIString('px"')),e.appendASCII(62);w<j;w++){b.setColumnInfo(w+1,D-L,x,k),L=0;const Ee=r.charCodeAt(w);let we;if(Ee===9){we=c-y%c|0,!n||we>1?e.write1(8594):e.write1(65515);for(let Dt=2;Dt<=we;Dt++)e.write1(160)}else we=1,e.write1(g);x+=we,w>=h&&(y+=we)}S=ye}else{let ye=0;for(e.appendASCII(62);w<j;w++){b.setColumnInfo(w+1,D-L,x,k),L=0;const Ee=r.charCodeAt(w);let we=1,Dt=1;switch(Ee){case 9:we=c-y%c,Dt=we;for(let $e=1;$e<=we;$e++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:m?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Da(Ee)&&Dt++,m&&Ee<32?e.write1(9216+Ee):m&&Ee===127?e.write1(9249):m&&HJ(Ee)?(e.appendASCIIString("[U+"),e.appendASCIIString(kAe(Ee)),e.appendASCIIString("]"),we=8):e.write1(Ee)}x+=we,ye+=we,w>=h&&(y+=Dt)}S=ye}be?L++:L=0,w>=o&&!_&&M.isPseudoAfter()&&(_=!0,b.setColumnInfo(w+1,D,x,k)),e.appendASCIIString("</span>")}return _||b.setColumnInfo(o+1,l.length-1,x,k),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new e3(b,d,s)}function kAe(i){return i.toString(16).toUpperCase().padStart(4,"0")}class UW{constructor(e,t,n,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class LAe{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){const n=this.outputLineIndex>0?t:0;return new K(e+this.outputLineIndex,n+this.outputOffset+1)}}class Yb{constructor(e,t,n,s,r){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=n,this.injectionOffsets=s,this.injectionOptions=r}getInputOffsetOfOutputPosition(e,t){let n=0;if(e===0?n=t:n=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&n>this.injectionOffsets[s];s++)n<this.injectionOffsets[s]+this.injectionOptions[s].content.length?n=this.injectionOffsets[s]:n-=this.injectionOptions[s].content.length;return n}getOutputPositionOfInputOffset(e,t=2){let n=0;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return e+=n,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let n=0,s=this.breakOffsets.length-1,r=0,o=0;for(;n<=s;){r=n+(s-n)/2|0;const a=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>a)n=r+1;else break;else if(e<o)s=r-1;else if(e>=a)n=r+1;else break}return new LAe(r,e-o)}outputPositionToOffsetInUnwrappedLine(e,t){let n=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(n-=this.wrappedTextIndentLength),n}normalizeOffsetAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInUnwrappedLine+n.length?n.offsetInUnwrappedLine+n.length:n.offsetInUnwrappedLine;if(t===1){let o=n.offsetInUnwrappedLine+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let s=n.offsetInUnwrappedLine,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r++;return s}getInjectedText(e,t){const n=this.outputPositionToOffsetInUnwrappedLine(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=n[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInUnwrappedLine:a,length:o};s+=o}}}}class EAe{constructor(e,t){this.tabSize=e,this.data=t}}class X5{constructor(e,t,n,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Rr{constructor(e,t,n,s,r,o,a,l,h,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=Rr.isBasicASCII(n,o),this.containsRTL=Rr.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=h,this.startVisibleColumn=c}static isBasicASCII(e,t){return t?O5(e):!0}static containsRTL(e,t,n){return!t&&n?jL(e):!1}}class Qb{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class AAe{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new Qb(new V(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class UJ{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class $J{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function IAe(i){return Array.isArray(i)}function TAe(i){return!IAe(i)}function jJ(i){return typeof i=="string"}function $W(i){return!jJ(i)}function xp(i){return!i}function fu(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function jW(i){return i.replace(/[&<>'"_]/g,"-")}function NAe(i,e){console.log(`${i.languageId}: ${e}`)}function Ut(i,e){return new Error(`${i.languageId}: ${e}`)}function Yc(i,e,t,n,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,h,c,u,d,f,g,p){return xp(h)?xp(c)?!xp(u)&&u<n.length?fu(i,n[u]):!xp(f)&&i&&typeof i[f]=="string"?i[f]:(o===null&&(o=s.split("."),o.unshift(s)),!xp(d)&&d<o.length?fu(i,o[d]):""):fu(i,t):"$"})}function hC(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function MAe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}const qJ=5;class b1{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new gm(e,t);let n=gm.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let s=this._entries[n];return s||(s=new gm(e,t),this._entries[n]=s,s)}}b1._INSTANCE=new b1(qJ);class gm{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return gm._equals(this,e)}push(e){return b1.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return b1.create(this.parent,e)}}class Xb{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Xb(this.languageId,this.state)}}class Qc{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Jb(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Jb(e,t);let n=gm.getStackElementId(e),s=this._entries[n];return s||(s=new Jb(e,null),this._entries[n]=s,s)}}Qc._INSTANCE=new Qc(qJ);class Jb{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Qc.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof Jb)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class RAe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new zL(e,t,this._languageId)))}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Ri.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize(e,t,o,s);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new x5(this._tokens,e)}}class RD{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let s=e!==null?e.length:0,r=t.length,o=n!==null?n.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return n;if(r===0&&o===0)return e;let a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return n!==null&&a.set(n,s+r),a}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Ri.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize2(e,t,o,s);return this._prependTokens=RD._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new HL(RD._merge(this._prependTokens,this._tokens,null),e)}}class n2{constructor(e,t,n,s){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Ri.onDidChange(o=>{if(r)return;let a=!1;for(let l=0,h=o.changedLanguages.length;l<h;l++){let c=o.changedLanguages[l];if(this._embeddedModes[c]){a=!0;break}}a&&(r=!0,Ri.fire([this._languageId]),r=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Ri.get(t);if(n){if(n instanceof n2){const r=n.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}const s=Ri.getPromise(t);s&&e.push(s)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=b1.create(null,this._lexer.start);return Qc.create(e,null)}tokenize(e,t,n,s){let r=new RAe,o=this._tokenize(e,t,n,s,r);return r.finalize(o)}tokenize2(e,t,n,s){let r=new RD(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,s,r);return r.finalize(o)}_tokenize(e,t,n,s,r){return n.embeddedModeData?this._nestedTokenize(e,t,n,s,r):this._myTokenize(e,t,n,s,r)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=hC(this._lexer,t.stack.state),!n))throw Ut(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of n){if(!$W(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let c=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),c)}let h=e.search(a);h===-1||h!==0&&o.matchOnlyAtLineStart||(s===-1||h<s)&&(s=h)}if(!r)throw Ut(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,n,s,r){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let h=r.nestedModeTokenize(e,t,n.embeddedModeData,s);return Qc.create(n.stack,new Xb(n.embeddedModeData.languageId,h))}let a=e.substring(0,o);a.length>0&&r.nestedModeTokenize(a,!1,n.embeddedModeData,s);let l=e.substring(o);return this._myTokenize(l,t,n,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,s,r){r.enterMode(s,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let h=n.embeddedModeData,c=n.stack,u=0,d=null,f=!0;for(;f||u<l;){const g=u,p=c.depth,m=d?d.groups.length:0,b=c.state;let _=null,w=null,y=null,x=null,L=null;if(d){_=d.matches;const D=d.groups.shift();w=D.matched,y=D.action,x=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&u>=l)break;f=!1;let D=this._lexer.tokenizer[b];if(!D&&(D=hC(this._lexer,b),!D))throw Ut(this._lexer,"tokenizer state is not defined: "+b);let T=a.substr(u);for(const M of D)if((u===0||!M.matchOnlyAtLineStart)&&(_=T.match(M.regex),_)){w=_[0],y=M.action;break}}if(_||(_=[""],w=""),y||(u<l&&(_=[a.charAt(u)],w=_[0]),y=this._lexer.defaultToken),w===null)break;for(u+=w.length;TAe(y)&&$W(y)&&y.test;)y=y.test(w,_,b,u===l);let S=null;if(typeof y=="string"||Array.isArray(y))S=y;else if(y.group)S=y.group;else if(y.token!==null&&y.token!==void 0){if(y.tokenSubst?S=Yc(this._lexer,y.token,w,_,b):S=y.token,y.nextEmbedded)if(y.nextEmbedded==="@pop"){if(!h)throw Ut(this._lexer,"cannot pop embedded mode if not inside one");h=null}else{if(h)throw Ut(this._lexer,"cannot enter embedded mode from within an embedded mode");L=Yc(this._lexer,y.nextEmbedded,w,_,b)}if(y.goBack&&(u=Math.max(0,u-y.goBack)),y.switchTo&&typeof y.switchTo=="string"){let D=Yc(this._lexer,y.switchTo,w,_,b);if(D[0]==="@"&&(D=D.substr(1)),hC(this._lexer,D))c=c.switchTo(D);else throw Ut(this._lexer,"trying to switch to a state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}else{if(y.transform&&typeof y.transform=="function")throw Ut(this._lexer,"action.transform not supported");if(y.next)if(y.next==="@push"){if(c.depth>=this._lexer.maxStack)throw Ut(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(b)}else if(y.next==="@pop"){if(c.depth<=1)throw Ut(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));c=c.pop()}else if(y.next==="@popall")c=c.popall();else{let D=Yc(this._lexer,y.next,w,_,b);if(D[0]==="@"&&(D=D.substr(1)),hC(this._lexer,D))c=c.push(D);else throw Ut(this._lexer,"trying to set a next state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}}y.log&&typeof y.log=="string"&&NAe(this._lexer,this._lexer.languageId+": "+Yc(this._lexer,y.log,w,_,b))}if(S===null)throw Ut(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const k=D=>{let T=this._modeService.getModeIdForLanguageName(D);T&&(D=T);const M=this._getNestedEmbeddedModeData(D);if(u<l){const j=e.substr(u);return this._nestedTokenize(j,t,Qc.create(c,M),s+u,r)}else return Qc.create(c,M)};if(Array.isArray(S)){if(d&&d.groups.length>0)throw Ut(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(_.length!==S.length+1)throw Ut(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let D=0;for(let T=1;T<_.length;T++)D+=_[T].length;if(D!==w.length)throw Ut(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));d={rule:x,matches:_,groups:[]};for(let T=0;T<S.length;T++)d.groups[T]={action:S[T],matched:_[T+1]};u-=w.length;continue}else{if(S==="@rematch"&&(u-=w.length,w="",_=null,S="",L!==null))return k(L);if(w.length===0){if(l===0||p!==c.depth||b!==c.state||(d?d.groups.length:0)!==m)continue;throw Ut(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let D=null;if(jJ(S)&&S.indexOf("@brackets")===0){let T=S.substr(9),M=OAe(this._lexer,w);if(!M)throw Ut(this._lexer,"@brackets token returned but no bracket defined as: "+w);D=jW(M.token+T)}else{let T=S===""?"":S+this._lexer.tokenPostfix;D=jW(T)}g<o&&r.emit(g+s,D)}if(L!==null)return k(L)}return Qc.create(c,h)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Ri.get(t);if(n)return new Xb(t,n.getInitialState())}return new Xb(t||Ou,ZL)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function OAe(i,e){if(!e)return null;e=fu(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function PAe(i,e,t,n){return new n2(i,e,t,n)}var fI;const gI=(fI=window.trustedTypes)===null||fI===void 0?void 0:fI.createPolicy("standaloneColorizer",{createHTML:i=>i});class J5{static colorizeElement(e,t,n,s){s=s||{};let r=s.theme||"vs",o=s.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(r);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;let l=h=>{var c;const u=(c=gI==null?void 0:gI.createHTML(h))!==null&&c!==void 0?c:h;n.innerHTML=u};return this.colorize(t,a||"",o,s).then(l,h=>console.error(h))}static colorize(e,t,n,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),P5(t)&&(t=t.substr(1));let a=ql(t),l=e.getModeId(n);if(!l)return Promise.resolve(qW(a,o,r));e.triggerMode(l);const h=Ri.get(l);if(h)return pI(a,o,h,r);const c=Ri.getPromise(l);return c?new Promise((u,d)=>{c.then(f=>{pI(a,o,f,r).then(u,d)},d)}):new Promise((u,d)=>{let f=null,g=null;const p=()=>{f&&(f.dispose(),f=null),g&&(g.dispose(),g=null);const m=Ri.get(l);if(m){pI(a,o,m,r).then(u,d);return}u(qW(a,o,r))};g=new js,g.cancelAndSet(p,500),f=Ri.onDidChange(m=>{m.changedLanguages.indexOf(l)>=0&&p()})})}static colorizeLine(e,t,n,s,r=4){const o=Rr.isBasicASCII(e,t),a=Rr.containsRTL(e,o,n);return i2(new kg(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let s=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function pI(i,e,t,n){return new Promise((s,r)=>{const o=()=>{const a=FAe(i,e,t,n);if(t instanceof n2){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function qW(i,e,t){let n=[];const r=new Uint32Array(2);r[0]=0,r[1]=16793600;for(let o=0,a=i.length;o<a;o++){let l=i[o];r[0]=l.length;const h=new Ln(r,l,t),c=Rr.isBasicASCII(l,!0),u=Rr.containsRTL(l,c,!0);let d=i2(new kg(!1,!0,l,!1,c,u,0,h,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(d.html),n.push("<br/>")}return n.join("")}function FAe(i,e,t,n){let s=[],r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){let l=i[o],h=t.tokenize2(l,!0,r,0);Ln.convertToEndOffset(h.tokens,l.length);let c=new Ln(h.tokens,l,n);const u=Rr.isBasicASCII(l,!0),d=Rr.containsRTL(l,u,!0);let f=i2(new kg(!1,!0,l,!1,u,d,0,c.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=h.endState}return s.join("")}var v1;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(v1||(v1={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?db(e,l)?i.Error:db(t,l)||db(n,l)?i.Warning:db(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(v1||(v1={}));const Ei=v1;function eF(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===GL.ICodeEditor:!1}const GJ=kt("IWorkspaceEditService");function BAe(i){return Ps(i)&&(!!i.newUri||!!i.oldUri)}function VAe(i){return Ps(i)&&Ke.isUri(i.resource)&&Ps(i.edit)}class tF{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(VAe(t))return new KJ(t.resource,t.edit,t.modelVersionId,t.metadata);if(BAe(t))return new WAe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class KJ extends tF{constructor(e,t,n,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class WAe extends tF{constructor(e,t,n,s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const zAe=Object.prototype.hasOwnProperty;function HAe(i,e){for(let t in i)if(zAe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class UAe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const GW=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new H,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},ZJ=Object.hasOwnProperty;class $Ae{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class jAe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Rh{static readOptions(e){const t=e,n=new jAe;for(const s of Pp){const r=s.name==="_never_"?void 0:t[s.name];n._write(s.id,r)}return n}static validateOptions(e){const t=new zDe;for(const n of Pp)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new $Ae;for(const s of Pp)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Ul(e,t):!1;for(let n in e)if(!Rh._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const r of Pp){const o=!Rh._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=o,o&&(s=!0)}return s?new yX(n):null}}function qAe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const r=i.renderWhitespace;r===!0?i.renderWhitespace="boundary":r===!1&&(i.renderWhitespace="none");const o=i.renderLineHighlight;o===!0?i.renderLineHighlight="line":o===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const l=i.tabCompletion;l===!1?i.tabCompletion="off":l===!0&&(i.tabCompletion="onlySnippets");const h=i.suggest;if(h&&typeof h.filteredTypes=="object"&&h.filteredTypes){const m={};m.method="showMethods",m.function="showFunctions",m.constructor="showConstructors",m.deprecated="showDeprecated",m.field="showFields",m.variable="showVariables",m.class="showClasses",m.struct="showStructs",m.interface="showInterfaces",m.module="showModules",m.property="showProperties",m.event="showEvents",m.operator="showOperators",m.unit="showUnits",m.value="showValues",m.constant="showConstants",m.enum="showEnums",m.enumMember="showEnumMembers",m.keyword="showKeywords",m.text="showWords",m.color="showColors",m.file="showFiles",m.reference="showReferences",m.folder="showFolders",m.typeParameter="showTypeParameters",m.snippet="showSnippets",HAe(m,b=>{const _=h.filteredTypes[b.key];_===!1&&(h[b.value]=_)})}const c=i.hover;c===!0?i.hover={enabled:!0}:c===!1&&(i.hover={enabled:!1});const u=i.parameterHints;u===!0?i.parameterHints={enabled:!0}:u===!1&&(i.parameterHints={enabled:!1});const d=i.autoIndent;d===!0?i.autoIndent="full":d===!1&&(i.autoIndent="advanced");const f=i.matchBrackets;f===!0?i.matchBrackets="always":f===!1&&(i.matchBrackets="never");const{renderIndentGuides:g,highlightActiveIndentGuide:p}=i;i.guides||(i.guides={}),g!==void 0&&(i.guides.indentation=!!g),p!==void 0&&(i.guides.highlightActiveIndentation=!!p)}function KW(i){const e=Kc(i);return qAe(e),e}class OD extends ne{constructor(e,t){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new H),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new CX,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=KW(t),this._readOptions=Rh.readOptions(this._rawOptions),this._validatedOptions=Rh.validateOptions(this._readOptions),this._register(yD.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(GW.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=Rh.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=ff.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:GW.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return Rh.computeOptions(this._validatedOptions,n)}static _subsetEquals(e,t){for(const n in t)if(ZJ.call(t,n)){const s=t[n],r=e[n];if(r===s)continue;if(Array.isArray(r)&&Array.isArray(s)){if(!Ul(r,s))return!1;continue}if(r&&typeof r=="object"&&s&&typeof s=="object"){if(!this._subsetEquals(r,s))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e>"u")return;const t=KW(e);OD._subsetEquals(this._rawOptions,t)||(this._rawOptions=Qa(this._rawOptions,t||{}),this._readOptions=Rh.readOptions(this._rawOptions),this._validatedOptions=Rh.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=OD._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const GAe=Object.freeze({id:"editor",order:5,type:"object",title:v("editorConfigurationTitle","Editor"),scope:5}),KAe=Pn.as(t_.Configuration),PD=Object.assign(Object.assign({},GAe),{properties:{"editor.tabSize":{type:"number",default:is.tabSize,minimum:1,markdownDescription:v("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:is.insertSpaces,markdownDescription:v("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:is.detectIndentation,markdownDescription:v("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:is.trimAutoWhitespace,description:v("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:is.largeFileOptimizations,description:v("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:v("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[v("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),v("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),v("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:v("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[v("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),v("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),v("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:v("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:v("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:v("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:v("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:v("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:v("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:v("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:v("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:v("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:v("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:v("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function ZAe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of Pp){const e=i.schema;if(typeof e<"u")if(ZAe(e))PD.properties[`editor.${i.name}`]=e;else for(let t in e)ZJ.call(e,t)&&(PD.properties[t]=e[t])}let cC=null;function YJ(){return cC===null&&(cC=Object.create(null),Object.keys(PD.properties).forEach(i=>{cC[i]=!0})),cC}function YAe(i){return YJ()[`editor.${i}`]||!1}function QAe(i){return YJ()[`diffEditor.${i}`]||!1}KAe.registerConfiguration(PD);class n0{static insert(e,t){return{range:new V(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class $r{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?MEe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Kc(this.contents),n=Kc(this.overrides),s=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const o of r.overrides){const[a]=n.filter(l=>Ul(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):n.push(Kc(o))}for(const o of r.keys)s.indexOf(o)===-1&&s.push(o)}return new $r(t,s,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const s of ND([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s],o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Kc(r),this.mergeContents(r,o)):r=o),n[s]=r}return new $r(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Ps(e[n])&&Ps(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Kc(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?f2e(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),G5(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&NEe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class XAe extends $r{constructor(){const e=OEe(),t=REe(),n=[];for(const s of Object.keys(e))q5.test(s)&&n.push({identifiers:[AEe(s).trim()],keys:Object.keys(e[s]),contents:EJ(e[s],r=>console.error(`Conflict in default settings file: ${r}`))});super(e,t,n)}}let QJ=class XJ{constructor(e,t,n=new $r,s=new $r,r=new fs,o=new $r,a=new fs,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=s,this._folderConfigurations=r,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new fs,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=new $r,this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),r=e.folders.reduce((o,a)=>(o.set(Ke.revive(a[0]),this.parseConfigurationModel(a[1])),o),new fs);return new XJ(t,n,new $r,s,r,new $r,new fs,!1)}static parseConfigurationModel(e){return new $r(e.contents,e.keys,e.overrides).freeze()}};class JAe{constructor(e,t,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this._previousConfiguration=void 0;const r=new Set;e.keys.forEach(a=>r.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>r.add(l))),this.affectedKeys=[...r.values()];const o=new $r;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=QJ.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const s=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,r=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!ka(s,r)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=EJ({[t]:!0},()=>{}),s;for(;typeof n=="object"&&(s=Object.keys(n)[0]);){if(e=e[s],!e)return!1;n=n[s]}return!0}}const eIe=/^(cursor|delete)/;class tIe extends ne{constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new H),this._currentChord=null,this._currentChordChecker=new oy,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=zp.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new js,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Re.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[s]=n.getDispatchParts();if(s===null)return null;const r=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,o,s)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(v("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchParts();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=zp.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=zp.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getParts();return this._ignoreSingleModifiers=new zp(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,o=null;if(n){const[c]=e.getSingleModifierDispatchParts();r=c,o=c}else[r]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),h=this._getResolver().resolve(a,o,r);return this._logService.trace("KeybindingService#dispatch",l,h==null?void 0:h.commandId),h&&h.enterChord?(s=!0,this._enterChordMode(r,l),s):(this._currentChord&&(!h||!h.commandId)&&(this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),s=!0),this._leaveChordMode(),h&&h.commandId&&(h.bubble||(s=!0),typeof h.commandArgs>"u"?this._commandService.executeCommand(h.commandId).then(void 0,c=>this._notificationService.warn(c)):this._commandService.executeCommand(h.commandId,h.commandArgs).then(void 0,c=>this._notificationService.warn(c)),eIe.test(h.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:h.commandId,from:"keybinding"})),s)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class zp{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}zp.EMPTY=new zp(null);let s2=FDe||"";const Gn=new Map;Gn.set("false",!1);Gn.set("true",!0);Gn.set("isMac",vt);Gn.set("isLinux",Ws);Gn.set("isWindows",qn);Gn.set("isWeb",ny);Gn.set("isMacNative",vt&&!ny);Gn.set("isEdge",s2.indexOf("Edg/")>=0);Gn.set("isFirefox",s2.indexOf("Firefox")>=0);Gn.set("isChrome",s2.indexOf("Chrome")>=0);Gn.set("isSafari",s2.indexOf("Safari")>=0);const iIe=Object.prototype.hasOwnProperty;class Ae{static has(e){return Pu.create(e)}static equals(e,t){return s0.create(e,t)}static regex(e,t){return FD.create(e,t)}static not(e){return Gf.create(e)}static and(...e){return su.create(e,null)}static or(...e){return Xh.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Xh.create(n.map(s=>this._deserializeAndExpression(s,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return su.create(n.map(s=>this._deserializeOne(s,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return r2.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return s0.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return FD.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return iF.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return l2.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return a2.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return c2.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return h2.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Gf.create(e.substr(1).trim()):Pu.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(YX(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),s=e.lastIndexOf("/");if(n===s||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let r=e.slice(n+1,s),o=e[s+1]==="i"?"i":"";try{return new RegExp(r,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function nIe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function pm(i,e){return i.cmp(e)}class Or{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ro.INSTANCE}}Or.INSTANCE=new Or;class ro{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Or.INSTANCE}}ro.INSTANCE=new ro;class Pu{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Gn.get(e);return typeof n=="boolean"?n?ro.INSTANCE:Or.INSTANCE:new Pu(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:eee(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gn.get(this.key);return typeof e=="boolean"?e?ro.INSTANCE:Or.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Gf.create(this.key,this)),this.negated}}class s0{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?Pu.create(e,n):Gf.create(e,n);const s=Gn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?ro.INSTANCE:Or.INSTANCE:new s0(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?ro.INSTANCE:Or.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=r2.create(this.key,this.value,this)),this.negated}}class iF{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new iF(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?iIe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=nF.create(this)),this.negated}}class nF{constructor(e){this._actual=e,this.type=11}static create(e){return new nF(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class r2{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Gf.create(e,n):Pu.create(e,n);const s=Gn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Or.INSTANCE:ro.INSTANCE:new r2(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Gn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Or.INSTANCE:ro.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=s0.create(this.key,this.value,this)),this.negated}}class Gf{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Gn.get(e);return typeof n=="boolean"?n?Or.INSTANCE:ro.INSTANCE:new Gf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:eee(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Gn.get(this.key);return typeof e=="boolean"?e?Or.INSTANCE:ro.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Pu.create(this.key,this)),this.negated}}function o2(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Or.INSTANCE}class a2{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return o2(t,s=>new a2(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=c2.create(this.key,this.value,this)),this.negated}}class l2{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return o2(t,s=>new l2(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=h2.create(this.key,this.value,this)),this.negated}}class h2{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return o2(t,s=>new h2(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=l2.create(this.key,this.value,this)),this.negated}}class c2{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return o2(t,s=>new c2(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:Lg(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=a2.create(this.key,this.value,this)),this.negated}}class FD{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new FD(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=sF.create(this)),this.negated}}class sF{constructor(e){this._actual=e,this.type=8}static create(e){return new sF(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function JJ(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class su{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return su._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=pm(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=JJ(this.expr);return e===this.expr?this:su.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Or.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&s)return ro.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(pm);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){const r=n[n.length-1];if(r.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,l=Xh.create(r.expr.map(h=>su.create([h,o],null)),null,a);l&&(n.push(l),n.sort(pm))}return n.length===1?n[0]:new su(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Xh.create(e,this,!0)}return this.negated}}class Xh{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Xh._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=pm(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=JJ(this.expr);return e===this.expr?this:Xh.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return ro.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Or.INSTANCE;s.sort(pm)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)tee(s[o],s[a])&&(s.splice(a,1),a--);if(s.length===1)return s[0]}return new Xh(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const o of BD(t))for(const a of BD(n))s.push(su.create([o,a],null));const r=e.length===0;e.unshift(Xh.create(s,null,r))}this.negated=e[0]}return this.negated}}class Ie extends Pu{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Ie._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&Ie._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Ie._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return s0.create(this.key,e)}}Ie._info=[];const Xe=kt("contextKeyService"),sIe="setContext";function eee(i,e){return i<e?-1:i>e?1:0}function Lg(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function tee(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const s of e.expr)if(i.equals(s))return!0}const t=i.negate(),n=BD(t).concat(BD(e));n.sort(pm);for(let s=0;s<n.length;s++){const o=n[s].negate();for(let a=s+1;a<n.length;a++){const l=n[a];if(o.equals(l))return!0}}return!1}function BD(i){return i.type===9?i.expr:[i]}class mm{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=mm.combine(e,t);for(let s=0,r=this._keybindings.length;s<r;s++){let o=this._keybindings[s];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,s,r){return!(e.command!==s||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||r&&(!e.when||!nIe(r,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){n.push(s);continue}const r=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let h=e.length-1;h>=0;h--)this._isTargetedForRemoval(e[h],o,a,r,l)&&e.splice(h,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){let r=n[s];if(r.command===t.command)continue;const o=r.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&r.keypressParts[1]!==t.keypressParts[1]||mm.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:tee(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const r=n[s];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let s=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=[];for(let a=0,l=o.length;a<l;a++){let h=o[a];h.keypressParts[1]===n&&s.push(h)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=o}let r=this._findCommand(e,s);return r?t===null&&r.keypressParts.length>1&&r.keypressParts[1]!==null?(this._log(`\\ From ${s.length} keybinding entries, matched chord, when: ${ZW(r.when)}, source: ${YW(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${s.length} keybinding entries, matched ${r.command}, when: ${ZW(r.when)}, source: ${YW(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${s.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let s=t[n];if(mm.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function ZW(i){return i?`${i.serialize()}`:"no when condition"}function YW(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class VD{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ao===1){if(e&&e.win)return e.win}else if(Ao===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=VD.bindToCurrentPlatform(e);if(t&&t.primary){const n=yR(t.primary,Ao);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const r=t.secondary[n],o=yR(r,Ao);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Ft.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&VD._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,s,r,o){Ao===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(oIe)),this._cachedMergedKeybindings.slice(0)}}const ys=new VD,rIe={EditorModes:"platform.keybindingsRegistry"};Pn.add(rIe.EditorModes,ys);function oIe(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}class QW{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?t3(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=t3(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function t3(i){let e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return e;e.push(s)}return e}class rF{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=hIe(a,l,this.modifierLabels[e])}return s.join(" ")}}const oF=new rF({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),aIe=new rF({ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),lIe=new rF({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function hIe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class cIe extends Jke{constructor(e,t){if(super(),t.length===0)throw Bl("parts");this._os=e,this._parts=t}getLabel(){return oF.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return aIe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:lIe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new Xke(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class w1 extends cIe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Zd.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Zd.toString(e.keyCode)}_getElectronAccelerator(e){return Zd.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return w1.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Zd.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=C5[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Uf)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Uf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=t3(e.map(s=>this._resolveSimpleUserBinding(s)));return n.length>0?[new w1(new mD(n),t)]:[]}}const Yn=kt("notificationService");class uIe{}const iee=kt("contextService");class dIe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var XW;(function(i){i.noSelection=v("noSelection","No selection"),i.singleSelectionRange=v("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=v("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=v("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=v("multiSelection","{0} selections"),i.emergencyConfOn=v("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=v("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=v("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=v("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=v("readonlyEditor"," in a read-only code editor"),i.editableEditor=v("editableEditor"," in a code editor"),i.changeConfigToOnMac=v("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=v("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=v("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=v("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=v("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=v("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=v("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=v("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=v("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=v("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=v("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=v("showAccessibilityHelpAction","Show Accessibility Help")})(XW||(XW={}));var JW;(function(i){i.inspectTokensAction=v("inspectTokens","Developer: Inspect Tokens")})(JW||(JW={}));var ez;(function(i){i.gotoLineActionLabel=v("gotoLineActionLabel","Go to Line/Column...")})(ez||(ez={}));var tz;(function(i){i.helpQuickAccessActionLabel=v("helpQuickAccess","Show all Quick Access Providers")})(tz||(tz={}));var iz;(function(i){i.quickCommandActionLabel=v("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=v("quickCommandActionHelp","Show And Run Commands")})(iz||(iz={}));var nz;(function(i){i.quickOutlineActionLabel=v("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=v("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(nz||(nz={}));var WD;(function(i){i.editorViewAccessibleLabel=v("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=v("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(WD||(WD={}));var sz;(function(i){i.toggleHighContrast=v("toggleHighContrast","Toggle High Contrast Theme")})(sz||(sz={}));var i3;(function(i){i.bulkEditServiceSummary=v("bulkEditServiceSummary","Made {0} edits in {1} files")})(i3||(i3={}));var nee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},see=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ree=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class fIe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new H}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function gIe(i,e,t){return eF(i)?e(i):t(i)}let n3=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=gIe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new Lke(new fIe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};n3=nee([see(0,qs)],n3);class u2{show(){return u2.NULL_PROGRESS_RUNNER}showWhile(e,t){return ree(this,void 0,void 0,function*(){yield e})}}u2.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class pIe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,s){return Promise.resolve({choice:0})}}class d2{info(e){return this.notify({severity:Ei.Info,message:e})}warn(e){return this.notify({severity:Ei.Warning,message:e})}error(e){return this.notify({severity:Ei.Error,message:e})}notify(e){switch(e.severity){case Ei.Error:console.error(e.message);break;case Ei.Warning:console.warn(e.message);break;default:console.log(e.message);break}return d2.NO_OP}status(e,t){return ne.None}}d2.NO_OP=new uIe;class mIe{constructor(e){this._onWillExecuteCommand=new H,this._onDidExecuteCommand=new H,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Ft.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}}class oee extends tIe{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(oe(o,Oe.KEY_DOWN,a=>{const l=new pi(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(oe(window,Oe.KEY_UP,a=>{const l=new pi(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,s){const r=yR(t,Ao),o=new ve;return r&&(this._dynamicKeybindings.push({keybinding:r.parts,command:e,when:s,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(xt(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Ft.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ys.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new mm(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new QW(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=w1.resolveUserBinding(a,Ao);for(const h of l)n[s++]=new QW(h,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new Uf(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new w1(t,Ao)}}function rz(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof Ke)}class aee{constructor(){this._onDidChangeConfiguration=new H,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new QJ(new XAe,new $r)}getValue(e,t){const n=typeof e=="string"?e:void 0,s=rz(e)?e:rz(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new JAe({keys:n,overrides:[]},t,this._configuration);s.source=7,s.sourceConfig=null,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}}class _Ie{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new H,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,s)=>t.affectsConfiguration(s)})})}getValue(e,t,n){const r=(K.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof r>"u"?this.configurationService.getValue():this.configurationService.getValue(r)}}let s3=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Ws||vt?`
`:`\r
`}};s3=nee([see(0,Ki)],s3);class bIe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class f2{constructor(){const e=Ke.from({scheme:f2.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new dIe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}f2.SCHEME="inmemory";function zD(i,e,t){if(!e||!(i instanceof aee))return;let n=[];Object.keys(e).forEach(s=>{YAe(s)&&n.push([`editor.${s}`,e[s]]),t&&QAe(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}class vIe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return ree(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof KJ))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(n0.replaceMove(V.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:Lo(i3.bulkEditServiceSummary,s,r)}})}}class wIe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class yIe{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Re.None}get dimension(){return this._dimension||(this._dimension=$L(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}const oz=2e4;let Ad,zS,r3,HS,o3;function CIe(i){Ad=document.createElement("div"),Ad.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Ad.appendChild(n),n};zS=e(),r3=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Ad.appendChild(n),n};HS=t(),o3=t(),i.appendChild(Ad)}function Eg(i){Ad&&(zS.textContent!==i?(jn(r3),UD(zS,i)):(jn(zS),UD(r3,i)))}function HD(i){Ad&&(vt?Eg(i):HS.textContent!==i?(jn(o3),UD(HS,i)):(jn(HS),UD(o3,i)))}function UD(i,e){jn(i),e.length>oz&&(e=e.substr(0,oz)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}const aF=kt("markerDecorationsService");var $D=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class Go extends ne{constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return $D(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class r0 extends ne{constructor(){super(...arguments),this._onBeforeRun=this._register(new H),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new H),this.onDidRun=this._onDidRun.event}run(e,t){return $D(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return $D(this,void 0,void 0,function*(){yield e.run(t)})}}class La extends Go{constructor(e){super(La.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}La.ID="vs.actions.separator";class lF{constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=s,this._actions=n}get actions(){return this._actions}dispose(){}run(){return $D(this,void 0,void 0,function*(){})}}class g2 extends Go{constructor(){super(g2.ID,v("submenu.empty","(empty)"),void 0,!1)}}g2.ID="vs.actions.empty";var Ea;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Ea||(Ea={}));const ci=kt("themeService");var a3;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(a3||(a3={}));function Sr(i){return{id:i}}var fi;(function(i){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color>"u"||a3.isThemeColor(a.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${sr.iconNameExpression}(?:${sr.iconModifierExpression})?)\\)$`);function n(a){const l=t.exec(a);if(!l)return;let[,h]=l;return{id:h}}i.fromString=n;function s(a,l){let h=a.id;const c=h.lastIndexOf("~");return c!==-1&&(h=h.substring(0,c)),l&&(h=`${h}~${l}`),{id:h}}i.modify=s;function r(a,l){var h,c;return a.id===l.id&&((h=a.color)===null||h===void 0?void 0:h.id)===((c=l.color)===null||c===void 0?void 0:c.id)}i.isEqual=r;function o(a,l){return{id:a.id,color:l?Sr(l):void 0}}i.asThemeIcon=o,i.asClassNameArray=sr.asClassNameArray,i.asClassName=sr.asClassName,i.asCSSSelector=sr.asCSSSelector})(fi||(fi={}));function jD(i){switch(i){case Ea.DARK:return"vs-dark";case Ea.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const lee={ThemingContribution:"base.contributions.theming"};class SIe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new H}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),xt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let hee=new SIe;Pn.add(lee.ThemingContribution,hee);function oi(i){return hee.onColorThemeChange(i)}class xIe extends ne{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var DIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},az=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function fb(i){return i.command!==void 0}class Ye{constructor(e){this.id=Ye._idPool++,this._debugName=e}}Ye._idPool=0;Ye.CommandPalette=new Ye("CommandPalette");Ye.EditorContext=new Ye("EditorContext");Ye.SimpleEditorContext=new Ye("SimpleEditorContext");Ye.EditorContextCopy=new Ye("EditorContextCopy");Ye.EditorContextPeek=new Ye("EditorContextPeek");Ye.MenubarEditMenu=new Ye("MenubarEditMenu");Ye.MenubarCopy=new Ye("MenubarCopy");Ye.MenubarGoMenu=new Ye("MenubarGoMenu");Ye.MenubarSelectionMenu=new Ye("MenubarSelectionMenu");Ye.InlineCompletionsActions=new Ye("InlineCompletionsActions");const n_=kt("menuService"),Aa=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new H,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Ye.CommandPalette}}addCommand(i){return this.addCommands(bt.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),xt(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(bt.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new Ar;for(const{id:n,item:s}of i){let r=this._menuItems.get(n);r||(r=new Ar,this._menuItems.set(n,r)),t.push(r.push(s)),e.add(n)}return this._onDidChangeMenu.fire(e),xt(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Ye.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)fb(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class cee extends lF{constructor(e,t,n,s){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=s}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,s]of n)s.length>0&&(e.push(...s),e.push(new La));return e.length&&e.pop(),e}}let Fu=class uee{constructor(e,t,n,s,r){var o,a;if(this._commandService=r,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new uee(t,void 0,n,s,r):void 0,this._options=n,fi.isThemeIcon(e.icon)&&(this.class=sr.asClassName(e.icon))}dispose(){}run(...e){var t,n;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};Fu=DIe([az(3,Xe),az(4,An)],Fu);const s_=kt("telemetryService");class p2{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=Ae.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ys.registerKeybindingRule(s)}}Ft.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Aa.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class hF extends p2{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===n){this._implementations.splice(s,1);return}}}}runCommand(e,t){const n=e.get(_c);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){const r=s.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class dee extends p2{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class ho extends p2{static bindToContribution(e){return class extends ho{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){e(s)&&this._callback(e(s),r)}}}runCommand(e,t){const n=e.get(li),s=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(s)return s.invokeWithinContext(r=>{if(r.get(Xe).contextMatchesRules(Qd(this.precondition)))return this.runEditorCommand(r,s,t)})}}class Si extends ho{constructor(e){super(Si.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(s){return s.menuId||(s.menuId=Ye.EditorContext),s.title||(s.title=e.label),s.when=Ae.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(s_).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class fee extends Si{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,s)=>s[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const s of this._implementations){const r=s[1](e,t,n);if(r)return typeof r=="boolean"?void 0:r}}}function r_(i,e){Ft.registerCommand(i,function(t,...n){const[s,r]=n;$i(Ke.isUri(s)),$i(K.isIPosition(r));const o=t.get(qs).getModel(s);if(o){const a=K.lift(r);return e(o,a,...n.slice(2))}return t.get(Kl).createModelReference(s).then(a=>new Promise((l,h)=>{try{const c=e(a.object.textEditorModel,K.lift(r),n.slice(2));l(c)}catch(c){h(c)}}).finally(()=>{a.dispose()}))})}function Se(i){return Kr.INSTANCE.registerEditorCommand(i),i}function gt(i){const e=new i;return Kr.INSTANCE.registerEditorAction(e),e}function gee(i){return Kr.INSTANCE.registerEditorAction(i),i}function pee(i){Kr.INSTANCE.registerEditorAction(i)}function Ks(i,e){Kr.INSTANCE.registerEditorContribution(i,e)}var _m;(function(i){function e(o){return Kr.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Kr.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Kr.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return Kr.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return Kr.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(_m||(_m={}));const kIe={EditorCommonContributions:"editor.contributions"};class Kr{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Kr.INSTANCE=new Kr;Pn.add(kIe.EditorCommonContributions,Kr.INSTANCE);function cy(i){return i.register(),i}const cF=cy(new hF({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Ye.MenubarEditMenu,group:"1_do",title:v({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Ye.CommandPalette,group:"",title:v("undo","Undo"),order:1}]}));cy(new dee(cF,{id:"default:undo",precondition:void 0}));const uF=cy(new hF({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Ye.MenubarEditMenu,group:"1_do",title:v({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Ye.CommandPalette,group:"",title:v("redo","Redo"),order:1}]}));cy(new dee(uF,{id:"default:redo",precondition:void 0}));const LIe=cy(new hF({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Ye.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Ye.CommandPalette,group:"",title:v("selectAll","Select All"),order:1}]}));var EIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AIe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let y1=class{constructor(e,t){}dispose(){}};y1.ID="editor.contrib.markerDecorations";y1=EIe([AIe(1,aF)],y1);Ks(y1.ID,y1);class IIe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class dF{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily($o?ws.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight="bold",s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(s);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight=this._bareFontInfo.fontWeight,r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",r.style.fontStyle="italic",t.appendChild(r);const o=[];for(const a of this._requests){let l;a.type===0&&(l=n),a.type===2&&(l=s),a.type===1&&(l=r),l.appendChild(document.createElement("br"));const h=document.createElement("span");dF._render(h,a),l.appendChild(h),o.push(h)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function TIe(i,e){new dF(i,e).read()}class mee extends ne{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,s=this.referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this.width!==n||this.height!==s)&&(this.width=n,this.height=s,e&&this.changeCallback())}}class lz{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function NIe(){Kf.INSTANCE.clearCache()}class Kf extends ne{constructor(){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._cache=new lz,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new lz,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=Kf._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new PR({zoomLevel:wR(),pixelRatio:gD(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,s){const r=new IIe(e,t);return n.push(r),s&&s.push(r),r}static _actualReadConfiguration(e){const t=[],n=[],s=this.createRequest("n",0,t,n),r=this.createRequest("",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),h=this.createRequest("2",0,t,n),c=this.createRequest("3",0,t,n),u=this.createRequest("4",0,t,n),d=this.createRequest("5",0,t,n),f=this.createRequest("6",0,t,n),g=this.createRequest("7",0,t,n),p=this.createRequest("8",0,t,n),m=this.createRequest("9",0,t,n),b=this.createRequest("",0,t,n),_=this.createRequest("",0,t,null),w=this.createRequest("",0,t,n),y=this.createRequest(String.fromCharCode(11825),0,t,null),x="|/-_ilm%";for(let M=0,j=x.length;M<j;M++)this.createRequest(x.charAt(M),0,t,n),this.createRequest(x.charAt(M),1,t,n),this.createRequest(x.charAt(M),2,t,n);TIe(e,t);const L=Math.max(a.width,l.width,h.width,c.width,u.width,d.width,f.width,g.width,p.width,m.width);let S=e.fontFeatureSettings===yr.OFF;const k=n[0].width;for(let M=1,j=n.length;S&&M<j;M++){const $=k-n[M].width;if($<-.001||$>.001){S=!1;break}}let D=!0;S&&_.width!==k&&(D=!1),_.width>b.width&&(D=!1);const T=Zke()>2e3;return new PR({zoomLevel:wR(),pixelRatio:gD(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:o.width,middotWidth:w.width,wsmiddotWidth:y.width,maxDigitWidth:L},T)}}Kf.INSTANCE=new Kf;class Kn extends OD{constructor(e,t,n=null,s){super(e,t),this.accessibilityService=s,this._elementSizeObserver=this._register(new mee(n,t.dimension,()=>this._recomputeOptions())),this._register(Kf.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(OX(r=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily($o?ws.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily($o?ws.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!$o&&!Qke&&(e+="no-user-select "),$o&&(e+="no-minimap-shadow "),vt&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Kn._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:df||Vs,pixelRatio:gD(),zoomLevel:wR(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Kf.INSTANCE.readConfiguration(e)}}class _ee{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function St(i){return new _ee(i)}function rn(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var MIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yt;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(Yt||(Yt={}));class Mt extends ne{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(oe(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(oe(document,"touchend",e=>this.onTouchEnd(e))),this._register(oe(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Mt.isTouchDevice()?(Mt.INSTANCE||(Mt.INSTANCE=new Mt),Mt.INSTANCE.targets.push(e),{dispose:()=>{Mt.INSTANCE.targets=Mt.INSTANCE.targets.filter(t=>t!==e)}}):ne.None}static ignoreTarget(e){return Mt.isTouchDevice()?(Mt.INSTANCE||(Mt.INSTANCE=new Mt),Mt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Mt.INSTANCE.ignoreTargets=Mt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):ne.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let o=this.newGestureEvent(Yt.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=e.changedTouches.length;s<r;s++){let o=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<Mt.HOLD_DELAY&&Math.abs(a.initialPageX-zr(a.rollingPageX))<30&&Math.abs(a.initialPageY-zr(a.rollingPageY))<30){let h=this.newGestureEvent(Yt.Tap,a.initialTarget);h.pageX=zr(a.rollingPageX),h.pageY=zr(a.rollingPageY),this.dispatchEvent(h)}else if(l>=Mt.HOLD_DELAY&&Math.abs(a.initialPageX-zr(a.rollingPageX))<30&&Math.abs(a.initialPageY-zr(a.rollingPageY))<30){let h=this.newGestureEvent(Yt.Contextmenu,a.initialTarget);h.pageX=zr(a.rollingPageX),h.pageY=zr(a.rollingPageY),this.dispatchEvent(h)}else if(n===1){let h=zr(a.rollingPageX),c=zr(a.rollingPageY),u=zr(a.rollingTimestamps)-a.rollingTimestamps[0],d=h-a.rollingPageX[0],f=c-a.rollingPageY[0];const g=this.targets.filter(p=>a.initialTarget instanceof Node&&p.contains(a.initialTarget));this.inertia(g,t,Math.abs(d)/u,d>0?1:-1,h,Math.abs(f)/u,f>0?1:-1,c)}this.dispatchEvent(this.newGestureEvent(Yt.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Yt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Mt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Yt.Change||e.type===Yt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,s,r,o,a,l){this.handle=jl(()=>{let h=Date.now(),c=h-t,u=0,d=0,f=!0;n+=Mt.SCROLL_FRICTION*c,o+=Mt.SCROLL_FRICTION*c,n>0&&(f=!1,u=s*n*c),o>0&&(f=!1,d=a*o*c);let g=this.newGestureEvent(Yt.Change);g.translationX=u,g.translationY=d,e.forEach(p=>p.dispatchEvent(g)),f||this.inertia(e,h,n,s,r+u,o,a,l+d)})}onTouchMove(e){let t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let o=this.activeTouches[r.identifier],a=this.newGestureEvent(Yt.Change,o.initialTarget);a.translationX=r.pageX-zr(o.rollingPageX),a.translationY=r.pageY-zr(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Mt.SCROLL_FRICTION=-.005;Mt.HOLD_DELAY=700;Mt.CLEAR_TAP_COUNT_TIME=400;MIe([rn],Mt,"isTouchDevice",null);function o_(i,e){let t=new Jr(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class Ag{constructor(){this._hooks=new ve,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,s,r){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=s,this._onStopCallback=r;const o=SR.getSameOriginWindowChain(),a=Nu?"pointermove":"mousemove",l="mouseup",h=o.map(u=>u.window.document),c=J0(e);c&&h.unshift(c);for(const u of h)this._hooks.add(E5(u,a,d=>{if(d.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(d)},(d,f)=>this._mouseMoveEventMerger(d,f))),this._hooks.add(oe(u,l,d=>this.stopMonitoring(!0)));if(SR.hasDifferentOriginAncestor()){let u=o[o.length-1];this._hooks.add(oe(u.window.document,"mouseout",d=>{new Jr(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(oe(u.window.document,"mouseover",d=>{new Jr(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(oe(u.window.document.body,"mouseleave",d=>{this.stopMonitoring(!0)}))}}}class fF{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new bee(this.x-ec.scrollX,this.y-ec.scrollY)}}class bee{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new fF(this.clientX+ec.scrollX,this.clientY+ec.scrollY)}}class RIe{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s,this._editorPagePositionBrand=void 0}}function vee(i){const e=Un(i);return new RIe(e.left,e.top,e.width,e.height)}class Zf extends Jr{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new fF(this.posx,this.posy),this.editorPos=vee(t)}}class OIe{constructor(e){this._editorViewDomNode=e}_create(e){return new Zf(e,this._editorViewDomNode)}onContextMenu(e,t){return oe(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return oe(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return oe(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return L5(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,s){return E5(e,"mousemove",t,(o,a)=>n(o,this._create(a)),s)}}class PIe{constructor(e){this._editorViewDomNode=e}_create(e){return new Zf(e,this._editorViewDomNode)}onPointerUp(e,t){return oe(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return oe(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return fLe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,s){return E5(e,"pointermove",t,(o,a)=>n(o,this._create(a)),s)}}class FIe extends ne{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new Ag),this._keydownListener=null}startMonitoring(e,t,n,s,r){this._keydownListener=cn(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>n(a,new Zf(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,s,a=>{this._keydownListener.dispose(),r(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class uy extends ne{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){let r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class co extends uy{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Zl{static write(e,t){e instanceof _ee,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],s=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=n[s-o-1];return r}}class BIe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class VIe extends BIe{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class WIe{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class m2{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=new m2(r.left,r.width)}return t}toString(){return`[${this.left},${this.width}]`}}class bm{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class zIe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class HIe{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class mI{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(bm.compare);let t=[],n=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];n[s]=new bm(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,s,r,o,a){const h=e.children.length-1;if(0>h)return null;if(t=Math.min(h,Math.max(0,t)),s=Math.min(h,Math.max(0,s)),t===s&&n===r&&n===0&&!e.children[t].firstChild){const f=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(f,o)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let c=e.children[t].firstChild,u=e.children[s].firstChild;if((!c||!u)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!c||!u)return null;n=Math.min(c.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(c,n,u,r,a);return this._createHorizontalRangesFromClientRects(d,o)}}const UIe=function(){return lm?!0:!(Ws||Vs||$o)}();let vm=!0;class hz{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class cz{constructor(e,t){this.themeType=t;const n=e.options,s=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class kl{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=St(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Ea.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),o=this._options,a=Ir.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let l=null;if(o.themeType===Ea.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const d=n.selections;for(const f of d){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:r.minColumn,p=f.endLineNumber===e?f.endColumn:r.maxColumn;g<p&&(o.themeType===Ea.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new Ir(g,p,"inline-selected-text",0)):(l||(l=[]),l.push(new mAe(g-1,p-1))))}}const h=new kg(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==yr.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(h))return!1;s.appendASCIIString('<div style="top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;height:"),s.appendASCIIString(String(this._options.lineHeight)),s.appendASCIIString('px;" class="'),s.appendASCIIString(kl.CLASS_NAME),s.appendASCIIString('">');const c=t2(h,s);s.appendASCIIString("</div>");let u=null;return vm&&UIe&&r.isBasicASCII&&o.useMonospaceOptimizations&&c.containsForeignElements===0&&r.content.length<300&&h.lineTokens.getCount()<100&&(u=new uC(this._renderedViewLine?this._renderedViewLine.domNode:null,h,c.characterMapping)),u||(u=yee(this._renderedViewLine?this._renderedViewLine.domNode:null,h,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof uC:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof uC?this._renderedViewLine.monospaceAssumptionsAreValid():vm}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof uC&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=t|0,n=n|0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const r=this._renderedViewLine.input.stopRenderingLineAfter|0;let o=!1;r!==-1&&t>r+1&&n>r+1&&(o=!0),r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return a&&a.length>0?new HIe(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}kl.CLASS_NAME="view-line";class uC{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return vm;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),vm=!1),vm}toSlowRenderedLine(){return yee(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,s){const r=this._getCharPosition(t),o=this._getCharPosition(n);return[new bm(r,o-r)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new Q5(r,n),s)}}class wee{constructor(e,t,n,s,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,s);return o===-1?null:[new bm(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,r){if(n===s){const o=this._readPixelOffset(e,t,n,r);return o===-1?null:[new bm(o,0)]}else return this._readRawVisibleRangesForRange(e,n,s,r)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const r=this._getReadingTarget(e);return r.firstChild?r.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[n];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=mI.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s.clientRectDeltaLeft,s.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const r=this._characterMapping.getDomPosition(n),o=mI.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s.clientRectDeltaLeft,s.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),h=Math.round(this.input.spaceWidth*l);if(Math.abs(h-a)<=1)return h}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new bm(0,this.getWidth())];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return mI.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s.clientRectDeltaLeft,s.endNode)}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new Q5(r,n),s)}}class $Ie extends wee{_readVisibleRangesForRange(e,t,n,s,r){const o=super._readVisibleRangesForRange(e,t,n,s,r);if(!o||o.length===0||n===s||n===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const yee=function(){return df?jIe:qIe}();function jIe(i,e,t,n,s){return new $Ie(i,e,t,n,s)}function qIe(i,e,t,n,s){return new wee(i,e,t,n,s)}function dC(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Tn{constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${dC(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${dC(this.oldText)}")`:`(replace@${this.oldPosition} "${dC(this.oldText)}" with "${dC(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;ha(e,s,n),n+=4;for(let r=0;r<s;r++)XLe(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=la(e,t);return t+=4,jR(e,t,n)}writeSize(){return 4+4+Tn._writeStringSize(this.oldText)+Tn._writeStringSize(this.newText)}write(e,t){return ha(e,this.oldPosition,t),t+=4,ha(e,this.newPosition,t),t+=4,t=Tn._writeString(e,this.oldText,t),t=Tn._writeString(e,this.newText,t),t}static read(e,t,n){const s=la(e,t);t+=4;const r=la(e,t);t+=4;const o=Tn._readString(e,t);t+=Tn._writeStringSize(o);const a=Tn._readString(e,t);return t+=Tn._writeStringSize(a),n.push(new Tn(s,o,r,a)),t}}function GIe(i,e){return i===null||i.length===0?e:new pl(i,e).compress()}class pl{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[h,c]=pl._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(h),s=c;continue}if(n.newPosition<s.oldPosition){const[h,c]=pl._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(h),n=c;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[h,c]=pl._splitPrev(n,s.oldLength);a=h,l=s,n=c,s=this._getCurr(++t)}else{const[h,c]=pl._splitCurr(s,n.newLength);a=n,l=h,n=this._getPrev(++e),s=c}this._result[this._resultLen++]=new Tn(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=pl._merge(this._result);return pl._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=pl._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=pl._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Tn(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Tn(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new Tn(e.oldPosition,e.oldText,e.newPosition,n),new Tn(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Tn(e.oldPosition,n,e.newPosition,e.newText),new Tn(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new Tn(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function cp(i){return i.toString()}class fn{constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),s=l3(e);return new fn(n,n,s,s,t,t,[])}append(e,t,n,s,r){t.length>0&&(this.changes=GIe(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(ha(e,t?t.length:0,n),n+=4,t)for(const s of t)ha(e,s.selectionStartLineNumber,n),n+=4,ha(e,s.selectionStartColumn,n),n+=4,ha(e,s.positionLineNumber,n),n+=4,ha(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=la(e,t);t+=4;for(let r=0;r<s;r++){const o=la(e,t);t+=4;const a=la(e,t);t+=4;const l=la(e,t);t+=4;const h=la(e,t);t+=4,n.push(new Ge(o,a,l,h))}return t}serialize(){let e=10+fn._writeSelectionsSize(this.beforeCursorState)+fn._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;ha(t,this.beforeVersionId,n),n+=4,ha(t,this.afterVersionId,n),n+=4,hW(t,this.beforeEOL,n),n+=1,hW(t,this.afterEOL,n),n+=1,n=fn._writeSelections(t,this.beforeCursorState,n),n=fn._writeSelections(t,this.afterCursorState,n),ha(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=la(t,n);n+=4;const r=la(t,n);n+=4;const o=lW(t,n);n+=1;const a=lW(t,n);n+=1;const l=[];n=fn._readSelections(t,n,l);const h=[];n=fn._readSelections(t,n,h);const c=la(t,n);n+=4;const u=[];for(let d=0;d<c;d++)n=Tn.read(t,n,u);return new fn(s,r,o,a,l,h,u)}}class Cee{constructor(e,t){this.model=e,this._data=fn.create(e,t)}get type(){return 0}get resource(){return Ke.isUri(this.model)?this.model:this.model.uri}get label(){return v("edit","Typing")}toString(){return(this._data instanceof fn?this._data:fn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ke.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof fn}append(e,t,n,s,r){this._data instanceof fn&&this._data.append(e,t,n,s,r)}close(){this._data instanceof fn&&(this._data=this._data.serialize())}open(){this._data instanceof fn||(this._data=fn.deserialize(this._data))}undo(){if(Ke.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof fn&&(this._data=this._data.serialize());const e=fn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ke.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof fn&&(this._data=this._data.serialize());const e=fn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof fn&&(this._data=this._data.serialize()),this._data.byteLength+168}}class KIe{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const s=cp(n.resource);this._editStackElementsMap.set(s,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=cp(e);return this._editStackElementsMap.has(t)}setModel(e){const t=cp(Ke.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=cp(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=cp(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=cp(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Ba(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function l3(i){return i.getEOL()===`
`?0:1}function Oh(i){return i?i instanceof Cee||i instanceof KIe:!1}class gF{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Oh(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Oh(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Oh(t)&&t.canAppend(this._model))return t;const n=new Cee(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],l3(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const s=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),o=gF._computeCursorState(n,r),a=r.map((l,h)=>({index:h,textChange:l.textChange}));return a.sort((l,h)=>l.textChange.oldPosition===h.textChange.oldPosition?l.index-h.index:l.textChange.oldPosition-h.textChange.oldPosition),s.append(this._model,a.map(l=>l.textChange),l3(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return nt(n),null}}}class ZIe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function YIe(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let d=i.charCodeAt(r),f=t.charCodeAt(r);if(d!==f)break}let o=0,a=0;for(let d=r;d<e;d++)i.charCodeAt(d)===32?o++:a++;let l=0,h=0;for(let d=r;d<n;d++)t.charCodeAt(d)===32?l++:h++;if(o>0&&a>0||l>0&&h>0)return;let c=Math.abs(a-h),u=Math.abs(o-l);if(c===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%c===0){s.spacesDiff=u/c;return}}function uz(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],h=8;let c=[0,0,0,0,0,0,0,0,0],u=new ZIe;for(let g=1;g<=n;g++){let p=i.getLineLength(g),m=i.getLineContent(g);const b=p<=65536;let _=!1,w=0,y=0,x=0;for(let S=0,k=p;S<k;S++){let D=b?m.charCodeAt(S):i.getLineCharCode(g,S);if(D===9)x++;else if(D===32)y++;else{_=!0,w=S;break}}if(!_||(x>0?s++:y>1&&r++,YIe(o,a,m,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;let L=u.spacesDiff;L<=h&&c[L]++,o=m,a=w}let d=t;s!==r&&(d=s<r);let f=e;if(d){let g=d?0:.1*n;l.forEach(p=>{let m=c[p];m>g&&(g=m,f=p)}),f===4&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function As(i){return(i.metadata&1)>>>0}function Ht(i,e){i.metadata=i.metadata&254|e<<0}function Mn(i){return(i.metadata&2)>>>1===1}function Vt(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function See(i){return(i.metadata&4)>>>2===1}function dz(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function QIe(i){return(i.metadata&24)>>>3}function fz(i,e){i.metadata=i.metadata&231|e<<3}function XIe(i){return(i.metadata&32)>>>5===1}function gz(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class xee{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ht(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,dz(this,!1),fz(this,1),gz(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Vt(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;let t=this.options.className;dz(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),fz(this,this.options.stickiness),gz(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const et=new xee(null,0,0);et.parent=et;et.left=et;et.right=et;Ht(et,0);class _I{constructor(){this.root=et,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r){return this.root===et?[]:oTe(this,e,t,n,s,r)}search(e,t,n){return this.root===et?[]:rTe(this,e,t,n)}collectNodesFromOwner(e){return nTe(this,e)}collectNodesPostOrder(){return sTe(this)}insert(e){pz(this,e),this._normalizeDeltaIfNecessary()}delete(e){mz(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=tTe(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];mz(this,l)}this._normalizeDeltaIfNecessary(),iTe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,eTe(l,e,e+t,n,s),l.maxEnd=l.end,pz(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,JIe(this))}}function JIe(i){let e=i.root,t=0;for(;e!==et;){if(e.left!==et&&!Mn(e.left)){e=e.left;continue}if(e.right!==et&&!Mn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Bu(e),Vt(e,!0),Vt(e.left,!1),Vt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Vt(i.root,!1)}function up(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function eTe(i,e,t,n,s){const r=QIe(i),o=r===0||r===2,a=r===1||r===2,l=t-e,h=n,c=Math.min(l,h),u=i.start;let d=!1;const f=i.end;let g=!1;e<=u&&f<=t&&XIe(i)&&(i.start=e,d=!0,i.end=e,g=!0);{const m=s?1:l>0?2:0;!d&&up(u,o,e,m)&&(d=!0),!g&&up(f,a,e,m)&&(g=!0)}if(c>0&&!s){const m=l>h?2:0;!d&&up(u,o,e+c,m)&&(d=!0),!g&&up(f,a,e+c,m)&&(g=!0)}{const m=s?1:0;!d&&up(u,o,t,m)&&(i.start=e+h,d=!0),!g&&up(f,a,t,m)&&(i.end=e+h,g=!0)}const p=h-l;d||(i.start=Math.max(0,u+p)),g||(i.end=Math.max(0,f+p)),i.start>i.end&&(i.end=i.start)}function tTe(i,e,t){let n=i.root,s=0,r=0,o=0,a=0,l=[],h=0;for(;n!==et;){if(Mn(n)){Vt(n.left,!1),Vt(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!Mn(n.left)){if(r=s+n.maxEnd,r<e){Vt(n,!0);continue}if(n.left!==et){n=n.left;continue}}if(o=s+n.start,o>t){Vt(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[h++]=n),Vt(n,!0),n.right!==et&&!Mn(n.right)){s+=n.delta,n=n.right;continue}}return Vt(i.root,!1),l}function iTe(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==et;){if(Mn(s)){Vt(s.left,!1),Vt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Bu(s),s=s.parent;continue}if(!Mn(s.left)){if(o=r+s.maxEnd,o<e){Vt(s,!0);continue}if(s.left!==et){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(i.requestNormalizeDelta=!0),Vt(s,!0);continue}if(Vt(s,!0),s.right!==et&&!Mn(s.right)){r+=s.delta,s=s.right;continue}}Vt(i.root,!1)}function nTe(i,e){let t=i.root,n=[],s=0;for(;t!==et;){if(Mn(t)){Vt(t.left,!1),Vt(t.right,!1),t=t.parent;continue}if(t.left!==et&&!Mn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),Vt(t,!0),t.right!==et&&!Mn(t.right)){t=t.right;continue}}return Vt(i.root,!1),n}function sTe(i){let e=i.root,t=[],n=0;for(;e!==et;){if(Mn(e)){Vt(e.left,!1),Vt(e.right,!1),e=e.parent;continue}if(e.left!==et&&!Mn(e.left)){e=e.left;continue}if(e.right!==et&&!Mn(e.right)){e=e.right;continue}t[n++]=e,Vt(e,!0)}return Vt(i.root,!1),t}function rTe(i,e,t,n){let s=i.root,r=0,o=0,a=0,l=[],h=0;for(;s!==et;){if(Mn(s)){Vt(s.left,!1),Vt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==et&&!Mn(s.left)){s=s.left;continue}o=r+s.start,a=r+s.end,s.setCachedOffsets(o,a,n);let c=!0;if(e&&s.ownerId&&s.ownerId!==e&&(c=!1),t&&See(s)&&(c=!1),c&&(l[h++]=s),Vt(s,!0),s.right!==et&&!Mn(s.right)){r+=s.delta,s=s.right;continue}}return Vt(i.root,!1),l}function oTe(i,e,t,n,s,r){let o=i.root,a=0,l=0,h=0,c=0,u=[],d=0;for(;o!==et;){if(Mn(o)){Vt(o.left,!1),Vt(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!Mn(o.left)){if(l=a+o.maxEnd,l<e){Vt(o,!0);continue}if(o.left!==et){o=o.left;continue}}if(h=a+o.start,h>t){Vt(o,!0);continue}if(c=a+o.end,c>=e){o.setCachedOffsets(h,c,r);let f=!0;n&&o.ownerId&&o.ownerId!==n&&(f=!1),s&&See(o)&&(f=!1),f&&(u[d++]=o)}if(Vt(o,!0),o.right!==et&&!Mn(o.right)){a+=o.delta,o=o.right;continue}}return Vt(i.root,!1),u}function pz(i,e){if(i.root===et)return e.parent=et,e.left=et,e.right=et,Ht(e,0),i.root=e,i.root;aTe(i,e),Vc(e.parent);let t=e;for(;t!==i.root&&As(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;As(n)===1?(Ht(t.parent,0),Ht(n,0),Ht(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,ev(i,t)),Ht(t.parent,0),Ht(t.parent.parent,1),tv(i,t.parent.parent))}else{const n=t.parent.parent.left;As(n)===1?(Ht(t.parent,0),Ht(n,0),Ht(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,tv(i,t)),Ht(t.parent,0),Ht(t.parent.parent,1),ev(i,t.parent.parent))}return Ht(i.root,0),e}function aTe(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(hTe(s,r,n.start+t,n.end+t)<0)if(n.left===et){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===et){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=et,e.right=et,Ht(e,1)}function mz(i,e){let t,n;if(e.left===et?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===et?(t=e.left,n=e):(n=lTe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Ht(t,0),e.detach(),bI(),Bu(t),i.root.parent=et;return}let s=As(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ht(n,As(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==et&&(n.left.parent=n),n.right!==et&&(n.right.parent=n)),e.detach(),s){Vc(t.parent),n!==e&&(Vc(n),Vc(n.parent)),bI();return}Vc(t),Vc(t.parent),n!==e&&(Vc(n),Vc(n.parent));let r;for(;t!==i.root&&As(t)===0;)t===t.parent.left?(r=t.parent.right,As(r)===1&&(Ht(r,0),Ht(t.parent,1),ev(i,t.parent),r=t.parent.right),As(r.left)===0&&As(r.right)===0?(Ht(r,1),t=t.parent):(As(r.right)===0&&(Ht(r.left,0),Ht(r,1),tv(i,r),r=t.parent.right),Ht(r,As(t.parent)),Ht(t.parent,0),Ht(r.right,0),ev(i,t.parent),t=i.root)):(r=t.parent.left,As(r)===1&&(Ht(r,0),Ht(t.parent,1),tv(i,t.parent),r=t.parent.left),As(r.left)===0&&As(r.right)===0?(Ht(r,1),t=t.parent):(As(r.left)===0&&(Ht(r.right,0),Ht(r,1),ev(i,r),r=t.parent.left),Ht(r,As(t.parent)),Ht(t.parent,0),Ht(r.left,0),tv(i,t.parent),t=i.root));Ht(t,0),bI()}function lTe(i){for(;i.left!==et;)i=i.left;return i}function bI(){et.parent=et,et.delta=0,et.start=0,et.end=0}function ev(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==et&&(t.left.parent=e),t.parent=e.parent,e.parent===et?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Bu(e),Bu(t)}function tv(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==et&&(t.right.parent=e),t.parent=e.parent,e.parent===et?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Bu(e),Bu(t)}function Dee(i){let e=i.end;if(i.left!==et){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==et){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Bu(i){i.maxEnd=Dee(i)}function Vc(i){for(;i!==et;){const e=Dee(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function hTe(i,e,t,n){return i===t?e-n:i-t}class h3{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==He)return pF(this.right);let e=this;for(;e.parent!==He&&e.parent.left!==e;)e=e.parent;return e.parent===He?He:e.parent}prev(){if(this.left!==He)return kee(this.left);let e=this;for(;e.parent!==He&&e.parent.right!==e;)e=e.parent;return e.parent===He?He:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const He=new h3(null,0);He.parent=He;He.left=He;He.right=He;He.color=0;function pF(i){for(;i.left!==He;)i=i.left;return i}function kee(i){for(;i.right!==He;)i=i.right;return i}function mF(i){return i===He?0:i.size_left+i.piece.length+mF(i.right)}function _F(i){return i===He?0:i.lf_left+i.piece.lineFeedCnt+_F(i.right)}function vI(){He.parent=He}function iv(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==He&&(t.left.parent=e),t.parent=e.parent,e.parent===He?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function nv(i,e){let t=e.left;e.left=t.right,t.right!==He&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===He?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function fC(i,e){let t,n;if(e.left===He?(n=e,t=n.right):e.right===He?(n=e,t=n.left):(n=pF(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),vI(),i.root.parent=He;return}let s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,gb(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,gb(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==He&&(n.left.parent=n),n.right!==He&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,gb(i,n)),e.detach(),t.parent.left===t){let o=mF(t),a=_F(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,h=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Dh(i,t.parent,l,h)}}if(gb(i,t.parent),s){vI();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,iv(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,nv(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,iv(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,nv(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,iv(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,nv(i,t.parent),t=i.root));t.color=0,vI()}function _z(i,e){for(gb(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,iv(i,e)),e.parent.color=0,e.parent.parent.color=1,nv(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,nv(i,e)),e.parent.color=0,e.parent.parent.color=1,iv(i,e.parent.parent))}i.root.color=0}function Dh(i,e,t,n){for(;e!==i.root&&e!==He;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function gb(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=mF(e.left)-e.size_left,n=_F(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}class cTe extends i_{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function uTe(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const o0=uTe(i=>new cTe(i)),dTe=999;class Dd{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=fTe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=XX(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new gTe(t,this.wordSeparators?o0(this.wordSeparators):null,n?this.searchString:null)}}function fTe(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===110||s===114||s===87)return!0}return!1}class gTe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function Id(i,e,t){if(!t)return new d1(i,null);let n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new d1(i,n)}class bz{constructor(e){let t=[],n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class gC{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new pb(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let h;if(s){let f=s.findLineFeedCountBeforeOffset(r+o.length)-l;h=a+o.length+f}else h=a+o.length;const c=e.getPositionAt(a),u=e.getPositionAt(h);return new V(c.lineNumber,c.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new bz(a):null,h=[];let c=0,u;for(n.reset(0);u=n.next(a);)if(h[c++]=Id(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),c>=r)return h;return h}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const h=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,h,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let h=t.startLineNumber+1;h<t.endLineNumber&&a<r;h++)a=this._findMatchesInLine(n,e.getLineContent(h),h,0,a,o,s,r);if(a<r){const h=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,h,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const h=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=t.length;let p=-f;for(;(p=t.indexOf(d,p+f))!==-1;)if((!h||bF(h,t,g,p,f))&&(o[r++]=new d1(new V(n,p+1+s,n,p+1+f+s),null),r>=l))return r;return r}const c=new pb(e.wordSeparators,e.regex);let u;c.reset(0);do if(u=c.next(t),u&&(o[r++]=Id(new V(n,u.index+1+s,n,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new pb(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new K(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new V(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),h=e.getEOL()===`\r
`?new bz(l):null;n.reset(t.column-1);let c=n.next(l);return c?Id(this._getMultilineMatchRange(e,o,l,h,c.index,c[0]),c,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new K(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let h=1;h<=r;h++){const c=(o+h-1)%r,u=e.getLineContent(c+1),d=this._findFirstMatchInLine(n,u,c+1,1,s);if(d)return d}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?Id(new V(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new pb(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new V(1,1,t.lineNumber,t.column),n,s,10*dTe);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new K(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let h=1;h<=r;h++){const c=(r+o-h-1)%r,u=e.getLineContent(c+1),d=this._findLastMatchInLine(n,u,c+1,s);if(d)return d}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=Id(new V(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function pTe(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function mTe(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==0)return!0}return!1}function bF(i,e,t,n,s){return pTe(i,e,t,n,s)&&mTe(i,e,t,n,s)}class pb{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){Mh(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||bF(this._wordSeparators,e,t,s,r))return n}while(n);return null}}const mh=65535;function Lee(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class _Te{constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function kh(i,e=!0){let t=[0],n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===13?s+1<r&&i.charCodeAt(s+1)===10?(t[n++]=s+2,s++):t[n++]=s+1:o===10&&(t[n++]=s+1)}return e?Lee(t):t}function bTe(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,h=e.length;l<h;l++){const c=e.charCodeAt(l);c===13?l+1<h&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):c===10?(s++,i[t++]=l+1):o&&c!==9&&(c<32||c>126)&&(o=!1)}const a=new _Te(Lee(i),n,s,r,o);return i.length=0,a}class Xs{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class Td{constructor(e,t){this.buffer=e,this.lineStarts=t}}class vTe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==He&&e.iterate(e.root,n=>(n!==He&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class wTe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let s=0;s<n.length;s++){let r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){let s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class yTe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Td("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=He,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=kh(e[r].buffer));let a=new Xs(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new wTe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=mh,n=t-Math.floor(t/3),s=n*2,r="",o=0,a=[];if(this.iterate(this.root,l=>{let h=this.getNodeContent(l),c=h.length;if(o<=n||o+c<s)return r+=h,o+=c,!0;let u=r.replace(/\r\n|\r|\n/g,e);return a.push(new Td(u,kh(u))),r=h,o=c,!0}),o>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new Td(l,kh(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new vTe(this,e)}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==He;)if(s.left!==He&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;let r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,s=e;for(;t!==He;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let o=this.getOffsetAt(n+1,1),a=s-o;return new K(n+1,a+1)}return new K(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===He){let r=this.getOffsetAt(n+1,1),o=s-e-r;return new K(n+1,o+1)}else t=t.right;return new K(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,h=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(h+e.remainder,h+t.remainder)}let n=e.node,s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==He;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===He)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,h=this._buffers[o.bufferIndex].lineStarts,c=o.start.line,u=o.end.line;let d=h[c]+o.start.column;if(s&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(c===u)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(s=!0,n+=l.substr(d,a-1)):n+=l.substr(d,a),!0;n+=this._EOLNormalized?l.substring(d,Math.max(d,h[c+1]-this._EOLLength)):l.substring(d,h[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=c+1;f<u;f++)n=this._EOLNormalized?l.substring(h[f],h[f+1]-this._EOLLength):l.substring(h[f],h[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(h[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:n=l.substr(h[u],o.end.column-1)):n=l.substr(h[u],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{let t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,s,r,o,a,l,h,c,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o),m,b={line:0,column:0},_,w;t._wordSeparators?(_=d.buffer.substring(g,p),w=y=>y+g,t.reset(0)):(_=d.buffer,w=y=>y,t.reset(g));do if(m=t.next(_),m){if(w(m.index)>=p)return c;this.positionInBuffer(e,w(m.index)-f,b);let y=this.getLineFeedCnt(e.piece.bufferIndex,r,b),x=b.line===r.line?b.column-r.column+s:b.column+1,L=x+m[0].length;if(u[c++]=Id(new V(n+y,x,n+y,L),m,l),w(m.index)+m[0].length>=p||c>=h)return c}while(m);return c}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new pb(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let h=this.nodeAt2(e.endLineNumber,e.endColumn);if(h===null)return[];let c=this.positionInBuffer(l.node,l.remainder),u=this.positionInBuffer(h.node,h.remainder);if(l.node===h.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,c,u,t,n,s,o,r),r;let d=e.startLineNumber,f=l.node;for(;f!==h.node;){let p=this.getLineFeedCnt(f.piece.bufferIndex,c,f.piece.end);if(p>=1){let b=this._buffers[f.piece.bufferIndex].lineStarts,_=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=b[c.line+p],y=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,d,y,c,this.positionInBuffer(f,w-_),t,n,s,o,r),o>=s)return r;d+=p}let m=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const b=this.getLineContent(d).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,b,e.endLineNumber,m,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(m),d,m,o,r,n,s),o>=s)return r;d++,l=this.nodeAt2(d,1),f=l.node,c=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){let p=d===e.startLineNumber?e.startColumn-1:0;const m=this.getLineContent(d).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,m,e.endLineNumber,p,o,r,n,s),r}let g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(h.node,a,d,g,c,u,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,h){const c=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=n.length;let p=-f;for(;(p=n.indexOf(d,p+f))!==-1;)if((!c||bF(c,n,g,p,f))&&(a[o++]=new d1(new V(s,p+1+r,s,p+1+f+r),null),o>=h))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=Id(new V(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=h))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==He){let{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,h=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<mh){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){let c=[],u=new Xs(a.bufferIndex,h,a.end,this.getLineFeedCnt(a.bufferIndex,h,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,h));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){let p={line:u.start.line+1,column:0};u=new Xs(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){let p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&c.push(s)}else this.deleteNodeTail(s,h);else this.deleteNodeTail(s,h);let d=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<d.length;g++)f=this.rbInsertRight(f,d[g]);this.deleteNodes(c)}else this.insertContentToNodeRight(t,s)}else{let s=this.createNewPieces(t),r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===He)return;let n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){let d=this.positionInBuffer(r,n.remainder),f=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let g=r.next();fC(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,d),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,d,f),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let h=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,h),o.piece.length===0&&a.push(o);let c=r.next();for(let d=c;d!==He&&d!==o;d=d.next())a.push(d);let u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new Xs(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Dh(this,t,-1,-1),t.piece.length===0&&n.push(t)}let s=this.createNewPieces(e),r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]),r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){let s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t,h=s.start.line,c=s.end.line,u=0,d=0,f=0;for(;h<=c&&(u=h+(c-h)/2|0,f=o[u],u!==c);)if(d=o[u+1],l<f)c=u-1;else if(l>=d)h=u+1;else break;return n?(n.line=u,n.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;let r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)fC(this,e[t])}createNewPieces(e){if(e.length>mh){let c=[];for(;e.length>mh;){const d=e.charCodeAt(mh-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,mh-1),e=e.substring(mh-1)):(f=e.substring(0,mh),e=e.substring(mh));let g=kh(f);c.push(new Xs(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new Td(f,g))}let u=kh(e);return c.push(new Xs(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Td(e,u)),c}let t=this._buffers[0].buffer.length;const n=kh(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let c=0;c<n.length;c++)n[c]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let c=0;c<n.length;c++)n[c]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},h=new Xs(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[h]}getLineRawContent(e,t=0){let n=this.root,s="",r=this._searchCache.get2(e);if(r){n=r.node;let o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{let h=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+h-t)}}else{let o=0;const a=e;for(;n!==He;)if(n.left!==He&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),h=this.getAccumulatedValue(n,e-n.lf_left-1),c=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),c.substring(u+l,u+h-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),h=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=h.substring(c+l,c+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==He;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==He;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),h=l-s,c=a-r,u=n.length+c;e.piece=new Xs(n.bufferIndex,n.start,o,l,u),Dh(this,e,c,h)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),h=a-s,c=r-l,u=n.length+c;e.piece=new Xs(n.bufferIndex,o,n.end,a,u),Dh(this,e,c,h)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,h=t,c=this.getLineFeedCnt(s.bufferIndex,s.start,h),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Xs(s.bufferIndex,s.start,h,c,u),Dh(this,e,u-a,c-l);let d=new Xs(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=kh(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(n){let f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},h=e.piece.length+t.length,c=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),d=u-c;e.piece=new Xs(e.piece.bufferIndex,e.piece.start,l,u,h),this._lastChangeBufferPos=l,Dh(this,e,t.length,d)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==He;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==He;)if(n.left!==He&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==He;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===He||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===He||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],s=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Xs(e.piece.bufferIndex,e.piece.start,r,a,o),Dh(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const h=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Xs(t.piece.bufferIndex,l,t.piece.end,c,h),Dh(this,t,-1,-1),t.piece.length===0&&n.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let d=0;d<n.length;d++)fC(this,n[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)fC(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new Xs(s.bufferIndex,r,s.end,a,o),Dh(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===He)return t(He);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===He)return"";let t=this._buffers[e.piece.bufferIndex],n,s=e.piece,r=this.offsetInBuffer(s.bufferIndex,s.start),o=this.offsetInBuffer(s.bufferIndex,s.end);return n=t.buffer.substring(r,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){let n=new h3(t,1);if(n.left=He,n.right=He,n.parent=He,n.size_left=0,n.lf_left=0,this.root===He)this.root=n,n.color=0;else if(e.right===He)e.right=n,n.parent=e;else{let r=pF(e.right);r.left=n,n.parent=r}return _z(this,n),n}rbInsertLeft(e,t){let n=new h3(t,1);if(n.left=He,n.right=He,n.parent=He,n.size_left=0,n.lf_left=0,this.root===He)this.root=n,n.color=0;else if(e.left===He)e.left=n,n.parent=e;else{let s=kee(e.left);s.right=n,n.parent=s}return _z(this,n),n}}function a0(i){let e=0,t=0,n=0,s=0;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===10?(s|=2,r++):s|=3,n=r+1):a===10&&(s|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}function vz(i){return(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0}const _h=new Uint32Array(0).buffer;class wI{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new CTe(e,[t]))}}class qD{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new V(0,t+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const s=t+Math.floor((n-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)n=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new wz(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new wz(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,h=0;for(let c=0;c<o;c++){const u=4*c,d=r[u],f=r[u+1],g=r[u+2],p=r[u+3];if((d>e||d===e&&g>=t)&&(d<n||d===n&&f<=s))l=!0;else{if(a===0&&(h=d),l){const m=4*a;r[m]=d-h,r[m+1]=f,r[m+2]=g,r[m+3]=p}a++}}return this._tokenCount=a,h}split(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=[],l=[],h=a,c=0,u=0;for(let d=0;d<o;d++){const f=4*d,g=r[f],p=r[f+1],m=r[f+2],b=r[f+3];if(g>e||g===e&&m>=t){if(g<n||g===n&&p<=s)continue;h!==l&&(h=l,c=0,u=g)}h[c++]=g-u,h[c++]=p,h[c++]=m,h[c++]=b}return[new qD(new Uint32Array(a)),new qD(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let h=0,c=!1;for(let u=0;u<a;u++){const d=4*u;let f=o[d],g=o[d+1],p=o[d+2];const m=o[d+3];if(f<t||f===t&&p<=n){h++;continue}else if(f===t&&g<n)f===s&&p>r?p-=r-n:p=n;else if(f===t&&g===n)if(f===s&&p>r)p-=r-n;else{c=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&p>r)f===t?(g=n,p=g+(p-r)):(g=0,p=g+(p-r));else{c=!0;continue}else if(f>s){if(l===0&&!c){h=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,p+=e),f-=l,g-=r-n,p-=r-n;else throw new Error("Not possible!");const b=4*h;o[b]=f,o[b+1]=g,o[b+2]=p,o[b+3]=m,h++}this._tokenCount=h}acceptInsertText(e,t,n,s,r,o){const a=n===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,h=this._tokenCount;for(let c=0;c<h;c++){const u=4*c;let d=l[u],f=l[u+1],g=l[u+2];if(!(d<e||d===e&&g<t)){if(d===e&&g===t)if(a)g+=1;else continue;else if(d===e&&f<t&&t<g)n===0?g+=s:g=t;else{if(d===e&&f===t&&a)continue;if(d===e)if(d+=n,n===0)f+=s,g+=s;else{const p=g-f;f=r+(f-t),g=f+p}else d+=n}l[u]=d,l[u+1]=f,l[u+2]=g}}}}class wz{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class GD{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new V(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[s,r,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new GD(this.startLineNumber,s),new GD(this.startLineNumber+o,r)]}applyEdit(e,t){const[n,s,r]=a0(t);this.acceptEdit(e,n,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new K(e.startLineNumber,e.startColumn),t,n,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const r=n-t;this.startLineNumber-=r;return}const s=this.tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&n>=s+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const r=-t;this.startLineNumber-=r,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,s,r){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,s,r)}}class CTe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function bh(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class vF{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,h]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}h.isEmpty()||(this._pieces.splice(r,1,l,h),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=_1(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const s=vF._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0,h=[],c=0,u=0;const d=(f,g)=>{f!==u&&(u=f,h[c++]=f,h[c++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),m=r.getMetadata(f),b=((m&1?2048:0)|(m&2?4096:0)|(m&4?8192:0)|(m&8?8372224:0)|(m&16?4286578688:0))>>>0,_=~b>>>0;for(;l<o&&t.getEndOffset(l)<=g;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&d(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)d(t.getEndOffset(l),t.getMetadata(l)&_|m&b),l++;if(l<o)d(p,t.getMetadata(l)&_|m&b),t.getEndOffset(l)===p&&l++;else{const w=Math.min(Math.max(0,l-1),o-1);d(p,t.getMetadata(w)&_|m&b)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new Ln(new Uint32Array(h),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}class Hr{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==_h)return new Ln(bh(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=vz(this._languageIdCodec.encodeLanguageId(e)),new Ln(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?bh(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=qr.getLanguageId(s[1])!==e),!r)return _h}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=vz(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=_1(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=Hr._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!Hr._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=bh(e),s=bh(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new K(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Hr._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Hr._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=Hr._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Hr._append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Hr._insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=Hr._deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Hr._insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===_h?e:Hr._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===_h)return e;const n=bh(e),s=n[n.length-2];return Hr._delete(e,t,s)}static _delete(e,t,n){if(e===null||e===_h||t===n)return e;const s=bh(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return _h;const o=Ln.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const f=n-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let h,c;a!==t?(s[o<<1]=t,h=o+1<<1,c=t):(h=o<<1,c=a);const u=n-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>c&&(s[h++]=g,s[h++]=s[(f<<1)+1],c=g)}if(h===s.length)return e;let d=new Uint32Array(h);return d.set(s.subarray(0,h),0),d.buffer}static _append(e,t){if(t===_h)return e;if(e===_h)return t;if(e===null)return e;if(t===null)return null;const n=bh(e),s=bh(t),r=s.length>>>1;let o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let h=0;h<r;h++)o[a++]=s[h<<1]+l,o[a++]=s[(h<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===_h)return e;const s=bh(e),r=s.length>>>1;let o=Ln.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}class wm extends ne{constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new H),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new yTe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const s=this.getPositionAt(e),r=this.getPositionAt(n);return new V(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,h=o===r?e.endColumn-1:a.length;for(let c=l;c<h;c++)kn(a.charCodeAt(c))?(n=n+1,c=c+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=ar(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=e_(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){let m=e[p];a&&m._isTracked&&(a=!1);let b=m.range;if(m.text){let L=!0;o||(L=!O5(m.text),o=L),!s&&L&&(s=jL(m.text)),!r&&L&&(r=eJ(m.text))}let _="",w=0,y=0,x=0;if(m.text){let L;[w,y,x,L]=a0(m.text);const S=this.getEOL();L===0||L===(S===`\r
`?2:1)?_=m.text:_=m.text.replace(/\r\n|\r|\n/g,S)}l[p]={sortIndex:p,identifier:m.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:_,eolCount:w,firstLineLength:y,lastLineLength:x,forceMoveMarkers:!!m.forceMoveMarkers,isAutoWhitespaceEdit:m.isAutoWhitespaceEdit||!1}}l.sort(wm._sortOpsAscending);let h=!1;for(let p=0,m=l.length-1;p<m;p++){let b=l[p].range.getEndPosition(),_=l[p+1].range.getStartPosition();if(_.isBeforeOrEqual(b)){if(_.isBefore(b))throw new Error("Overlapping ranges are not allowed!");h=!0}}a&&(l=this._reduceOperations(l));let c=n||t?wm._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){let m=l[p],b=c[p];if(m.isAutoWhitespaceEdit&&m.range.isEmpty())for(let _=b.startLineNumber;_<=b.endLineNumber;_++){let w="";_===b.startLineNumber&&(w=this.getLineContent(m.range.startLineNumber),ar(w)!==-1)||u.push({lineNumber:_,oldContent:w})}}let d=null;if(n){let p=0;d=[];for(let m=0;m<l.length;m++){const b=l[m],_=c[m],w=this.getValueInRange(b.range),y=b.rangeOffset+p;p+=b.text.length-w.length,d[m]={sortIndex:b.sortIndex,identifier:b.identifier,range:_,text:w,textChange:new Tn(b.rangeOffset,w,y,b.text)}}h||d.sort((m,b)=>m.sortIndex-b.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,m)=>m.lineNumber-p.lineNumber),g=[];for(let p=0,m=u.length;p<m;p++){let b=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===b)continue;let _=u[p].oldContent,w=this.getLineContent(b);w.length===0||w===_||ar(w)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new w2e(d,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new V(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],m=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new V(o,a,m.startLineNumber,m.startColumn))),p.text.length>0&&l.push(p.text),o=m.endLineNumber,a=m.endColumn}const h=l.join(""),[c,u,d]=a0(h);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:h,eolCount:c,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(wm._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let s=e[n];const r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const h=new V(r,o,a,l);t.push({range:h,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}static _getInverseEditRanges(e){let t=[],n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],h,c;r?r.range.endLineNumber===l.range.startLineNumber?(h=n,c=s+(l.range.startColumn-r.range.endColumn)):(h=n+(l.range.startLineNumber-r.range.endLineNumber),c=l.range.startColumn):(h=l.range.startLineNumber,c=l.range.startColumn);let u;if(l.text.length>0){const d=l.eolCount+1;d===1?u=new V(h,c,h,c+l.firstLineLength):u=new V(h,c,h+d-1,l.lastLineLength+1)}else u=new V(h,c,h,c);n=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){let n=V.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=V.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class STe{constructor(e,t,n,s,r,o,a,l,h){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=h}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=kh(a);n[r]=new Td(a,l)}const s=new wm(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class xTe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&P5(e)&&(this.BOM=VLe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=bTe(this._tmpLineStarts,e);this.chunks.push(new Td(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=jL(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=eJ(e))}finish(e=!0){return this._finish(),new STe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=kh(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class DTe{constructor(){this.changeType=1}}class za{constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new za(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new za(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}}class yz{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class kTe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class LTe{constructor(e,t,n,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class ETe{constructor(){this.changeType=5}}class pf{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new pf(n,s,r,o)}}class Eee{constructor(e){this.changes=e}}class KD{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=pf.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=KD._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new KD(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:s,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}class ATe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],s=[];for(let r=0;r<t;r++)n[r]=null,s[r]=!1;this._beginState=_1(this._beginState,e,n),this._valid=_1(this._valid,e,s),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const s=this.getBeginState(t+1);if(s===null||!n.equals(s)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let r=t+1;for(;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,r=Math.min(n,t);for(let o=r;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new K(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class ITe extends ne{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new ATe,this._tokenizationSupport=null,this._register(Ri.onDidChange(n=>{const s=this._textModel.getLanguageId();n.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let s=0,r=n.changes.length;s<r;s++){const o=n.changes[s],[a]=a0(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=TTe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&IM(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){const e=this._textModel.getLineCount(),t=1,n=new wI,s=hc.create(!1);let r=-1;for(;this._hasLinesToTokenize()&&!(s.elapsed()>t||(r=this._tokenizeOneInvalidLine(n),r>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new wI;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new wI;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),s=this._textModel.getLineCount(),r=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=r;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),h=yI(this._languageIdCodec,n,this._tokenizationSupport,a,!0,l);e.add(o+1,h.tokens),this._tokenizationStateStore.setEndState(s,o,h.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let s=this._textModel.getLineFirstNonWhitespaceColumn(t);const r=[];let o=null;for(let h=t-1;s>1&&h>=1;h--){const c=this._textModel.getLineFirstNonWhitespaceColumn(h);if(c!==0&&c<s){if(o=this._tokenizationStateStore.getBeginState(h-1),o)break;r.push(this._textModel.getLineContent(h)),s=c}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=o;for(let h=r.length-1;h>=0;h--)l=yI(this._languageIdCodec,a,this._tokenizationSupport,r[h],!1,l).endState;for(let h=t;h<=n;h++){const c=this._textModel.getLineContent(h),u=yI(this._languageIdCodec,a,this._tokenizationSupport,c,!0,l);e.add(h,u.tokens),this._tokenizationStateStore.setFakeTokens(h-1),l=u.endState}}}function TTe(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:Ri.get(e),n=null;if(t)try{n=t.getInitialState()}catch(s){nt(s),t=null}return[t,n]}function yI(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenize2(n,s,r.clone(),0)}catch(a){nt(a)}return o||(o=bJ(i.encodeLanguageId(e),n,r,0)),Ln.convertToEndOffset(o.tokens,n.length),o}function gu(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class ct{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=gu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ma{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=gu(Math.max(Math.min(1,t),0),3),this.l=gu(Math.max(Math.min(1,n),0),3),this.a=gu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,h=0;const c=(a+o)/2,u=o-a;if(u>0){switch(h=Math.min(c<=.5?u/(2*c):u/(2-2*c),1),o){case t:l=(n-s)/u+(n<s?6:0);break;case n:l=(s-t)/u+2;break;case s:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new ma(l,h,c,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const h=s<.5?s*(1+n):s+n-s*n,c=2*s-h;o=ma._hue2rgb(c,h,t+1/3),a=ma._hue2rgb(c,h,t),l=ma._hue2rgb(c,h,t-1/3)}return new ct(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class Tl{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=gu(Math.max(Math.min(1,t),0),3),this.v=gu(Math.max(Math.min(1,n),0),3),this.a=gu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let h;return a===0?h=0:r===t?h=((n-s)/a%6+6)%6:r===n?h=(s-t)/a+2:h=(t-n)/a+4,new Tl(Math.round(h*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[h,c,u]=[0,0,0];return t<60?(h=o,c=a):t<120?(h=a,c=o):t<180?(c=o,u=a):t<240?(c=a,u=o):t<300?(h=a,u=o):t<=360&&(h=o,u=a),h=Math.round((h+l)*255),c=Math.round((c+l)*255),u=Math.round((u+l)*255),new ct(h,c,u,r)}}class Q{constructor(e){if(e)if(e instanceof ct)this.rgba=e;else if(e instanceof ma)this._hsla=e,this.rgba=ma.toRGBA(e);else if(e instanceof Tl)this._hsva=e,this.rgba=Tl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Q.Format.CSS.parseHex(e)||Q.red}get hsla(){return this._hsla?this._hsla:ma.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Tl.fromRGBA(this.rgba)}equals(e){return!!e&&ct.equals(this.rgba,e.rgba)&&ma.equals(this.hsla,e.hsla)&&Tl.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Q._relativeLuminanceForComponent(this.rgba.r),t=Q._relativeLuminanceForComponent(this.rgba.g),n=Q._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return gu(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Q(new ma(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Q(new ma(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new Q(new ct(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Q(new ct(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Q.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}}Q.white=new Q(new ct(255,255,255,1));Q.black=new Q(new ct(0,0,0,1));Q.red=new Q(new ct(255,0,0,1));Q.blue=new Q(new ct(0,0,255,1));Q.cyan=new Q(new ct(0,255,255,1));Q.lightgrey=new Q(new ct(211,211,211,1));Q.transparent=new Q(new ct(0,0,0,0));(function(i){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function h(f,g=!1){return g&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=h;function c(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=c;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),b=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new i(new ct(p,m,b,1))}if(g===9){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),b=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),_=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new i(new ct(p,m,b,_/255))}if(g===4){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),b=d(f.charCodeAt(3));return new i(new ct(16*p+p,16*m+m,16*b+b))}if(g===5){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),b=d(f.charCodeAt(3)),_=d(f.charCodeAt(4));return new i(new ct(16*p+p,16*m+m,16*b+b,(16*_+_)/255))}return null}t.parseHex=u;function d(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(Q||(Q={}));const dy=kt("undoRedoService");class Aee{constructor(e,t){this.resource=e,this.elements=t}}class l0{constructor(){this.id=l0._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}l0._ID=0;l0.None=new l0;class Ll{constructor(){this.id=Ll._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Ll._ID=0;Ll.None=new Ll;class Cz{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class NTe{constructor(e,t,n,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s}}class MTe extends NTe{constructor(e,t,n,s,r){super(e,t,n,s),this.minVisibleColumnIndentation=r}}class RTe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function OTe(i,e,t,n){return i!==t?Li(t-i,n):Li(0,n-e)}const uc=0;function PTe(i){return i===0}const Tr=Math.pow(2,26);function Li(i,e){return i*Tr+e}function pu(i){const e=i,t=Math.floor(e/Tr),n=e-t*Tr;return new RTe(t,n)}function FTe(i){return Math.floor(i/Tr)}function Nn(i,e){return e<Tr?i+e:i-i%Tr+e}function BTe(i,e){const t=i,n=e;if(n-t<=0)return uc;const r=Math.floor(t/Tr),o=Math.floor(n/Tr),a=n-o*Tr;if(r===o){const l=t-r*Tr;return Li(0,a-l)}else return Li(o-r,a)}function US(i,e){return i<e}function Xd(i,e){return i<=e}function pC(i,e){return i>=e}function mC(i){return Li(i.lineNumber-1,i.column-1)}function sv(i,e){const t=i,n=Math.floor(t/Tr),s=t-n*Tr,r=e,o=Math.floor(r/Tr),a=r-o*Tr;return new V(n+1,s+1,o+1,a+1)}function VTe(i){const e=ql(i);return Li(e.length-1,e[e.length-1].length)}class Sz{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class WTe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>wF.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return BTe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Li(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Li(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=pu(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Li(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Li(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Xd(n,e)){this.nextEditIdx++;const s=pu(n),r=pu(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class wF{constructor(e,t,n){this.endOffsetBeforeObj=pu(t),this.endOffsetAfterObj=pu(Nn(e,n)),this.offsetObj=pu(e)}static from(e){return new wF(e.startOffset,e.endOffset,e.newLength)}}class Rt{static visibleColumnFromColumn(e,t,n){const s=e.length,r=t-1<s?t-1:s;let o=0,a=0;for(;a<r;){const l=Mh(e,r,a);if(a+=l>=65536?2:1,l===9)o=Rt.nextRenderTabStop(o,n);else{let h=rp(l);for(;a<r;){const c=Mh(e,r,a),u=rp(c);if(jb(h,u))break;a+=c>=65536?2:1,h=u}Da(l)||$b(l)?o=o+2:o=o+1}}return o}static visibleColumnsByColumns(e,t){const n=e.length;let s=new Array;s.push(-1);let r=0,o=0;for(;o<n;){const a=Mh(e,n,o);if(o+=a>=65536?2:1,s.push(r),a>=65536&&s.push(r),a===9)r=Rt.nextRenderTabStop(r,t);else{let l=rp(a);for(;o<n;){const h=Mh(e,n,o),c=rp(h);if(jb(l,c))break;o+=h>=65536?2:1,s.push(r),a>=65536&&s.push(r),l=c}Da(a)||$b(a)?r=r+2:r=r+1}}return s.push(r),s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length;let r=0,o=1,a=0;for(;a<s;){const l=Mh(e,s,a);a+=l>=65536?2:1;let h;if(l===9)h=Rt.nextRenderTabStop(r,n);else{let u=rp(l);for(;a<s;){const d=Mh(e,s,a),f=rp(d);if(jb(u,f))break;a+=d>=65536?2:1,u=f}Da(l)||$b(l)?h=r+2:h=r+1}const c=a+1;if(h>=t){const u=t-r;return h-t<u?c:o}r=h,o=c}return s+1}static columnFromVisibleColumn2(e,t,n,s){let r=this.columnFromVisibleColumn(t.getLineContent(n),s,e.tabSize),o=t.getLineMinColumn(n);if(r<o)return o;let a=t.getLineMaxColumn(n);return r>a?a:r}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const $S=new Array;class Hi{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Hi.cache[e];return n||(n=new Hi(e,t),Hi.cache[e]=n),n}return new Hi(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:Hi.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),Hi.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===$S&&e.additionalItems===$S)return t===this.items?this:t===e.items?e:Hi.create(t,$S);const n=new Array;for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return Hi.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Hi.cache=new Array(129);Hi.empty=Hi.create(0,$S);const xz={getKey(i){return i}};class zTe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class yF{constructor(e){this._length=e}get length(){return this._length}}class C1 extends yF{constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}static create(e,t,n){let s=e.length;return t&&(s=Nn(s,t.length)),n&&(s=Nn(s,n.length)),new C1(s,e,t,n,t?t.missingOpeningBracketIds:Hi.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new C1(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Nn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Yl extends yF{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Nn(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=Nn(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new HTe(r,e.listHeight+1,e,t,n,o):new S1(r,e.listHeight+1,e,t,n,o)}static getEmpty(){return new UTe(uc,0,[],Hi.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Nn(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=Nn(s,o.length))}return this.cachedMinIndentation=n,n}}class S1 extends Yl{constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new S1(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class HTe extends S1{toMutable(){return new S1(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class ZD extends Yl{constructor(e,t,n,s){super(e,t,s),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new ZD(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class UTe extends ZD{toMutable(){return new ZD(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const $Te=[];class CF extends yF{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return $Te}deepClone(){return this}}class Dp extends CF{get kind(){return 0}get missingOpeningBracketIds(){return Hi.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=pu(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=FTe(Nn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),h=t.getLineContent(a);if(l===0)continue;const c=Rt.visibleColumnFromColumn(h,l,t.getOptions().tabSize);o=Math.min(o,c)}return o}}class mf extends CF{constructor(e){super(e)}static create(e){const t=e,n=mf.cacheByLength.get(t);if(n)return n;const s=new mf(e);return mf.cacheByLength.set(t,s),s}get kind(){return 1}get missingOpeningBracketIds(){return Hi.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}mf.cacheByLength=new Map;class jTe extends CF{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Xc{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}}class qTe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new GTe(this.textModel,this.bracketTokens),this._offset=uc,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Li(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Nn(this._offset,e);const t=pu(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Nn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class GTe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const h=qr.getTokenType(l)===0,c=r.getEndOffset(this.lineTokenOffset);if(h&&c!==this.lineCharOffset){const u=r.getLanguageId(this.lineTokenOffset),d=this.line.substring(this.lineCharOffset,c),f=this.bracketTokens.getSingleLanguageBracketTokens(u),g=f.regExpGlobal;if(g){g.lastIndex=0;const p=g.exec(d);p&&(a=f.getToken(p[0]),a&&(this.lineCharOffset+=p.index))}}if(n+=c-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=c}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=OTe(e,t,this.lineIdx,this.lineCharOffset);return new Xc(s,0,-1,Hi.getEmpty(),new Dp(s))}}class KTe{constructor(e,t){this.text=e,this._offset=uc,this.idx=0;const s=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,r=[];let o,a=0,l=0,h=0,c=0;const u=new Array;for(let g=0;g<60;g++)u.push(new Xc(Li(0,g),0,-1,Hi.getEmpty(),new Dp(Li(0,g))));const d=new Array;for(let g=0;g<60;g++)d.push(new Xc(Li(1,g),0,-1,Hi.getEmpty(),new Dp(Li(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(h!==g){let m;if(c===a){const b=g-h;if(b<u.length)m=u[b];else{const _=Li(0,b);m=new Xc(_,0,-1,Hi.getEmpty(),new Dp(_))}}else{const b=a-c,_=g-l;if(b===1&&_<d.length)m=d[_];else{const w=Li(b,_);m=new Xc(w,0,-1,Hi.getEmpty(),new Dp(w))}}r.push(m)}r.push(t.getToken(p)),h=g+p.length,c=a}}const f=e.length;if(h!==f){const g=c===a?Li(0,f-h):Li(a-c,f-l);r.push(new Xc(g,0,-1,Hi.getEmpty(),new Dp(g)))}this.length=Li(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Dke}}class YD{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,h){return t.getKey(`${l}:::${h}`)}const s=e.characterPair.getColorizedBrackets(),r=new Map,o=new Set;for(const[l,h]of s){o.add(l);let c=r.get(h);const u=n(e.languageId,l);c||(c={openingBrackets:Hi.getEmpty(),first:u},r.set(h,c)),c.openingBrackets=c.openingBrackets.add(u,xz)}const a=new Map;for(const[l,h]of r){const c=Li(0,l.length);a.set(l,new Xc(c,2,h.first,h.openingBrackets,mf.create(c)))}for(const l of o){const h=Li(0,l.length),c=n(e.languageId,l);a.set(l,new Xc(h,1,c,Hi.getEmpty().add(c,xz),mf.create(h)))}return new YD(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>ZTe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function ZTe(i){const e=Fa(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class YTe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=YD.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=YD.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function QTe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?Iee(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())Dz(n,s)<=Dz(s,o)?(n=CI(n,s),s=o):s=CI(s,o);return CI(n,s)}function Iee(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Yl.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Yl.create23(i[0],i[1],t>=3?i[2]:null,e)}function Dz(i,e){return Math.abs(i.listHeight-e.listHeight)}function CI(i,e){return i.listHeight===e.listHeight?Yl.create23(i,e,null,!1):i.listHeight>e.listHeight?XTe(i,e):JTe(e,i)}function XTe(i,e){i=i.toMutable();let t=i;const n=new Array;let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Yl.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Yl.create23(i,s,null,!1):i}function JTe(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Yl.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Yl.create23(s,i,null,!1):i}class eNe{constructor(e){this.lastOffset=uc,this.nextNodes=[e],this.offsets=[uc],this.idxs=[]}readLongestNodeAt(e,t){if(US(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=F_(this.nextNodes);if(!n)return;const s=F_(this.offsets);if(US(e,s))return;if(US(s,e))if(Nn(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=SI(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=SI(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=F_(this.offsets),t=F_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=F_(this.nextNodes),s=SI(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(Nn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function SI(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function F_(i){return i.length>0?i[i.length-1]:void 0}function kz(i,e,t,n){return new tNe(i,e,t,n).parseDocument()}class tNe{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new eNe(n):void 0,this.positionMapper=new WTe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Hi.getEmpty());return e||(e=Yl.getEmpty()),e}parseList(e){const t=new Array;for(;;){const s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;const r=this.parseChild(e);r.kind===4&&r.childrenLength===0||t.push(r)}return this.oldNodeReader?QTe(t):Iee(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!PTe(n)){const s=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>US(r.length,n)?r.canBeReused(e):!1);if(s)return this._itemsFromCache++,this.tokenizer.skip(s.length),s}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new jTe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),s=this.parseList(n),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===t.bracketId||r.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),C1.create(t.astNode,s,r.astNode)):C1.create(t.astNode,s,null);default:throw new Error("unexpected")}}}class iNe extends ne{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new Vr),this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(n=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(n=>{var s;(!n.languageId||!((s=this.cache.value)===null||s===void 0)&&s.object.didLanguageChange(n.languageId))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){const e=new ve;this.cache.value=nNe(e.add(new sNe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.cache.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}}function nNe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class sNe extends ne{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new H,this.denseKeyProvider=new zTe,this.brackets=new YTe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const s=n.map(r=>new Sz(Li(r.fromLineNumber-1,0),Li(r.toLineNumber,0),Li(r.toLineNumber-r.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(s,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new KTe(this.textModel.getValue(),n);this.initialAstWithoutTokens=kz(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const s=V.lift(n.range);return new Sz(mC(s.getStartPosition()),mC(s.getEndPosition()),VTe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new qTe(this.textModel,this.brackets);return kz(r,e,s,n)}getBracketsInRange(e){const t=Li(e.startLineNumber-1,e.startColumn-1),n=Li(e.endLineNumber-1,e.endColumn-1),s=new Array,r=this.initialAstWithoutTokens||this.astWithTokens;return mb(r,uc,r.length,t,n,s),s}getBracketPairsInRange(e,t){const n=new Array,s=mC(e.getStartPosition()),r=mC(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new rNe(n,t,this.textModel);return Tee(o,uc,o.length,s,r,a),n}}function mb(i,e,t,n,s,r,o=0){if(i.kind===1){const a=sv(e,t);r.push(new Cz(a,o-1,!1))}else if(i.kind===3){const a=sv(e,t);r.push(new Cz(a,o-1,!0))}else if(i.kind===4)for(const a of i.children)t=Nn(e,a.length),Xd(e,s)&&pC(t,n)&&mb(a,e,t,n,s,r,o),e=t;else if(i.kind===2){o++;{const a=i.openingBracket;t=Nn(e,a.length),Xd(e,s)&&pC(t,n)&&mb(a,e,t,n,s,r,o),e=t}if(i.child){const a=i.child;t=Nn(e,a.length),Xd(e,s)&&pC(t,n)&&mb(a,e,t,n,s,r,o),e=t}if(i.closingBracket){const a=i.closingBracket;t=Nn(e,a.length),Xd(e,s)&&pC(t,n)&&mb(a,e,t,n,s,r,o),e=t}}}class rNe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function Tee(i,e,t,n,s,r,o=0){var a;if(i.kind===2){const h=Nn(e,i.openingBracket.length);let c=-1;r.includeMinIndentation&&(c=i.computeMinIndentation(e,r.textModel)),r.result.push(new MTe(sv(e,t),sv(e,h),i.closingBracket?sv(Nn(h,((a=i.child)===null||a===void 0?void 0:a.length)||uc),t):void 0,o,c)),o++}let l=e;for(const h of i.children){const c=l;l=Nn(l,h.length),Xd(c,s)&&Xd(n,l)&&Tee(h,c,l,n,s,r,o)}}const Nee={ColorContribution:"base.contributions.colors"};class oNe{constructor(){this._onDidChangeSchema=new H,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,s=!1,r){let o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const s=n.defaults[t.type];return Lh(s,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const _2=new oNe;Pn.add(Nee.ColorContribution,_2);function z(i,e,t,n,s){return _2.registerColor(i,e,t,n,s)}const Fe=z("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},v("foreground","Overall foreground color. This color is only used if not overridden by a component.")),aNe=z("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},v("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),xI=z("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},v("iconForeground","The default color for icons in the workbench.")),Vu=z("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},v("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Gi=z("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},v("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Hs=z("contrastActiveBorder",{light:null,dark:null,hc:Vu},v("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),b2=z("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},v("textLinkForeground","Foreground color for links in text.")),v2=z("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},v("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Mee=z("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:Q.black},v("textCodeBlockBackground","Background color for code blocks in text.")),h0=z("widget.shadow",{dark:Qt(Q.black,.36),light:Qt(Q.black,.16),hc:null},v("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Ree=z("input.background",{dark:"#3C3C3C",light:Q.white,hc:Q.black},v("inputBoxBackground","Input box background.")),Oee=z("input.foreground",{dark:Fe,light:Fe,hc:Fe},v("inputBoxForeground","Input box foreground.")),Pee=z("input.border",{dark:null,light:null,hc:Gi},v("inputBoxBorder","Input box border.")),c3=z("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Gi},v("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),u3=z("inputOption.activeBackground",{dark:Qt(Vu,.4),light:Qt(Vu,.2),hc:Q.transparent},v("inputOption.activeBackground","Background color of activated options in input fields.")),d3=z("inputOption.activeForeground",{dark:Q.white,light:Q.black,hc:null},v("inputOption.activeForeground","Foreground color of activated options in input fields.")),SF=z("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:Q.black},v("inputValidationInfoBackground","Input validation background color for information severity.")),xF=z("inputValidation.infoForeground",{dark:null,light:null,hc:null},v("inputValidationInfoForeground","Input validation foreground color for information severity.")),DF=z("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Gi},v("inputValidationInfoBorder","Input validation border color for information severity.")),Fee=z("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:Q.black},v("inputValidationWarningBackground","Input validation background color for warning severity.")),Bee=z("inputValidation.warningForeground",{dark:null,light:null,hc:null},v("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Vee=z("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Gi},v("inputValidationWarningBorder","Input validation border color for warning severity.")),Wee=z("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:Q.black},v("inputValidationErrorBackground","Input validation background color for error severity.")),zee=z("inputValidation.errorForeground",{dark:null,light:null,hc:null},v("inputValidationErrorForeground","Input validation foreground color for error severity.")),Hee=z("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Gi},v("inputValidationErrorBorder","Input validation border color for error severity.")),DI=z("dropdown.background",{dark:"#3C3C3C",light:Q.white,hc:Q.black},v("dropdownBackground","Dropdown background.")),Lz=z("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:Q.white},v("dropdownForeground","Dropdown foreground.")),lNe=z("button.foreground",{dark:Q.white,light:Q.white,hc:Q.white},v("buttonForeground","Button foreground color.")),f3=z("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},v("buttonBackground","Button background color.")),hNe=z("button.hoverBackground",{dark:Zee(f3,.2),light:Kee(f3,.2),hc:null},v("buttonHoverBackground","Button background color when hovering.")),rv=z("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:Q.black},v("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),ov=z("badge.foreground",{dark:Q.white,light:"#333",hc:Q.white},v("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),fy=z("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},v("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),av=z("scrollbarSlider.background",{dark:Q.fromHex("#797979").transparent(.4),light:Q.fromHex("#646464").transparent(.4),hc:Qt(Gi,.6)},v("scrollbarSliderBackground","Scrollbar slider background color.")),lv=z("scrollbarSlider.hoverBackground",{dark:Q.fromHex("#646464").transparent(.7),light:Q.fromHex("#646464").transparent(.7),hc:Qt(Gi,.8)},v("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),hv=z("scrollbarSlider.activeBackground",{dark:Q.fromHex("#BFBFBF").transparent(.4),light:Q.fromHex("#000000").transparent(.6),hc:Gi},v("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),cNe=z("progressBar.background",{dark:Q.fromHex("#0E70C0"),light:Q.fromHex("#0E70C0"),hc:Gi},v("progressBarBackground","Background color of the progress bar that can show for long running operations.")),uNe=z("editorError.background",{dark:null,light:null,hc:null},v("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),cv=z("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},v("editorError.foreground","Foreground color of error squigglies in the editor.")),Uee=z("editorError.border",{dark:null,light:null,hc:Q.fromHex("#E47777").transparent(.8)},v("errorBorder","Border color of error boxes in the editor.")),dNe=z("editorWarning.background",{dark:null,light:null,hc:null},v("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),tc=z("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},v("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),w2=z("editorWarning.border",{dark:null,light:null,hc:Q.fromHex("#FFCC00").transparent(.8)},v("warningBorder","Border color of warning boxes in the editor.")),fNe=z("editorInfo.background",{dark:null,light:null,hc:null},v("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ia=z("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},v("editorInfo.foreground","Foreground color of info squigglies in the editor.")),kF=z("editorInfo.border",{dark:null,light:null,hc:Q.fromHex("#3794FF").transparent(.8)},v("infoBorder","Border color of info boxes in the editor.")),gNe=z("editorHint.foreground",{dark:Q.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},v("editorHint.foreground","Foreground color of hint squigglies in the editor.")),pNe=z("editorHint.border",{dark:null,light:null,hc:Q.fromHex("#eeeeee").transparent(.8)},v("hintBorder","Border color of hint boxes in the editor.")),io=z("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:Q.black},v("editorBackground","Editor background color.")),mu=z("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:Q.white},v("editorForeground","Editor default foreground color.")),Ko=z("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},v("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),_u=z("editorWidget.foreground",{dark:Fe,light:Fe,hc:Fe},v("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),_f=z("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Gi},v("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),mNe=z("editorWidget.resizeBorder",{light:null,dark:null,hc:null},v("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Ez=z("quickInput.background",{dark:Ko,light:Ko,hc:Ko},v("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),_Ne=z("quickInput.foreground",{dark:_u,light:_u,hc:_u},v("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),bNe=z("quickInputTitle.background",{dark:new Q(new ct(255,255,255,.105)),light:new Q(new ct(0,0,0,.06)),hc:"#000000"},v("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),vNe=z("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:Q.white},v("pickerGroupForeground","Quick picker color for grouping labels.")),wNe=z("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:Q.white},v("pickerGroupBorder","Quick picker color for grouping borders.")),yNe=z("keybindingLabel.background",{dark:new Q(new ct(128,128,128,.17)),light:new Q(new ct(221,221,221,.4)),hc:Q.transparent},v("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),CNe=z("keybindingLabel.foreground",{dark:Q.fromHex("#CCCCCC"),light:Q.fromHex("#555555"),hc:Q.white},v("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),SNe=z("keybindingLabel.border",{dark:new Q(new ct(51,51,51,.6)),light:new Q(new ct(204,204,204,.4)),hc:new Q(new ct(111,195,223))},v("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),xNe=z("keybindingLabel.bottomBorder",{dark:new Q(new ct(68,68,68,.6)),light:new Q(new ct(187,187,187,.4)),hc:new Q(new ct(111,195,223))},v("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),bu=z("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},v("editorSelectionBackground","Color of the editor selection.")),DNe=z("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},v("editorSelectionForeground","Color of the selected text for high contrast.")),LF=z("editor.inactiveSelectionBackground",{light:Qt(bu,.5),dark:Qt(bu,.5),hc:Qt(bu,.5)},v("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),$ee=z("editor.selectionHighlightBackground",{light:Tz(bu,io,.3,.6),dark:Tz(bu,io,.3,.6),hc:null},v("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);z("editor.selectionHighlightBorder",{light:null,dark:null,hc:Hs},v("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const kNe=z("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},v("editorFindMatch","Color of the current search match.")),g3=z("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},v("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),LNe=z("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},v("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),ENe=z("editor.findMatchBorder",{light:null,dark:null,hc:Hs},v("editorFindMatchBorder","Border color of the current search match.")),ANe=z("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Hs},v("findMatchHighlightBorder","Border color of the other search matches.")),INe=z("editor.findRangeHighlightBorder",{dark:null,light:null,hc:Qt(Hs,.4)},v("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),TNe=z("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},v("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),x1=z("editorHoverWidget.background",{light:Ko,dark:Ko,hc:Ko},v("hoverBackground","Background color of the editor hover.")),NNe=z("editorHoverWidget.foreground",{light:_u,dark:_u,hc:_u},v("hoverForeground","Foreground color of the editor hover.")),MNe=z("editorHoverWidget.border",{light:_f,dark:_f,hc:_f},v("hoverBorder","Border color of the editor hover.")),RNe=z("editorHoverWidget.statusBarBackground",{dark:Zee(x1,.2),light:Kee(x1,.05),hc:Ko},v("statusBarBackground","Background color of the editor hover status bar.")),ONe=z("editorLink.activeForeground",{dark:"#4E94CE",light:Q.blue,hc:Q.cyan},v("activeLinkForeground","Color of active links.")),ym=z("editorInlayHint.foreground",{dark:Qt(ov,.8),light:Qt(ov,.8),hc:ov},v("editorInlayHintForeground","Foreground color of inline hints")),Cm=z("editorInlayHint.background",{dark:Qt(rv,.6),light:Qt(rv,.3),hc:rv},v("editorInlayHintBackground","Background color of inline hints"));z("editorInlayHint.typeForeground",{dark:ym,light:ym,hc:ym},v("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));z("editorInlayHint.typeBackground",{dark:Cm,light:Cm,hc:Cm},v("editorInlayHintBackgroundTypes","Background color of inline hints for types"));z("editorInlayHint.parameterForeground",{dark:ym,light:ym,hc:ym},v("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));z("editorInlayHint.parameterBackground",{dark:Cm,light:Cm,hc:Cm},v("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const PNe=z("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},v("editorLightBulbForeground","The color used for the lightbulb actions icon.")),FNe=z("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},v("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),p3=new Q(new ct(155,185,85,.2)),m3=new Q(new ct(255,0,0,.2)),jee=z("diffEditor.insertedTextBackground",{dark:p3,light:p3,hc:null},v("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),qee=z("diffEditor.removedTextBackground",{dark:m3,light:m3,hc:null},v("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),BNe=z("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},v("diffEditorInsertedOutline","Outline color for the text that got inserted.")),VNe=z("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},v("diffEditorRemovedOutline","Outline color for text that got removed.")),WNe=z("diffEditor.border",{dark:null,light:null,hc:Gi},v("diffEditorBorder","Border color between the two text editors.")),zNe=z("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},v("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),HNe=z("list.focusBackground",{dark:null,light:null,hc:null},v("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),UNe=z("list.focusForeground",{dark:null,light:null,hc:null},v("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),$Ne=z("list.focusOutline",{dark:Vu,light:Vu,hc:Hs},v("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vu=z("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},v("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wu=z("list.activeSelectionForeground",{dark:Q.white,light:Q.white,hc:null},v("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),jS=z("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},v("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),jNe=z("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},v("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qNe=z("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},v("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),GNe=z("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},v("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),KNe=z("list.inactiveFocusBackground",{dark:null,light:null,hc:null},v("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),ZNe=z("list.inactiveFocusOutline",{dark:null,light:null,hc:null},v("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),YNe=z("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},v("listHoverBackground","List/Tree background when hovering over items using the mouse.")),QNe=z("list.hoverForeground",{dark:null,light:null,hc:null},v("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),XNe=z("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},v("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Sm=z("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:Vu},v("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),kI=z("list.focusHighlightForeground",{dark:Sm,light:AMe(vu,Sm,"#9DDDFF"),hc:Sm},v("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),JNe=z("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:Q.black},v("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),eMe=z("listFilterWidget.outline",{dark:Q.transparent,light:Q.transparent,hc:"#f38518"},v("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),tMe=z("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Gi},v("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),iMe=z("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},v("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),nMe=z("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},v("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Az=z("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,v("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),qS=z("quickInputList.focusForeground",{dark:wu,light:wu,hc:wu},v("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),GS=z("quickInputList.focusIconForeground",{dark:jS,light:jS,hc:jS},v("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),KS=z("quickInputList.focusBackground",{dark:D1(Az,vu),light:D1(Az,vu),hc:null},v("quickInput.listFocusBackground","Quick picker background color for the focused item.")),sMe=z("menu.border",{dark:null,light:null,hc:Gi},v("menuBorder","Border color of menus.")),rMe=z("menu.foreground",{dark:Lz,light:Fe,hc:Lz},v("menuForeground","Foreground color of menu items.")),oMe=z("menu.background",{dark:DI,light:DI,hc:DI},v("menuBackground","Background color of menu items.")),aMe=z("menu.selectionForeground",{dark:wu,light:wu,hc:wu},v("menuSelectionForeground","Foreground color of the selected menu item in menus.")),lMe=z("menu.selectionBackground",{dark:vu,light:vu,hc:vu},v("menuSelectionBackground","Background color of the selected menu item in menus.")),hMe=z("menu.selectionBorder",{dark:null,light:null,hc:Hs},v("menuSelectionBorder","Border color of the selected menu item in menus.")),cMe=z("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Gi},v("menuSeparatorBackground","Color of a separator menu item in menus.")),uMe=z("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},v("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),dMe=z("editor.snippetTabstopHighlightBackground",{dark:new Q(new ct(124,124,124,.3)),light:new Q(new ct(10,50,100,.2)),hc:new Q(new ct(124,124,124,.3))},v("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),fMe=z("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},v("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),gMe=z("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},v("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),pMe=z("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Q(new ct(10,50,100,.5)),hc:"#525252"},v("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),EF=z("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},v("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),mMe=z("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},v("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Gee=z("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},v("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),_Me=z("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},v("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),Iz=z("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},v("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),bMe=z("minimap.errorHighlight",{dark:new Q(new ct(255,18,18,.7)),light:new Q(new ct(255,18,18,.7)),hc:new Q(new ct(255,50,50,1))},v("minimapError","Minimap marker color for errors.")),vMe=z("minimap.warningHighlight",{dark:tc,light:tc,hc:w2},v("overviewRuleWarning","Minimap marker color for warnings.")),wMe=z("minimap.background",{dark:null,light:null,hc:null},v("minimapBackground","Minimap background color.")),yMe=z("minimap.foregroundOpacity",{dark:Q.fromHex("#000f"),light:Q.fromHex("#000f"),hc:Q.fromHex("#000f")},v("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),CMe=z("minimapSlider.background",{light:Qt(av,.5),dark:Qt(av,.5),hc:Qt(av,.5)},v("minimapSliderBackground","Minimap slider background color.")),SMe=z("minimapSlider.hoverBackground",{light:Qt(lv,.5),dark:Qt(lv,.5),hc:Qt(lv,.5)},v("minimapSliderHoverBackground","Minimap slider background color when hovering.")),xMe=z("minimapSlider.activeBackground",{light:Qt(hv,.5),dark:Qt(hv,.5),hc:Qt(hv,.5)},v("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),DMe=z("problemsErrorIcon.foreground",{dark:cv,light:cv,hc:cv},v("problemsErrorIconForeground","The color used for the problems error icon.")),kMe=z("problemsWarningIcon.foreground",{dark:tc,light:tc,hc:tc},v("problemsWarningIconForeground","The color used for the problems warning icon.")),LMe=z("problemsInfoIcon.foreground",{dark:Ia,light:Ia,hc:Ia},v("problemsInfoIconForeground","The color used for the problems info icon."));function EMe(i,e){var t,n,s;switch(i.op){case 0:return(t=Lh(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=Lh(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(s=Lh(i.value,e))===null||s===void 0?void 0:s.transparent(i.factor);case 3:for(const a of i.values){const l=Lh(a,e);if(l)return l}return;case 5:return Lh(e.defines(i.if)?i.then:i.else,e);case 4:const r=Lh(i.value,e);if(!r)return;const o=Lh(i.background,e);return o?r.isDarkerThan(o)?Q.getLighterColor(r,o,i.factor).transparent(i.transparency):Q.getDarkerColor(r,o,i.factor).transparent(i.transparency):r.transparent(i.factor*i.transparency);default:throw u2e()}}function Kee(i,e){return{op:0,value:i,factor:e}}function Zee(i,e){return{op:1,value:i,factor:e}}function Qt(i,e){return{op:2,value:i,factor:e}}function D1(...i){return{op:3,values:i}}function AMe(i,e,t){return{op:5,if:i,then:e,else:t}}function Tz(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function Lh(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?Q.fromHex(i):e.getColor(i);if(i instanceof Q)return i;if(typeof i=="object")return EMe(i,e)}}const Yee="vscode://schemas/workbench-colors";let Qee=Pn.as(JL.JSONContribution);Qee.registerSchema(Yee,_2.getColorSchema());const Nz=new yi(()=>Qee.notifySchemaChanged(Yee),200);_2.onDidChangeSchema(()=>{Nz.isScheduled()||Nz.schedule()});const IMe=z("editor.lineHighlightBackground",{dark:null,light:null,hc:null},v("lineHighlight","Background color for the highlight of line at the cursor position.")),Mz=z("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},v("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),TMe=z("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},v("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),NMe=z("editor.rangeHighlightBorder",{dark:null,light:null,hc:Hs},v("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),MMe=z("editor.symbolHighlightBackground",{dark:g3,light:g3,hc:null},v("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),RMe=z("editor.symbolHighlightBorder",{dark:null,light:null,hc:Hs},v("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),Xee=z("editorCursor.foreground",{dark:"#AEAFAD",light:Q.black,hc:Q.white},v("caret","Color of the editor cursor.")),OMe=z("editorCursor.background",null,v("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),bf=z("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},v("editorWhitespaces","Color of whitespace characters in the editor.")),y2=z("editorIndentGuide.background",{dark:bf,light:bf,hc:bf},v("editorIndentGuides","Color of the editor indentation guides.")),C2=z("editorIndentGuide.activeBackground",{dark:bf,light:bf,hc:bf},v("editorActiveIndentGuide","Color of the active editor indentation guides.")),Jee=z("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:Q.white},v("editorLineNumbers","Color of editor line numbers.")),LI=z("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Hs},v("editorActiveLineNumber","Color of editor active line number"),!1,v("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),PMe=z("editorLineNumber.activeForeground",{dark:LI,light:LI,hc:LI},v("editorActiveLineNumber","Color of editor active line number")),FMe=z("editorRuler.foreground",{dark:"#5A5A5A",light:Q.lightgrey,hc:Q.white},v("editorRuler","Color of the editor rulers."));z("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},v("editorCodeLensForeground","Foreground color of editor CodeLens"));const BMe=z("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},v("editorBracketMatchBackground","Background color behind matching brackets")),VMe=z("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Gi},v("editorBracketMatchBorder","Color for matching brackets boxes")),WMe=z("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},v("editorOverviewRulerBorder","Color of the overview ruler border.")),zMe=z("editorOverviewRuler.background",null,v("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),HMe=z("editorGutter.background",{dark:io,light:io,hc:io},v("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),UMe=z("editorUnnecessaryCode.border",{dark:null,light:null,hc:Q.fromHex("#fff").transparent(.8)},v("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),$Me=z("editorUnnecessaryCode.opacity",{dark:Q.fromHex("#000a"),light:Q.fromHex("#0007"),hc:null},v("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),ete=z("editorGhostText.border",{dark:null,light:null,hc:Q.fromHex("#fff").transparent(.8)},v("editorGhostTextBorder","Border color of ghost text in the editor.")),tte=z("editorGhostText.foreground",{dark:Q.fromHex("#ffffff56"),light:Q.fromHex("#0007"),hc:null},v("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),EI=new Q(new ct(0,122,204,.6));z("editorOverviewRuler.rangeHighlightForeground",{dark:EI,light:EI,hc:EI},v("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const jMe=z("editorOverviewRuler.errorForeground",{dark:new Q(new ct(255,18,18,.7)),light:new Q(new ct(255,18,18,.7)),hc:new Q(new ct(255,50,50,1))},v("overviewRuleError","Overview ruler marker color for errors.")),qMe=z("editorOverviewRuler.warningForeground",{dark:tc,light:tc,hc:w2},v("overviewRuleWarning","Overview ruler marker color for warnings.")),GMe=z("editorOverviewRuler.infoForeground",{dark:Ia,light:Ia,hc:kF},v("overviewRuleInfo","Overview ruler marker color for infos.")),ite=z("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},v("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),nte=z("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},v("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),ste=z("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},v("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),rte=z("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),ote=z("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),ate=z("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),KMe=z("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Q(new ct(255,18,18,.8)),light:new Q(new ct(255,18,18,.8)),hc:new Q(new ct(255,50,50,1))},v("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),ZMe=z("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),YMe=z("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),QMe=z("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),XMe=z("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),JMe=z("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),eRe=z("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),tRe=z("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),iRe=z("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),nRe=z("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),sRe=z("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),rRe=z("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),oRe=z("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},v("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));oi((i,e)=>{const t=i.getColor(io);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(mu);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const s=i.getColor(HMe);s&&e.addRule(`.monaco-editor .margin { background-color: ${s}; }`);const r=i.getColor(TMe);r&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${r}; }`);const o=i.getColor(NMe);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; }`);const a=i.getColor(MMe);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=i.getColor(RMe);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${l}; }`);const h=i.getColor(bf);h&&(e.addRule(`.monaco-editor .mtkw { color: ${h} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${h} !important; }`))});class aRe extends ne{constructor(e){super(),this.textModel=e,this.colorProvider=new lte,this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const s=new Array,r=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of r)s.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return s}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new V(1,1,this.textModel.getLineCount(),1),e,t):[]}}class lte{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}oi((i,e)=>{const t=[ite,nte,ste,rte,ote,ate],n=new lte;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(KMe)}; }`);let s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});var lRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function hRe(){return new xTe}function cRe(i){const e=hRe();return e.acceptChunk(i),e.finish()}function Rz(i,e){return(typeof i=="string"?cRe(i):i).create(e)}let _C=0;const uRe=999,dRe=1e4;class fRe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const B_=()=>{throw new Error("Invalid change accessor")};class Ph{constructor(){this._searchCanceledBrand=void 0}}Ph.INSTANCE=new Ph;function bC(i){return i instanceof Ph?null:i}let oo=class fl extends ne{constructor(e,t,n,s=null,r,o,a){super(),this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new H),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new _Re(d=>this.handleBeforeFireDecorationsChangedEvent(d))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new H),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new H),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new H),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new H),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new H),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new H),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new bRe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new H),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(d=>{this._onDidChangeContentOrInjectedText.fire(d.rawContentChangedEvent)})),_C++,this.id="$model"+_C,this.isForSimpleWidget=t.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Ke.parse("inmemory://model/"+_C):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:h}=Rz(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=h,this._options=fl.resolveOptions(this._buffer,t);const c=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new V(1,1,c,this._buffer.getLineLength(c)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=u>fl.LARGE_FILE_SIZE_THRESHOLD||c>fl.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>fl.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||Ou,this._languageRegistryListener=this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=tJ(_C),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Oz,this._commandManager=new gF(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Hr(this._modeService.languageIdCodec),this._tokens2=new vF(this._modeService.languageIdCodec),this._tokenization=new ITe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new iNe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new aRe(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=uz(e,t.tabSize,t.insertSpaces);return new BS({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new BS({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new wm([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new KD(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=Rz(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:s}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new Oz,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new pf([new DTe],this._versionId,!1,!1),this._createContentChanged2(new V(1,1,r,o),0,s,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new pf([new ETe],this._versionId,!1,!1),this._createContentChanged2(new V(1,1,r,o),0,s,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),h=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=h,r.cachedVersionId=e,r.start=l-a,r.end=h-a,Bu(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=dRe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new BS({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=uz(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let s=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?s+=t:s++;let r="";if(!n){let o=Math.floor(s/t);s=s%t;for(let a=0;a<o;a++)r+="	"}for(let o=0;o<s;o++)r+=" ";return r}static normalizeIndentation(e,t,n){let s=ar(e);return s===-1&&(s=e.length),fl._normalizeIndentationFromWhitespace(e.substring(0,s),t,n)+e.substring(s)}normalizeIndentation(e){return this._assertNotDisposed(),fl.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(JX.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new fRe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let h=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),c=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(h<1)h=1,c=1;else if(h>t)h=t,c=this.getLineMaxColumn(h);else if(c<=1)c=1;else{const u=this.getLineMaxColumn(h);c>=u&&(c=u)}return n===r&&s===o&&a===h&&l===c&&e instanceof V&&!(e instanceof Ge)?e:new V(r,o,h,c)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(kn(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new K(1,1);if(s>o)return new K(o,this.getLineMaxColumn(o));if(r<=1)return new K(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new K(s,a);if(n===1){const l=this._buffer.getLineCharCode(s,r-2);if(kn(l))return new K(s,r-1)}return new K(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof K&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,h=kn(a),c=kn(l);return!h&&!c}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof V&&!(e instanceof Ge)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;{const h=o>1?this._buffer.getLineCharCode(r,o-2):0,c=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=kn(h),d=kn(c);return!u&&!d?new V(r,o,a,l):r===a&&o===l?new V(r,o-1,a,l-1):u&&d?new V(r,o-1,a,l+1):u?new V(r,o-1,a,l):new V(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new V(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=uRe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>V.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,d)=>u.startLineNumber-d.startLineNumber||u.startColumn-d.startColumn);const h=[];h.push(l.reduce((u,d)=>V.areIntersecting(u,d)?u.plusRange(d):(h.push(u),d)));let c;if(!n&&e.indexOf(`
`)<0){const d=new Dd(e,n,s,r).parseSearchRequest();if(!d)return[];c=f=>this.findMatchesLineByLine(f,d,o,a)}else c=u=>gC.findMatches(this,new Dd(e,n,s,r),u,o,a);return h.map(c).reduce((u,d)=>u.concat(d),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const h=new Dd(e,n,s,r).parseSearchRequest();if(!h)return null;const c=this.getLineCount();let u=new V(a.lineNumber,a.column,c,this.getLineMaxColumn(c)),d=this.findMatchesLineByLine(u,h,o,1);return gC.findNextMatch(this,new Dd(e,n,s,r),a,o),d.length>0||(u=new V(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(u,h,o,1),d.length>0)?d[0]:null}return gC.findNextMatch(this,new Dd(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return gC.findPreviousMatch(this,new Dd(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof XA?e:new XA(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=t.map(o=>({range:this.validateRange(o.range),text:o.text})),r=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],h=!1;for(let c=0,u=s.length;c<u;c++){let d=s[c].range,f=d.startLineNumber>l.endLineNumber,g=l.startLineNumber>d.endLineNumber;if(!f&&!g){h=!0;break}}if(!h){r=!1;break}}if(r)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],h=this.getLineMaxColumn(l),c=!0;for(let u=0,d=s.length;u<d;u++){let f=s[u].range,g=s[u].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===h&&f.isEmpty()&&g&&g.length>0&&g.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)===`
`)){c=!1;break}}if(c){const u=new V(l,1,l,h);t.push(new XA(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new V(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new V(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let h=0,c=o.length;h<c;h++){const u=o[h],[d,f,g]=a0(u.text);this._tokens.acceptEdit(u.range,d,f),this._tokens2.acceptEdit(u.range,d,f,g,u.text.length>0?u.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let h=0,c=o.length;h<c;h++){const u=o[h],[d]=a0(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,m=d,b=Math.min(p,m),_=m-p,w=r-l-_+f,y=w,x=w+m,L=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new K(y,1)),this.getOffsetAt(new K(x,this.getLineMaxColumn(x))),0),S=za.fromDecorations(L),k=new Zb(S);for(let D=b;D>=0;D--){const T=f+D,M=w+D;k.takeFromEndWhile($=>$.lineNumber>M);const j=k.takeFromEndWhile($=>$.lineNumber===M);a.push(new yz(T,this.getLineContent(M),j))}if(b<p){const D=f+b;a.push(new kTe(D+1,g))}if(b<m){const D=new Zb(S),T=f+b,M=m-b,j=r-l-M+T+1;let $=[],ie=[];for(let pe=0;pe<M;pe++){let be=j+pe;ie[pe]=this.getLineContent(be),D.takeWhile(ye=>ye.lineNumber<be),$[pe]=D.takeWhile(ye=>ye.lineNumber===be)}a.push(new LTe(T+1,f+m,ie,$))}l+=_}this._emitContentChangedEvent(new pf(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(s=>new yz(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeContentOrInjectedText.fire(new Eee(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,Fz(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)},s=null;try{s=t(n)}catch(r){nt(r)}return n.addDecoration=B_,n.changeDecoration=B_,n.changeDecorationOptions=B_,n.removeDecoration=B_,n.deltaDecorations=B_,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:Pz[n]}])[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(Pz[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1){let r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a);const h=new V(o,1,a,l),c=this._getDecorationsInRange(h,n,s);return c.push(...this._decorationProvider.getDecorationsInRange(h,n,s)),c}getDecorationsInRange(e,t=0,n=!1){let s=this.validateRange(e);const r=this._getDecorationsInRange(s,t,n);return r.push(...this._decorationProvider.getDecorationsInRange(s,t,n)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return za.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const s=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}s!==r?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const s=this.getVersionId(),r=t.length;let o=0;const a=n.length;let l=0,h=new Array(a);for(;o<r||l<a;){let c=null;if(o<r){do c=this._decorations[t[o++]];while(!c&&o<r);if(c){if(c.options.after){const u=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(c.options.before){const u=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(c),this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(l<a){if(!c){const m=++this._lastDecorationId,b=`${this._instanceId};${m}`;c=new xee(b,0,0),this._decorations[b]=c}const u=n[l],d=this._validateRangeRelaxedNoAllocations(u.range),f=Fz(u.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),p=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);c.ownerId=e,c.reset(s,g,p,d),c.setOptions(f),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(c),h[l]=c.id,l++}else c&&delete this._decorations[c.id]}return h}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,h=!1;for(let c=0,u=o.tokens.length;c<u;c++){const d=o.startLineNumber+c;h?(this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[c],!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[c],!0)&&(h=!0,a=d,l=d)}h&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new K(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),s=this._getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=fl._findLanguageBoundaries(s,r),l=cD(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[h,c]=fl._findLanguageBoundaries(s,r-1),u=cD(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(h,c),h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),s=this.validatePosition(t),r=this._getLineTokens(s.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(s.column-1)),a=this.getLanguageConfiguration(o).brackets;if(!a)return null;let l=a.textIsBracket[n];return l?bC(this._findMatchingBracketUp(l,s,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let h=s-1;h>=0;h--){const c=t.getEndOffset(h);if(c<=a)break;if(dl(t.getStandardTokenType(h))||t.getLanguageId(h)!==o){a=c;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let h=s+1;h<r;h++){const c=t.getStartOffset(h);if(c>=l)break;if(dl(t.getStandardTokenType(h))||t.getLanguageId(h)!==o){l=c;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),s=this._buffer.getLineContent(t),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(o&&!dl(n.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,r),h=null;for(;;){const c=wo.findNextBracketInRange(o.forwardRegex,t,s,a,l);if(!c)break;if(c.startColumn<=e.column&&e.column<=c.endColumn){const u=s.substring(c.startColumn-1,c.endColumn-1).toLowerCase(),d=this._matchFoundBracket(c,o.textIsBracket[u],o.textIsOpenBracket[u],null);if(d){if(d instanceof Ph)return null;h=d}}a=c.endColumn-1}if(h)return h}if(r>0&&n.getStartOffset(r)===e.column-1){const a=r-1,l=this.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(l&&!dl(n.getStandardTokenType(a))){let{searchStartOffset:h,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,l,a);const u=wo.findPrevBracketInRange(l.reversedRegex,t,s,h,c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const d=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,l.textIsBracket[d],l.textIsOpenBracket[d],null);if(f)return f instanceof Ph?null:f}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof Ph?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(h,c,u,d)=>{for(;;){if(n&&++a%100===0&&!n())return Ph.INSTANCE;const f=wo.findPrevBracketInRange(r,h,c,u,d);if(!f)break;const g=c.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;d=f.startColumn-1}return null};for(let h=t.lineNumber;h>=1;h--){const c=this._getLineTokens(h),u=c.getCount(),d=this._buffer.getLineContent(h);let f=u-1,g=d.length,p=d.length;h===t.lineNumber&&(f=c.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let m=!0;for(;f>=0;f--){const b=c.getLanguageId(f)===s&&!dl(c.getStandardTokenType(f));if(b)m?g=c.getStartOffset(f):(g=c.getStartOffset(f),p=c.getEndOffset(f));else if(m&&g!==p){const _=l(h,d,g,p);if(_)return _}m=b}if(m&&g!==p){const b=l(h,d,g,p);if(b)return b}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(c,u,d,f)=>{for(;;){if(n&&++a%100===0&&!n())return Ph.INSTANCE;const g=wo.findNextBracketInRange(r,c,u,d,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.endColumn-1}return null},h=this.getLineCount();for(let c=t.lineNumber;c<=h;c++){const u=this._getLineTokens(c),d=u.getCount(),f=this._buffer.getLineContent(c);let g=0,p=0,m=0;c===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,m=t.column-1);let b=!0;for(;g<d;g++){const _=u.getLanguageId(g)===s&&!dl(u.getStandardTokenType(g));if(_)b||(p=u.getStartOffset(g)),m=u.getEndOffset(g);else if(b&&p!==m){const w=l(c,f,p,m);if(w)return w}b=_}if(b&&p!==m){const _=l(c,f,p,m);if(_)return _}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=null,s=null;for(let r=t.lineNumber;r>=1;r--){const o=this._getLineTokens(r),a=o.getCount(),l=this._buffer.getLineContent(r);let h=a-1,c=l.length,u=l.length;if(r===t.lineNumber){h=o.findTokenIndexAtOffset(t.column-1),c=t.column-1,u=t.column-1;const f=o.getLanguageId(h);n!==f&&(n=f,s=this.getLanguageConfiguration(n).brackets)}let d=!0;for(;h>=0;h--){const f=o.getLanguageId(h);if(n!==f){if(s&&d&&c!==u){const p=wo.findPrevBracketInRange(s.reversedRegex,r,l,c,u);if(p)return this._toFoundBracket(s,p);d=!1}n=f,s=this.getLanguageConfiguration(n).brackets}const g=!!s&&!dl(o.getStandardTokenType(h));if(g)d?c=o.getStartOffset(h):(c=o.getStartOffset(h),u=o.getEndOffset(h));else if(s&&d&&c!==u){const p=wo.findPrevBracketInRange(s.reversedRegex,r,l,c,u);if(p)return this._toFoundBracket(s,p)}d=g}if(s&&d&&c!==u){const f=wo.findPrevBracketInRange(s.reversedRegex,r,l,c,u);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let s=null,r=null;for(let o=t.lineNumber;o<=n;o++){const a=this._getLineTokens(o),l=a.getCount(),h=this._buffer.getLineContent(o);let c=0,u=0,d=0;if(o===t.lineNumber){c=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,d=t.column-1;const g=a.getLanguageId(c);s!==g&&(s=g,r=this.getLanguageConfiguration(s).brackets)}let f=!0;for(;c<l;c++){const g=a.getLanguageId(c);if(s!==g){if(r&&f&&u!==d){const m=wo.findNextBracketInRange(r.forwardRegex,o,h,u,d);if(m)return this._toFoundBracket(r,m);f=!1}s=g,r=this.getLanguageConfiguration(s).brackets}const p=!!r&&!dl(a.getStandardTokenType(c));if(p)f||(u=a.getStartOffset(c)),d=a.getEndOffset(c);else if(r&&f&&u!==d){const m=wo.findNextBracketInRange(r.forwardRegex,o,h,u,d);if(m)return this._toFoundBracket(r,m)}f=p}if(r&&f&&u!==d){const g=wo.findNextBracketInRange(r.forwardRegex,o,h,u,d);if(g)return this._toFoundBracket(r,g)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const f=Date.now();n=()=>Date.now()-f<=t}const s=this.validatePosition(e),r=this.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){let p=[];for(let m=0,b=g?g.brackets.length:0;m<b;m++)p[m]=0;o.set(f,p)}a=o.get(f)};let h=0;const c=(f,g,p,m,b)=>{for(;;){if(n&&++h%100===0&&!n())return Ph.INSTANCE;const _=wo.findNextBracketInRange(f.forwardRegex,g,p,m,b);if(!_)break;const w=p.substring(_.startColumn-1,_.endColumn-1).toLowerCase(),y=f.textIsBracket[w];if(y&&(y.isOpen(w)?a[y.index]++:y.isClose(w)&&a[y.index]--,a[y.index]===-1))return this._matchFoundBracket(_,y,!1,n);m=_.endColumn-1}return null};let u=null,d=null;for(let f=s.lineNumber;f<=r;f++){const g=this._getLineTokens(f),p=g.getCount(),m=this._buffer.getLineContent(f);let b=0,_=0,w=0;if(f===s.lineNumber){b=g.findTokenIndexAtOffset(s.column-1),_=s.column-1,w=s.column-1;const x=g.getLanguageId(b);u!==x&&(u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d))}let y=!0;for(;b<p;b++){const x=g.getLanguageId(b);if(u!==x){if(d&&y&&_!==w){const S=c(d,f,m,_,w);if(S)return bC(S);y=!1}u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d)}const L=!!d&&!dl(g.getStandardTokenType(b));if(L)y||(_=g.getStartOffset(b)),w=g.getEndOffset(b);else if(d&&y&&_!==w){const S=c(d,f,m,_,w);if(S)return bC(S)}y=L}if(d&&y&&_!==w){const x=c(d,f,m,_,w);if(x)return bC(x)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let s=e.textIsBracket[n];return s?{range:t,open:s.open,close:s.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,s=0,r=e.length;for(;s<r;){let o=e.charCodeAt(s);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;s++}return s===r?-1:n}_computeIndentLevel(e){return fl.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const s=this.getLineCount();if(e<1||e>s)throw new Error("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,h=-2,c=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let k=S-2;k>=0;k--){let D=this._computeIndentLevel(k);if(D>=0){a=k,l=D;break}}}if(h===-2){h=-1,c=-1;for(let k=S;k<s;k++){let D=this._computeIndentLevel(k);if(D>=0){h=k,c=D;break}}}};let d=-2,f=-1,g=-2,p=-1;const m=S=>{if(d===-2){d=-1,f=-1;for(let k=S-2;k>=0;k--){let D=this._computeIndentLevel(k);if(D>=0){d=k,f=D;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,p=-1;for(let k=S;k<s;k++){let D=this._computeIndentLevel(k);if(D>=0){g=k,p=D;break}}}};let b=0,_=!0,w=0,y=!0,x=0,L=0;for(let S=0;_||y;S++){const k=e-S,D=e+S;S>1&&(k<1||k<t)&&(_=!1),S>1&&(D>s||D>n)&&(y=!1),S>5e4&&(_=!1,y=!1);let T=-1;if(_){const j=this._computeIndentLevel(k-1);j>=0?(h=k-1,c=j,T=Math.ceil(j/this._options.indentSize)):(u(k),T=this._getIndentLevelForWhitespaceLine(o,l,c))}let M=-1;if(y){const j=this._computeIndentLevel(D-1);j>=0?(d=D-1,f=j,M=Math.ceil(j/this._options.indentSize)):(m(D),M=this._getIndentLevelForWhitespaceLine(o,f,p))}if(S===0){L=T;continue}if(S===1){if(D<=s&&M>=0&&L+1===M){_=!1,b=D,w=D,x=M;continue}if(k>=1&&T>=0&&T-1===L){y=!1,b=k,w=k,x=T;continue}if(b=e,w=e,x=L,x===0)return{startLineNumber:b,endLineNumber:w,indent:x}}_&&(T>=x?b=k:_=!1),y&&(M>=x?w=D:y=!1)}return{startLineNumber:b,endLineNumber:w,indent:x}}getLinesBracketGuides(e,t,n,s){var r,o,a,l,h;const c=[],u=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new V(e,1,t,this.getLineMaxColumn(t)));let d;if(n&&u.length>0){const b=e<=n.lineNumber&&n.lineNumber<=t?u.filter(_=>_.range.containsPosition(n)):this._bracketPairColorizer.getBracketPairsInRange(V.fromPositions(n));d=(r=nAe(b,_=>_.range.startLineNumber!==_.range.endLineNumber))===null||r===void 0?void 0:r.range}const f=new Zb(u),g=new Array,p=new Array,m=new hte;for(let b=e;b<=t;b++){let _=new Array;p.length>0&&(_=_.concat(p),p.length=0),c.push(_);for(const y of f.takeWhile(x=>x.openingBracketRange.startLineNumber<=b)||[]){if(y.range.startLineNumber===y.range.endLineNumber)continue;const x=Math.min(this.getVisibleColumnFromPosition(y.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=y.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:y.range.getEndPosition()),y.minVisibleColumnIndentation+1);let L=!1;y.closingBracketRange&&ar(this.getLineContent(y.closingBracketRange.startLineNumber))<y.closingBracketRange.startColumn-1&&(L=!0);const S=y.openingBracketRange.getStartPosition(),k=(h=(l=y.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&h!==void 0?h:y.range.getEndPosition();y.closingBracketRange===void 0?g[y.nestingLevel]=null:g[y.nestingLevel]={nestingLevel:y.nestingLevel,guideVisibleColumn:x,start:S,visibleStartColumn:this.getVisibleColumnFromPosition(S),end:k,visibleEndColumn:this.getVisibleColumnFromPosition(k),bracketPair:y,renderHorizontalEndLineAtTheBottom:L}}for(const y of g){if(!y)continue;const x=d&&y.bracketPair.range.equalsRange(d),L=m.getInlineClassNameOfLevel(y.nestingLevel)+(s.highlightActive&&x?" "+m.activeClassName:"");(x&&s.horizontalGuides!==gf.Disabled||s.includeInactive&&s.horizontalGuides===gf.Enabled)&&(y.start.lineNumber===b&&y.guideVisibleColumn<y.visibleStartColumn&&_.push(new Bp(y.guideVisibleColumn,L,new FR(!1,y.start.column))),y.end.lineNumber===b+1&&y.guideVisibleColumn<y.visibleEndColumn&&p.push(new Bp(y.guideVisibleColumn,L,new FR(!y.renderHorizontalEndLineAtTheBottom,y.end.column))))}let w=Number.MAX_SAFE_INTEGER;for(let y=g.length-1;y>=0;y--){const x=g[y];if(!x)continue;const L=s.highlightActive&&d&&x.bracketPair.range.equalsRange(d),S=m.getInlineClassNameOfLevel(x.nestingLevel)+(L?" "+m.activeClassName:"");(L||s.includeInactive)&&x.renderHorizontalEndLineAtTheBottom&&x.end.lineNumber===b+1&&p.push(new Bp(x.guideVisibleColumn,S,null)),!(x.end.lineNumber<=b||x.start.lineNumber>=b)&&(x.guideVisibleColumn>=w&&!L||(w=x.guideVisibleColumn,(L||s.includeInactive)&&_.push(new Bp(x.guideVisibleColumn,S,null))))}_.sort((y,x)=>y.visibleColumn-x.visibleColumn)}return c}getVisibleColumnFromPosition(e){return Rt.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,r=!!(s&&s.offSide);let o=new Array(t-e+1),a=-2,l=-1,h=-2,c=-1;for(let u=e;u<=t;u++){let d=u-e;const f=this._computeIndentLevel(u-1);if(f>=0){a=u-1,l=f,o[d]=Math.ceil(f/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let g=u-2;g>=0;g--){let p=this._computeIndentLevel(g);if(p>=0){a=g,l=p;break}}}if(h!==-1&&(h===-2||h<u-1)){h=-1,c=-1;for(let g=u;g<n;g++){let p=this._computeIndentLevel(g);if(p>=0){h=g,c=p;break}}}o[d]=this._getIndentLevelForWhitespaceLine(r,l,c)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return gRe(this.getLineContent(e))+1}};oo.MODEL_SYNC_LIMIT=50*1024*1024;oo.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;oo.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;oo.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:is.tabSize,indentSize:is.indentSize,insertSpaces:is.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:is.trimAutoWhitespace,largeFileOptimizations:is.largeFileOptimizations,bracketPairColorizationOptions:is.bracketPairColorizationOptions};oo=lRe([AI(4,dy),AI(5,Gs),AI(6,hy)],oo);function gRe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class hte{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function II(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function TI(i){return!!i.options.after||!!i.options.before}class Oz{constructor(){this._decorationsTree0=new _I,this._decorationsTree1=new _I,this._injectedTextDecorationsTree=new _I}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,n,s,r,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,s,r){const o=this._decorationsTree0.intervalSearch(e,t,n,s,r),a=this._decorationsTree1.intervalSearch(e,t,n,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,s){const r=e.getVersionId(),o=this._search(t,n,s,r);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,s){if(n)return this._decorationsTree1.search(e,t,s);{const r=this._decorationsTree0.search(e,t,s),o=this._decorationsTree1.search(e,t,s),a=this._injectedTextDecorationsTree.search(e,t,s);return r.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){TI(e)?this._injectedTextDecorationsTree.insert(e):II(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){TI(e)?this._injectedTextDecorationsTree.delete(e):II(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){TI(e)?this._injectedTextDecorationsTree.resolveNode(e,t):II(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function kc(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class cte{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class pRe extends cte{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Gl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class mRe extends cte{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Q.fromHex(e):t.getColor(e.id)}}class k1{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof k1?e:new k1(e)}}class _t{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?kc(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new pRe(e.overviewRuler):null,this.minimap=e.minimap?new mRe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?kc(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?kc(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?kc(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?kc(e.marginClassName):null,this.inlineClassName=e.inlineClassName?kc(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?kc(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?kc(e.afterContentClassName):null,this.after=e.after?k1.from(e.after):null,this.before=e.before?k1.from(e.before):null}static register(e){return new _t(e)}static createDynamic(e){return new _t(e)}}_t.EMPTY=_t.register({description:"empty"});const Pz=[_t.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),_t.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),_t.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),_t.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Fz(i){return i instanceof _t?i:_t.createDynamic(i)}class _Re extends ne{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new H),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class bRe extends ne{constructor(){super(),this._fastEmitter=this._register(new H),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new H),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const vRe=()=>!0,Bz=()=>!1,wRe=i=>i===" "||i==="	";class Eo{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(129);this.readOnly=s.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(103),this.lineHeight=s.get(58),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(114),this.wordSeparators=s.get(115),this.emptySelectionClipboard=s.get(32),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(68),this.multiCursorPaste=s.get(70),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Eo._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Eo._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=zi.getAutoClosingPairs(e);let o=Eo._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Eo._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return oo.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return zi.getElectricCharacters(e)}catch(t){return nt(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return wRe;case"languageDefined":return Eo._getLanguageDefinedShouldAutoClose(e);case"always":return vRe;case"never":return Bz}}static _getLanguageDefinedShouldAutoClose(e){try{const t=zi.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return nt(t),Bz}}static _getSurroundingPairs(e){try{return zi.getSurroundingPairs(e)}catch(t){return nt(t),null}}}class xn{constructor(e,t,n,s){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=s,this.selection=xn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new xn(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new K(t,n),s):new xn(new V(t,n,t,n),s,new K(t,n),s)}static _computeSelection(e,t){let n,s,r,o;return e.isEmpty()?(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,s=e.endColumn,r=t.lineNumber,o=t.column):(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column),new Ge(n,s,r,o)}}class Vz{constructor(e,t,n,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}class yRe{constructor(e){this.modelState=e,this.viewState=null}}class CRe{constructor(e){this.modelState=null,this.viewState=e}}class ot{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new yRe(e)}static fromViewState(e){return new CRe(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,n=e.selectionStartColumn,s=e.positionLineNumber,r=e.positionColumn,o=new xn(new V(t,n,t,n),0,new K(s,r),0);return ot.fromModelState(o)}static fromModelSelections(e){let t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Js{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function kp(i){return i==="'"||i==='"'||i==="`"}class L1{static whitespaceVisibleColumn(e,t,n){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%n===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=Rt.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const r=e.length,[o,a,l]=L1.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let h;switch(s){case 0:h=!0;break;case 1:h=!1;break;case 2:if(l%n===0)return t;h=l%n<=n/2;break}if(h){if(o===-1)return-1;let d=a;for(let f=o;f<r;++f){if(d===a+n)return o;switch(e.charCodeAt(f)){case 32:d+=1;break;case 9:d=Rt.nextRenderTabStop(d,n);break;default:return-1}}return d===a+n?o:-1}const c=Rt.nextRenderTabStop(l,n);let u=l;for(let d=t;d<r;d++){if(u===c)return d;switch(e.charCodeAt(d)){case 32:u+=1;break;case 9:u=Rt.nextRenderTabStop(u,n);break;default:return-1}}return u===c?r:-1}}class Wc{constructor(e=null){this.hitTarget=e,this.type=0}}class _3{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var Nd;(function(i){function e(t,n,s){const r=t.getPositionFromDOMInfo(n,s);return r?new _3(r,n,null):new Wc(n)}i.createFromDOMInfo=e})(Nd||(Nd={}));class SRe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class ua{constructor(e,t,n=0,s=null,r=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,!r&&s&&(r=new V(s.lineNumber,s.column,s.lineNumber,s.column)),this.range=r,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return ua.toString(this)}}class bo{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class c0{constructor(e,t,n){this.model=e.model;const s=e.configuration.options;this.layoutInfo=s.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(58),this.stickyTabStops=s.get(103),this.typicalHalfwidthCharacterWidth=s.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return c0.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,r=e.model.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==r&&(l=new K(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new K(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.model.getLineCount(),r=this._context.model.getLineMaxColumn(s);return{range:new V(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new V(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return c0._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class xRe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Vn._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class AF extends xRe{constructor(e,t,n,s){super(e,t,n),this._ctx=e,s?(this.target=s,this.targetPath=Zl.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,s=null){let r=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(r=Rt.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new ua(this.target,e,r,t,n,s)}withTarget(e){return new AF(this._ctx,this.editorPos,this.pos,e)}}const Wz={isAfterLines:!0};function NI(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Vn{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Zl.collect(t,this._viewHelper.viewDomNode);return!!(bo.isChildOfContentWidgets(n)||bo.isChildOfOverflowingContentWidgets(n)||bo.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,s){const r=new c0(this._context,this._viewHelper,e),o=new AF(r,t,n,s);try{return Vn._createMouseTarget(r,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=Vn._doHitTest(e,t);return o.type===1?Vn.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const s=t;let r=null;return r=r||Vn._hitTestContentWidget(e,s),r=r||Vn._hitTestOverlayWidget(e,s),r=r||Vn._hitTestMinimap(e,s),r=r||Vn._hitTestScrollbarSlider(e,s),r=r||Vn._hitTestViewZone(e,s),r=r||Vn._hitTestMargin(e,s),r=r||Vn._hitTestViewCursor(e,s),r=r||Vn._hitTestTextArea(e,s),r=r||Vn._hitTestViewLines(e,s,n),r=r||Vn._hitTestScrollbar(e,s),r||t.fulfill(0)}static _hitTestContentWidget(e,t){if(bo.isChildOfContentWidgets(t.targetPath)||bo.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(bo.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of n){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?8:5;return t.fulfill(s,n.position,null,n)}return null}static _hitTestTextArea(e,t){return bo.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let r=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,s,n.range,o):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,s,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,s,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!bo.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new K(1,1),null,Wz);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return t.fulfill(7,new K(r,o),null,Wz)}if(n){if(bo.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(r)===0){const a=e.getLineWidth(r),l=NI(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new K(r,1),null,l)}const o=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=o){const a=NI(t.mouseContentHorizontalOffset-o),l=new K(r,e.model.getLineMaxColumn(r));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const s=Vn._doHitTest(e,t);return s.type===1?Vn.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}static _hitTestMinimap(e,t){if(bo.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new K(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(bo.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(s);return t.fulfill(11,new K(s,r))}}return null}static _hitTestScrollbar(e,t){if(bo.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new K(n,s))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,s=n.get(129),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-s.contentLeft;return Vn._getMouseColumn(r,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const m=NI(t.mouseContentHorizontalOffset-l);return t.fulfill(7,s,null,m)}const h=e.visibleRangeForPosition(o,a);if(!h)return t.fulfill(0,s);const c=h.left;if(t.mouseContentHorizontalOffset===c)return t.fulfill(6,s,null,{mightBeForeignElement:!!r});const u=[];if(u.push({offset:h.left,column:a}),a>1){const m=e.visibleRangeForPosition(o,a-1);m&&u.push({offset:m.left,column:a-1})}const d=e.model.getLineMaxColumn(o);if(a<d){const m=e.visibleRangeForPosition(o,a+1);m&&u.push({offset:m.left,column:a+1})}u.sort((m,b)=>m.offset-b.offset);const f=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;for(let m=1;m<u.length;m++){const b=u[m-1],_=u[m];if(b.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=_.offset){const w=new V(o,b.column,o,_.column);return t.fulfill(6,s,w,{mightBeForeignElement:!p||!!r})}}return t.fulfill(6,s,null,{mightBeForeignElement:!p||!!r})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(r-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new fF(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=J0(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=DRe(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=document.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Wc;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===kl.CLASS_NAME?Nd.createFromDOMInfo(e,o,s.startOffset):new Wc(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===kl.CLASS_NAME?Nd.createFromDOMInfo(e,r,r.textContent.length):new Wc(r)}return new Wc}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===kl.CLASS_NAME?Nd.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Wc(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===kl.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return Nd.createFromDOMInfo(e,l,0)}else if(a===kl.CLASS_NAME)return Nd.createFromDOMInfo(e,n.offsetNode,0)}return new Wc(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.getTextModelOptions(),r=L1.atomicPosition(n,e.column-1,s,2);return r!==-1?new K(e.lineNumber,r+1):e}static _doHitTest(e,t){let n=new Wc;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const s=e.model.getInjectedTextAt(n.position),r=e.model.normalizePosition(n.position,2);(s||!r.equals(n.position))&&(n=new _3(r,n.spanNode,s))}return n.type===1&&e.stickyTabStops&&(n=new _3(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function DRe(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=window.getComputedStyle(s,null).getPropertyValue("font"),a=s.innerText;let l=r.left,h=0,c;if(e>r.left+r.width)h=a.length;else{const u=Jd.getInstance();for(let d=0;d<a.length+1;d++){if(c=u.getCharWidth(a.charAt(d),o)/2,l+=c,e<l){h=d;break}l+=c}}n.setStart(s.firstChild,h),n.setEnd(s.firstChild,h)}return n}class Jd{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Jd._INSTANCE||(Jd._INSTANCE=new Jd),Jd._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[n]=o,o}}Jd._INSTANCE=null;function QD(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class Yf extends uy{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Vn(this._context,n),this._mouseDownOperation=this._register(new kRe(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;const s=new OIe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),QD(this.mouseTargetFactory),Yf.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const r=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new Ym(o);if(vt?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const h=yD.getZoomLevel(),c=a.deltaY>0?1:-1;yD.setZoomLevel(h+c),a.preventDefault(),a.stopPropagation()}};this._register(oe(this.viewHelper.viewDomNode,Oe.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){const t=this._context.configuration.options.get(129).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const s=new bee(e,t).toPageCoordinates(),r=vee(this.viewHelper.viewDomNode);return s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=J0(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,s=t.type===2||t.type===3||t.type===4,r=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let h=e.leftButton||e.middleButton;vt&&e.leftButton&&e.ctrlKey&&(h=!1);const c=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(h&&(n||r&&o))c(),this._mouseDownOperation.start(t.type,e);else if(s)e.preventDefault();else if(a){const u=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(c(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(c(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}Yf.MOUSE_MOVE_MINIMUM_TIME=100;class kRe extends ne{constructor(e,t,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new FIe(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new js),this._mouseState=new S2,this._currentSelection=new Ge(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(80)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,QD(null),r=>this._onMouseDownThenMove(r),r=>{const o=this._findMousePosition(this._lastMouseEvent,!0);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,QD(null),r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(s.getCurrentScrollTop()-(t.y-e.posy),0),l=c0.getZoneAtCoord(this._context,a);if(l){const c=this._helpPositionJumpOverViewZone(l);if(c)return new ua(null,13,r,c)}const h=s.getLineNumberAtVerticalOffset(a);return new ua(null,13,r,new K(h,1))}if(e.posy>t.y+t.height){const a=s.getCurrentScrollTop()+(e.posy-t.y),l=c0.getZoneAtCoord(this._context,a);if(l){const c=this._helpPositionJumpOverViewZone(l);if(c)return new ua(null,13,r,c)}const h=s.getLineNumberAtVerticalOffset(a);return new ua(null,13,r,new K(h,n.getLineMaxColumn(h)))}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new ua(null,13,r,new K(o,1)):e.posx>t.x+t.width?new ua(null,13,r,new K(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return new ua(s.element,s.type,s.mouseColumn,o,null,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new K(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class S2{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>S2.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}S2.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Io;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})(Io||(Io={}));let vf=[],IF=[],XD=[];function vC(i,e=!1){const t=LRe(i);vf.push(t),t.userConfigured?XD.push(t):IF.push(t),e&&!t.userConfigured&&vf.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function LRe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?hJ(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(ln.sep)>=0:!1}}function ERe(i){i?(vf=vf.filter(e=>!e.userConfigured),XD=[]):(vf=[],IF=[],XD=[])}function ARe(i,e){let t;if(i)switch(i.scheme){case dt.file:t=i.fsPath;break;case dt.data:t=Mu.parseMetaData(i).get(Mu.META_DATA_LABEL);break;default:t=i.path}if(!t)return[Io.unknown];t=t.toLowerCase();const n=uf(t),s=zz(t,n,XD);if(s)return[s,Io.text];const r=zz(t,n,IF);if(r)return[r,Io.text];if(e){const o=IRe(e);if(o)return[o,Io.text]}return[Io.unknown]}function zz(i,e,t){var n;let s=null,r=null,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const h=l.filepatternOnPath?i:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,h)&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}return s?s.mime:r?r.mime:o?o.mime:null}function IRe(i){if(P5(i)&&(i=i.substr(1)),i.length>0)for(let e=vf.length-1;e>=0;e--){const t=vf[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class mn{constructor(e,t,n,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=s,this.selectionEndPosition=r}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new mn(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new mn(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const s=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,s,-1)}if(e>=this.selectionEnd){const s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,s,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,n*t.length,s]}static selectedText(e){return new mn(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let s=e.value,r=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,h=t.selectionEnd;const c=s.substring(o),u=a.substring(h),d=AR(c,u);a=a.substring(0,a.length-d),s=s.substring(0,s.length-d);const f=s.substring(0,r),g=a.substring(0,l),p=u1(f,g);if(a=a.substring(p),s=s.substring(p),l-=p,r-=p,h-=p,o-=p,n&&l===h&&s.length>0){let b=null;if(l===a.length?a.startsWith(s)&&(b=a.substring(s.length)):a.endsWith(s)&&(b=a.substring(0,a.length-s.length)),b!==null&&b.length>0&&(/\uFE0F/.test(b)||PLe(b)))return{text:b,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===h){if(s===a&&r===0&&o===s.length&&l===a.length&&a.indexOf(`
`)===-1&&BLe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const b=f.length-p;return{text:a,replacePrevCharCnt:b,replaceNextCharCnt:0,positionDelta:0}}const m=o-r;return{text:a,replacePrevCharCnt:m,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(u1(e.value,t.value),e.selectionEnd),s=Math.min(AR(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-s),o=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}}mn.EMPTY=new mn("",0,0,null,null);class Hp{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,r=n+t;return new V(s,1,r+1,1)}static fromEditorSelection(e,t,n,s,r){const o=Hp._getPageOfLine(n.startLineNumber,s),a=Hp._getRangeForPage(o,s),l=Hp._getPageOfLine(n.endLineNumber,s),h=Hp._getRangeForPage(l,s),c=a.intersectRanges(new V(1,1,n.startLineNumber,n.startColumn));let u=t.getValueInRange(c,1);const d=t.getLineCount(),f=t.getLineMaxColumn(d),g=h.intersectRanges(new V(n.endLineNumber,n.endColumn,d,f));let p=t.getValueInRange(g,1),m;if(o===l||o+1===l)m=t.getValueInRange(n,1);else{const b=a.intersectRanges(n),_=h.intersectRanges(n);m=t.getValueInRange(b,1)+String.fromCharCode(8230)+t.getValueInRange(_,1)}return r&&(u.length>500&&(u=u.substring(u.length-500,u.length)),p.length>500&&(p=p.substring(0,500)),m.length>2*500&&(m=m.substring(0,500)+String.fromCharCode(8230)+m.substring(m.length-500,m.length))),new mn(u+m+p,u.length,u.length+m.length,new K(n.startLineNumber,n.startColumn),new K(n.endLineNumber,n.endColumn))}}var JD;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(JD||(JD={}));class ek{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}ek.INSTANCE=new ek;class TRe extends ne{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new H),this.onFocus=this._onFocus.event,this._onBlur=this._register(new H),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new H),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new H),this.onCut=this._onCut.event,this._onPaste=this._register(new H),this.onPaste=this._onPaste.event,this._onType=this._register(new H),this.onType=this._onType.event,this._onCompositionStart=this._register(new H),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new H),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new H),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new H),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new NRe(t)),this._asyncTriggerCut=this._register(new yi(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new yi(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=mn.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let n=null;this._register(cn(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),n=a,this._onKeyDown.fire(a)})),this._register(cn(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(oe(t.domNode,"compositionstart",a=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,vt&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(n&&n.equals(109)&&(n.code==="ArrowRight"||n.code==="ArrowLeft")||Vs)){this._textAreaState=new mn(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new K(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(ub){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",mn.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));const s=a=>{const l=this._textAreaState,h=mn.readFromTextArea(this._textArea);return[h,mn.deduceInput(l,h,a)]},r=()=>{const a=this._textAreaState,l=mn.readFromTextArea(this._textArea);return[l,mn.deduceAndroidCompositionInput(a,l)]},o=a=>{const l=this._textAreaState,h=mn.selectedText(a),c={text:h.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[h,c]};this._register(oe(t.domNode,"compositionupdate",a=>{if(ub){const[c,u]=r();this._textAreaState=c,this._onType.fire(u),this._onCompositionUpdate.fire(a);return}const[l,h]=o(a.data||"");this._textAreaState=l,this._onType.fire(h),this._onCompositionUpdate.fire(a)})),this._register(oe(t.domNode,"compositionend",a=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,ub){const[c,u]=r();this._textAreaState=c,this._onType.fire(u),this._onCompositionEnd.fire();return}const[l,h]=o(a.data||"");this._textAreaState=l,this._onType.fire(h),(pD||Vs)&&(this._textAreaState=mn.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(oe(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[a,l]=s(vt);l.replacePrevCharCnt===0&&l.text.length===1&&kn(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(oe(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(oe(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(oe(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),V_.canUseTextData(a)){const[l,h]=V_.getTextData(a);l!==""&&this._firePaste(l,h)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",mn.EMPTY),this._nextCommand=1})),this._register(oe(t.domNode,"focus",()=>{const a=this._hasFocus;this._setHasFocus(!0),$o&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(oe(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(oe(t.domNode,JD.Tap,()=>{ub&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return oe(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!pD)return;const n=Date.now(),s=n-e;if(e=n,s<5)return;const r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const h=this._textAreaState.deduceEditorPosition(a),c=this._host.deduceModelPosition(h[0],h[1],h[2]),u=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ge(c.lineNumber,c.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=J0(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):D5(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(V_.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(ek.INSTANCE.set(Vs?t.text.replace(/\r\n/g,`
`):t.text,n),!V_.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",mn.selectedText(t.text));return}V_.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=ek.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class V_{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(Io.text);let n=null;const s=e.clipboardData.getData("vscode-editor-data");if(typeof s=="string")try{n=JSON.parse(s),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,s){if(e.clipboardData){e.clipboardData.setData(Io.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(s)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class NRe extends ne{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const n=this._actual.domNode;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,n){const s=this._actual.domNode;let r=null;const o=J0(s);o?r=o.activeElement:r=document.activeElement;const a=r===s,l=s.selectionStart,h=s.selectionEnd;if(a&&l===t&&h===n){Vs&&window.parent!==window&&s.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),Vs&&window.parent!==window&&s.focus();return}try{const c=yLe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),CLe(s,c)}catch{}}}class MRe extends Yf{constructor(e,t,n){super(e,t,n),this._register(Mt.addTarget(this.viewHelper.linesContentDomNode)),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Tap,r=>this.onTap(r))),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Change,r=>this.onChange(r))),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Contextmenu,r=>this._onContextMenu(new Zf(r,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(oe(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new PIe(this.viewHelper.viewDomNode);this._register(s.onPointerMoveThrottled(this.viewHelper.viewDomNode,r=>this._onMouseMove(r),QD(this.mouseTargetFactory),Yf.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Zf(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class RRe extends Yf{constructor(e,t,n){super(e,t,n),this._register(Mt.addTarget(this.viewHelper.linesContentDomNode)),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Tap,s=>this.onTap(s))),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Change,s=>this.onChange(s))),this._register(oe(this.viewHelper.linesContentDomNode,Yt.Contextmenu,s=>this._onContextMenu(new Zf(s,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Zf(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(JD.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class ORe extends ne{constructor(e,t,n){super(),Nu&&UL.pointerEvents?this.handler=this._register(new MRe(e,t,n)):window.TouchEvent?this.handler=this._register(new RRe(e,t,n)):this.handler=this._register(new Yf(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class a_ extends uy{}class u0 extends a_{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new K(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(129);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new K(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Ws?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r='<div class="'+u0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=n;l<=s;l++){const h=l-n;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[h]="";continue}const c=this._getLineRenderLineNumber(l);c?l===this._activeLineNumber?a[h]='<div class="active-line-number '+u0.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+c+"</div>":a[h]=r+c+"</div>":a[h]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}u0.CLASS_NAME="line-numbers";oi((i,e)=>{const t=i.getColor(Jee);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(PMe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Qf extends co{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=St(document.createElement("div")),this._domNode.setClassName(Qf.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=St(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Qf.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Qf.CLASS_NAME="glyph-margin";Qf.OUTER_CLASS_NAME="margin";const wf="monaco-mouse-cursor-text";class TF{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new TF(this.top,this.left,e)}}const W_=Vs;class PRe extends co{constructor(e,t,n){super(e),this._primaryCursorPosition=new K(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,r=s.get(129);this._setAccessibilityOptions(s),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=s.get(43),this._lineHeight=s.get(58),this._emptySelectionClipboard=s.get(32),this._copyWithSyntaxHighlighting=s.get(21),this._visibleTextArea=null,this._selections=[new Ge(1,1,1,1)],this._modelSelections=[new Ge(1,1,1,1)],this._lastRenderPosition=null,this.textArea=St(document.createElement("textarea")),Zl.write(this.textArea,6),this.textArea.setClassName(`inputarea ${wf}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("tabindex",String(s.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",v("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),s.get(30)&&s.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=St(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,h)=>this._context.model.getValueInRange(l,h)},a={getDataToCopy:l=>{const h=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,qn),c=this._context.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),d=Array.isArray(h)?h:null,f=Array.isArray(h)?h.join(c):h;let g,p=null;if(l&&this._copyWithSyntaxHighlighting&&f.length<65536){const m=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);m&&(g=m.html,p=m.mode)}return{isFromEmptySelection:u,multicursorText:d,text:f,html:g,mode:p}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(vt){const h=this._selections[0];if(h.isEmpty()){const c=h.getStartPosition();let u=this._getWordBeforePosition(c);if(u.length===0&&(u=this._getCharacterBeforePosition(c)),u.length>0)return new mn(u,u.length,u.length,c,c)}}return mn.EMPTY}if(ub){const h=this._selections[0];if(h.isEmpty()){const c=h.getStartPosition(),[u,d]=this._getAndroidWordAtPosition(c);if(u.length>0)return new mn(u,d,d,c,c)}return mn.EMPTY}return Hp.fromEditorSelection(l,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,h,c)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,h,c)};this._textAreaInput=this._register(new TRe(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let h=!1,c=null,u=null;l.metadata&&(h=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,c=typeof l.metadata.multicursorText<"u"?l.metadata.multicursorText:null,u=l.metadata.mode),this._viewController.paste(l.text,h,c,u)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta):this._viewController.type(l.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{const h=this._selections[0].startLineNumber,c=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new V(h,c,h,c),0,1);const u=this._viewHelper.visibleRangeForPositionRelativeToEditor(h,c);u&&(this._visibleTextArea=new TF(this._context.viewLayout.getVerticalOffsetForLineNumber(h),u.left,W_?0:1),this._render()),this.textArea.setClassName(`inputarea ${wf} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(FRe(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${wf}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),s=o0(t);let r=!0,o=e.column,a=!0,l=e.column,h=0;for(;h<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const c=n.charCodeAt(o-2);s.get(c)!==0?r=!1:o--}if(a&&l>n.length&&(a=!1),a){const c=n.charCodeAt(l-1);s.get(c)!==0?a=!1:l++}h++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=o0(this._context.configuration.options.get(115));let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(n.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!kn(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?v("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Ws?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Sg.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new K(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(vt){this._renderInsideEditor(this._primaryCursorPosition,t,e,W_?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,W_?0:1,W_?0:1)}_renderInsideEditor(e,t,n,s,r){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;Kn.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(s),o.setHeight(r),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Kn.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),W_){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Qf.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+u0.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function FRe(i,e){const n=document.createElement("canvas").getContext("2d");n.font=BRe(e);const s=n.measureText(i);return Vs?s.width+2:s.width}function BRe(i){return VRe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function VRe(i,e,t,n,s){return`${i} normal ${e} ${t}px / ${n}px ${s}`}class Md{static columnSelect(e,t,n,s,r,o){let a=Math.abs(r-n)+1,l=n>r,h=s>o,c=s<o,u=[];for(let d=0;d<a;d++){let f=n+(l?-d:d),g=Rt.columnFromVisibleColumn2(e,t,f,s),p=Rt.columnFromVisibleColumn2(e,t,f,o),m=Rt.visibleColumnFromColumn2(e,t,new K(f,g)),b=Rt.visibleColumnFromColumn2(e,t,new K(f,p));c&&(m>o||b<s)||h&&(b>s||m<o)||u.push(new xn(new V(f,g,f,g),0,new K(f,p),0))}if(u.length===0)for(let d=0;d<a;d++){const f=n+(l?-d:d),g=t.getLineMaxColumn(f);u.push(new xn(new V(f,g,f,g),0,new K(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,Md.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=o;l++){const h=t.getLineMaxColumn(l),c=Rt.visibleColumnFromColumn2(e,t,new K(l,h));s=Math.max(s,c)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const r=s?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class Is{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ge(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn)}}class wC{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ge(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn)}}class ZS{constructor(e,t,n,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ge(s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset,s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset)}}class ute{constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class MI{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class It{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-MLe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new K(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=L1.atomicPosition(r,t.column-1,n,0);if(o!==-1&&o+1>=s)return new K(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?It.leftPositionAtomicSoftTabs(t,n,e.tabSize):It.leftPosition(t,n);return new MI(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(r-1)),h=t.normalizePosition(It.clipPositionColumn(l,t),0),c=It.left(e,t,h);o=c.lineNumber,a=c.column}return n.move(s,o,a,0)}static clipPositionColumn(e,t){return new K(e.lineNumber,It.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+bD(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new K(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,r){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=L1.atomicPosition(o,n-1,s,1);if(a!==-1)return new K(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?It.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):It.rightPosition(t,n.lineNumber,n.column);return new MI(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,r-1),h=t.normalizePosition(It.clipPositionColumn(l,t),1),c=It.right(e,t,h);o=c.lineNumber,a=c.column}return n.move(s,o,a,0)}static vertical(e,t,n,s,r,o,a){const l=Rt.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+r,h=t.getLineCount(),c=n===1&&s===1,u=n===h&&s===t.getLineMaxColumn(n),d=o<n?c:u;return n=o,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>h?(n=h,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=Rt.columnFromVisibleColumn2(e,t,n,l),d?r=0:r=l-Rt.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),new MI(n,s,r)}static down(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n+o,a)}static moveDown(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=It.down(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let s=n.selection,r=It.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=It.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new xn(new V(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new K(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n-o,a)}static moveUp(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let l=It.up(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let s=n.selection,r=It.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=It.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new xn(new V(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new K(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,s){const r=t.getLineCount();let o=n.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,s){let r=n.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o,l;return n.position.column===a?l=o:l=a,n.move(s,r,l,0)}static moveToEndOfLine(e,t,n,s,r){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){let r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(s,r,o,0)}}class Xf{static deleteRight(e,t,n,s){let r=[],o=e!==3;for(let a=0,l=s.length;a<l;a++){const h=s[a];let c=h;if(c.isEmpty()){let u=h.getPosition(),d=It.right(t,n,u);c=new V(d.lineNumber,d.column,u.lineNumber,u.column)}if(c.isEmpty()){r[a]=null;continue}c.startLineNumber!==c.endLineNumber&&(o=!0),r[a]=new Is(c,"")}return[o,r]}static isAutoClosingPairDelete(e,t,n,s,r,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,h=o.length;l<h;l++){const c=o[l],u=c.getPosition();if(!c.isEmpty())return!1;const d=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=d.length+1)return!1;const f=d.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(kp(f)){if(n==="never")return!1}else if(t==="never")return!1;const p=d.charAt(u.column-1);let m=!1;for(const b of g)b.open===f&&b.close===p&&(m=!0);if(!m)return!1;if(e==="auto"){let b=!1;for(let _=0,w=a.length;_<w;_++){const y=a[_];if(u.lineNumber===y.startLineNumber&&u.column===y.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].getPosition(),l=new V(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new Is(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,r))return this._runAutoClosingPairDelete(t,n,s);const o=[];let a=e!==2;for(let l=0,h=s.length;l<h;l++){let c=Xf.getDeleteRange(s[l],n,t);if(c.isEmpty()){o[l]=null;continue}c.startLineNumber!==c.endLineNumber&&(a=!0),o[l]=new Is(c,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=ar(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=Rt.visibleColumnFromColumn2(n,t,s),h=Rt.prevIndentTabStop(l,n.indentSize),c=Rt.columnFromVisibleColumn2(n,t,s.lineNumber,h);return new V(s.lineNumber,c,s.lineNumber,s.column)}}return V.fromPositions(Xf.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=HLe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new K(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let s=[],r=null;n.sort((o,a)=>K.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){let h=l.getPosition(),c,u,d,f;h.lineNumber<t.getLineCount()?(c=h.lineNumber,u=1,d=h.lineNumber+1,f=1):h.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==h.lineNumber?(c=h.lineNumber-1,u=t.getLineMaxColumn(h.lineNumber-1),d=h.lineNumber,f=t.getLineMaxColumn(h.lineNumber)):(c=h.lineNumber,u=1,d=h.lineNumber,f=t.getLineMaxColumn(h.lineNumber));let g=new V(c,u,d,f);r=g,g.isEmpty()?s[o]=null:s[o]=new Is(g,"")}else s[o]=null;else s[o]=new Is(l,"")}return new Js(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Di{static _createWord(e,t,n,s,r){return{start:s,end:r,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;for(let r=n.column-2;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===0){if(s===2)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(a===2){if(s===1)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(a===1&&s!==0)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){let r=e.length;for(let o=s;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return r}static _findNextWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0,r=e.length;for(let o=n.column-1;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(s===2)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,n,s){for(let r=s;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return r+1}return 0}static moveWordLeft(e,t,n,s){let r=n.lineNumber,o=n.column;o===1&&r>1&&(r=r-1,o=t.getLineMaxColumn(r));let a=Di._findPreviousWordOnLine(e,t,new K(r,o));if(s===0)return new K(r,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=Di._findPreviousWordOnLine(e,t,new K(r,a.start+1))),new K(r,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=Di._findPreviousWordOnLine(e,t,new K(r,a.start+1));return new K(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=Di._findPreviousWordOnLine(e,t,new K(r,a.start+1))),new K(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new K(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new K(n,o);if(Fp(a)&&Hc(l))return new K(n,o);if(Hc(a)&&Hc(l)&&o+1<s){const h=r.charCodeAt(o);if(Fp(h))return new K(n,o)}}return new K(n,1)}static moveWordRight(e,t,n,s){let r=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=Di._findNextWordOnLine(e,t,new K(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Di._findNextWordOnLine(e,t,new K(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Di._findNextWordOnLine(e,t,new K(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=Di._findNextWordOnLine(e,t,new K(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new K(r,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new K(n+1,1):t;const r=e.getLineContent(n);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new K(n,o);if(Fp(a)&&Hc(l))return new K(n,o);if(Hc(a)&&Hc(l)&&o+1<s){const h=r.charCodeAt(o);if(Fp(h))return new K(n,o)}}return new K(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,r=e_(n,s);return r+1<s?new V(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(Xf.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new V(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new K(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,h=a.column;if(l===1&&h===1)return null;if(o){let u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let c=Di._findPreviousWordOnLine(n,s,a);return t===0?c?h=c.start+1:h>1?h=1:(l--,h=s.getLineMaxColumn(l)):(c&&h<=c.end+1&&(c=Di._findPreviousWordOnLine(n,s,new K(l,c.start+1))),c?h=c.end+1:h>1?h=1:(l--,h=s.getLineMaxColumn(l))),new V(l,h,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new K(n.positionLineNumber,n.positionColumn);let r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(n,o+1);)o++;return new V(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),r=s.length;if(r===0)return n.lineNumber>1?new V(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new V(n.lineNumber,1,n.lineNumber+1,1):new V(n.lineNumber,1,n.lineNumber,1);const o=u=>u.start+1<=n.column&&n.column<=u.end+1,a=(u,d)=>(u=Math.min(u,n.column),d=Math.max(d,n.column),new V(n.lineNumber,u,n.lineNumber,d)),l=u=>{let d=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;d>1&&this._charAtIsWhitespace(s,d-2);)d--;return a(d,f)},h=Di._findPreviousWordOnLine(e,t,n);if(h&&o(h))return l(h);const c=Di._findNextWordOnLine(e,t,n);return c&&o(c)?l(c):h&&c?a(h.end+1,c.start+1):h?a(h.start+1,h.end+1):c?a(c.start+1,c.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=Di._moveWordPartLeft(e,n);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let s=t;s<n;s++){let r=e.charAt(s);if(r!==" "&&r!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(n,s);return s+1<r?new V(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new K(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,h=a.column;const c=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===c&&h===u)return null;if(o){let f=this._deleteWordRightWhitespace(s,a);if(f)return f}let d=Di._findNextWordOnLine(n,s,a);return t===2?d?h=d.end+1:h<u||l===c?h=u:(l++,d=Di._findNextWordOnLine(n,s,new K(l,1)),d?h=d.start+1:h=s.getLineMaxColumn(l)):(d&&h>=d.start+1&&(d=Di._findNextWordOnLine(n,s,new K(l,d.end+1))),d?h=d.start+1:h<u||l===c?h=u:(l++,d=Di._findNextWordOnLine(n,s,new K(l,1)),d?h=d.start+1:h=s.getLineMaxColumn(l))),new V(l,h,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=Di._moveWordPartRight(e,n);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new V(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n){const s=o0(t),r=Di._findPreviousWordOnLine(s,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return Di._createWordAtPosition(e,n.lineNumber,r);const o=Di._findNextWordOnLine(s,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?Di._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,s,r){const o=o0(e.wordSeparators);let a=Di._findPreviousWordOnLine(o,t,r),l=Di._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new xn(new V(r.lineNumber,f,r.lineNumber,g),0,new K(r.lineNumber,g),0)}let h,c;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(h=a.start+1,c=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(h=l.start+1,c=l.end+1):(h=r.column,c=r.column);let u=r.lineNumber,d;if(n.selectionStart.containsPosition(r))d=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){d=h;let f=new K(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.endColumn)}else{d=c;let f=new K(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.startColumn)}return n.move(!0,u,d,0)}}class Cn{static addCursorDown(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new ot(l.modelState,l.viewState),n?s[r++]=ot.fromModelState(It.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=ot.fromViewState(It.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new ot(l.modelState,l.viewState),n?s[r++]=ot.fromModelState(It.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=ot.fromViewState(It.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return ot.fromViewState(It.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return ot.fromModelState(It.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,n,s)}return r}static _moveToLineEnd(e,t,n,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,h=e.model.getLineMaxColumn(l.lineNumber),c=o-r.column===h-l.column;return a||c?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return ot.fromViewState(It.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return ot.fromModelState(It.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let h=o.modelState.selection.endLineNumber,c;h===l?c=e.model.getLineMaxColumn(l):(h++,c=1),n[s]=ot.fromModelState(new xn(new V(a,1,a,1),0,new K(h,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=ot.fromModelState(It.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=ot.fromModelState(It.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return ot.fromModelState(new xn(new V(1,1,1,1),0,new K(n,s),0))}static line(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new K(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const h=e.model.getLineCount();let c=o.lineNumber+1,u=1;return c>h&&(c=h,u=e.model.getLineMaxColumn(c)),ot.fromModelState(new xn(new V(o.lineNumber,1,c,u),0,new K(c,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return ot.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const h=e.getLineCount();let c=a.lineNumber+1,u=1;return c>h&&(c=h,u=e.getLineMaxColumn(c)),ot.fromViewState(t.viewState.move(t.modelState.hasSelection(),c,u,0))}else{const h=t.modelState.selectionStart.getEndPosition();return ot.fromModelState(t.modelState.move(t.modelState.hasSelection(),h.lineNumber,h.column,0))}}static word(e,t,n,s){const r=e.model.validatePosition(s);return ot.fromModelState(Di.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ot(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return ot.fromViewState(new xn(new V(n,s,n,s),0,new K(n,s),0))}static moveTo(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new K(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return ot.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,r,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>ot.fromViewState(It.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>ot.fromModelState(It.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>ot.fromViewState(It.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>ot.fromModelState(It.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),h=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,h)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),h=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,h)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),h=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,h)]}case 14:{let l=[];for(let h=0,c=t.length;h<c;h++){const u=t[h];l[h]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){let r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new ot(t.modelState,t.viewState);{let o;r>n.endLineNumber-1?o=n.endLineNumber-1:r<n.startLineNumber?o=n.startLineNumber:o=r;const a=It.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return ot.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(r=>ot.fromViewState(It.moveLeft(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=Math.round(e.getLineContent(l).length/2);s[r]=ot.fromViewState(It.moveLeft(e.cursorConfig,e,a.viewState,n,h))}return s}static _moveRight(e,t,n,s){return t.map(r=>ot.fromViewState(It.moveRight(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineRight(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=Math.round(e.getLineContent(l).length/2);s[r]=ot.fromViewState(It.moveRight(e.cursorConfig,e,a.viewState,n,h))}return s}static _moveDownByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ot.fromViewState(It.moveDown(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveDownByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ot.fromModelState(It.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveUpByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ot.fromViewState(It.moveUp(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveUpByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ot.fromModelState(It.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveToViewPosition(e,t,n,s,r){return ot.fromViewState(t.viewState.move(n,s,r,0))}static _moveToModelPosition(e,t,n,s,r){return ot.fromModelState(t.modelState.move(n,s,r,0))}static _moveToViewMinColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,h)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,h)}return s}static _moveToViewCenterColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,n,l,h)}return s}static _moveToViewMaxColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,h)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,h=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,h)}return s}}var tk;(function(i){const e=function(n){if(!Ps(n))return!1;let s=n;return!(!Va(s.to)||!bs(s.select)&&!oJ(s.select)||!bs(s.by)&&!Va(s.by)||!bs(s.value)&&!$f(s.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(tk||(tk={}));const RI=Object.create(null);function pd(i,e){if(e<=0)return"";RI[i]||(RI[i]=["",i]);const t=RI[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Jc{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,s,r){const o=Rt.visibleColumnFromColumn(e,t,n);if(r){const a=pd(" ",s),h=Rt.prevIndentTabStop(o,s)/s;return pd(a,h)}else{const a="	",h=Rt.prevRenderTabStop(o,n)/n;return pd(a,h)}}static shiftIndent(e,t,n,s,r){const o=Rt.visibleColumnFromColumn(e,t,n);if(r){const a=pd(" ",s),h=Rt.nextIndentTabStop(o,s)/s;return pd(a,h)}else{const a="	",h=Rt.nextRenderTabStop(o,n)/n;return pd(a,h)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&n!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=n===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let h=0,c=0;for(let u=n;u<=s;u++,h=c){c=0;let d=e.getLineContent(u),f=ar(d);if(this._opts.isUnshift&&(d.length===0||f===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(f===-1&&(f=d.length),u>1&&Rt.visibleColumnFromColumn(d,f+1,r)%o!==0&&e.isCheapToTokenize(u-1)){let m=zi.getEnterAction(this._opts.autoIndent,e,new V(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)));if(m){if(c=h,m.appendText)for(let b=0,_=m.appendText.length;b<_&&c<o&&m.appendText.charCodeAt(b)===32;b++)c++;m.removeText&&(c=Math.max(0,c-m.removeText));for(let b=0;b<c&&!(f===0||d.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=Jc.unshiftIndent(d,f+1,r,o,a):g=Jc.shiftIndent(d,f+1,r,o,a),this._addEditOperation(t,new V(u,1,u,f+1),g),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const h=a?pd(" ",o):"	";for(let c=n;c<=s;c++){const u=e.getLineContent(c);let d=ar(u);if(!(this._opts.isUnshift&&(u.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(d===-1&&(d=u.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let f=0;f<d;f++)if(u.charCodeAt(f)===9){d=f+1;break}this._addEditOperation(t,new V(c,1,c,d+1),"")}else this._addEditOperation(t,new V(c,1,c,1),h),c===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let s=t.getInverseEditOperations()[0];return new Ge(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let s=this._selection.startColumn;return n.startColumn<=s?n:n.getDirection()===0?new Ge(n.startLineNumber,s,n.endLineNumber,n.endColumn):new Ge(n.endLineNumber,n.endColumn,n.startLineNumber,s)}return n}}class WRe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new V(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new V(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),s=n[0].range,r=n[1].range;return new Ge(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class ki{static indent(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Jc(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static outdent(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Jc(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static shiftIndent(e,t,n){return n=n||1,Jc.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Jc.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,s){let r=[];for(let o=0,a=n.length;o<a;o++)r[o]=new Is(n[o],s[o]);return new Js(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,r){let o=[];for(let a=0,l=n.length;a<l;a++){const h=n[a];let c=h.getPosition();if(r&&!h.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){let u=new V(c.lineNumber,1,c.lineNumber,1);o[a]=new ute(u,s,h,!0)}else o[a]=new Is(h,s)}return new Js(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=ql(n);if(o.length===t.length)return o}return null}static paste(e,t,n,s,r,o){const a=this._distributePasteToCursors(e,n,s,r,o);return a?(n=n.sort(V.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,r)}static _goodIndentForLine(e,t,n){let s=null,r="";const o=zi.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)s=o.action,r=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const c=t.getLineContent(a);if(e_(c)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),h=zi.getEnterAction(e.autoIndent,t,new V(a,l,a,l));h&&(r=h.indentation+h.appendText)}return s&&(s===gn.Indent&&(r=ki.shiftIndent(e,r)),s===gn.Outdent&&(r=ki.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,s){let r="",o=n.getStartPosition();if(e.insertSpaces){let a=Rt.visibleColumnFromColumn2(e,t,o),l=e.indentSize,h=l-a%l;for(let c=0;c<h;c++)r+=" "}else r="	";return new Is(n,r,s)}static tab(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let h=this._goodIndentForLine(e,t,a.startLineNumber);h=h||"	";let c=e.normalizeIndentation(h);if(!l.startsWith(c)){s[r]=new Is(new V(a.startLineNumber,1,a.startLineNumber,l.length+1),c,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Jc(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return s}static compositionType(e,t,n,s,r,o,a,l){const h=s.map(c=>this._compositionType(n,c,r,o,a,l));return new Js(4,h,{shouldPushStackElementBefore:yC(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),h=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),c=new V(a.lineNumber,l,a.lineNumber,h);return e.getValueInRange(c)===n&&o===0?null:new ZS(c,n,0,o)}static _typeCommand(e,t,n){return n?new wC(e,t,!0):new Is(e,t,!0)}static _enter(e,t,n,s){if(e.autoIndent===0)return ki._typeCommand(s,`
`,n);if(!t.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(s.startLineNumber),h=nn(l).substring(0,s.startColumn-1);return ki._typeCommand(s,`
`+e.normalizeIndentation(h),n)}const r=zi.getEnterAction(e.autoIndent,t,s);if(r){if(r.indentAction===gn.None)return ki._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===gn.Indent)return ki._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===gn.IndentOutdent){const l=e.normalizeIndentation(r.indentation),h=e.normalizeIndentation(r.indentation+r.appendText),c=`
`+h+`
`+l;return n?new wC(s,c,!0):new ZS(s,c,-1,h.length-l.length,!0)}else if(r.indentAction===gn.Outdent){const l=ki.unshiftIndent(e,r.indentation);return ki._typeCommand(s,`
`+e.normalizeIndentation(l+r.appendText),n)}}const o=t.getLineContent(s.startLineNumber),a=nn(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=zi.getIndentForEnter(e.autoIndent,t,s,{unshiftIndent:h=>ki.unshiftIndent(e,h),shiftIndent:h=>ki.shiftIndent(e,h),normalizeIndentation:h=>e.normalizeIndentation(h)});if(l){let h=Rt.visibleColumnFromColumn2(e,t,s.getEndPosition());const c=s.endColumn,u=t.getLineContent(s.endLineNumber),d=ar(u);if(d>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,d+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new wC(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return c<=d+1&&(e.insertSpaces||(h=Math.ceil(h/e.indentSize)),f=Math.min(h+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new ZS(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return ki._typeCommand(s,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let s=0,r=n.length;s<r;s++)if(!t.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,s){const r=zi.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=zi.getIndentActionForType(e.autoIndent,t,n,s,{shiftIndent:a=>ki.shiftIndent(e,a),unshiftIndent:a=>ki.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(r)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?ki._typeCommand(new V(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+s,!1):ki._typeCommand(new V(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,n,s,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const h=l.getPosition(),c=t.getLineContent(h.lineNumber);if(c.charAt(h.column-1)!==r)return!1;const d=kp(r);if((h.column>2?c.charCodeAt(h.column-2):0)===92&&d)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let p=0,m=s.length;p<m;p++){const b=s[p];if(h.lineNumber===b.startLineNumber&&h.column===b.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const c=s[a].getPosition(),u=new V(c.lineNumber,c.column,c.lineNumber,c.column+1);o[a]=new Is(u,r)}return new Js(4,o,{shouldPushStackElementBefore:yC(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const h of n)if(t.getValueInRange(new V(h.lineNumber,h.column-a.open.length+1,h.lineNumber,h.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r?r.close:""}static _getAutoClosingPairClose(e,t,n,s,r){const o=kp(s),a=o?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;const l=this._findAutoClosingPairOpen(e,t,n.map(d=>d.getPosition()),s);if(!l)return null;const h=this._findSubAutoClosingPairClose(e,l);let c=!0;const u=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let d=0,f=n.length;d<f;d++){const g=n[d];if(!g.isEmpty())return null;const p=g.getPosition(),m=t.getLineContent(p.lineNumber),b=m.substring(p.column-1);if(b.startsWith(h)||(c=!1),m.length>p.column-1){const y=m.charAt(p.column-1);if(!ki._isBeforeClosingBrace(e,b)&&!u(y))return null}if(!t.isCheapToTokenize(p.lineNumber))return null;if(l.open.length===1&&(s==="'"||s==='"')&&a!=="always"){const y=o0(e.wordSeparators);if(r&&p.column>1&&y.get(m.charCodeAt(p.column-2))===0||!r&&p.column>2&&y.get(m.charCodeAt(p.column-3))===0)return null}t.forceTokenization(p.lineNumber);const _=t.getLineTokens(p.lineNumber);let w=!1;try{w=zi.shouldAutoClosePair(l,_,r?p.column:p.column-1)}catch(y){nt(y)}if(!w)return null}return c?l.close.substring(0,l.close.length-h.length):l.close}static _runAutoClosingOpenCharType(e,t,n,s,r,o,a){let l=[];for(let h=0,c=s.length;h<c;h++){const u=s[h];l[h]=new dte(u,r,o,a)}return new Js(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return kp(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,s){if(!ki._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=kp(s);for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())return!1;let h=!0;for(let c=l.startLineNumber;c<=l.endLineNumber;c++){const u=t.getLineContent(c),d=c===l.startLineNumber?l.startColumn-1:0,f=c===l.endLineNumber?l.endColumn-1:u.length,g=u.substring(d,f);if(/[^ \t]/.test(g)){h=!1;break}}if(h)return!1;if(r&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const c=t.getValueInRange(l);if(kp(c))return!1}}return!0}static _runSurroundSelectionType(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const h=s[a],c=t.surroundingPairs[r];o[a]=new WRe(h,r,c)}return new Js(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;let o=s.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),l;try{l=zi.onElectricCharacter(r,a,o.column)}catch(h){return nt(h),null}if(!l)return null;if(l.matchOpenBracket){let h=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,c=n.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:h});if(c){if(c.startLineNumber===o.lineNumber)return null;let u=n.getLineContent(c.startLineNumber),d=nn(u),f=t.normalizeIndentation(d),g=n.getLineContent(o.lineNumber),p=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,m=g.substring(p-1,o.column-1),b=f+m+r,_=new V(o.lineNumber,1,o.lineNumber,o.column);const w=new Is(_,b);return new Js(OI(b,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,s,r,o){if(!s||Ge.selectionsArrEqual(s,r))return null;let a=null;for(const h of r){if(!h.isEmpty())return null;const c=h.getPosition(),u=n.getValueInRange(new V(c.lineNumber,c.column-1,c.lineNumber,c.column));if(a===null)a=u;else if(a!==u)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,r,o,a)){const h=r.map(c=>new Is(new V(c.positionLineNumber,c.positionColumn,c.positionLineNumber,c.positionColumn+1),"",!1));return new Js(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,r,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,n,r,a,!1,l):null}static typeWithInterceptors(e,t,n,s,r,o,a){if(!e&&a===`
`){let c=[];for(let u=0,d=r.length;u<d;u++)c[u]=ki._enter(n,s,!1,r[u]);return new Js(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,s,r)){let c=[],u=!1;for(let d=0,f=r.length;d<f;d++)if(c[d]=this._runAutoIndentType(n,s,r[d],a),!c[d]){u=!0;break}if(!u)return new Js(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,s,r,o,a))return this._runAutoClosingOvertype(t,n,s,r,a);if(!e){const c=this._getAutoClosingPairClose(n,s,r,a,!0);if(c)return this._runAutoClosingOpenCharType(t,n,s,r,a,!0,c)}if(this._isSurroundSelectionType(n,s,r,a))return this._runSurroundSelectionType(t,n,s,r,a);if(!e&&this._isTypeInterceptorElectricChar(n,s,r)){const c=this._typeInterceptorElectricChar(t,n,s,r[0],a);if(c)return c}let l=[];for(let c=0,u=r.length;c<u;c++)l[c]=new Is(r[c],a);const h=OI(a,t);return new Js(h,l,{shouldPushStackElementBefore:yC(t,h),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,s,r){let o=[];for(let l=0,h=s.length;l<h;l++)o[l]=new Is(s[l],r);const a=OI(r,e);return new Js(a,o,{shouldPushStackElementBefore:yC(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){let a=n[r].positionLineNumber;if(a===1)s[r]=new wC(new V(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new V(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].positionLineNumber;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new V(a,l,a,l))}return s}static lineBreakInsert(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=this._enter(e,t,!0,n[r]);return s}}class dte extends ZS{constructor(e,t,n,s){super(e,(n?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new V(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new V(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}function OI(i,e){return i===" "?e===5||e===6?6:5:4}function yC(i,e){return Uz(i)&&!Uz(e)?!0:i===5?!1:Hz(i)!==Hz(e)}function Hz(i){return i===6||i===5?"space":i}function Uz(i){return i===4||i===5||i===6}var Z;(function(i){i.editorSimpleInput=new Ie("editorSimpleInput",!1,!0),i.editorTextFocus=new Ie("editorTextFocus",!1,v("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Ie("editorFocus",!1,v("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Ie("textInputFocus",!1,v("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Ie("editorReadonly",!1,v("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new Ie("inDiffEditor",!1,v("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new Ie("editorColumnSelection",!1,v("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Ie("editorHasSelection",!1,v("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Ie("editorHasMultipleSelections",!1,v("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Ie("editorTabMovesFocus",!1,v("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Ie("isInEmbeddedEditor",!1,!0),i.canUndo=new Ie("canUndo",!1,!0),i.canRedo=new Ie("canRedo",!1,!0),i.hoverVisible=new Ie("editorHoverVisible",!1,v("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new Ie("inCompositeEditor",void 0,v("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Ie("editorLangId","",v("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Ie("editorHasCompletionItemProvider",!1,v("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Ie("editorHasCodeActionsProvider",!1,v("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Ie("editorHasCodeLensProvider",!1,v("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Ie("editorHasDefinitionProvider",!1,v("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Ie("editorHasDeclarationProvider",!1,v("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Ie("editorHasImplementationProvider",!1,v("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Ie("editorHasTypeDefinitionProvider",!1,v("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Ie("editorHasHoverProvider",!1,v("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Ie("editorHasDocumentHighlightProvider",!1,v("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Ie("editorHasDocumentSymbolProvider",!1,v("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Ie("editorHasReferenceProvider",!1,v("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Ie("editorHasRenameProvider",!1,v("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Ie("editorHasSignatureHelpProvider",!1,v("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Ie("editorHasInlayHintsProvider",!1,v("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Ie("editorHasDocumentFormattingProvider",!1,v("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Ie("editorHasDocumentSelectionFormattingProvider",!1,v("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Ie("editorHasMultipleDocumentFormattingProvider",!1,v("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Ie("editorHasMultipleDocumentSelectionFormattingProvider",!1,v("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Z||(Z={}));const yt=0;class Ni extends ho{runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var ik;(function(i){const e=function(n){if(!Ps(n))return!1;const s=n;return!(!Va(s.to)||!bs(s.by)&&!Va(s.by)||!bs(s.value)&&!$f(s.value)||!bs(s.revealCursor)&&!oJ(s.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Down:s=2;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;default:r=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(ik||(ik={}));var Up;(function(i){const e=function(t){if(!Ps(t))return!1;const n=t;return!(!$f(n.lineNumber)&&!Va(n.lineNumber)||!bs(n.at)&&!Va(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Up||(Up={}));class b3{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(li).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=document.activeElement;return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(li).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var dn;(function(i){class e extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,[Cn.moveTo(_,_.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),_.revealPrimaryCursor(w.source,!0)}}i.MoveTo=Se(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=Se(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Ni{runCoreEditorCommand(_,w){_.model.pushStackElement();const y=this._getColumnSelectResult(_,_.getPrimaryCursorState(),_.getCursorColumnSelectData(),w);_.setCursorStates(w.source,3,y.viewStates.map(x=>ot.fromViewState(x))),_.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:y.fromLineNumber,fromViewVisualColumn:y.fromVisualColumn,toViewLineNumber:y.toLineNumber,toViewVisualColumn:y.toVisualColumn}),y.reversed?_.revealTopMostCursor(w.source):_.revealBottomMostCursor(w.source)}}i.ColumnSelect=Se(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,_,w,y){const x=b.model.validatePosition(y.position),L=b.coordinatesConverter.validateViewPosition(new K(y.viewPosition.lineNumber,y.viewPosition.column),x);let S=y.doColumnSelect?w.fromViewLineNumber:L.lineNumber,k=y.doColumnSelect?w.fromViewVisualColumn:y.mouseColumn-1;return Md.columnSelect(b.cursorConfig,b,S,k,L.lineNumber,y.mouseColumn-1)}}),i.CursorColumnSelectLeft=Se(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,_,w,y){return Md.columnSelectLeft(b.cursorConfig,b,w)}}),i.CursorColumnSelectRight=Se(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,_,w,y){return Md.columnSelectRight(b.cursorConfig,b,w)}});class n extends t{constructor(_){super(_),this._isPaged=_.isPaged}_getColumnSelectResult(_,w,y,x){return Md.columnSelectUp(_.cursorConfig,_,y,this._isPaged)}}i.CursorColumnSelectUp=Se(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=Se(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(_){super(_),this._isPaged=_.isPaged}_getColumnSelectResult(_,w,y,x){return Md.columnSelectDown(_.cursorConfig,_,y,this._isPaged)}}i.CursorColumnSelectDown=Se(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=Se(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Ni{constructor(){super({id:"cursorMove",precondition:void 0,description:tk.description})}runCoreEditorCommand(_,w){const y=tk.parse(w);y&&this._runCursorMove(_,w.source,y)}_runCursorMove(_,w,y){_.model.pushStackElement(),_.setCursorStates(w,3,r._move(_,_.getCursorStates(),y)),_.revealPrimaryCursor(w,!0)}static _move(_,w,y){const x=y.select,L=y.value;switch(y.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Cn.simpleMove(_,w,y.direction,x,L,y.unit);case 11:case 13:case 12:case 14:return Cn.viewportMove(_,w,y.direction,x,L);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=Se(new r);class o extends Ni{constructor(_){super(_),this._staticArgs=_.args}runCoreEditorCommand(_,w){let y=this._staticArgs;this._staticArgs.value===-1&&(y={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:_.cursorConfig.pageSize}),_.model.pushStackElement(),_.setCursorStates(w.source,3,Cn.simpleMove(_,_.getCursorStates(),y.direction,y.select,y.value,y.unit)),_.revealPrimaryCursor(w.source,!0)}}i.CursorLeft=Se(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=Se(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1039}})),i.CursorRight=Se(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=Se(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1041}})),i.CursorUp=Se(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=Se(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=Se(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:11}})),i.CursorPageUpSelect=Se(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1035}})),i.CursorDown=Se(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=Se(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=Se(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:12}})),i.CursorPageDownSelect=Se(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1036}})),i.CreateCursor=Se(new class extends Ni{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,_){let w;_.wholeLine?w=Cn.line(b,b.getPrimaryCursorState(),!1,_.position,_.viewPosition):w=Cn.moveTo(b,b.getPrimaryCursorState(),!1,_.position,_.viewPosition);const y=b.getCursorStates();if(y.length>1){const x=w.modelState?w.modelState.position:null,L=w.viewState?w.viewState.position:null;for(let S=0,k=y.length;S<k;S++){const D=y[S];if(!(x&&!D.modelState.selection.containsPosition(x))&&!(L&&!D.viewState.selection.containsPosition(L))){y.splice(S,1),b.model.pushStackElement(),b.setCursorStates(_.source,3,y);return}}}y.push(w),b.model.pushStackElement(),b.setCursorStates(_.source,3,y)}}),i.LastCursorMoveToSelect=Se(new class extends Ni{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,_){const w=b.getLastAddedCursorIndex(),y=b.getCursorStates(),x=y.slice(0);x[w]=Cn.moveTo(b,y[w],!0,_.position,_.viewPosition),b.model.pushStackElement(),b.setCursorStates(_.source,3,x)}});class a extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,Cn.moveToBeginningOfLine(_,_.getCursorStates(),this._inSelectionMode)),_.revealPrimaryCursor(w.source,!0)}}i.CursorHome=Se(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=Se(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,this._exec(_.getCursorStates())),_.revealPrimaryCursor(w.source,!0)}_exec(_){const w=[];for(let y=0,x=_.length;y<x;y++){const L=_[y],S=L.modelState.position.lineNumber;w[y]=ot.fromModelState(L.modelState.move(this._inSelectionMode,S,1,0))}return w}}i.CursorLineStart=Se(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=Se(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:0,mac:{primary:1311}}}));class h extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,Cn.moveToEndOfLine(_,_.getCursorStates(),this._inSelectionMode,w.sticky||!1)),_.revealPrimaryCursor(w.source,!0)}}i.CursorEnd=Se(new h({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:yt,kbExpr:Z.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=Se(new h({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:yt,kbExpr:Z.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class c extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,this._exec(_,_.getCursorStates())),_.revealPrimaryCursor(w.source,!0)}_exec(_,w){const y=[];for(let x=0,L=w.length;x<L;x++){const S=w[x],k=S.modelState.position.lineNumber,D=_.model.getLineMaxColumn(k);y[x]=ot.fromModelState(S.modelState.move(this._inSelectionMode,k,D,0))}return y}}i.CursorLineEnd=Se(new c({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=Se(new c({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,Cn.moveToBeginningOfBuffer(_,_.getCursorStates(),this._inSelectionMode)),_.revealPrimaryCursor(w.source,!0)}}i.CursorTop=Se(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=Se(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,Cn.moveToEndOfBuffer(_,_.getCursorStates(),this._inSelectionMode)),_.revealPrimaryCursor(w.source,!0)}}i.CursorBottom=Se(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=Se(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Ni{constructor(){super({id:"editorScroll",precondition:void 0,description:ik.description})}runCoreEditorCommand(_,w){const y=ik.parse(w);y&&this._runEditorScroll(_,w.source,y)}_runEditorScroll(_,w,y){const x=this._computeDesiredScrollTop(_,y);if(y.revealCursor){const L=_.getCompletelyVisibleViewRangeAtScrollTop(x);_.setCursorStates(w,3,[Cn.findPositionInViewportIfOutside(_,_.getPrimaryCursorState(),L,y.select)])}_.setScrollTop(x,0)}_computeDesiredScrollTop(_,w){if(w.unit===1){const L=_.getCompletelyVisibleViewRange(),S=_.coordinatesConverter.convertViewRangeToModelRange(L);let k;w.direction===1?k=Math.max(1,S.startLineNumber-w.value):k=Math.min(_.model.getLineCount(),S.startLineNumber+w.value);const D=_.coordinatesConverter.convertModelPositionToViewPosition(new K(k,1));return _.getVerticalOffsetForLineNumber(D.lineNumber)}let y;w.unit===3?y=_.cursorConfig.pageSize*w.value:w.unit===4?y=Math.round(_.cursorConfig.pageSize/2)*w.value:y=w.value;const x=(w.direction===1?-1:1)*y;return _.getScrollTop()+x*_.cursorConfig.lineHeight}}i.EditorScrollImpl=f,i.EditorScroll=Se(new f),i.ScrollLineUp=Se(new class extends Ni{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,_){i.EditorScroll._runEditorScroll(b,_.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=Se(new class extends Ni{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,_){i.EditorScroll._runEditorScroll(b,_.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=Se(new class extends Ni{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,_){i.EditorScroll._runEditorScroll(b,_.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=Se(new class extends Ni{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,_){i.EditorScroll._runEditorScroll(b,_.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class g extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,[Cn.word(_,_.getPrimaryCursorState(),this._inSelectionMode,w.position)]),_.revealPrimaryCursor(w.source,!0)}}i.WordSelect=Se(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=Se(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=Se(new class extends Ni{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,_){const w=b.getLastAddedCursorIndex(),y=b.getCursorStates(),x=y.slice(0),L=y[w];x[w]=Cn.word(b,L,L.modelState.hasSelection(),_.position),b.model.pushStackElement(),b.setCursorStates(_.source,3,x)}});class p extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){_.model.pushStackElement(),_.setCursorStates(w.source,3,[Cn.line(_,_.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),_.revealPrimaryCursor(w.source,!1)}}i.LineSelect=Se(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=Se(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends Ni{constructor(_){super(_),this._inSelectionMode=_.inSelectionMode}runCoreEditorCommand(_,w){const y=_.getLastAddedCursorIndex(),x=_.getCursorStates(),L=x.slice(0);L[y]=Cn.line(_,x[y],this._inSelectionMode,w.position,w.viewPosition),_.model.pushStackElement(),_.setCursorStates(w.source,3,L)}}i.LastCursorLineSelect=Se(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=Se(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.ExpandLineSelection=Se(new class extends Ni{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:2090}})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,Cn.expandLineSelection(b,b.getCursorStates())),b.revealPrimaryCursor(_.source,!0)}}),i.CancelSelection=Se(new class extends Ni{constructor(){super({id:"cancelSelection",precondition:Z.hasNonEmptySelection,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,[Cn.cancelSelection(b,b.getPrimaryCursorState())]),b.revealPrimaryCursor(_.source,!0)}}),i.RemoveSecondaryCursors=Se(new class extends Ni{constructor(){super({id:"removeSecondaryCursors",precondition:Z.hasMultipleSelections,kbOpts:{weight:yt+1,kbExpr:Z.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,[b.getPrimaryCursorState()]),b.revealPrimaryCursor(_.source,!0),HD(v("removedCursor","Removed secondary cursors"))}}),i.RevealLine=Se(new class extends Ni{constructor(){super({id:"revealLine",precondition:void 0,description:Up.description})}runCoreEditorCommand(b,_){const w=_,y=w.lineNumber||0;let x=typeof y=="number"?y+1:parseInt(y)+1;x<1&&(x=1);const L=b.model.getLineCount();x>L&&(x=L);const S=new V(x,1,x,b.model.getLineMaxColumn(x));let k=0;if(w.at)switch(w.at){case Up.RawAtArgument.Top:k=3;break;case Up.RawAtArgument.Center:k=1;break;case Up.RawAtArgument.Bottom:k=4;break}const D=b.coordinatesConverter.convertModelRangeToViewRange(S);b.revealRange(_.source,!1,D,k,0)}}),i.SelectAll=new class extends b3{constructor(){super(LIe)}runDOMCommand(){Vs&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(b,_,w){const y=_._getViewModel();y&&this.runCoreEditorCommand(y,w)}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[Cn.selectAll(b,b.getPrimaryCursorState())])}},i.SetSelection=Se(new class extends Ni{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,_){b.model.pushStackElement(),b.setCursorStates(_.source,3,[ot.fromModelSelection(_.selection)])}})})(dn||(dn={}));const zRe=Ae.and(Z.textInputFocus,Z.columnSelection);function l_(i,e){ys.registerKeybindingRule({id:i,primary:e,when:zRe,weight:yt+1})}l_(dn.CursorColumnSelectLeft.id,1039);l_(dn.CursorColumnSelectRight.id,1041);l_(dn.CursorColumnSelectUp.id,1040);l_(dn.CursorColumnSelectPageUp.id,1035);l_(dn.CursorColumnSelectDown.id,1042);l_(dn.CursorColumnSelectPageDown.id,1036);function $z(i){return i.register(),i}var uv;(function(i){class e extends ho{runEditorCommand(n,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=Se(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Z.writable,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,ki.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=Se(new class extends e{constructor(){super({id:"outdent",precondition:Z.writable,kbOpts:{weight:yt,kbExpr:Ae.and(Z.editorTextFocus,Z.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,ki.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=Se(new class extends e{constructor(){super({id:"tab",precondition:Z.writable,kbOpts:{weight:yt,kbExpr:Ae.and(Z.editorTextFocus,Z.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,ki.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=Se(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Xf.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=Se(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:Z.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Xf.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends b3{constructor(){super(cF)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends b3{constructor(){super(uF)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(uv||(uv={}));class jz extends p2{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(li).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function Ig(i,e){$z(new jz("default:"+i,i)),$z(new jz(i,i,e))}Ig("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Ig("replacePreviousChar");Ig("compositionType");Ig("compositionStart");Ig("compositionEnd");Ig("paste");Ig("cut");class HRe{constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){dn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new K(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Ws&&t.get(95),s=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){dn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){dn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),dn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),dn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){dn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){dn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){dn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){dn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){dn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){dn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){dn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){dn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){dn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class x2{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return x2.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new URe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class URe{constructor(e,t,n,s,r,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,this.range=r,this.detail=o}toString(){return ua.toString(this)}}var PI;class fte{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=n;l<=s;l++){const h=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=h,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=t;o++)o>=n&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<n;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),h=this._lines.slice(a,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(h),c}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),h=Math.min(n,a.toLineNumber);for(let c=l;c<=h;c++){const u=c-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class gte{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new fte(()=>this._host.createVisibleLine())}_createDomNode(){const e=St(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Hh(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class Hh{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let o=t;o<=n;o++)r.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(n,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){const o=r.rendLineNumberStart+r.linesLength,a=n;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){const o=Math.max(0,n-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,n,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const h=o+l;a[l].layoutLine(h,s[h-r])}}_insertLinesBefore(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const s=e.lines[n].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[n+s].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){Hh._ttPolicy&&(n=Hh._ttPolicy.createHTML(n));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");Hh._ttPolicy&&(t=Hh._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(n[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const s=Hh._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let h=!1;for(let c=0;c<r;c++){const u=o[c];l[c]=!1,!(u.getDomNode()||!u.renderLine(c+a,n[c],this.viewportData,s))&&(l[c]=!0,h=!0)}h&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let h=!1;const c=[];for(let u=0;u<r;u++){const d=o[u];c[u]=!1,!(l[u]||!d.renderLine(u+a,n[u],this.viewportData,s))&&(c[u]=!0,h=!0)}h&&this._finishRenderingInvalidLines(e,s.build(),c)}}}Hh._ttPolicy=(PI=window.trustedTypes)===null||PI===void 0?void 0:PI.createPolicy("editorViewLayer",{createHTML:i=>i});Hh._sb=jf(1e5);class pte extends co{constructor(e){super(e),this._visibleLines=new gte(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new $Re(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class $Re{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=St(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,s){let r="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];r+=l.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,s.appendASCIIString('<div style="position:absolute;top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;width:100%;height:"),s.appendASCIIString(String(this._lineHeight)),s.appendASCIIString('px;">'),s.appendASCIIString(r),s.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class jRe extends pte{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class qRe extends pte{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Kn.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Kn.applyFontInfo(this.domNode,t.get(43));const n=t.get(129);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class z_{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class GRe extends co{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=St(document.createElement("div")),Zl.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=St(document.createElement("div")),Zl.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new KRe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let KRe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=St(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(129);this._fixedOverflowWidgets=s.get(36),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){const n=t.get(129);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,s,r){const o=e.top,a=o,l=t.top+this._lineHeight,h=r.viewportHeight-l,c=o-s,u=a>=s,d=l,f=h>=s;let g=e.left,p=t.left;return g+n>r.scrollLeft+r.viewportWidth&&(g=r.scrollLeft+r.viewportWidth-n),p+n>r.scrollLeft+r.viewportWidth&&(p=r.scrollLeft+r.viewportWidth-n),g<r.scrollLeft&&(g=r.scrollLeft),p<r.scrollLeft&&(p=r.scrollLeft),{fitsAbove:u,aboveTop:c,aboveLeft:g,fitsBelow:f,belowTop:d,belowLeft:p}}_layoutHorizontalSegmentInPage(e,t,n,s){const r=Math.max(0,t.left-s),o=Math.min(t.left+t.width+s,e.width);let a=t.left+n-ec.scrollX;if(a+s>o){const l=a-(o-s);a-=l,n-=l}if(a<r){const l=a-r;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,s,r){const o=e.top-s,a=t.top+this._lineHeight,l=Un(this._viewDomNode.domNode),h=l.top+o-ec.scrollY,c=l.top+a-ec.scrollY,u=$L(document.body),[d,f]=this._layoutHorizontalSegmentInPage(u,l,e.left-r.scrollLeft+this._contentLeft,n),[g,p]=this._layoutHorizontalSegmentInPage(u,l,t.left-r.scrollLeft+this._contentLeft,n),m=22,b=22,_=h>=m,w=c+s<=u.height-b;return this._fixedOverflowWidgets?{fitsAbove:_,aboveTop:Math.max(h,m),aboveLeft:f,fitsBelow:w,belowTop:c,belowLeft:p}:{fitsAbove:_,aboveTop:o,aboveLeft:d,fitsBelow:w,belowTop:a,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new z_(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],s=t[0];for(const u of t)u.lineNumber<n.lineNumber&&(n=u),u.lineNumber>s.lineNumber&&(s=u);let r=1073741824;for(const u of n.ranges)u.left<r&&(r=u.left);let o=1073741824;for(const u of s.ranges)u.left<o&&(o=u.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new z_(a,r),h=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop,c=new z_(h,o);return[l,c]}_prepareRenderWidget(e){const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=FI(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeClientWidth=r.width,this._cachedDomNodeClientHeight=r.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let s;if(this.allowEditorOverflow?s=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):s=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let r=1;r<=2;r++)for(const o of this._preference)if(o===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new z_(s.aboveTop,s.aboveLeft),position:1}}else if(o===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new z_(s.belowTop,s.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&FI(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&FI(this._actual.afterRender,this._actual,this._renderData.position)}};function FI(i,e,...t){try{return i.call(e,...t)}catch{return null}}let v3=!0;class mte extends a_{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ge(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=v3?this._selections.slice(0,1):this._selections,n=t.map(r=>r.positionLineNumber);n.sort((r,o)=>r-o),Ul(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=t.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=s;l++){const h=l-n;for(;o<r&&this._cursorLineNumbers[o]<l;)o++;o<r&&this._cursorLineNumbers[o]===l?a[h]=t:a[h]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class ZRe extends mte{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class YRe extends mte{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}oi((i,e)=>{v3=!1;const t=i.getColor(IMe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(Mz)){const n=i.getColor(Mz);n&&(v3=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class QRe extends a_{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,h=t.length;l<h;l++){const c=t[l];c.options.className&&(n[s++]=c)}n=n.sort((l,h)=>{if(l.options.zIndex<h.options.zIndex)return-1;if(l.options.zIndex>h.options.zIndex)return 1;const c=l.options.className,u=h.options.className;return c<u?-1:c>u?1:V.compareRangesUsingStarts(l.range,h.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const h=l-r;a[h]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const h=t[a];if(!h.options.isWholeLine)continue;const c='<div class="cdr '+h.options.className+'" style="left:0;width:100%;height:'+s+'px;"></div>',u=Math.max(h.range.startLineNumber,r),d=Math.min(h.range.endLineNumber,o);for(let f=u;f<=d;f++){const g=f-r;n[g]+=c}}}_renderNormalDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let h=0,c=t.length;h<c;h++){const u=t[h];if(u.options.isWholeLine)continue;const d=u.options.className,f=!!u.options.showIfCollapsed;let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new V(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.model.getLineMaxColumn(g.endLineNumber-1))),o===d&&a===f&&V.areIntersectingOrTouching(l,g)){l=V.plusRange(l,g);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n),o=d,a=f,l=g}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n)}_renderNormalDecoration(e,t,n,s,r,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let h=0,c=l.length;h<c;h++){const u=l[h];if(u.outsideRenderedLine)continue;const d=u.lineNumber-o;if(s&&u.ranges.length===1){const f=u.ranges[0];f.width===0&&(u.ranges[0]=new m2(f.left,this._typicalHalfwidthCharacterWidth))}for(let f=0,g=u.ranges.length;f<g;f++){const p=u.ranges[f],m='<div class="cdr '+n+'" style="left:'+String(p.left)+"px;width:"+String(p.width)+"px;height:"+r+'px;"></div>';a[d]+=m}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class uo extends ne{onclick(e,t){this._register(oe(e,Oe.CLICK,n=>t(new Jr(n))))}onmousedown(e,t){this._register(oe(e,Oe.MOUSE_DOWN,n=>t(new Jr(n))))}onmouseover(e,t){this._register(oe(e,Oe.MOUSE_OVER,n=>t(new Jr(n))))}onnonbubblingmouseout(e,t){this._register(L5(e,n=>t(new Jr(n))))}onkeydown(e,t){this._register(oe(e,Oe.KEY_DOWN,n=>t(new pi(n))))}onkeyup(e,t){this._register(oe(e,Oe.KEY_UP,n=>t(new pi(n))))}oninput(e,t){this._register(oe(e,Oe.INPUT,t))}onblur(e,t){this._register(oe(e,Oe.BLUR,t))}onfocus(e,t){this._register(oe(e,Oe.FOCUS,t))}ignoreGesture(e){Mt.ignoreTarget(e)}}const d0=11;class XRe extends uo{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=d0+"px",this.domNode.style.height=d0+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new Ag),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new oy),this._mousedownScheduleRepeatTimer=this._register(new js)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,o_,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class JRe extends ne{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new js)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const e3e=140;class _te extends uo{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new JRe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new Ag),this._shouldRender=!0,this.domNode=St(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new XRe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=St(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,r=>{r.leftButton&&(r.preventDefault(),this._sliderMouseDown(r,()=>{}))}),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderMousePosition(e);n<=r&&r<=s?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const r=Un(this.domNode.domNode);t=e.posx-r.left,n=e.posy-r.top}const s=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),s=this._sliderOrthogonalMousePosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,o_,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-s);if(qn&&l>e3e){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const c=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const t3e=20;class E1{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new E1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const h=Math.round(Math.max(t3e,Math.floor(n*a/s))),c=(a-h)/(s-n),u=r*c;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(h),computedSliderRatio:c,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=E1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const i3e=ia("scrollbar-button-left",De.triangleLeft),n3e=ia("scrollbar-button-right",De.triangleRight);class s3e extends _te{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new E1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-d0)/2,a=(t.horizontalScrollbarSize-d0)/2;this._createArrow({className:"scra",icon:i3e,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ym(null,1,0))}),this._createArrow({className:"scra",icon:n3e,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ym(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}const r3e=ia("scrollbar-button-up",De.triangleUp),o3e=ia("scrollbar-button-down",De.triangleDown);class a3e extends _te{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new E1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-d0)/2,a=(t.verticalScrollbarSize-d0)/2;this._createArrow({className:"scra",icon:r3e,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ym(null,0,1))}),this._createArrow({className:"scra",icon:o3e,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ym(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class nk{constructor(e,t,n,s,r,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new nk(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new nk(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class D2 extends ne{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new H),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new nk(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new A1(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=A1.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class qz{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function BI(i,e){const t=e-i;return function(n){return i+t*c3e(n)}}function l3e(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class A1{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),l3e(BI(e,r),BI(o,t),.33)}return BI(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new qz(n,s,!1)}return new qz(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return A1.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new A1(e,t,s,n)}}function h3e(i){return Math.pow(i,3)}function c3e(i){return 1-h3e(1-i)}const u3e=500,Gz=50;class d3e{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class w3{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const s=new d3e(e,t,n);s.score=this._computeScore(s),this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}w3.INSTANCE=new w3;class bte extends uo{constructor(e,t,n){super(),this._onScroll=this._register(new H),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new H),e.style.overflow="hidden",this._options=f3e(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new a3e(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new s3e(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=St(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=St(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=St(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onnonbubblingmouseout(this._listenOnDomNode,r=>this._onMouseOut(r)),this._hideTimeout=this._register(new js),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=mt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,vt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=mt(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new Ym(s))};this._mouseWheelToDispose.push(oe(this._listenOnDomNode,Oe.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=w3.INSTANCE;{const r=window.devicePixelRatio/Yke();qn||Ws?t.accept(Date.now(),e.deltaX/r,e.deltaY/r):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!vt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let h={};if(r){const c=Gz*r,u=l.scrollTop-(c<0?Math.floor(c):Math.ceil(c));this._verticalScrollbar.writeScrollPosition(h,u)}if(o){const c=Gz*o,u=l.scrollLeft-(c<0?Math.floor(c):Math.ceil(c));this._horizontalScrollbar.writeScrollPosition(h,u)}h=this._scrollable.validateScrollPosition(h),(l.scrollLeft!==h.scrollLeft||l.scrollTop!==h.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(h):this._scrollable.setScrollPositionNow(h),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),u3e)}}class NF extends bte{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new D2(0,s=>jl(s));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class MF extends bte{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class k2 extends NF{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function f3e(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,vt&&(e.className+=" mac"),e}class g3e extends co{constructor(e,t,n,s){super(e);const r=this._context.configuration.options,o=r.get(91),a=r.get(66),l=r.get(34),h=r.get(94),c={listenOnDomNode:n.domNode,className:"editor-scrollable "+jD(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:h,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new MF(t.domNode,c,this._context.viewLayout.getScrollable())),Zl.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=St(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(d,f,g)=>{const p={};if(f){const m=d.scrollTop;m&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+m,d.scrollTop=0)}if(g){const m=d.scrollLeft;m&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+m,d.scrollLeft=0)}this._context.model.setScrollPosition(p,1)};this._register(oe(n.domNode,"scroll",d=>u(n.domNode,!0,!0))),this._register(oe(t.domNode,"scroll",d=>u(t.domNode,!0,!1))),this._register(oe(s.domNode,"scroll",d=>u(s.domNode,!0,!1))),this._register(oe(this.scrollbarDomNode.domNode,"scroll",d=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),s=t.get(66),r=t.get(34),o=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+jD(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}oi((i,e)=>{const t=i.getColor(fy);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(av);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const s=i.getColor(lv);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${s};
			}
		`);const r=i.getColor(hv);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${r};
			}
		`)});class sk{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class RF extends a_{_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=[]}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=n.length;a<l;a++){const h=n[a],c=h.className;let u=Math.max(h.startLineNumber,e)-e;const d=Math.min(h.endLineNumber,t)-e;r===c?(u=Math.max(o+1,u),o=Math.max(o,d)):(r=c,o=d);for(let f=u;f<=o;f++)s[f].push(r)}return s}}class p3e extends RF{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.glyphMarginClassName;l&&(n[s++]=new sk(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+r+'px;"></div>',h=[];for(let c=t;c<=n;c++){const u=c-t,d=s[u];d.length===0?h[u]="":h[u]='<div class="cgmr codicon '+d.join(" ")+l}this._renderResult=h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class m3e extends a_{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(130),s=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130),s=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,s,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,h=this._lineHeight,c=this._primaryPosition,u=this.getGuidesByLine(o,a,c),d=[];for(let f=o;f<=a;f++){const g=f-o,p=u[g];let m="";const b=(n=(t=e.visibleRangeForPosition(new K(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const _ of p){const w=b+(_.visibleColumn-1)*this._spaceWidth;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const y=_.horizontalLine?_.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",x=_.horizontalLine?((r=(s=e.visibleRangeForPosition(new K(f,_.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;m+=`<div class="core-guide ${_.className} ${y}" style="left:${w}px;height:${h}px;width:${x}px"></div>`}d[g]=m}this._renderResult=d}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?gf.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?gf.EnabledForActive:gf.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const u=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:h}=this._context.model.getTextModelOptions(),c=[];for(let u=e;u<=t;u++){const d=new Array;c.push(d);const f=s?s[u-e]:[],g=new Zb(f),p=r?r[u-e]:[];for(let m=1;m<=p;m++){const b=(m-1)*h+1,_=f.length===0&&o<=u&&u<=a&&m===l;d.push(...g.takeWhile(y=>y.visibleColumn<b)||[]);const w=g.peek();(!w||w.visibleColumn!==b||w.horizontalLine)&&d.push(new Bp(b,_?"core-guide-indent-active":"core-guide-indent",null))}d.push(...g.takeWhile(m=>!0)||[])}return c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function CC(i){if(!(i&&i.isTransparent()))return i}oi((i,e)=>{const t=i.getColor(y2);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(C2)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const s=[{bracketColor:ite,guideColor:ZMe,guideColorActive:tRe},{bracketColor:nte,guideColor:YMe,guideColorActive:iRe},{bracketColor:ste,guideColor:QMe,guideColorActive:nRe},{bracketColor:rte,guideColor:XMe,guideColorActive:sRe},{bracketColor:ote,guideColor:JMe,guideColorActive:rRe},{bracketColor:ate,guideColor:eRe,guideColorActive:oRe}],r=new hte;let o=s.map(a=>{var l,h;const c=i.getColor(a.bracketColor),u=i.getColor(a.guideColor),d=i.getColor(a.guideColorActive),f=CC((l=CC(u))!==null&&l!==void 0?l:c==null?void 0:c.transparent(.3)),g=CC((h=CC(d))!==null&&h!==void 0?h:c);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(o2e);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${r.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${r.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${r.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class _3e{constructor(){this._currentVisibleRange=new V(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class b3e{constructor(e,t,n,s,r,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class v3e{constructor(e,t,n,s){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const h=e[a];r=Math.min(r,h.startLineNumber),o=Math.max(o,h.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class L2 extends co{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new gte(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,s=this._context.configuration.options,r=s.get(43),o=s.get(130);this._lineHeight=s.get(58),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(88),this._cursorSurroundingLines=s.get(25),this._cursorSurroundingLinesStyle=s.get(26),this._canUseLayerHinting=!s.get(28),this._viewLineOptions=new cz(n,this._context.theme.type),Zl.write(this.domNode,7),this.domNode.setClassName(`view-lines ${wf}`),Kn.applyFontInfo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new yi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new yi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new _3e,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new kl(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),s=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Kn.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new cz(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=n;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new b3e(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new v3e(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(s)===1)return new K(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(s,e,t);const l=this._context.model.getLineMinColumn(s);return a<l&&(a=l),new K(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===kl.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=V.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;let r=[],o=0;const a=new hz(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new K(s.startLineNumber,1)).lineNumber);const h=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<h||u>c)continue;const d=u===s.startLineNumber?s.startColumn:1,f=u===s.endLineNumber?s.endColumn:this._context.model.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,f,a);if(g){if(t&&u<n){const p=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new K(u+1,1)).lineNumber,p!==l&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new WIe(g.outsideRenderedLine,u,m2.from(g.ranges))}}return o===0?null:r}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new hz(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new zIe(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth())}return r&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Ws&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,r){const o=e.top,a=e.height,l=o+a;let h,c,u;if(s&&s.length>0){let g=s[0].startLineNumber,p=s[0].endLineNumber;for(let m=1,b=s.length;m<b;m++){const _=s[m];g=Math.min(g,_.startLineNumber),p=Math.max(p,_.endLineNumber)}h=!1,c=this._context.viewLayout.getVerticalOffsetForLineNumber(g),u=this._context.viewLayout.getVerticalOffsetForLineNumber(p)+this._lineHeight}else if(n)h=!0,c=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const g=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);c-=g*this._lineHeight,u+=Math.max(0,g-1)*this._lineHeight}(r===0||r===4)&&(u+=this._lineHeight);let f;if(u-c>a){if(!h)return-1;f=c}else if(r===5||r===6)if(r===6&&o<=c&&u<=l)f=o;else{const g=Math.max(5*this._lineHeight,a*.2),p=c-g,m=u-a;f=Math.max(m,p)}else if(r===1||r===2)if(r===2&&o<=c&&u<=l)f=o;else{const g=(c+u)/2;f=Math.max(0,g-a/2)}else f=this._computeMinimumScrolling(o,l,c,u,r===3,r===4);return f}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,s=n+t.width;let r=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const h of l.ranges)r=Math.min(r,Math.round(h.left)),o=Math.max(o,Math.round(h.left+h.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const h=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!h)return null;for(const c of h.ranges)r=Math.min(r,Math.round(c.left)),o=Math.max(o,Math.round(c.left+c.width))}return r=Math.max(0,r-L2.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,s,r,o){e=e|0,t=t|0,n=n|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-n<a){if(r)return n;if(o)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}}L2.HORIZONTAL_EXTRA_PX=30;class w3e extends RF{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(129);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName;l&&(n[s++]=new sk(a.range.startLineNumber,a.range.endLineNumber,l));const h=a.options.firstLineDecorationClassName;h&&(n[s++]=new sk(a.range.startLineNumber,a.range.startLineNumber,h))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let h=t;h<=n;h++){const c=h-t,u=s[c];let d="";for(let f=0,g=u.length;f<g;f++)d+='<div class="cldr '+u[f]+a;l[c]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class y3e extends RF{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName;l&&(n[s++]=new sk(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=[];for(let o=t;o<=n;o++){const a=o-t,l=s[a];let h="";for(let c=0,u=l.length;c<u;c++)h+='<div class="cmdr '+l[c]+'" style=""></div>';r[a]=h}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class eo{constructor(e,t,n,s){this._rgba8Brand=void 0,this.r=eo._clamp(e),this.g=eo._clamp(t),this.b=eo._clamp(n),this.a=eo._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}eo.Empty=new eo(0,0,0,0);class gy extends ne{constructor(){super(),this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Ri.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new gy),this._INSTANCE}_updateColorMap(){const e=Ri.getColorMap();if(!e){this._colors=[eo.Empty],this._backgroundIsLight=!0;return}this._colors=[eo.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new eo(s.r,s.g,s.b,Math.round(s.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}gy._INSTANCE=null;const C3e=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),S3e=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class I1{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=I1.soften(e,12/15),this.charDataLight=I1.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=ID(e[s]*t);return n}renderChar(e,t,n,s,r,o,a,l,h,c,u){const d=1*this.scale,f=2*this.scale,g=u?1:f;if(t+d>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const p=c?this.charDataLight:this.charDataNormal,m=S3e(s,h),b=e.width*4,_=a.r,w=a.g,y=a.b,x=r.r-_,L=r.g-w,S=r.b-y,k=Math.max(o,l),D=e.data;let T=m*d*f,M=n*b+t*4;for(let j=0;j<g;j++){let $=M;for(let ie=0;ie<d;ie++){const pe=p[T++]/255*(o/255);D[$++]=_+x*pe,D[$++]=w+L*pe,D[$++]=y+S*pe,D[$++]=k}M+=b}}blockRenderChar(e,t,n,s,r,o,a,l){const h=1*this.scale,c=2*this.scale,u=l?1:c;if(t+h>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,f=.5*(r/255),g=o.r,p=o.g,m=o.b,b=s.r-g,_=s.g-p,w=s.b-m,y=g+b*f,x=p+_*f,L=m+w*f,S=Math.max(r,a),k=e.data;let D=n*d+t*4;for(let T=0;T<u;T++){let M=D;for(let j=0;j<h;j++)k[M++]=y,k[M++]=x,k[M++]=L,k[M++]=S;D+=d}}}const Kz={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Zz=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=Kz[i[t]]<<4|Kz[i[t+1]]&15;return e},Yz={1:zf(()=>Zz("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:zf(()=>Zz("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class dv{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Yz[e]?n=new I1(Yz[e](),e):n=dv.createFromSampleData(dv.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let s=0;for(const r of C3e)n.fillText(String.fromCharCode(r),s,16/2),s+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let s=dv._downsample(e,t);return new I1(s,t)}static _downsampleChar(e,t,n,s,r){const o=1*r,a=2*r;let l=s,h=0;for(let c=0;c<a;c++){const u=c/a*16,d=(c+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let m=0,b=0;for(let w=u;w<d;w++){const y=t+Math.floor(w)*3840,x=1-(w-Math.floor(w));for(let L=g;L<p;L++){const S=1-(L-Math.floor(L)),k=y+Math.floor(L)*4,D=S*x;b+=D,m+=e[k]*e[k+3]/255*D}}const _=m/b;h=Math.max(h,_),n[l++]=ID(_)}}return h}static _downsample(e,t){const n=2*t*1*t,s=n*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let h=0;h<96;h++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=n,a+=10*4;if(l>0){const h=255/l;for(let c=0;c<s;c++)r[c]*=h}return r}}const x3e=140,D3e=2;class T1{constructor(e,t,n){const s=e.options,r=s.get(127),o=s.get(129),a=o.minimap,l=s.get(43),h=s.get(64);this.renderMinimap=a.renderMinimap,this.size=h.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(93),this.showSlider=h.showSlider,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=zf(()=>dv.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=T1._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=T1._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(wMe);return n?new eo(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(yMe);return t?eo._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class fv{constructor(e,t,n,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,s,r,o,a,l,h,c,u){const d=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){const x=l*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),L=Math.max(1,Math.floor(r*r/x)),S=Math.max(0,e.minimapHeight-L),k=S/(c-r),D=h*k,T=S>0,M=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new fv(h,c,T,k,D,L,1,Math.min(a,M))}let m;if(o&&n!==a){const x=n-t+1;m=Math.floor(x*f/d)}else{const x=r/p;m=Math.floor(x*f/d)}let b;e.scrollBeyondLastLine?b=(a-1)*f/d:b=Math.max(0,a*f/d-m),b=Math.min(e.minimapHeight-m,b);const _=b/(c-r),w=h*_;let y=0;if(e.scrollBeyondLastLine&&(y=r/p-1),g>=a+y){const L=a,S=b>0;return new fv(h,c,S,_,w,m,1,L)}else{let x=Math.max(1,Math.floor(t-w*d/f));u&&u.scrollHeight===c&&(u.scrollTop>h&&(x=Math.min(x,u.startLineNumber)),u.scrollTop<h&&(x=Math.max(x,u.startLineNumber)));const L=Math.min(a,x+g-1),S=(h-s)/p,k=(t-x+S)*f/d;return new fv(h,c,!0,_,k,m,x,L)}}}class rk{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}rk.INVALID=new rk(-1);class Qz{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new fte(()=>rk.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,r=n.length;s<r;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class OF{constructor(e,t,n,s){this._backgroundFillData=OF._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,r=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let h=0;for(let c=0;c<t;c++)for(let u=0;u<e;u++)l[h]=s,l[h+1]=r,l[h+2]=o,l[h+3]=a,h+=4;return l}}class N1{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const s=e.pixelRatio,r=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=hm.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:r,pixelRatio:s}),l=t/a,h=l/2;if(!n||n.minimapLines.length===0){let w=[];if(w[0]=1,a>1){for(let y=0,x=a-1;y<x;y++)w[y]=Math.round(y*l+h);w[a-1]=t}return[new N1(l,w),[]]}const c=n.minimapLines,u=c.length;let d=[],f=0,g=0,p=1;const m=10;let b=[],_=null;for(let w=0;w<a;w++){const y=Math.max(p,Math.round(w*l)),x=Math.max(y,Math.round((w+1)*l));for(;f<u&&c[f]<y;){if(b.length<m){const S=f+1+g;_&&_.type==="deleted"&&_._oldIndex===f-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},b.push(_)),g--}f++}let L;if(f<u&&c[f]<=x)L=c[f],f++;else if(w===0?L=1:w+1===a?L=t:L=Math.round(w*l+h),b.length<m){const S=f+1+g;_&&_.type==="inserted"&&_._i===w-1?_.insertToLineNumber++:(_={type:"inserted",_i:w,insertFromLineNumber:S,insertToLineNumber:S},b.push(_)),g++}d[w]=L,p=L}if(b.length<m)for(;f<u;){const w=f+1+g;_&&_.type==="deleted"&&_._oldIndex===f-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:f,deleteFromLineNumber:w,deleteToLineNumber:w},b.push(_)),g--,f++}else b=[{type:"flush"}];return[new N1(l,d),b]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class k3e extends co{constructor(e){super(e),this.tokensColorTracker=gy.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new T1(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=N1.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new ok(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new T1(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=N1.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let s=[];for(let r=0,o=t-e+1;r<o;r++)n[r]?s[r]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ge(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new V(r,1,o,this._context.model.getLineMaxColumn(o))}else n=new V(e,1,t,this._context.model.getLineMaxColumn(t));const s=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let r=[];for(const o of s){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),h=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new UJ(new V(l,a.startColumn,h,a.endColumn),o.options))}return r}return s}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new V(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class ok extends ne{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(Iz),this._domNode=St(document.createElement("div")),Zl.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=St(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=St(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=St(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=St(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=St(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=cn(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const h=Un(this._slider.domNode),c=h.top+h.height/2;this._startSliderDragging(n.buttons,n.posx,c,n.posy,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new Ag,this._sliderMouseDownListener=cn(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Mt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=oe(this._domNode.domNode,Yt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=oe(this._domNode.domNode,Yt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=cn(this._domNode.domNode,Yt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,s,r){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const h=Math.abs(l-t);if(qn&&h>x3e){this._model.setScrollTop(r.scrollTop);return}const c=a-n;this._model.setScrollTop(r.getDesiredScrollTopFromDelta(c))};s!==n&&o(s,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,o_,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new OF(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(Iz),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=fv.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(V.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((d,f)=>(d.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,s,r);const c=new Xz(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(h,t,c,e,o),this._renderDecorationsLineHighlights(h,n,c,e,o);const u=new Xz(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(h,t,u,e,o,l,a,s),this._renderDecorationsHighlights(h,n,u,e,o,l,a,s)}}_renderSelectionLineHighlights(e,t,n,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const h=Math.max(s.startLineNumber,l.startLineNumber),c=Math.min(s.endLineNumber,l.endLineNumber);if(h>c)continue;for(let f=h;f<=c;f++)n.set(f,!0);const u=(h-s.startLineNumber)*r,d=(c-s.startLineNumber)*r+r;a>=u||(a>o&&e.fillRect(Fc,o,e.canvas.width,a-o),o=u),a=d}a>o&&e.fillRect(Fc,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],h=l.options.minimap;if(!h||h.position!==Wl.Inline)continue;const c=Math.max(s.startLineNumber,l.range.startLineNumber),u=Math.min(s.endLineNumber,l.range.endLineNumber);if(c>u)continue;const d=h.getColor(this._theme);if(!d||d.isTransparent())continue;let f=o.get(d.toString());f||(f=d.transparent(.5).toString(),o.set(d.toString(),f)),e.fillStyle=f;for(let g=c;g<=u;g++){if(n.has(g))continue;n.set(g,!0);const p=(c-s.startLineNumber)*r;e.fillRect(Fc,p,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const h of t){const c=Math.max(s.startLineNumber,h.startLineNumber),u=Math.min(s.endLineNumber,h.endLineNumber);if(!(c>u))for(let d=c;d<=u;d++)this.renderDecorationOnLine(e,n,h,this._selectionColor,s,d,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,n,s,r,o,a,l){for(const h of t){const c=h.options.minimap;if(!c)continue;const u=Math.max(s.startLineNumber,h.range.startLineNumber),d=Math.min(s.endLineNumber,h.range.endLineNumber);if(u>d)continue;const f=c.getColor(this._theme);if(!(!f||f.isTransparent()))for(let g=u;g<=d;g++)switch(c.position){case Wl.Inline:this.renderDecorationOnLine(e,n,h.range,f,s,g,r,r,o,a,l);continue;case Wl.Gutter:const p=(g-s.startLineNumber)*r,m=2;this.renderDecoration(e,f,m,p,D3e,r);continue}}}renderDecorationOnLine(e,t,n,s,r,o,a,l,h,c,u){const d=(o-r.startLineNumber)*l;if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,p=f===o?n.startColumn:1,m=g===o?n.endColumn:this._model.getLineMaxColumn(o),b=this.getXOffsetForPosition(t,o,p,h,c,u),_=this.getXOffsetForPosition(t,o,m,h,c,u);this.renderDecoration(e,s,b,d,_-b,a)}getXOffsetForPosition(e,t,n,s,r,o){if(n===1)return Fc;if((n-1)*r>=o)return o;let l=e.get(t);if(!l){const h=this._model.getLineContent(t);l=[Fc];let c=Fc;for(let u=1;u<h.length+1;u++){const d=h.charCodeAt(u-1),f=d===9?s*r:Da(d)?2*r:r,g=c+f;if(g>=o){l[u]=o;break}l[u]=g,c=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,r,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const pe=this._lastRenderData._get();return new Qz(e,pe.imageData,pe.lines)}const r=this._getBuffer();if(!r)return null;let[o,a,l]=ok._renderUntouchedLines(r,t,n,s,this._lastRenderData);const h=this._model.getMinimapLinesRenderingData(t,n,l),c=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),m=this._model.options.renderMinimap,b=this._model.options.charRenderer(),_=this._model.options.fontScale,w=this._model.options.minimapCharWidth,x=(m===1?2:2+1)*_,L=s>x?Math.floor((s-x)/2):0,S=d.a/255,k=new eo(Math.round((d.r-u.r)*S+u.r),Math.round((d.g-u.g)*S+u.g),Math.round((d.b-u.b)*S+u.b),255);let D=0;const T=[];for(let pe=0,be=n-t+1;pe<be;pe++)l[pe]&&ok._renderLine(r,k,d.a,p,m,w,g,f,b,D,L,c,h[pe],_,s),T[pe]=new rk(D),D+=s;const M=o===-1?0:o,$=(a===-1?r.height:a)-M;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,M,r.width,$),new Qz(e,r,T)}static _renderUntouchedLines(e,t,n,s,r){const o=[];if(!r){for(let k=0,D=n-t+1;k<D;k++)o[k]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,h=a.rendLineNumberStart,c=a.lines,u=c.length,d=e.width,f=e.data,g=(n-t+1)*s*d*4;let p=-1,m=-1,b=-1,_=-1,w=-1,y=-1,x=0;for(let k=t;k<=n;k++){const D=k-t,T=k-h,M=T>=0&&T<u?c[T].dy:-1;if(M===-1){o[D]=!0,x+=s;continue}const j=M*d*4,$=(M+s)*d*4,ie=x*d*4,pe=(x+s)*d*4;_===j&&y===ie?(_=$,y=pe):(b!==-1&&(f.set(l.subarray(b,_),w),p===-1&&b===0&&b===w&&(p=_),m===-1&&_===g&&b===w&&(m=b)),b=j,_=$,w=ie,y=pe),o[D]=!1,x+=s}b!==-1&&(f.set(l.subarray(b,_),w),p===-1&&b===0&&b===w&&(p=_),m===-1&&_===g&&b===w&&(m=b));const L=p===-1?-1:p/(d*4),S=m===-1?-1:m/(d*4);return[L,S,o]}static _renderLine(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p){const m=f.content,b=f.tokens,_=e.width-o,w=p===1;let y=Fc,x=0,L=0;for(let S=0,k=b.getCount();S<k;S++){const D=b.getEndOffset(S),T=b.getForeground(S),M=a.getColor(T);for(;x<D;x++){if(y>_)return;const j=m.charCodeAt(x);if(j===9){const $=d-(x+L)%d;L+=$-1,y+=$*o}else if(j===32)y+=o;else{const $=Da(j)?2:1;for(let ie=0;ie<$;ie++)if(r===2?h.blockRenderChar(e,y,c+u,M,l,t,n,w):h.renderChar(e,y,c+u,j,M,l,t,n,g,s,w),y+=o,y>_)return}}}}}class Xz{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}oi((i,e)=>{const t=i.getColor(CMe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(SMe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const s=i.getColor(xMe);s&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const r=i.getColor(fy);r&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)});class L3e extends co{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=St(document.createElement("div")),Zl.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=St(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.parentNode.removeChild(s),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._renderWidget(this._widgets[r])}}}class E3e{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(127),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const s=t.getColor(WMe);this.borderColor=s?s.toString():null,this.hideCursor=n.get(51);const r=t.getColor(Xee);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(64),a=o.enabled,l=o.side,h=a?t.getColor(zMe)||Ri.getDefaultBackground():null;h===null||l==="left"?this.backgroundColor=null:this.backgroundColor=Q.Format.CSS.formatHex(h);const u=n.get(129).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[d,f]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=d,this.w=f}_initLanes(e,t,n){const s=t-e;if(n>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,h=l+r,c=l+r+a;return[[0,l,h,l,c,l,h,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(n===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class A3e extends co{constructor(e){super(e),this._domNode=St(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Ri.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new E3e(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(K.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),o=t/r,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,h=l/2|0,c=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?c.clearRect(0,0,e,t):(c.fillStyle=this._settings.backgroundColor,c.fillRect(0,0,e,t));const u=this._settings.x,d=this._settings.w;a.sort($J.cmp);for(const f of a){const g=f.color,p=f.data;c.fillStyle=g;let m=0,b=0,_=0;for(let w=0,y=p.length/3;w<y;w++){const x=p[3*w],L=p[3*w+1],S=p[3*w+2];let k=s.getVerticalOffsetForLineNumber(L)*o|0,D=(s.getVerticalOffsetForLineNumber(S)+n)*o|0;if(D-k<l){let M=(k+D)/2|0;M<h?M=h:M+h>t&&(M=t-h),k=M-h,D=M+h}k>_+1||x!==m?(w!==0&&c.fillRect(u[m],b,d[m],_-b),m=x,b=k,_=D):D>_&&(_=D)}c.fillRect(u[m],b,d[m],_-b)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,g=f/2|0,p=this._settings.x[7],m=this._settings.w[7];c.fillStyle=this._settings.cursorColor;let b=-100,_=-100;for(let w=0,y=this._cursorPositions.length;w<y;w++){const x=this._cursorPositions[w];let L=s.getVerticalOffsetForLineNumber(x.lineNumber)*o|0;L<g?L=g:L+g>t&&(L=t-g);const S=L-g,k=S+f;S>_+1?(w!==0&&c.fillRect(p,b,m,_-b),b=S,_=k):k>_&&(_=k)}c.fillRect(p,b,m,_-b)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(c.beginPath(),c.lineWidth=1,c.strokeStyle=this._settings.borderColor,c.moveTo(0,0),c.lineTo(0,t),c.stroke(),c.moveTo(0,0),c.lineTo(e,0),c.stroke())}}class Jz{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class M1{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class I3e{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(M1.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=n/s,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,h=this._zones.length;l<h;l++){const c=this._zones[l];if(!e){const _=c.getColorZones();if(_){a.push(_);continue}}const u=Math.floor(r*this._getVerticalOffsetForLine(c.startLineNumber)),d=Math.floor(r*(this._getVerticalOffsetForLine(c.endLineNumber)+t));let f=Math.floor((u+d)/2),g=d-f;g<o&&(g=o),f-g<0&&(f=g),f+g>n&&(f=n-g);const p=c.color;let m=this._color2Id[p];m||(m=++this._lastAssignedId,this._color2Id[p]=m,this._id2Color[m]=p);const b=new Jz(f-g,f+g,m);c.setColorZone(b),a.push(b)}return this._colorZonesInvalid=!1,a.sort(Jz.compare),a}}class T3e extends uy{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=St(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new I3e(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,s,e),!0}_renderOneLane(e,t,n,s){let r=0,o=0,a=0;for(const l of t){const h=l.colorId,c=l.from,u=l.to;h!==r?(e.fillRect(0,o,s,a-o),r=h,e.fillStyle=n[r],o=c,a=u):a>=c?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=c,a=u)}e.fillRect(0,o,s,a-o)}}class N3e extends co{constructor(e){super(e),this.domNode=St(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.model.getTextModelOptions(),r=s;let o=t-e;for(;o>0;){const a=St(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}oi((i,e)=>{const t=i.getColor(FMe);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class M3e extends co{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=St(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(129);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}oi((i,e)=>{const t=i.getColor(fy);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class R3e{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class O3e{constructor(e,t){this.lineNumber=e,this.ranges=t}}function P3e(i){return new R3e(i)}function F3e(i){return new O3e(i.lineNumber,i.ranges.map(P3e))}class vi extends a_{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let h=0;!r&&h<n.length;h++)n[h].lineNumber===a&&(r=n[h].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let h=n.length-1;!o&&h>=0;h--)n[h].lineNumber===l&&(o=n[h].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const h=t[a].ranges[0],c=h.left,u=h.left+h.width,d={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;SC(c-g)<s?d.top=2:c>g&&(d.top=1),SC(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else r&&(d.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;SC(c-g)<s?d.bottom=2:g<c&&c<p&&(d.bottom=1),SC(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);h.startStyle=d,h.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(F3e);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,s,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=s[0].lineNumber,h=s[s.length-1].lineNumber;for(let c=0,u=s.length;c<u;c++){const d=s[c],f=d.lineNumber,g=f-t,p=n&&(f===h||f===l)?a:o,m=n&&f===l?1:0;let b="",_="";for(let w=0,y=d.ranges.length;w<y;w++){const x=d.ranges[w];if(r){const S=x.startStyle,k=x.endStyle;if(S.top===1||S.bottom===1){b+=this._createSelectionPiece(m,p,vi.SELECTION_CLASS_NAME,x.left-vi.ROUNDED_PIECE_WIDTH,vi.ROUNDED_PIECE_WIDTH);let D=vi.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(D+=" "+vi.SELECTION_TOP_RIGHT),S.bottom===1&&(D+=" "+vi.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(m,p,D,x.left-vi.ROUNDED_PIECE_WIDTH,vi.ROUNDED_PIECE_WIDTH)}if(k.top===1||k.bottom===1){b+=this._createSelectionPiece(m,p,vi.SELECTION_CLASS_NAME,x.left+x.width,vi.ROUNDED_PIECE_WIDTH);let D=vi.EDITOR_BACKGROUND_CLASS_NAME;k.top===1&&(D+=" "+vi.SELECTION_TOP_LEFT),k.bottom===1&&(D+=" "+vi.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(m,p,D,x.left+x.width,vi.ROUNDED_PIECE_WIDTH)}}let L=vi.SELECTION_CLASS_NAME;if(r){const S=x.startStyle,k=x.endStyle;S.top===0&&(L+=" "+vi.SELECTION_TOP_LEFT),S.bottom===0&&(L+=" "+vi.SELECTION_BOTTOM_LEFT),k.top===0&&(L+=" "+vi.SELECTION_TOP_RIGHT),k.bottom===0&&(L+=" "+vi.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(m,p,L,x.left,x.width)}e[g][0]+=b,e[g][1]+=_}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=n;o<=s;o++){const a=o-n;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const h=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=h,this._actualRenderOneSelection(t,n,this._selections.length>1,h)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}vi.SELECTION_CLASS_NAME="selected-text";vi.SELECTION_TOP_LEFT="top-left-radius";vi.SELECTION_BOTTOM_LEFT="bottom-left-radius";vi.SELECTION_TOP_RIGHT="top-right-radius";vi.SELECTION_BOTTOM_RIGHT="bottom-right-radius";vi.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";vi.ROUNDED_PIECE_WIDTH=10;oi((i,e)=>{const t=i.getColor(bu);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(LF);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const s=i.getColor(DNe);s&&!s.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${s}; }`)});function SC(i){return i<0?-i:i}class eH{constructor(e,t,n,s,r,o){this.top=e,this.left=t,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=o}}class tH{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=St(document.createElement("div")),this._domNode.setClassName(`cursor ${wf}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Kn.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new K(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Kn.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===Dn.Line||this._cursorStyle===Dn.LineThin){const d=e.visibleRangeForPosition(this._position);if(!d||d.outsideRenderedLine)return null;let f;if(this._cursorStyle===Dn.Line){if(f=nW(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2){const m=this._context.model.getLineContent(this._position.lineNumber),b=bD(m,this._position.column-1);t=m.substr(this._position.column-1,b)}}else f=nW(1);let g=d.left;f>=2&&g>=1&&(g-=1);const p=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new eH(p,g,f,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),s=bD(n,this._position.column-1),r=e.linesVisibleRangesForRange(new V(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+s),!1);if(!r||r.length===0)return null;const o=r[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let h="";if(this._cursorStyle===Dn.Block){const d=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,s);const f=d.tokens.findTokenIndexAtOffset(this._position.column-1);h=d.tokens.getClassName(f)}let c=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Dn.Underline||this._cursorStyle===Dn.UnderlineThin)&&(c+=this._lineHeight-2,u=2),new eH(c,a.left,l,u,t,h)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${wf} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class R1 extends co{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new tH(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=St(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new js,this._cursorFlatBlinkInterval=new oy,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let s=0;s<n;s++){const r=new tH(this._context);this._domNode.domNode.insertBefore(r.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(r)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let s=0;s<n;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},R1.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},R1.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Dn.Line:e+=" cursor-line-style";break;case Dn.Block:e+=" cursor-block-style";break;case Dn.Underline:e+=" cursor-underline-style";break;case Dn.LineThin:e+=" cursor-line-thin-style";break;case Dn.BlockOutline:e+=" cursor-block-outline-style";break;case Dn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}R1.BLINK_INTERVAL=500;oi((i,e)=>{const t=i.getColor(Xee);if(t){let n=i.getColor(OMe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const VI=()=>{throw new Error("Invalid change accessor")};class B3e extends co{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=St(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=St(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.model.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],h=this._zones[l],c=this._computeWhitespaceProps(h.delegate);h.isInHiddenArea=c.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==c.afterViewLineNumber||u.height!==c.heightInPx)&&(s.changeOneWhitespace(l,c.afterViewLineNumber,c.heightInPx),this._safeCallOnComputedHeight(h.delegate,c.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new K(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),r=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const s={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};V3e(e,s),s.addZone=VI,s.removeZone=VI,s.layoutZone=VI}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:St(t.domNode),marginDomNode:t.marginDomNode?St(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){nt(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){nt(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],h=this._zones[l];let c=0,u=0,d="none";n.hasOwnProperty(l)?(c=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,d="block",h.isVisible||(h.domNode.setAttribute("monaco-visible-view-zone","true"),h.isVisible=!0),this._safeCallOnDomNodeTop(h.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(h.isVisible&&(h.domNode.removeAttribute("monaco-visible-view-zone"),h.isVisible=!1),this._safeCallOnDomNodeTop(h.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),h.domNode.setTop(c),h.domNode.setHeight(u),h.domNode.setDisplay(d),h.marginDomNode&&(h.marginDomNode.setTop(c),h.marginDomNode.setHeight(u),h.marginDomNode.setDisplay(d))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function V3e(i,e){try{return i(e)}catch(t){nt(t)}}class W3e{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class z3e{constructor(e,t,n){this.configuration=e,this.theme=new W3e(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class H3e{constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new V(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class U3e extends uy{constructor(e,t,n,s,r,o){super(),this._selections=[new Ge(1,1,1,1)],this._renderAnimationFrame=null;const a=new HRe(t,s,r,e);this._context=new z3e(t,n.getColorTheme(),s),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(p=>{this._context.theme.update(p),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new PRe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=St(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=St(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=St(document.createElement("div")),Zl.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new g3e(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new L2(this._context,this._linesContent),this._viewZones=new B3e(this._context),this._viewParts.push(this._viewZones);const l=new A3e(this._context);this._viewParts.push(l);const h=new M3e(this._context);this._viewParts.push(h);const c=new jRe(this._context);this._viewParts.push(c),c.addDynamicOverlay(new ZRe(this._context)),c.addDynamicOverlay(new vi(this._context)),c.addDynamicOverlay(new m3e(this._context)),c.addDynamicOverlay(new QRe(this._context));const u=new qRe(this._context);this._viewParts.push(u),u.addDynamicOverlay(new YRe(this._context)),u.addDynamicOverlay(new p3e(this._context)),u.addDynamicOverlay(new y3e(this._context)),u.addDynamicOverlay(new w3e(this._context)),u.addDynamicOverlay(new u0(this._context));const d=new Qf(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(d),this._contentWidgets=new GRe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new R1(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new L3e(this._context),this._viewParts.push(this._overlayWidgets);const f=new N3e(this._context);this._viewParts.push(f);const g=new k3e(this._context);if(this._viewParts.push(g),l){const p=this._scrollbar.getOverviewRulerLayoutInfo();p.parent.insertBefore(l.getDomNode(),p.insertBefore)}this._linesContent.appendChild(c.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(h.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new ORe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new SRe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new K(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new K(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(129);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(126)+" "+jD(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=HX(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){$3e(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!D5(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new H3e(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const s=new VIe(this._context.viewLayout,n,this._viewLines);for(const r of e)r.prepareRender(s);for(const r of e)r.render(s),r.onDidRender();Math.abs(gD()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new K(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?x2.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new T3e(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const s=e.position?e.position.position:null;s!==null&&(t=new V(s.lineNumber,s.column,s.lineNumber,s.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function $3e(i){try{return i()}catch(e){nt(e)}}class ak{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new xn(new V(1,1,1,1),0,new K(1,1),0),new xn(new V(1,1,1,1),0,new K(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ot(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new Ge(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Ge(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,s,n,o),l=this._validatePositionWithCache(e,r,s,a);return n.equals(o)&&s.equals(a)&&r.equals(l)?t:new xn(V.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=ak._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new xn(s,r,o,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new xn(s,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new xn(s,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new K(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new K(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new V(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new xn(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class iH{constructor(e){this.context=e,this.primaryCursor=new ak(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;s.isBefore(e)&&(e=s)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(s)&&(e=s)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(ot.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let s=n-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>n){let s=t-n;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let s=0;s<n;s++)this.secondaryCursors[s].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new ak(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,s)=>n.selection.startLineNumber===s.selection.startLineNumber?n.selection.startColumn-s.selection.startColumn:n.selection.startLineNumber-s.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const h=s.index<r.index?n:n+1,c=s.index<r.index?n+1:n,u=t[c].index,d=t[h].index,f=t[c].selection,g=t[h].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),m=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let _;u===this.lastAddedCursorIndex?(_=m,this.lastAddedCursorIndex=d):_=b;let w;_?w=new Ge(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):w=new Ge(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[h].selection=w;const y=ot.fromModelSelection(w);e[d].setState(this.context,y.modelState,y.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(c,1),this._removeSecondaryCursor(u-1),n--}}}}class j3e{constructor(){this.type=0}}class q3e{constructor(){this.type=1}}class G3e{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class K3e{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class dp{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class xC{constructor(){this.type=5}}class Z3e{constructor(e){this.type=6,this.isFocused=e}}class Y3e{constructor(){this.type=7}}class DC{constructor(){this.type=8}}class vte{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class y3{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class C3{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class YS{constructor(e,t,n,s,r,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o}}class Q3e{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class X3e{constructor(){this.type=14}}class J3e{constructor(e){this.type=15,this.ranges=e}}class e4e{constructor(){this.type=16}}let t4e=class{constructor(){this.type=17}};class i4e extends ne{constructor(){super(),this._onEvent=this._register(new H),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new n4e),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class n4e{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class PF{constructor(e,t,n,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new PF(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class FF{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new FF(this.oldHasFocus,e.hasFocus)}}class BF{constructor(e,t,n,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new BF(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class nH{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class lk{constructor(e,t,n,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return lk._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new lk(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class s4e{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class WI{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class sH{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(V.compareRangesUsingStarts),e.sort(V.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class f0 extends ne{constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new Vz(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new iH(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=mt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Vz(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let r=!1;s!==null&&s.length>f0.MAX_CURSOR_COUNT&&(s=s.slice(0,f0.MAX_CURSOR_COUNT),r=!0);const o=new WI(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,s){const r=this._cursors.getViewPositions();if(r.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,s);return}else{const o=r[0],a=new V(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,s)}}_revealPrimaryCursor(e,t,n,s,r){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,s,r);else{const a=o[0],l=new V(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,s,r)}}_emitCursorRevealRange(e,t,n,s,r,o,a){e.emitViewEvent(new YS(t,n,s,r,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let h=a,c=l;o.selectionStart&&o.selectionStart.lineNumber&&(h=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(c=o.selectionStart.column),n.push({selectionStartLineNumber:h,selectionStartColumn:c,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ot.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof Eee){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new iH(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const s=ot.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,s)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ot.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:Rt.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:Rt.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,s){this.setStates(e,t,s,ot.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new sH(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=r4e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof dte&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),s.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,r){const o=new WI(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new K3e(l,a)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((h,c)=>!h.modelState.equals(s.cursorState[c].modelState))){const h=s?s.cursorState.map(u=>u.modelState.selection):null,c=s?s.modelVersionId:0;e.emitOutgoingEvent(new lk(h,a,c,o.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const h=l[0].open,c=r.text.length-o[2].length-1,u=r.text.lastIndexOf(h,c-1);if(u===-1)return null;t.push([u,c])}return t}executeEdits(e,t,n,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,h=>{if(r)for(let u=0,d=r.length;u<d;u++){const[f,g]=r[u],p=h[u],m=p.range.startLineNumber,b=p.range.startColumn-1+f,_=p.range.startColumn-1+g;o.push(new V(m,_+1,m,_+2)),a.push(new V(m,b+1,m,_+2))}const c=s(h);return c&&(this._isHandling=!0),c});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,s=0){if(this.context.cursorConfig.readOnly)return;const r=new WI(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){nt(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,r,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return sH.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(ki.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=bD(t,r),a=t.substr(r,o);this._executeEditOperation(ki.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(ki.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,r,o){if(t.length===0&&n===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const h=l.getPosition();return new Ge(h.lineNumber,h.column+r,h.lineNumber,h.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(ki.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,r))},e,o)}paste(e,t,n,s,r){this._executeEdit(()=>{this._executeEditOperation(ki.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Xf.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Js(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Js(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}f0.MAX_CURSOR_COUNT=1e4;class r4e{static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,n);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let h=0,c=s.length;h<c;h++)r.hasOwnProperty(s[h].identifier.major.toString())||o.push(s[h]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,h=>{let c=[];for(let f=0;f<e.selectionsBefore.length;f++)c[f]=[];for(const f of h)f.identifier&&c[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor;let d=[];for(let f=0;f<e.selectionsBefore.length;f++)c[f].length>0?(c[f].sort(u),d[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>c[f],getTrackedSelection:g=>{const p=parseInt(g,10),m=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new Ge(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):new Ge(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn)}})):d[f]=e.selectionsBefore[f];return d});a||(a=e.selectionsBefore);let l=[];for(let h in r)r.hasOwnProperty(h)&&l.push(parseInt(h,10));l.sort((h,c)=>c-h);for(const h of l)a.splice(h,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){let s=[],r=0;const o=(u,d,f=!1)=>{V.isEmpty(u)&&d===""||s.push({identifier:{major:t,minor:r++},range:u,text:d,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const c={addEditOperation:o,addTrackedEditOperation:(u,d,f)=>{a=!0,o(u,d,f)},trackSelection:(u,d)=>{const f=Ge.liftSelection(u);let g;if(f.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const p=e.trackedRanges.length,m=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=m,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{n.getEditOperations(e.model,c)}catch(u){return nt(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-V.compareRangesUsingEnds(n.range,s.range));let t={};for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(V.getStartPosition(s.range).isBefore(V.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class wte{constructor(e,t,n,s,r,o){this.id=e,this.label=t,this.alias=n,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const rH={getInitialState:()=>ZL,tokenize2:(i,e,t,n)=>bJ(0,i,t,n)};function yte(i,e,t=rH){return a4e(i,e,t||rH)}function o4e(i,e,t,n,s,r,o){let a="<div>",l=n,h=0,c=!0;for(let u=0,d=e.getCount();u<d;u++){const f=e.getEndOffset(u);if(f<=n)continue;let g="";for(;l<f&&l<s;l++){const p=i.charCodeAt(l);switch(p){case 9:let m=r-(l+h)%r;for(h+=m-1;m>0;)o&&c?(g+="&#160;",c=!1):(g+=" ",c=!0),m--;break;case 60:g+="&lt;",c=!1;break;case 62:g+="&gt;",c=!1;break;case 38:g+="&amp;",c=!1;break;case 0:g+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:g+="",c=!1;break;case 13:g+="&#8203",c=!1;break;case 32:o&&c?(g+="&#160;",c=!1):(g+=" ",c=!0);break;default:g+=String.fromCharCode(p),c=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function a4e(i,e,t){let n='<div class="monaco-tokenized-source">';const s=ql(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const h=t.tokenize2(l,!0,r,0);Ln.convertToEndOffset(h.tokens,l.length);const u=new Ln(h.tokens,l,e).inflate();let d=0;for(let f=0,g=u.getCount();f<g;f++){const p=u.getClassName(f),m=u.getEndOffset(f);n+=`<span class="${p}">${T5(l.substring(d,m))}</span>`,d=m}r=h.endState}return n+="</div>",n}class l4e{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class h4e{constructor(e,t,n,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=r,this.prefixSum=0}}class O1{constructor(e,t,n,s){this._instanceId=tJ(++O1.INSTANCE_COUNT),this._pendingChanges=new l4e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new h4e(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const h=this._findWhitespaceIndex(l.id);h!==-1&&this._removeWhitespace(h)}return}const s=new Set;for(const l of n)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{let h=[];for(const c of l)if(!s.has(c.id)){if(r.has(c.id)){const u=r.get(c.id);c.afterLineNumber=u.newAfterLineNumber,c.height=u.newHeight}h.push(c)}return h},a=o(this._arr).concat(o(e));a.sort((l,h)=>l.afterLineNumber===h.afterLineNumber?l.ordinal-h.ordinal:l.afterLineNumber-h.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=O1.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const o=(s-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let h,c;a===-1?(a=l,c=o+1,h=0):(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,h=this.getHeightForWhitespaceIndex(a)|0);let u=r,d=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/n)*n,d-=g);const p=[],m=e+(t-e)/2;let b=-1;for(let x=s;x<=o;x++){if(b===-1){const L=u,S=u+n;(L<=m&&m<S||L>m)&&(b=x)}for(u+=n,p[x-s]=d,d+=n;c===x;)d+=h,u+=h,a++,a>=l?c=o+1:(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,h=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=x;break}}b===-1&&(b=o);const _=this.getVerticalOffsetForLineNumber(o)|0;let w=s,y=o;return w<y&&r<e&&w++,w<y&&_+n>t&&y--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:b,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:y}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=s+r)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];let r=[];for(let o=n;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}O1.INSTANCE_COUNT=0;const c4e=125;class _b{constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class u4e extends ne{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new H),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new _b(0,0,0,0),this._scrollable=this._register(new D2(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new PF(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class d4e extends ne{constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,r=s.get(129),o=s.get(74);this._linesLayout=new O1(t,s.get(58),o.top,o.bottom),this._scrollable=this._register(new u4e(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new _b(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?c4e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(129)){const n=t.get(129),s=n.contentWidth,r=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new _b(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(91);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(93)?r+=Math.max(0,t-s.get(58)-s.get(74).bottom):r+=this._getHorizontalScrollbarHeight(e,n),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new _b(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new UW(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new UW(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(130),s=t.get(43);if(n.isViewportWrapping){const r=t.get(129),o=t.get(64);return e>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+r.verticalScrollbarWidth:e}else{const r=t.get(92)*s.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new _b(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class f4e{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class g4e{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const n=this._counts[e],s=e>0?this._modelToView[e-1]:0;this._modelToView[e]=s+n;for(let r=0;r<n;r++)this._viewToModel[s+r]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=_1(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],n=t>0?this._modelToView[t-1]:0;return new MJ(t,e-n)}}class p4e{constructor(e,t,n,s,r,o,a,l,h){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=h,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new f4e(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=n.length,o=this.createLineBreaksComputer(),a=new Zb(za.fromDecorations(s));for(let p=0;p<r;p++){const m=a.takeWhile(b=>b.lineNumber===p+1);o.addRequest(n[p],m,t?t[p]:null)}const l=o.finalize();let h=[],c=this.hiddenAreasIds.map(p=>this.model.getDecorationRange(p)).sort(V.compareRangesUsingStarts),u=1,d=0,f=-1,g=f+1<c.length?d+1:r+2;for(let p=0;p<r;p++){let m=p+1;m===g&&(f++,u=c[f].startLineNumber,d=c[f].endLineNumber,g=f+1<c.length?d+1:r+2);let b=m>=u&&m<=d,_=HI(l[p],!b);h[p]=_.getViewLineCount(),this.lines[p]=_}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new g4e(h)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(o=>this.model.validateRange(o)).sort(V.compareRangesUsingStarts),n=[],s=t[0].startLineNumber,r=t[0].endLineNumber;for(let o=1,a=t.length;o<a;o++){let l=t[o];l.startLineNumber>r+1?(n.push(new V(s,1,r,1)),s=l.startLineNumber,r=l.endLineNumber):l.endLineNumber>r&&(r=l.endLineNumber)}return n.push(new V(s,1,r,1)),n}setHiddenAreas(e){let t=this._reduceRanges(e),n=this.hiddenAreasIds.map(u=>this.model.getDecorationRange(u)).sort(V.compareRangesUsingStarts);if(t.length===n.length){let u=!1;for(let d=0;d<t.length;d++)if(!t[d].equalsRange(n[d])){u=!0;break}if(!u)return!1}let s=[];for(const u of t)s.push({range:u,options:_t.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,s);let r=t,o=1,a=0,l=-1,h=l+1<r.length?a+1:this.lines.length+2,c=!1;for(let u=0;u<this.lines.length;u++){let d=u+1;d===h&&(l++,o=r[l].startLineNumber,a=r[l].endLineNumber,h=l+1<r.length?a+1:this.lines.length+2);let f=!1;if(d>=o&&d<=a?this.lines[u].isVisible()&&(this.lines[u]=this.lines[u].setVisible(!1),f=!0):(c=!0,this.lines[u].isVisible()||(this.lines[u]=this.lines[u].setVisible(!0),f=!0)),f){let g=this.lines[u].getViewLineCount();this.prefixSumComputer.changeValue(u,g)}}return c||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===s;if(r&&o&&a&&l)return!1;const h=r&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s;let c=null;if(h){c=[];for(let u=0,d=this.lines.length;u<d;u++)c[u]=this.lines[u].getLineBreakData()}return this._constructLines(!1,c),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let s=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,r=this.prefixSumComputer.getAccumulatedValue(n-1);return this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1),new y3(s,r)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.lines[t-2].isVisible();let o=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],h=[];for(let c=0,u=s.length;c<u;c++){let d=HI(s[c],!r);l.push(d);let f=d.getViewLineCount();a+=f,h[c]=f}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,h),new C3(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let s=t-1,r=this.lines[s].getViewLineCount(),o=this.lines[s].isVisible(),a=HI(n,o);this.lines[s]=a;let l=this.lines[s].getViewLineCount(),h=!1,c=0,u=-1,d=0,f=-1,g=0,p=-1;r>l?(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=c+l-1,g=u+1,p=g+(r-l)-1,h=!0):r<l?(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=c+r-1,d=u+1,f=d+(l-r)-1,h=!0):(c=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=c+l-1),this.prefixSumComputer.changeValue(s,l);const m=c<=u?new vte(c,u):null,b=d<=f?new C3(d,f):null,_=g<=p?new y3(g,p):null;return[h,m,b,_]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),h=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:h.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return new oH(n+1,s)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new K(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new K(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const h=this.lines[l-1];if(h.isVisible()){let c=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:h.getViewLineCount();for(let d=c;d<u;d++)a.push(new oH(l,d))}if(!h.isVisible()&&o){const c=new K(l-1,this.model.getLineMaxColumn(l-1)+1),u=V.fromPositions(o,c);r.push(new aH(u,a)),a=[],o=null}else h.isVisible()&&!o&&(o=new K(l,1))}if(o){const l=V.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new aH(l,a))}return r}getViewLinesBracketGuides(e,t,n,s){const r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,h=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const c of a.viewLines)if(c.isWrappedLineContinuation&&this.getMinColumnOfViewLine(c)===1)o.push([]);else{let u=h[c.modelLineNumber-l];u=u.map(d=>d.horizontalLine?new Bp(d.visibleColumn,d.className,new FR(d.horizontalLine.top,this.convertModelPositionToViewPosition(c.modelLineNumber,d.horizontalLine.endColumn).column)):d),o.push(u)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[],o=[],a=[];const l=n.lineNumber-1,h=s.lineNumber-1;let c=null;for(let g=l;g<=h;g++){const p=this.lines[g];if(p.isVisible()){let m=p.getViewLineNumberOfModelPosition(0,g===l?n.column:1),b=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),_=b-m+1,w=0;_>1&&p.getViewLineMinColumn(this.model,g+1,b)===1&&(w=m===0?1:2),o.push(_),a.push(w),c===null&&(c=new K(g+1,0))}else c!==null&&(r=r.concat(this.model.getLinesIndentGuides(c.lineNumber,g)),c=null)}c!==null&&(r=r.concat(this.model.getLinesIndentGuides(c.lineNumber,s.lineNumber)),c=null);const u=t-e+1;let d=new Array(u),f=0;for(let g=0,p=r.length;g<p;g++){let m=r[g],b=Math.min(u-f,o[g]),_=a[g],w;_===2?w=0:_===1?w=1:w=b;for(let y=0;y<b;y++)y===w&&(m=0),d[f++]=m}return d}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineContent(this.model,n+1,s)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineLength(this.model,n+1,s)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMinColumn(this.model,n+1,s)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMaxColumn(this.model,n+1,s)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineData(this.model,n+1,s)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let s=this.prefixSumComputer.getIndexOf(e-1),r=e,o=s.index,a=s.remainder,l=[];for(let h=o,c=this.model.getLineCount();h<c;h++){let u=this.lines[h];if(!u.isVisible())continue;let d=h===o?a:0,f=u.getViewLineCount()-d,g=!1;r+f>t&&(g=!0,f=t-r+1);let p=d+f;if(u.getViewLinesData(this.model,h+1,d,p,r-e,n,l),r+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let s=this.prefixSumComputer.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.lines[r],l=a.getViewLineMinColumn(this.model,r+1,o),h=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>h&&(t=h);let c=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new K(r+1,c)).equals(n)?new K(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new V(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),s=n.index,r=n.remainder,o=this.lines[s].getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new K(s+1,o))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new V(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const s=this.model.validatePosition(new K(e,t)),r=s.lineNumber,o=s.column;let a=r-1,l=!1;for(;a>0&&!this.lines[a].isVisible();)a--,l=!0;if(a===0&&!this.lines[a].isVisible())return new K(1,1);const h=1+(a===0?0:this.prefixSumComputer.getAccumulatedValue(a-1));let c;return l?c=this.lines[a].getViewPositionOfModelPosition(h,this.model.getLineMaxColumn(a+1),n):c=this.lines[r-1].getViewPositionOfModelPosition(h,o,n),c}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return V.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new V(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.lines[n].isVisible()){const r=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.lines[n].isVisible();)n--;if(n===0&&!this.lines[n].isVisible())return 1;const s=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new V(s.lineNumber,1,r.lineNumber,r.column),t,n);let o=[];const a=s.lineNumber-1,l=r.lineNumber-1;let h=null;for(let f=a;f<=l;f++)if(this.lines[f].isVisible())h===null&&(h=new K(f+1,f===a?s.column:1));else if(h!==null){const p=this.model.getLineMaxColumn(f);o=o.concat(this.model.getDecorationsInRange(new V(h.lineNumber,h.column,f,p),t,n)),h=null}h!==null&&(o=o.concat(this.model.getDecorationsInRange(new V(h.lineNumber,h.column,r.lineNumber,r.column),t,n)),h=null),o.sort((f,g)=>{const p=V.compareRangesUsingStarts(f.range,g.range);return p===0?f.id<g.id?-1:f.id>g.id?1:0:p});let c=[],u=0,d=null;for(const f of o){const g=f.id;d!==g&&(d=g,c[u++]=f)}return c}getInjectedTextAt(e){const t=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index,r=n.remainder;return this.lines[s].getInjectedTextAt(r,e.column)}normalizePosition(e,t){const n=this._toValidViewLineNumber(e.lineNumber),s=this.prefixSumComputer.getIndexOf(n-1),r=s.index,o=s.remainder;return this.lines[r].normalizePosition(this.model,r+1,o,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index;return n.remainder===0?this.model.getLineIndentColumn(s+1):0}}class oH{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class aH{constructor(e,t){this.modelRange=e,this.viewLines=t}}class hk{constructor(){}isVisible(){return!0}setVisible(e){return e?this:ck.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let s=e.getLineTokens(t),r=s.getLineContent();return new X5(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new K(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n,s,r){return s}getInjectedTextAt(e,t){return null}}hk.INSTANCE=new hk;class ck{constructor(){}isVisible(){return!1}setVisible(e){return e?hk.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n,s,r){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}ck.INSTANCE=new ck;class m4e{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,n){return n+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(n+1,0)}getViewLineContent(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0,r=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,h)=>new za(0,0,l+1,this._lineBreakData.injectionOptions[h],0));o=za.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return n>0&&(o=lH(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0;let o=(n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-s;return n>0&&(o=this._lineBreakData.wrappedTextIndentLength+o),o}getViewLineMinColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(n)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,n)+1}getViewLineData(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=this._lineBreakData,r=n>0?s.wrappedTextIndentLength:0,o=s.injectionOffsets,a=s.injectionOptions;let l,h,c;if(o){const p=e.getLineTokens(t).withInserted(o.map((w,y)=>({offset:w,text:a[y].content,tokenMetadata:Ln.defaultTokenMetadata}))),m=n>0?s.breakOffsets[n-1]:0,b=s.breakOffsets[n];l=p.getLineContent().substring(m,b),h=p.sliceAndInflate(m,b,r),c=new Array;let _=0;for(let w=0;w<o.length;w++){const y=a[w].content.length,x=o[w]+_,L=o[w]+_+y;if(x>b)break;if(m<L){const S=a[w];if(S.inlineClassName){const k=n>0?s.wrappedTextIndentLength:0,D=k+Math.max(x-m,0),T=k+Math.min(L-m,b);D!==T&&c.push(new AAe(D,T,S.inlineClassName,S.inlineClassNameAffectsLetterSpacing))}}_+=y}}else{const p=this.getInputStartOffsetOfOutputLineIndex(n),m=this.getInputEndOffsetOfOutputLineIndex(e,t,n),b=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:p+1,endLineNumber:t,endColumn:m+1}),h=b.sliceAndInflate(p,m,r),c=null}n>0&&(l=lH(s.wrappedTextIndentLength)+l);const u=n>0?s.wrappedTextIndentLength+1:1,d=l.length+1,f=n+1<this.getViewLineCount(),g=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new X5(l,f,u,d,g,h,c)}getViewLinesData(e,t,n,s,r,o,a){if(!this._isVisible)throw new Error("Not supported");for(let l=n;l<s;l++){let h=r+l-n;if(!o[h]){a[h]=null;continue}a[h]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let n=t-1;return e>0&&(n<this._lineBreakData.wrappedTextIndentLength?n=0:n-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,n)+1}getViewPositionOfModelPosition(e,t,n=2){if(!this._isVisible)throw new Error("Not supported");let s=this._lineBreakData.getOutputPositionOfInputOffset(t-1,n),r=s.outputLineIndex,o=s.outputOffset+1;return r>0&&(o+=this._lineBreakData.wrappedTextIndentLength),new K(e+r,o)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");const n=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n,s,r){if(this._lineBreakData.injectionOffsets!==null){const o=s.lineNumber-n,a=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(n,s.column-1),l=this._lineBreakData.normalizeOffsetAroundInjections(a,r);if(l!==a)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(l,r).toPosition(o,this._lineBreakData.wrappedTextIndentLength)}if(r===0){if(n>0&&s.column===this._getViewLineMinColumn(n))return new K(s.lineNumber-1,this.getViewLineMaxColumn(e,t,n-1))}else if(r===1){const o=this.getViewLineCount()-1;if(n<o&&s.column===this.getViewLineMaxColumn(e,t,n))return new K(s.lineNumber+1,this._getViewLineMinColumn(n+1))}return s}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}}let zI=[""];function lH(i){if(i>=zI.length)for(let e=1;e<=i;e++)zI[e]=_4e(e);return zI[i]}function _4e(i){return new Array(i+1).join(" ")}function HI(i,e){return i===null?e?hk.INSTANCE:ck.INSTANCE:new m4e(i,e)}class b4e{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class v4e{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new b4e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new y3(t,n)}onModelLinesInserted(e,t,n,s){return new C3(t,n)}onModelLineChanged(e,t,n){return[!1,new vte(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let s=new Array(n);for(let r=0;r<n;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new X5(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);let r=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(r[a]=null),r[a]=this.getViewLineData(o)}return r}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class w4e{constructor(e,t,n,s,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new K(s.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new K(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new V(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);n=new UJ(o,r),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,v5(this.configuration.options)),n=e.startLineNumber,s=e.endLineNumber;let r=[],o=0,a=[];for(let l=n;l<=s;l++)a[l-n]=[];for(let l=0,h=t.length;l<h;l++){let c=t[l],u=c.options,d=this._getOrCreateViewModelDecoration(c),f=d.range;if(r[o++]=d,u.inlineClassName){let g=new Qb(f,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),p=Math.max(n,f.startLineNumber),m=Math.min(s,f.endLineNumber);for(let b=p;b<=m;b++)a[b-n].push(g)}if(u.beforeContentClassName&&n<=f.startLineNumber&&f.startLineNumber<=s){let g=new Qb(new V(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),u.beforeContentClassName,1);a[f.startLineNumber-n].push(g)}if(u.afterContentClassName&&n<=f.endLineNumber&&f.endLineNumber<=s){let g=new Qb(new V(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),u.afterContentClassName,2);a[f.endLineNumber-n].push(g)}}return{decorations:r,inlineDecorations:a}}}const y4e={ModesRegistry:"editor.modesRegistry"};class C4e{constructor(){this._onDidChangeLanguages=new H,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const yf=new C4e;Pn.add(y4e.ModesRegistry,yf);const h_="plaintext",S4e=".txt";yf.registerLanguage({id:h_,extensions:[S4e],aliases:[v("plainText.alias","Plain Text"),"text"],mimetypes:[Io.text]});zi.register(h_,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);class x4e extends ne{constructor(e,t,n,s,r,o){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new i4e,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Eo(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new yi(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new yi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new v4e(this.model);else{const a=this._configuration.options,l=a.get(43),h=a.get(123),c=a.get(130),u=a.get(122);this._lines=new p4e(this._editorId,this.model,s,r,l,this.model.getOptions().tabSize,h,c.wrappingColumn,u)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new f0(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new d4e(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new Q3e(a)),this._eventDispatcher.emitOutgoingEvent(new BF(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new w4e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(gy.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new e4e)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new V(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const s of n)this.model.tokenizeViewport(s.startLineNumber,s.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Z3e(e)),this._eventDispatcher.emitOutgoingEvent(new FF(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new j3e)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new q3e)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new X3e)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let c=new K(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(c)}let s=!1;const r=this._configuration.options,o=r.get(43),a=r.get(123),l=r.get(130),h=r.get(122);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,h)&&(e.emitViewEvent(new xC),e.emitViewEvent(new DC),e.emitViewEvent(new dp(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(s=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new dp(null))),e.emitViewEvent(new G3e(t)),this.viewLayout.onConfigurationChanged(t),s&&n){const c=this.coordinatesConverter.convertModelPositionToViewPosition(n),u=this.viewLayout.getVerticalOffsetForLineNumber(c.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStartLineDelta},1)}Eo.shouldRecreate(t)&&(this.cursorConfig=new Eo(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const r=e.changes,o=e instanceof pf?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const c of r)switch(c.changeType){case 4:{for(let u=0;u<c.detail.length;u++){const d=c.detail[u];let f=c.injectedTexts[u];f&&(f=f.filter(g=>!g.ownerId||g.ownerId===this._editorId)),a.addRequest(d,f,null)}break}case 2:{let u=null;c.injectedText&&(u=c.injectedText.filter(d=>!d.ownerId||d.ownerId===this._editorId)),a.addRequest(c.detail,u,null);break}}const l=a.finalize();let h=0;for(const c of r)switch(c.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new xC),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(o,c.fromLineNumber,c.toLineNumber);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),n=!0;break}case 4:{const u=l.slice(h,h+c.detail.length);h+=c.detail.length;const d=this._lines.onModelLinesInserted(o,c.fromLineNumber,c.toLineNumber,u);d!==null&&(t.emitViewEvent(d),this.viewLayout.onLinesInserted(d.fromLineNumber,d.toLineNumber)),n=!0;break}case 2:{const u=l[h];h++;const[d,f,g,p]=this._lines.onModelLineChanged(o,c.lineNumber,u);s=d,f&&t.emitViewEvent(f),g&&(t.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),p&&(t.emitViewEvent(p),this.viewLayout.onLinesDeleted(p.fromLineNumber,p.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(t.emitViewEvent(new DC),t.emitViewEvent(new dp(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,s=e.ranges.length;n<s;n++){const r=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new K(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new K(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new J3e(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Y3e),this.cursorConfig=new Eo(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Eo(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new xC),t.emitViewEvent(new DC),t.emitViewEvent(new dp(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Eo(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new dp(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new xC),n.emitViewEvent(new DC),n.emitViewEvent(new dp(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new nH)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(129),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new V(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let s=[],r=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,h=t.endColumn;for(let c=0,u=n.length;c<u;c++){const d=n[c].startLineNumber,f=n[c].endLineNumber;f<o||d>l||(o<d&&(s[r++]=new V(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=f+1,a=1)}return(o<l||o===l&&a<h)&&(s[r++]=new V(o,a,l,h)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new V(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new V(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new K(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let s=this.coordinatesConverter.convertViewPositionToModelPosition(new K(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new V(s.lineNumber,s.column,s.lineNumber,s.column),1);const r=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-r}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ar(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=e_(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(l=[...l,...o.inlineDecorations.map(h=>h.toInlineDecoration(t))]),new Rr(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,s,o.tokens,l,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let s=this._lines.getViewLinesData(e,t,n);return new EAe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,v5(this._configuration.options)),n=new D4e;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,r.zIndex,h,c,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(V.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(c=>c.startLineNumber);let h="";for(let c=0;c<l.length;c++)c>0&&l[c-1]===l[c]||(h+=this.model.getLineContent(l[c])+s);return h}if(r&&t){let l=[],h=0;for(const c of e){const u=c.startLineNumber;c.isEmpty()?u!==h&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(c,n?2:0)),h=u}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===h_||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const c=s.startLineNumber;s=new V(c,this.model.getLineMinColumn(c),c,this.model.getLineMaxColumn(c))}const r=this._configuration.options.get(43),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===ws.fontFamily;let h;return l?h=ws.fontFamily:(h=r.fontFamily,h=h.replace(/"/g,"'"),/[,']/.test(h)||/[+ ]/.test(h)&&(h=`'${h}'`),h=`${h}, ${ws.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${h};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let h=n;h<=r;h++){const c=this.model.getLineTokens(h),u=c.getLineContent(),d=h===n?s-1:0,f=h===r?o-1:u.length;u===""?l+="<br>":l+=o4e(u,c.inflate(),t,d,f,a,qn)}return l}_getColorMap(){let e=Ri.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=Q.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new s4e);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,s,r))}paste(e,t,n,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new V(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new YS(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new V(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new YS(e,n,null,0,!0,0)))}revealRange(e,t,n,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new YS(e,n,null,s,t,r)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new t4e),this._eventDispatcher.emitOutgoingEvent(new nH))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class D4e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],h=a[a.length-1];if(l===r&&h+1>=n){s>h&&(a[a.length-1]=s);return}a.push(r,n,s)}else{const a=new $J(e,t,[r,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class P1{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const fr=kt("accessibilityService"),k4e=new Ie("accessibilityModeEnabled",!1);class L4e extends i_{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let S3=[],x3=[];class VF{constructor(e,t){this.classifier=new L4e(e,t)}static create(e){return new VF(e.get(118),e.get(117))}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;const r=[],o=[],a=[];return{addRequest:(l,h,c)=>{r.push(l),o.push(h),a.push(c)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let h=[];for(let c=0,u=r.length;c<u;c++){const d=o[c],f=a[c];f&&!f.injectionOptions&&!d?h[c]=E4e(this.classifier,f,r[c],t,n,l,s):h[c]=A4e(this.classifier,r[c],d,t,n,l,s)}return S3.length=0,x3.length=0,h}}}}function E4e(i,e,t,n,s,r,o){if(s===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,h=e.breakOffsetsVisibleColumn,c=Cte(t,n,s,r,o),u=s-c;let d=S3,f=x3,g=0,p=0,m=0,b=s;const _=l.length;let w=0;if(w>=0){let y=Math.abs(h[w]-b);for(;w+1<_;){const x=Math.abs(h[w+1]-b);if(x>=y)break;y=x,w++}}for(;w<_;){let y=w<0?0:l[w],x=w<0?0:h[w];p>y&&(y=p,x=m);let L=0,S=0,k=0,D=0;if(x<=b){let M=x,j=y===0?0:t.charCodeAt(y-1),$=y===0?0:i.get(j),ie=!0;for(let pe=y;pe<a;pe++){const be=pe,ye=t.charCodeAt(pe);let Ee,we;if(kn(ye)?(pe++,Ee=0,we=2):(Ee=i.get(ye),we=gv(ye,M,n,r)),be>p&&D3(j,$,ye,Ee)&&(L=be,S=M),M+=we,M>b){be>p?(k=be,D=M-we):(k=pe+1,D=M),M-S>u&&(L=0),ie=!1;break}j=ye,$=Ee}if(ie){g>0&&(d[g]=l[l.length-1],f[g]=h[l.length-1],g++);break}}if(L===0){let M=x,j=t.charCodeAt(y),$=i.get(j),ie=!1;for(let pe=y-1;pe>=p;pe--){const be=pe+1,ye=t.charCodeAt(pe);if(ye===9){ie=!0;break}let Ee,we;if(Jm(ye)?(pe--,Ee=0,we=2):(Ee=i.get(ye),we=Da(ye)?r:1),M<=b){if(k===0&&(k=be,D=M),M<=b-u)break;if(D3(ye,Ee,j,$)){L=be,S=M;break}}M-=we,j=ye,$=Ee}if(L!==0){const pe=u-(D-S);if(pe<=n){const be=t.charCodeAt(k);let ye;kn(be)?ye=2:ye=gv(be,D,n,r),pe-ye<0&&(L=0)}}if(ie){w--;continue}}if(L===0&&(L=k,S=D),L<=p){const M=t.charCodeAt(p);kn(M)?(L=p+2,S=m+2):(L=p+1,S=m+gv(M,m,n,r))}for(p=L,d[g]=L,m=S,f[g]=S,g++,b=S+u;w<0||w<_&&h[w]<S;)w++;let T=Math.abs(h[w]-b);for(;w+1<_;){const M=Math.abs(h[w+1]-b);if(M>=T)break;T=M,w++}}return g===0?null:(d.length=g,f.length=g,S3=e.breakOffsets,x3=e.breakOffsetsVisibleColumn,e.breakOffsets=d,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=c,e)}function A4e(i,e,t,n,s,r,o){const a=za.applyInjectedText(e,t);let l,h;if(t&&t.length>0?(l=t.map(S=>S.options),h=t.map(S=>S.column-1)):(l=null,h=null),s===-1)return l?new Yb([a.length],[],0,h,l):null;const c=a.length;if(c<=1)return l?new Yb([a.length],[],0,h,l):null;const u=Cte(a,n,s,r,o),d=s-u;let f=[],g=[],p=0,m=0,b=0,_=s,w=a.charCodeAt(0),y=i.get(w),x=gv(w,0,n,r),L=1;kn(w)&&(x+=1,w=a.charCodeAt(1),y=i.get(w),L++);for(let S=L;S<c;S++){const k=S,D=a.charCodeAt(S);let T,M;kn(D)?(S++,T=0,M=2):(T=i.get(D),M=gv(D,x,n,r)),D3(w,y,D,T)&&(m=k,b=x),x+=M,x>_&&((m===0||x-b>d)&&(m=k,b=x-M),f[p]=m,g[p]=b,p++,_=b+d,m=0),w=D,y=T}return p===0&&(!t||t.length===0)?null:(f[p]=c,g[p]=x,new Yb(f,g,u,h,l))}function gv(i,e,t,n){return i===9?t-e%t:Da(i)||i<32?n:1}function hH(i,e){return e-i%e}function D3(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function Cte(i,e,t,n,s){let r=0;if(s!==0){const o=ar(i);if(o!==-1){for(let l=0;l<o;l++){const h=i.charCodeAt(l)===9?hH(r,e):1;r+=h}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const h=hH(r,e);r+=h}r+n>t&&(r=0)}}return r}var UI;const $I=(UI=window.trustedTypes)===null||UI===void 0?void 0:UI.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class WF{static create(){return new WF}constructor(){}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;let r=[],o=[];return{addRequest:(a,l,h)=>{r.push(a),o.push(l)},finalize:()=>I4e(r,e,t,n,s,o)}}}function I4e(i,e,t,n,s,r){var o;function a(k){const D=r[k];if(D){const T=za.applyInjectedText(i[k],D),M=D.map($=>$.options),j=D.map($=>$.column-1);return new Yb([T.length],[],0,j,M)}else return null}if(n===-1){const k=[];for(let D=0,T=i.length;D<T;D++)k[D]=a(D);return k}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),c=Math.round(t*(s===3?2:s===2?1:0)),u=Math.ceil(e.spaceWidth*c),d=document.createElement("div");Kn.applyFontInfoSlow(d,e);const f=jf(1e4),g=[],p=[],m=[],b=[],_=[];for(let k=0;k<i.length;k++){const D=za.applyInjectedText(i[k],r[k]);let T=0,M=0,j=l;if(s!==0)if(T=ar(D),T===-1)T=0;else{for(let be=0;be<T;be++){const ye=D.charCodeAt(be)===9?t-M%t:1;M+=ye}const pe=Math.ceil(e.spaceWidth*M);pe+e.typicalFullwidthCharacterWidth>l?(T=0,M=0):j=l-pe}const $=D.substr(T),ie=T4e($,M,t,j,f,u);g[k]=T,p[k]=M,m[k]=$,b[k]=ie[0],_[k]=ie[1]}const w=f.build(),y=(o=$I==null?void 0:$I.createHTML(w))!==null&&o!==void 0?o:w;d.innerHTML=y,d.style.position="absolute",d.style.top="10000",d.style.wordWrap="break-word",document.body.appendChild(d);let x=document.createRange();const L=Array.prototype.slice.call(d.children,0);let S=[];for(let k=0;k<i.length;k++){const D=L[k],T=N4e(x,D,m[k],b[k]);if(T===null){S[k]=a(k);continue}const M=g[k],j=p[k]+c,$=_[k],ie=[];for(let Ee=0,we=T.length;Ee<we;Ee++)ie[Ee]=$[T[Ee]];if(M!==0)for(let Ee=0,we=T.length;Ee<we;Ee++)T[Ee]+=M;let pe,be;const ye=r[k];ye?(pe=ye.map(Ee=>Ee.options),be=ye.map(Ee=>Ee.column-1)):(pe=null,be=null),S[k]=new Yb(T,ie,j,be,pe)}return document.body.removeChild(d),S}function T4e(i,e,t,n,s,r){if(r!==0){let d=String(r);s.appendASCIIString('<div style="text-indent: -'),s.appendASCIIString(d),s.appendASCIIString("px; padding-left: "),s.appendASCIIString(d),s.appendASCIIString("px; box-sizing: border-box; width:")}else s.appendASCIIString('<div style="width:');s.appendASCIIString(String(n)),s.appendASCIIString('px;">');const o=i.length;let a=e,l=0,h=[],c=[],u=0<o?i.charCodeAt(0):0;s.appendASCIIString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&s.appendASCIIString("</span><span>"),h[d]=l,c[d]=a;const f=u;u=d+1<o?i.charCodeAt(d+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let m=1;m<=g;m++)m<g?s.write1(160):s.appendASCII(32);break;case 32:u===32?s.write1(160):s.appendASCII(32);break;case 60:s.appendASCIIString("&lt;");break;case 62:s.appendASCIIString("&gt;");break;case 38:s.appendASCIIString("&amp;");break;case 0:s.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.write1(65533);break;default:Da(f)&&p++,f<32?s.write1(9216+f):s.write1(f)}l+=g,a+=p}return s.appendASCIIString("</span>"),h[i.length]=l,c[i.length]=a,s.appendASCIIString("</div>"),[h,c]}function N4e(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{k3(i,s,n,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function k3(i,e,t,n,s,r,o,a){if(n===r||(s=s||jI(i,e,t[n],t[n+1]),o=o||jI(i,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(n+1===r){a.push(r);return}const l=n+(r-n)/2|0,h=jI(i,e,t[l],t[l+1]);k3(i,e,t,n,s,l,h,a),k3(i,e,t,l,h,r,o,a)}function jI(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var M4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},md=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let R4e=0,O4e=class{constructor(e,t,n,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=r}dispose(){mt(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},F1=class QS extends ne{constructor(e,t,n,s,r,o,a,l,h,c){super(),this._onDidDispose=this._register(new H),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new H),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new H),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new H),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new H),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new H),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new H),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new H),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new H),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new H),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new H),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new H),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new cH),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new cH),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new H),this.onWillType=this._onWillType.event,this._onDidType=this._register(new H),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new H),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new H),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new H),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new H),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new H),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new H),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new H),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new H),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new H),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new H),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new H),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new H),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new H),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new H),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new H),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new H),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new H),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;const u=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++R4e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(u,c)),this._register(this._configuration.onDidChange(f=>{this._onDidChangeConfiguration.fire(f);const g=this._configuration.options;if(f.hasChanged(129)){const p=g.get(129);this._onDidLayoutChange.fire(p)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=h,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new P4e(this,this._contextKeyService)),this._register(new F4e(this,this._contextKeyService)),this._instantiationService=s.createChild(new P1([Xe,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new B4e(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let d;Array.isArray(n.contributions)?d=n.contributions:d=_m.getEditorContributions();for(const f of d){if(this._contributions[f.id]){nt(new Error(`Cannot have two contributions with the same id ${f.id}`));continue}try{const g=this._instantiationService.createInstance(f.ctor,this);this._contributions[f.id]=g}catch(g){nt(g)}}_m.getEditorActions().forEach(f=>{if(this._actions[f.id]){nt(new Error(`Cannot have two actions with the same id ${f.id}`));return}const g=new wte(f.id,f.label,f.alias,Qd(f.precondition),()=>this._instantiationService.invokeFunction(p=>Promise.resolve(f.runEditorCommand(p,this,null))),this._contextKeyService);this._actions[g.id]=g}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Kn(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return GL.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const s=e[t];this._contributions[s].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Di.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const r={oldModelUrl:s?s.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(s)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}getTopForLineNumber(e){return this._modelData?QS._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?QS._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>V.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Rt.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!K.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,s){if(!this._modelData)return;if(!V.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new V(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,s){if(!K.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new V(e.lineNumber,e.column,e.lineNumber,e.column),t,n,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=Ge.isISelection(e),n=V.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new Ge(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new V(e,1,t,1),n,!1,s)}revealRange(e,t=0,n=!1,s=!0){this._revealRange(e,n?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,s){if(!V.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(V.lift(e),t,n,s)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Ge.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const r of t){const o=this._contributions[r];typeof o.saveViewState=="function"&&(e[r]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),s=this._modelData.viewModel.saveState();return{cursorState:n,viewState:s,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const s=t.contributionsState||{},r=Object.keys(this._contributions);for(let a=0,l=r.length;a<l;a++){const h=r[a],c=this._contributions[h];typeof c.restoreViewState=="function"&&c.restoreViewState(s[h])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run()).then(void 0,nt);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,s,r,e)}_paste(e,t,n,s,r){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,s,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new V(o.lineNumber,o.column,a.lineNumber,a.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const s=_m.getEditorCommand(t);return s?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,n)).then(void 0,nt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let s;return n?Array.isArray(n)?s=()=>n:s=n:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,v5(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,s=n.get(129),r=QS._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Kn.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new x4e(this._id,this._configuration,e,WF.create(),VF.create(this._configuration.options),o=>jl(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(v("cursors.maximum","The number of cursors has been limited to {0}.",f0.MAX_CURSOR_COUNT));const a=[];for(let c=0,u=o.selections.length;c<u;c++)a[c]=o.selections[c].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const h={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(h);break}}}));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const h=o[a];s.addContentWidget(this._contentWidgets[h])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const h=o[a];s.addOverlayWidget(this._overlayWidgets[h])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new O4e(e,n,s,r,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const h={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",h)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const h={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",h)}else{const h={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",h)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new x2(e.coordinatesConverter);return n.onKeyDown=r=>this._onKeyDown.fire(r),n.onKeyUp=r=>this._onKeyUp.fire(r),n.onContextMenu=r=>this._onContextMenu.fire(r),n.onMouseMove=r=>this._onMouseMove.fire(r),n.onMouseLeave=r=>this._onMouseLeave.fire(r),n.onMouseDown=r=>this._onMouseDown.fire(r),n.onMouseUp=r=>this._onMouseUp.fire(r),n.onMouseDrag=r=>this._onMouseDrag.fire(r),n.onMouseDrop=r=>this._onMouseDrop.fire(r),n.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),n.onMouseWheel=r=>this._onMouseWheel.fire(r),[new U3e(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};F1=M4e([md(3,qt),md(4,li),md(5,An),md(6,Xe),md(7,ci),md(8,Yn),md(9,fr)],F1);class cH extends ne{constructor(){super(),this._onDidChangeToTrue=this._register(new H),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new H),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class P4e extends ne{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Z.editorSimpleInput.bindTo(t),this._editorFocus=Z.focus.bindTo(t),this._textInputFocus=Z.textInputFocus.bindTo(t),this._editorTextFocus=Z.editorTextFocus.bindTo(t),this._editorTabMovesFocus=Z.tabMovesFocus.bindTo(t),this._editorReadonly=Z.readOnly.bindTo(t),this._inDiffEditor=Z.inDiffEditor.bindTo(t),this._editorColumnSelection=Z.columnSelection.bindTo(t),this._hasMultipleSelections=Z.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Z.hasNonEmptySelection.bindTo(t),this._canUndo=Z.canUndo.bindTo(t),this._canRedo=Z.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class F4e extends ne{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=Z.languageId.bindTo(t),this._hasCompletionItemProvider=Z.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Z.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Z.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Z.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Z.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Z.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Z.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Z.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Z.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Z.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Z.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Z.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Z.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Z.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Z.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Z.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Z.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Z.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=Z.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(ba.onDidChange(n)),this._register(Hl.onDidChange(n)),this._register(zR.onDidChange(n)),this._register(g1.onDidChange(n)),this._register(DD.onDidChange(n)),this._register(kD.onDidChange(n)),this._register(LD.onDidChange(n)),this._register(f1.onDidChange(n)),this._register(xD.onDidChange(n)),this._register(WR.onDidChange(n)),this._register(SD.onDidChange(n)),this._register(BR.onDidChange(n)),this._register(Gb.onDidChange(n)),this._register(Zc.onDidChange(n)),this._register(VR.onDidChange(n)),this._register(HR.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(ba.has(e)),this._hasCodeActionsProvider.set(Hl.has(e)),this._hasCodeLensProvider.set(zR.has(e)),this._hasDefinitionProvider.set(g1.has(e)),this._hasDeclarationProvider.set(DD.has(e)),this._hasImplementationProvider.set(kD.has(e)),this._hasTypeDefinitionProvider.set(LD.has(e)),this._hasHoverProvider.set(f1.has(e)),this._hasDocumentHighlightProvider.set(xD.has(e)),this._hasDocumentSymbolProvider.set(WR.has(e)),this._hasReferenceProvider.set(SD.has(e)),this._hasRenameProvider.set(BR.has(e)),this._hasSignatureHelpProvider.set(VR.has(e)),this._hasInlayHintsProvider.set(HR.has(e)),this._hasDocumentFormattingProvider.set(Gb.has(e)||Zc.has(e)),this._hasDocumentSelectionFormattingProvider.set(Zc.has(e)),this._hasMultipleDocumentFormattingProvider.set(Gb.all(e).length+Zc.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Zc.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===dt.walkThroughSnippet)})}}class B4e extends ne{constructor(e){super(),this._onChange=this._register(new H),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Xm(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const V4e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),W4e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function qI(i){return V4e+encodeURIComponent(i.toString())+W4e}const z4e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),H4e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function U4e(i){return z4e+encodeURIComponent(i.toString())+H4e}oi((i,e)=>{const t=i.getColor(Uee);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(cv);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${qI(n)}") repeat-x bottom left; }`);const s=i.getColor(uNe);s&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${s}; }`);const r=i.getColor(w2);r&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);const o=i.getColor(tc);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${qI(o)}") repeat-x bottom left; }`);const a=i.getColor(dNe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=i.getColor(kF);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const h=i.getColor(Ia);h&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${qI(h)}") repeat-x bottom left; }`);const c=i.getColor(fNe);c&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${c}; }`);const u=i.getColor(pNe);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const d=i.getColor(gNe);d&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${U4e(d)}") no-repeat bottom left; }`);const f=i.getColor($Me);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const g=i.getColor(UMe);g&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${g}; }`);const p=i.getColor(mu)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${p}}`)});class $t{constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new H({onFirstListenerAdd:()=>e.addEventListener(t,s,n),onLastListenerRemove:()=>e.removeEventListener(t,s,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function uH(i){return i.preventDefault(),i.stopPropagation(),i}var c_=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let $4e=!1;var uk;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(uk||(uk={}));let j4e=4;const q4e=new H;let G4e=300;const K4e=new H;class zF{constructor(){this.disposables=new ve}get onPointerMove(){return this.disposables.add(new $t(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new $t(window,"mouseup")).event}dispose(){this.disposables.dispose()}}c_([rn],zF.prototype,"onPointerMove",null);c_([rn],zF.prototype,"onPointerUp",null);class HF{constructor(e){this.el=e,this.disposables=new ve}get onPointerMove(){return this.disposables.add(new $t(this.el,Yt.Change)).event}get onPointerUp(){return this.disposables.add(new $t(this.el,Yt.End)).event}dispose(){this.disposables.dispose()}}c_([rn],HF.prototype,"onPointerMove",null);c_([rn],HF.prototype,"onPointerUp",null);class dk{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}c_([rn],dk.prototype,"onPointerMove",null);c_([rn],dk.prototype,"onPointerUp",null);class zn extends ne{constructor(e,t,n){super(),this.hoverDelay=G4e,this.hoverDelayer=this._register(new X0(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new H),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new H),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new H),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new H),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new ve),this.orthogonalStartDragHandleDisposables=this._register(new ve),this.orthogonalEndSashDisposables=this._register(new ve),this.orthogonalEndDragHandleDisposables=this._register(new ve),this.el=ae(e,_e(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),vt&&this.el.classList.add("mac");const s=this._register(new $t(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new zF),this));const r=this._register(new $t(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new $t(this.el,"mouseenter")).event;this._register(o(()=>zn.onMouseEnter(this)));const a=this._register(new $t(this.el,"mouseleave")).event;this._register(a(()=>zn.onMouseLeave(this))),this._register(Mt.addTarget(this.el));const l=Re.map(this._register(new $t(this.el,Yt.Start)).event,u=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(l(u=>this.onPointerStart(u,new HF(this.el)),this));const h=this._register(new $t(this.el,Yt.Tap)).event,c=Re.map(Re.filter(Re.debounce(h,(u,d)=>{var f;return{event:d,count:((f=u==null?void 0:u.count)!==null&&f!==void 0?f:0)+1}},250),({count:u})=>u===2),({event:u})=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(c(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=j4e,this._register(q4e.event(u=>{this.size=u,this.layout()}))),this._register(K4e.event(u=>this.hoverDelay=u)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",$4e),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=ae(this.el,_e(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(xt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new $t(this._orthogonalStartDragHandle,"mouseenter")).event(()=>zn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new $t(this._orthogonalStartDragHandle,"mouseleave")).event(()=>zn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=ae(this.el,_e(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(xt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new $t(this._orthogonalEndDragHandle,"mouseenter")).event(()=>zn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new $t(this._orthogonalEndDragHandle,"mouseleave")).event(()=>zn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ot.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new dk(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new dk(t))),!this.state)return;const s=kLe("iframe");for(const g of s)g.style.pointerEvents="none";const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const h=so(this.el),c=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=vt?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=vt?"col-resize":"ew-resize",h.textContent=`* { cursor: ${g} !important; }`},u=new ve;c(),n||this.onDidEnablementChange(c,null,u);const d=g=>{Ot.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{Ot.stop(g,!1),this.el.removeChild(h),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.style.pointerEvents="auto"};t.onPointerMove(d,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&zn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&zn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){zn.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const UF=kt("IEditorCancelService"),Ste=new Ie("cancellableOperation",!1,v("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Dg(UF,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(s=>{const r=Ste.bindTo(s.get(Xe)),o=new Ar;return{key:r,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class Z4e extends Ya{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(UF).add(e,this))}dispose(){this._unregister(),super.dispose()}}Se(new class extends ho{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Ste})}runEditorCommand(i,e){i.get(UF).cancel(e)}});let Y4e=class L3{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?Lo("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof L3))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new L3(e,this.flags))}};class Q4e extends Z4e{constructor(e,t,n,s){super(e,s),this._listener=new ve,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!n||!V.containsPosition(n,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!n||!V.containsRange(n,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class X4e extends Ya{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class g0{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}}return new g0(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const xte={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Io.text,TERMINALS:"Terminals"};class J4e{constructor(e){this.data=e}update(){}getData(){return this.data}}const Eh={CurrentDragAndDropData:void 0};class Cf extends ne{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Go&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new r0)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Mt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Vs&&this._register(oe(e,Oe.DRAG_START,s=>{var r;return(r=s.dataTransfer)===null||r===void 0?void 0:r.setData(xte.TEXT,this._action.label)}))),this._register(oe(t,Yt.Tap,s=>this.onClick(s,!0))),this._register(oe(t,Oe.MOUSE_DOWN,s=>{n||Ot.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),vt&&this._register(oe(t,Oe.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(oe(t,Oe.CLICK,s=>{Ot.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(oe(t,Oe.DBLCLICK,s=>{Ot.stop(s,!0)})),[Oe.MOUSE_UP,Oe.MOUSE_OUT].forEach(s=>{this._register(oe(t,s,r=>{Ot.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ot.stop(e,!0);const s=jr(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class $F extends Cf{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=ae(this.element,_e("a.action-label"))),this.label&&(this._action.id===La.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(ae(this.element,_e("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=v({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var eOe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class dc extends ne{constructor(e,t={}){var n,s,r,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new H),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new H({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new H),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new H),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new r0,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let h,c;switch(this._orientation){case 0:h=[15],c=[17];break;case 1:h=[16],c=[18],this.domNode.className+=" vertical";break}this._register(oe(this.domNode,Oe.KEY_DOWN,u=>{const d=new pi(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;h&&(d.equals(h[0])||d.equals(h[1]))?f=this.focusPrevious():c&&(d.equals(c[0])||d.equals(c[1]))?f=this.focusNext():d.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():d.equals(14)?f=this.focusFirst():d.equals(13)?f=this.focusLast():d.equals(2)&&g instanceof Cf&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(d)?this._triggerKeys.keyDown?this.doTrigger(d):this.triggerKeyDown=!0:f=!1,f&&(d.preventDefault(),d.stopPropagation())})),this._register(oe(this.domNode,Oe.KEY_UP,u=>{const d=new pi(u);this.isTriggerKeyEvent(d)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(d)),d.preventDefault(),d.stopPropagation()):(d.equals(2)||d.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Xm(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(um()===this.domNode||!Vl(um(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Vl(um(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=$f(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(oe(o,Oe.CONTEXT_MENU,l=>{Ot.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r)),a||(a=new $F(this.context,r,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Cf&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(r.id)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),this._actionIds.splice(s,0,r.id),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){mt(this.viewItems),this.viewItems=[],this._actionIds=[],jn(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus()}else n!==void 0&&(this.focusedItem=n),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t});for(let n=0;n<this.viewItems.length;n++){const s=this.viewItems[n],r=s;if(n===this.focusedItem){let o=!0;qb(r.focus)||(o=!1),this.options.focusOnlyEnabledItems&&qb(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?r.focus(e):this.actionsList.focus({preventScroll:t})}else qb(r.blur)&&r.blur()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Cf){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return eOe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){mt(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const tOe={IconContribution:"base.contributions.icons"};class iOe{constructor(){this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:v("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:v("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${sr.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;fi.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${fi.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!fi.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const Jf=new iOe;Pn.add(tOe.IconContribution,Jf);function ls(i,e,t,n){return Jf.registerIcon(i,e,t,n)}function nOe(){return Jf}function sOe(){for(const i of CD.all)Jf.registerIcon(i.id,i.definition,i.description);CD.onDidRegister(i=>Jf.registerIcon(i.id,i.definition,i.description))}sOe();const Dte="vscode://schemas/icons";let kte=Pn.as(JL.JSONContribution);kte.registerSchema(Dte,Jf.getIconSchema());const dH=new yi(()=>kte.notifySchemaChanged(Dte),200);Jf.onDidChange(()=>{dH.isScheduled()||dH.schedule()});const rOe=ls("widget-close",De.close,v("widgetClose","Icon for the close action in widgets."));var oOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},aOe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},lOe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})},GI;const kC=3;class H_{constructor(e,t,n,s){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=s}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class KI{constructor(e){this.entries=e}}const hOe=ls("diff-review-insert",De.add,v("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),cOe=ls("diff-review-remove",De.remove,v("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),uOe=ls("diff-review-close",De.close,v("diffReviewCloseIcon","Icon for 'Close' in diff review."));let fk=class kd extends ne{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=St(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=St(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new dc(this.actionBarContainer.domNode)),this._actionBar.push(new Go("diffreview.close",v("label.close","Close"),"close-diff-review "+fi.asClassName(uOe),!0,()=>lOe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=St(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=St(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new k2(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(cn(this.domNode.domNode,"click",n=>{n.preventDefault();let s=$X(n.target,"diff-review-row");s&&this._goToRow(s)})),this._register(cn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new K(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new K(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new K(e,1)),this._diffEditor.revealPosition(new K(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:kd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let s=[],r=0;for(let h=0,c=e.length;h<c;h++){const u=e[h],d=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,p=u.modifiedEndLineNumber;let m=[],b=0;{const _=f===0?d:d-1,w=p===0?g:g-1;let y=1,x=1;if(h>0){const k=e[h-1];k.originalEndLineNumber===0?y=k.originalStartLineNumber+1:y=k.originalEndLineNumber+1,k.modifiedEndLineNumber===0?x=k.modifiedStartLineNumber+1:x=k.modifiedEndLineNumber+1}let L=_-kC+1,S=w-kC+1;if(L<y){const k=y-L;L=L+k,S=S+k}if(S<x){const k=x-S;L=L+k,S=S+k}m[b++]=new H_(L,_,S,w)}f!==0&&(m[b++]=new H_(d,f,0,0)),p!==0&&(m[b++]=new H_(0,0,g,p));{const _=f===0?d+1:f+1,w=p===0?g+1:p+1;let y=t,x=n;if(h+1<c){const k=e[h+1];k.originalEndLineNumber===0?y=k.originalStartLineNumber:y=k.originalStartLineNumber-1,k.modifiedEndLineNumber===0?x=k.modifiedStartLineNumber:x=k.modifiedStartLineNumber-1}let L=_+kC-1,S=w+kC-1;if(L>y){const k=y-L;L=L+k,S=S+k}if(S>x){const k=x-S;L=L+k,S=S+k}m[b++]=new H_(_,L,w,S)}s[r++]=new KI(m)}let o=s[0].entries,a=[],l=0;for(let h=1,c=s.length;h<c;h++){const u=s[h].entries,d=o[o.length-1],f=u[0];if(d.getType()===0&&f.getType()===0&&f.originalLineStart<=d.originalLineEnd){o[o.length-1]=new H_(d.originalLineStart,f.originalLineEnd,d.modifiedLineStart,f.modifiedLineEnd),o=o.concat(u.slice(1));continue}a[l++]=new KI(o),o=u}return a[l++]=new KI(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,s=this._diffs.length;n<s;n++){const r=this._diffs[n].entries,o=r[r.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),o=s.getOptions();if(!this._isVisible||!n||!s){jn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let h=document.createElement("div");h.className="diff-review-table",h.setAttribute("role","list"),h.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Kn.applyFontInfoSlow(h,t.get(43));let c=0,u=0,d=0,f=0;for(let S=0,k=l.length;S<k;S++){const D=l[S],T=D.originalLineStart,M=D.originalLineEnd,j=D.modifiedLineStart,$=D.modifiedLineEnd;T!==0&&(c===0||T<c)&&(c=T),M!==0&&(u===0||M>u)&&(u=M),j!==0&&(d===0||j<d)&&(d=j),$!==0&&(f===0||$>f)&&(f=$)}let g=document.createElement("div");g.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const m=u-c+1,b=f-d+1;p.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${c},${m} +${d},${b} @@`)),g.setAttribute("data-line",String(d));const _=S=>S===0?v("no_lines_changed","no lines changed"):S===1?v("one_line_changed","1 line changed"):v("more_lines_changed","{0} lines changed",S),w=_(m),y=_(b);g.setAttribute("aria-label",v({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,c,w,d,y)),g.appendChild(p),g.setAttribute("role","listitem"),h.appendChild(g);const x=t.get(58);let L=d;for(let S=0,k=l.length;S<k;S++){const D=l[S];kd._renderSection(h,D,L,x,this._width,e,n,r,t,s,o,this._modeService.languageIdCodec),D.modifiedLineStart!==0&&(L=D.modifiedLineEnd)}jn(this._content.domNode),this._content.domNode.appendChild(h),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,s,r,o,a,l,h,c,u,d){const f=t.getType();let g="diff-review-row",p="";const m="diff-review-spacer";let b=null;switch(f){case 1:g="diff-review-row line-insert",p=" char-insert",b=hOe;break;case 2:g="diff-review-row line-delete",p=" char-delete",b=cOe;break}const _=t.originalLineStart,w=t.originalLineEnd,y=t.modifiedLineStart,x=t.modifiedLineEnd,L=Math.max(x-y,w-_),S=o.get(129),k=S.glyphMarginWidth+S.lineNumbersWidth,D=h.get(129),T=10+D.glyphMarginWidth+D.lineNumbersWidth;for(let M=0;M<=L;M++){const j=_===0?0:_+M,$=y===0?0:y+M,ie=document.createElement("div");ie.style.minWidth=r+"px",ie.className=g,ie.setAttribute("role","listitem"),$!==0&&(n=$),ie.setAttribute("data-line",String(n));let pe=document.createElement("div");pe.className="diff-review-cell",pe.style.height=`${s}px`,ie.appendChild(pe);const be=document.createElement("span");be.style.width=k+"px",be.style.minWidth=k+"px",be.className="diff-review-line-number"+p,j!==0?be.appendChild(document.createTextNode(String(j))):be.innerText="",pe.appendChild(be);const ye=document.createElement("span");ye.style.width=T+"px",ye.style.minWidth=T+"px",ye.style.paddingRight="10px",ye.className="diff-review-line-number"+p,$!==0?ye.appendChild(document.createTextNode(String($))):ye.innerText="",pe.appendChild(ye);const Ee=document.createElement("span");if(Ee.className=m,b){const $e=document.createElement("span");$e.className=fi.asClassName(b),$e.innerText="",Ee.appendChild($e)}else Ee.innerText="";pe.appendChild(Ee);let we;if($!==0){let $e=this._renderLine(c,h,u.tabSize,$,d);kd._ttPolicy&&($e=kd._ttPolicy.createHTML($e)),pe.insertAdjacentHTML("beforeend",$e),we=c.getLineContent($)}else{let $e=this._renderLine(a,o,l.tabSize,j,d);kd._ttPolicy&&($e=kd._ttPolicy.createHTML($e)),pe.insertAdjacentHTML("beforeend",$e),we=a.getLineContent(j)}we.length===0&&(we=v("blankLine","blank"));let Dt="";switch(f){case 0:j===$?Dt=v({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",we,j):Dt=v("equalLine","{0} original line {1} modified line {2}",we,j,$);break;case 1:Dt=v("insertLine","+ {0} modified line {1}",we,$);break;case 2:Dt=v("deleteLine","- {0} original line {1}",we,j);break}ie.setAttribute("aria-label",Dt),e.appendChild(ie)}}static _renderLine(e,t,n,s,r){const o=e.getLineContent(s),a=t.get(43),l=Ln.createEmpty(o,r),h=Rr.isBasicASCII(o,e.mightContainNonBasicASCII()),c=Rr.containsRTL(o,h,e.mightContainRTL());return i2(new kg(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,h,c,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==yr.OFF,null)).html}};fk._ttPolicy=(GI=window.trustedTypes)===null||GI===void 0?void 0:GI.createPolicy("diffReview",{createHTML:i=>i});fk=oOe([aOe(1,Gs)],fk);oi((i,e)=>{const t=i.getColor(Jee);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(fy);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class dOe extends Si{constructor(){super({id:"editor.action.diffReview.next",label:v("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:Ae.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Lte(e);n&&n.diffReviewNext()}}class fOe extends Si{constructor(){super({id:"editor.action.diffReview.prev",label:v("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:Ae.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Lte(e);n&&n.diffReviewPrev()}}function Lte(i){const e=i.get(li),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}gt(dOe);gt(fOe);const Tg=kt("contextViewService"),Ng=kt("contextMenuService");var ZI=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class gOe extends ne{constructor(e,t,n,s,r,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=s,this._contextMenuService=r,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=De.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const h=[],c=s.modifiedEndLineNumber===0;h.push(new Go("diff.clipboard.copyDeletedContent",c?s.originalEndLineNumber>s.modifiedStartLineNumber?v("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):v("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalEndLineNumber>s.modifiedStartLineNumber?v("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):v("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>ZI(this,void 0,void 0,function*(){const p=new V(s.originalStartLineNumber,1,s.originalEndLineNumber+1,1),m=s.originalModel.getValueInRange(p);yield this._clipboardService.writeText(m)})));let u=0,d;s.originalEndLineNumber>s.modifiedStartLineNumber&&(d=new Go("diff.clipboard.copyDeletedLineContent",c?v("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber):v("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber),void 0,!0,()=>ZI(this,void 0,void 0,function*(){const p=s.originalModel.getLineContent(s.originalStartLineNumber+u);if(p===""){const m=s.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(m===0?`
`:`\r
`)}else yield this._clipboardService.writeText(p)})),h.push(d)),n.getOption(80)||h.push(new Go("diff.inline.revertChange",v("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>ZI(this,void 0,void 0,function*(){const p=new V(s.originalStartLineNumber,1,s.originalEndLineNumber,s.originalModel.getLineMaxColumn(s.originalEndLineNumber)),m=s.originalModel.getValueInRange(p);if(s.modifiedEndLineNumber===0){const b=n.getModel().getLineMaxColumn(s.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new V(s.modifiedStartLineNumber,b,s.modifiedStartLineNumber,b),text:l+m}])}else{const b=n.getModel().getLineMaxColumn(s.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new V(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,b),text:m}])}})));const g=(p,m)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:p,y:m}),getActions:()=>(d&&(d.label=c?v("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber+u):v("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber+u)),h),autoSelectFirstItem:!0})};this._register(cn(this._diffActions,"mousedown",p=>{const{top:m,height:b}=Un(this._diffActions);let _=Math.floor(a/3);p.preventDefault(),g(p.posx,m+b+_)})),this._register(n.onMouseMove(p=>{p.target.type===8||p.target.type===5?p.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.rightButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._viewZoneId&&(p.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a),g(p.event.posx,p.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:s}=Un(e),r=t-s,o=Math.floor(r/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let h=0;h<this.diff.viewLineCounts.length;h++)if(l+=this.diff.viewLineCounts[h],o<l)return h}return o}}const Mg=kt("clipboardService");class E2{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}E2.None=Object.freeze({report(){}});const u_=kt("editorProgressService");var pOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vh=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},YI;class fH{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,s){const r=s?g0.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,h=n.zones.length;l<h;l++){const c=n.zones[l];c.suppressMouseDown=!0;const u=o.addZone(c);this._zones.push(u),this._zonesMap[String(u)]=!0,n.zones[l].diff&&c.marginDomNode&&(c.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new gOe(u,c.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let mOe=0;const _Oe=ls("diff-insert",De.add,v("diffInsertIcon","Line decoration for inserts in the diff editor.")),Ete=ls("diff-remove",De.remove,v("diffRemoveIcon","Line decoration for removals in the diff editor.")),gH=(YI=window.trustedTypes)===null||YI===void 0?void 0:YI.createPolicy("diffEditorWidget",{createHTML:i=>i});let Wu=class Bn extends ne{constructor(e,t,n,s,r,o,a,l,h,c,u,d){super(),this._editorProgressService=d,this._onDidDispose=this._register(new H),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new H),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new H),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=r,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new P1([Xe,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=h,this._notificationService=c,this._id=++mOe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=_H(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new yi(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Bn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=St(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(cn(this._overviewDomElement,"mousedown",g=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(g)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new fH(u,s),this._modifiedEditorState=new fH(u,s),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new mee(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(fk,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Uh(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new mH(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(h.onDidColorThemeChange(g=>{this._strategy&&this._strategy.applyColors(g)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Bn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=_m.getDiffEditorContributions();for(const g of f)try{this._register(a.createInstance(g.ctor,this))}catch(p){nt(p)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=jD(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const s=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bn.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(r=>{r.tabSize&&this._updateDecorationsRunner.schedule()}));const s=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bn.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createInnerEditor(e,t,n,s){return e.createInstance(F1,t,n,s)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return GL.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=_H(e,this._options),n=yOe(this._options,t);this._options=t;const s=n.ignoreTrimWhitespace||n.renderIndicators,r=this._isVisible&&(n.maxComputationTime||n.maxFileSize);s?this._beginUpdateDecorations():r&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Uh(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new mH(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Bn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,s=!0){this._modifiedEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Bn.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Bn.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Bn.ONE_OVERVIEW_WIDTH,right:n+Bn.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Bn.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Bn.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,s=this._options.maxFileSize*1024*1024,r=o=>{const a=o.getValueLength();return s===0||a<=s};if(!r(e)||!r(t)){(!Bn._equals(e.uri,this._lastOriginalWarning)||!Bn._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(v("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=Sg.revealHorizontalRightPadding.defaultValue+Bn.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),s=this._strategy.layout();this._originalDomNode.style.width=s+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-s+"px",this._modifiedDomNode.style.left=s+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Bn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Bn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Bn.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:s,height:t-n}),this._modifiedEditor.layout({width:e-s-(this._options.renderOverviewRuler?Bn.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),s=Math.max(0,e.height),r=Math.max(0,s-2*0),o=n>0?r/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let s=0,r=n.length-1;for(;s<r;){const o=Math.floor((s+r)/2),a=t(n[o]),l=o+1<=r?t(n[o+1]):1073741824;e<a?r=o-1:e>=l?s=o+1:(s=o,r=o)}return n[s]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=r?s+Math.min(a,o):s+o-r+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-s;return a<=o?n+Math.min(a,r):n+r-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Wu.ONE_OVERVIEW_WIDTH=15;Wu.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Wu.UPDATE_DIFF_DECORATIONS_DELAY=200;Wu=pOe([vh(3,Mg),vh(4,rd),vh(5,Xe),vh(6,qt),vh(7,li),vh(8,ci),vh(9,Yn),vh(10,Ng),vh(11,u_)],Wu);class Ate extends ne{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(jee)||p3).transparent(2),n=(e.getColor(qee)||m3).transparent(2),s=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,s}getEditorsDiffDecorations(e,t,n,s,r){r=r.sort((h,c)=>h.afterLineNumber-c.afterLineNumber),s=s.sort((h,c)=>h.afterLineNumber-c.afterLineNumber);const o=this._getViewZones(e,s,r,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class pH{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ef{constructor(e,t,n,s,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=s,this._modifiedEditor=r}static _getViewLineCount(e,t,n){const s=e.getModel(),r=e._getViewModel();if(s&&r){const o=B1(s,r,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(130).wrappingColumn!==-1,s=this._modifiedEditor.getOption(130).wrappingColumn!==-1,r=n||s,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,h={original:[],modified:[]};let c=0,u=0,d=0,f=0,g=0,p=0;const m=(L,S)=>L.afterLineNumber-S.afterLineNumber,b=(L,S)=>{if(S.domNode===null&&L.length>0){const k=L[L.length-1];if(k.afterLineNumber===S.afterLineNumber&&k.domNode===null){k.heightInLines+=S.heightInLines;return}}L.push(S)},_=new pH(this._modifiedForeignVZ),w=new pH(this._originalForeignVZ);let y=1,x=1;for(let L=0,S=this._lineChanges.length;L<=S;L++){const k=L<S?this._lineChanges[L]:null;k!==null?(d=k.originalStartLineNumber+(k.originalEndLineNumber>0?-1:0),f=k.modifiedStartLineNumber+(k.modifiedEndLineNumber>0?-1:0),u=k.originalEndLineNumber>0?ef._getViewLineCount(this._originalEditor,k.originalStartLineNumber,k.originalEndLineNumber):0,c=k.modifiedEndLineNumber>0?ef._getViewLineCount(this._modifiedEditor,k.modifiedStartLineNumber,k.modifiedEndLineNumber):0,g=Math.max(k.originalStartLineNumber,k.originalEndLineNumber),p=Math.max(k.modifiedStartLineNumber,k.modifiedEndLineNumber)):(d+=1e7+u,f+=1e7+c,g=d,p=f);let D=[],T=[];if(r){let $;k?k.originalEndLineNumber>0?$=k.originalStartLineNumber-y:$=k.modifiedStartLineNumber-x:$=o.getLineCount()-y;for(let ie=0;ie<$;ie++){const pe=y+ie,be=x+ie,ye=a.getModelLineViewLineCount(pe),Ee=l.getModelLineViewLineCount(be);ye<Ee?D.push({afterLineNumber:pe,heightInLines:Ee-ye,domNode:null,marginDomNode:null}):ye>Ee&&T.push({afterLineNumber:be,heightInLines:ye-Ee,domNode:null,marginDomNode:null})}k&&(y=(k.originalEndLineNumber>0?k.originalEndLineNumber:k.originalStartLineNumber)+1,x=(k.modifiedEndLineNumber>0?k.modifiedEndLineNumber:k.modifiedStartLineNumber)+1)}for(;_.current&&_.current.afterLineNumber<=p;){let $;_.current.afterLineNumber<=f?$=d-f+_.current.afterLineNumber:$=g;let ie=null;k&&k.modifiedStartLineNumber<=_.current.afterLineNumber&&_.current.afterLineNumber<=k.modifiedEndLineNumber&&(ie=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),D.push({afterLineNumber:$,heightInLines:_.current.height/t,domNode:null,marginDomNode:ie}),_.advance()}for(;w.current&&w.current.afterLineNumber<=g;){let $;w.current.afterLineNumber<=d?$=f-d+w.current.afterLineNumber:$=p,T.push({afterLineNumber:$,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(k!==null&&xm(k)){const $=this._produceOriginalFromDiff(k,u,c);$&&D.push($)}if(k!==null&&Dm(k)){const $=this._produceModifiedFromDiff(k,u,c);$&&T.push($)}let M=0,j=0;for(D=D.sort(m),T=T.sort(m);M<D.length&&j<T.length;){const $=D[M],ie=T[j],pe=$.afterLineNumber-d,be=ie.afterLineNumber-f;pe<be?(b(h.original,$),M++):be<pe?(b(h.modified,ie),j++):$.shouldNotShrink?(b(h.original,$),M++):ie.shouldNotShrink?(b(h.modified,ie),j++):$.heightInLines>=ie.heightInLines?($.heightInLines-=ie.heightInLines,j++):(ie.heightInLines-=$.heightInLines,M++)}for(;M<D.length;)b(h.original,D[M]),M++;for(;j<T.length;)b(h.modified,T[j]),j++}return{original:ef._ensureDomNodes(h.original),modified:ef._ensureDomNodes(h.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Ite()),t))}}function Fh(i,e,t,n,s){return{range:new V(i,e,t,n),options:s}}const Ts={charDelete:_t.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:_t.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:_t.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:_t.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:_t.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:_t.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+fi.asClassName(_Oe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:_t.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:_t.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+fi.asClassName(Ete),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:_t.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class Uh extends Ate{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new zn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Wu.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let s=Math.floor((e||.5)*n);const r=Math.floor(.5*n);return s=this._disableSash?r:s||r,n>Uh.MINIMUM_EDITOR_WIDTH*2?(s<Uh.MINIMUM_EDITOR_WIDTH&&(s=Uh.MINIMUM_EDITOR_WIDTH),s>n-Uh.MINIMUM_EDITOR_WIDTH&&(s=n-Uh.MINIMUM_EDITOR_WIDTH)):s=r,this._sashPosition!==s&&(this._sashPosition=s,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Wu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),s=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=s/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new bOe(e,t,n,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const h of e)if(Dm(h)){o.decorations.push({range:new V(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:n?Ts.lineDeleteWithSign:Ts.lineDelete}),(!xm(h)||!h.charChanges)&&o.decorations.push(Fh(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824,Ts.charDeleteWholeLine));const c=B1(a,l,h.originalStartLineNumber,h.originalEndLineNumber);if(o.overviewZones.push(new M1(c.startLineNumber,c.endLineNumber,r)),h.charChanges){for(const u of h.charChanges)if(Dm(u))if(t)for(let d=u.originalStartLineNumber;d<=u.originalEndLineNumber;d++){let f,g;d===u.originalStartLineNumber?f=u.originalStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.originalEndLineNumber?g=u.originalEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Fh(d,f,d,g,Ts.charDelete))}else o.decorations.push(Fh(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,Ts.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const h of e)if(xm(h)){o.decorations.push({range:new V(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:n?Ts.lineInsertWithSign:Ts.lineInsert}),(!Dm(h)||!h.charChanges)&&o.decorations.push(Fh(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Ts.charInsertWholeLine));const c=B1(a,l,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(o.overviewZones.push(new M1(c.startLineNumber,c.endLineNumber,r)),h.charChanges){for(const u of h.charChanges)if(xm(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Fh(d,f,d,g,Ts.charInsert))}else o.decorations.push(Fh(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,Ts.charInsert))}}return o}}Uh.MINIMUM_EDITOR_WIDTH=100;class bOe extends ef{constructor(e,t,n,s,r){super(e,t,n,s,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class mH extends Ate{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,s){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new vOe(e,t,n,r,o,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const h of e)if(Dm(h)){r.decorations.push({range:new V(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Ts.lineDeleteMargin});const c=B1(a,l,h.originalStartLineNumber,h.originalEndLineNumber);r.overviewZones.push(new M1(c.startLineNumber,c.endLineNumber,s))}return r}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const h of e)if(xm(h)){o.decorations.push({range:new V(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:n?Ts.lineInsertWithSign:Ts.lineInsert});const c=B1(a,l,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(o.overviewZones.push(new M1(c.startLineNumber,c.endLineNumber,r)),h.charChanges){for(const u of h.charChanges)if(xm(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(Fh(d,f,d,g,Ts.charInsert))}else o.decorations.push(Fh(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,Ts.charInsert))}else o.decorations.push(Fh(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Ts.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class vOe extends ef{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._originalModel=s.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:s}}_produceModifiedFromDiff(e,t,n){const s=document.createElement("div");s.className=`view-lines line-delete ${wf}`;const r=document.createElement("div");r.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:s,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,s=t.get(43),r=t.get(29),o=s.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),h=this._originalModel.mightContainRTL(),c=t.get(58),d=t.get(129).decorationsWidth,f=t.get(104),g=t.get(87),p=t.get(82),m=t.get(44),b=this._lineBreaksComputer.finalize();let _=0;for(let w=0;w<this._pendingLineChange.length;w++){const y=this._pendingLineChange[w],x=this._pendingViewZones[w],L=x.domNode;Kn.applyFontInfoSlow(L,s);const S=x.marginDomNode;Kn.applyFontInfoSlow(S,s);const k=[];if(y.charChanges)for(const be of y.charChanges)Dm(be)&&k.push(new Qb(new V(be.originalStartLineNumber,be.originalStartColumn,be.originalEndLineNumber,be.originalEndColumn),"char-delete",0));const D=k.length>0,T=jf(1e4);let M=0,j=0,$=null;for(let be=y.originalStartLineNumber;be<=y.originalEndLineNumber;be++){const ye=be-y.originalStartLineNumber,Ee=this._originalModel.getLineTokens(be),we=Ee.getLineContent(),Dt=b[_++],$e=Ir.filter(k,be,1,we.length+1);if(Dt){let Qe=0;for(const lt of Dt.breakOffsets){const mi=Ee.sliceAndInflate(Qe,lt,0),te=we.substring(Qe,lt);M=Math.max(M,this._renderOriginalLine(j++,te,mi,Ir.extractWrapped($e,Qe,lt),D,l,h,s,r,c,d,f,g,p,m,n,T,S)),Qe=lt}for($||($=[]);$.length<ye;)$[$.length]=1;$[ye]=Dt.breakOffsets.length,x.heightInLines+=Dt.breakOffsets.length-1;const pt=document.createElement("div");pt.className="line-delete",e.original.push({afterLineNumber:be,afterColumn:0,heightInLines:Dt.breakOffsets.length-1,domNode:Ite(),marginDomNode:pt})}else M=Math.max(M,this._renderOriginalLine(j++,we,Ee,$e,D,l,h,s,r,c,d,f,g,p,m,n,T,S))}M+=a;const ie=T.build(),pe=gH?gH.createHTML(ie):ie;if(L.innerHTML=pe,x.minWidthInPx=M*o,$){const be=y.originalEndLineNumber-y.originalStartLineNumber;for(;$.length<=be;)$[$.length]=1}x.diff.viewLineCounts=$}e.original.sort((w,y)=>w.afterLineNumber-y.afterLineNumber)}_renderOriginalLine(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p,m,b,_){b.appendASCIIString('<div class="view-line'),r||b.appendASCIIString(" char-delete"),b.appendASCIIString('" style="top:'),b.appendASCIIString(String(e*c)),b.appendASCIIString('px;width:1000000px;">');const w=Rr.isBasicASCII(t,o),y=Rr.containsRTL(t,w,a),x=t2(new kg(l.isMonospace&&!h,l.canUseHalfwidthRightwardsArrow,t,!1,w,y,0,n,s,m,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,d,f,g,p!==yr.OFF,null),b);if(b.appendASCIIString("</div>"),this._renderIndicators){const L=document.createElement("div");L.className=`delete-sign ${fi.asClassName(Ete)}`,L.setAttribute("style",`position:absolute;top:${e*c}px;width:${u}px;height:${c}px;right:0;`),_.appendChild(L)}return x.characterMapping.getAbsoluteOffset(x.characterMapping.length)}}function wOe(i,e){return Ms(i,e,["off","on","inherit"])}function xm(i){return i.modifiedEndLineNumber>0}function Dm(i){return i.originalEndLineNumber>0}function Ite(){const i=document.createElement("div");return i.className="diagonal-fill",i}function B1(i,e,t,n){const s=i.getLineCount();return t=Math.min(s,Math.max(1,t)),n=Math.min(s,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new V(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function _H(i,e){return{enableSplitViewResizing:Be(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Be(i.renderSideBySide,e.renderSideBySide),maxComputationTime:TM(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:TM(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Be(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Be(i.renderIndicators,e.renderIndicators),originalEditable:Be(i.originalEditable,e.originalEditable),diffCodeLens:Be(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Be(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:wOe(i.diffWordWrap,e.diffWordWrap)}}function yOe(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}oi((i,e)=>{const t=i.getColor(jee);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor(qee);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const s=i.getColor(BNe);s&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; }`);const r=i.getColor(VNe);r&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const o=i.getColor(fy);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=i.getColor(WNe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=i.getColor(av);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const h=i.getColor(lv);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${h};
			}
		`);const c=i.getColor(hv);c&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${c};
			}
		`);const u=i.getColor(zNe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${u} 12.5%,
			#0000 12.5%, #0000 50%,
			${u} 50%, ${u} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const py=kt("themeService"),Zi=kt("keybindingService");class COe extends ne{constructor(){super(),this._onCodeEditorAdd=this._register(new H),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new H),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new H),this._onDiffEditorRemove=this._register(new H),this._onDecorationTypeRegistered=this._register(new H),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var SOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xOe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class DOe{constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){_D(e,this._styleSheet)}}class kOe{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){_D(e,this._styleSheet)}}let E3=class extends COe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new kOe(so())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!I5(t))return this._getOrCreateGlobalStyleSheet();const n=e.getId();if(!this._editorStyleSheets.has(n)){const s=new DOe(this,n,so(t));this._editorStyleSheets.set(n,s)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,s,r){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(r),l={styleSheet:a,key:t,parentTypeKey:s,options:n||Object.create(null)};s?o=new LOe(this._themeService,a,l):o=new EOe(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}o.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}resolveDecorationOptions(e,t){const n=this._decorationOptionProviders.get(e);if(!n)throw new Error("Unknown decoration type key: "+e);return n.getOptions(this,t)}};E3=SOe([xOe(1,ci)],E3);class LOe{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new gk(3,n,e),this._afterContentRules=new gk(4,n,e)}getOptions(e,t){const n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class EOe{constructor(e,t,n,s){this._disposables=new ve,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;const r=u=>{const d=new gk(u,s,t);if(this._disposables.add(d),d.hasContent)return d.className},o=u=>{const d=new gk(u,s,t);return this._disposables.add(d),d.hasContent?{className:d.className,hasLetterSpacing:d.hasLetterSpacing}:null};this.className=r(0);const a=o(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=r(3),this.afterContentClassName=r(4),s.options.beforeInjectedText&&s.options.beforeInjectedText.contentText){const u=o(5);this.beforeInjectedText={content:s.options.beforeInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.beforeInjectedText.affectsLetterSpacing}}if(s.options.afterInjectedText&&s.options.afterInjectedText.contentText){const u=o(6);this.afterInjectedText={content:s.options.afterInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=r(2);const l=s.options;this.isWholeLine=!!l.isWholeLine,this.stickiness=l.rangeBehavior;const h=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,c=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof h<"u"||typeof c<"u")&&(this.overviewRuler={color:h||c,darkColor:c||h,position:l.overviewRulerLane||Gl.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const U_={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class gk{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let s=QI.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(s=s+" "+QI.getClassName(this._providerArgs.parentTypeKey,e)),this._className=s,this._unThemedSelector=QI.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(r=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,n,s;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),s=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),s=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),s=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let o=!1;t.length>0&&(r.insertRule(`${this._unThemedSelector} {${t}}`,0),o=!0),n.length>0&&(r.insertRule(`.vs${this._unThemedSelector} {${n}}`,0),o=!0),s.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${s}}`,0),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e<"u"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath<"u"&&t.push(Lo(U_.contentIconPath,cc(Ke.revive(e.contentIconPath)))),typeof e.contentText=="string"){const s=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(Lo(U_.contentText,s))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath<"u"&&(t.push(Lo(U_.gutterIconPath,cc(Ke.revive(e.gutterIconPath)))),typeof e.gutterIconSize<"u"&&t.push(Lo(U_.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(Lo("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,n){const s=n.length;for(let r of t){const o=this.resolveValue(e[r]);typeof o=="string"&&n.push(Lo(U_[r],o))}return n.length!==s}resolveValue(e){if(v2e(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class QI{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,n){let s=".monaco-editor ."+this.getClassName(e,n);return t&&(s=s+"."+this.getClassName(t,n)),n===3?s+="::before":n===4&&(s+="::after"),s}}var AOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let pk=class extends E3{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===dt.http||r===dt.https)return ZX(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};pk=AOe([bH(1,Xe),bH(2,ci)],pk);var jF=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ei=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let IOe=0,vH=!1;function TOe(i){if(!i){if(vH)return;vH=!0}CIe(i||document.body)}let mk=class extends F1{constructor(e,t,n,s,r,o,a,l,h,c){const u=Object.assign({},t);u.ariaLabel=u.ariaLabel||WD.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+";"+WD.accessibilityHelpMessage,super(e,u,{},n,s,r,o,l,h,c),a instanceof oee?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,TOe(u.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let s="DYNAMIC_"+ ++IOe,r=Ae.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ne.None;const t=e.id,n=e.label,s=Ae.and(Ae.equals("editorId",this.getId()),Ae.deserialize(e.precondition)),r=e.keybindings,o=Ae.and(s,Ae.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,h=(f,...g)=>Promise.resolve(e.run(this,...g)),c=new ve,u=this.getId()+":"+t;if(c.add(Ft.registerCommand(u,h)),a){let f={command:{id:u,title:n},when:s,group:a,order:l};c.add(Aa.appendMenuItem(Ye.EditorContext,f))}if(Array.isArray(r))for(const f of r)c.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,h,o));let d=new wte(u,n,n,s,h,this._contextKeyService);return this._actions[t]=d,c.add(xt(()=>{delete this._actions[t]})),c}_triggerCommand(e,t){if(this._codeEditorService instanceof pk)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};mk=jF([ei(2,qt),ei(3,li),ei(4,An),ei(5,Xe),ei(6,Zi),ei(7,ci),ei(8,Yn),ei(9,fr)],mk);let A3=class extends mk{constructor(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p){const m=Object.assign({},t);zD(d,m,!1);const b=c.registerEditorContainer(e);typeof m.theme=="string"&&c.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!m.autoDetectHighContrast);let _=m.model;delete m.model,super(e,m,s,r,o,a,l,c,u,f),this._contextViewService=h,this._configurationService=d,this._standaloneThemeService=c,this._register(n),this._register(b);let w;if(typeof _>"u"?(w=Tte(g,p,m.value||"",m.language||Io.text,void 0),this._ownsModel=!0):(w=_,this._ownsModel=!1),this._attachModel(w),w){let y={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(y)}}dispose(){super.dispose()}updateOptions(e){zD(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};A3=jF([ei(3,qt),ei(4,li),ei(5,An),ei(6,Xe),ei(7,Zi),ei(8,Tg),ei(9,py),ei(10,Yn),ei(11,Ki),ei(12,fr),ei(13,qs),ei(14,Gs)],A3);let I3=class extends Wu{constructor(e,t,n,s,r,o,a,l,h,c,u,d,f,g,p){const m=Object.assign({},t);zD(d,m,!0);const b=c.registerEditorContainer(e);typeof m.theme=="string"&&c.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!m.autoDetectHighContrast),super(e,m,{},p,l,r,s,h,c,u,f,g),this._contextViewService=a,this._configurationService=d,this._standaloneThemeService=c,this._register(n),this._register(b),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){zD(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(mk,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};I3=jF([ei(3,qt),ei(4,Xe),ei(5,Zi),ei(6,Tg),ei(7,rd),ei(8,li),ei(9,py),ei(10,Yn),ei(11,Ki),ei(12,Ng),ei(13,u_),ei(14,Mg)],I3);function Tte(i,e,t,n,s){if(t=t||"",!n){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),wH(i,t,e.createByFilepathOrFirstLine(s||null,o),s)}return wH(i,t,e.create(n),s)}function wH(i,e,t,n){return i.createModel(e,t,n)}const _d=Object.prototype.hasOwnProperty;class NOe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Ou,0),this._register(h_,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Ou}}class V1 extends ne{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,V1.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new NOe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(yf.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){V1.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},ERe();const e=yf.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),Pn.as(t_.Configuration).registerOverrideIdentifiers(yf.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;_d.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)vC({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)vC({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)vC({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);NLe(l)||vC({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){nt(l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);let o=r!==null&&r.length>0;if(!(o&&r[0]===null)){let a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return _d.call(this._mimeTypesMap,e)?!0:_d.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return _d.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>_d.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>_d.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===Ou?Ou:_d.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=ARe(e,t);return this.extractModeIds(n.join(","))}}V1.instanceCount=0;class yH{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new H({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class W1 extends ne{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new H),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new H({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,W1.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new V1(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){W1.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return QR(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return QR(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new yH(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new yH(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||Ou;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||Ou;this._onDidEncounterLanguage.fire(t)}}}W1.instanceCount=0;var MOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let T3=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._modeService=n,this._logService=s,this._hashTable=new Bh,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const s=this._modeService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata,this._logService.getLevel()===Ca.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${qr.getForeground(o)}, fontStyle ${qr.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let h=t;for(let u=0;h>0&&u<this._legend.tokenModifiers.length;u++)h&1&&l.push(this._legend.tokenModifiers[u]),h=h>>1;h>0&&this._logService.getLevel()===Ca.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const c=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof c>"u")o=2147483647;else{if(o=0,typeof c.italic<"u"){const u=(c.italic?1:0)<<11;o|=u|1}if(typeof c.bold<"u"){const u=(c.bold?2:0)<<11;o|=u|2}if(typeof c.underline<"u"){const u=(c.underline?4:0)<<11;o|=u|4}if(c.foreground){const u=c.foreground<<14;o|=u|8}o===0&&(o=2147483647)}}else this._logService.getLevel()===Ca.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===Ca.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${qr.getForeground(o)}, fontStyle ${qr.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};T3=MOe([XI(1,ci),XI(2,Gs),XI(3,_c)],T3);function ROe(i,e,t){const n=i.data,s=i.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,h=0;for(;a<s;){const c=a;let u=Math.min(c+r,s);if(u<s){let w=u;for(;w-1>c&&n[5*w]===0;)w--;if(w-1===c){let y=u;for(;y+1<s&&n[5*y]===0;)y++;u=y}else u=w}let d=new Uint32Array((u-c)*4),f=0,g=0,p=0,m=0,b=0;for(;a<u;){const w=5*a,y=n[w],x=n[w+1],L=l+y|0,S=y===0?h+x|0:x,k=n[w+2],D=n[w+3],T=n[w+4],M=e.getMetadata(D,T,t);M!==2147483647&&(g===0&&(g=L),p===L&&b>S&&(e.warnOverlappingSemanticTokens(L,S+1),m<S?d[f-4+2]=S:f-=4),d[f]=L-g,d[f+1]=S,d[f+2]=S+k,d[f+3]=M,f+=4,p=L,m=S,b=S+k),l=L,h=S,a++}f!==d.length&&(d=d.subarray(0,f));const _=new GD(g,new qD(d));o.push(_)}return o}class OOe{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}class Bh{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Bh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Bh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Bh._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Bh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Bh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Bh._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new OOe(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}Bh._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function POe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],s=i[e+1],r=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=r,i[e+2]=s,i[e+3]=n}}function FOe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return bX()||POe(e),qL.wrap(e)}function Nte(i){const e=new Uint32Array(BOe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return FOe(e)}function BOe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var zu=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function A2(i){return i&&!!i.data}function Mte(i){return i&&Array.isArray(i.edits)}class VOe{constructor(e,t){this.provider=e,this.tokens=t}}function Rte(i){return t0.has(i)}function WOe(i){const e=t0.orderedGroups(i);return e.length>0?e[0]:[]}function Ote(i,e,t,n){return zu(this,void 0,void 0,function*(){const s=WOe(i),r=yield Promise.all(s.map(o=>zu(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentSemanticTokens(i,o===e?t:null,n)}catch(l){ta(l),a=null}return(!a||!A2(a)&&!Mte(a))&&(a=null),new VOe(o,a)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}function zOe(i){const e=t0.orderedGroups(i);return e.length>0?e[0]:null}class HOe{constructor(e,t){this.provider=e,this.tokens=t}}function Pte(i){const e=_J.orderedGroups(i);return e.length>0?e[0]:[]}function Fte(i,e,t){return zu(this,void 0,void 0,function*(){const n=Pte(i),s=yield Promise.all(n.map(r=>zu(this,void 0,void 0,function*(){let o;try{o=yield r.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){ta(a),o=null}return(!o||!A2(o))&&(o=null),new HOe(r,o)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}Ft.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>zu(void 0,void 0,void 0,function*(){const[t]=e;$i(t instanceof Ke);const n=i.get(qs).getModel(t);if(!n)return;const s=zOe(n);return s?s[0].getLegend():i.get(An).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Ft.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>zu(void 0,void 0,void 0,function*(){const[t]=e;$i(t instanceof Ke);const n=i.get(qs).getModel(t);if(!n)return;if(!Rte(n))return i.get(An).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield Ote(n,null,null,ri.None);if(!s)return;const{provider:r,tokens:o}=s;if(!o||!A2(o))return;const a=Nte({id:0,type:"full",data:o.data});return o.resultId&&r.releaseDocumentSemanticTokens(o.resultId),a}));Ft.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>zu(void 0,void 0,void 0,function*(){const[t,n]=e;$i(t instanceof Ke);const s=i.get(qs).getModel(t);if(!s)return;const r=Pte(s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!V.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const o=yield Fte(s,V.lift(n),ri.None);if(o)return o.provider.getLegend()}));Ft.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>zu(void 0,void 0,void 0,function*(){const[t,n]=e;$i(t instanceof Ke),$i(V.isIRange(n));const s=i.get(qs).getModel(t);if(!s)return;const r=yield Fte(s,V.lift(n),ri.None);if(!(!r||!r.tokens))return Nte({id:0,type:"full",data:r.tokens.data})}));var UOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function Lc(i){return i.toString()}function CH(i){const e=new KL,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class $Oe{constructor(e,t,n){this._modelEventListeners=new ve,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const jOe=Ws||vt?1:2;class qOe{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let _k=class bb extends ne{constructor(e,t,n,s,r,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=s,this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new H),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new H),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new H),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new KOe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new GOe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let s=is.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r=s;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=f),r<1&&(r=1)}let o=is.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=jOe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let h=is.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(h=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=is.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=is.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=is.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:s,indentSize:r,insertSpaces:o,detectIndentation:c,defaultEOL:a,trimAutoWhitespace:h,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:Ao===3||Ao===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let s=this._modelCreationOptionsByLanguageAndResource[e+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);s=bb._readModelOptions({editor:r,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=s}return s}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n],o=this._models[r],a=o.model.getLanguageId(),l=o.model.uri,h=e[a+l],c=this.getCreationOptions(a,l,o.model.isForSimpleWidget);bb._setModelOptionsForModel(o.model,c,h)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&ka(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Lc(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Lc(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Lc(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=new oo(e,r,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(Lc(n))){const h=this._removeDisposedModel(n),c=this._undoRedoService.getElements(n),u=CH(o)===h.sha1;if(u||h.sharesUndoRedoStack){for(const d of c.past)Oh(d)&&d.matchesResource(n)&&d.setModel(o);for(const d of c.future)Oh(d)&&d.matchesResource(n)&&d.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,d=>Oh(d)&&d.matchesResource(n)),u&&(o._overwriteVersionId(h.versionId),o._overwriteAlternativeVersionId(h.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(h.initialUndoRedoSnapshot))}else h.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(h.initialUndoRedoSnapshot)}const a=Lc(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new $Oe(o,h=>this._onWillDispose(h),(h,c)=>this._onDidChangeLanguage(h,c));return this._models[a]=l,l}createModel(e,t,n,s=!1){let r;return t?(r=this._createModelData(e,t.languageId,n,s),this.setMode(r.model,t)):r=this._createModelData(e,h_,n,s),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;const n=this._models[Lc(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=Lc(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===dt.file||e.scheme===dt.vscodeRemote||e.scheme===dt.userData||e.scheme===dt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Lc(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const h of l.past)Oh(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri));for(const h of l.future)Oh(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri))}}const a=bb.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(r)if(!s&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>Oh(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new qOe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,CH(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);bb._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldModeId:n})}};_k.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;_k=UOe([bd(0,Ki),bd(1,OJ),bd(2,ci),bd(3,_c),bd(4,dy),bd(5,Gs),bd(6,hy)],_k);const Bte="editor.semanticHighlighting";function SH(i,e,t){var n;const s=(n=t.getValue(Bte,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof s=="boolean"?s:e.getColorTheme().semanticHighlighting}class GOe extends ne{constructor(e,t,n,s){super(),this._watchers=Object.create(null),this._semanticStyling=s;const r=l=>{this._watchers[l.uri.toString()]=new tf(l,t,this._semanticStyling)},o=(l,h)=>{h.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const h=this._watchers[l.uri.toString()];SH(l,t,n)?h||r(l):h&&o(l,h)}};this._register(e.onModelAdded(l=>{SH(l,t,n)&&r(l)})),this._register(e.onModelRemoved(l=>{const h=this._watchers[l.uri.toString()];h&&o(l,h)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(Bte)&&a()})),this._register(t.onDidColorThemeChange(a))}}class KOe extends ne{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new T3(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class ZOe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class tf extends ne{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new yi(()=>this._fetchDocumentSemanticTokensNow(),tf.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const s=()=>{mt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const r of t0.all(e))typeof r.onDidChange=="function"&&this._documentProvidersChangeListeners.push(r.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};s(),this._register(t0.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(r=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Rte(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Ya,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=Ote(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const r=[],o=this._model.onDidChangeContent(a=>{r.push(a)});s.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,r);else{const{provider:l,tokens:h}=a,c=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,h||null,c,r)}},a=>{a&&(sd(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||nt(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),r.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,s){const r=this._currentDocumentResponse,o=()=>{s.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(Mte(t)){if(!r){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(const d of t.edits)a+=(d.data?d.data.length:0)-d.deleteCount;const l=r.data,h=new Uint32Array(l.length+a);let c=l.length,u=h.length;for(let d=t.edits.length-1;d>=0;d--){const f=t.edits[d],g=c-(f.start+f.deleteCount);g>0&&(tf._copy(l,c-g,h,u-g,g),u-=g),f.data&&(tf._copy(f.data,0,h,u-f.data.length,f.data.length),u-=f.data.length),c=f.start}c>0&&tf._copy(l,0,h,0,c),t={resultId:t.resultId,data:h}}}if(A2(t)){this._currentDocumentResponse=new ZOe(e,t.resultId,t.data);const a=ROe(t,n,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const h of a)for(const c of l.changes)h.applyEdit(c.range,c.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}tf.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class YOe{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function QOe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,s=i.length;n<s;n++){let r=i[n],o=-1;if(typeof r.fontStyle=="string"){o=0;let h=r.fontStyle.split(" ");for(let c=0,u=h.length;c<u;c++)switch(h[c]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new YOe(r.token||"",n,o,a,l)}return e}function XOe(i,e){i.sort((c,u)=>{let d=nPe(c.token,u.token);return d!==0?d:c.index-u.index});let t=0,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){let c=i.shift();c.fontStyle!==-1&&(t=c.fontStyle),c.foreground!==null&&(n=c.foreground),c.background!==null&&(s=c.background)}let r=new ePe;for(let c of e)r.getId(c);let o=r.getId(n),a=r.getId(s),l=new qF(t,o,a),h=new GF(l);for(let c=0,u=i.length;c<u;c++){let d=i[c];h.insert(d.token,d.fontStyle,r.getId(d.foreground),r.getId(d.background))}return new Vte(r,h)}const JOe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class ePe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(JOe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=Q.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class Vte{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(QOe(e),t)}static createFromParsedTokenTheme(e,t){return XOe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let s=this._match(t),r=iPe(t);n=(s.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const tPe=/\b(comment|string|regex|regexp)\b/;function iPe(i){let e=i.match(tPe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function nPe(i,e){return i<e?-1:i>e?1:0}class qF{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new qF(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class GF{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));let r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}let r=e.indexOf("."),o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new GF(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function sPe(i){let e=[];for(let t=1,n=i.length;t<n;t++){let s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const rPe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[io]:"#FFFFFE",[mu]:"#000000",[LF]:"#E5EBF1",[y2]:"#D3D3D3",[C2]:"#939393",[$ee]:"#ADD6FF4D"}},oPe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[io]:"#1E1E1E",[mu]:"#D4D4D4",[LF]:"#3A3D41",[y2]:"#404040",[C2]:"#707070",[$ee]:"#ADD6FF26"}},aPe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[io]:"#000000",[mu]:"#FFFFFF",[y2]:"#FFFFFF",[C2]:"#FFFFFF"}};function lPe(){const i=new H,e=nOe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=r=>{let o=r.defaults;for(;fi.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${r.id}:before { content: '${o.fontCharacter}'; font-family: ${sW(a)}; }`}return`.codicon-${r.id}:before { content: '${o.fontCharacter}'; }`},s=[];for(let r of e.getIcons()){const o=n(r);o&&s.push(o)}for(let r in t){const a=t[r].definition.src.map(l=>`${cc(l.location)} format('${l.format}')`).join(", ");s.push(`@font-face { src: ${a}; font-family: ${sW(r)}; font-display: block; }`)}return s.join(`
`)}}}const nf="vs",bk="vs-dark",km="hc-black",hPe=Pn.as(Nee.ColorContribution),cPe=Pn.as(lee.ThemingContribution);class Wte{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(XS(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,Q.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=N3(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,Q.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=hPe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case nf:return Ea.LIGHT;case km:return Ea.HIGH_CONTRAST;default:return Ea.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let r=N3(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Vte.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=qr.getForeground(r),a=qr.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function XS(i){return i===nf||i===bk||i===km}function N3(i){switch(i){case nf:return rPe;case bk:return oPe;case km:return aPe}}function JI(i){let e=N3(i);return new Wte(i,e)}class uPe extends ne{constructor(){super(),this._onColorThemeChange=this._register(new H),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(nf,JI(nf)),this._knownThemes.set(bk,JI(bk)),this._knownThemes.set(km,JI(km));const e=lPe();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(nf),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),ELe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return I5(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=so(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),ne.None}_registerShadowDomContainer(e){const t=so(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!XS(t.base)&&!XS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Wte(e,t)),XS(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(nf),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(km):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};cPe.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(sPe(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Ri.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var dPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const pv="data-keybinding-context";let KF=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class p0 extends KF{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}p0.INSTANCE=new p0;class z1 extends KF{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=fm.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===6){const r=Array.from(bt.map(this._values,([o])=>o));this._values.clear(),n.fire(new DH(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...bt.map(l,([h])=>h)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new DH(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(z1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(z1._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}z1._keyPrefix="config.";class gPe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class xH{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class DH{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class pPe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class zte{constructor(e){this._onDidChangeContext=new uD({merge:t=>new pPe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new gPe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new mPe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return mm.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new xH(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new xH(e))}getContext(e){return this._isDisposed?p0.INSTANCE:this.getContextValuesContainer(_Pe(e))}}let M3=class extends zte{constructor(e){super(0),this._contexts=new Map,this._toDispose=new ve,this._lastContextId=0;const t=new z1(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?p0.INSTANCE:this._contexts.get(e)||p0.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new KF(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};M3=dPe([fPe(0,Ki)],M3);class mPe extends zte{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Vr,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(pv)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(pv,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(pv),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?p0.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function _Pe(i){for(;i;){if(i.hasAttribute(pv)){const e=i.getAttribute(pv);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Ft.registerCommand(sIe,function(i,e,t){i.get(Xe).createKey(String(e),t)});Ft.registerCommand({id:"getContextKeyInfo",handler(){return[...Ie.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:v("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Ft.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of Ie.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function kH(i){let e=i.definition;for(;e instanceof De;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Wn;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},h={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(h)||a.push(h),a}i.relativeComplement=s})(Wn||(Wn={}));var ru;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(ru||(ru={}));function $p(i,e,t){const n=t.mode===ru.ALIGN?t.offset:t.offset+t.size,s=t.mode===ru.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}class m0 extends ne{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=ne.None,this.toDisposeOnSetContainer=ne.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=_e(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Rs(this.view),this.setContainer(e,t),this._register(xt(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=_e(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=bPe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(_e("slot"))}else this.container.appendChild(this.view);const s=new ve;m0.BUBBLE_UP_EVENTS.forEach(r=>{s.add(cn(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),m0.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(cn(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),jn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Cr(this.view),this.toDisposeOnClean=e.render(this.view)||ne.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Nu&&UL.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(GX(e)){let u=Un(e);t={top:u.top,left:u.left,width:u.width,height:u.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=So(this.view),s=kR(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,h;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:r===0?0:1},d={offset:t.left,size:t.width,position:o===0?0:1,mode:ru.ALIGN};l=$p(window.innerHeight,s,u)+window.pageYOffset,Wn.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(d.mode=ru.AVOID),h=$p(window.innerWidth,n,d)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},d={offset:t.top,size:t.height,position:r===0?0:1,mode:ru.ALIGN};h=$p(window.innerWidth,n,u),Wn.intersects({start:h,end:h+n},{start:u.offset,end:u.offset+u.size})&&(d.mode=ru.AVOID),l=$p(window.innerHeight,s,d)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const c=Un(this.container);this.view.style.top=`${l-(this.useFixedPosition?Un(this.view).top:c.top)}px`,this.view.style.left=`${h-(this.useFixedPosition?Un(this.view).left:c.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Rs(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Vl(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}m0.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];m0.BUBBLE_DOWN_EVENTS=["click"];let bPe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function Hte(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}const ZF=vPe.bind(void 0,!0);function vPe(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=M5(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function wPe(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function yPe(i,e){return R3(i.toLowerCase(),e.toLowerCase(),0,0)}function R3(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=R3(i,e,t+1,n+1))?$te({start:n,end:n+1},s):null}return R3(i,e,t,n+1)}function YF(i){return 97<=i&&i<=122}function I2(i){return 65<=i&&i<=90}function QF(i){return 48<=i&&i<=57}function CPe(i){return i===32||i===9||i===10||i===13}const SPe=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(i=>SPe.add(i.charCodeAt(0)));function Ute(i){return YF(i)||I2(i)||QF(i)}function $te(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function jte(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(I2(n)||QF(n)||t>0&&!Ute(i.charCodeAt(t-1)))return t}return i.length}function O3(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=O3(i,e,t+1,n+1);!s&&(r=jte(e,r))<e.length;)s=O3(i,e,t+1,r),r++;return s===null?null:$te({start:n,end:n+1},s)}}function xPe(i){let e=0,t=0,n=0,s=0,r=0;for(let c=0;c<i.length;c++)r=i.charCodeAt(c),I2(r)&&e++,YF(r)&&t++,Ute(r)&&n++,QF(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,h=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:h}}function DPe(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function kPe(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function LPe(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),I2(n)&&e++,YF(n)&&t++,CPe(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function qte(i,e){if(!e||(e=e.trim(),e.length===0)||!LPe(i)||e.length>60)return null;const t=xPe(e);if(!kPe(t)){if(!DPe(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=O3(i,e,0,s))===null;)s=jte(e,s+1);return n}const EPe=Hte(ZF,qte,wPe),APe=Hte(ZF,qte,yPe),LH=new F5(1e4);function EH(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=LH.get(i);n||(n=new RegExp(TLe(i),"i"),LH.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?APe(i,e):EPe(i,e)}function IPe(i,e,t,n,s,r){const o=Math.min(13,i.length);for(;t<o;t++){const a=H1(i,e,t,n,s,r,!1);if(a)return a}return[0,r]}function XF(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const ou=128;function JF(){const i=[],e=[];for(let t=0;t<=ou;t++)e[t]=0;for(let t=0;t<=ou;t++)i.push(e.slice(0));return i}function Gte(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const Kte=Gte(2*ou),P3=Gte(2*ou),wh=JF(),vd=JF(),LC=JF();function EC(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!$b(t)}}function AH(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function JS(i,e,t){return e[i]!==t[i]}function TPe(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(Kte[e]=s),e+=1),s+=1;return e===t}var Ta;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Ta||(Ta={}));function H1(i,e,t,n,s,r,o){const a=i.length>ou?ou:i.length,l=n.length>ou?ou:n.length;if(t>=a||r>=l||a-t>l-r||!TPe(e,t,a,s,r,l,!0))return;NPe(a,l,t,r,e,s);let h=1,c=1,u=t,d=r;const f=[!1];for(h=1,u=t;u<a;h++,u++){const _=Kte[u],w=P3[u],y=u+1<a?P3[u+1]:l;for(c=_-r+1,d=_;d<y;c++,d++){let x=Number.MIN_SAFE_INTEGER,L=!1;d<=w&&(x=MPe(i,e,u,t,n,s,d,l,r,wh[h-1][c-1]===0,f));let S=0;x!==Number.MAX_SAFE_INTEGER&&(L=!0,S=x+vd[h-1][c-1]);const k=d>_,D=k?vd[h][c-1]+(wh[h][c-1]>0?-5:0):0,T=d>_+1&&wh[h][c-1]>0,M=T?vd[h][c-2]+(wh[h][c-2]>0?-5:0):0;if(T&&(!k||M>=D)&&(!L||M>=S))vd[h][c]=M,LC[h][c]=3,wh[h][c]=0;else if(k&&(!L||D>=S))vd[h][c]=D,LC[h][c]=2,wh[h][c]=0;else if(L)vd[h][c]=S,LC[h][c]=1,wh[h][c]=wh[h-1][c-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o)return;h--,c--;const g=[vd[h][c],r];let p=0,m=0;for(;h>=1;){let _=c;do{const w=LC[h][_];if(w===3)_=_-2;else if(w===2)_=_-1;else break}while(_>=1);p>1&&e[t+h-1]===s[r+c-1]&&!JS(_+r-1,n,s)&&p+1>wh[h][_]&&(_=c),_===c?p++:p=1,m||(m=_),h--,c=_-1,g.push(c)}l===a&&(g[0]+=2);const b=m-a;return g[0]-=b,g}function NPe(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(P3[o]=a,o--),a--}function MPe(i,e,t,n,s,r,o,a,l,h,c){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===t-n?u=i[t]===s[o]?7:5:JS(o,s,r)&&(o===0||!JS(o-1,s,r))?(u=i[t]===s[o]?7:5,d=!0):EC(r,o)&&(o===0||!EC(r,o-1))?u=5:(EC(r,o-1)||AH(r,o-1))&&(u=5,d=!0),u>1&&t===n&&(c[0]=!0),d||(d=JS(o,s,r)||EC(r,o-1)||AH(r,o-1)),t===n?o>l&&(u-=d?3:5):h?u+=d?2:0:u+=d?0:1,o+1===a&&(u-=d?3:5),u}function RPe(i,e,t,n,s,r,o){return OPe(i,e,t,n,s,r,!0,o)}function OPe(i,e,t,n,s,r,o,a){let l=H1(i,e,t,n,s,r,a);if(l&&!o)return l;if(i.length>=3){const h=Math.min(7,i.length-1);for(let c=t+1;c<h;c++){const u=PPe(i,c);if(u){const d=H1(u,u.toLowerCase(),t,n,s,r,a);d&&(d[0]-=3,(!l||d[0]>l[0])&&(l=d))}}}return l}function PPe(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const mv="$(",eB=new RegExp(`\\$\\(${sr.iconNameExpression}(?:${sr.iconModifierExpression})?\\)`,"g"),FPe=new RegExp(`(\\\\)?${eB.source}`,"g");function BPe(i){return i.replace(FPe,(e,t)=>t?e:`\\${e}`)}const VPe=new RegExp(`\\\\${eB.source}`,"g");function WPe(i){return i.replace(VPe,e=>`\\${e}`)}const zPe=new RegExp(`(\\s)?(\\\\)?${eB.source}(\\s)?`,"g");function HPe(i){return i.indexOf(mv)===-1?i:i.replace(zPe,(e,t,n,s)=>n?e:t||s||"")}function AC(i){const e=i.indexOf(mv);return e===-1?{text:i}:UPe(i,e)}function UPe(i,e){const t=[];let n="";function s(d){if(d){n+=d;for(const f of d)t.push(a)}}let r=-1,o="",a=0,l,h,c=e;const u=i.length;for(s(i.substr(0,e));c<u;){if(l=i[c],h=i[c+1],l===mv[0]&&h===mv[1])r=c,s(o),o=mv,c++;else if(l===")"&&r!==-1){const d=c-r+1;a+=d,r=-1,o=""}else r!==-1?/^[a-z0-9\-]$/i.test(l)?o+=l:(s(o),r=-1,o=""):s(l);c++}return s(o),{text:n,iconOffsets:t}}function IC(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return EH(i,n,t);const r=QX(n," "),o=n.length-r.length,a=EH(i,r,t);if(a)for(const l of a){const h=s[l.start+o]+o;l.start+=h,l.end+=h}return a}const F3=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,eT=/(&amp;)?(&amp;)([^\s&])/g,Zte=ia("menu-selection",De.check),Yte=ia("menu-submenu",De.chevronRight);var vk;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(vk||(vk={}));let Qte=class vb extends dc{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...vt||Ws?[10]:[]],keyDown:!0}}),this.menuElement=s,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new ve),this.initializeStyleSheet(e),this._register(Mt.addTarget(s)),oe(s,Oe.KEY_DOWN,a=>{new pi(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(oe(s,Oe.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){Ot.stop(a,!0);const h=this.mnemonics.get(l);if(h.length===1&&(h[0]instanceof IH&&h[0].container&&this.focusItemByElement(h[0].container),h[0].onClick(a)),h.length>1){const c=h.shift();c&&c.container&&(this.focusItemByElement(c.container),h.push(c)),this.mnemonics.set(l,h)}}})),Ws&&this._register(oe(s,Oe.KEY_DOWN,a=>{const l=new pi(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ot.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ot.stop(a,!0))})),this._register(oe(this.domNode,Oe.MOUSE_OUT,a=>{let l=a.relatedTarget;Vl(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(oe(this.actionsList,Oe.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Vl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(l),h!==this.focusedItem&&this.updateFocus()}}})),this._register(Mt.addTarget(this.actionsList)),this._register(oe(this.actionsList,Yt.Tap,a=>{let l=a.initialTarget;if(!(!l||!Vl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(l),h!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new k2(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(oe(s,Yt.Change,a=>{Ot.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(oe(o,Oe.MOUSE_UP,a=>{a.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof tT)).forEach((a,l,h)=>{a.updatePositionInSet(l+1,h.length)})}initializeStyleSheet(e){I5(e)?(this.styleSheet=so(e),this.styleSheet.textContent=TH):(vb.globalStyleSheet||(vb.globalStyleSheet=so(),vb.globalStyleSheet.textContent=TH),this.styleSheet=vb.globalStyleSheet)}style(e){const t=this.getContainer(),n=e.foregroundColor?`${e.foregroundColor}`:"",s=e.backgroundColor?`${e.backgroundColor}`:"",r=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=r,this.domNode.style.color=n,this.domNode.style.backgroundColor=s,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof B3||a instanceof tT)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof La)return new tT(t.context,e,{icon:!0});if(e instanceof lF){const s=new IH(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new B3(t.context,e,s);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}};class B3 extends Cf{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let s=this.getAction().label;if(s){let r=F3.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new yi(()=>{this.element&&(this._register(oe(this.element,Oe.MOUSE_UP,s=>{if(Ot.stop(s,!0),Vs){if(new Jr(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(oe(this.element,Oe.CONTEXT_MENU,s=>{Ot.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ae(this.element,_e("a.action-menu-item")),this._action.id===La.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ae(this.item,_e("span.menu-item-check"+Zte.cssSelector)),this.check.setAttribute("role","none"),this.label=ae(this.item,_e("span.action-label")),this.options.label&&this.options.keybinding&&(ae(this.item,_e("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){jn(this.label);let e=HPe(this.getAction().label);if(e){const t=$Pe(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=F3.exec(e);if(n){e=T5(e),eT.lastIndex=0;let s=eT.exec(e);for(;s&&s[1];)s=eT.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(QX(r(e.substr(0,s.index))," "),_e("u",{"aria-hidden":"true"},s[3]),ILe(r(e.substr(s.index+s[0].length))," ")):this.label.innerText=r(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=v({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=s)}style(e){this.menuStyle=e,this.applyStyle()}}class IH extends B3{constructor(e,t,n,s){super(e,e,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new ve),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:vk.Right,this.showScheduler=new yi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new yi(()=>{this.element&&!Vl(um(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ae(this.item,_e("span.submenu-indicator"+Yte.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(oe(this.element,Oe.KEY_UP,t=>{let n=new pi(t);(n.equals(17)||n.equals(3))&&(Ot.stop(t,!0),this.createSubmenu(!0))})),this._register(oe(this.element,Oe.KEY_DOWN,t=>{let n=new pi(t);um()===this.item&&(n.equals(17)||n.equals(3))&&Ot.stop(t,!0)})),this._register(oe(this.element,Oe.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(oe(this.element,Oe.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(oe(this.element,Oe.FOCUS_OUT,t=>{this.element&&!Vl(um(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Ot.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=$p(e.width,t.width,{position:s===vk.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=$p(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ae(this.element,_e("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Qte(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new g2],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new jt(window.innerWidth,window.innerHeight),jt.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(oe(this.submenuContainer,Oe.KEY_UP,h=>{new pi(h).equals(15)&&(Ot.stop(h,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(oe(this.submenuContainer,Oe.KEY_DOWN,h=>{new pi(h).equals(15)&&Ot.stop(h,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class tT extends $F{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function $Pe(i){const e=F3,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}let TH=`
.monaco-menu {
	font-size: 13px;

}

${kH(Zte)}
${kH(Yte)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 =  */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function da(i,e){const t=Object.create(null);for(let n in e){const s=e[n];s&&(t[n]=Lh(s,i))}return t}function tB(i,e,t){function n(){const s=da(i.getColorTheme(),e);typeof t=="function"?t(s):t.style(s)}return n(),i.onDidColorThemeChange(n)}function jPe(i,e,t){return tB(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||rv,badgeForeground:(t==null?void 0:t.badgeForeground)||ov,badgeBorder:Gi},i)}function eg(i,e,t){return tB(e,Object.assign(Object.assign({},T2),t||{}),i)}const T2={listFocusBackground:HNe,listFocusForeground:UNe,listFocusOutline:$Ne,listActiveSelectionBackground:vu,listActiveSelectionForeground:wu,listActiveSelectionIconForeground:jS,listFocusAndSelectionBackground:vu,listFocusAndSelectionForeground:wu,listInactiveSelectionBackground:jNe,listInactiveSelectionIconForeground:GNe,listInactiveSelectionForeground:qNe,listInactiveFocusBackground:KNe,listInactiveFocusOutline:ZNe,listHoverBackground:YNe,listHoverForeground:QNe,listDropBackground:XNe,listSelectionOutline:Hs,listHoverOutline:Hs,listFilterWidgetBackground:JNe,listFilterWidgetOutline:eMe,listFilterWidgetNoMatchesOutline:tMe,listMatchesShadow:h0,treeIndentGuidesStroke:iMe,tableColumnsBorder:nMe},qPe={shadowColor:h0,borderColor:sMe,foregroundColor:rMe,backgroundColor:oMe,selectionForegroundColor:aMe,selectionBackgroundColor:lMe,selectionBorderColor:hMe,separatorColor:cMe};function GPe(i,e,t){return tB(e,Object.assign(Object.assign({},qPe),t),i)}class KPe{constructor(e,t,n,s,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,s=GX(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(_e(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",oe(this.block,Oe.MOUSE_DOWN,h=>h.stopPropagation()));const a=new ve,l=e.actionRunner||new r0;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new Qte(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)}),a.add(GPe(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(oe(window,Oe.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(oe(window,Oe.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;let c=new Jr(h),u=c.target;if(!c.rightButton){for(;u;){if(u===r)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),uu(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide&&e.onHide(!!r),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},s,!!s)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!sd(e.error)&&this.notificationService.error(e.error)}}var ZPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let V3=class extends ne{constructor(e,t,n,s,r){super(),this.contextMenuHandler=new KPe(n,e,t,s,r)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),Yd.getInstance().resetKeyStatus()}};V3=ZPe([$_(0,s_),$_(1,Yn),$_(2,Tg),$_(3,Zi),$_(4,ci)],V3);const N2=kt("layoutService");var YPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let W3=class extends ne{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=ne.None,this.container=e.container,this.contextView=this._register(new m0(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const s=xt(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};W3=YPe([QPe(0,N2)],W3);const Xte=kt("dialogService");let XPe=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class JPe{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new XPe(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(let[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}}class NH extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class wk{constructor(e=new P1,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(qt,this)}createChild(e){return new wk(e,this._strict,this)}invokeFunction(e,...t){let n=To.traceInvocation(e),s=!1;try{return e({get:(o,a)=>{if(s)throw xke("service accessor is only valid during the invocation of its target method");const l=this._getOrCreateServiceInstance(o,n);if(!l&&a!==Kke)throw new Error(`[invokeFunction] unknown service '${o}'`);return l}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){let n,s;return e instanceof Uc?(n=To.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=To.traceCreation(e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){let s=ya.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);r.push(l)}let o=s.length>0?s[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...r)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Uc)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Uc?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const s=new JPe(a=>a.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),r++>1e3)throw new NH(s);for(let l of ya.getServiceDependencies(a.desc.ctor)){let h=this._getServiceInstanceOrDescriptor(l.id);if(!h&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),h instanceof Uc){const c={id:l.id,desc:h,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,c),o.push(c)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new NH(s);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Uc){const c=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,c)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof Uc)return this._createServiceInstance(t,n,s,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,s){if(n){const r=new Ub(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=r.value,h=l[a];return typeof h!="function"||(h=h.bind(l),o[a]=h),h},set(o,a,l){return r.value[a]=l,!0}})}else return this._createInstance(e,t,s)}}class To{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return To._None}static traceCreation(e){return To._None}branch(e,t){let n=new To(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;To._totals+=e;let t=!1;function n(r,o){let a=[],l=new Array(r+1).join("	");for(const[h,c,u]of o._dep)if(c&&u){t=!0,a.push(`${l}CREATES -> ${h}`);let d=n(r+1,u);d&&a.push(d)}else a.push(`${l}uses -> ${h}`);return a.join(`
`)}let s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${To._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}}To._None=new class extends To{constructor(){super(-1,null)}stop(){}branch(){return this}};To._totals=0;const my=kt("labelService");class e5e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}class wd extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function MH(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=Wn.intersect(i,n.range);Wn.isEmpty(s)||t.push({range:s,size:n.size})}return t}function z3({start:i,end:e},t){return{start:i+t,end:e+t}}function t5e(i){const e=[];let t=null;for(let n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function i5e(...i){return t5e(i.reduce((e,t)=>e.concat(t),[]))}class RH{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const s=n.length-t,r=MH({start:0,end:e},this.groups),o=MH({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:z3(l.range,s),size:l.size})),a=n.map((l,h)=>({range:{start:e+h,end:e+h+1},size:l.size}));this.groups=i5e(r,a,o),this._size=this.groups.reduce((l,h)=>l+h.size*(h.range.end-h.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}function n5e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class s5e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=_e(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:r}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),n5e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Rg=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const ll={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class _y{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class r5e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class o5e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function a5e(i,e){return Array.isArray(i)&&Array.isArray(e)?Ul(i,e):i===e}class l5e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Xa{constructor(e,t,n,s=ll){if(this.virtualDelegate=t,this.domId=`list_id_${++Xa.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new X0(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ne.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ne.None,this.onDragLeaveTimeout=ne.None,this.disposables=new ve,this._onDidChangeContentHeight=new H,this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new RH;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new s5e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=al(s,o=>o.horizontalScrolling,ll.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof s.additionalScrollHeight>"u"?0:s.additionalScrollHeight,this.accessibilityProvider=new l5e(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",al(s,o=>o.transformOptimization,ll.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Mt.addTarget(this.rowsContainer)),this.scrollable=new D2(al(s,o=>o.smoothScrolling,!1)?125:0,o=>jl(o)),this.scrollableElement=this.disposables.add(new MF(this.rowsContainer,{alwaysConsumeMouseWheel:al(s,o=>o.alwaysConsumeMouseWheel,ll.alwaysConsumeMouseWheel),horizontal:1,vertical:al(s,o=>o.verticalScrollMode,ll.verticalScrollMode),useShadows:al(s,o=>o.useShadows,ll.useShadows),mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(oe(this.rowsContainer,Yt.Change,o=>this.onTouchChange(o))),this.disposables.add(oe(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(oe(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(oe(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(oe(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(oe(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=al(s,o=>o.setRowLineHeight,ll.setRowLineHeight),this.setRowHeight=al(s,o=>o.setRowHeight,ll.setRowHeight),this.supportDynamicHeights=al(s,o=>o.supportDynamicHeights,ll.supportDynamicHeights),this.dnd=al(s,o=>o.dnd,ll.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:qA(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Wn.intersect(s,r),a=new Map;for(let L=o.start;L<o.end;L++){const S=this.items[L];if(S.dragStartDisposable.dispose(),S.row){let k=a.get(S.templateId);k||(k=[],a.set(S.templateId,k));const D=this.renderers.get(S.templateId);D&&D.disposeElement&&D.disposeElement(S.element,L,S.row.templateData,S.size),k.push(S.row)}S.row=null}const l={start:e+t,end:this.items.length},h=Wn.intersect(l,s),c=Wn.relativeComplement(l,s),u=n.map(L=>({id:String(this.itemId++),element:L,templateId:this.virtualDelegate.getTemplateId(L),size:this.virtualDelegate.getHeight(L),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(L),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ne.None}));let d;e===0&&t>=this.items.length?(this.rangeMap=new RH,this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=z3(h,f),m=Wn.intersect(g,p);for(let L=m.start;L<m.end;L++)this.updateItemInDOM(this.items[L],L);const b=Wn.relativeComplement(p,g);for(const L of b)for(let S=L.start;S<L.end;S++)this.removeItemFromDOM(S);const _=c.map(L=>z3(L,f)),y=[{start:e,end:e+n.length},..._].map(L=>Wn.intersect(g,L)),x=this.getNextToLastElement(y);for(const L of y)for(let S=L.start;S<L.end;S++){const k=this.items[S],D=a.get(k.templateId),T=D==null?void 0:D.pop();this.insertItemInDOM(S,x,T)}for(const L of a.values())for(const S of L)this.cache.release(S);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(L=>L.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=jl(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:vLe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:qA(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=Wn.relativeComplement(a,e),h=Wn.relativeComplement(e,a),c=this.getNextToLastElement(l);if(o){const u=Wn.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}for(const u of l)for(let d=u.start;d<u.end;d++)this.insertItemInDOM(d,c);for(const u of h)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const s=this.items[e];s.row||(s.row=n??this.cache.alloc(s.templateId));const r=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",r);const o=this.accessibilityProvider.isChecked(s.element);typeof o<"u"&&s.row.domNode.setAttribute("aria-checked",String(!!o)),s.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(s.row.domNode,t):this.rowsContainer.appendChild(s.row.domNode)),this.updateItemInDOM(s,e);const a=this.renderers.get(s.templateId);if(!a)throw new Error(`No renderer found for template id ${s.templateId}`);a&&a.renderElement(s.element,e,s.row.templateData,s.size);const l=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!l,l&&(s.dragStartDisposable=oe(s.row.domNode,"dragstart",h=>this.onDragStart(s.element,l,h))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Vs?"-moz-fit-content":"fit-content",e.width=qA(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Re.map(this.disposables.add(new $t(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Re.map(this.disposables.add(new $t(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Re.filter(Re.map(this.disposables.add(new $t(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Re.map(this.disposables.add(new $t(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Re.any(Re.map(this.disposables.add(new $t(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Re.map(this.disposables.add(new $t(this.domNode,Yt.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Re.map(this.disposables.add(new $t(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Re.map(this.disposables.add(new $t(this.rowsContainer,Yt.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(xte.TEXT,t),n.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(s,n)),typeof r>"u"&&(r=String(s.length));const o=_e(".monaco-drag-image");o.textContent=r,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new _y(s),Eh.CurrentDragAndDropData=new r5e(s),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Eh.CurrentDragAndDropData&&Eh.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Eh.CurrentDragAndDropData)this.currentDragData=Eh.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new o5e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=ND(n).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),n=n[0]===-1?[-1]:n,a5e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=xt(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of n){const r=this.items[s];r.dropTarget=!0,r.row&&r.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=xt(()=>{for(const s of n){const r=this.items[s];r.dropTarget=!1,r.row&&r.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Qm(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Eh.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Eh.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ne.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=UX(this.domNode).top;this.dragOverAnimationDisposable=LLe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Qm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let h=!1;for(let c=l.start;c<l.end;c++){const u=this.probeDynamicHeight(c);u!==0&&this.rangeMap.splice(c,1,[this.items[c]]),a+=u,h=h||u!==0}if(!h){a!==0&&this.eventuallyUpdateScrollDimensions();const c=Wn.relativeComplement(s,l);for(const d of c)for(let f=d.start;f<d.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Wn.relativeComplement(l,s);for(const d of u)for(let f=d.start;f<d.end;f++){const g=f+1,p=g<this.items.length?this.items[g].row:null,m=p?p.domNode:null;this.insertItemInDOM(f,m)}for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof r=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+d;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const s=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);return r&&(r.renderElement(t.element,e,s.templateData,void 0),r.disposeElement&&r.disposeElement(t.element,e,s.templateData,void 0)),t.size=s.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),mt(this.disposables)}}Xa.InstanceCount=0;Rg([rn],Xa.prototype,"onMouseClick",null);Rg([rn],Xa.prototype,"onMouseDblClick",null);Rg([rn],Xa.prototype,"onMouseMiddleClick",null);Rg([rn],Xa.prototype,"onMouseDown",null);Rg([rn],Xa.prototype,"onContextMenu",null);Rg([rn],Xa.prototype,"onTouchStart",null);Rg([rn],Xa.prototype,"onTap",null);var Og=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class h5e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let yk=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new H,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new h5e(this)}splice(e,t,n){var s;t=Math.max(0,Math.min(t,this.length-e));const r=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(h=>h<e),...n.map((h,c)=>h?c+e:-1).filter(h=>h!==-1),...this.sortedIndexes.filter(h=>h>=o).map(h=>h+r)],l=this.length+r;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const h=(s=this.sortedIndexes.find(c=>c>=e))!==null&&s!==void 0?s:l-1;a.push(Math.min(h,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(FH),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=H3(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return K5(this.sortedIndexes,e,FH)>=0}dispose(){mt(this._onChange)}};Og([rn],yk.prototype,"renderer",null);class c5e extends yk{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class iT{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const s=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),r=n.map(o=>s.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,r)}}function Hu(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function jp(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:jp(i.parentElement)}class Jte{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new ve,this.multipleSelectionDisposables=new ve,this.onKeyDown.filter(s=>s.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(s=>(vt?s.metaKey:s.ctrlKey)&&s.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Re.chain(this.disposables.add(new $t(this.view.domNode,"keydown")).event).filter(e=>!Hu(e.target)).map(e=>new pi(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(vt?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ds(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Og([rn],Jte.prototype,"onKeyDown",null);var qp;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(qp||(qp={}));const eie=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class u5e{constructor(e,t,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=s,this.enabled=!1,this.state=qp.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ve,this.disposables=new ve,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Re.chain(this.enabledDisposables.add(new $t(this.view.domNode,"keydown")).event).filter(s=>!Hu(s.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(s=>new pi(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>{s.stopPropagation(),s.preventDefault()}).map(s=>s.browserEvent.key).event,t=Re.debounce(e,()=>null,800);Re.reduce(Re.any(e,t),(s,r)=>r===null?null:(s||"")+r)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Eg(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=qp.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===qp.Idle?1:0;this.state=qp.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||ZF(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class d5e{constructor(e,t){this.list=e,this.view=t,this.disposables=new ve,Re.chain(this.disposables.add(new $t(t.domNode,"keydown")).event).filter(s=>!Hu(s.target)).map(s=>new pi(s)).filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!(s instanceof HTMLElement)||s.tabIndex===-1)return;const r=window.getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function tie(i){return vt?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function iie(i){return i.browserEvent.shiftKey}function f5e(i){return i instanceof MouseEvent&&i.button===2}const PH={isSelectionSingleChangeEvent:tie,isSelectionRangeChangeEvent:iie};class nie{constructor(e){this.list=e,this.disposables=new ve,this._onPointer=new H,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||PH),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Mt.addTarget(e.getHTMLElement()))),Re.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||PH))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){jp(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(jp(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Hu(e.browserEvent.target)||jp(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),f5e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Hu(e.browserEvent.target)||jp(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const c=this.list.getFocus()[0];n=c??t,this.list.setAnchor(n)}const s=Math.min(n,t),r=Math.max(n,t),o=ds(s,r+1),a=this.list.getSelection(),l=m5e(H3(a,[n]),n);if(l.length===0)return;const h=H3(o,_5e(a,l));this.list.setSelection(h,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class sie{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):vt||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=n.join(`
`)}}const g5e={listFocusBackground:Q.fromHex("#7FB0D0"),listActiveSelectionBackground:Q.fromHex("#0E639C"),listActiveSelectionForeground:Q.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Q.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Q.fromHex("#094771"),listFocusAndSelectionForeground:Q.fromHex("#FFFFFF"),listInactiveSelectionBackground:Q.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Q.fromHex("#FFFFFF"),listHoverBackground:Q.fromHex("#2A2D2E"),listDropBackground:Q.fromHex("#383B3D"),treeIndentGuidesStroke:Q.fromHex("#a9a9a9"),tableColumnsBorder:Q.fromHex("#cccccc").transparent(.2)},p5e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function m5e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function H3(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function _5e(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const FH=(i,e)=>i-e;class b5e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){let r=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class v5e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e);s?n.setAttribute("aria-label",s):n.removeAttribute("aria-label");const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.setAttribute("aria-level",`${r}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class w5e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,s){return this.dnd.onDragOver(e,t,n,s)}onDragLeave(e,t,n,s){var r,o;(o=(r=this.dnd).onDragLeave)===null||o===void 0||o.call(r,e,t,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,s){this.dnd.drop(e,t,n,s)}}class sh{constructor(e,t,n,s,r=p5e){var o;this.user=e,this._options=r,this.focus=new yk("focused"),this.anchor=new yk("anchor"),this.eventBufferer=new w5,this._ariaLabel="",this.disposables=new ve,this._onDidDispose=new H,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new c5e(a!=="listbox"),Qa(r,g5e,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(l.push(new v5e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(c=>new b5e(c.templateId,[...l,c]));const h=Object.assign(Object.assign({},r),{dnd:r.dnd&&new w5e(this,r.dnd)});if(this.view=new Xa(t,n,s,h),this.view.domNode.setAttribute("role",a),r.styleController)this.styleController=r.styleController(this.view.domId);else{const c=so(this.view.domNode);this.styleController=new sie(c,this.view.domId)}if(this.spliceable=new e5e([new iT(this.focus,this.view,r.identityProvider),new iT(this.selection,this.view,r.identityProvider),new iT(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new d5e(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new Jte(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const c=r.keyboardNavigationDelegate||eie;this.typeLabelController=new u5e(this,this.view,r.keyboardNavigationLabelProvider,c),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Re.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Re.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Re.chain(this.disposables.add(new $t(this.view.domNode,"keydown")).event).map(r=>new pi(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(uH).filter(()=>!1).event,n=Re.chain(this.disposables.add(new $t(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(r=>new pi(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(uH).map(({browserEvent:r})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,h=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:h,browserEvent:r}}).event,s=Re.chain(this.view.onContextMenu).filter(r=>!e).map(({element:r,index:o,browserEvent:a})=>({element:r,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Re.any(t,n,s)}get onKeyDown(){return this.disposables.add(new $t(this.view.domNode,"keydown")).event}get onDidFocus(){return Re.signal(this.disposables.add(new $t(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new nie(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new wd(this.user,`Invalid start index: ${e}`);if(t<0)throw new wd(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new wd(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new wd(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return QR(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new wd(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return OH(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.view.element(n),r=this.getFocusedElements()[0];if(r!==s){const o=this.findPreviousIndex(n,!1,t);o>-1&&r!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield a1(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return OH(this,void 0,void 0,function*(){let n;const s=this.view.getScrollTop();s===0?n=this.view.indexAt(s):n=this.view.indexAfter(s-1);const r=this.view.element(n),o=this.getFocusedElements()[0];if(o!==r){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=s;this.view.setScrollTop(s-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield a1(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new wd(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if($f(t)){const o=r-this.view.renderHeight;this.view.setScrollTop(o*ko(t,0,1)+s)}else{const o=s+r,a=n+this.view.renderHeight;s<n&&o>=a||(s<n||o>=a&&r>=this.view.renderHeight?this.view.setScrollTop(s):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new wd(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<t||n+s>t+this.view.renderHeight)return null;const r=s-this.view.renderHeight;return Math.abs((t-n)/r)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Og([rn],sh.prototype,"onDidChangeFocus",null);Og([rn],sh.prototype,"onDidChangeSelection",null);Og([rn],sh.prototype,"onContextMenu",null);Og([rn],sh.prototype,"onKeyDown",null);Og([rn],sh.prototype,"onDidFocus",null);class y5e{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ne.None}}renderElement(e,t,n,s){if(n.disposable&&n.disposable.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new Ya,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class C5e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function S5e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new C5e(i,e.accessibilityProvider)})}class x5e{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new y5e(l,o));this.list=new sh(e,t,n,a,S5e(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Re.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Re.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Re.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ds(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const D5e={separatorBorder:Q.transparent};class rie{constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=ko(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class k5e extends rie{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class L5e extends rie{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Ah;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Ah||(Ah={}));var Ck;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(Ck||(Ck={}));class oie extends ne{constructor(e,t={}){var n,s;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Ah.Idle,this._onDidSashChange=this._register(new H),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new H),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=bs(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=bs(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ae(this.el,_e(".sash-container")),this.viewContainer=_e(".split-view-container"),this.scrollable=new D2(125,jl),this.scrollableElement=this._register(new MF(this.viewContainer,{vertical:this.orientation===0?(n=t.scrollbarVisibility)!==null&&n!==void 0?n:1:2,horizontal:this.orientation===1?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{this.viewContainer.scrollTop=r.scrollTop,this.viewContainer.scrollLeft=r.scrollLeft})),ae(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||D5e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,o)=>{const a=bs(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},l=r.view;this.doAddView(l,a,o,!0)}),this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s];r.size=ko(Math.round(this.proportions[s]*e),r.minimumSize,r.maximumSize)}else{const s=ds(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=uu(oe(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),oe(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const h=this.viewItems.map(g=>g.size);let c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];c=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];c=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let d,f;if(!l){const g=ds(s,-1),p=ds(s+1,this.viewItems.length),m=g.reduce((k,D)=>k+(this.viewItems[D].minimumSize-h[D]),0),b=g.reduce((k,D)=>k+(this.viewItems[D].viewMaximumSize-h[D]),0),_=p.length===0?Number.POSITIVE_INFINITY:p.reduce((k,D)=>k+(h[D]-this.viewItems[D].minimumSize),0),w=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((k,D)=>k+(h[D]-this.viewItems[D].viewMaximumSize),0),y=Math.max(m,w),x=Math.min(_,b),L=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(p);if(typeof L=="number"){const k=this.viewItems[L],D=Math.floor(k.viewMinimumSize/2);d={index:L,limitDelta:k.visible?y-D:y+D,size:k.size}}if(typeof S=="number"){const k=this.viewItems[S],D=Math.floor(k.viewMinimumSize/2);f={index:S,limitDelta:k.visible?x+D:x-D,size:k.size}}}this.sashDragState={start:a,current:a,index:s,sizes:h,minDelta:c,maxDelta:u,alt:l,snapBefore:d,snapAfter:f,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:h}=this.sashDragState;this.sashDragState.current=e;const c=e-n,u=this.resize(t,c,s,void 0,void 0,o,a,l,h);if(r){const d=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=d?t:t+1,p=this.viewItems[g],m=p.size-p.maximumSize,b=p.size-p.minimumSize,_=d?t-1:t+1;this.resize(_,-u,f,void 0,void 0,m,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ko(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==Ah.Idle)throw new Error("Cant modify splitview");if(this.state=Ah.Busy,e<0||e>=this.viewItems.length)return;const n=ds(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=ko(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r),this.state=Ah.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=ko(n,a.minimumSize,a.maximumSize);const s=ds(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==Ah.Idle)throw new Error("Cant modify splitview");this.state=Ah.Busy;const r=_e(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(d=>this.onViewChange(c,d)),a=xt(()=>this.viewContainer.removeChild(r)),l=uu(o,a);let h;typeof t=="number"?h=t:t.type==="split"?h=this.getViewSize(t.index)/2:t.type==="invisible"?h={cachedVisibleSize:t.cachedVisibleSize}:h=e.minimumSize;const c=this.orientation===0?new k5e(r,e,h,l):new L5e(r,e,h,l);if(this.viewItems.splice(n,0,c),this.viewItems.length>1){let d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const f=this.orientation===0?new zn(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:1})):new zn(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:0})),g=this.orientation===0?k=>({sash:f,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:f,start:k.startX,current:k.currentX,alt:k.altKey}),m=Re.map(f.onDidStart,g)(this.onSashStart,this),_=Re.map(f.onDidChange,g)(this.onSashChange,this),y=Re.map(f.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===f))(this.onSashEnd,this),x=f.onDidReset(()=>{const k=this.sashItems.findIndex($=>$.sash===f),D=ds(k,-1),T=ds(k+1,this.viewItems.length),M=this.findFirstSnapIndex(D),j=this.findFirstSnapIndex(T);typeof M=="number"&&!this.viewItems[M].visible||typeof j=="number"&&!this.viewItems[j].visible||this._onDidSashReset.fire(k)}),L=uu(m,_,y,x,f),S={sash:f,disposable:L};this.sashItems.splice(n-1,0,S)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([n],u),this.state=Ah.Idle,!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(c=>c.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,h){if(e<0||e>=this.viewItems.length)return 0;const c=ds(e,-1),u=ds(e+1,this.viewItems.length);if(r)for(const S of r)cI(c,S),cI(u,S);if(s)for(const S of s)lC(c,S),lC(u,S);const d=c.map(S=>this.viewItems[S]),f=c.map(S=>n[S]),g=u.map(S=>this.viewItems[S]),p=u.map(S=>n[S]),m=c.reduce((S,k)=>S+(this.viewItems[k].minimumSize-n[k]),0),b=c.reduce((S,k)=>S+(this.viewItems[k].maximumSize-n[k]),0),_=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].maximumSize),0),y=Math.max(m,w,o),x=Math.min(_,b,a);let L=!1;if(l){const S=this.viewItems[l.index],k=t>=l.limitDelta;L=k!==S.visible,S.setVisible(k,l.size)}if(!L&&h){const S=this.viewItems[h.index],k=t<h.limitDelta;L=k!==S.visible,S.setVisible(k,h.size)}if(L)return this.resize(e,t,n,s,r,o,a);t=ko(t,y,x);for(let S=0,k=t;S<d.length;S++){const D=d[S],T=ko(f[S]+k,D.minimumSize,D.maximumSize),M=T-f[S];k-=M,D.size=T}for(let S=0,k=t;S<g.length;S++){const D=g[S],T=ko(p[S]-k,D.minimumSize,D.maximumSize),M=T-p[S];k+=M,D.size=T}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=ds(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)cI(s,a);for(const a of r)lC(s,a);typeof e=="number"&&lC(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],h=ko(l.size+n,l.minimumSize,l.maximumSize),c=h-l.size;n-=c,l.size=h}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:h}=this.sashItems[l],c=this.viewItems[l];a+=c.size;const u=!(t[l]&&o[l+1]),d=!(n[l]&&r[l+1]);if(u&&d){const f=ds(l,-1),g=ds(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),m=this.findFirstSnapIndex(g),b=typeof p=="number"&&!this.viewItems[p].visible,_=typeof m=="number"&&!this.viewItems[m].visible;b&&r[l]&&(a>0||this.startSnappingEnabled)?h.state=1:_&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?h.state=2:h.state=0}else u&&!d?h.state=1:!u&&d?h.state=2:h.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class by{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=by.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=ae(e,_e(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=ae(t,_e(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);jn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}by.TemplateId="row";function E5e(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return by.TemplateId}}}class A5e{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new H,this.onDidLayout=this._onDidLayout.event,this.element=_e(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Re.None}layout(e){this._onDidLayout.fire([this.index,e])}}class M2{constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.domId=`table_id_${++M2.InstanceCount}`,this.cachedHeight=0,this.domNode=ae(t,_e(`.monaco-table.${this.domId}`));const a=s.map((c,u)=>new A5e(c,u)),l={size:a.reduce((c,u)=>c+u.column.weight,0),views:a.map(c=>({size:c.column.weight,view:c}))};this.splitview=new oie(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const h=new by(s,r,c=>this.splitview.getViewSize(c));this.list=new sh(e,this.domNode,E5e(n),[h],o),this.columnLayoutDisposable=Re.any(...a.map(c=>c.onDidLayout))(([c,u])=>h.layoutColumn(c,u)),this.styleElement=so(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}M2.InstanceCount=0;var _v;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(_v||(_v={}));class Zr extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class iB{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function nB(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function U1(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function nT(i){return typeof i.collapsible=="boolean"}class I5e{constructor(e,t,n,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new w5,this._onDidChangeCollapseState=new H,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new H,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new H,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=bt.empty(),s={}){if(e.length===0)throw new Zr(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s,r,o){var a;s===void 0&&(s=bt.empty()),o===void 0&&(o=(a=r.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,s,r);const h=[...s],c=t[t.length-1],u=new Dl({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,c),...h,...l.children.slice(c+n)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,h,r);const d=t.slice(0,-1),f=(m,b,_)=>{if(o>0)for(let w=0;w<_;w++)m--,b--,this.spliceSmart(e,[...d,m,0],Number.MAX_SAFE_INTEGER,h[b].children,r,o-1)};let g=Math.min(l.children.length,c+n),p=h.length;for(const m of u.changes.sort((b,_)=>_.originalStart-b.originalStart))f(g,p,g-(m.originalStart+m.originalLength)),g=m.originalStart,p=m.modifiedStart-c,this.spliceSimple([...d,g],m.originalLength,bt.slice(h,p,p+m.modifiedLength),r);f(g,p,g)}spliceSimple(e,t,n=bt.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:h,visible:c}=this.getParentNodeWithListIndex(e),u=[],d=bt.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,h,u,s)),f=e[e.length-1],g=a.children.length>0;let p=0;for(let S=f;S>=0&&S<a.children.length;S--){const k=a.children[S];if(k.visible){p=k.visibleChildIndex;break}}const m=[];let b=0,_=0;for(const S of d)m.push(S),_+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=p+b++);const w=BW(a.children,f,t,m);o?a.lastDiffIds?BW(a.lastDiffIds,f,t,m.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let y=0;for(const S of w)S.visible&&y++;if(y!==0)for(let S=f+m.length;S<a.children.length;S++){const k=a.children[S];k.visible&&(k.visibleChildIndex-=y)}if(a.visibleChildrenCount+=b-y,h&&c){const S=w.reduce((k,D)=>k+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,_-S),this.list.splice(l,S,u)}if(w.length>0&&r){const S=k=>{r(k),k.children.forEach(S)};w.forEach(S)}const x=a.children.length>0;g!==x&&this.setCollapsible(e.slice(0,-1),x),this._onDidSplice.fire({insertedNodes:m,deletedNodes:w});let L=a;for(;L;){if(L.visibility===2){this.refilter();break}L=L.parent}}rerender(e){if(e.length===0)throw new Zr(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!nT(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(nT(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!nT(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const h=e.children||bt.empty(),c=s&&l!==0&&!a.collapsed,u=bt.map(h,g=>this.createTreeNode(g,a,l,c,r,o));let d=0,f=1;for(const g of u)a.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=d++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,s&&r.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const h of e.children)a=this._updateNodeAfterFilterChange(h,r,n,s&&!e.collapsed)||a,h.visible&&(h.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):nB(n)?(e.filterData=n.data,U1(n.visibility)):(e.filterData=void 0,U1(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Zr(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Zr(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Zr(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:iAe(e)[0]}}const BH=ia("tree-item-expanded",De.chevronDown),VH=ia("tree-filter-on-type-on",De.listFilter),WH=ia("tree-filter-on-type-off",De.listSelection),T5e=ia("tree-filter-clear",De.close),Sk=ia("tree-item-loading",De.loading);class N5e extends _y{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function sT(i){return i instanceof _y?new N5e(i):i}class M5e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ne.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(sT(e),t)}onDragOver(e,t,n,s,r=!0){const o=this.dnd.onDragOver(sT(e),t&&t.element,n,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=Qm(()=>{const d=this.modelProvider(),f=d.getNodeLocation(t);d.isCollapsed(f)&&d.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!r){const d=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:d,effect:f,feedback:[n]}}return o}if(o.bubble===1){const d=this.modelProvider(),f=d.getNodeLocation(t),g=d.getParentNodeLocation(f),p=d.getNode(g),m=g&&d.getListIndex(g);return this.onDragOver(e,p,m,s,!1)}const l=this.modelProvider(),h=l.getNodeLocation(t),c=l.getListIndex(h),u=l.getListRenderCount(h);return Object.assign(Object.assign({},o),{feedback:ds(c,c+u)})}drop(e,t,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(sT(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function R5e(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new M5e(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),s=n.getNodeLocation(t),r=n.getParentNodeLocation(s);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class sB{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var $1;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})($1||($1={}));class O5e{constructor(e,t=[]){this._elements=t,this.onDidChange=Re.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class j1{constructor(e,t,n,s,r={}){this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=j1.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new UAe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ne.None,this.disposables=new ve,this.templateId=e.templateId,this.updateOptions(r),Re.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=ko(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==$1.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new ve;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ae(e,_e(".monaco-tl-row")),n=ae(t,_e(".monaco-tl-indent")),s=ae(t,_e(".monaco-tl-twistie")),r=ae(t,_e(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:ne.None,templateData:o}}renderElement(e,t,n,s){typeof s=="number"&&(this.renderedNodes.set(e,{templateData:n,height:s}),this.renderedElements.set(e.element,e));const r=j1.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${r}px`,n.indent.style.width=`${r+this.indent-16}px`,this.renderTwistie(e,n),typeof s=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...BH.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...BH.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(jn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new ve,s=this.modelProvider();let r=e;for(;;){const o=s.getNodeLocation(r),a=s.getParentNodeLocation(o);if(!a)break;const l=s.getNode(a),h=_e(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&h.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(h):t.indent.insertBefore(h,t.indent.firstElementChild),this.renderedIndentGuides.add(l,h),n.add(xt(()=>this.renderedIndentGuides.delete(l,h))),r=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(s=>{const r=n.getNodeLocation(s);try{const o=n.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),mt(this.disposables)}}j1.DefaultIndent=8;class P5e{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ve,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const r=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return r;let o;if(typeof r=="boolean"?o=r?1:0:nB(r)?o=U1(r.visibility):o=r,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Ta.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const o=r&&r.toString();if(typeof o>"u")return{data:Ta.Default,visibility:!0};const a=H1(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,s.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Ta.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){mt(this.disposables)}}class F5e{constructor(e,t,n,s,r){this.tree=e,this.view=n,this.filter=s,this.keyboardNavigationDelegate=r,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new H,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new H,this.enabledDisposables=new ve,this.disposables=new ve,this.domNode=_e(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(oe(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=ae(n.getHTMLElement(),_e(".monaco-list-type-filter-message")),this.labelDomNode=ae(this.domNode,_e("span.label"));const o=ae(this.domNode,_e(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=ae(o,_e("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(oe(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=ae(o,_e("button.clear"+T5e.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=v("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new $t(this.view.getHTMLElement(),"keydown")),t=Re.chain(e.event).filter(s=>!Hu(s.target)||s.target===this.filterOnTypeDomNode).filter(s=>s.key!=="Dead"&&!/^Media/.test(s.key)).map(s=>new pi(s)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(s=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(s)&&!(s.keyCode===18||s.keyCode===16||s.keyCode===15||s.keyCode===17)||(this.pattern.length>0||this.triggered)&&(s.keyCode===9||s.keyCode===1)&&!s.altKey&&!s.ctrlKey&&!s.metaKey||s.keyCode===1&&(vt?s.altKey&&!s.metaKey:s.ctrlKey)&&!s.shiftKey).forEach(s=>{s.stopPropagation(),s.preventDefault()}).event,n=this.enabledDisposables.add(new $t(this.clearDomNode,"click"));Re.chain(Re.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(vt?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,s=>!Ta.isDefault(s.filterData));const n=this.tree.getFocus();if(n.length>0){const s=n[0];this.tree.getRelativeTop(s)===null&&this.tree.reveal(s,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Un(e),n=e.clientWidth,s=n/2,r=this.domNode.clientWidth,o=new ve;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-r-6}px`;break}},h=u=>{u.preventDefault();const d=u.clientX-t;u.dataTransfer&&(u.dataTransfer.dropEffect="none"),d<s?a="nw":a="ne",l()},c=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",mt(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(xt(()=>this.domNode.classList.remove("dragging"))),o.add(oe(document,"dragover",u=>h(u))),o.add(oe(this.domNode,"dragend",()=>c())),Eh.CurrentDragAndDropData=new J4e("vscode-ui"),o.add(xt(()=>Eh.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...WH.classNamesArray),this.filterOnTypeDomNode.classList.add(...VH.classNamesArray),this.filterOnTypeDomNode.title=v("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...VH.classNamesArray),this.filterOnTypeDomNode.classList.add(...WH.classNamesArray),this.filterOnTypeDomNode.title=v("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=v("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=v("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?""+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Ta.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),mt(this.disposables)}}function zH(i){let e=_v.Unknown;return iW(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=_v.Twistie:iW(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=_v.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function ex(i,e){e(i),i.children.forEach(t=>ex(t,e))}class rT{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new H,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&Ul(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),h=c=>l.delete(c);t.forEach(c=>ex(c,h)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>ex(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>ex(l,o));const a=[];for(const l of this.nodes){const h=this.identityProvider.getId(l.element).toString();if(!n.has(h))a.push(l);else{const u=r.get(h);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class B5e extends nie{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(Hu(e.browserEvent.target)||jp(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let r=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),r&&s)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class V5e extends sh{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new B5e(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(ND([...super.getFocus(),...s])),r.length>0&&super.setSelection(ND([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class aie{constructor(e,t,n,s,r={}){this._options=r,this.eventBufferer=new w5,this.disposables=new ve,this._onWillRefilter=new H,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new H;const o=new sB(n),a=new QV,l=new QV,h=new O5e(l.event);this.renderers=s.map(d=>new j1(d,()=>this.model,a.event,h,r));for(let d of this.renderers)this.disposables.add(d);let c;r.keyboardNavigationLabelProvider&&(c=new P5e(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:c}),this.disposables.add(c)),this.focus=new rT(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new rT(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new rT(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new V5e(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},R5e(()=>this.model,r)),{tree:this})),this.model=this.createModel(e,this.view,r),a.input=this.model.onDidChangeCollapseState;const u=Re.forEach(this.model.onDidSplice,d=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(d),this.selection.onDidModelSplice(d)})});if(u(()=>null,null,this.disposables),l.input=Re.chain(Re.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const d=new Set;for(const f of this.focus.getNodes())d.add(f);for(const f of this.selection.getNodes())d.add(f);return[...d.values()]}).event,r.keyboardSupport!==!1){const d=Re.chain(this.view.onKeyDown).filter(f=>!Hu(f.target)).map(f=>new pi(f));d.filter(f=>f.keyCode===15).on(this.onLeftArrow,this,this.disposables),d.filter(f=>f.keyCode===17).on(this.onRightArrow,this,this.disposables),d.filter(f=>f.keyCode===10).on(this.onSpace,this,this.disposables)}if(r.keyboardNavigationLabelProvider){const d=r.keyboardNavigationDelegate||eie;this.typeFilterController=new F5e(this,this.model,this.view,c,d),this.focusNavigationFilter=f=>this.typeFilterController.shouldAllowFocus(f),this.disposables.add(this.typeFilterController)}this.styleElement=so(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===$1.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Re.map(this.view.onMouseDblClick,zH)}get onPointer(){return Re.map(this.view.onPointer,zH)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===$1.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)}focusNext(e=1,t=!1,n,s=this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){mt(this.disposables),this.view.dispose()}}class rB{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new I5e(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(s,r){return n.sorter.compare(s.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=bt.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=bt.empty(),n){const s=new Set,r=new Set,o=l=>{var h;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.add(u),this.nodesByIdentity.set(u,c)}(h=n.onDidCreateNode)===null||h===void 0||h.call(n,c)},a=l=>{var h;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(h=n.onDidDeleteNode)===null||h===void 0||h.call(n,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=bt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),bt.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,r=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Zr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Zr(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Zr(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Zr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function tx(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:bt.map(bt.from(i.children),tx),collapsible:i.collapsible,collapsed:i.collapsed}}function ix(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=bt.consume(bt.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:bt.map(bt.concat(s,n),ix),collapsible:i.collapsible,collapsed:i.collapsed}}function U3(i,e=0){let t;return e<i.element.elements.length-1?t=[U3(i,e+1)]:t=bt.map(bt.from(i.children),n=>U3(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function HH(i){return U3(i,0)}function lie(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:bt.map(bt.from(i.children),n=>lie(n,e,t))})}const W5e=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class z5e{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new rB(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=bt.empty(),n){const s=n.diffIdentityProvider&&W5e(n.diffIdentityProvider);if(e===null){const f=bt.map(t,this.enabled?ix:tx);this._setChildren(null,f,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),h=HH(o),c=lie(h,e,t),u=(this.enabled?ix:tx)(c),d=l.children.map(f=>f===o?u:f);this._setChildren(l.element,d,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=bt.map(n,HH),r=bt.map(s,e?ix:tx);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Zr(this.user,`Tree element not found: ${e}`);return t}}const H5e=i=>i[i.length-1];class oB{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new oB(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function U5e(i,e){return{splice(t,n,s){e.splice(t,n,s.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function $5e(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class j5e{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||H5e;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new iB(r=>new oB(s,r)),this.model=new z5e(e,U5e(this.nodeMapper,t),$5e(s,n))}get onDidSplice(){return Re.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Re.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Re.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=bt.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var q5e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class aB extends aie{constructor(e,t,n,s,r={}){super(e,t,n,s,r)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=bt.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new rB(e,t,n)}}class hie{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,s):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}q5e([rn],hie.prototype,"compressedTreeNodeProvider",null);function G5e(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class cie extends aB{constructor(e,t,n,s,r={}){const o=()=>this,a=s.map(l=>new hie(o,l));super(e,t,n,a,G5e(o,r))}setChildren(e,t=bt.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new j5e(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var Ec=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function oT(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function $3(i,e){return e.parent?e.parent===i?!0:$3(i,e.parent):!1}function K5e(i,e){return i===e||$3(i,e)||$3(e,i)}class lB{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new lB(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class Z5e{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Sk.classNamesArray),!0):(t.classList.remove(...Sk.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function UH(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function $H(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class Y5e extends _y{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function aT(i){return i instanceof _y?new Y5e(i):i}class Q5e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(aT(e),t)}onDragOver(e,t,n,s,r=!0){return this.dnd.onDragOver(aT(e),t&&t.element,n,s)}drop(e,t,n,s){this.dnd.drop(aT(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function uie(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new Q5e(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function j3(i,e){e(i),i.children.forEach(t=>j3(t,e))}class die{constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new H,this._onDidChangeNodeSlowState=new H,this.nodeMapper=new iB(a=>new lB(a)),this.disposables=new ve,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,s,o),this.root=oT({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Re.map(this.tree.onDidChangeFocus,UH)}get onDidChangeSelection(){return Re.map(this.tree.onDidChangeSelection,UH)}get onMouseDblClick(){return Re.map(this.tree.onMouseDblClick,$H)}get onPointer(){return Re.map(this.tree.onPointer,$H)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,s,r){const o=new sB(n),a=s.map(h=>new Z5e(h,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=uie(r)||{};return new aB(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return Ec(this,void 0,void 0,function*(){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,s,r){return Ec(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Zr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return Ec(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Zr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Re.toPromise(this._onDidRender.event)),s})}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Zr(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,s){return Ec(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,s)})}refreshNode(e,t,n){return Ec(this,void 0,void 0,function*(){let s;return this.subTreeRefreshPromises.forEach((r,o)=>{!s&&K5e(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return Ec(this,void 0,void 0,function*(){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=yield this.doRefreshNode(e,t,n);e.stale=!1,yield DR.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}})}doRefreshNode(e,t,n){return Ec(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(bt.empty());else{const r=a1(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),s=this.doGetChildren(e).finally(()=>r.cancel())}try{const r=yield s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),sd(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=Wr(()=>Ec(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(nt))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const c of e.children)if(o.set(c.element,c),this.identityProvider){const u=this.tree.isCollapsed(c);a.set(c.id,{node:c,collapsed:u})}const l=[],h=r.map(c=>{const u=!!this.dataSource.hasChildren(c);if(!this.identityProvider){const p=oT({element:c,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(p.collapsedByDefault=!1,l.push(p)),p}const d=this.identityProvider.getId(c).toString(),f=a.get(d);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(c,p),p.element=c,p.hasChildren=u,n?f.collapsed?(p.children.forEach(m=>j3(m,b=>this.nodes.delete(b.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(p.collapsedByDefault=!1,l.push(p)),p}const g=oT({element:c,parent:e,id:d,hasChildren:u});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(g),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const c of o.values())j3(c,u=>this.nodes.delete(u.element));for(const c of h)this.nodes.set(c.element,c);return e.children.splice(0,e.children.length,...h),e!==this.root&&this.autoExpandSingleChildren&&h.length===1&&l.length===0&&(h[0].collapsedByDefault=!1,l.push(h[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?bt.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class hB{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new hB(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class X5e{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Sk.classNamesArray),!0):(t.classList.remove(...Sk.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=mt(this.disposables)}}function J5e(i){const e=i&&uie(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class eFe extends die{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new iB(l=>new hB(l)),this.filter=a.filter}createTree(e,t,n,s,r){const o=new sB(n),a=s.map(h=>new X5e(h,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=J5e(r)||{};return new cie(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=d=>this.identityProvider.getId(d).toString(),s=d=>{const f=new Set;for(const g of d){const p=this.tree.getCompressedTreeNode(g===this.root?null:g);if(p.element)for(const m of p.element.elements)f.add(n(m.element))}return f},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const h=this.getFocus();let c=!1;const u=d=>{const f=d.element;if(f)for(let g=0;g<f.elements.length;g++){const p=n(f.elements[g].element),m=f.elements[f.elements.length-1].element;r.has(p)&&a.indexOf(m)===-1&&(a.push(m),l=!0),o.has(p)&&h.indexOf(m)===-1&&(h.push(m),c=!0)}d.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),c&&this.setFocus(h)}processChildren(e){return this.filter&&(e=bt.filter(e,t=>{const n=this.filter.filter(t,1),s=tFe(n);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function tFe(i){return typeof i=="boolean"?i?1:0:nB(i)?U1(i.visibility):U1(i)}class iFe extends aie{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,n){return new rB(e,t,n)}}new Ie("isWindows",qn,v("isWindows","Whether the operating system is Windows"));const nFe="inputFocus";var rh=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},at=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const fo=kt("listService");let q3=class{constructor(e){this._themeService=e,this.disposables=new ve,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const s=new sie(so(),"");this.disposables.add(eg(s,this._themeService))}if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),uu(e.onDidFocus(()=>this._lastFocusedWidget=e),xt(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};q3=rh([at(0,ci)],q3);const fie=new Ie("listFocus",!0),R2=new Ie("listSupportsMultiselect",!0),gie=Ae.and(fie,Ae.not(nFe)),cB=new Ie("listHasSelectionOrFocus",!1),uB=new Ie("listDoubleSelection",!1),dB=new Ie("listMultiSelection",!1),O2=new Ie("listSelectionNavigation",!1),pie="listAutomaticKeyboardNavigation";function P2(i,e){const t=i.createScoped(e.getHTMLElement());return fie.bindTo(t),t}const Pg="workbench.list.multiSelectModifier",G3="workbench.list.openMode",no="workbench.list.horizontalScrolling",xk="workbench.list.keyboardNavigation",fB="workbench.list.automaticKeyboardNavigation",q1="workbench.tree.indent",Dk="workbench.tree.renderIndentGuides",Ha="workbench.list.smoothScrolling",Ql="workbench.list.mouseWheelScrollSensitivity",Xl="workbench.list.fastScrollSensitivity",kk="workbench.tree.expandMode";function Jl(i){return i.getValue(Pg)==="alt"}class sFe extends ne{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Jl(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Pg)&&(this.useAltAsMultipleSelectionModifier=Jl(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:tie(e)}isSelectionRangeChangeEvent(e){return iie(e)}}function F2(i,e,t){var n;const s=new ve;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:!!e.getValue(Ha),mouseWheelScrollSensitivity:e.getValue(Ql),fastScrollSensitivity:e.getValue(Xl),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:s.add(new sFe(e))}),s]}let K3=class extends sh{constructor(e,t,n,s,r,o,a,l,h,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!h.getValue(no),[d,f]=F2(r,h,c);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},da(l.getColorTheme(),T2)),d),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=P2(o,this),this.themeService=l,this.listSupportsMultiSelect=R2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),O2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=cB.bindTo(this.contextKeyService),this.listDoubleSelection=uB.bindTo(this.contextKeyService),this.listMultiSelection=dB.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Jl(h),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||m.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||m.length>0)})),this.disposables.add(h.onDidChangeConfiguration(p=>{p.affectsConfiguration(Pg)&&(this._useAltAsMultipleSelectionModifier=Jl(h));let m={};if(p.affectsConfiguration(no)&&this.horizontalScrolling===void 0){const b=!!h.getValue(no);m=Object.assign(Object.assign({},m),{horizontalScrolling:b})}if(p.affectsConfiguration(Ha)){const b=!!h.getValue(Ha);m=Object.assign(Object.assign({},m),{smoothScrolling:b})}if(p.affectsConfiguration(Ql)){const b=h.getValue(Ql);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:b})}if(p.affectsConfiguration(Xl)){const b=h.getValue(Xl);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:b})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new mie(this,Object.assign({configurationService:h},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=eg(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};K3=rh([at(5,Xe),at(6,fo),at(7,ci),at(8,Ki),at(9,Zi)],K3);let jH=class extends x5e{constructor(e,t,n,s,r,o,a,l,h,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!h.getValue(no),[d,f]=F2(r,h,c);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},da(l.getColorTheme(),T2)),d),{horizontalScrolling:u})),this.disposables=new ve,this.disposables.add(f),this.contextKeyService=P2(o,this),this.themeService=l,this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=R2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),O2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Jl(h),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),r.overrideStyles&&this.disposables.add(eg(this,l,r.overrideStyles)),this.disposables.add(h.onDidChangeConfiguration(p=>{p.affectsConfiguration(Pg)&&(this._useAltAsMultipleSelectionModifier=Jl(h));let m={};if(p.affectsConfiguration(no)&&this.horizontalScrolling===void 0){const b=!!h.getValue(no);m=Object.assign(Object.assign({},m),{horizontalScrolling:b})}if(p.affectsConfiguration(Ha)){const b=!!h.getValue(Ha);m=Object.assign(Object.assign({},m),{smoothScrolling:b})}if(p.affectsConfiguration(Ql)){const b=h.getValue(Ql);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:b})}if(p.affectsConfiguration(Xl)){const b=h.getValue(Xl);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:b})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new mie(this,Object.assign({configurationService:h},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=eg(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};jH=rh([at(5,Xe),at(6,fo),at(7,ci),at(8,Ki),at(9,Zi)],jH);let qH=class extends M2{constructor(e,t,n,s,r,o,a,l,h,c,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(no),[f,g]=F2(o,c,u);super(e,t,n,s,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},da(h.getColorTheme(),T2)),f),{horizontalScrolling:d})),this.disposables=new ve,this.disposables.add(g),this.contextKeyService=P2(a,this),this.themeService=h,this.listSupportsMultiSelect=R2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),O2.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=cB.bindTo(this.contextKeyService),this.listDoubleSelection=uB.bindTo(this.contextKeyService),this.listMultiSelection=dB.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Jl(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||b.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||b.length>0)})),this.disposables.add(c.onDidChangeConfiguration(m=>{m.affectsConfiguration(Pg)&&(this._useAltAsMultipleSelectionModifier=Jl(c));let b={};if(m.affectsConfiguration(no)&&this.horizontalScrolling===void 0){const _=!!c.getValue(no);b=Object.assign(Object.assign({},b),{horizontalScrolling:_})}if(m.affectsConfiguration(Ha)){const _=!!c.getValue(Ha);b=Object.assign(Object.assign({},b),{smoothScrolling:_})}if(m.affectsConfiguration(Ql)){const _=c.getValue(Ql);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:_})}if(m.affectsConfiguration(Xl)){const _=c.getValue(Xl);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:_})}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new rFe(this,Object.assign({configurationService:c},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=eg(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};qH=rh([at(6,Xe),at(7,fo),at(8,ci),at(9,Ki),at(10,Zi)],qH);class gB extends ne{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new H),this.onDidOpen=this._onDidOpen.event,this._register(Re.filter(this.widget.onDidChangeSelection,s=>s.browserEvent instanceof KeyboardEvent)(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(G3))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(G3))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n,r=!1;this._open(this.getSelectedElement(),n,s,r,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class mie extends gB{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class rFe extends gB{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class oFe extends gB{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function aFe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const s=e.softDispatch(n,i);return s&&s.enterChord?(t=!0,!1):(t=!1,!0)}}let GH=class extends aB{constructor(e,t,n,s,r,o,a,l,h,c,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=vy(t,r,o,h,c,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new tg(this,r,f,r.overrideStyles,o,a,l,h,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};GH=rh([at(5,Xe),at(6,fo),at(7,ci),at(8,Ki),at(9,Zi),at(10,fr)],GH);let KH=class extends cie{constructor(e,t,n,s,r,o,a,l,h,c,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=vy(t,r,o,h,c,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new tg(this,r,f,r.overrideStyles,o,a,l,h,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};KH=rh([at(5,Xe),at(6,fo),at(7,ci),at(8,Ki),at(9,Zi),at(10,fr)],KH);let ZH=class extends iFe{constructor(e,t,n,s,r,o,a,l,h,c,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=vy(t,o,a,c,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new tg(this,o,g,o.overrideStyles,a,l,h,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};ZH=rh([at(6,Xe),at(7,fo),at(8,ci),at(9,Ki),at(10,Zi),at(11,fr)],ZH);let Z3=class extends die{constructor(e,t,n,s,r,o,a,l,h,c,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=vy(t,o,a,c,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new tg(this,o,g,o.overrideStyles,a,l,h,c,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Z3=rh([at(6,Xe),at(7,fo),at(8,ci),at(9,Ki),at(10,Zi),at(11,fr)],Z3);let YH=class extends eFe{constructor(e,t,n,s,r,o,a,l,h,c,u,d,f){const{options:g,getAutomaticKeyboardNavigation:p,disposable:m}=vy(t,a,l,u,d,f);super(e,t,n,s,r,o,g),this.disposables.add(m),this.internals=new tg(this,a,p,a.overrideStyles,l,h,c,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};YH=rh([at(7,Xe),at(8,fo),at(9,ci),at(10,Ki),at(11,Zi),at(12,fr)],YH);function vy(i,e,t,n,s,r){var o;const a=()=>{let g=!!t.getContextKeyValue(pie);return g&&(g=!!n.getValue(fB)),g},l=r.isScreenReaderOptimized(),h=e.simpleKeyboardNavigation||l?"simple":n.getValue(xk),c=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(no),[u,d]=F2(e,n,s),f=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof n.getValue(q1)=="number"?n.getValue(q1):void 0,renderIndentGuides:n.getValue(Dk),smoothScrolling:!!n.getValue(Ha),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:h==="simple",filterOnType:h==="filter",horizontalScrolling:c,keyboardNavigationEventFilter:aFe(i,s),additionalScrollHeight:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(kk)==="doubleClick"})}}let tg=class{constructor(e,t,n,s,r,o,a,l,h){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=P2(r,e),this.listSupportsMultiSelect=R2.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),O2.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=cB.bindTo(this.contextKeyService),this.hasDoubleSelection=uB.bindTo(this.contextKeyService),this.hasMultiSelection=dB.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Jl(l);const u=new Set;u.add(pie);const d=()=>{const g=h.isScreenReaderOptimized()?"simple":l.getValue(xk);e.updateOptions({simpleKeyboardNavigation:g==="simple",filterOnType:g==="filter"})};this.updateStyleOverrides(s),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0)}),l.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(Pg)&&(this._useAltAsMultipleSelectionModifier=Jl(l)),f.affectsConfiguration(q1)){const p=l.getValue(q1);g=Object.assign(Object.assign({},g),{indent:p})}if(f.affectsConfiguration(Dk)){const p=l.getValue(Dk);g=Object.assign(Object.assign({},g),{renderIndentGuides:p})}if(f.affectsConfiguration(Ha)){const p=!!l.getValue(Ha);g=Object.assign(Object.assign({},g),{smoothScrolling:p})}if(f.affectsConfiguration(xk)&&d(),f.affectsConfiguration(fB)&&(g=Object.assign(Object.assign({},g),{automaticKeyboardNavigation:n()})),f.affectsConfiguration(no)&&t.horizontalScrolling===void 0){const p=!!l.getValue(no);g=Object.assign(Object.assign({},g),{horizontalScrolling:p})}if(f.affectsConfiguration(kk)&&t.expandOnlyOnTwistieClick===void 0&&(g=Object.assign(Object.assign({},g),{expandOnlyOnTwistieClick:l.getValue(kk)==="doubleClick"})),f.affectsConfiguration(Ql)){const p=l.getValue(Ql);g=Object.assign(Object.assign({},g),{mouseWheelScrollSensitivity:p})}if(f.affectsConfiguration(Xl)){const p=l.getValue(Xl);g=Object.assign(Object.assign({},g),{fastScrollSensitivity:p})}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(u)&&e.updateOptions({automaticKeyboardNavigation:n()})}),h.onDidChangeScreenReaderOptimized(()=>d())),this.navigator=new oFe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){mt(this.styler),this.styler=e?eg(this.tree,this.themeService,e):ne.None}dispose(){this.disposables=mt(this.disposables),mt(this.styler),this.styler=void 0}};tg=rh([at(4,Xe),at(5,fo),at(6,ci),at(7,Ki),at(8,fr)],tg);const lFe=Pn.as(t_.Configuration);lFe.registerConfiguration({id:"workbench",order:7,title:v("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Pg]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[v("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:v({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[G3]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[no]:{type:"boolean",default:!1,description:v("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[q1]:{type:"number",default:8,minimum:0,maximum:40,description:v("tree indent setting","Controls tree indentation in pixels.")},[Dk]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:v("render tree indent guides","Controls whether the tree should render indent guides.")},[Ha]:{type:"boolean",default:!1,description:v("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Ql]:{type:"number",default:1,description:v("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Xl]:{type:"number",default:5,description:v("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[xk]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[v("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),v("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),v("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:v("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[fB]:{type:"boolean",default:!0,markdownDescription:v("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[kk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var gi;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(gi||(gi={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=v("sev.error","Error"),t[i.Warning]=v("sev.warning","Warning"),t[i.Info]=v("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function s(o){switch(o){case Ei.Error:return i.Error;case Ei.Warning:return i.Warning;case Ei.Info:return i.Info;case Ei.Ignore:return i.Hint}}i.fromSeverity=s;function r(o){switch(o){case i.Error:return Ei.Error;case i.Warning:return Ei.Warning;case i.Info:return Ei.Info;case i.Hint:return Ei.Ignore}}i.toSeverity=r})(gi||(gi={}));var Lk;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){let o=[e];return s.source?o.push(s.source.replace("","\\")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("","\\")):o.push(s.code.value.replace("","\\")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(gi.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("","\\")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("")}i.makeKeyOptionalMessage=n})(Lk||(Lk={}));const wy=kt("markerService");class hFe{constructor(){this._byResource=new fs,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new fs,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,s=!1,r=this._byResource.get(e);r&&(n=r.delete(t));let o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){var t,n,s,r;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:bt.empty():Ke.isUri(e)?(r=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&r!==void 0?r:bt.empty():bt.map(bt.concat(...this._byOwner.values()),o=>o[1])}}class cFe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new fs,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===dt.inMemory||e.scheme===dt.walkThrough||e.scheme===dt.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===gi.Error?t.errors+=1:n===gi.Warning?t.warnings+=1:n===gi.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Rd{constructor(){this._onMarkerChanged=new Ake({delay:0,merge:Rd._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new hFe,this._stats=new cFe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(FJ(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=Rd._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:h,endLineNumber:c,endColumn:u,relatedInformation:d,tags:f}=n;if(o)return l=l>0?l:1,h=h>0?h:1,c=c>=l?c:l,u=u>0?u:h,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:h,endLineNumber:c,endColumn:u,relatedInformation:d,tags:f}}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(Rd._accept(l,s)){const h=a.push(l);if(r>0&&h===r)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let l of a)if(Rd._accept(l,s)){const h=o.push(l);if(r>0&&h===r)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const h of l)if(Rd._accept(h,s)){const c=a.push(h);if(r>0&&c===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new fs;for(let n of e)for(let s of n)t.set(s,!0);return Array.from(t.keys())}}var nx=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})},Gp;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(Gp||(Gp={}));class G1 extends ne{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new H),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Gp.None,this.cache=new Map,this.flushDelayer=new lLe(G1.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((s,r)=>this.accept(r,s)),(n=e.deleted)===null||n===void 0||n.forEach(s=>this.accept(s,void 0))}accept(e,t){if(this.state===Gp.Closed)return;let n=!1;jr(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return jr(n)?t:n}getBoolean(e,t){const n=this.get(e);return jr(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return jr(n)?t:parseInt(n,10)}set(e,t){return nx(this,void 0,void 0,function*(){if(this.state===Gp.Closed)return;if(jr(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return nx(this,void 0,void 0,function*(){if(!(this.state===Gp.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return nx(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}}G1.DEFAULT_FLUSH_DELAY=100;class QH{constructor(){this.onDidChangeItemsExternal=Re.None,this.items=new Map}updateItems(e){return nx(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const TC="__$__targetStorageMarker",Fg=kt("storageService");var Y3;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(Y3||(Y3={}));class B2 extends ne{constructor(e={flushInterval:B2.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new uD),this._onDidChangeTarget=this._register(new uD),this._onWillSaveState=this._register(new H),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===TC?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,n)}getBoolean(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,n)}getNumber(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,n)}store(e,t,n,s){if(jr(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,s),(r=this.getStorage(n))===null||r===void 0||r.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var s,r;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(s=this.getStorage(t))===null||s===void 0||s.set(TC,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(r=this.getStorage(t))===null||r===void 0||r.set(TC,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(TC,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}B2.DEFAULT_FLUSH_INTERVAL=60*1e3;class uFe extends B2{constructor(){super(),this.globalStorage=this._register(new G1(new QH)),this.workspaceStorage=this._register(new G1(new QH)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var _ie=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sx=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Q3=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new X3(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};Q3=_ie([sx(0,An)],Q3);let X3=class Lp{constructor(e,t,n,s,r){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=s,this._menuService=r,this._disposables=new ve,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new yi(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(Aa.onDidChangeMenu(h=>{h.has(e)&&o.schedule()}));const a=this._disposables.add(new ve),l=()=>{const h=new yi(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(h),a.add(s.onDidChangeContext(c=>{c.affectsSome(this._contextKeys)&&h.schedule()}))};this._onDidChange=new H({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Aa.getMenuItems(this._id);let t;e.sort(Lp._compareMenuItems);for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(Lp._fillInKbExprKeys(e.when,this._contextKeys),fb(e)){if(e.command.precondition&&Lp._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Lp._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Aa.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[s,r]=n,o=[];for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=fb(a)?new Fu(a.command,a.alt,e,this._contextKeyService,this._commandService):new cee(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([s,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;let a=n.localeCompare(s);if(a!==0)return a}let r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:Lp._compareTitles(fb(e)?e.command.title:e.title,fb(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};X3=_ie([sx(2,An),sx(3,Xe),sx(4,n_)],X3);var dFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class fFe extends ne{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(xt(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const s=this.model.deltaDecorations(n,t);for(let r=0;r<s.length;r++)this._markersData.set(s[r],e[r]);return n.length!==0||s.length!==0}getMarker(e){return this._markersData.get(e.id)}}let J3=class extends ne{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new H),this._markerDecorations=new fs,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new fFe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===dt.inMemory||e.uri.scheme===dt.internal||e.uri.scheme===dt.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(s=>({range:this._createDecorationRange(e.model,s),options:this._createDecorationOption(s)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=V.lift(t);return t.severity===gi.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case gi.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case gi.Warning:t="squiggly-warning",n=Sr(qMe),s=20,o={color:Sr(vMe),position:Wl.Inline};break;case gi.Info:t="squiggly-info",n=Sr(GMe),s=10;break;case gi.Error:default:t="squiggly-error",n=Sr(jMe),s=30,o={color:Sr(bMe),position:Wl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Gl.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};J3=dFe([XH(0,qs),XH(1,wy)],J3);var gFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let e4=class extends ne{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new H,this._accessibilityModeEnabledContext=k4e.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};e4=gFe([JH(0,Xe),JH(1,Ki)],e4);var NC=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class pFe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return NC(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(r){console.error(r)}const n=document.activeElement,s=document.body.appendChild(_e("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(s)})}readText(e){return NC(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return NC(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return NC(this,void 0,void 0,function*(){this.findText=e})}}var mFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},MC=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function RC(i){return i.scheme===dt.file?i.fsPath:i.path}let bie=0;class OC{constructor(e,t,n,s,r,o,a){this.id=++bie,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class tU{constructor(e,t){this.resourceLabel=e,this.reason=t}}class iU{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);let n=[];return e.length>0&&n.push(v({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(v({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class _Fe{constructor(e,t,n,s,r,o,a){this.id=++bie,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new iU),this.removedResources.has(t)||this.removedResources.set(t,new tU(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new iU),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new tU(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class vie{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new Aee(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const h=this._past[a];n&&(s>=t||h.id!==e.elements[s])&&(n=!1,r=0),!n&&h.type===1&&h.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class lT{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const wie=new vie("","");wie.locked=!0;let Ek=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=l0.None,n=Ll.None){if(e.type===0){const s=RC(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new OC(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=RC(a),h=this.getUriComparisonKey(a);s.has(h)||(s.add(h),r.push(l),o.push(h))}r.length===1?this._pushElement(new OC(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new _Fe(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new vie(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=RC(r.resource),a=this.getUriComparisonKey(r.resource),l=new OC(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=RC(r.resource),a=this.getUriComparisonKey(r.resource),l=new OC(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new Aee(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof Ll){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){nt(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}_invokeWorkspacePrepare(e){return MC(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return ne.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ne.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ne.None);const n=e.actual.prepareUndoRedo();return n?xX(n)?t(n):n.then(s=>t(s)):t(ne.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||wie);return new lT(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new PC(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new PC}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,s){return MC(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ei.Info,v("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[v({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),v("nok","Undo this File"),v("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;s=!0}let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=v({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new lT([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Ll){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}_confirmAndContinueUndo(e,t,n){return MC(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ei.Info,v("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[v("confirmDifferentSource.yes","Yes"),v("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof Ll){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new PC(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new PC}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return MC(this,void 0,void 0,function*(){let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=v({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new lT([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ll){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};Ek=mFe([eU(0,Xte),eU(1,Yn)],Ek);class PC{constructor(e){this.returnValue=e}}Dg(dy,Ek);const bFe=new RegExp(`(\\\\)?\\$\\((${sr.iconNameExpression}(?:${sr.iconModifierExpression})?)\\)`,"g");function Lm(i){const e=new Array;let t,n=0,s=0;for(;(t=bFe.exec(i))!==null;){s=t.index||0,e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:vFe({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function vFe(i){const e=_e("span");return e.classList.add(...sr.asClassNameArray(i)),e}const wFe={buttonBackground:Q.fromHex("#0E639C"),buttonHoverBackground:Q.fromHex("#006BB3"),buttonForeground:Q.white};class nU extends ne{constructor(e,t){super(),this._onDidClick=this._register(new H),this.options=t||Object.create(null),Qa(this.options,wFe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Mt.addTarget(this._element)),[Oe.CLICK,Yt.Tap].forEach(n=>{this._register(oe(this._element,n,s=>{if(!this.enabled){Ot.stop(s);return}this._onDidClick.fire(s)}))}),this._register(oe(this._element,Oe.KEY_DOWN,n=>{const s=new pi(n);let r=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(n),r=!0):s.equals(9)&&(this._element.blur(),r=!0),r&&Ot.stop(s,!0)})),this._register(oe(this._element,Oe.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(oe(this._element,Oe.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Xm(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?ay(this._element,...Lm(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const yFe={badgeBackground:Q.fromHex("#4D4D4D"),badgeForeground:Q.fromHex("#FFFFFF")};class t4{constructor(e,t){this.count=0,this.options=t||Object.create(null),Qa(this.options,yFe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=ae(e,_e(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Lo(this.countFormat,this.count),this.element.title=Lo(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const sU="done",rU="active",hT="infinite",oU="discrete",CFe={progressBarBackground:Q.fromHex("#0E70C0")};class SFe extends ne{constructor(e,t){super(),this.options=t||Object.create(null),Qa(this.options,CFe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new yi(()=>Cr(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(rU,hT,oU),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(sU),this.element.classList.contains(hT)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(oU,sU),this.element.classList.add(rU,hT),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class pB{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const yie=new pB("id#");const cT={},xFe=new pB("quick-input-button-icon-");function i4(i){if(!i)return;let e;const t=i.dark.toString();return cT[t]?e=cT[t]:(e=xFe.nextId(),LR(`.${e}`,`background-image: ${cc(i.light||i.dark)}`),LR(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${cc(i.dark)}`),cT[t]=e),e}const DFe={ctrlCmd:!1,alt:!1};var K1;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(K1||(K1={}));var ca;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(ca||(ca={}));function kFe(i,e={}){const t=mB(e);return t.textContent=i,t}function LFe(i,e={}){const t=mB(e);return Cie(t,AFe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function mB(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class EFe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Cie(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");r.href="#",t.disposables.add(cn(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{Cie(s,r,t,n)})}function AFe(i,e){const t={type:1,children:[]};let n=0,s=t;const r=[],o=new EFe(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&n4(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&IFe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const h=n4(a,e);if(s.type===h||s.type===5&&h===6)s=r.pop();else{const c={type:h,children:[]};h===5&&(c.index=n,n++),s.children.push(c),r.push(s),s=c}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const h={type:2,content:a};s.children.push(h),r.push(s),s=h}else s.content+=a}return s.type===2&&(s=r.pop()),t}function IFe(i,e){return n4(i,e)!==0}function n4(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class TFe{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class NFe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new TFe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const j_=_e,MFe={inputBackground:Q.fromHex("#3C3C3C"),inputForeground:Q.fromHex("#CCCCCC"),inputValidationInfoBorder:Q.fromHex("#55AAFF"),inputValidationInfoBackground:Q.fromHex("#063B49"),inputValidationWarningBorder:Q.fromHex("#B89500"),inputValidationWarningBackground:Q.fromHex("#352A05"),inputValidationErrorBorder:Q.fromHex("#BE1100"),inputValidationErrorBackground:Q.fromHex("#5A1D1D")};class Sie extends uo{constructor(e,t,n){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new H),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new H),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Qa(this.options,MFe,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ae(e,j_(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",o=ae(this.element,j_(".ibwrapper"));if(this.input=ae(o,j_(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ae(o,j_("div.mirror")),this.mirror.innerText="",this.scrollableElement=new NF(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ae(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(h=>this.input.scrollTop=h.scrollTop));const a=this._register(new $t(document,"selectionchange")),l=Re.filter(a.event,()=>{const h=document.getSelection();return(h==null?void 0:h.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new dc(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:kR(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return So(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=So(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=ae(s,j_(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?LFe(this.message.content,r):kFe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",ae(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=v("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=v("alertWarningMessage","Warning: {0}",this.message.content):n=v("alertInfoMessage","Info: {0}",this.message.content),Eg(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=kR(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class xie extends Sie{constructor(e,t,n){const s=v({key:"history.inputbox.hint",comment:["Text will be prefixed with  plus a single space, then used as a hint where input field keeps history"]},"for history"),r=` or  ${s}`,o=` ( ${s})`;super(e,t,n),this.history=new NFe(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?r:o,h=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=h:this.setPlaceHolder(h)}};this.observer=new MutationObserver((l,h)=>{l.forEach(c=>{c.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=h=>{if(this.placeholder.endsWith(h)){const c=this.placeholder.slice(0,this.placeholder.length-h.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};l(o)||l(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,HD(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,HD(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const RFe=_e;class OFe extends ne{constructor(e){super(),this.parent=e,this.onKeyDown=t=>oe(this.inputBox.inputElement,Oe.KEY_DOWN,n=>{t(new pi(n))}),this.onMouseDown=t=>oe(this.inputBox.inputElement,Oe.MOUSE_DOWN,n=>{t(new Jr(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=ae(this.parent,RFe(".quick-input-box")),this.inputBox=this._register(new Sie(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ei.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ei.Info?1:e===Ei.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ei.Info?1:e===Ei.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Uu{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=Uu.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&ka(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(_e("span",void 0,...this.supportIcons?Lm(o):[o])),t=n.end}const s=this.text.substring(n.start,n.end),r=_e("span.highlight",void 0,...this.supportIcons?Lm(s):[s]);n.extraClasses&&r.classList.add(n.extraClasses),e.push(r),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(_e("span",void 0,...this.supportIcons?Lm(n):[n]))}ay(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,""})}}class _0{constructor(e="",t=!1){var n,s,r;if(this.value=e,typeof this.value!="string")throw Bl("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(r=t.supportHtml)!==null&&r!==void 0?r:!1)}appendText(e,t=0){return this.value+=PFe(this.supportThemeIcons?BPe(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function bv(i){return Die(i)?!i.value:Array.isArray(i)?i.every(bv):!0}function Die(i){return i instanceof _0?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function PFe(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function uT(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function FFe(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),h=isFinite(parseInt(o));l&&e.push(`width="${a}"`),h&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}var s4=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function BFe(i,e){Va(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class VFe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return s4(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Va(e)||e instanceof HTMLElement)s=e;else if(!qb(e.markdown))s=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(v("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Ya;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),this.isDisposed||r.isCancellationRequested)return}this.show(s,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n==null||n.dispose()}hasContent(e){return e?Die(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function WFe(i,e,t){let n,s;const r=(c,u)=>{var d;c&&(s==null||s.dispose(),s=void 0),u&&(n==null||n.dispose(),n=void 0),(d=i.onDidHideHover)===null||d===void 0||d.call(i)},o=(c,u,d)=>new js(()=>s4(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new VFe(i,d||e,c>0),yield s.update(t,u))}),c),a=()=>{if(n)return;const c=new ve,u=g=>r(!1,g.fromElement===e);c.add(oe(e,Oe.MOUSE_LEAVE,u,!0));const d=()=>r(!0,!0);c.add(oe(e,Oe.MOUSE_DOWN,d,!0));const f={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const g=p=>f.x=p.x+10;c.add(oe(e,Oe.MOUSE_MOVE,g,!0))}c.add(o(i.delay,!1,f)),n=c},l=oe(e,Oe.MOUSE_OVER,a,!0);return{show:c=>{r(!1,!0),o(0,c)},hide:()=>{r(!0,!0)},update:c=>s4(this,void 0,void 0,function*(){t=c,yield s==null?void 0:s.update(t)}),dispose:()=>{l.dispose(),r(!0,!0)}}}class dT{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class _B extends ne{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new dT(ae(e,_e(".monaco-icon-label")))),this.labelContainer=ae(this.domNode.element,_e(".monaco-icon-label-container"));const n=ae(this.labelContainer,_e("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new dT(ae(this.labelContainer,_e("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new UFe(n,!!t.supportIcons):this.nameNode=new zFe(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Uu(ae(this.descriptionContainer.element,_e("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new dT(ae(this.descriptionContainer.element,_e("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"];n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough")),this.domNode.className=s.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Uu?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)BFe(e,t);else{const s=WFe(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class zFe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ka(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ae(this.container,_e("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;ae(this.container,_e("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&ae(this.container,_e("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function HFe(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>Wn.intersect(r,a)).filter(a=>!Wn.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class UFe{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ka(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Uu(ae(this.container,_e("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",s=HFe(e,n,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,h=_e("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new Uu(ae(this.container,h),this.supportIcons).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&ae(h,_e("span.label-separator",void 0,n))}}}}const FC=_e;class bB{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=ae(e,FC(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&bB.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(ae(this.domNode,FC("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){jn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const s=oF.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(n!=null&&n.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(n!=null&&n.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(n!=null&&n.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(n!=null&&n.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,s){ae(e,this.createKeyElement(t,n?".highlight":"")),s&&ae(e,FC("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){ae(e,this.createKeyElement(v("unbound","Unbound")))}createKeyElement(e,t=""){const n=FC("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&ka(e.firstPart,t.firstPart)&&ka(e.chordPart,t.chordPart)}}const aU=new Ub(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function $Fe(i,e,t=!1){const n=i||"",s=e||"",r=aU.value.collator.compare(n,s);return aU.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function jFe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=qFe(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=$Fe(n,s);return l!==0?l:n.localeCompare(s)}function qFe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}var kie=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},GFe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const gl=_e;class KFe{constructor(e){this.hidden=!1,this._onChecked=new H,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class yy{get templateId(){return yy.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=ae(e,gl(".quick-input-list-entry"));const n=ae(t.entry,gl("label.quick-input-list-label"));t.toDisposeTemplate.push(cn(n,Oe.CLICK,h=>{t.checkbox.offsetParent||h.preventDefault()})),t.checkbox=ae(n,gl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(cn(t.checkbox,Oe.CHANGE,h=>{t.element.checked=t.checkbox.checked}));const s=ae(n,gl(".quick-input-list-rows")),r=ae(s,gl(".quick-input-list-row")),o=ae(s,gl(".quick-input-list-row"));t.label=new _B(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=ae(r,gl(".quick-input-list-entry-keybinding"));t.keybinding=new bB(a,Ao);const l=ae(o,gl(".quick-input-list-label-meta"));return t.detail=new Uu(l,!0),t.separator=ae(t.entry,gl(".quick-input-list-separator")),t.actionBar=new dc(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=mt(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(h=>n.checkbox.checked=h));const{labelHighlights:s,descriptionHighlights:r,detailHighlights:o}=e,a=Object.create(null);a.matches=s||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=r||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),n.detail.set(e.saneDetail,o),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((h,c)=>{let u=h.iconClass||(h.iconPath?i4(h.iconPath):void 0);h.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const d=new Go(`id-${c}`,"",u,!0,()=>GFe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:h,item:e.item})}));return d.tooltip=h.tooltip||"",d}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=mt(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=mt(e.toDisposeElement),e.toDisposeTemplate=mt(e.toDisposeTemplate)}}yy.ID="listelement";class ZFe{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return yy.ID}}var Mi;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(Mi||(Mi={}));class vB{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new H,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new H,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new H,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new H,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new H,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new H,this.onKeyDown=this._onKeyDown.event,this._onLeave=new H,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=ae(this.parent,gl(".quick-input-list"));const s=new ZFe,r=new QFe;this.list=n.createList("QuickInput",this.container,s,[new yy],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new pi(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(vt?o.metaKey:o.ctrlKey)&&this.list.setFocus(ds(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const h=this.list.getFocus();h.length===1&&h[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(oe(this.container,Oe.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Re.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Re.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=mt(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,s,r)=>{var o,a,l;if(s.type!=="separator"){const h=r&&e[r-1],c=s.label&&s.label.replace(/\r?\n/g," "),u=s.meta&&s.meta.replace(/\r?\n/g," "),d=s.description&&s.description.replace(/\r?\n/g," "),f=s.detail&&s.detail.replace(/\r?\n/g," "),g=s.ariaLabel||[c,d,f].map(p=>U2e(p)).filter(p=>!!p).join(", ");n.push(new KFe({index:r,item:s,saneLabel:c,saneMeta:u,saneAriaLabel:g,saneDescription:d,saneDetail:f,labelHighlights:(o=s.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=s.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=s.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:h&&h.type==="separator"?h:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===Mi.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=Mi.First),e===Mi.Previous&&this.list.getFocus()[0]===0&&(e=Mi.Last),e===Mi.Second&&this.list.length<2&&(e=Mi.First),e){case Mi.First:this.list.focusFirst();break;case Mi.Second:this.list.focusNth(1);break;case Mi.Last:this.list.focusLast();break;case Mi.Next:this.list.focusNext();break;case Mi.Previous:this.list.focusPrevious();break;case Mi.NextPage:this.list.focusNextPage();break;case Mi.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this.inputElements[n.index-1];n.separator=s&&s.type==="separator"?s:void 0});else{let n;this.elements.forEach(s=>{const r=this.matchOnLabel?Qd(IC(e,AC(s.saneLabel))):void 0,o=this.matchOnDescription?Qd(IC(e,AC(s.saneDescription||""))):void 0,a=this.matchOnDetail?Qd(IC(e,AC(s.saneDetail||""))):void 0,l=this.matchOnMeta?Qd(IC(e,AC(s.saneMeta||""))):void 0;if(r||o||a||l?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const h=s.index&&this.inputElements[s.index-1];n=h&&h.type==="separator"?h:n,n&&!s.hidden&&(s.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((s,r)=>YFe(s,r,n))}return this.elementsToIndexes=t.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=mt(this.elementDisposables),this.disposables=mt(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}kie([rn],vB.prototype,"onDidChangeFocus",null);kie([rn],vB.prototype,"onDidChangeSelection",null);function YFe(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:jFe(i.saneLabel,e.saneLabel,t)}class QFe{getWidgetAriaLabel(){return v("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var lU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const pr=_e,XFe=ia("quick-input-back",De.arrowLeft),r4={iconClass:XFe.classNames,tooltip:v("quickInput.back","Back"),handle:-1};class V2 extends ne{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=V2.noPromptMessage,this._severity=Ei.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new H),this.onDidHideEmitter=this._register(new H),this.onDisposeEmitter=this._register(new H),this.visibleDisposables=this._register(new ve),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Nu;this._ignoreFocusOut=e&&!Nu,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=K1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new js,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this.buttons.filter(o=>o===r4);this.ui.leftActionBar.push(s.map((o,a)=>{const l=new Go(`id-${a}`,"",o.iconClass||i4(o.iconPath),!0,()=>lU(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this.buttons.filter(o=>o!==r4);this.ui.rightActionBar.push(r.map((o,a)=>{const l=new Go(`id-${a}`,"",o.iconClass||i4(o.iconPath),!0,()=>lU(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,ay(this.ui.message,...Lm(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?v("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ei.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}V2.noPromptMessage=v("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class Z1 extends V2{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new H),this.onWillAcceptEmitter=this._register(new H),this.onDidAcceptEmitter=this._register(new H),this.onDidCustomEmitter=this._register(new H),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?ca.NONE:ca.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new H),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new H),this.onDidTriggerItemButtonEmitter=this._register(new H),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?DFe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(Mi.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(Mi.Next),this.canSelectMany&&this.ui.list.domFocus(),Ot.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(Mi.Previous):this.ui.list.focus(Mi.Last),this.canSelectMany&&this.ui.list.domFocus(),Ot.stop(e,!0);break;case 12:this.ui.list.focus(Mi.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ot.stop(e,!0);break;case 11:this.ui.list.focus(Mi.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ot.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Mi.First),Ot.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(Mi.Last),Ot.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Ul(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Ul(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Ul(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return oe(this.ui.container,Oe.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new pi(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const s=this.ariaLabel||this.placeholder||Z1.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case ca.NONE:this._itemActivation=ca.FIRST;break;case ca.SECOND:this.ui.list.focus(Mi.Second),this._itemActivation=ca.FIRST;break;case ca.LAST:this.ui.list.focus(Mi.Last),this._itemActivation=ca.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Mi.First)),this.keepScrollPosition&&(this.scrollTop=e)}}Z1.DEFAULT_ARIA_LABEL=v("quickInputBox.ariaLabel","Type to narrow down results.");class W2 extends ne{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new H),this.onDidCustomEmitter=this._register(new H),this.onDidTriggerButtonEmitter=this._register(new H),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new H),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new H),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(oe(window,Oe.KEY_DOWN,e,!0)),this._register(oe(window,Oe.KEY_UP,e,!0)),this._register(oe(window,Oe.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=ae(this.parentElement,pr(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=so(e),n=ae(e,pr(".quick-input-titlebar")),s=this._register(new dc(n));s.domNode.classList.add("quick-input-left-action-bar");const r=ae(n,pr(".quick-input-title")),o=this._register(new dc(n));o.domNode.classList.add("quick-input-right-action-bar");const a=ae(e,pr(".quick-input-description")),l=ae(e,pr(".quick-input-header")),h=ae(l,pr("input.quick-input-check-all"));h.type="checkbox",this._register(cn(h,Oe.CHANGE,T=>{const M=h.checked;S.setAllVisibleChecked(M)})),this._register(oe(h,Oe.CLICK,T=>{(T.x||T.y)&&f.setFocus()}));const c=ae(l,pr(".quick-input-description")),u=ae(l,pr(".quick-input-and-message")),d=ae(u,pr(".quick-input-filter")),f=this._register(new OFe(d));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=ae(d,pr(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new t4(g,{countFormat:v({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),m=ae(d,pr(".quick-input-count"));m.setAttribute("aria-live","polite");const b=new t4(m,{countFormat:v({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),_=ae(l,pr(".quick-input-action")),w=new nU(_);w.label=v("ok","OK"),this._register(w.onDidClick(T=>{this.onDidAcceptEmitter.fire()}));const y=ae(l,pr(".quick-input-action")),x=new nU(y);x.label=v("custom","Custom"),this._register(x.onDidClick(T=>{this.onDidCustomEmitter.fire()}));const L=ae(u,pr(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new vB(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(T=>{h.checked=T})),this._register(S.onChangedVisibleCount(T=>{p.setCount(T)})),this._register(S.onChangedCheckedCount(T=>{b.setCount(T)})),this._register(S.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof Z1&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const k=new SFe(e);k.getContainer().classList.add("quick-input-progress");const D=Xm(e);return this._register(D),this._register(oe(e,Oe.FOCUS,T=>{this.previousFocusElement=T.relatedTarget instanceof HTMLElement?T.relatedTarget:void 0},!0)),this._register(D.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(K1.Blur),this.previousFocusElement=void 0})),this._register(oe(e,Oe.FOCUS,T=>{f.setFocus()})),this._register(oe(e,Oe.KEY_DOWN,T=>{const M=new pi(T);switch(M.keyCode){case 3:Ot.stop(T,!0),this.onDidAcceptEmitter.fire();break;case 9:Ot.stop(T,!0),this.hide(K1.Gesture);break;case 2:if(!M.altKey&&!M.ctrlKey&&!M.metaKey){const j=[".action-label.codicon"];e.classList.contains("show-checkboxes")?j.push("input"):j.push("input[type=text]"),this.getUI().list.isDisplayed()&&j.push(".monaco-list");const $=e.querySelectorAll(j.join(", "));M.shiftKey&&M.target===$[0]?(Ot.stop(T,!0),$[$.length-1].focus()):!M.shiftKey&&M.target===$[$.length-1]&&(Ot.stop(T,!0),$[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:n,title:r,description1:a,description2:c,rightActionBar:o,checkAll:h,filterContainer:d,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:m,count:b,okContainer:_,ok:w,message:L,customButtonContainer:y,customButton:x,list:S,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:T=>this.show(T),hide:()=>this.hide(),setVisibilities:T=>this.setVisibilities(T),setComboboxAccessibility:T=>this.setComboboxAccessibility(T),setEnabled:T=>this.setEnabled(T),setContextKey:T=>this.options.setContextKey(T)},this.updateStyles(),this.ui}pick(e,t={},n=ri.None){return new Promise((s,r)=>{let o=c=>{o=s,t.onKeyMods&&t.onKeyMods(a.keyMods),s(c)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const h=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const c=a.activeItems[0];c&&(o(c),a.hide())}}),a.onDidChangeActive(c=>{const u=c[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(c=>{if(!a.canSelectMany){const u=c[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(c=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},c),{removeItem:()=>{const u=a.items.indexOf(c.item);if(u!==-1){const d=a.items.slice(),f=d.splice(u,1),g=a.activeItems.filter(m=>m!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,g&&(a.activeItems=g),a.keepScrollPosition=p}}}))),a.onDidChangeValue(c=>{l&&!c&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{mt(h),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([c,u])=>{l=u,a.busy=!1,a.items=c,a.canSelectMany&&(a.selectedItems=c.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,c=>{r(c),a.hide()})})}createQuickPick(){const e=this.getUI();return new Z1(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ei.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),ay(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const s=this.options.backKeybindingLabel();r4.tooltip=s?v("quickInput.backWithKeybinding","Back ({0})",s):v("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const s=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",s||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,W2.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}W2.MAX_WIDTH=600;var o4;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(o4||(o4={}));const Lie={Quickaccess:"workbench.contributions.quickaccess"};class JFe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),xt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return e2([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}Pn.add(Lie.Quickaccess,new JFe);const Eie=kt("quickInputService");var eBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let a4=class extends ne{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Pn.as(Lie.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var s;const[r,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let g;if(a&&l&&l!==o){const p=a.value.substr(l.prefix.length);p&&(g=`${o.prefix}${p}`)}if(!g){const p=r==null?void 0:r.defaultFilterValue;p===o4.LAST?g=this.lastAcceptedPickerValues.get(o):typeof p=="string"&&(g=`${o.prefix}${p}`)}typeof g=="string"&&(e=g)}const h=new ve,c=h.add(this.quickInputService.createQuickPick());c.value=e,this.adjustValueSelection(c,o,n),c.placeholder=o==null?void 0:o.placeholder,c.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(c.itemActivation=(s=n==null?void 0:n.itemActivation)!==null&&s!==void 0?s:ca.SECOND),c.contextKey=o==null?void 0:o.contextKey,c.filterValue=g=>g.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(c.ariaLabel=o==null?void 0:o.placeholder);let u,d;t&&(u=new Promise(g=>d=g),h.add(zf(c.onWillAccept)(g=>{g.veto(),c.hide()}))),h.add(this.registerPickerListeners(c,r,o,e));const f=h.add(new Ya);if(r&&h.add(r.provide(c,f.token)),zf(c.onDidHide)(()=>{c.selectedItems.length===0&&f.cancel(),h.dispose(),d==null||d(c.selectedItems)}),c.show(),t)return u}adjustValueSelection(e,t,n){var s;let r;n!=null&&n.preserveValue?r=[e.value.length,e.value.length]:r=[(s=t==null?void 0:t.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,n,s){const r=new ve,o=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return r.add(xt(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};a4=eBe([hU(0,Eie),hU(1,qt)],a4);var tBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},q_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let l4=class extends xIe{constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=s,this.layoutService=r,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(a4))),this._quickAccess}createController(e=this.layoutService,t){var n,s;const r={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,h,c,u)=>this.instantiationService.createInstance(K3,a,l,h,c,u),styles:this.computeStyles()},o=this._register(new W2(Object.assign(Object.assign({},r),t)));return o.layout(e.dimension,(s=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&s!==void 0?s:0),this._register(e.onDidLayout(a=>{var l,h;return o.layout(a,(h=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&h!==void 0?h:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Ie(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=ri.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},da(this.theme,{quickInputBackground:Ez,quickInputForeground:_Ne,quickInputTitleBackground:bNe,contrastBorder:Gi,widgetShadow:h0})),inputBox:da(this.theme,{inputForeground:Oee,inputBackground:Ree,inputBorder:Pee,inputValidationInfoBackground:SF,inputValidationInfoForeground:xF,inputValidationInfoBorder:DF,inputValidationWarningBackground:Fee,inputValidationWarningForeground:Bee,inputValidationWarningBorder:Vee,inputValidationErrorBackground:Wee,inputValidationErrorForeground:zee,inputValidationErrorBorder:Hee}),countBadge:da(this.theme,{badgeBackground:rv,badgeForeground:ov,badgeBorder:Gi}),button:da(this.theme,{buttonForeground:lNe,buttonBackground:f3,buttonHoverBackground:hNe,buttonBorder:Gi}),progressBar:da(this.theme,{progressBarBackground:cNe}),keybindingLabel:da(this.theme,{keybindingLabelBackground:yNe,keybindingLabelForeground:CNe,keybindingLabelBorder:SNe,keybindingLabelBottomBorder:xNe,keybindingLabelShadow:h0}),list:da(this.theme,{listBackground:Ez,listInactiveFocusForeground:qS,listInactiveSelectionIconForeground:GS,listInactiveFocusBackground:KS,listFocusOutline:Hs,listInactiveFocusOutline:Hs,pickerGroupBorder:wNe,pickerGroupForeground:vNe})}}};l4=tBe([q_(0,qt),q_(1,Xe),q_(2,ci),q_(3,fr),q_(4,N2)],l4);var Aie=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Od=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let h4=class extends l4{constructor(e,t,n,s,r,o){super(t,n,s,r,o),this.host=void 0;const a=b0.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};h4=Aie([Od(1,qt),Od(2,Xe),Od(3,ci),Od(4,fr),Od(5,N2)],h4);let c4=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(h4,e);this.mapEditorToService.set(e,t),zf(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=ri.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};c4=Aie([Od(0,qt),Od(1,li)],c4);class b0{constructor(e){this.editor=e,this.widget=new z2(this.editor)}static get(e){return e.getContribution(b0.ID)}dispose(){this.widget.dispose()}}b0.ID="editor.controller.quickInput";class z2{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return z2.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}z2.ID="editor.contrib.quickInputWidget";Ks(b0.ID,b0);var Tt;(function(i){const e=new P1;class t{constructor(l,h){this._serviceId=l,this._factory=h,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function s(a,l){let h=new t(a,l);return n.push(h),h}function r(a){let l=new P1;for(const[c,u]of PEe())l.set(c,u);for(let c in a)a.hasOwnProperty(c)&&l.set(kt(c),a[c]);n.forEach(c=>l.set(c.id,c.get(a)));let h=new wk(l,!0);return l.set(qt,h),[l,h]}i.init=r,i.instantiationService=s(qt,()=>new wk(e,!0));const o=new aee;i.configurationService=s(Ki,()=>o),i.resourceConfigurationService=s(RJ,()=>new _Ie(o)),i.resourcePropertiesService=s(OJ,()=>new s3(o)),i.contextService=s(iee,()=>new f2),i.labelService=s(my,()=>new wIe),i.telemetryService=s(s_,()=>new bIe),i.dialogService=s(Xte,()=>new pIe),i.notificationService=s(Yn,()=>new d2),i.markerService=s(wy,()=>new Rd),i.modeService=s(Gs,a=>new W1),i.standaloneThemeService=s(py,()=>new uPe),i.logService=s(_c,()=>new lAe(new aAe)),i.undoRedoService=s(dy,a=>new Ek(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=s(hy,a=>new AD(i.configurationService.get(a),i.modeService.get(a))),i.modelService=s(qs,a=>new _k(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=s(aF,a=>new J3(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=s(Xe,a=>new M3(i.configurationService.get(a))),i.codeEditorService=s(li,a=>new pk(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=s(u_,()=>new u2),i.storageService=s(Fg,()=>new uFe),i.editorWorkerService=s(rd,a=>new JR(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(Tt||(Tt={}));class iBe extends ne{constructor(e,t){super();const[n,s]=Tt.init(t);this._serviceCollection=n,this._instantiationService=s;const r=this.get(Ki),o=this.get(Yn),a=this.get(s_),l=this.get(ci),h=this.get(_c),c=this.get(Xe);let u=(m,b)=>{let _=null;return t&&(_=t[m.toString()]),_||(_=b()),this._serviceCollection.set(m,_),_};u(fr,()=>new e4(c,r)),u(fo,()=>new q3(l));let d=u(An,()=>new mIe(this._instantiationService)),f=u(Zi,()=>this._register(new oee(c,d,a,o,h,e))),g=u(N2,()=>new yIe(Tt.codeEditorService.get(li),e));u(Eie,()=>new c4(s,Tt.codeEditorService.get(li)));let p=u(Tg,()=>this._register(new W3(g)));u(Mg,()=>new pFe),u(Ng,()=>{const m=new V3(a,o,p,f,l);return m.configure({blockMouse:!1}),this._register(m)}),u(n_,()=>new Q3(d)),u(GJ,()=>new vIe(Tt.modelService.get(qs)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function Iie(i,e,t){let n=new iBe(i,e),s=null;n.has(Kl)||(s=new n3(Tt.modelService.get()),n.set(Kl,s)),n.has(Ru)||n.set(Ru,new RR(n.get(li),n.get(An)));let r=t(n);return s&&s.setEditor(r),r}function nBe(i,e,t){return Iie(i,t||{},n=>new A3(i,e,n,n.get(qt),n.get(li),n.get(An),n.get(Xe),n.get(Zi),n.get(Tg),n.get(py),n.get(Yn),n.get(Ki),n.get(fr),n.get(qs),n.get(Gs)))}function sBe(i){return Tt.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function rBe(i,e,t){return Iie(i,t||{},n=>new I3(i,e,n,n.get(qt),n.get(Xe),n.get(Zi),n.get(Tg),n.get(rd),n.get(li),n.get(py),n.get(Yn),n.get(Ki),n.get(Ng),n.get(u_),n.get(Mg)))}function oBe(i,e){return new m2e(i,e)}function aBe(i,e,t){return Tte(Tt.modelService.get(),Tt.modeService.get(),i,e,t)}function lBe(i,e){Tt.modelService.get().setMode(i,Tt.modeService.get().create(e))}function hBe(i,e,t){i&&Tt.markerService.get().changeOne(e,i.uri,t)}function cBe(i){return Tt.markerService.get().read(i)}function uBe(i){return Tt.markerService.get().onMarkerChanged(i)}function dBe(i){return Tt.modelService.get().getModel(i)}function fBe(){return Tt.modelService.get().getModels()}function gBe(i){return Tt.modelService.get().onModelAdded(i)}function pBe(i){return Tt.modelService.get().onModelRemoved(i)}function mBe(i){return Tt.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function _Be(i){return fAe(Tt.modelService.get(),i)}function bBe(i,e){const t=Tt.standaloneThemeService.get();return t.registerEditorContainer(i),J5.colorizeElement(t,Tt.modeService.get(),i,e)}function vBe(i,e,t){return Tt.standaloneThemeService.get().registerEditorContainer(document.body),J5.colorize(Tt.modeService.get(),i,e,t)}function wBe(i,e,t=4){return Tt.standaloneThemeService.get().registerEditorContainer(document.body),J5.colorizeModelLine(i,e,t)}function yBe(i){let e=Ri.get(i);return e||{getInitialState:()=>ZL,tokenize:(t,n,s,r)=>Z2e(i,t,s,r)}}function CBe(i,e){Tt.modeService.get().triggerMode(e);let n=yBe(e),s=ql(i),r=[],o=n.getInitialState();for(let a=0,l=s.length;a<l;a++){let h=s[a],c=n.tokenize(h,!0,o,0);r[a]=c.tokens,o=c.endState}return r}function SBe(i,e){Tt.standaloneThemeService.get().defineTheme(i,e)}function xBe(i){Tt.standaloneThemeService.get().setTheme(i)}function DBe(){NIe()}function kBe(i,e){return Ft.registerCommand({id:i,handler:e})}function LBe(){return{create:nBe,onDidCreateEditor:sBe,createDiffEditor:rBe,createDiffNavigator:oBe,createModel:aBe,setModelLanguage:lBe,setModelMarkers:hBe,getModelMarkers:cBe,onDidChangeMarkers:uBe,getModels:fBe,getModel:dBe,onDidCreateModel:gBe,onWillDisposeModel:pBe,onDidChangeModelLanguage:mBe,createWebWorker:_Be,colorizeElement:bBe,colorize:vBe,colorizeModelLine:wBe,tokenize:CBe,defineTheme:SBe,setTheme:xBe,remeasureFonts:DBe,registerCommand:kBe,AccessibilitySupport:VM,ContentWidgetPositionPreference:$M,CursorChangeReason:jM,DefaultEndOfLine:qM,EditorAutoIndentStrategy:KM,EditorOption:ZM,EndOfLinePreference:YM,EndOfLineSequence:QM,MinimapPosition:sR,MouseTargetType:rR,OverlayWidgetPositionPreference:oR,OverviewRulerLane:aR,RenderLineNumbersType:lR,RenderMinimap:hR,ScrollbarVisibility:uR,ScrollType:cR,TextEditorCursorBlinkingStyle:mR,TextEditorCursorStyle:_R,TrackedRangeStickiness:bR,WrappingIndent:vR,ConfigurationChangedEvent:yX,BareFontInfo:ff,FontInfo:PR,TextModelResolvedOptions:BS,FindMatch:d1,EditorType:GL,EditorOptions:Sg}}function EBe(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function BC(i,e){return typeof i=="boolean"?i:e}function cU(i,e){return typeof i=="string"?i:e}function ABe(i){const e={};for(const t of i)e[t]=!0;return e}function uU(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=ABe(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function u4(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,o){n=!0;let a="";if(typeof i[o]=="string")a=i[o];else if(i[o]&&i[o]instanceof RegExp)a=i[o].source;else throw i[o]===void 0?Ut(i,"language definition does not contain attribute '"+o+"', used at: "+e):Ut(i,"attribute reference '"+o+"' must be a string, used at: "+e);return xp(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let s=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,s)}function IBe(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let s=t.split(".");if(s.unshift(t),n<s.length)return s[n]}return null}function TBe(i,e,t,n){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let h;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let c=uU(l.split("|"),i.ignoreCase);h=function(u){return a==="~"?c(u):!c(u)}}else if(a==="@"||a==="!@"){let c=i[l];if(!c)throw Ut(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!EBe(function(d){return typeof d=="string"},c))throw Ut(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let u=uU(c,i.ignoreCase);h=function(d){return a==="@"?u(d):!u(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let c=u4(i,"^"+l+"$");h=function(u){return a==="~"?c.test(u):!c.test(u)}}else h=function(c,u,d,f){return u4(i,"^"+Yc(i,l,u,d,f)+"$").test(c)};else if(l.indexOf("$")<0){let c=fu(i,l);h=function(u){return a==="=="?u===c:u!==c}}else{let c=fu(i,l);h=function(u,d,f,g,p){let m=Yc(i,c,d,f,g);return a==="=="?u===m:u!==m}}return s===-1?{name:t,value:n,test:function(c,u,d,f){return h(c,c,u,d,f)}}:{name:t,value:n,test:function(c,u,d,f){let g=IBe(c,u,d,s);return h(g||"",c,u,d,f)}}}function d4(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ut(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Ut(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ut(i,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!MAe(i,Yc(i,s,"",[],""))))throw Ut(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=s}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let s=0,r=t.length;s<r;s++)n[s]=d4(i,e,t[s]);return{group:n}}else if(t.cases){let n=[];for(let r in t.cases)if(t.cases.hasOwnProperty(r)){const o=d4(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:o,name:r}):r==="@eos"?n.push({test:function(a,l,h,c){return c},value:o,name:r}):n.push(TBe(i,e,r,o))}const s=i.defaultToken;return{test:function(r,o,a,l){for(const h of n)if(!h.test||h.test(r,o,a,l))return h.value;return s}}}else throw Ut(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class NBe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Ut(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=u4(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=d4(e,this.name,t)}}function MBe(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=BC(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=BC(e.ignoreCase,!1),t.unicode=BC(e.unicode,!1),t.tokenPostfix=cU(e.tokenPostfix,"."+t.languageId),t.defaultToken=cU(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function s(o,a,l){for(const h of l){let c=h.include;if(c){if(typeof c!="string")throw Ut(t,"an 'include' attribute must be a string at: "+o);if(c[0]==="@"&&(c=c.substr(1)),!e.tokenizer[c])throw Ut(t,"include target '"+c+"' is not defined at: "+o);s(o+"."+c,a,e.tokenizer[c])}else{const u=new NBe(o);if(Array.isArray(h)&&h.length>=1&&h.length<=3)if(u.setRegex(n,h[0]),h.length>=3)if(typeof h[1]=="string")u.setAction(n,{token:h[1],next:h[2]});else if(typeof h[1]=="object"){const d=h[1];d.next=h[2],u.setAction(n,d)}else throw Ut(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(n,h[1]);else{if(!h.regex)throw Ut(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);h.name&&typeof h.name=="string"&&(u.name=h.name),h.matchOnlyAtStart&&(u.matchOnlyAtLineStart=BC(h.matchOnlyAtLineStart,!1)),u.setRegex(n,h.regex),u.setAction(n,h.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ut(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ut(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let r=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ut(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:fu(t,a.open),close:fu(t,a.close)});else throw Ut(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function RBe(i){yf.registerLanguage(i)}function OBe(){let i=[];return i=i.concat(yf.getLanguages()),i}function PBe(i){return Tt.modeService.get().languageIdCodec.encodeLanguageId(i)}function FBe(i,e){let t=Tt.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function BBe(i,e){const t=Tt.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return zi.register(t,e,100)}class VBe{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,s){if(typeof this._actual.tokenize=="function")return Y1.adaptTokenize(this._languageId,this._actual,e,n,s);throw new Error("Not supported!")}tokenize2(e,t,n){let s=this._actual.tokenizeEncoded(e,n);return new HL(s.tokens,s.endState)}}class Y1{constructor(e,t,n,s){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=s}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let s=[],r=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let h=l.startIndex;o===0?h=0:h<r&&(h=r),s[o]=new zL(h+n,l.scopes,t),r=h}return s}static adaptTokenize(e,t,n,s,r){let o=t.tokenize(n,s),a=Y1._toClassicTokens(o.tokens,e,r),l;return o.endState.equals(s)?l=s:l=o.endState,new x5(a,l)}tokenize(e,t,n,s){return Y1.adaptTokenize(this._languageId,this._actual,e,n,s)}_toBinaryTokens(e,t,n){const s=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,l=0;for(let c=0,u=t.length;c<u;c++){const d=t[c],f=r.match(s,d.scopes);if(a>0&&o[a-1]===f)continue;let g=d.startIndex;c===0?g=0:g<l&&(g=l),o[a++]=g+n,o[a++]=f,l=g}let h=new Uint32Array(a);for(let c=0;c<a;c++)h[c]=o[c];return h}tokenize2(e,t,n,s){let r=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._modeService.languageIdCodec,r.tokens,s),a;return r.endState.equals(n)?a=n:a=r.endState,new HL(o,a)}}function WBe(i){return"tokenizeEncoded"in i}function Tie(i){return i&&typeof i.then=="function"}function zBe(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=Q.fromHex(i[t]);Tt.standaloneThemeService.get().setColorMapOverride(e)}else Tt.standaloneThemeService.get().setColorMapOverride(null)}function HBe(i,e){const t=Tt.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=s=>WBe(s)?new VBe(t,s):new Y1(t,s,Tt.modeService.get(),Tt.standaloneThemeService.get());return Tie(e)?Ri.registerPromise(i,e.then(s=>n(s))):Ri.register(i,n(e))}function UBe(i,e){const t=n=>PAe(Tt.modeService.get(),Tt.standaloneThemeService.get(),i,MBe(i,n));return Tie(e)?Ri.registerPromise(i,e.then(n=>t(n))):Ri.register(i,t(e))}function $Be(i,e){return SD.register(i,e)}function jBe(i,e){return BR.register(i,e)}function qBe(i,e){return VR.register(i,e)}function GBe(i,e){return f1.register(i,{provideHover:(t,n,s)=>{let r=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,s)).then(o=>{if(o)return!o.range&&r&&(o.range=new V(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),o.range||(o.range=new V(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function KBe(i,e){return WR.register(i,e)}function ZBe(i,e){return xD.register(i,e)}function YBe(i,e){return q2e.register(i,e)}function QBe(i,e){return g1.register(i,e)}function XBe(i,e){return kD.register(i,e)}function JBe(i,e){return LD.register(i,e)}function e6e(i,e){return zR.register(i,e)}function t6e(i,e,t){return Hl.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,s,r,o)=>{let a=Tt.markerService.get().read({resource:n.uri}).filter(l=>V.areIntersectingOrTouching(l,s));return e.provideCodeActions(n,s,{markers:a,only:r.only},o)},resolveCodeAction:e.resolveCodeAction})}function i6e(i,e){return Gb.register(i,e)}function n6e(i,e){return Zc.register(i,e)}function s6e(i,e){return pJ.register(i,e)}function r6e(i,e){return mJ.register(i,e)}function o6e(i,e){return ba.register(i,e)}function a6e(i,e){return e0.register(i,e)}function l6e(i,e){return UR.register(i,e)}function h6e(i,e){return DD.register(i,e)}function c6e(i,e){return G2e.register(i,e)}function u6e(i,e){return t0.register(i,e)}function d6e(i,e){return _J.register(i,e)}function f6e(i,e){return $5.register(i,e)}function g6e(i,e){return HR.register(i,e)}function p6e(){return{register:RBe,getLanguages:OBe,onLanguage:FBe,getEncodedLanguageId:PBe,setLanguageConfiguration:BBe,setColorMap:zBe,setTokensProvider:HBe,setMonarchTokensProvider:UBe,registerReferenceProvider:$Be,registerRenameProvider:jBe,registerCompletionItemProvider:o6e,registerSignatureHelpProvider:qBe,registerHoverProvider:GBe,registerDocumentSymbolProvider:KBe,registerDocumentHighlightProvider:ZBe,registerLinkedEditingRangeProvider:YBe,registerDefinitionProvider:QBe,registerImplementationProvider:XBe,registerTypeDefinitionProvider:JBe,registerCodeLensProvider:e6e,registerCodeActionProvider:t6e,registerDocumentFormattingEditProvider:i6e,registerDocumentRangeFormattingEditProvider:n6e,registerOnTypeFormattingEditProvider:s6e,registerLinkProvider:r6e,registerColorProvider:a6e,registerFoldingRangeProvider:l6e,registerDeclarationProvider:h6e,registerSelectionRangeProvider:c6e,registerDocumentSemanticTokensProvider:u6e,registerDocumentRangeSemanticTokensProvider:d6e,registerInlineCompletionsProvider:f6e,registerInlayHintsProvider:g6e,DocumentHighlightKind:GM,CompletionItemKind:zM,CompletionItemTag:HM,CompletionItemInsertTextRule:WM,SymbolKind:gR,SymbolTag:pR,IndentAction:XM,CompletionTriggerKind:UM,SignatureHelpTriggerKind:fR,InlayHintKind:JM,InlineCompletionTriggerKind:eR,FoldingRangeKind:Wa}}class fT{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var d_=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function m6e(i){const e=[],t=new Set,n=Gb.ordered(i);for(const r of n)e.push(r),r.extensionId&&t.add(fT.toKey(r.extensionId));const s=Zc.ordered(i);for(const r of s){if(r.extensionId){if(t.has(fT.toKey(r.extensionId)))continue;t.add(fT.toKey(r.extensionId))}e.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(o,a,l){return r.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class Q1{static setFormatterSelector(e){return{dispose:Q1._selectors.unshift(e)}}static select(e,t,n){return d_(this,void 0,void 0,function*(){if(e.length===0)return;const s=bt.first(Q1._selectors);if(s)return yield s(e,t,n)})}}Q1._selectors=new Ar;function _6e(i,e,t,n,s){return d_(this,void 0,void 0,function*(){const r=Zc.ordered(e);for(const o of r){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,s)).catch(ta);if($l(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function b6e(i,e,t,n){return d_(this,void 0,void 0,function*(){const s=m6e(e);for(const r of s){let o=yield Promise.resolve(r.provideDocumentFormattingEdits(e,t,n)).catch(ta);if($l(o))return yield i.computeMoreMinimalEdits(e.uri,o)}})}function v6e(i,e,t,n,s){const r=pJ.ordered(e);return r.length===0||r[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(r[0].provideOnTypeFormattingEdits(e,t,n,s,ri.None)).catch(ta).then(o=>i.computeMoreMinimalEdits(e.uri,o))}Ft.registerCommand("_executeFormatRangeProvider",function(i,...e){return d_(this,void 0,void 0,function*(){const[t,n,s]=e;$i(Ke.isUri(t)),$i(V.isIRange(n));const r=i.get(Kl),o=i.get(rd),a=yield r.createModelReference(t);try{return _6e(o,a.object.textEditorModel,V.lift(n),s,ri.None)}finally{a.dispose()}})});Ft.registerCommand("_executeFormatDocumentProvider",function(i,...e){return d_(this,void 0,void 0,function*(){const[t,n]=e;$i(Ke.isUri(t));const s=i.get(Kl),r=i.get(rd),o=yield s.createModelReference(t);try{return b6e(r,o.object.textEditorModel,n,ri.None)}finally{o.dispose()}})});Ft.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return d_(this,void 0,void 0,function*(){const[t,n,s,r]=e;$i(Ke.isUri(t)),$i(K.isIPosition(n)),$i(typeof s=="string");const o=i.get(Kl),a=i.get(rd),l=yield o.createModelReference(t);try{return v6e(a,l.object.textEditorModel,K.lift(n),s,r)}finally{l.dispose()}})});var gT;Sg.wrappingIndent.defaultValue=0;Sg.glyphMargin.defaultValue=!1;Sg.autoIndent.defaultValue=3;Sg.overviewRulerLanes.defaultValue=2;Q1.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const Cs=MX();Cs.editor=LBe();Cs.languages=p6e();Cs.CancellationTokenSource;const w6e=Cs.Emitter;Cs.KeyCode;Cs.KeyMod;Cs.Position;const Gje=Cs.Range;Cs.Selection;Cs.SelectionDirection;const Kje=Cs.MarkerSeverity;Cs.MarkerTag;Cs.Uri;Cs.Token;const y6e=Cs.editor,H2=Cs.languages;(!((gT=ai.MonacoEnvironment)===null||gT===void 0)&&gT.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Cs);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const C6e="#/definitions/RootSpec",S6e="http://json-schema.org/draft-07/schema#",x6e={AggregateParams:{additionalProperties:!1,properties:{groupby:{description:"Which fields to use for grouping. Missing `groupby` results in a single group that includes all the data items.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"aggregate",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},Align:{enum:["left","center","right"],type:"string"},Axis:{additionalProperties:!1,properties:{domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},domainColor:{description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.',type:"string"},domainDash:{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},domainDashOffset:{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},domainWidth:{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},format:{description:"The format specifier pattern for axis labels. Must be a legal [d3-format](https://github.com/d3/d3-format#locale_format) specifier.",type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis.\n\n__Default value:__ `false`",type:"boolean"},gridCap:{description:'The stroke cap for the grid line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},gridColor:{description:"Color of grid lines.\n\n__Default value:__ `lightgray`",type:"string"},gridDash:{description:"An array of alternating [stroke, space] lengths for dashed grid mark lines.",items:{type:"number"},type:"array"},gridDashOffset:{description:"The pixel offset at which to start drawing with the grid mark dash array.",type:"number"},gridOpacity:{description:"The opacity of the grid lines.\n\n__Default value:__ `1`",type:"number"},gridWidth:{description:"Width of the grid lines.\n\n__Default value:__ `1`",type:"number"},labelAlign:{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},labelAngle:{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},labelBaseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`.'},labelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the tick label.",type:"string"},labelFontSize:{description:"The font size of the label, in pixels.",minimum:0,type:"number"},labelFontStyle:{description:"Font style of the title.",type:"string"},labelFontWeight:{description:"Font weight of axis tick labels.",type:"string"},labelLimit:{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},labelPadding:{description:"The padding, in pixels, between axis and text labels.\n\n__Default value:__ `2`",type:"number"},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},minExtent:{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},offset:{description:"The orthogonal offset in pixels by which to displace the axis from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/AxisOrient",description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},tickCap:{description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},tickColor:{description:`The color of the axis's tick.

__Default value:__ \`"gray"\``,type:"string"},tickCount:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of `2`, `5`, `10`) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickDash:{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},tickDashOffset:{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},tickMinStep:{description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.",type:"number"},tickSize:{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{description:"A title for the axis (none by default).",type:"string"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},titleFontSize:{description:"Font size of the title.",minimum:0,type:"number"},titleFontStyle:{description:"Font style of the title.",type:"string"},titleFontWeight:{description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).',type:"string"},titleOpacity:{description:"Opacity of the axis title.",type:"number"},titlePadding:{description:"The padding, in pixels, between title and axis.",type:"number"},values:{description:"Explicitly set the visible axis tick and label values.",items:{},type:"array"}},type:"object"},AxisGenomeData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to use"},type:{const:"axisGenome",type:"string"}},required:["type","channel"],type:"object"},AxisOrient:{enum:["top","bottom","left","right"],type:"string"},AxisTicksData:{additionalProperties:!1,properties:{axis:{$ref:"#/definitions/Axis",description:"Optional axis properties"},channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to listen to"},type:{const:"axisTicks",type:"string"}},required:["type","channel"],type:"object"},BamData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".bai"`.',type:"string"},type:{const:"bam",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `10000`",type:"number"}},required:["type","url"],type:"object"},Baseline:{enum:["top","middle","bottom","alphabetic"],type:"string"},BigBedData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},type:{const:"bigbed",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `1000000`",type:"number"}},required:["type","url"],type:"object"},BigWigData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},pixelsPerBin:{description:"The approximate minimum width of each data bin, in pixels.\n\n__Default value:__ `2`",type:"number"},type:{const:"bigwig",type:"string"},url:{description:"URL of the BigWig file.",type:"string"}},required:["type","url"],type:"object"},ChannelWithScale:{anyOf:[{$ref:"#/definitions/PositionalChannel"},{const:"color",type:"string"},{const:"fill",type:"string"},{const:"stroke",type:"string"},{const:"opacity",type:"string"},{const:"fillOpacity",type:"string"},{const:"strokeOpacity",type:"string"},{const:"strokeWidth",type:"string"},{const:"size",type:"string"},{const:"shape",type:"string"},{const:"angle",type:"string"},{const:"dx",type:"string"},{const:"dy",type:"string"},{const:"sample",type:"string"}]},ChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/GenomeAxis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{const:"locus",type:"string"}},required:["chrom","type"],type:"object"},ChromosomalLocus:{additionalProperties:!1,properties:{chrom:{description:'The name of the chromosome. For example: `"chr1"`, `"CHR1"`, or `"1"`.',type:"string"},pos:{description:"The zero-based position inside the chromosome or contig.",type:"number"}},required:["chrom"],type:"object"},CollectParams:{additionalProperties:!1,properties:{groupby:{description:"Arranges the data into consecutive batches based on the groups. This is mainly intended for internal use so that faceted data can be handled as batches.",items:{$ref:"#/definitions/Field"},type:"array"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order."},type:{const:"collect",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},"ColorDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%3E"},CompareParams:{additionalProperties:!1,properties:{field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to sort by"},order:{anyOf:[{items:{$ref:"#/definitions/SortOrder"},type:"array"},{$ref:"#/definitions/SortOrder"}],description:'The order(s) to use: `"ascending"` (default), `"descending"`.'}},required:["field"],type:"object"},ComplexDomain:{description:"A complex domain that needs to be converted into a scalar domain before it is assigned to a scale.",items:{$ref:"#/definitions/ChromosomalLocus"},type:"array"},ConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["concat","columns"],type:"object"},Contig:{additionalProperties:!1,properties:{name:{type:"string"},size:{type:"number"}},required:["name","size"],type:"object"},CoverageParams:{additionalProperties:!1,properties:{as:{description:"The output field for the computed coverage.",type:"string"},asChrom:{description:"The output field for the chromosome.\n\n**Default:** Same as `chrom`",type:"string"},asEnd:{description:"The output field for the end coordinate.\n\n**Default:** Same as `end`",type:"string"},asStart:{description:"The output field for the start coordinate.\n\n**Default:** Same as `start`",type:"string"},chrom:{$ref:"#/definitions/Field",description:"An optional chromosome field that is passed through. TODO: groupby"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"coverage",description:"The type of the transform to be applied",type:"string"},weight:{$ref:"#/definitions/Field",description:"A field representing an optional weight for the segment. Can be used with copy ratios, for example."}},required:["end","start","type"],type:"object"},CsvDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',enum:["csv","tsv"],type:"string"}},type:"object"},Data:{anyOf:[{$ref:"#/definitions/DataSource"},{$ref:"#/definitions/Generator"}]},DataFormat:{anyOf:[{$ref:"#/definitions/CsvDataFormat"},{$ref:"#/definitions/DsvDataFormat"},{$ref:"#/definitions/JsonDataFormat"},{$ref:"#/definitions/OtherDataFormat"}]},DataSource:{anyOf:[{$ref:"#/definitions/UrlData"},{$ref:"#/definitions/InlineData"},{$ref:"#/definitions/NamedData"},{$ref:"#/definitions/DynamicCallbackData"},{$ref:"#/definitions/LazyData"}]},DsvDataFormat:{additionalProperties:!1,properties:{delimiter:{description:"The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.",maxLength:1,minLength:1,type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"dsv",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},required:["delimiter"],type:"object"},DynamicCallbackData:{additionalProperties:!1,properties:{dynamicCallbackSource:{description:"The View class has `getDynamicData()` methods that provides the data. This is intended for internal use.",type:"boolean"},format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["dynamicCallbackSource"],type:"object"},DynamicOpacity:{additionalProperties:!1,description:"DynamicOpacity specifies a zoom-dependent behavior for view opacity. The opacity is interpolated between the specified stops.",properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel"},unitsPerPixel:{description:"Stops expressed as units (base pairs, for example) per pixel.",items:{type:"number"},type:"array"},values:{description:"Opacity values that match the given stops.",items:{type:"number"},type:"array"}},required:["unitsPerPixel","values"],type:"object"},Encoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Color of the marks  either fill or stroke color based on  the `filled` property of mark definition.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme)."},dx:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},dy:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},facetIndex:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},fill:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Fill color of the marks.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Fill opacity of the marks."},opacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Opacity of the marks."},sample:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"Facet identifier for interactive filtering, sorting, and grouping in the App."},search:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},semanticScore:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},shape:{$ref:"#/definitions/ShapeDef%3Cstring%3E",description:'Shape of the mark.\n\nFor `point` marks the supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- centered directional shape `"triangle"`'},size:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:'Size of the mark.\n- For `"point"`  the symbol size, or pixel area of the mark.\n- For `"text"`  the text\'s font size.'},stroke:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Stroke color of the marks.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke opacity of the marks."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke width of the marks."},text:{$ref:"#/definitions/TextDef%3Cstring%3E",description:"Text of the `text` mark."},uniqueId:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},x:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"X coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},x2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"X2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"Y coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"Y2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."}},type:"object"},ExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},Field:{description:"The name of the field or a JavaScript expression for accessing nested properties. Dots and brackets in the field name must be escaped.",type:"string"},"FieldDefWithoutScale<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},FieldName:{type:"string"},FilterParams:{additionalProperties:!1,properties:{expr:{description:"An expression string. The data object is removed if the expression evaluates to false.",type:"string"},type:{const:"filter",description:"The type of the transform to be applied",type:"string"}},required:["expr","type"],type:"object"},FilterScoredLabelsParams:{additionalProperties:!1,properties:{channel:{description:'**Default:** `"x"`',enum:["x","y"],type:"string"},lane:{$ref:"#/definitions/Field",description:"An optional field representing element's lane, e.g., if transcripts are shown using a piled up layout."},padding:{description:"Padding (in pixels) around the element.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/Field",description:"The field representing element's position on the domain."},score:{$ref:"#/definitions/Field",description:"The field representing the score used for prioritization."},type:{const:"filterScoredLabels",description:"The type of the transform to be applied",type:"string"},width:{$ref:"#/definitions/Field",description:"The field representing element's width in pixels"}},required:["pos","score","type","width"],type:"object"},FlattenCompressedExonsParams:{additionalProperties:!1,properties:{as:{description:'Field names for the flattened exons.\n\n**Default:** `["exonStart", "exonEnd"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},exons:{$ref:"#/definitions/Field",description:'The field containing the exons.\n\n**Default:** `"exons"`'},start:{$ref:"#/definitions/Field",description:'Start coordinate of the gene body.\n\n**Default:** `"start"`'},type:{const:"flattenCompressedExons",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FlattenDelimitedParams:{additionalProperties:!1,properties:{as:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:`The output field name(s) for the flattened field.

**Default:** the input fields.`},field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to split and flatten"},separator:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"Separator(s) used on the field(s) TODO: Rename to delimiter"},type:{const:"flattenDelimited",description:"The type of the transform to be applied",type:"string"}},required:["field","separator","type"],type:"object"},FlattenParams:{additionalProperties:!1,properties:{as:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:`The output field name(s) for the flattened field.

**Default:** the input fields.`},fields:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to flatten. If no field is defined, the data object itself is treated as an array to be flattened."},index:{description:"The output field name for the zero-based index of the array values. If unspecified, an index field is not added.",type:"string"},type:{const:"flatten",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FlattenSequenceParams:{additionalProperties:!1,properties:{as:{description:'Name of the fields where the zero-based index number and flattened sequence letter are written to.\n\n**Default:** `["pos", "sequence"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},field:{$ref:"#/definitions/Field",description:'The field to flatten.\n\n**Default:** `"sequence"`'},type:{const:"flattenSequence",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FontStyle:{enum:["normal","italic"],type:"string"},FontWeight:{anyOf:[{type:"number"},{const:"thin",type:"string"},{const:"light",type:"string"},{const:"regular",type:"string"},{const:"normal",type:"string"},{const:"medium",type:"string"},{const:"bold",type:"string"},{const:"black",type:"string"}]},FormulaParams:{additionalProperties:!1,properties:{as:{description:"The (new) field where the computed value is written to",type:"string"},expr:{description:"An expression string",type:"string"},type:{const:"formula",description:"The type of the transform to be applied",type:"string"}},required:["as","expr","type"],type:"object"},Generator:{$ref:"#/definitions/SequenceGenerator"},GenomeAxis:{additionalProperties:!1,properties:{chromGrid:{description:"A boolean flag indicating if chromosome grid lines should be included as part of the axis.\n\n__Default value:__ `false`",type:"boolean"},chromGridCap:{description:'The stroke cap for the chromosome grid line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},chromGridColor:{description:"Color of grid lines.\n\n__Default value:__ `lightgray`",type:"string"},chromGridDash:{description:"An array of alternating [stroke, space] lengths for dashed chromosome grid mark lines.",items:{type:"number"},type:"array"},chromGridDashOffset:{description:"The pixel offset at which to start drawing with the chromosome grid mark dash array.",type:"number"},chromGridFillEven:{description:`Fill color of odd chromosomes.

__Default value:__ (none)`,type:"string"},chromGridFillOdd:{description:`Fill color of odd chromosomes.

__Default value:__ (none)`,type:"string"},chromGridOpacity:{description:"The opacity of the chromosome grid lines.\n\n__Default value:__ `1`",type:"number"},chromGridWidth:{description:"Width of the chromosome grid lines.\n\n__Default value:__ `1`",type:"number"},chromLabelAlign:{$ref:"#/definitions/Align"},chromLabelColor:{type:"string"},chromLabelFont:{type:"string"},chromLabelFontSize:{type:"number"},chromLabelFontStyle:{$ref:"#/definitions/FontStyle"},chromLabelFontWeight:{$ref:"#/definitions/FontWeight"},chromLabelPadding:{type:"number"},chromLabels:{type:"boolean"},chromTickColor:{type:"string"},chromTickDash:{items:{type:"number"},type:"array"},chromTickDashOffset:{type:"number"},chromTickSize:{type:"number"},chromTickWidth:{type:"number"},chromTicks:{type:"boolean"},domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},domainColor:{description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.',type:"string"},domainDash:{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},domainDashOffset:{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},domainWidth:{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},format:{description:"The format specifier pattern for axis labels. Must be a legal [d3-format](https://github.com/d3/d3-format#locale_format) specifier.",type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis.\n\n__Default value:__ `false`",type:"boolean"},gridCap:{description:'The stroke cap for the grid line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},gridColor:{description:"Color of grid lines.\n\n__Default value:__ `lightgray`",type:"string"},gridDash:{description:"An array of alternating [stroke, space] lengths for dashed grid mark lines.",items:{type:"number"},type:"array"},gridDashOffset:{description:"The pixel offset at which to start drawing with the grid mark dash array.",type:"number"},gridOpacity:{description:"The opacity of the grid lines.\n\n__Default value:__ `1`",type:"number"},gridWidth:{description:"Width of the grid lines.\n\n__Default value:__ `1`",type:"number"},labelAlign:{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},labelAngle:{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},labelBaseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`.'},labelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the tick label.",type:"string"},labelFontSize:{description:"The font size of the label, in pixels.",minimum:0,type:"number"},labelFontStyle:{description:"Font style of the title.",type:"string"},labelFontWeight:{description:"Font weight of axis tick labels.",type:"string"},labelLimit:{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},labelPadding:{description:"The padding, in pixels, between axis and text labels.\n\n__Default value:__ `2`",type:"number"},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},minExtent:{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},offset:{description:"The orthogonal offset in pixels by which to displace the axis from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/AxisOrient",description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},tickCap:{description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},tickColor:{description:`The color of the axis's tick.

__Default value:__ \`"gray"\``,type:"string"},tickCount:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of `2`, `5`, `10`) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickDash:{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},tickDashOffset:{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},tickMinStep:{description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.",type:"number"},tickSize:{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{description:"A title for the axis (none by default).",type:"string"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},titleFontSize:{description:"Font size of the title.",minimum:0,type:"number"},titleFontStyle:{description:"Font style of the title.",type:"string"},titleFontWeight:{description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).',type:"string"},titleOpacity:{description:"Opacity of the axis title.",type:"number"},titlePadding:{description:"The padding, in pixels, between title and axis.",type:"number"},values:{description:"Explicitly set the visible axis tick and label values.",items:{},type:"array"}},type:"object"},GenomeConfig:{additionalProperties:!1,properties:{baseUrl:{description:'Base url of data files: chromsizes, cytobands, and gene annotations.\n\n**Default:** `"https://genomespy.app/data/genomes/"`',type:"string"},contigs:{description:"As an alternative for chromSizes, the contigs can be provided inline.",items:{$ref:"#/definitions/Contig"},type:"array"},name:{description:"Name of the genome assembly, e.g., `hg19` or `hg38`.",type:"string"}},required:["name"],type:"object"},Gff3Data:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},debounceDomainChange:{description:"The debounce time for domain changes, in milliseconds. Debouncing prevents data fetches while the user is still panning around.\n\n__Default value:__ `200`",type:"number"},indexUrl:{description:'Url of the tabix index file.\n\n__Default value:__ `url` + `".tbi"`.',type:"string"},type:{const:"gff3",type:"string"},url:{description:"Url of the bgzip compressed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the Tabix file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `30000000`",type:"number"}},required:["type","url"],type:"object"},HConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},HandledTooltip:{additionalProperties:!1,properties:{handler:{type:"string"},params:{type:"object"}},required:["handler"],type:"object"},IdentifierParams:{additionalProperties:!1,properties:{as:{description:'**Default:** `"_uniqueId"`',type:"string"},type:{const:"identifier",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},ImportConfig:{additionalProperties:!1,properties:{name:{type:"string"},params:{type:"object"},url:{type:"string"}},type:"object"},ImportSpec:{additionalProperties:!1,properties:{import:{$ref:"#/definitions/ImportConfig"}},required:["import"],type:"object"},IndexedFastaData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".fai"`.',type:"string"},type:{const:"indexedFasta",type:"string"},url:{description:"URL of the fasta file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the fasta file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `7000`",type:"number"}},required:["type","url"],type:"object"},InlineData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},values:{$ref:"#/definitions/InlineDataset",description:"The full data set, included inline. This can be an array of objects or primitive values, an object, or a string. Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type."}},required:["values"],type:"object"},InlineDataset:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{type:"object"},type:"array"},{type:"string"},{type:"object"}]},JsonDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},property:{description:'The JSON property containing the desired data. This parameter can be used when the loaded JSON file may have surrounding structure or meta-data. For example `"property": "values.features"` is equivalent to retrieving `json.values.features` from the loaded JSON object.',type:"string"},type:{const:"json",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},LayerSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},LazyData:{additionalProperties:!1,properties:{lazy:{$ref:"#/definitions/LazyDataParams"}},required:["lazy"],type:"object"},LazyDataParams:{anyOf:[{$ref:"#/definitions/AxisTicksData"},{$ref:"#/definitions/AxisGenomeData"},{$ref:"#/definitions/IndexedFastaData"},{$ref:"#/definitions/BigWigData"},{$ref:"#/definitions/BigBedData"},{$ref:"#/definitions/BamData"},{$ref:"#/definitions/Gff3Data"}]},LinearizeGenomicCoordinateParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The output field or fields for linearized coordinates."},channel:{description:'Get the genome assembly from the scale of the channel.\n\n**Default:** `"x"`',enum:["x","y"],type:"string"},chrom:{$ref:"#/definitions/Field",description:"The chromosome/contig field"},offset:{anyOf:[{type:"number"},{items:{type:"number"},type:"array"}],description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`"},pos:{anyOf:[{$ref:"#/definitions/Field"},{items:{$ref:"#/definitions/Field"},type:"array"}],description:"The field or fields that contain intra-chromosomal positions"},type:{const:"linearizeGenomicCoordinate",description:"The type of the transform to be applied",type:"string"}},required:["as","chrom","pos","type"],type:"object"},MarkConfigAndType:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},angle:{description:"The rotation angle in degrees.\n\n**Default value:** `0`",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'The vertical alignment of the text.  One of `"top"`, `"middle"`, `"bottom"`.\n\n**Default value:** `"bottom"`'},buildIndex:{description:`Builds and index for efficient rendering of subsets of the data. The data must be sorted by the x coordinate.

TODO: This should be enabled automatically if the data are sorted.`,type:"boolean"},clip:{anyOf:[{type:"boolean"},{const:"never",type:"string"}],description:"If true, the mark is clipped to the UnitView's rectangle. By default, clipping is enabled for marks that have zoomable positional scales."},color:{type:"string"},color2:{description:"TODO",type:"string"},cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},dx:{description:"The horizontal offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},dy:{description:"The vertical offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},fill:{description:"The fill color",type:"string"},fillGradientStrength:{description:"Gradient strength controls the amount of the gradient eye-candy effect in the fill color. Valid values are between 0 and 1.\n\n**Default value:** `0`",type:"number"},fillOpacity:{description:"The fill opacity. Value between [0, 1].",type:"number"},filled:{description:"Whether the `color` represents the `fill` color (`true`) or the `stroke` color (`false`).",type:"boolean"},fitToBand:{description:'If true, sets the secondary positional channel that allows the text to be squeezed (see the `squeeze` property). Can be used when: 1) `"band"`, `"index"`, or `"locus"` scale is being used and 2) only the primary positional channel is specified.\n\n**Default value:** `false`',type:"boolean"},flushX:{description:"If true, the text is kept inside the viewport when the range of `x` and `x2` intersect the viewport.",type:"boolean"},flushY:{description:"If true, the text is kept inside the viewport when the range of `y` and `y2` intersect the viewport.",type:"boolean"},font:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},fontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},fontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},geometricZoomBound:{description:"Enables geometric zooming. The value is the base two logarithmic zoom level where the maximum point size is reached.\n\n**Default value:** `0`",type:"number"},inwardStroke:{description:"Should the stroke only grow inwards, e.g, the diameter/outline is not affected by the stroke width. Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with geometric zoom, etc.\n\n**Default value:** `false`",type:"boolean"},logoLetters:{description:"Stretch letters so that they can be used with [sequence logos](https://en.wikipedia.org/wiki/Sequence_logo), etc...",type:"boolean"},minBufferSize:{description:"Minimum size for WebGL buffers (number of data items). Allows for using `bufferSubData()` to update graphics.\n\nThis property is intended for internal use.",type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minLength:{description:"The minimum length of the rule in pixels. Use this property to ensure that very short ranged rules remain visible even when the user zooms out.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minSagittaLength:{description:"Minimum length of the arc's sagitta. Makes very short links more clearly visible.\n\n**Default value:** `1.5`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},opacity:{type:"number"},paddingX:{description:"The horizontal padding, in pixels, when the `x2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},paddingY:{description:"The vertical padding, in pixels, when the `y2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},sagittaScaleFactor:{description:"Scaling factor of the arc's sagitta. The default value `1.0` produces roughly circular arcs.\n\n**Default value:** `1.0`",type:"number"},sampleFacetPadding:{description:"Padding between sample facet's upper/lower edge and the maximum point size. This property controls how tightly points are squeezed when facet's height is smaller than the maximum point size. The unit is a proportion of facet's height. The value must be between `0` and `0.5`. This property has no effect when sample faceting is not used.\n\n**Default value:** `0.1`",type:"number"},segments:{description:"The number of segments in the bzier curve. Affects the rendering quality and performance. Use a higher value for a smoother curve.\n\n**Default value:* `101`",type:"number"},semanticZoomFraction:{description:"TODO\n\n**Default value:** `0.02`",type:"number"},shape:{description:'One of `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n\n**Default value:** `"circle"`',type:"string"},size:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},size2:{description:"TODO",type:"number"},squeeze:{description:"If the `squeeze` property is true and secondary positional channels (`x2` and/or `y2`) are used, the text is scaled to fit mark's width and/or height.\n\n**Default value:** `true`",type:"boolean"},stroke:{description:"The stroke color",type:"string"},strokeCap:{description:'The style of stroke ends. Available choices: `"butt"`, `"round`", and `"square"`.\n\n**Default value:** `"butt"`',enum:["butt","square","round"],type:"string"},strokeDash:{description:"An array of of alternating stroke and gap lengths or `null` for solid strokes.\n\n**Default value:** `null`",items:{type:"number"},type:"array"},strokeDashOffset:{description:"An offset for the stroke dash pattern.\n\n**Default value:** `0`",type:"number"},strokeOpacity:{description:"The stroke opacity. Value between [0, 1].",type:"number"},strokeWidth:{description:"The stroke width in pixels.",type:"number"},text:{$ref:"#/definitions/Scalar",description:'The text to display. The format of numeric data can be customized by setting a [format specifier](https://github.com/d3/d3-format#locale_format) to channel definition\'s `format` property.\n\n**Default value:** `""`'},tooltip:{$ref:"#/definitions/Tooltip",description:"TODO"},type:{$ref:"#/definitions/MarkType"},viewportEdgeFadeDistanceBottom:{type:"number"},viewportEdgeFadeDistanceLeft:{type:"number"},viewportEdgeFadeDistanceRight:{type:"number"},viewportEdgeFadeDistanceTop:{type:"number"},viewportEdgeFadeWidthBottom:{type:"number"},viewportEdgeFadeWidthLeft:{type:"number"},viewportEdgeFadeWidthRight:{type:"number"},viewportEdgeFadeWidthTop:{type:"number"},x:{type:"number"},x2:{type:"number"},xOffset:{description:"Offsets of the `x` and `x2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"},y:{type:"number"},y2:{type:"number"},yOffset:{description:"Offsets of the `y` and `y2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"}},required:["type"],type:"object"},"MarkPropDatumDef<Type>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropDatumDef<TypeForShape>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropDef<string,(string|null),TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,(string|null)>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,number>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3Cnumber%3E"}]},MarkPropExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"MarkPropFieldDef<string,Type>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropFieldDef<string,TypeForShape>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropFieldOrDatumOrExprDef<string,Type>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CType%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CType%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},"MarkPropFieldOrDatumOrExprDef<string,TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CTypeForShape%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},MarkType:{enum:["rect","point","rule","text","link"],type:"string"},MeasureTextParams:{additionalProperties:!1,properties:{as:{type:"string"},field:{$ref:"#/definitions/Field"},fontSize:{type:"number"},type:{const:"measureText",description:"The type of the transform to be applied",type:"string"}},required:["as","field","fontSize","type"],type:"object"},MergeFacetsParams:{additionalProperties:!1,properties:{type:{const:"mergeFacets",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},NamedData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["name"],type:"object"},NumericDomain:{items:{type:"number"},type:"array"},"NumericMarkPropDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2Cnumber%3E"},NumericValueDef:{$ref:"#/definitions/ValueDef%3Cnumber%3E"},OtherDataFormat:{additionalProperties:!1,description:'Other data format, such as `"fasta"`',properties:{type:{type:"string"}},required:["type"],type:"object"},PaddingConfig:{anyOf:[{$ref:"#/definitions/Paddings"},{type:"number"}]},Paddings:{additionalProperties:!1,properties:{bottom:{type:"number"},left:{type:"number"},right:{type:"number"},top:{type:"number"}},type:"object"},Parse:{additionalProperties:{$ref:"#/definitions/ParseValue"},type:"object"},ParseValue:{anyOf:[{type:"null"},{type:"string"},{const:"string",type:"string"},{const:"boolean",type:"string"},{const:"date",type:"string"},{const:"number",type:"string"}]},PileupParams:{additionalProperties:!1,properties:{as:{description:'The output field name for the computed lane.\n\n**Default:** `"lane"`.',type:"string"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},preference:{$ref:"#/definitions/Field",description:"An optional field indicating the preferred lane. Use together with the `preferredOrder` property."},preferredOrder:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{items:{type:"boolean"},type:"array"}],description:"The order of the lane preferences. The first element contains the value that should place the segment on the first lane and so forth. If the preferred lane is occupied, the first available lane is taken."},spacing:{description:"The spacing between adjacent segments on the same lane in coordinate units.\n\n**Default:** `1`.",type:"number"},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"pileup",description:"The type of the transform to be applied",type:"string"}},required:["end","start","type"],type:"object"},"Position2Def<string>":{anyOf:[{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{$ref:"#/definitions/SecondaryChromPosDef"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},{$ref:"#/definitions/PositionValueDef"}]},PositionDatumDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/GenomeAxis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"PositionDef<string>":{anyOf:[{$ref:"#/definitions/PositionFieldDef%3Cstring%3E"},{$ref:"#/definitions/ChromPosDef"},{$ref:"#/definitions/PositionDatumDef"},{$ref:"#/definitions/PositionExprDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionExprDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/GenomeAxis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"PositionFieldDef<string>":{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/GenomeAxis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},PositionValueDef:{$ref:"#/definitions/NumericValueDef"},PositionalChannel:{anyOf:[{$ref:"#/definitions/PrimaryPositionalChannel"},{$ref:"#/definitions/SecondaryPositionalChannel"}]},PrimaryPositionalChannel:{enum:["x","y"],type:"string"},ProjectParams:{additionalProperties:!1,properties:{as:{description:"New names for the projected fields. If omitted, the names of the source fields are used.",items:{type:"string"},type:"array"},fields:{description:"The fields to be projected.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"project",description:"The type of the transform to be applied",type:"string"}},required:["fields","type"],type:"object"},RegexExtractParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The new field or an array of fields where the extracted values are written."},field:{$ref:"#/definitions/Field",description:"The source field"},regex:{description:'A valid JavaScript regular expression with at least one group. For example: `"^Sample(\\\\d+)$"`.\n\nRead more at: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions',type:"string"},skipInvalidInput:{description:"Do not complain about invalid input. Just skip it and leave the new fields undefined on the affected datum.\n\n**Default:** `false`",type:"boolean"},type:{const:"regexExtract",description:"The type of the transform to be applied",type:"string"}},required:["as","field","regex","type"],type:"object"},RegexFoldParams:{additionalProperties:!1,properties:{asKey:{description:'**Default:** `"sample"`',type:"string"},asValue:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A new column name for the extracted values."},columnRegex:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A regular expression that matches to column names. The regex must have one capturing group that is used for extracting the key (e.g., a sample id) from the column name."},skipRegex:{description:"An optional regex that matches to fields that should not be included in the new folded data objects.",type:"string"},type:{const:"regexFold",description:"The type of the transform to be applied",type:"string"}},required:["asValue","columnRegex","type"],type:"object"},ResolutionBehavior:{description:'`"independent"` and `"shared"` behave similarly to Vega-Lite. `"excluded"` behaves like `"shared"`, but is not pulled towards the root. `"forced"` behaves like `"shared"`, but is forced towards the root even if the parent has `"independent"` behavior.',enum:["independent","shared","excluded","forced"],type:"string"},RootSpec:{anyOf:[{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:"An object defining the view background and outline. The background is repeated for each group."},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["columns","concat"],type:"object"}]},SampleAttributeDef:{additionalProperties:!1,properties:{barScale:{$ref:"#/definitions/Scale",description:"An optional scale definition for mapping the attribute to the width of a metadata rectangle."},scale:{$ref:"#/definitions/Scale",description:"Scale definition for the (default) color channel"},type:{$ref:"#/definitions/Type",description:'The attribute type. One of `"nominal"`, `"ordinal"`, or `"quantitative"`.'},visible:{description:"Whether the attribute is visible by default.",type:"boolean"},width:{description:"Width of the column in pixels.",type:"number"}},required:["type"],type:"object"},SampleDef:{additionalProperties:!1,properties:{attributeLabelAngle:{description:"Angle to be added to the default label angle (-90).\n\n**Default value:** `0`",type:"number"},attributeLabelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},attributeLabelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},attributeLabelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},attributeLabelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},attributeSize:{description:"Default size (width) of the metadata attribute columns. Can be configured per attribute using the `attributes` property.\n\n**Default value:** `10`",type:"number"},attributeSpacing:{description:"Spacing between attribute columns in pixels.\n\n**Default value:** `1`",type:"number"},attributes:{additionalProperties:{$ref:"#/definitions/SampleAttributeDef"},description:"Explicitly specify the sample attributes.",type:"object"},data:{$ref:"#/definitions/Data",description:"Optional metadata about the samples."},labelAlign:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},labelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},labelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},labelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},labelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},labelLength:{description:"How much space in pixels to reserve for the labels.\n\n**Default:** `140`",type:"number"},labelTitleText:{description:'Text in the label title\n\n**Default:** `"Sample name"`',type:"string"}},type:"object"},SampleParams:{additionalProperties:!1,properties:{size:{description:"The maximum sample size.\n\n**Default:** `500`",type:"number"},type:{const:"sample",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},SampleSpec:{additionalProperties:!1,description:"A view specification for a SampleView. This is only functional in the GenomeSpy app.",properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:"An object defining the view background and outline. The background is repeated for each group."},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},Scalar:{type:["string","number","boolean"]},ScalarDomain:{anyOf:[{$ref:"#/definitions/NumericDomain"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"}]},Scale:{additionalProperties:!1,properties:{align:{description:"The alignment of the steps within the scale range.\n\nThis value must lie in the range `[0,1]`. A value of `0.5` indicates that the steps should be centered within the range. A value of `0` or `1` may be used to shift the bands to one side, say to position them adjacent to an axis.\n\n__Default value:__ `0.5`",type:"number"},base:{description:"The logarithm base of the `log` scale (default `10`).",type:"number"},bins:{description:"An array of bin boundaries over the scale domain. If provided, axes and legends will use the bin boundaries to inform the choice of tick marks and text labels.",items:{type:"number"},type:"array"},clamp:{description:"If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/config.html#scale-config)'s `clamp` (`true` by default).",type:"boolean"},constant:{description:"A constant determining the slope of the symlog function around zero. Only used for `symlog` scales.\n\n__Default value:__ `1`",type:"number"},domain:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"Customized domain values.\n\nFor _quantitative_ fields, `domain` can take the form of a two-element array with minimum and maximum values.  [Piecewise scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise) can be created by providing a `domain` with more than two entries.\n\nFor _temporal_ fields, `domain` can be a two-element array minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](https://vega.github.io/vega-lite/docs/types.html#datetime).\n\nFor _ordinal_ and _nominal_ fields, `domain` can be an array that lists valid input values."},domainMax:{description:"Sets the maximum value in the scale domain, overriding the `domain` property. This property is only intended for use with scales having continuous domains.",type:"number"},domainMid:{description:"Inserts a single mid-point value into a two-element domain. The mid-point value must lie between the domain minimum and maximum values. This property can be useful for setting a midpoint for [diverging color scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise). The domainMid property is only intended for use with scales supporting continuous, piecewise domains.",type:"number"},domainMin:{description:"Sets the minimum value in the scale domain, overriding the domain property. This property is only intended for use with scales having continuous domains.",type:"number"},exponent:{description:"The exponent of the `pow` scale.",type:"number"},interpolate:{anyOf:[{$ref:"#/definitions/ScaleInterpolate"},{$ref:"#/definitions/ScaleInterpolateParams"}],description:"The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in HCL space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n\n__Default value:__ `hcl`"},name:{description:"The name of the scale. Names are optional but allow the scales to be referenced and found with the API.",type:"string"},nice:{anyOf:[{type:"boolean"},{type:"number"},{additionalProperties:!1,properties:{interval:{type:"string"},step:{type:"number"}},required:["interval","step"],type:"object"}],description:"Extending the domain so that it starts and ends on nice round values. This method typically modifies the scales domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479, 0.996679]_, a nice domain might be _[0.2, 1.0]_.\n\nFor quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n\n__Default value:__ `true` for unbinned _quantitative_ fields; `false` otherwise."},padding:{description:"For _[continuous](https://vega.github.io/vega-lite/docs/scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performedpriorto all other adjustments, including the effects of the`zero`,`nice`,`domainMin`, and`domainMax`properties.\n\nFor _[band](https://vega.github.io/vega-lite/docs/scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n\nFor _[point](https://vega.github.io/vega-lite/docs/scale.html#point)_ scales, alias for `paddingOuter`.\n\n__Default value:__ For _continuous_ scales, derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `continuousPadding`. For _band and point_ scales, see `paddingInner` and `paddingOuter`.  By default, Vega-Lite sets padding such that _width/height = number of unique values * step_.",minimum:0,type:"number"},paddingInner:{description:`The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].

For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).

__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s \`bandPaddingInner\`.`,maximum:1,minimum:0,type:"number"},paddingOuter:{description:"The outer padding (spacing) at the ends of the range of band and point scales, as a fraction of the step size. This value must lie in the range [0,1].\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales. By default, Vega-Lite sets outer padding such that _width/height = number of unique values * step_.",maximum:1,minimum:0,type:"number"},range:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{type:"string"}],description:'The range of the scale. One of:\n\n- A string indicating a [pre-defined named scale range](https://vega.github.io/vega-lite/docs/scale.html#range-config) (e.g., example, `"symbol"`, or `"diverging"`).\n\n- For [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n\n- For [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) and [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales, an array of desired output values.\n\n__Notes:__\n\n1) For color scales you can also specify a color [`scheme`](https://vega.github.io/vega-lite/docs/scale.html#scheme) instead of `range`.\n\n2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view\'s corresponding [size](https://vega.github.io/vega-lite/docs/size.html) (`width` and `height`).'},reverse:{description:"If true, reverses the order of the scale range.\n\n__Default value:__ `false`.",type:"boolean"},round:{description:"If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n\n__Default value:__ `false`.",type:"boolean"},scheme:{anyOf:[{type:"string"},{$ref:"#/definitions/SchemeParams"}],description:'A string indicating a color [scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme) name (e.g., `"category10"` or `"blues"`) or a [scheme parameter object](https://vega.github.io/vega-lite/docs/scale.html#scheme-params).\n\nDiscrete color schemes may be used with [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) or [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales. Continuous color schemes are intended for use with color scales.\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.'},type:{$ref:"#/definitions/ScaleType",description:'The type of scale.  Vega-Lite supports the following categories of scale types:\n\n1) [**Continuous Scales**](https://vega.github.io/vega-lite/docs/scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`"linear"`](https://vega.github.io/vega-lite/docs/scale.html#linear), [`"pow"`](https://vega.github.io/vega-lite/docs/scale.html#pow), [`"sqrt"`](https://vega.github.io/vega-lite/docs/scale.html#sqrt), [`"symlog"`](https://vega.github.io/vega-lite/docs/scale.html#symlog), [`"log"`](https://vega.github.io/vega-lite/docs/scale.html#log), [`"time"`](https://vega.github.io/vega-lite/docs/scale.html#time), [`"utc"`](https://vega.github.io/vega-lite/docs/scale.html#utc).\n\n2) [**Discrete Scales**](https://vega.github.io/vega-lite/docs/scale.html#discrete) -- mapping discrete domains to discrete ([`"ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#ordinal)) or continuous ([`"band"`](https://vega.github.io/vega-lite/docs/scale.html#band) and [`"point"`](https://vega.github.io/vega-lite/docs/scale.html#point)) output ranges.\n\n3) [**Discretizing Scales**](https://vega.github.io/vega-lite/docs/scale.html#discretizing) -- mapping continuous domains to discrete output ranges [`"bin-ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#bin-ordinal), [`"quantile"`](https://vega.github.io/vega-lite/docs/scale.html#quantile), [`"quantize"`](https://vega.github.io/vega-lite/docs/scale.html#quantize) and [`"threshold"`](https://vega.github.io/vega-lite/docs/scale.html#threshold).\n\n__Default value:__ please see the [scale type table](https://vega.github.io/vega-lite/docs/scale.html#type).'},zero:{description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\n__Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n\n__Note:__ Log, time, and utc scales do not support `zero`.",type:"boolean"},zoom:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ZoomParams"}],description:"If `true` and the scale is used on a positional channel, it can bee zoomed and translated interactively."}},type:"object"},ScaleInterpolate:{enum:["rgb","lab","hcl","hsl","hsl-long","hcl-long","cubehelix","cubehelix-long"],type:"string"},ScaleInterpolateParams:{additionalProperties:!1,properties:{gamma:{type:"number"},type:{enum:["rgb","cubehelix","cubehelix-long"],type:"string"}},required:["type"],type:"object"},ScaleType:{enum:["null","linear","log","pow","sqrt","symlog","identity","sequential","quantize","threshold","ordinal","point","band","index","locus"],type:"string"},SchemeParams:{additionalProperties:!1,properties:{count:{description:'The number of colors to use in the scheme. This can be useful for scale types such as `"quantize"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.',type:"number"},extent:{description:"The extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.",items:{type:"number"},type:"array"},name:{description:'A color scheme name for ordinal scales (e.g., `"category10"` or `"blues"`).\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.',type:"string"}},required:["name"],type:"object"},SecondaryChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/GenomeAxis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},required:["chrom"],type:"object"},SecondaryPositionalChannel:{enum:["x2","y2"],type:"string"},SequenceGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sequence:{$ref:"#/definitions/SequenceParams",description:"Generate a sequence of numbers."}},required:["sequence"],type:"object"},SequenceParams:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:'The name of the generated sequence field.\n\n__Default value:__ `"data"`'},start:{description:"The starting value of the sequence (inclusive).",type:"number"},step:{description:"The step value between sequence entries.\n\n__Default value:__ `1`",type:"number"},stop:{description:"The ending value of the sequence (exclusive).",type:"number"}},required:["start","stop"],type:"object"},"ShapeDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%2CTypeForShape%3E"},SizeDef:{additionalProperties:!1,properties:{grow:{description:"Share of the remaining space",type:"number"},px:{description:"Size in pixels",type:"number"}},type:"object"},SortOrder:{enum:["ascending","descending"],type:"string"},StackParams:{additionalProperties:!1,properties:{as:{description:'Fields to write the stacked values.\n\n**Default:** `["y0", "y1"]`',items:{type:"string"},type:"array"},baseField:{$ref:"#/definitions/Field",description:'The field that contains the base or amino acid. Used for information content calculation when the offset is `"information"`. The data objects that have `null` in the baseField are considered gaps and they are taken into account when scaling the the locus\' information content.'},cardinality:{description:'Cardinality, e.g., the number if distinct bases or amino acids. Used for information content calculation when the offset is `"information"`.\n\n**Default:** `4`',type:"number"},field:{$ref:"#/definitions/Field",description:"The field to stack. If no field is defined, a constant value of one is assumed."},groupby:{description:"The fields to be used for forming groups for different stacks.",items:{$ref:"#/definitions/Field"},type:"array"},offset:{description:'How to offset the values in a stack. `"zero"` (default) starts stacking at 0. `"center"` centers the values around zero. `"normalize"` computes intra-stack percentages and normalizes the values to the range of `[0, 1]`. `"information"` computes a layout for a sequence logo. The total height of the stack reflects the group\'s information content.',enum:["zero","center","normalize","information"],type:"string"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order of data in each stack."},type:{const:"stack",description:"The type of the transform to be applied",type:"string"}},required:["as","groupby","type"],type:"object"},Step:{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"},StringDatumDef:{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"StringFieldDef<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"TextDef<string>":{anyOf:[{$ref:"#/definitions/StringFieldDef%3Cstring%3E"},{$ref:"#/definitions/StringDatumDef"},{$ref:"#/definitions/ExprDef"}]},Title:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title and subtitle text. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},angle:{description:"Angle in degrees of title and subtitle text.",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, or `"bottom"`.'},color:{description:"Text color for title text.",type:"string"},dx:{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},dy:{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},font:{description:"Font name for title text.",type:"string"},fontSize:{description:"Font size in pixels for title text.",minimum:0,type:"number"},fontStyle:{$ref:"#/definitions/FontStyle",description:"Font style for title text."},fontWeight:{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},frame:{$ref:"#/definitions/TitleFrame",description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},offset:{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},style:{description:'A mark style property to apply to the title text mark. If not specified, a default style of `"group-title"` is applied.',type:"string"},text:{description:"The title text.",type:"string"}},required:["text"],type:"object"},TitleAnchor:{enum:[null,"start","middle","end"],type:["null","string"]},TitleFrame:{enum:["bounds","group"],type:"string"},TitleOrient:{enum:["none","left","right","top","bottom"],type:"string"},Tooltip:{anyOf:[{$ref:"#/definitions/HandledTooltip"},{type:"null"}]},TransformParams:{anyOf:[{$ref:"#/definitions/AggregateParams"},{$ref:"#/definitions/CollectParams"},{$ref:"#/definitions/CoverageParams"},{$ref:"#/definitions/FlattenDelimitedParams"},{$ref:"#/definitions/FormulaParams"},{$ref:"#/definitions/FilterParams"},{$ref:"#/definitions/FilterScoredLabelsParams"},{$ref:"#/definitions/FlattenParams"},{$ref:"#/definitions/FlattenCompressedExonsParams"},{$ref:"#/definitions/FlattenSequenceParams"},{$ref:"#/definitions/IdentifierParams"},{$ref:"#/definitions/LinearizeGenomicCoordinateParams"},{$ref:"#/definitions/MeasureTextParams"},{$ref:"#/definitions/MergeFacetsParams"},{$ref:"#/definitions/PileupParams"},{$ref:"#/definitions/ProjectParams"},{$ref:"#/definitions/RegexExtractParams"},{$ref:"#/definitions/RegexFoldParams"},{$ref:"#/definitions/SampleParams"},{$ref:"#/definitions/StackParams"}]},Type:{enum:["quantitative","ordinal","nominal","index","locus"],type:"string"},TypeForShape:{enum:["ordinal","nominal"],type:"string"},UnitSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},UrlData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},url:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"An URL or an array of URLs from which to load the data set. Use the `format.type` property to ensure the loaded data is correctly parsed."}},required:["url"],type:"object"},VConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},"ValueDef<(string|null)>":{additionalProperties:!1,properties:{title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:["string","null"]}},required:["value"],type:"object"},"ValueDef<number>":{additionalProperties:!1,properties:{title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:"number"}},required:["value"],type:"object"},ViewBackground:{additionalProperties:!1,properties:{fill:{description:"The fill color",type:"string"},fillOpacity:{description:"The fill opacity. Value between [0, 1].",type:"number"},stroke:{description:"The stroke color",type:"string"},strokeOpacity:{description:"The stroke opacity. Value between [0, 1].",type:"number"},strokeWidth:{type:"number"}},type:"object"},ViewOpacityDef:{anyOf:[{type:"number"},{$ref:"#/definitions/DynamicOpacity"}]},ViewSpec:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/SampleSpec"},{$ref:"#/definitions/VConcatSpec"},{$ref:"#/definitions/HConcatSpec"},{$ref:"#/definitions/ConcatSpec"}]},ZoomParams:{additionalProperties:!1,properties:{extent:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"The boundaries that limit the zoom and pan interactions."}},type:"object"}},dU={$ref:C6e,$schema:S6e,definitions:x6e};const D6e="@genome-spy/playground",k6e="0.36.1",L6e="A playground for testing GenomeSpy visualizations",E6e={dev:"vite",build:"vite build",serve:"vite preview"},A6e="Kari Lavikka",I6e="MIT",T6e={"@fortawesome/fontawesome-free":"^6.1.1","@fortawesome/fontawesome-svg-core":"^6.1.1","@fortawesome/free-solid-svg-icons":"^6.1.1","@genome-spy/core":"^0.36.1",lit:"^2.0.2","lit-html":"^2.4.0","monaco-editor":"^0.30.1","vega-loader":"^4.4.0"},fU={name:D6e,private:!0,version:k6e,description:L6e,scripts:E6e,author:A6e,license:I6e,dependencies:T6e},N6e="modulepreload",M6e=function(i,e){return new URL(i,e).href},gU={},R6e=function(e,t,n){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=M6e(r,n),r in gU)return;gU[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let c=s.length-1;c>=0;c--){const u=s[c];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":N6e,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};var O6e=function(){function i(e,t,n){this._onDidChange=new w6e,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}return Object.defineProperty(i.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),i.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},i.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},i}(),P6e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},F6e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Nie=new O6e("json",P6e,F6e);H2.json={jsonDefaults:Nie};function B6e(){return R6e(()=>import("./jsonMode-d88903e0.js"),[],import.meta.url)}H2.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});H2.onLanguage("json",function(){B6e().then(function(i){return i.setupMode(Nie)})});const pU=65535,$h=16777215,mU=4278190080;class X1{constructor(e,t,n){if(e.length!==t.length||e.length>pU)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,s)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=n&&this.getEndLineNumber(r)>=s};for(let n=0,s=this._startIndexes.length;n<s;n++){let r=this._startIndexes[n],o=this._endIndexes[n];if(r>$h||o>$h)throw new Error("startLineNumber or endLineNumber must not exceed "+$h);for(;e.length>0&&!t(r,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=r+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&$h}getEndLineNumber(e){return this._endIndexes[e]&$h}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,s=e%32,r=this._collapseStates[n];t?this._collapseStates[n]=r|1<<s:this._collapseStates[n]=r&~(1<<s)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),n=!0);return n}toRegion(e){return new V6e(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&mU)>>>24)+((this._endIndexes[e]&mU)>>>16);return t===pU?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let s=Math.floor((t+n)/2);e<this.getStartLineNumber(s)?n=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class V6e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class W6e{constructor(e,t){this._updateEventEmitter=new H,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new X1(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,s)=>n.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const h=this._regions.getEndLineNumber(s),c=this._regions.isCollapsed(s);h<=r&&n.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(c,h<=o)),c&&h>o&&(o=h),s++}};for(let l of e){let h=l.regionIndex,c=this._editorDecorationIds[h];if(c&&!t[c]){t[c]=!0,a(h);let u=!this._regions.isCollapsed(h);this._regions.setCollapsed(h,u),r=Math.max(r,this._regions.getEndLineNumber(h))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],s=(u,d)=>{for(let f of t)if(u<f&&f<=d)return!0;return!1},r=-1,o=(u,d)=>{const f=e.getStartLineNumber(u),g=e.getEndLineNumber(u);d||(d=e.isCollapsed(u)),d&&s(f,g)&&(d=!1),e.setCollapsed(u,d);const p=this._textModel.getLineMaxColumn(f),m={startLineNumber:f,startColumn:Math.max(p-1,1),endLineNumber:f,endColumn:p};n.push({range:m,options:this._decorationProvider.getDecorationOption(d,g<=r)}),d&&g>r&&(r=g)},a=0,l=()=>{for(;a<this._regions.length;){let u=this._regions.isCollapsed(a);if(a++,u)return a-1}return-1},h=0,c=l();for(;c!==-1&&h<e.length;){let u=this._textModel.getDecorationRange(this._editorDecorationIds[c]);if(u){let d=u.startLineNumber;if(u.startColumn===Math.max(u.endColumn-1,1)&&this._textModel.getLineMaxColumn(d)===u.endColumn)for(;h<e.length;){let f=e.getStartLineNumber(h);if(d>=f)o(h,d===f),h++;else break}}c=l()}for(;h<e.length;)o(h,!1),h++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let s=n.startLineNumber,r=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:s,endLineNumber:r})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let s=this.getRegionAtLine(n.startLineNumber);s&&!s.isCollapsed&&t.push(s)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){let o=this._regions.toRegion(s);(!t||t(o,r))&&n.push(o),r++,s=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){let h=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!h.containedBy(o[o.length-1]);)o.pop();o.push(h),t(h,o.length)&&n.push(h)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){let l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&n.push(l);else break}return n}}function z6e(i,e,t){let n=[];for(let s of t){let r=i.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(n.push(r),e>1){let a=i.getRegionsInside(r,(l,h)=>l.isCollapsed!==o&&h<e);n.push(...a)}}}i.toggleCollapseState(n)}function f_(i,e,t=Number.MAX_VALUE,n){let s=[];if(n&&n.length>0)for(let r of n){let o=i.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){let a=i.getRegionsInside(o,(l,h)=>l.isCollapsed!==e&&h<t);s.push(...a)}}else{let r=i.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}i.toggleCollapseState(s)}function Mie(i,e,t,n){let s=[];for(let r of n){let o=i.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}i.toggleCollapseState(s)}function H6e(i,e,t){let n=[];for(let s of t){let r=i.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&n.push(r[0])}i.toggleCollapseState(n)}function U6e(i,e,t,n){let s=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function Rie(i,e,t){let n=[];for(let o of t)n.push(i.getAllRegionsAtLine(o,void 0)[0]);let s=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function wB(i,e,t){let n=i.textModel,s=i.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){let a=s.getStartLineNumber(o);e.test(n.getLineContent(a))&&r.push(s.toRegion(o))}i.toggleCollapseState(r)}function yB(i,e,t){let n=i.regions,s=[];for(let r=n.length-1;r>=0;r--)t!==n.isCollapsed(r)&&e===n.getType(r)&&s.push(n.toRegion(r));i.toggleCollapseState(s)}function $6e(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let s=n.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function j6e(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,s=0;for(n!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function q6e(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,s=0;if(n!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class G6e{constructor(e){this._updateEventEmitter=new H,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],n=0,s=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,h=a.getEndLineNumber(n);r<=l&&h<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===h?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new V(l,1,h,1))),r=l,o=h)}(e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new V(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return _U(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,s=null,r=o=>((!s||!K6e(o,s))&&(s=_U(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o],h=r(l.startLineNumber);h&&(l=l.setStartPosition(h,n.getLineMaxColumn(h)),t=!0);let c=r(l.endLineNumber);c&&(l=l.setEndPosition(c,n.getLineMaxColumn(c)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function K6e(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function _U(i,e){let t=PJ(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const Z6e=5e3,Y6e="indent";class Q6e{constructor(e){this.editorModel=e,this.id=Y6e}dispose(){}compute(e){let t=zi.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(J6e(this.editorModel,n,s))}}let X6e=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>$h||t>$h)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)t[r]=this._startIndexes[s],n[r]=this._endIndexes[s];return new X1(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const s=e.getOptions().tabSize;let r=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let h=this._startIndexes[a],c=e.getLineContent(h),u=oo.computeIndentLevel(c,s);(u<n||u===n&&t++<this._foldingRangesLimit)&&(r[l]=h,o[l]=this._endIndexes[a],l++)}return new X1(r,o)}}};function J6e(i,e,t,n=Z6e){const s=i.getOptions().tabSize;let r=new X6e(n),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=i.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let h=i.getLineCount();h>0;h--){let c=i.getLineContent(h),u=oo.computeIndentLevel(c,s),d=a[a.length-1];if(u===-1){e&&(d.endAbove=h);continue}let f;if(o&&(f=c.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,d=a[g],r.insertFirst(h,d.line,u),d.line=h,d.indent=u,d.endAbove=h;continue}}else{a.push({indent:-2,endAbove:h,line:h});continue}if(d.indent>u){do a.pop(),d=a[a.length-1];while(d.indent>u);let g=d.endAbove-1;g-h>=1&&r.insertFirst(h,g,u)}d.indent===u?d.endAbove=h:a.push({indent:u,endAbove:h,line:h})}return r.toIndentRanges(i)}const e8e=5e3,t8e={},Oie="syntax";class i8e{constructor(e,t,n,s=e8e){this.editorModel=e,this.providers=t,this.limit=s,this.id=Oie;for(const r of t)typeof r.onDidChange=="function"&&(this.disposables||(this.disposables=new ve),this.disposables.add(r.onDidChange(n)))}compute(e){return n8e(this.providers,this.editorModel,e).then(t=>t?Pie(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function n8e(i,e,t){let n=null,s=i.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,t8e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let h of a)h.start>0&&h.end>h.start&&h.end<=l&&n.push({start:h.start,end:h.end,rank:o,kind:h.kind})}},ta));return Promise.all(s).then(r=>n)}class s8e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,s){if(e>$h||t>$h)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=n,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new X1(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),r=[];for(let o=0,a=0;o<this._length;o++){let l=this._nestingLevels[o];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[o],s[a]=this._endIndexes[o],r[a]=this._types[o],a++)}return new X1(n,s,r)}}}function Pie(i,e){let t=i.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),n=new s8e(e),s,r=[];for(let o of t)if(!s)s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}n.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return n.toIndentRanges()}const Fie="init";class r8e{constructor(e,t,n,s){if(this.editorModel=e,this.id=Fie,t.length){let r=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(r)),this.timeout=setTimeout(n,s)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let s=this.editorModel.getDecorationRange(n);s&&t.push({start:s.startLineNumber,end:s.endLineNumber,rank:1})}return Promise.resolve(Pie(t,Number.MAX_VALUE))}}const CB=ls("folding-expanded",De.chevronDown,v("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),SB=ls("folding-collapsed",De.chevronRight,v("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class No{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?No.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?No.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:No.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?No.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:No.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}No.COLLAPSED_VISUAL_DECORATION=_t.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:fi.asClassName(SB)});No.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=_t.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:fi.asClassName(SB)});No.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=_t.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:fi.asClassName(CB)});No.EXPANDED_VISUAL_DECORATION=_t.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+fi.asClassName(CB)});No.HIDDEN_RANGE_DECORATION=_t.register({description:"folding-hidden-range-decoration",stickiness:1});var o8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},a8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Ss=new Ie("foldingEnabled",!1);let v0=class Bie extends ne{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new ve),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new No(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=Ss.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(s=>{if(s.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),s.hasChanged(98)||s.hasChanged(39)){const r=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=r.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=r.get(39),this.onModelContentChanged()}s.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),s.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),s.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(Bie.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===Oie||e.provider===Fie)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const s=this.getFoldingModel();s&&s.then(r=>{if(r){this._restoringViewState=!0;try{r.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,nt)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new W6e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new G6e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new X0(200),this.cursorChangedScheduler=new yi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(UR.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new Q6e(e),this._useFoldingProviders&&this.foldingModel){let t=UR.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new r8e(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new i8e(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=Wr(s=>t.compute(s));return n.then(s=>{if(s&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=s.setCollapsedAllOfType(Wa.Imports.value,!0);l&&(r=g0.capture(this.editor),this._currentModelHasFoldedImports=l)}let o=this.editor.getSelections(),a=o?o.map(l=>l.startLineNumber):[];e.update(s,a),r&&r.restore(this.editor)}return e})}).then(void 0,e=>(nt(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let s=[];for(let r of n){let o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(n[0].getPosition()))}}}).then(void 0,nt)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!(!r||r.startLineNumber!==n)){if(s){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||r.startColumn!==o.getLineMaxColumn(n))return}t.then(o=>{if(o){let a=o.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(s||l){let h=e.event.altKey,c=[];if(h){let u=f=>!f.containedBy(a)&&!a.containedBy(f),d=o.getRegionsInside(null,u);for(const f of d)f.isCollapsed&&c.push(f);c.length===0&&(c=d)}else{let u=e.event.middleButton||e.event.shiftKey;if(u)for(const d of o.getRegionsInside(a))d.isCollapsed===l&&c.push(d);(l||!u||c.length===0)&&c.push(a)}o.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,nt)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};v0.ID="editor.contrib.folding";v0=o8e([a8e(1,Xe)],v0);class Zs extends Si{runEditorCommand(e,t,n){let s=v0.get(t);if(!s)return;let r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(o=>{if(o){this.invoke(s,o,t,n);const a=t.getSelection();a&&s.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function Vie(i){if(!bs(i)){if(!Ps(i))return!1;const e=i;if(!bs(e.levels)&&!$f(e.levels)||!bs(e.direction)&&!Va(e.direction)||!bs(e.selectionLines)&&(!rJ(e.selectionLines)||!e.selectionLines.every($f)))return!1}return!0}class l8e extends Zs{constructor(){super({id:"editor.unfold",label:v("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Vie,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=s&&s.levels||1,o=this.getLineNumbers(s,n);s&&s.direction==="up"?Mie(t,!1,r,o):f_(t,!1,r,o)}}class h8e extends Zs{constructor(){super({id:"editor.unfoldRecursively",label:v("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2137),weight:100}})}invoke(e,t,n,s){f_(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class c8e extends Zs{constructor(){super({id:"editor.fold",label:v("foldAction.label","Fold"),alias:"Fold",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Vie,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=this.getLineNumbers(s,n);const o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?H6e(t,!0,r):a==="up"?Mie(t,!0,o||1,r):f_(t,!0,o||1,r)}}class u8e extends Zs{constructor(){super({id:"editor.toggleFold",label:v("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2090),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);z6e(t,1,s)}}class d8e extends Zs{constructor(){super({id:"editor.foldRecursively",label:v("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2135),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);f_(t,!0,Number.MAX_VALUE,s)}}class f8e extends Zs{constructor(){super({id:"editor.foldAllBlockComments",label:v("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())yB(t,Wa.Comment.value,!0);else{const s=n.getModel();if(!s)return;const r=zi.getComments(s.getLanguageId());if(r&&r.blockCommentStartToken){let o=new RegExp("^\\s*"+Fa(r.blockCommentStartToken));wB(t,o,!0)}}}}class g8e extends Zs{constructor(){super({id:"editor.foldAllMarkerRegions",label:v("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())yB(t,Wa.Region.value,!0);else{const s=n.getModel();if(!s)return;const r=zi.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);wB(t,o,!0)}}}}class p8e extends Zs{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:v("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())yB(t,Wa.Region.value,!1);else{const s=n.getModel();if(!s)return;const r=zi.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);wB(t,o,!1)}}}}class m8e extends Zs{constructor(){super({id:"editor.foldAllExcept",label:v("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2131),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);Rie(t,!0,s)}}class _8e extends Zs{constructor(){super({id:"editor.unfoldAllExcept",label:v("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2129),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);Rie(t,!1,s)}}class b8e extends Zs{constructor(){super({id:"editor.foldAll",label:v("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2069),weight:100}})}invoke(e,t,n){f_(t,!0)}}class v8e extends Zs{constructor(){super({id:"editor.unfoldAll",label:v("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2088),weight:100}})}invoke(e,t,n){f_(t,!1)}}class ig extends Zs{getFoldingLevel(){return parseInt(this.id.substr(ig.ID_PREFIX.length))}invoke(e,t,n){U6e(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}ig.ID_PREFIX="editor.foldLevel";ig.ID=i=>ig.ID_PREFIX+i;class w8e extends Zs{constructor(){super({id:"editor.gotoParentFold",label:v("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=$6e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class y8e extends Zs{constructor(){super({id:"editor.gotoPreviousFold",label:v("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=j6e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class C8e extends Zs{constructor(){super({id:"editor.gotoNextFold",label:v("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=q6e(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}Ks(v0.ID,v0);gt(l8e);gt(h8e);gt(c8e);gt(d8e);gt(b8e);gt(v8e);gt(f8e);gt(g8e);gt(p8e);gt(m8e);gt(_8e);gt(u8e);gt(w8e);gt(y8e);gt(C8e);for(let i=1;i<=7;i++)pee(new ig({id:ig.ID(i),label:v("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Ss,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2048|21+i),weight:100}}));const S8e=z("editor.foldBackground",{light:Qt(bu,.3),dark:Qt(bu,.3),hc:null},v("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),x8e=z("editorGutter.foldingControlForeground",{dark:xI,light:xI,hc:xI},v("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));oi((i,e)=>{const t=i.getColor(S8e);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(x8e);n&&e.addRule(`
		.monaco-editor .cldr${fi.asCSSSelector(CB)},
		.monaco-editor .cldr${fi.asCSSSelector(SB)} {
			color: ${n} !important;
		}
		`)});class es{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const s=n.options;if(s===es._FIND_MATCH_DECORATION||s===es._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){let o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],n=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,es._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,es._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new V(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,es._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let s=es._FIND_MATCH_DECORATION,r=[];if(e.length>1e3){s=es._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),h=this._editor.getLayoutInfo().height/a,c=Math.max(2,Math.ceil(3/h));let u=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;d+c>=p.startLineNumber?p.endLineNumber>d&&(d=p.endLineNumber):(r.push({range:new V(u,1,d,1),options:es._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,d=p.endLineNumber)}r.push({range:new V(u,1,d,1),options:es._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,es._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}es._CURRENT_FIND_MATCH_DECORATION=_t.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Sr(EF),position:Gl.Center},minimap:{color:Sr(Gee),position:Wl.Inline}});es._FIND_MATCH_DECORATION=_t.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Sr(EF),position:Gl.Center},minimap:{color:Sr(Gee),position:Wl.Inline}});es._FIND_MATCH_NO_OVERVIEW_DECORATION=_t.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});es._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_t.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Sr(EF),position:Gl.Center}});es._RANGE_HIGHLIGHT_DECORATION=_t.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});es._FIND_SCOPE_DECORATION=_t.register({description:"find-scope",className:"findScope",isWholeLine:!0});class D8e{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>V.compareRangesUsingStarts(o.range,a.range));let s=[],r=n[0];for(let o=1;o<n.length;o++)r.range.endLineNumber===n[o].range.startLineNumber&&r.range.endColumn===n[o].range.startColumn?(r.range=r.range.plusRange(n[o].range),r.text=r.text+n[o].text):(s.push(r),r=n[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Wie(i,e){if(i&&i[0]!==""){const t=bU(i,e,"-"),n=bU(i,e,"_");return t&&!n?vU(i,e,"-"):!t&&n?vU(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():WLe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function bU(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function vU(i,e,t){const n=e.split(t),s=i[0].split(t);let r="";return n.forEach((o,a)=>{r+=Wie([s[a]],o)+t}),r.slice(0,-1)}class wU{constructor(e){this.staticValue=e,this.kind=0}}class k8e{constructor(e){this.pieces=e,this.kind=1}}class w0{constructor(e){!e||e.length===0?this._state=new wU(""):e.length===1&&e[0].staticValue!==null?this._state=new wU(e[0].staticValue):this._state=new k8e(e)}static fromStaticValue(e){return new w0([Sf.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Wie(e,this._state.staticValue):this._state.staticValue;let n="";for(let s=0,r=this._state.pieces.length;s<r;s++){let o=this._state.pieces[s];if(o.staticValue!==null){n+=o.staticValue;continue}let a=w0._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let l=[],h=o.caseOps.length,c=0;for(let u=0,d=a.length;u<d;u++){if(c>=h){l.push(a.slice(u));break}switch(o.caseOps[c]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),c++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),c++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class Sf{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new Sf(e,-1,null)}static caseOps(e,t){return new Sf(null,e,t)}}class L8e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Sf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Sf.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Sf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new w0(this._result)}}function E8e(i){if(!i||i.length===0)return new w0(null);let e=[],t=new L8e(i);for(let n=0,s=i.length;n<s;n++){let r=i.charCodeAt(n);if(r===92){if(n++,n>=s)break;let o=i.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(n++,n>=s)break;let o=i.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<s){let l=i.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const Bg=new Ie("findWidgetVisible",!1),U2=new Ie("findInputFocussed",!1),xB=new Ie("replaceInputFocussed",!1),VC={primary:545,mac:{primary:2593}},WC={primary:565,mac:{primary:2613}},zC={primary:560,mac:{primary:2608}},HC={primary:554,mac:{primary:2602}},UC={primary:558,mac:{primary:2606}},Zt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},au=19999,A8e=240;class vv{constructor(e,t){this._toDispose=new ve,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new js,this._decorations=new es(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new yi(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,mt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},A8e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new V(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let s=this._findMatches(n,!1,au);this._decorations.set(s,n);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=PJ(s.map(l=>l.range),l=>V.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===1?(n===1?n=r.getLineCount():n--,s=r.getLineMaxColumn(n)):s--,new K(n,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const c=this._decorations.matchAfterPosition(e);c&&this._setCurrentFindMatch(c);return}if(this._decorations.getCount()<au){let c=this._decorations.matchBeforePosition(e);c&&c.isEmpty()&&c.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),c=this._decorations.matchBeforePosition(e)),c&&this._setCurrentFindMatch(c);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),s=vv._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());let{lineNumber:r,column:o}=e,a=this._editor.getModel(),l=new K(r,o),h=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);if(h&&h.range.isEmpty()&&h.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),h=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),!!h){if(!t&&!s.containsRange(h.range))return this._moveToPrevMatch(h.range.getStartPosition(),!0);this._setCurrentFindMatch(h.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,s=1):s++,new K(n,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<au){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,s=!1){if(this._cannotFind())return null;let r=this._decorations.getFindScope(),o=vv._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:l}=e,h=this._editor.getModel(),c=new K(a,l),u=h.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),u=h.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?E8e(this._state.replaceString):w0.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let s=e.buildReplaceString(n.matches,this._state.preserveCase),r=new Is(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new K(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const s=(e||[null]).map(r=>vv._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=au?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Dd(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const h=this._state.preserveCase;a.hasReplacementPatterns||h?l=r.replace(n,function(){return a.buildReplaceString(arguments,h)}):l=r.replace(n,a.buildReplaceString(null,h));let c=new ute(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=n.length;o<a;o++)s[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);let r=new D8e(this._editor.getSelection(),n.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(r=>new Ge(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)),s=this._editor.getSelection();for(let r=0,o=n.length;r<o;r++)if(n[r].equalsRange(s)){n=[s].concat(n.slice(0,r)).concat(n.slice(r+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const I8e={inputActiveOptionBorder:Q.fromHex("#007ACC00"),inputActiveOptionForeground:Q.fromHex("#FFFFFF"),inputActiveOptionBackground:Q.fromHex("#0E639C50")};class Cy extends uo{constructor(e){super(),this._onChange=this._register(new H),this.onChange=this._onChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},I8e),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...sr.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const T8e=v("caseDescription","Match Case"),N8e=v("wordsDescription","Match Whole Word"),M8e=v("regexDescription","Use Regular Expression");class zie extends Cy{constructor(e){super({icon:De.caseSensitive,title:T8e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Hie extends Cy{constructor(e){super({icon:De.wholeWord,title:N8e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Uie extends Cy{constructor(e){super({icon:De.regex,title:M8e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class $2 extends uo{constructor(e,t,n,s){super(),this._hideSoon=this._register(new yi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const r=s.getColorTheme().getColor(c3),o=s.getColorTheme().getColor(d3),a=s.getColorTheme().getColor(u3);this.caseSensitive=this._register(new zie({appendTitle:this._keybindingLabelFor(Zt.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Hie({appendTitle:this._keybindingLabelFor(Zt.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Uie({appendTitle:this._keybindingLabelFor(Zt.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let h=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,h=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,h=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,h=!0),!this._state.isRevealed&&h&&this._revealTemporarily()})),this._register(L5(this._domNode,l=>this._onMouseOut())),this._register(oe(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(s.getColorTheme()),this._register(s.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return $2.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(c3),inputActiveOptionForeground:e.getColor(d3),inputActiveOptionBackground:e.getColor(u3)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}$2.ID="editor.contrib.findOptionsWidget";oi((i,e)=>{const t=i.getColor(Ko);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(_u);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const s=i.getColor(h0);s&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(Gi);r&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)});function $C(i,e){return i===1?!0:i===2?!1:e}class R8e extends ne{constructor(){super(),this._onFindReplaceStateChange=this._register(new H),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return $C(this._isRegexOverride,this._isRegex)}get wholeWord(){return $C(this._wholeWordOverride,this._wholeWord)}get matchCase(){return $C(this._matchCaseOverride,this._matchCase)}get preserveCase(){return $C(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof n<"u"&&(V.equalsRange(this._currentMatch,n)||(this._currentMatch=n,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,n=!0){var s;let r={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,l=this.wholeWord,h=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((s=e.searchScope)===null||s===void 0)&&s.every(u=>{var d;return(d=this._searchScope)===null||d===void 0?void 0:d.some(f=>!V.equalsRange(f,u))})||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),l!==this.wholeWord&&(o=!0,r.wholeWord=!0),h!==this.matchCase&&(o=!0,r.matchCase=!0),c!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=au}}const O8e=v("defaultLabel","input");class P8e extends uo{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new H),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new H),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new H),this._onKeyUp=this._register(new H),this._onCaseSensitiveKeyDown=this._register(new H),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new H),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||O8e,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendCaseSensitiveLabel||"",o=s.appendWholeWordsLabel||"",a=s.appendRegexLabel||"",l=s.history||[],h=!!s.flexibleHeight,c=!!s.flexibleWidth,u=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new xie(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:s.showHistoryHint,flexibleHeight:h,flexibleWidth:c,flexibleMaxHeight:u})),this.regex=this._register(new Uie({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new Hie({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new zie({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let p=d.indexOf(document.activeElement);if(p>=0){let m=-1;g.equals(17)?m=(p+1)%d.length:g.equals(15)&&(p===0?m=d.length-1:m=p-1),g.equals(9)?(d[p].blur(),this.inputBox.focus()):m>=0&&d[m].focus(),Ot.stop(g,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.caseSensitive.domNode),f.appendChild(this.wholeWords.domNode),f.appendChild(this.regex.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this._register(oe(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(oe(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const F8e=v("defaultLabel","input"),B8e=v("label.preserveCaseCheckbox","Preserve Case");class V8e extends Cy{constructor(e){super({icon:De.preserveCase,title:B8e+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class W8e extends uo{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new H),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new H),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new H),this._onInput=this._register(new H),this._onKeyUp=this._register(new H),this._onPreserveCaseKeyDown=this._register(new H),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||F8e,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,h=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new xie(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:h})),this.preserveCase=this._register(new V8e({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(d=>{this._onDidOptionChange.fire(d),!d&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(d=>{this._onPreserveCaseKeyDown.fire(d)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let c=[this.preserveCase.domNode];this.onkeydown(this.domNode,d=>{if(d.equals(15)||d.equals(17)||d.equals(9)){let f=c.indexOf(document.activeElement);if(f>=0){let g=-1;d.equals(17)?g=(f+1)%c.length:d.equals(15)&&(f===0?g=c.length-1:g=f-1),d.equals(9)?(c[f].blur(),this.inputBox.focus()):g>=0&&c[g].focus(),Ot.stop(d,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}class xo{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),s;if(s=xo._table[n],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(xo.isDigitCharacter(n)){s=8;do t+=1,n=this.value.charCodeAt(e+t);while(xo.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}if(xo.isVariableCharacter(n)){s=9;do n=this.value.charCodeAt(e+ ++t);while(xo.isVariableCharacter(n)||xo.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof xo._table[n]>"u"&&!xo.isDigitCharacter(n)&&!xo.isVariableCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}}xo._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class g_{constructor(){this._children=[]}appendChild(e){return e instanceof nr&&this._children[this._children.length-1]instanceof nr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,s=n.children.indexOf(e),r=n.children.slice(0);r.splice(s,1,...t),n._children=r,function o(a,l){for(const h of a)h.parent=l,o(h.children,h)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof j2)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class nr extends g_{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new nr(this.value)}}class $ie extends g_{}class Mo extends $ie{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Sy?this._children[0]:void 0}clone(){let e=new Mo(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Sy extends g_{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof nr&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Sy;return this.options.forEach(e.appendChild,e),e}}class DB extends g_{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,s=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(r=>r instanceof fa&&!!r.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const n of this._children)if(n instanceof fa){let s=e[n.index]||"";s=n.resolve(s),t+=s}else t+=n.toString();return t}toString(){return""}clone(){let e=new DB;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class fa extends g_{constructor(e,t,n,s){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,s)=>s===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new fa(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class J1 extends $ie{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new nr(t)],!0):!1}clone(){const e=new J1(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function yU(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class j2 extends g_{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Mo&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(s=>s===e?(n=!0,!1):(t+=s.len(),!0)),n?t:-1}fullLen(e){let t=0;return yU([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Mo&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof J1&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new j2;return this._children=this.children.map(t=>t.clone()),e}walk(e){yU(this.children,e)}}class q2{constructor(){this._scanner=new xo,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const s=new j2;for(;this._parse(s););const r=new Map,o=[];let a=0;s.walk(l=>(l instanceof Mo&&(a+=1,l.isFinalTabstop?r.set(0,void 0):!r.has(l.index)&&l.children.length>0?r.set(l.index,l.children):o.push(l)),!0));for(const l of o){const h=r.get(l.index);if(h){const c=new Mo(l.index);c.transform=l.transform;for(const u of h)c.appendChild(u.clone());s.replace(l,[c])}}return n||(n=a>0&&t),!r.has(0)&&n&&s.appendChild(new Mo(0)),s}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new nr(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Mo(Number(t)):new J1(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const r=new Mo(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nr("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new Sy;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;n.push(s)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new nr(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const r=new J1(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nr("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseTransform(e){let t=new DB,n="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,n+=r;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new nr(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let s=this._accept(8,!0);if(s)if(n){if(this._accept(4))return e.appendChild(new fa(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new fa(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){let r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new fa(Number(s),r)),!0)}else if(this._accept(11)){let r=this._until(4);if(r)return e.appendChild(new fa(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){let r=this._until(4);if(r)return e.appendChild(new fa(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){let r=this._until(1);if(r){let o=this._until(4);if(o)return e.appendChild(new fa(Number(s),void 0,r,o)),!0}}else{let r=this._until(4);if(r)return e.appendChild(new fa(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new nr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}var wv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const ht={Visible:new Ie("suggestWidgetVisible",!1,v("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new Ie("suggestWidgetDetailsVisible",!1,v("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Ie("suggestWidgetMultipleSuggestions",!1,v("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Ie("suggestionMakesTextEdit",!0,v("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Ie("acceptSuggestionOnEnter",!0,v("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Ie("suggestionHasInsertAndReplaceRange",!1,v("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Ie("suggestionInsertMode",void 0,{type:"string",description:v("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Ie("suggestionCanResolve",!1,v("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},$u=new Ye("suggestWidgetStatusBar");class z8e{constructor(e,t,n,s){this.position=e,this.completion=t,this.container=n,this.provider=s,this.isInvalid=!1,this.score=Ta.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),V.isIRange(t.range)?(this.editStart=new K(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new K(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new K(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||V.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new K(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new K(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new K(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||V.spansMultipleLines(t.range.insert)||V.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return wv(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{sd(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class Ak{constructor(e=2,t=new Set,n=new Set,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=s}}Ak.default=new Ak;let H8e;function U8e(){return H8e}class $8e{constructor(e,t,n,s){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=s}}function jie(i,e,t=Ak.default,n={triggerKind:0},s=ri.None){return wv(this,void 0,void 0,function*(){const r=new hc(!0);e=e.clone();const o=i.getWordAtPosition(e),a=o?new V(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):V.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},h=[],c=new ve,u=[];let d=!1;const f=(p,m,b)=>{var _,w,y;if(m){for(let x of m.suggestions)if(!t.kindFilter.has(x.kind)){if(!t.showDeprecated&&(!((_=x==null?void 0:x.tags)===null||_===void 0)&&_.includes(1)))continue;x.range||(x.range=l),x.sortText||(x.sortText=typeof x.label=="string"?x.label:x.label.label),!d&&x.insertTextRules&&x.insertTextRules&4&&(d=q2.guessNeedsClipboard(x.insertText)),h.push(new z8e(e,x,m,p))}xX(m)&&c.add(m),u.push({providerName:(w=p._debugDisplayName)!==null&&w!==void 0?w:"unkown_provider",elapsedProvider:(y=m.duration)!==null&&y!==void 0?y:-1,elapsedOverall:b.elapsed()})}},g=(()=>wv(this,void 0,void 0,function*(){}))();for(let p of ba.orderedGroups(i)){let m=h.length;if(yield Promise.all(p.map(b=>wv(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(b)))try{const _=new hc(!0),w=yield b.provideCompletionItems(i,e,n,s);f(b,w,_)}catch(_){ta(_)}}))),m!==h.length||s.isCancellationRequested)break}return yield g,s.isCancellationRequested?(c.dispose(),Promise.reject(Q0())):new $8e(h.sort(qie(t.snippetSortOrder)),d,{entries:u,elapsed:r.elapsed()},c)})}function kB(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function j8e(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return kB(i,e)}function q8e(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return kB(i,e)}const G2=new Map;G2.set(0,j8e);G2.set(2,q8e);G2.set(1,kB);function qie(i){return G2.get(i)}Ft.registerCommand("_executeCompletionItemProvider",(i,...e)=>wv(void 0,void 0,void 0,function*(){const[t,n,s,r]=e;$i(Ke.isUri(t)),$i(K.isIPosition(n)),$i(typeof s=="string"||!s),$i(typeof r=="number"||!r);const o=yield i.get(Kl).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],h=yield jie(o.object.textEditorModel,K.lift(n),void 0,{triggerCharacter:s,triggerKind:s?1:0});for(const c of h.items)l.length<(r??0)&&l.push(c.resolve(ri.None)),a.incomplete=a.incomplete||c.container.incomplete,a.suggestions.push(c.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>h.disposable.dispose(),100)}}finally{o.dispose()}}));const f4=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};ba.register("*",f4);function G8e(i,e){setTimeout(()=>{f4.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(f4))},0)}var Gie=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Kie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ew="historyNavigationWidget",Zie="historyNavigationForwardsEnabled",Yie="historyNavigationBackwardsEnabled";function K8e(i,e,t){new Ie(t,e).bindTo(i)}function Z8e(i,e){return i.createScoped(e.target)}function Qie(i,e){return i.getContext(document.activeElement).getValue(e)}function Xie(i,e){const t=Z8e(i,e);K8e(t,e,ew);const n=new Ie(Zie,!0).bindTo(t),s=new Ie(Yie,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:s}}let g4=class extends P8e{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(Xie(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};g4=Gie([Kie(3,Xe)],g4);let p4=class extends W8e{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(Xie(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};p4=Gie([Kie(3,Xe)],p4);ys.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Ae.and(Ae.has(ew),Ae.equals(Yie,!0),ht.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=Qie(i.get(Xe),ew);e&&e.historyNavigator.showPreviousValue()}});ys.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Ae.and(Ae.has(ew),Ae.equals(Zie,!0),ht.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=Qie(i.get(Xe),ew);e&&e.historyNavigator.showNextValue()}});function CU(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var Y8e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const Q8e=ls("find-selection",De.selection,v("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),SU=ls("find-collapsed",De.chevronRight,v("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),xU=ls("find-expanded",De.chevronDown,v("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),X8e=ls("find-replace",De.replace,v("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),J8e=ls("find-replace-all",De.replaceAll,v("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),e7e=ls("find-previous-match",De.arrowUp,v("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),t7e=ls("find-next-match",De.arrowDown,v("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),i7e=v("label.find","Find"),n7e=v("placeholder.find","Find"),s7e=v("label.previousMatchButton","Previous Match"),r7e=v("label.nextMatchButton","Next Match"),o7e=v("label.toggleSelectionFind","Find in Selection"),a7e=v("label.closeButton","Close"),l7e=v("label.replace","Replace"),h7e=v("placeholder.replace","Replace"),c7e=v("label.replaceButton","Replace"),u7e=v("label.replaceAllButton","Replace All"),d7e=v("label.toggleReplaceButton","Toggle Replace"),f7e=v("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",au),g7e=v("label.matchesLocation","{0} of {1}"),DU=v("label.noResults","No results"),hl=419,p7e=275,m7e=p7e-54;let G_=69;const _7e=33,kU="ctrlEnterReplaceAll.windows.donotask",LU=vt?256:2048;class pT{constructor(e){this.afterLineNumber=e,this.heightInPx=_7e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function EU(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function AU(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class K2 extends uo{constructor(e,t,n,s,r,o,a,l,h){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=h,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(kU,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new X0(500),this._register(xt(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(c=>this._onStateChanged(c))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(c=>{if(c.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),c.hasChanged(129)&&this._tryUpdateWidgetWidth(),c.hasChanged(2)&&this.updateAccessibilitySupport(),c.hasChanged(35)){const u=this._codeEditor.getOption(35).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new pT(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>Y8e(this,void 0,void 0,function*(){if(this._isVisible){let c=yield this._controller.getGlobalBufferTerm();c&&c!==this._state.searchString&&(this._state.change({searchString:c},!1),this._findInput.select())}}))),this._findInputFocused=U2.bindTo(o),this._findFocusTracker=this._register(Xm(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=xB.bindTo(o),this._replaceFocusTracker=this._register(Xm(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new pT(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(c=>{if(c.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return K2.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=So(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,nt)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=G_+"px",this._state.matchesCount>=au?this._matchesCount.title=f7e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=au&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=Lo(g7e,n,t)}else e=DU;this._matchesCount.appendChild(document.createTextNode(e)),Eg(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),G_=Math.max(G_,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===DU)return n===""?v("ariaSearchNoResultEmpty","{0} found",e):v("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const s=v("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return v("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const s=Un(n),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=UX(this._domNode).left;o>l&&(t=!1);const h=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(h?h.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(s=>{n.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new pT(0));const n=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===n.heightInPx)return;let o=r-n.heightInPx;n.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(74).top,r<=0)return;n.heightInPx=r,this._viewZoneId=s.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(c3),inputActiveOptionBackground:e.getColor(u3),inputActiveOptionForeground:e.getColor(d3),inputBackground:e.getColor(Ree),inputForeground:e.getColor(Oee),inputBorder:e.getColor(Pee),inputValidationInfoBackground:e.getColor(SF),inputValidationInfoForeground:e.getColor(xF),inputValidationInfoBorder:e.getColor(DF),inputValidationWarningBackground:e.getColor(Fee),inputValidationWarningForeground:e.getColor(Bee),inputValidationWarningBorder:e.getColor(Vee),inputValidationErrorBackground:e.getColor(Wee),inputValidationErrorForeground:e.getColor(zee),inputValidationErrorBorder:e.getColor(Hee)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!D5(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&So(this._domNode)>hl){this._domNode.style.maxWidth=`${n-28-s-15}px`,this._replaceInput.width=So(this._findInput.domNode);return}if(hl+28+s>=n&&(o=!0),hl+28+s-G_>=n&&(a=!0),hl+28+s-G_>=n+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${n-28-s-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=So(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!V.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(LU|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return EU(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return AU(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(LU|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{qn&&lm&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(v("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(kU,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return EU(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return AU(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new g4(null,this._contextViewProvider,{width:m7e,label:i7e,placeholder:n7e,appendCaseSensitiveLabel:this._keybindingLabelFor(Zt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Zt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Zt.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(h){return{content:h.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>CU(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Ws&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new fp({label:s7e+this._keybindingLabelFor(Zt.PreviousMatchFindAction),icon:e7e,onTrigger:()=>{this._codeEditor.getAction(Zt.PreviousMatchFindAction).run().then(void 0,nt)}})),this._nextBtn=this._register(new fp({label:r7e+this._keybindingLabelFor(Zt.NextMatchFindAction),icon:t7e,onTrigger:()=>{this._codeEditor.getAction(Zt.NextMatchFindAction).run().then(void 0,nt)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Cy({icon:Q8e,title:o7e+this._keybindingLabelFor(Zt.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(h=>(h.endColumn===1&&h.endLineNumber>h.startLineNumber&&(h=h.setEndPosition(h.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(h.endLineNumber-1))),h.isEmpty()?null:h)).filter(h=>!!h),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new fp({label:a7e+this._keybindingLabelFor(Zt.CloseFindWidgetCommand),icon:rOe,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),s.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new p4(null,void 0,{label:l7e,placeholder:h7e,appendPreserveCaseLabel:this._keybindingLabelFor(Zt.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>CU(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new fp({label:c7e+this._keybindingLabelFor(Zt.ReplaceOneAction),icon:X8e,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new fp({label:u7e+this._keybindingLabelFor(Zt.ReplaceAllAction),icon:J8e,onTrigger:()=>{this._controller.replaceAll()}}));let r=document.createElement("div");r.className="replace-part",r.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",r.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new fp({label:d7e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=So(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${hl}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(r),this._resizeSash=new zn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=hl;this._register(this._resizeSash.onDidStart(()=>{a=So(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let h=a+l.startX-l.currentX;if(h<hl)return;const c=parseFloat(A5(this._domNode).maxWidth)||0;h>c||(this._domNode.style.width=`${h}px`,this._isReplaceVisible&&(this._replaceInput.width=So(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=So(this._domNode);if(l<hl)return;let h=hl;if(!this._resized||l===hl){const c=this._codeEditor.getLayoutInfo();h=c.width-28-c.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${h}px`,this._isReplaceVisible&&(this._replaceInput.width=So(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}K2.ID="editor.contrib.findWidget";class fp extends uo{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+fi.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...fi.asClassNameArray(SU)),this._domNode.classList.add(...fi.asClassNameArray(xU))):(this._domNode.classList.remove(...fi.asClassNameArray(xU)),this._domNode.classList.add(...fi.asClassNameArray(SU)))}}oi((i,e)=>{const t=(g,p)=>{p&&e.addRule(`.monaco-editor ${g} { background-color: ${p}; }`)};t(".findMatch",i.getColor(g3)),t(".currentFindMatch",i.getColor(kNe)),t(".findScope",i.getColor(LNe));const n=i.getColor(Ko);t(".find-widget",n);const s=i.getColor(h0);s&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(ANe);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const o=i.getColor(ENe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(INe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const l=i.getColor(Gi);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const h=i.getColor(_u);h&&e.addRule(`.monaco-editor .find-widget { color: ${h}; }`);const c=i.getColor(aNe);c&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${c}; }`);const u=i.getColor(mNe);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const g=i.getColor(_f);g&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`)}const d=i.getColor(uMe);d&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${d} !important;
		}
	`);const f=i.getColor(Vu);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var Jie=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ml=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},y0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const b7e=524288;function m4(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const s=i.getConfiguredWordAtPosition(n.getStartPosition());if(s&&t===!1)return s.word}else if(i.getModel().getValueLengthInRange(n)<b7e)return i.getModel().getValueInRange(n)}return null}let Pr=class ene extends ne{constructor(e,t,n,s){super(),this._editor=e,this._findWidgetVisible=Bg.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=s,this._updateHistoryDelayer=new X0(500),this._state=this._register(new R8e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(ene.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!U2.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Fa(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return y0(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){let n=m4(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?t.searchString=Fa(n):t.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let n=m4(this._editor,e.seedSearchStringFromSelection);n&&(t.searchString=n)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let n=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(t.searchString=n)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let n=this._editor.getSelections();n.some(s=>!s.isEmpty())&&(t.searchScope=n)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new vv(this._editor,this._state))})}start(e){return this._start(e)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return y0(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Pr.ID="editor.contrib.findController";Pr=Jie([ml(1,Xe),ml(2,Fg),ml(3,Mg)],Pr);let _4=class extends Pr{constructor(e,t,n,s,r,o,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return y0(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const n=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!n&&n.startLineNumber!==n.endLineNumber;break}e.updateSearchScope=s,yield t._start.call(this,e),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new K2(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new $2(this._editor,this._state,this._keybindingService,this._themeService))}};_4=Jie([ml(1,Tg),ml(2,Xe),ml(3,Zi),ml(4,ci),ml(5,Yn),ml(6,Fg),ml(7,Mg)],_4);const v7e=gee(new fee({id:Zt.StartFindAction,label:v("startFindAction","Find"),alias:"Find",precondition:Ae.or(Z.focus,Ae.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ye.MenubarEditMenu,group:"3_find",title:v({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));v7e.addImplementation(0,(i,e,t)=>{const n=Pr.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});class w7e extends Si{constructor(){super({id:Zt.StartFindWithSelection,label:v("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return y0(this,void 0,void 0,function*(){let n=Pr.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class tne extends Si{run(e,t){return y0(this,void 0,void 0,function*(){let n=Pr.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class y7e extends tne{constructor(){super({id:Zt.NextMatchFindAction,label:v("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:Z.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Ae.and(Z.focus,U2),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class C7e extends tne{constructor(){super({id:Zt.PreviousMatchFindAction,label:v("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:Z.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Ae.and(Z.focus,U2),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class ine extends Si{run(e,t){return y0(this,void 0,void 0,function*(){let n=Pr.get(t);if(!n)return;const s=t.getOption(35).seedSearchStringFromSelection==="selection";let r=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(r=m4(t,"single",s)),r&&n.setSearchString(r),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:s,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class S7e extends ine{constructor(){super({id:Zt.NextSelectionMatchFindAction,label:v("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class x7e extends ine{constructor(){super({id:Zt.PreviousSelectionMatchFindAction,label:v("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const D7e=gee(new fee({id:Zt.StartFindReplaceAction,label:v("startReplace","Replace"),alias:"Replace",precondition:Ae.or(Z.focus,Ae.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ye.MenubarEditMenu,group:"3_find",title:v({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));D7e.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Pr.get(e);if(!n)return!1;const s=e.getSelection(),r=n.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});Ks(Pr.ID,_4);gt(w7e);gt(y7e);gt(C7e);gt(S7e);gt(x7e);const Ja=ho.bindToContribution(Pr.get);Se(new Ja({id:Zt.CloseFindWidgetCommand,precondition:Bg,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:Ae.and(Z.focus,Ae.not("isComposing")),primary:9,secondary:[1033]}}));Se(new Ja({id:Zt.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:VC.primary,mac:VC.mac,win:VC.win,linux:VC.linux}}));Se(new Ja({id:Zt.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:WC.primary,mac:WC.mac,win:WC.win,linux:WC.linux}}));Se(new Ja({id:Zt.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:zC.primary,mac:zC.mac,win:zC.win,linux:zC.linux}}));Se(new Ja({id:Zt.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:HC.primary,mac:HC.mac,win:HC.win,linux:HC.linux}}));Se(new Ja({id:Zt.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:UC.primary,mac:UC.mac,win:UC.win,linux:UC.linux}}));Se(new Ja({id:Zt.ReplaceOneAction,precondition:Bg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:3094}}));Se(new Ja({id:Zt.ReplaceOneAction,precondition:Bg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:Ae.and(Z.focus,xB),primary:3}}));Se(new Ja({id:Zt.ReplaceAllAction,precondition:Bg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:2563}}));Se(new Ja({id:Zt.ReplaceAllAction,precondition:Bg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:Ae.and(Z.focus,xB),primary:void 0,mac:{primary:2051}}}));Se(new Ja({id:Zt.SelectAllMatchesAction,precondition:Bg,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:Z.focus,primary:515}}));function p_(i,e){const t=e.filter(n=>!i.find(s=>s.equals(n)));if(t.length>=1){const n=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),s=t.length===1?v("cursorAdded","Cursor added: {0}",n):v("cursorsAdded","Cursors added: {0}",n);HD(s)}}class k7e extends Si{constructor(){super({id:"editor.action.insertCursorAbove",label:v("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:Z.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,Cn.addCursorUp(r,o,s)),r.revealTopMostCursor(n.source),p_(o,r.getCursorStates())}}class L7e extends Si{constructor(){super({id:"editor.action.insertCursorBelow",label:v("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:Z.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,Cn.addCursorDown(r,o,s)),r.revealBottomMostCursor(n.source),p_(o,r.getCursorStates())}}class E7e extends Si{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:v("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:Z.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){let r=t.getLineMaxColumn(s);n.push(new Ge(s,r,s,r))}e.endColumn>1&&n.push(new Ge(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),s=t.getSelections(),r=t._getViewModel(),o=r.getCursorStates();let a=[];s.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),p_(o,r.getCursorStates())}}class A7e extends Si{constructor(){super({id:"editor.action.addCursorsToBottom",label:v("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),s=t.getModel().getLineCount();let r=[];for(let l=n[0].startLineNumber;l<=s;l++)r.push(new Ge(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();r.length>0&&t.setSelections(r),p_(a,o.getCursorStates())}}class I7e extends Si{constructor(){super({id:"editor.action.addCursorsToTop",label:v("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let s=[];for(let a=n[0].startLineNumber;a>=1;a--)s.push(new Ge(a,n[0].startColumn,a,n[0].endColumn));const r=t._getViewModel(),o=r.getCursorStates();s.length>0&&t.setSelections(s),p_(o,r.getCursorStates())}}class jC{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class tw{constructor(e,t,n,s,r,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=s,this.wholeWord=r,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new tw(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let s=!1,r,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,r=!0,o=!0):(r=n.wholeWord,o=n.matchCase);const l=e.getSelection();let h,c=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;h=u.word,c=new Ge(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else h=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new tw(e,t,s,h,r,o,c)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new jC(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new jC(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ge(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new jC(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new jC(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ge(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}}class ng extends ne{constructor(e){super(),this._sessionDispose=this._register(new ve),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(ng.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=tw.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new Ge(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!nne(this._editor.getModel(),t,s)){const o=this._editor.getModel();let a=[];for(let l=0,h=t.length;l<h;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const s=n.searchScope;let r=[];t.forEach(o=>{s.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&r.push(o)})}),t=r}if(t.length>0){const s=this._editor.getSelection();for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.range.intersectRanges(s)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new Ge(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}}ng.ID="editor.contrib.multiCursorController";class m_ extends Si{run(e,t){const n=ng.get(t);if(!n)return;const s=Pr.get(t);if(!s)return;const r=t._getViewModel();if(r){const o=r.getCursorStates();this._run(n,s),p_(o,r.getCursorStates())}}}class T7e extends m_{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:v("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:2082,weight:100},menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class N7e extends m_{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:v("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class M7e extends m_{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:v("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:$s(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class R7e extends m_{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:v("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class O7e extends m_{constructor(){super({id:"editor.action.selectHighlights",label:v("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:3114,weight:100},menuOpts:{menuId:Ye.MenubarSelectionMenu,group:"3_multi",title:v({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class P7e extends m_{constructor(){super({id:"editor.action.changeAll",label:v("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Ae.and(Z.writable,Z.editorTextFocus),kbOpts:{kbExpr:Z.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class IU{constructor(e,t,n,s){this.searchText=e,this.matchCase=t,this.wordSeparators=n,this.modelVersionId=s}static softEquals(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId}}class ic extends ne{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new yi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Pr.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(ic._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e||!t.hasModel())return null;const n=t.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=ng.get(t);if(!s)return null;const r=Pr.get(t);if(!r)return null;let o=s.getSession(r);if(!o){const h=t.getSelections();if(h.length>1){const u=r.getState().matchCase;if(!nne(t.getModel(),h,u))return null}o=tw.create(t,r)}if(!o||o.currentMatch||/^[ \t]+$/.test(o.searchText)||o.searchText.length>200)return null;const a=r.getState(),l=a.matchCase;if(a.isRevealed){let h=a.searchString;l||(h=h.toLowerCase());let c=o.searchText;if(l||(c=c.toLowerCase()),h===c&&o.matchCase===a.matchCase&&o.wholeWord===a.wholeWord&&!a.isRegex)return null}return new IU(o.searchText,o.matchCase,o.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(IU.softEquals(this.state,e)){this.state=e;return}if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=xD.has(t)&&this.editor.getOption(71);let s=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(l=>l.range);s.sort(V.compareRangesUsingStarts);let r=this.editor.getSelections();r.sort(V.compareRangesUsingStarts);let o=[];for(let l=0,h=0,c=s.length,u=r.length;l<c;){const d=s[l];if(h>=u)o.push(d),l++;else{const f=V.compareRangesUsingStarts(d,r[h]);f<0?((r[h].isEmpty()||!V.areIntersecting(d,r[h]))&&o.push(d),l++):(f>0||l++,h++)}}const a=o.map(l=>({range:l,options:n?ic._SELECTION_HIGHLIGHT:ic._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}ic.ID="editor.contrib.selectionHighlighter";ic._SELECTION_HIGHLIGHT_OVERVIEW=_t.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Sr(_Me),position:Wl.Inline},overviewRuler:{color:Sr(mMe),position:Gl.Center}});ic._SELECTION_HIGHLIGHT=_t.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function nne(i,e,t){const n=TU(i,e[0],!t);for(let s=1,r=e.length;s<r;s++){const o=e[s];if(o.isEmpty())return!1;const a=TU(i,o,!t);if(n!==a)return!1}return!0}function TU(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}Ks(ng.ID,ng);Ks(ic.ID,ic);gt(k7e);gt(L7e);gt(E7e);gt(T7e);gt(N7e);gt(M7e);gt(R7e);gt(O7e);gt(P7e);gt(A7e);gt(I7e);const F7e=z("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},v("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class B7e extends Si{constructor(){super({id:"editor.action.jumpToBracket",label:v("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:Z.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=Na.get(t);n&&n.jumpToBracket()}}class V7e extends Si{constructor(){super({id:"editor.action.selectToBracket",label:v("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const s=Na.get(t);if(!s)return;let r=!0;n&&n.selectBrackets===!1&&(r=!1),s.selectToBracket(r)}}class W7e{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Na extends ne{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new yi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Na.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const s=n.getStartPosition(),r=e.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.findEnclosingBrackets(s);if(a)o=a[0].getStartPosition();else{const l=e.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Ge(o.lineNumber,o.column,o.lineNumber,o.column):new Ge(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.matchBracket(r);if(!o&&(o=t.findEnclosingBrackets(r),!o)){const h=t.findNextBracket(r);h&&h.range&&(o=t.matchBracket(h.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(V.compareRangesUsingStarts);const[h,c]=o;if(a=e?h.getStartPosition():h.getEndPosition(),l=e?c.getEndPosition():c.getStartPosition(),c.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&n.push(new Ge(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let s=n.brackets;s&&(e[t++]={range:s[0],options:n.options},e[t++]={range:s[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let s=[];this._lastVersionId===n&&(s=this._lastBracketsData);let r=[],o=0;for(let u=0,d=e.length;u<d;u++){let f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(K.compare);let a=[],l=0,h=0,c=s.length;for(let u=0,d=r.length;u<d;u++){let f=r[u];for(;h<c&&s[h].position.isBefore(f);)h++;if(h<c&&s[h].position.equals(f))a[l++]=s[h];else{let g=t.matchBracket(f),p=Na._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.findEnclosingBrackets(f,20),p=Na._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new W7e(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=n}}Na.ID="editor.contrib.bracketMatchingController";Na._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=_t.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Sr(F7e),position:Gl.Center}});Na._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=_t.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Ks(Na.ID,Na);gt(V7e);gt(B7e);oi((i,e)=>{const t=i.getColor(BMe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(VMe);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Aa.appendMenuItem(Ye.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:v({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});function b4(i,e){return!!i[e]}class mT{constructor(e,t){this.target=e.target,this.hasTriggerModifier=b4(e.event,t.triggerModifier),this.hasSideBySideModifier=b4(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class NU{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=b4(e,t.triggerModifier)}}class qC{constructor(e,t,n,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function MU(i){return i==="altKey"?vt?new qC(57,"metaKey",6,"altKey"):new qC(5,"ctrlKey",6,"altKey"):vt?new qC(6,"altKey",57,"metaKey"):new qC(6,"altKey",5,"ctrlKey")}class z7e extends ne{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new H),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new H),this.onExecute=this._onExecute.event,this._onCancel=this._register(new H),this.onCancel=this._onCancel.event,this._editor=e,this._opts=MU(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=MU(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new mT(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new mT(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new mT(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new NU(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new NU(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var H7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let sg=class extends F1{constructor(e,t,n,s,r,o,a,l,h,c){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},s,r,o,a,l,h,c),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(u=>this._onParentConfigurationChanged(u)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Qa(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};sg=H7e([yd(3,qt),yd(4,li),yd(5,An),yd(6,Xe),yd(7,ci),yd(8,Yn),yd(9,fr)],sg);const RU=new Q(new ct(0,122,204)),U7e={showArrow:!0,showFrame:!0,className:"",frameColor:RU,arrowColor:RU,keepEditorSelection:!1},$7e="vs.editor.contrib.zoneWidget";class j7e{constructor(e,t,n,s,r,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=s,this._onDomNodeTop=r,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class q7e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class Z2{constructor(e){this._editor=e,this._ruleName=Z2._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),_D(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){_D(this._ruleName),LR(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:V.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}Z2._IdGenerator=new pB(".arrow-decoration-");class G7e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new ve,this.container=null,this._isShowing=!1,this.editor=e,this.options=Kc(t),Qa(this.options,U7e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const s=this._getWidth(n);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Z2(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=V.isIRange(e)?V.lift(e):V.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:_t.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),s=this.editor.getLayoutInfo(),r=this._getWidth(s);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let h=0,c=0;if(this._arrow&&this.options.showArrow&&(h=Math.round(a/3),this._arrow.height=h,this._arrow.show(n)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new j7e(o,n.lineNumber,n.column,t,g=>this._onViewZoneTop(g),g=>this._onViewZoneHeight(g)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new q7e($7e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}let u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=h+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,r),this.options.keepEditorSelection||this.editor.setSelection(e);const d=this.editor.getModel();if(d){const f=e.endLineNumber+1;f<=d.getLineCount()?this.revealLine(f,!1):this.revealLine(d.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new zn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),s=n<0?Math.ceil(n):Math.floor(n),r=e.heightInLines+s;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class K7e extends r0{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new H),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ae(e,_e(".monaco-dropdown")),this._label=ae(this._element,_e(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[Oe.CLICK,Oe.MOUSE_DOWN,Yt.Tap])this._register(oe(this.element,r,o=>Ot.stop(o,!0)));for(const r of[Oe.MOUSE_DOWN,Yt.Tap])this._register(oe(this._label,r,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(oe(this._label,Oe.KEY_UP,r=>{const o=new pi(r);(o.equals(3)||o.equals(10))&&(Ot.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(Mt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Z7e extends K7e{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class sne extends Cf{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new H),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=ae(r,_e("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new Z7e(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var LB=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function Y7e(i,e,t,n,s,r,o){const a=i.getActions(e);return X7e(a,t,!1,typeof n=="string"?h=>h===n:n,s,r,o),Q7e(a)}function Q7e(i){const e=new ve;for(const[,t]of i)for(const n of t)e.add(n);return e}function X7e(i,e,t,n=a=>a==="navigation",s=Number.MAX_SAFE_INTEGER,r=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const h=new Set;for(const[c,u]of i){let d;n(c)?(d=a,d.length>0&&o&&d.push(new La)):(d=l,d.length>0&&d.push(new La));for(let f of u){t&&(f=f instanceof Fu&&f.alt?f.alt:f);const g=d.push(f);f instanceof lF&&h.add({group:c,action:f,index:g-1})}}for(const{group:c,action:u,index:d}of h){const f=n(c)?a:l,g=u.actions;(g.length<=1||f.length+g.length-2<=s)&&r(u,c,f.length)&&f.splice(d,1,...g)}if(a!==l&&a.length>s){const c=a.splice(s,a.length-s);l.unshift(...c,new La)}}let C0=class extends $F{constructor(e,t,n,s,r){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Vr),this._altKey=Yd.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return rne(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(qn||Ws)&&this._altKey.keyStatus.shiftKey;const s=()=>{const r=t&&n;r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(r=>{n=r.altKey||(qn||Ws)&&r.shiftKey,s()})),this._register(oe(e,"mouseleave",r=>{t=!1,s()})),this._register(oe(e,"mouseenter",r=>{t=!0,s()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?v("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?v("titleAndKb","{0} ({1})",r,a):r;s+=`
[${oF.modifierLabels[Ao].altKey}] ${l}`}this.label.title=s}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:s}=this;if(!n||!s)return;const r=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(r)if(fi.isThemeIcon(r)){const o=fi.asClassNameArray(r);s.classList.add(...o),this._itemClassDispose.value=xt(()=>{s.classList.remove(...o)})}else r.light&&s.style.setProperty("--menu-entry-icon-light",cc(r.light)),r.dark&&s.style.setProperty("--menu-entry-icon-dark",cc(r.dark)),s.classList.add("icon"),this._itemClassDispose.value=xt(()=>{s.classList.remove("icon"),s.style.removeProperty("--menu-entry-icon-light"),s.style.removeProperty("--menu-entry-icon-dark")})}};C0=LB([vl(2,Zi),vl(3,Yn),vl(4,Xe)],C0);let v4=class extends sne{constructor(e,t,n){var s,r;const o=Object.assign({},t??Object.create(null),{menuAsChild:(s=t==null?void 0:t.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(r=t==null?void 0:t.classNames)!==null&&r!==void 0?r:fi.isThemeIcon(e.item.icon)?fi.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!fi.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",cc(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",cc(t.dark)))}}};v4=LB([vl(2,Ng)],v4);let w4=class extends Cf{constructor(e,t,n,s,r,o,a,l){var h,c,u;super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let d,f=l.get(this._storageKey,1);f&&(d=e.actions.find(p=>f===p.id)),d||(d=e.actions[0]),this._defaultAction=this._instaService.createInstance(C0,d,void 0);const g=Object.assign({},t??Object.create(null),{menuAsChild:(h=t==null?void 0:t.menuAsChild)!==null&&h!==void 0?h:!0,classNames:(c=t==null?void 0:t.classNames)!==null&&c!==void 0?c:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new r0});this._dropdown=new sne(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof Fu&&this.update(p.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(C0,e,void 0),this._defaultAction.actionRunner=new class extends r0{runAction(t,n){return rne(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(xLe(this._container,_e(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=_e(".action-container");this._defaultAction.render(ae(this._container,t)),this._register(oe(t,Oe.KEY_DOWN,s=>{const r=new pi(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=_e(".dropdown-action-container");this._dropdown.render(ae(this._container,n)),this._register(oe(n,Oe.KEY_DOWN,s=>{var r;const o=new pi(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)===null||r===void 0||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};w4=LB([vl(2,Zi),vl(3,Yn),vl(4,Ng),vl(5,n_),vl(6,qt),vl(7,Fg)],w4);function J7e(i,e,t){return e instanceof Fu?i.createInstance(C0,e,void 0):e instanceof cee?e.item.rememberDefaultAction?i.createInstance(w4,e,t):i.createInstance(v4,e,t):void 0}var one=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ane=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const lne=kt("IPeekViewService");Dg(lne,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const s=this._widgets.get(i);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var hr;(function(i){i.inPeekEditor=new Ie("inReferenceSearchEditor",!0,v("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(hr||(hr={}));let iw=class{constructor(e,t){e instanceof sg&&hr.inPeekEditor.bindTo(t)}dispose(){}};iw.ID="editor.contrib.referenceController";iw=one([ane(1,Xe)],iw);Ks(iw.ID,iw);function e9e(i){let e=i.get(li).getFocusedCodeEditor();return e instanceof sg?e.getParentEditor():e}const t9e={headerBackgroundColor:Q.white,primaryHeadingColor:Q.fromHex("#333333"),secondaryHeadingColor:Q.fromHex("#6c6c6cb3")};let Ik=class extends G7e{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new H,this.onDidClose=this._onDidClose.event,Qa(this.options,t9e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=_e(".head"),this._bodyElement=_e(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=_e(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),cn(n,"click",o=>this._onTitleClick(o))),ae(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=_e("span.filename"),this._secondaryHeading=_e("span.dirname"),this._metaHeading=_e("span.meta"),ae(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const s=_e(".peekview-actions");ae(this._headElement,s);const r=this._getActionBarOptions();this._actionbarWidget=new dc(s,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Go("peekview.close",v("label.close","Close"),De.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:J7e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:jn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Cr(this._metaHeading)):Rs(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),s=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};Ik=one([ane(2,qt)],Ik);const i9e=z("peekViewTitle.background",{dark:Qt(Ia,.1),light:Qt(Ia,.1),hc:null},v("peekViewTitleBackground","Background color of the peek view title area.")),hne=z("peekViewTitleLabel.foreground",{dark:Q.white,light:Q.black,hc:Q.white},v("peekViewTitleForeground","Color of the peek view title.")),cne=z("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},v("peekViewTitleInfoForeground","Color of the peek view title info.")),n9e=z("peekView.border",{dark:Ia,light:Ia,hc:Gi},v("peekViewBorder","Color of the peek view borders and arrow.")),une=z("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:Q.black},v("peekViewResultsBackground","Background color of the peek view result list.")),s9e=z("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:Q.white},v("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),r9e=z("peekViewResult.fileForeground",{dark:Q.white,light:"#1E1E1E",hc:Q.white},v("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),o9e=z("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},v("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),a9e=z("peekViewResult.selectionForeground",{dark:Q.white,light:"#6C6C6C",hc:Q.white},v("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),rx=z("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:Q.black},v("peekViewEditorBackground","Background color of the peek view editor.")),l9e=z("peekViewEditorGutter.background",{dark:rx,light:rx,hc:rx},v("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),h9e=z("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},v("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),c9e=z("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},v("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),u9e=z("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:Hs},v("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var d9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class ju{constructor(e,t,n,s){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=s,this.id=yie.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?v({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Ba(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):v("aria.oneReference","symbol in {0} on line {1} at column {2}",Ba(this.uri),this.range.startLineNumber,this.range.startColumn)}}class f9e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:s,startColumn:r,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:s,column:r-t}),h=new V(s,l.startColumn,s,r),c=new V(o,a,o,1073741824),u=n.getValueInRange(h).replace(/^\s+/,""),d=n.getValueInRange(e),f=n.getValueInRange(c).replace(/\s+$/,"");return{value:u+d+f,highlight:{start:u.length,end:u.length+d.length}}}}class nw{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new fs}dispose(){mt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?v("aria.fileReferences.1","1 symbol in {0}, full path {1}",Ba(this.uri),this.uri.fsPath):v("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Ba(this.uri),this.uri.fsPath)}resolve(e){return d9e(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new f9e(n))}catch(n){nt(n)}return this})}}class lr{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new H,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(lr._compareReferences);let s;for(let r of e)if((!s||!zs.isEqual(s.uri,r.uri,!0))&&(s=new nw(this,r.uri),this.groups.push(s)),s.children.length===0||lr._compareReferences(r,s.children[s.children.length-1])!==0){const o=new ju(n===r,s,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),s.children.push(o)}}dispose(){mt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new lr(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?v("aria.result.0","No results found"):this.references.length===1?v("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?v("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):v("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,s=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return o===1||t&&s+1<r||!t&&s>0?(t?s=(s+1)%r:s=(s+r-1)%r,n.children[s]):(s=n.parent.groups.indexOf(n),t?(s=(s+1)%o,n.parent.groups[s].children[0]):(s=(s+o-1)%o,n.parent.groups[s].children[n.parent.groups[s].children.length-1]))}nearestReference(e,t){const n=this.references.map((s,r)=>({idx:r,prefixLen:u1(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,r)=>s.prefixLen>r.prefixLen?-1:s.prefixLen<r.prefixLen?1:s.offsetDist<r.offsetDist?-1:s.offsetDist>r.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&V.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return zs.compare(e.uri,t.uri)||V.compareRangesUsingStarts(e.range,t.range)}}function dne(i){if(!i)return;typeof i=="string"&&(i=Ke.file(i));const e=Ba(i)||(i.scheme===dt.file?i.fsPath:i.path);return qn&&n2e(e)?y4(e):e}function y4(i){return iJ(i)?i.charAt(0).toUpperCase()+i.slice(1):i}var Y2=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let C4=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof lr||e instanceof nw}getChildren(e){if(e instanceof lr)return e.groups;if(e instanceof nw)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};C4=Y2([sw(0,Kl)],C4);class g9e{getHeight(){return 23}getTemplateId(e){return e instanceof nw?rw.id:xy.id}}let S4=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof ju){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return Ba(e.uri)}};S4=Y2([sw(0,Zi)],S4);class p9e{getId(e){return e instanceof ju?e.id:e.uri}}let x4=class extends ne{constructor(e,t,n){super(),this._uriLabel=t;const s=document.createElement("div");s.classList.add("reference-file"),this.file=this._register(new _B(s,{supportHighlights:!0})),this.badge=new t4(ae(s,_e(".count"))),this._register(jPe(this.badge,n)),e.appendChild(s)}set(e,t){let n=B5(e.uri);this.file.setLabel(dne(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(v("referencesCount","{0} references",s)):this.badge.setTitleFormat(v("referenceCount","{0} reference",s))}};x4=Y2([sw(1,my),sw(2,ci)],x4);let rw=class fne{constructor(e){this._instantiationService=e,this.templateId=fne.id}renderTemplate(e){return this._instantiationService.createInstance(x4,e)}renderElement(e,t,n){n.set(e.element,XF(e.filterData))}disposeTemplate(e){e.dispose()}};rw.id="FileReferencesRenderer";rw=Y2([sw(0,qt)],rw);class m9e{constructor(e){this.label=new Uu(e,!1)}set(e,t){var n;const s=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!s||!s.value)this.label.set(`${Ba(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:r,highlight:o}=s;t&&!Ta.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,XF(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}}}class xy{constructor(){this.templateId=xy.id}renderTemplate(e){return new m9e(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}xy.id="OneReferenceRenderer";class _9e{getWidgetAriaLabel(){return v("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var b9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yh=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},OU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class Q2{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ve,this._callOnModelChange=new ve,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let r=0,o=e.children.length;r<o;r++){let a=e.children[r];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:Q2.DecorationOptions}),n.push(r))}const s=this._editor.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,s]of this._decorations){const r=t.getDecorationRange(n);if(!r)continue;let o=!1;if(!V.equalsRange(r,s.range)){if(V.spansMultipleLines(r))o=!0;else{const a=s.range.endColumn-s.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(s.id),e.push(n)):s.range=r}}for(let n=0,s=e.length;n<s;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}Q2.DecorationOptions=_t.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class v9e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const s=JSON.parse(e);t=s.ratio,n=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class w9e extends Z3{}let D4=class extends Ik{constructor(e,t,n,s,r,o,a,l,h,c,u,d){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=r,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=h,this._keybindingService=c,this._modeService=u,this._languageConfigurationService=d,this._disposeOnNewModel=new ve,this._callOnDispose=new ve,this._onDidSelectReference=new H,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new jt(0,0),this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),mt(this._preview),mt(this._previewNotAvailableMessage),mt(this._tree),mt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(n9e)||Q.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(i9e)||Q.transparent,primaryHeadingColor:e.getColor(hne),secondaryHeadingColor:e.getColor(cne)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ae(e,_e("div.messages")),Rs(this._messageContainer),this._splitView=new oie(e,{orientation:1}),this._previewContainer=ae(e,_e("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(sg,this._previewContainer,t,this.editor),Rs(this._previewContainer),this._previewNotAvailableMessage=new oo(v("missingPreviewMessage","no preview available"),oo.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=ae(e,_e("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new _9e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(S4),identityProvider:new p9e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:une}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(cn(this._treeContainer,"keydown",r=>{r.equals(9)&&(this._keybindingService.dispatchEvent(r,r.target),r.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(w9e,"ReferencesWidget",this._treeContainer,new g9e,[this._instantiationService.createInstance(rw),this._instantiationService.createInstance(xy)],this._instantiationService.createInstance(C4),n),this._splitView.addView({onDidChange:Re.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:r=>{this._preview.layout({height:this._dim.height,width:r})}},Ck.Distribute),this._splitView.addView({onDidChange:Re.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:r=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${r}px`,this._tree.layout(this._dim.height,r)}},Ck.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let s=(r,o)=>{r instanceof ju&&(o==="show"&&this._revealReference(r,!1),this._onDidSelectReference.fire({element:r,kind:o,source:"tree"}))};this._tree.onDidOpen(r=>{r.sideBySide?s(r.element,"side"):r.editorOptions.pinned?s(r.element,"goto"):s(r.element,"show")}),Rs(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new jt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v("noResults","No results"),Cr(this._messageContainer),Promise.resolve(void 0)):(Rs(this._messageContainer),this._decorationsManager=new Q2(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Cr(this._treeContainer),Cr(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof ju)return e;if(e instanceof nw&&e.children.length>0)return e.children[0]}revealReference(e){return OU(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return OU(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==dt.inMemory?this.setTitle(sJ(e.uri),this._uriLabel.getUriLabel(B5(e.uri))):this.setTitle(v("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const s=yield n;if(!this._model){s.dispose();return}mt(this._previewModelReference);const r=s.object;if(r){const o=this._preview.getModel()===r.textEditorModel?0:1,a=V.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(r.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()})}};D4=b9e([yh(3,ci),yh(4,Kl),yh(5,qt),yh(6,lne),yh(7,my),yh(8,dy),yh(9,Zi),yh(10,Gs),yh(11,hy)],D4);oi((i,e)=>{const t=i.getColor(h9e);t&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${t}; }`);const n=i.getColor(c9e);n&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const s=i.getColor(u9e);s&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${s}; box-sizing: border-box; }`);const r=i.getColor(Hs);r&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const o=i.getColor(une);o&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${o}; }`);const a=i.getColor(s9e);a&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=i.getColor(r9e);l&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const h=i.getColor(o9e);h&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${h}; }`);const c=i.getColor(a9e);c&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${c} !important; }`);const u=i.getColor(rx);u&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {	background-color: ${u};}`);const d=i.getColor(l9e);d&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {	background-color: ${d};}`)});var y9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gp=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const Vg=new Ie("referenceSearchVisible",!1,v("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let S0=class k4{constructor(e,t,n,s,r,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=r,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new ve,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Vg.bindTo(n)}static get(e){return e.getContribution(k4.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const r="peekViewLayout",o=v9e.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(D4,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(v("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:h,kind:c}=l;if(h)switch(c){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(h,!1,!1);break;case"side":this.openReference(h,!0,!1);break;case"goto":n?this._gotoReference(h):this.openReference(h,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var h;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(h=this._model)===null||h===void 0||h.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(v("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let c=this._editor.getModel().uri,u=new K(e.startLineNumber,e.startColumn),d=this._model.nearestReference(c,u);if(d)return this._widget.setSelection(d).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return PU(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const s=this._model.nextOrPreviousReference(n,e),r=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(s),yield this._gotoReference(s),r?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return PU(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=V.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var s;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const r=k4.get(n),o=this._model.clone();this.closeWidget(),n.focus(),r.toggleWidget(t,Wr(a=>Promise.resolve(o)),(s=this._peekMode)!==null&&s!==void 0?s:!1)}},n=>{this._ignoreModelChangeEvent=!1,nt(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:s,range:r}=e;this._editorService.openCodeEditor({resource:s,options:{selection:r,pinned:n}},this._editor,t)}};S0.ID="editor.contrib.referencesController";S0=y9e([gp(2,Xe),gp(3,li),gp(4,Yn),gp(5,qt),gp(6,Fg),gp(7,Ki)],S0);function Wg(i,e){const t=e9e(i);if(!t)return;let n=S0.get(t);n&&e(n)}ys.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:$s(2089,60),when:Ae.or(Vg,hr.inPeekEditor),handler(i){Wg(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});ys.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:Ae.or(Vg,hr.inPeekEditor),handler(i){Wg(i,e=>{e.goToNextOrPreviousReference(!0)})}});ys.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:Ae.or(Vg,hr.inPeekEditor),handler(i){Wg(i,e=>{e.goToNextOrPreviousReference(!1)})}});Ft.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Ft.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Ft.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Ft.registerCommand("closeReferenceSearch",i=>Wg(i,e=>e.closeWidget()));ys.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:Ae.and(hr.inPeekEditor,Ae.not("config.editor.stablePeek"))});ys.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:Ae.and(Vg,Ae.not("config.editor.stablePeek"))});ys.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Ae.and(Vg,gie),handler(i){var e;const n=(e=i.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ju&&Wg(i,s=>s.revealReference(n[0]))}});ys.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Ae.and(Vg,gie),handler(i){var e;const n=(e=i.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ju&&Wg(i,s=>s.openReference(n[0],!0,!0))}});Ft.registerCommand("openReference",i=>{var e;const n=(e=i.get(fo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof ju&&Wg(i,s=>s.openReference(n[0],!1,!0))});var gne=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const EB=new Ie("hasSymbols",!1,v("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),X2=kt("ISymbolNavigationService");let L4=class{constructor(e,t,n,s){this._editorService=t,this._notificationService=n,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=EB.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new E4(this._editorService),s=n.onDidChange(r=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let h=!1,c=!1;for(const u of t.references)if(nJ(u.uri,a.uri))h=!0,c=c||V.containsPosition(u.range,l);else if(h)break;(!h||!c)&&this.reset()});this._currentState=uu(n,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:V.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?v("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):v("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};L4=gne([wb(0,Xe),wb(1,li),wb(2,Yn),wb(3,Zi)],L4);Dg(X2,L4,!0);Se(new class extends ho{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:EB,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(X2).revealNext(e)}});ys.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:EB,primary:9,handler(i){i.get(X2).reset()}});let E4=class{constructor(e){this._listener=new Map,this._disposables=new ve,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),mt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,uu(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};E4=gne([wb(0,li)],E4);var C9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},S9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Xo=class A4{constructor(e,t){this._messageWidget=new Vr,this._messageListeners=new ve,this._editor=e,this._visible=A4.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(A4.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Eg(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new FU(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new js(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(n?n.containsPosition(s.target.position)||this.closeMessage():n=new V(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(FU.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(v("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Xo.ID="editor.contrib.messageController";Xo.MESSAGE_VISIBLE=new Ie("messageVisible",!1,v("messageVisible","Whether the editor is currently showing an inline message"));Xo=C9e([S9e(1,Xe)],Xo);const x9e=ho.bindToContribution(Xo.get);Se(new x9e({id:"leaveEditorMessage",precondition:Xo.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let FU=class{constructor(e,{lineNumber:t,column:n},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");o.classList.add("message"),o.textContent=s,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Ks(Xo.ID,Xo);oi((i,e)=>{const t=i.getColor(DF);if(t){let r=i.type===Ea.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${r}px solid ${t}; }`)}const n=i.getColor(SF);n&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${n}; }`);const s=i.getColor(xF);s&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${s}; }`)});var pne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function Dy(i,e,t,n){const r=t.ordered(i).map(o=>Promise.resolve(n(o,i,e)).then(void 0,a=>{ta(a)}));return Promise.all(r).then(o=>{const a=[];for(let l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function AB(i,e,t){return Dy(i,e,g1,(n,s,r)=>n.provideDefinition(s,r,t))}function mne(i,e,t){return Dy(i,e,DD,(n,s,r)=>n.provideDeclaration(s,r,t))}function _ne(i,e,t){return Dy(i,e,kD,(n,s,r)=>n.provideImplementation(s,r,t))}function bne(i,e,t){return Dy(i,e,LD,(n,s,r)=>n.provideTypeDefinition(s,r,t))}function J2(i,e,t,n){return Dy(i,e,SD,(s,r,o)=>pne(this,void 0,void 0,function*(){const a=yield s.provideReferences(r,o,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const l=yield s.provideReferences(r,o,{includeDeclaration:!1},n);return l&&l.length===1?l:a}))}function ky(i){return pne(this,void 0,void 0,function*(){const e=yield i(),t=new lr(e,""),n=t.references.map(s=>s.link);return t.dispose(),n})}r_("_executeDefinitionProvider",(i,e)=>ky(()=>AB(i,e,ri.None)));r_("_executeDeclarationProvider",(i,e)=>ky(()=>mne(i,e,ri.None)));r_("_executeImplementationProvider",(i,e)=>ky(()=>_ne(i,e,ri.None)));r_("_executeTypeDefinitionProvider",(i,e)=>ky(()=>bne(i,e,ri.None)));r_("_executeReferenceProvider",(i,e)=>ky(()=>J2(i,e,!1,ri.None)));var Zo=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})},_T,bT,vT,wT,yT,CT,ST,xT;Aa.appendMenuItem(Ye.EditorContext,{submenu:Ye.EditorContextPeek,title:v("peek.submenu","Peek"),group:"navigation",order:100});const vne=new Set;function el(i){const e=new i;return pee(e),vne.add(e.id),e}class __ extends Si{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(Yn),s=e.get(li),r=e.get(u_),o=e.get(X2),a=t.getModel(),l=t.getPosition(),h=new Q4e(t,5),c=FX(this._getLocationModel(a,l,h.token),h.token).then(u=>Zo(this,void 0,void 0,function*(){if(!u||h.token.isCancellationRequested)return;Eg(u.ariaMessage);let d;if(u.referenceAt(a.uri,l)){const g=this._getAlternativeCommand(t);g!==this.id&&vne.has(g)&&(d=t.getAction(g))}const f=u.references.length;if(f===0){if(!this._configuration.muteMessage){const g=a.getWordAtPosition(l);Xo.get(t).showMessage(this._getNoResultFoundMessage(g),l)}}else if(f===1&&d)d.run();else return this._onResult(s,o,t,u)}),u=>{n.error(u)}).finally(()=>{h.dispose()});return r.showWhile(c,250),c}_onResult(e,t,n,s){return Zo(this,void 0,void 0,function*(){const r=this._getGoToPreference(n);if(!(n instanceof sg)&&(this._configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(n,s);else{const o=s.firstReference(),a=s.references.length>1&&r==="gotoAndPeek",l=yield this._openReference(n,e,o,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,s):s.dispose(),r==="goto"&&t.put(o)}})}_openReference(e,t,n,s,r){return Zo(this,void 0,void 0,function*(){let o;if(j2e(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:V.collapseToStart(o),selectionRevealType:3}},e,s);if(a){if(r){const l=a.getModel(),h=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(h,[])},350)}return a}})}_openInPeek(e,t){let n=S0.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),Wr(s=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class eE extends __{_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield AB(e,t,n),v("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?v("noResultWord","No definition found for '{0}'",e.word):v("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const wne=ny&&!PX?2118:70;el((_T=class I4 extends eE{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:I4.id,label:v("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:Ae.and(Z.hasDefinitionProvider,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:wne,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Ft.registerCommandAlias("editor.action.goToDeclaration",I4.id)}},_T.id="editor.action.revealDefinition",_T));el((bT=class T4 extends eE{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:T4.id,label:v("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:Ae.and(Z.hasDefinitionProvider,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,wne),weight:100}}),Ft.registerCommandAlias("editor.action.openDeclarationToTheSide",T4.id)}},bT.id="editor.action.revealDefinitionAside",bT));el((vT=class N4 extends eE{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:N4.id,label:v("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:Ae.and(Z.hasDefinitionProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Ye.EditorContextPeek,group:"peek",order:2}}),Ft.registerCommandAlias("editor.action.previewDeclaration",N4.id)}},vT.id="editor.action.peekDefinition",vT));class yne extends __{_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield mne(e,t,n),v("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}el((wT=class Cne extends yne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Cne.id,label:v("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:Ae.and(Z.hasDeclarationProvider,Z.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}},wT.id="editor.action.revealDeclaration",wT));el(class extends yne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:v("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:Ae.and(Z.hasDeclarationProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ye.EditorContextPeek,group:"peek",order:3}})}});class Sne extends __{_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield bne(e,t,n),v("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?v("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):v("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}el((yT=class xne extends Sne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:xne.ID,label:v("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:Ae.and(Z.hasTypeDefinitionProvider,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},yT.ID="editor.action.goToTypeDefinition",yT));el((CT=class Dne extends Sne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Dne.ID,label:v("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:Ae.and(Z.hasTypeDefinitionProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ye.EditorContextPeek,group:"peek",order:4}})}},CT.ID="editor.action.peekTypeDefinition",CT));class kne extends __{_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield _ne(e,t,n),v("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?v("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):v("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}el((ST=class Lne extends kne{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Lne.ID,label:v("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:Ae.and(Z.hasImplementationProvider,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},ST.ID="editor.action.goToImplementation",ST));el((xT=class Ene extends kne{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Ene.ID,label:v("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:Ae.and(Z.hasImplementationProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Ye.EditorContextPeek,group:"peek",order:5}})}},xT.ID="editor.action.peekImplementation",xT));class Ane extends __{_getNoResultFoundMessage(e){return e?v("references.no","No references found for '{0}'",e.word):v("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}el(class extends Ane{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:v("goToReferences.label","Go to References"),alias:"Go to References",precondition:Ae.and(Z.hasReferenceProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Z.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield J2(e,t,!0,n),v("ref.title","References"))})}});el(class extends Ane{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:v("references.action.label","Peek References"),alias:"Peek References",precondition:Ae.and(Z.hasReferenceProvider,hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ye.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(yield J2(e,t,!1,n),v("ref.title","References"))})}});class D9e extends __{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:v("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:Ae.and(hr.notInPeekEditor,Z.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return Zo(this,void 0,void 0,function*(){return new lr(this._references,v("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&v("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Ft.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ke},{name:"position",description:"The position at which to start",constraint:K.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,s,r,o)=>Zo(void 0,void 0,void 0,function*(){$i(Ke.isUri(e)),$i(K.isIPosition(t)),$i(Array.isArray(n)),$i(typeof s>"u"||typeof s=="string"),$i(typeof o>"u"||typeof o=="boolean");const a=i.get(li),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(eF(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(h=>{const c=new class extends D9e{_getNoResultFoundMessage(u){return r||super._getNoResultFoundMessage(u)}}({muteMessage:!r,openInPeek:!!o,openToSide:!1},n,s);h.get(qt).invokeFunction(c.run.bind(c),l)})})});Ft.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ke},{name:"position",description:"The position at which to start",constraint:K.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,s)=>Zo(void 0,void 0,void 0,function*(){i.get(An).executeCommand("editor.action.goToLocations",e,t,n,s,void 0,!0)})});Ft.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{$i(Ke.isUri(e)),$i(K.isIPosition(t));const n=i.get(li);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(s=>{if(!eF(s)||!s.hasModel())return;const r=S0.get(s);if(!r)return;const o=Wr(l=>J2(s.getModel(),K.lift(t),!1,l).then(h=>new lr(h,v("ref.title","References")))),a=new V(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(a,o,!1))})}});Ft.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Aa.appendMenuItems([{id:Ye.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:v({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Ye.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:v({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Ye.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:v({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Ye.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:v({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Ye.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:v({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var k9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},BU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let rg=class yb{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new ve,this.toUnhookForKeyboard=new ve,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let s=new z7e(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,o])=>{this.startFindDefinitionFromMouse(r,Qd(o))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),nt(o)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(yb.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let s=new Y4e(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Wr(r=>this.findDefinition(e,r)),this.previousPromise.then(r=>{if(!r||!r.length||!s.validate(this.editor)){this.removeLinkDecorations();return}if(r.length>1)this.addDecoration(new V(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new _0().appendText(v("multipleResults","Click to show {0} definitions.",r.length)));else{let o=r[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:h}=o.range;if(h<1||h>l.getLineCount()){a.dispose();return}const c=this.getPreviewValue(l,h,o);let u;o.originSelectionRange?u=V.lift(o.originSelectionRange):u=new V(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const d=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new _0().appendCodeblock(d||"",c)),a.dispose()})}}).then(void 0,nt)}getPreviewValue(e,t,n){let s=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return s.endLineNumber-s.startLineNumber>=yb.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,n){let r=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);r=Math.min(r,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${r-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+yb.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<s;r++){let o=e.getLineFirstNonWhitespaceColumn(r);if(n===o)break}return new V(t,1,r+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+yb.MAX_SOURCE_PREVIEW_LINES),s=[];let r=!0,o=e.findNextBracket(new K(t,1));for(;o!==null;){if(s.length===0)s.push(o);else{const c=s[s.length-1];if(c.open[0]===o.open[0]&&c.isOpen&&!o.isOpen?s.pop():s.push(o),s.length===0)if(r)r=!1;else return new V(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=o.range.endLineNumber,h=o.range.endColumn;if(a===o.range.endColumn&&(l++,h=1),l>n)return new V(t,1,n+1,1);o=e.findNextBracket(new K(l,h))}return new V(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&g1.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?AB(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const s=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new eE({openToSide:t,openInPeek:s,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(Xe);return hr.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};rg.ID="editor.contrib.gotodefinitionatposition";rg.MAX_SOURCE_PREVIEW_LINES=8;rg=k9e([BU(1,Kl),BU(2,Gs)],rg);Ks(rg.ID,rg);oi((i,e)=>{const t=i.getColor(ONe);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const GC=_e;class Ine extends ne{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new k2(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class IB extends ne{constructor(e,t,n){super(),this.actionContainer=ae(e,GC("div.action-container")),this.action=ae(this.actionContainer,GC("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&ae(this.action,GC(`span.icon.${t.iconClass}`));const s=ae(this.action,GC("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._register(oe(this.actionContainer,Oe.MOUSE_DOWN,r=>{r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new IB(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function L9e(i,e){const t=[],s=e0.ordered(i).reverse().map(r=>Promise.resolve(r.provideDocumentColors(i,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:r})}));return Promise.all(s).then(()=>t)}function VU(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Ft.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof Ke))throw Bl();const n=i.get(qs).getModel(t);if(!n)throw Bl();const s=[],o=e0.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,ri.None)).then(l=>{if(Array.isArray(l))for(let h of l)s.push({range:h.range,color:[h.color.red,h.color.green,h.color.blue,h.color.alpha]})}));return Promise.all(o).then(()=>s)});Ft.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:s,range:r}=n;if(!(s instanceof Ke)||!Array.isArray(t)||t.length!==4||!V.isIRange(r))throw Bl();const[o,a,l,h]=t,c=i.get(qs).getModel(s);if(!c)throw Bl();const u={range:r,color:{red:o,green:a,blue:l,alpha:h}},d=[],g=e0.ordered(c).reverse().map(p=>Promise.resolve(p.provideColorPresentations(c,u,ri.None)).then(m=>{Array.isArray(m)&&d.push(...m)}));return Promise.all(g).then(()=>d)});var E9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},WU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const A9e=500;let og=class Tne extends ne{constructor(e,t,n){super(),this._editor=e,this._codeEditorService=t,this._configurationService=n,this._localToDispose=this._register(new ve),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(e0.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const s=n.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!e0.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new js,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},Tne.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=Wr(e=>{const t=this._editor.getModel();return t?L9e(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},nt)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:_t.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,s)=>this._colorDatas.set(n,e[s]))}updateColorDecorators(e){let t=[],n={};for(let s=0;s<e.length&&t.length<A9e;s++){const{red:r,green:o,blue:a,alpha:l}=e[s].colorInfo.color,h=new ct(Math.round(r*255),Math.round(o*255),Math.round(a*255),l);let c=y2e(`rgba(${h.r},${h.g},${h.b},${h.a})`).toString(16),u=`rgba(${h.r}, ${h.g}, ${h.b}, ${h.a})`,d="colorBox-"+c;!this._decorationsTypes.has(d)&&!n[d]&&this._codeEditorService.registerDecorationType("color-detector-color",d,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),n[d]=!0,t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(d,!0)})}this._decorationsTypes.forEach(s=>{n[s]||this._codeEditorService.removeDecorationType(s)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(V.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return n.length===0?null:this._colorDatas.get(n[0].id)}};og.ID="editor.contrib.colorDetector";og.RECOMPUTE_TIME=1e3;og=E9e([WU(1,li),WU(2,Ki)],og);Ks(og.ID,og);class I9e{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new H,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new H,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const Sa=_e;class T9e extends ne{constructor(e,t,n){super(),this.model=t,this.domNode=Sa(".colorpicker-header"),ae(e,this.domNode),this.pickedColorNode=ae(this.domNode,Sa(".picked-color"));const s=v("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",s);const r=ae(this.domNode,Sa(".original-color"));r.style.backgroundColor=Q.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(x1)||Q.white,this._register(oi((o,a)=>{this.backgroundColor=o.getColor(x1)||Q.white})),this._register(oe(this.pickedColorNode,Oe.CLICK,()=>this.model.selectNextColorPresentation())),this._register(oe(r,Oe.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=Q.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=Q.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Sa(".codicon.codicon-color-mode"))}}class N9e extends ne{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=Sa(".colorpicker-body"),ae(e,this.domNode),this.saturationBox=new M9e(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new R9e(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new O9e(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new Q(new Tl(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new Q(new Tl(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new Q(new Tl(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class M9e extends ne{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Sa(".saturation-wrap"),ae(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",ae(this.domNode,this.canvas),this.selection=Sa(".saturation-selection"),ae(this.domNode,this.selection),this.layout(),this._register(k5(this.domNode,s=>this.onMouseDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new Ag);const t=Un(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,o_,s=>this.onDidChangePosition(s.posx-t.left,s.posy-t.top),()=>null);const n=zX(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,s),this._onDidChange.fire({s:n,v:s})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new Q(new Tl(e.h,1,1,1)),n=this.canvas.getContext("2d"),s=n.createLinearGradient(0,0,this.canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const r=n.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=Q.Format.CSS.format(t),n.fill(),n.fillStyle=s,n.fill(),n.fillStyle=r,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class Nne extends ne{constructor(e,t){super(),this.model=t,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new H,this.onColorFlushed=this._onColorFlushed.event,this.domNode=ae(e,Sa(".strip")),this.overlay=ae(this.domNode,Sa(".overlay")),this.slider=ae(this.domNode,Sa(".slider")),this.slider.style.top="0px",this._register(k5(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new Ag),n=Un(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,o_,r=>this.onDidChangeTop(r.posy-n.top),()=>null);const s=zX(document,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class R9e extends Nne{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:s}=e.rgba,r=new Q(new ct(t,n,s,1)),o=new Q(new ct(t,n,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class O9e extends Nne{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class P9e extends uo{constructor(e,t,n,s){super(),this.model=t,this.pixelRatio=n,this._register(OX(()=>this.layout()));const r=Sa(".colorpicker-widget");e.appendChild(r);const o=new T9e(r,this.model,s);this.body=new N9e(r,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var F9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},B9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},zU=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class V9e{constructor(e,t,n,s){this.owner=e,this.range=t,this.model=n,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let M4=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return zU(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const s=og.get(this._editor);for(const r of t){if(r.options.description!=="color-detector-color")continue;const o=s.getColorData(r.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return zU(this,void 0,void 0,function*(){const s=e.getValueInRange(t.range),{red:r,green:o,blue:a,alpha:l}=t.color,h=new ct(Math.round(r*255),Math.round(o*255),Math.round(a*255),l),c=new Q(h),u=yield VU(e,t,n,ri.None),d=new I9e(c,[],0);return d.colorPresentations=u||[],d.guessColorPresentation(c,s),new V9e(this,V.lift(t.range),d,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return ne.None;const s=new ve,r=e[0],o=this._editor.getModel(),a=r.model,l=s.add(new P9e(t,a,this._editor.getOption(127),this._themeService));let h=new V(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const c=()=>{let d,f;if(a.presentation.textEdit){d=[a.presentation.textEdit],f=new V(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const g=this._editor.getModel()._setTrackedRange(null,f,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d),f=this._editor.getModel()._getTrackedRange(g)||f}else d=[{identifier:null,range:h,text:a.presentation.label,forceMoveMarkers:!1}],f=h.setEndPosition(h.endLineNumber,h.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d);a.presentation.additionalTextEdits&&(d=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",d),this._hover.hide()),this._editor.pushUndoStop(),h=f},u=d=>VU(o,{range:h,color:{red:d.rgba.r/255,green:d.rgba.g/255,blue:d.rgba.b/255,alpha:d.rgba.a}},r.provider,ri.None).then(f=>{a.colorPresentations=f||[]});return s.add(a.onColorFlushed(d=>{u(d).then(c)})),s.add(a.onDidChangeColor(u)),this._hover.setColorPicker(l),s}};M4=F9e([B9e(2,ci)],M4);class Mne{constructor(e,t,n,s,r){this._computer=e,this._state=0,this._hoverTime=r,this._firstWaitScheduler=new yi(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new yi(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new yi(()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=s}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Wr(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):nt(e)}_onProgress(e){this._progressCallback(e)}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}class HU{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class DT{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function W9e(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var z9e=Object.hasOwnProperty,UU=Object.setPrototypeOf,H9e=Object.isFrozen,U9e=Object.getPrototypeOf,$9e=Object.getOwnPropertyDescriptor,cr=Object.freeze,fc=Object.seal,j9e=Object.create,Rne=typeof Reflect<"u"&&Reflect,Tk=Rne.apply,R4=Rne.construct;Tk||(Tk=function(e,t,n){return e.apply(t,n)});cr||(cr=function(e){return e});fc||(fc=function(e){return e});R4||(R4=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(W9e(t))))});var q9e=Ua(Array.prototype.forEach),$U=Ua(Array.prototype.pop),K_=Ua(Array.prototype.push),Ld=Ua(String.prototype.toLowerCase),jU=Ua(String.prototype.match),Ac=Ua(String.prototype.replace),G9e=Ua(String.prototype.indexOf),K9e=Ua(String.prototype.trim),Ch=Ua(RegExp.prototype.test),qU=Z9e(TypeError);function Ua(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return Tk(i,e,n)}}function Z9e(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return R4(i,t)}}function Nt(i,e){UU&&UU(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var s=Ld(n);s!==n&&(H9e(e)||(e[t]=s),n=s)}i[n]=!0}return i}function Cd(i){var e=j9e(null),t=void 0;for(t in i)Tk(z9e,i,[t])&&(e[t]=i[t]);return e}function KC(i,e){for(;i!==null;){var t=$9e(i,e);if(t){if(t.get)return Ua(t.get);if(typeof t.value=="function")return Ua(t.value)}i=U9e(i)}function n(s){return console.warn("fallback value for",s),null}return n}var GU=cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),kT=cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),LT=cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Y9e=cr(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ET=cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Q9e=cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),KU=cr(["#text"]),ZU=cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),AT=cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YU=cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZC=cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),X9e=fc(/\{\{[\s\S]*|[\s\S]*\}\}/gm),J9e=fc(/<%[\s\S]*|[\s\S]*%>/gm),eVe=fc(/^data-[\-\w.\u00B7-\uFFFF]/),tVe=fc(/^aria-[\-\w]+$/),iVe=fc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nVe=fc(/^(?:\w+script|data):/i),sVe=fc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function cl(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var rVe=function(){return typeof window>"u"?null:window},oVe=function(e,t){if((typeof e>"u"?"undefined":Cb(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(n=t.currentScript.getAttribute(s));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function One(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rVe(),e=function(I){return One(I)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,s=i.DocumentFragment,r=i.HTMLTemplateElement,o=i.Node,a=i.Element,l=i.NodeFilter,h=i.NamedNodeMap,c=h===void 0?i.NamedNodeMap||i.MozNamedAttrMap:h,u=i.Text,d=i.Comment,f=i.DOMParser,g=i.trustedTypes,p=a.prototype,m=KC(p,"cloneNode"),b=KC(p,"nextSibling"),_=KC(p,"childNodes"),w=KC(p,"parentNode");if(typeof r=="function"){var y=n.createElement("template");y.content&&y.content.ownerDocument&&(n=y.content.ownerDocument)}var x=oVe(g,t),L=x&&on?x.createHTML(""):"",S=n,k=S.implementation,D=S.createNodeIterator,T=S.createDocumentFragment,M=S.getElementsByTagName,j=t.importNode,$={};try{$=Cd(n).documentMode?n.documentMode:{}}catch{}var ie={};e.isSupported=typeof w=="function"&&k&&typeof k.createHTMLDocument<"u"&&$!==9;var pe=X9e,be=J9e,ye=eVe,Ee=tVe,we=nVe,Dt=sVe,$e=iVe,Qe=null,pt=Nt({},[].concat(cl(GU),cl(kT),cl(LT),cl(ET),cl(KU))),lt=null,mi=Nt({},[].concat(cl(ZU),cl(AT),cl(YU),cl(ZC))),te=null,se=null,me=!0,G=!0,fe=!1,R=!1,E=!1,he=!1,ce=!1,je=!1,Me=!1,Je=!0,on=!1,po=!0,Ys=!0,xs=!1,Vi={},Fn=null,Ds=Nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),In=null,ks=Nt({},["audio","video","img","source","image","track"]),C=null,A=Nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),N="http://www.w3.org/1998/Math/MathML",q="http://www.w3.org/2000/svg",X="http://www.w3.org/1999/xhtml",de=X,xe=!1,Lt=null,_i=n.createElement("form"),Wt=function(I){Lt&&Lt===I||((!I||(typeof I>"u"?"undefined":Cb(I))!=="object")&&(I={}),I=Cd(I),Qe="ALLOWED_TAGS"in I?Nt({},I.ALLOWED_TAGS):pt,lt="ALLOWED_ATTR"in I?Nt({},I.ALLOWED_ATTR):mi,C="ADD_URI_SAFE_ATTR"in I?Nt(Cd(A),I.ADD_URI_SAFE_ATTR):A,In="ADD_DATA_URI_TAGS"in I?Nt(Cd(ks),I.ADD_DATA_URI_TAGS):ks,Fn="FORBID_CONTENTS"in I?Nt({},I.FORBID_CONTENTS):Ds,te="FORBID_TAGS"in I?Nt({},I.FORBID_TAGS):{},se="FORBID_ATTR"in I?Nt({},I.FORBID_ATTR):{},Vi="USE_PROFILES"in I?I.USE_PROFILES:!1,me=I.ALLOW_ARIA_ATTR!==!1,G=I.ALLOW_DATA_ATTR!==!1,fe=I.ALLOW_UNKNOWN_PROTOCOLS||!1,R=I.SAFE_FOR_TEMPLATES||!1,E=I.WHOLE_DOCUMENT||!1,je=I.RETURN_DOM||!1,Me=I.RETURN_DOM_FRAGMENT||!1,Je=I.RETURN_DOM_IMPORT!==!1,on=I.RETURN_TRUSTED_TYPE||!1,ce=I.FORCE_BODY||!1,po=I.SANITIZE_DOM!==!1,Ys=I.KEEP_CONTENT!==!1,xs=I.IN_PLACE||!1,$e=I.ALLOWED_URI_REGEXP||$e,de=I.NAMESPACE||X,R&&(G=!1),Me&&(je=!0),Vi&&(Qe=Nt({},[].concat(cl(KU))),lt=[],Vi.html===!0&&(Nt(Qe,GU),Nt(lt,ZU)),Vi.svg===!0&&(Nt(Qe,kT),Nt(lt,AT),Nt(lt,ZC)),Vi.svgFilters===!0&&(Nt(Qe,LT),Nt(lt,AT),Nt(lt,ZC)),Vi.mathMl===!0&&(Nt(Qe,ET),Nt(lt,YU),Nt(lt,ZC))),I.ADD_TAGS&&(Qe===pt&&(Qe=Cd(Qe)),Nt(Qe,I.ADD_TAGS)),I.ADD_ATTR&&(lt===mi&&(lt=Cd(lt)),Nt(lt,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Nt(C,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(Fn===Ds&&(Fn=Cd(Fn)),Nt(Fn,I.FORBID_CONTENTS)),Ys&&(Qe["#text"]=!0),E&&Nt(Qe,["html","head","body"]),Qe.table&&(Nt(Qe,["tbody"]),delete te.tbody),cr&&cr(I),Lt=I)},zt=Nt({},["mi","mo","mn","ms","mtext"]),bi=Nt({},["foreignobject","desc","title","annotation-xml"]),lh=Nt({},kT);Nt(lh,LT),Nt(lh,Y9e);var tl=Nt({},ET);Nt(tl,Q9e);var Ug=function(I){var U=w(I);(!U||!U.tagName)&&(U={namespaceURI:X,tagName:"template"});var ee=Ld(I.tagName),re=Ld(U.tagName);if(I.namespaceURI===q)return U.namespaceURI===X?ee==="svg":U.namespaceURI===N?ee==="svg"&&(re==="annotation-xml"||zt[re]):!!lh[ee];if(I.namespaceURI===N)return U.namespaceURI===X?ee==="math":U.namespaceURI===q?ee==="math"&&bi[re]:!!tl[ee];if(I.namespaceURI===X){if(U.namespaceURI===q&&!bi[re]||U.namespaceURI===N&&!zt[re])return!1;var Le=Nt({},["title","style","font","a","script"]);return!tl[ee]&&(Le[ee]||!lh[ee])}return!1},Qs=function(I){K_(e.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=L}catch{I.remove()}}},od=function(I,U){try{K_(e.removed,{attribute:U.getAttributeNode(I),from:U})}catch{K_(e.removed,{attribute:null,from:U})}if(U.removeAttribute(I),I==="is"&&!lt[I])if(je||Me)try{Qs(U)}catch{}else try{U.setAttribute(I,"")}catch{}},$g=function(I){var U=void 0,ee=void 0;if(ce)I="<remove></remove>"+I;else{var re=jU(I,/^[\r\n\t ]+/);ee=re&&re[0]}var Le=x?x.createHTML(I):I;if(de===X)try{U=new f().parseFromString(Le,"text/html")}catch{}if(!U||!U.documentElement){U=k.createDocument(de,"template",null);try{U.documentElement.innerHTML=xe?"":Le}catch{}}var Ue=U.body||U.documentElement;return I&&ee&&Ue.insertBefore(n.createTextNode(ee),Ue.childNodes[0]||null),de===X?M.call(U,E?"html":"body")[0]:E?U.documentElement:Ue},jg=function(I){return D.call(I.ownerDocument||I,I,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ft=function(I){return I instanceof u||I instanceof d?!1:typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof c)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function"},il=function(I){return(typeof o>"u"?"undefined":Cb(o))==="object"?I instanceof o:I&&(typeof I>"u"?"undefined":Cb(I))==="object"&&typeof I.nodeType=="number"&&typeof I.nodeName=="string"},O=function(I,U,ee){ie[I]&&q9e(ie[I],function(re){re.call(e,U,ee,Lt)})},Y=function(I){var U=void 0;if(O("beforeSanitizeElements",I,null),ft(I)||jU(I.nodeName,/[\u0080-\uFFFF]/))return Qs(I),!0;var ee=Ld(I.nodeName);if(O("uponSanitizeElement",I,{tagName:ee,allowedTags:Qe}),!il(I.firstElementChild)&&(!il(I.content)||!il(I.content.firstElementChild))&&Ch(/<[/\w]/g,I.innerHTML)&&Ch(/<[/\w]/g,I.textContent)||ee==="select"&&Ch(/<template/i,I.innerHTML))return Qs(I),!0;if(!Qe[ee]||te[ee]){if(Ys&&!Fn[ee]){var re=w(I)||I.parentNode,Le=_(I)||I.childNodes;if(Le&&re)for(var Ue=Le.length,Ze=Ue-1;Ze>=0;--Ze)re.insertBefore(m(Le[Ze],!0),b(I))}return Qs(I),!0}return I instanceof a&&!Ug(I)||(ee==="noscript"||ee==="noembed")&&Ch(/<\/no(script|embed)/i,I.innerHTML)?(Qs(I),!0):(R&&I.nodeType===3&&(U=I.textContent,U=Ac(U,pe," "),U=Ac(U,be," "),I.textContent!==U&&(K_(e.removed,{element:I.cloneNode()}),I.textContent=U)),O("afterSanitizeElements",I,null),!1)},J=function(I,U,ee){if(po&&(U==="id"||U==="name")&&(ee in n||ee in _i))return!1;if(!(G&&!se[U]&&Ch(ye,U))){if(!(me&&Ch(Ee,U))){if(!lt[U]||se[U])return!1;if(!C[U]){if(!Ch($e,Ac(ee,Dt,""))){if(!((U==="src"||U==="xlink:href"||U==="href")&&I!=="script"&&G9e(ee,"data:")===0&&In[I])){if(!(fe&&!Ch(we,Ac(ee,Dt,"")))){if(ee)return!1}}}}}}return!0},P=function(I){var U=void 0,ee=void 0,re=void 0,Le=void 0;O("beforeSanitizeAttributes",I,null);var Ue=I.attributes;if(Ue){var Ze={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:lt};for(Le=Ue.length;Le--;){U=Ue[Le];var tt=U,Ce=tt.name,We=tt.namespaceURI;if(ee=K9e(U.value),re=Ld(Ce),Ze.attrName=re,Ze.attrValue=ee,Ze.keepAttr=!0,Ze.forceKeepAttr=void 0,O("uponSanitizeAttribute",I,Ze),ee=Ze.attrValue,!Ze.forceKeepAttr&&(od(Ce,I),!!Ze.keepAttr)){if(Ch(/\/>/i,ee)){od(Ce,I);continue}R&&(ee=Ac(ee,pe," "),ee=Ac(ee,be," "));var Yi=I.nodeName.toLowerCase();if(J(Yi,re,ee))try{We?I.setAttributeNS(We,Ce,ee):I.setAttribute(Ce,ee),$U(e.removed)}catch{}}}O("afterSanitizeAttributes",I,null)}},W=function F(I){var U=void 0,ee=jg(I);for(O("beforeSanitizeShadowDOM",I,null);U=ee.nextNode();)O("uponSanitizeShadowNode",U,null),!Y(U)&&(U.content instanceof s&&F(U.content),P(U));O("afterSanitizeShadowDOM",I,null)};return e.sanitize=function(F,I){var U=void 0,ee=void 0,re=void 0,Le=void 0,Ue=void 0;if(xe=!F,xe&&(F="<!-->"),typeof F!="string"&&!il(F)){if(typeof F.toString!="function")throw qU("toString is not a function");if(F=F.toString(),typeof F!="string")throw qU("dirty is not a string, aborting")}if(!e.isSupported){if(Cb(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof F=="string")return i.toStaticHTML(F);if(il(F))return i.toStaticHTML(F.outerHTML)}return F}if(he||Wt(I),e.removed=[],typeof F=="string"&&(xs=!1),!xs)if(F instanceof o)U=$g("<!---->"),ee=U.ownerDocument.importNode(F,!0),ee.nodeType===1&&ee.nodeName==="BODY"||ee.nodeName==="HTML"?U=ee:U.appendChild(ee);else{if(!je&&!R&&!E&&F.indexOf("<")===-1)return x&&on?x.createHTML(F):F;if(U=$g(F),!U)return je?null:L}U&&ce&&Qs(U.firstChild);for(var Ze=jg(xs?F:U);re=Ze.nextNode();)re.nodeType===3&&re===Le||Y(re)||(re.content instanceof s&&W(re.content),P(re),Le=re);if(Le=null,xs)return F;if(je){if(Me)for(Ue=T.call(U.ownerDocument);U.firstChild;)Ue.appendChild(U.firstChild);else Ue=U;return Je&&(Ue=j.call(t,Ue,!0)),Ue}var tt=E?U.outerHTML:U.innerHTML;return R&&(tt=Ac(tt,pe," "),tt=Ac(tt,be," ")),x&&on?x.createHTML(tt):tt},e.setConfig=function(F){Wt(F),he=!0},e.clearConfig=function(){Lt=null,he=!1},e.isValidAttribute=function(F,I,U){Lt||Wt({});var ee=Ld(F),re=Ld(I);return J(ee,re,U)},e.addHook=function(F,I){typeof I=="function"&&(ie[F]=ie[F]||[],K_(ie[F],I))},e.removeHook=function(F){ie[F]&&$U(ie[F])},e.removeHooks=function(F){ie[F]&&(ie[F]=[])},e.removeAllHooks=function(){ie={}},e}var oh=One();oh.version;oh.isSupported;const aVe=oh.sanitize;oh.setConfig;oh.clearConfig;oh.isValidAttribute;const QU=oh.addHook,XU=oh.removeHook;oh.removeHooks;oh.removeAllHooks;let ah;(function(){function i(e){ah=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(O,Y){for(var J=0;J<Y.length;J++){var P=Y[J];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}function t(O,Y,J){return Y&&e(O.prototype,Y),J&&e(O,J),O}function n(O,Y){if(O){if(typeof O=="string")return s(O,Y);var J=Object.prototype.toString.call(O).slice(8,-1);if(J==="Object"&&O.constructor&&(J=O.constructor.name),J==="Map"||J==="Set")return Array.from(O);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return s(O,Y)}}function s(O,Y){(Y==null||Y>O.length)&&(Y=O.length);for(var J=0,P=new Array(Y);J<Y;J++)P[J]=O[J];return P}function r(O,Y){var J=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(J)return(J=J.call(O)).next.bind(J);if(Array.isArray(O)||(J=n(O))||Y&&O&&typeof O.length=="number"){J&&(O=J);var P=0;return function(){return P>=O.length?{done:!0}:{done:!1,value:O[P++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(O){o.exports.defaults=O}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var h=/[&<>"']/,c=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Y){return f[Y]};function p(O,Y){if(Y){if(h.test(O))return O.replace(c,g)}else if(u.test(O))return O.replace(d,g);return O}var m=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function b(O){return O.replace(m,function(Y,J){return J=J.toLowerCase(),J==="colon"?":":J.charAt(0)==="#"?J.charAt(1)==="x"?String.fromCharCode(parseInt(J.substring(2),16)):String.fromCharCode(+J.substring(1)):""})}var _=/(^|[^\[])\^/g;function w(O,Y){O=O.source||O,Y=Y||"";var J={replace:function(W,F){return F=F.source||F,F=F.replace(_,"$1"),O=O.replace(W,F),J},getRegex:function(){return new RegExp(O,Y)}};return J}var y=/[^\w:]/g,x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function L(O,Y,J){if(O){var P;try{P=decodeURIComponent(b(J)).replace(y,"").toLowerCase()}catch{return null}if(P.indexOf("javascript:")===0||P.indexOf("vbscript:")===0||P.indexOf("data:")===0)return null}Y&&!x.test(J)&&(J=M(Y,J));try{J=encodeURI(J).replace(/%25/g,"%")}catch{return null}return J}var S={},k=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,T=/^([^:]+:\/*[^/]*)[\s\S]*$/;function M(O,Y){S[" "+O]||(k.test(O)?S[" "+O]=O+"/":S[" "+O]=pe(O,"/",!0)),O=S[" "+O];var J=O.indexOf(":")===-1;return Y.substring(0,2)==="//"?J?Y:O.replace(D,"$1")+Y:Y.charAt(0)==="/"?J?Y:O.replace(T,"$1")+Y:O+Y}var j={exec:function(){}};function $(O){for(var Y=1,J,P;Y<arguments.length;Y++){J=arguments[Y];for(P in J)Object.prototype.hasOwnProperty.call(J,P)&&(O[P]=J[P])}return O}function ie(O,Y){var J=O.replace(/\|/g,function(F,I,U){for(var ee=!1,re=I;--re>=0&&U[re]==="\\";)ee=!ee;return ee?"|":" |"}),P=J.split(/ \|/),W=0;if(P[0].trim()||P.shift(),P[P.length-1].trim()||P.pop(),P.length>Y)P.splice(Y);else for(;P.length<Y;)P.push("");for(;W<P.length;W++)P[W]=P[W].trim().replace(/\\\|/g,"|");return P}function pe(O,Y,J){var P=O.length;if(P===0)return"";for(var W=0;W<P;){var F=O.charAt(P-W-1);if(F===Y&&!J)W++;else if(F!==Y&&J)W++;else break}return O.substr(0,P-W)}function be(O,Y){if(O.indexOf(Y[1])===-1)return-1;for(var J=O.length,P=0,W=0;W<J;W++)if(O[W]==="\\")W++;else if(O[W]===Y[0])P++;else if(O[W]===Y[1]&&(P--,P<0))return W;return-1}function ye(O){O&&O.sanitize&&!O.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ee(O,Y){if(Y<1)return"";for(var J="";Y>1;)Y&1&&(J+=O),Y>>=1,O+=O;return J+O}var we={escape:p,unescape:b,edit:w,cleanUrl:L,resolveUrl:M,noopTest:j,merge:$,splitCells:ie,rtrim:pe,findClosingBracket:be,checkSanitizeDeprecation:ye,repeatString:Ee},Dt=o.exports.defaults,$e=we.rtrim,Qe=we.splitCells,pt=we.escape,lt=we.findClosingBracket;function mi(O,Y,J,P){var W=Y.href,F=Y.title?pt(Y.title):null,I=O[1].replace(/\\([\[\]])/g,"$1");if(O[0].charAt(0)!=="!"){P.state.inLink=!0;var U={type:"link",raw:J,href:W,title:F,text:I,tokens:P.inlineTokens(I,[])};return P.state.inLink=!1,U}else return{type:"image",raw:J,href:W,title:F,text:pt(I)}}function te(O,Y){var J=O.match(/^(\s+)(?:```)/);if(J===null)return Y;var P=J[1];return Y.split(`
`).map(function(W){var F=W.match(/^\s+/);if(F===null)return W;var I=F[0];return I.length>=P.length?W.slice(P.length):W}).join(`
`)}var se=function(){function O(J){this.options=J||Dt}var Y=O.prototype;return Y.space=function(P){var W=this.rules.block.newline.exec(P);if(W)return W[0].length>1?{type:"space",raw:W[0]}:{raw:`
`}},Y.code=function(P){var W=this.rules.block.code.exec(P);if(W){var F=W[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:W[0],codeBlockStyle:"indented",text:this.options.pedantic?F:$e(F,`
`)}}},Y.fences=function(P){var W=this.rules.block.fences.exec(P);if(W){var F=W[0],I=te(F,W[3]||"");return{type:"code",raw:F,lang:W[2]?W[2].trim():W[2],text:I}}},Y.heading=function(P){var W=this.rules.block.heading.exec(P);if(W){var F=W[2].trim();if(/#$/.test(F)){var I=$e(F,"#");(this.options.pedantic||!I||/ $/.test(I))&&(F=I.trim())}var U={type:"heading",raw:W[0],depth:W[1].length,text:F,tokens:[]};return this.lexer.inline(U.text,U.tokens),U}},Y.hr=function(P){var W=this.rules.block.hr.exec(P);if(W)return{type:"hr",raw:W[0]}},Y.blockquote=function(P){var W=this.rules.block.blockquote.exec(P);if(W){var F=W[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:W[0],tokens:this.lexer.blockTokens(F,[]),text:F}}},Y.list=function(P){var W=this.rules.block.list.exec(P);if(W){var F,I,U,ee,re,Le,Ue,Ze,tt,Ce,We=W[1].trim(),Yi=We.length>1,At={type:"list",raw:"",ordered:Yi,start:Yi?+We.slice(0,-1):"",loose:!1,items:[]};We=Yi?"\\d{1,9}\\"+We.slice(-1):"\\"+We,this.options.pedantic&&(We=Yi?We:"[*+-]");for(var Qn=new RegExp("^( {0,3}"+We+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");P&&!(this.rules.block.hr.test(P)||!(W=Qn.exec(P)));){tt=W[2].split(`
`),this.options.pedantic?(ee=2,Ce=tt[0].trimLeft()):(ee=W[2].search(/[^ ]/),ee=W[1].length+(ee>4?1:ee),Ce=tt[0].slice(ee-W[1].length)),Le=!1,F=W[0],!tt[0]&&/^ *$/.test(tt[1])&&(F=W[1]+tt.slice(0,2).join(`
`)+`
`,At.loose=!0,tt=[]);var hh=new RegExp("^ {0,"+Math.min(3,ee-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(re=1;re<tt.length;re++){if(Ze=tt[re],this.options.pedantic&&(Ze=Ze.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),hh.test(Ze)){F=W[1]+tt.slice(0,re).join(`
`)+`
`;break}if(!Le){Ze.trim()||(Le=!0),Ze.search(/[^ ]/)>=ee?Ce+=`
`+Ze.slice(ee):Ce+=`
`+Ze;continue}if(Ze.search(/[^ ]/)>=ee||!Ze.trim()){Ce+=`
`+Ze.slice(ee);continue}else{F=W[1]+tt.slice(0,re).join(`
`)+`
`;break}}At.loose||(Ue?At.loose=!0:/\n *\n *$/.test(F)&&(Ue=!0)),this.options.gfm&&(I=/^\[[ xX]\] /.exec(Ce),I&&(U=I[0]!=="[ ] ",Ce=Ce.replace(/^\[[ xX]\] +/,""))),At.items.push({type:"list_item",raw:F,task:!!I,checked:U,loose:!1,text:Ce}),At.raw+=F,P=P.slice(F.length)}At.items[At.items.length-1].raw=F.trimRight(),At.items[At.items.length-1].text=Ce.trimRight(),At.raw=At.raw.trimRight();var un=At.items.length;for(re=0;re<un;re++)this.lexer.state.top=!1,At.items[re].tokens=this.lexer.blockTokens(At.items[re].text,[]),At.items[re].tokens.some(function(ad){return ad.type==="space"})&&(At.loose=!0,At.items[re].loose=!0);return At}},Y.html=function(P){var W=this.rules.block.html.exec(P);if(W){var F={type:"html",raw:W[0],pre:!this.options.sanitizer&&(W[1]==="pre"||W[1]==="script"||W[1]==="style"),text:W[0]};return this.options.sanitize&&(F.type="paragraph",F.text=this.options.sanitizer?this.options.sanitizer(W[0]):pt(W[0]),F.tokens=[],this.lexer.inline(F.text,F.tokens)),F}},Y.def=function(P){var W=this.rules.block.def.exec(P);if(W){W[3]&&(W[3]=W[3].substring(1,W[3].length-1));var F=W[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:F,raw:W[0],href:W[2],title:W[3]}}},Y.table=function(P){var W=this.rules.block.table.exec(P);if(W){var F={type:"table",header:Qe(W[1]).map(function(Ue){return{text:Ue}}),align:W[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:W[3]?W[3].replace(/\n$/,"").split(`
`):[]};if(F.header.length===F.align.length){F.raw=W[0];var I=F.align.length,U,ee,re,Le;for(U=0;U<I;U++)/^ *-+: *$/.test(F.align[U])?F.align[U]="right":/^ *:-+: *$/.test(F.align[U])?F.align[U]="center":/^ *:-+ *$/.test(F.align[U])?F.align[U]="left":F.align[U]=null;for(I=F.rows.length,U=0;U<I;U++)F.rows[U]=Qe(F.rows[U],F.header.length).map(function(Ue){return{text:Ue}});for(I=F.header.length,ee=0;ee<I;ee++)F.header[ee].tokens=[],this.lexer.inlineTokens(F.header[ee].text,F.header[ee].tokens);for(I=F.rows.length,ee=0;ee<I;ee++)for(Le=F.rows[ee],re=0;re<Le.length;re++)Le[re].tokens=[],this.lexer.inlineTokens(Le[re].text,Le[re].tokens);return F}}},Y.lheading=function(P){var W=this.rules.block.lheading.exec(P);if(W){var F={type:"heading",raw:W[0],depth:W[2].charAt(0)==="="?1:2,text:W[1],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},Y.paragraph=function(P){var W=this.rules.block.paragraph.exec(P);if(W){var F={type:"paragraph",raw:W[0],text:W[1].charAt(W[1].length-1)===`
`?W[1].slice(0,-1):W[1],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},Y.text=function(P){var W=this.rules.block.text.exec(P);if(W){var F={type:"text",raw:W[0],text:W[0],tokens:[]};return this.lexer.inline(F.text,F.tokens),F}},Y.escape=function(P){var W=this.rules.inline.escape.exec(P);if(W)return{type:"escape",raw:W[0],text:pt(W[1])}},Y.tag=function(P){var W=this.rules.inline.tag.exec(P);if(W)return!this.lexer.state.inLink&&/^<a /i.test(W[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(W[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:W[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(W[0]):pt(W[0]):W[0]}},Y.link=function(P){var W=this.rules.inline.link.exec(P);if(W){var F=W[2].trim();if(!this.options.pedantic&&/^</.test(F)){if(!/>$/.test(F))return;var I=$e(F.slice(0,-1),"\\");if((F.length-I.length)%2===0)return}else{var U=lt(W[2],"()");if(U>-1){var ee=W[0].indexOf("!")===0?5:4,re=ee+W[1].length+U;W[2]=W[2].substring(0,U),W[0]=W[0].substring(0,re).trim(),W[3]=""}}var Le=W[2],Ue="";if(this.options.pedantic){var Ze=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Le);Ze&&(Le=Ze[1],Ue=Ze[3])}else Ue=W[3]?W[3].slice(1,-1):"";return Le=Le.trim(),/^</.test(Le)&&(this.options.pedantic&&!/>$/.test(F)?Le=Le.slice(1):Le=Le.slice(1,-1)),mi(W,{href:Le&&Le.replace(this.rules.inline._escapes,"$1"),title:Ue&&Ue.replace(this.rules.inline._escapes,"$1")},W[0],this.lexer)}},Y.reflink=function(P,W){var F;if((F=this.rules.inline.reflink.exec(P))||(F=this.rules.inline.nolink.exec(P))){var I=(F[2]||F[1]).replace(/\s+/g," ");if(I=W[I.toLowerCase()],!I||!I.href){var U=F[0].charAt(0);return{type:"text",raw:U,text:U}}return mi(F,I,F[0],this.lexer)}},Y.emStrong=function(P,W,F){F===void 0&&(F="");var I=this.rules.inline.emStrong.lDelim.exec(P);if(I&&!(I[3]&&F.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var U=I[1]||I[2]||"";if(!U||U&&(F===""||this.rules.inline.punctuation.exec(F))){var ee=I[0].length-1,re,Le,Ue=ee,Ze=0,tt=I[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(tt.lastIndex=0,W=W.slice(-1*P.length+ee);(I=tt.exec(W))!=null;)if(re=I[1]||I[2]||I[3]||I[4]||I[5]||I[6],!!re){if(Le=re.length,I[3]||I[4]){Ue+=Le;continue}else if((I[5]||I[6])&&ee%3&&!((ee+Le)%3)){Ze+=Le;continue}if(Ue-=Le,!(Ue>0)){if(Le=Math.min(Le,Le+Ue+Ze),Math.min(ee,Le)%2){var Ce=P.slice(1,ee+I.index+Le);return{type:"em",raw:P.slice(0,ee+I.index+Le+1),text:Ce,tokens:this.lexer.inlineTokens(Ce,[])}}var We=P.slice(2,ee+I.index+Le-1);return{type:"strong",raw:P.slice(0,ee+I.index+Le+1),text:We,tokens:this.lexer.inlineTokens(We,[])}}}}}},Y.codespan=function(P){var W=this.rules.inline.code.exec(P);if(W){var F=W[2].replace(/\n/g," "),I=/[^ ]/.test(F),U=/^ /.test(F)&&/ $/.test(F);return I&&U&&(F=F.substring(1,F.length-1)),F=pt(F,!0),{type:"codespan",raw:W[0],text:F}}},Y.br=function(P){var W=this.rules.inline.br.exec(P);if(W)return{type:"br",raw:W[0]}},Y.del=function(P){var W=this.rules.inline.del.exec(P);if(W)return{type:"del",raw:W[0],text:W[2],tokens:this.lexer.inlineTokens(W[2],[])}},Y.autolink=function(P,W){var F=this.rules.inline.autolink.exec(P);if(F){var I,U;return F[2]==="@"?(I=pt(this.options.mangle?W(F[1]):F[1]),U="mailto:"+I):(I=pt(F[1]),U=I),{type:"link",raw:F[0],text:I,href:U,tokens:[{type:"text",raw:I,text:I}]}}},Y.url=function(P,W){var F;if(F=this.rules.inline.url.exec(P)){var I,U;if(F[2]==="@")I=pt(this.options.mangle?W(F[0]):F[0]),U="mailto:"+I;else{var ee;do ee=F[0],F[0]=this.rules.inline._backpedal.exec(F[0])[0];while(ee!==F[0]);I=pt(F[0]),F[1]==="www."?U="http://"+I:U=I}return{type:"link",raw:F[0],text:I,href:U,tokens:[{type:"text",raw:I,text:I}]}}},Y.inlineText=function(P,W){var F=this.rules.inline.text.exec(P);if(F){var I;return this.lexer.state.inRawBlock?I=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):pt(F[0]):F[0]:I=pt(this.options.smartypants?W(F[0]):F[0]),{type:"text",raw:F[0],text:I}}},O}(),me=we.noopTest,G=we.edit,fe=we.merge,R={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:me,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};R._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,R._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,R.def=G(R.def).replace("label",R._label).replace("title",R._title).getRegex(),R.bullet=/(?:[*+-]|\d{1,9}[.)])/,R.listItemStart=G(/^( *)(bull) */).replace("bull",R.bullet).getRegex(),R.list=G(R.list).replace(/bull/g,R.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+R.def.source+")").getRegex(),R._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",R._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,R.html=G(R.html,"i").replace("comment",R._comment).replace("tag",R._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),R.paragraph=G(R._paragraph).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.blockquote=G(R.blockquote).replace("paragraph",R.paragraph).getRegex(),R.normal=fe({},R),R.gfm=fe({},R.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),R.gfm.table=G(R.gfm.table).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.pedantic=fe({},R.normal,{html:G(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",R._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:me,paragraph:G(R.normal._paragraph).replace("hr",R.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",R.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var E={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:me,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:me,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};E._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",E.punctuation=G(E.punctuation).replace(/punctuation/g,E._punctuation).getRegex(),E.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,E.escapedEmSt=/\\\*|\\_/g,E._comment=G(R._comment).replace("(?:-->|$)","-->").getRegex(),E.emStrong.lDelim=G(E.emStrong.lDelim).replace(/punct/g,E._punctuation).getRegex(),E.emStrong.rDelimAst=G(E.emStrong.rDelimAst,"g").replace(/punct/g,E._punctuation).getRegex(),E.emStrong.rDelimUnd=G(E.emStrong.rDelimUnd,"g").replace(/punct/g,E._punctuation).getRegex(),E._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,E._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,E._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,E.autolink=G(E.autolink).replace("scheme",E._scheme).replace("email",E._email).getRegex(),E._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,E.tag=G(E.tag).replace("comment",E._comment).replace("attribute",E._attribute).getRegex(),E._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,E._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,E._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,E.link=G(E.link).replace("label",E._label).replace("href",E._href).replace("title",E._title).getRegex(),E.reflink=G(E.reflink).replace("label",E._label).getRegex(),E.reflinkSearch=G(E.reflinkSearch,"g").replace("reflink",E.reflink).replace("nolink",E.nolink).getRegex(),E.normal=fe({},E),E.pedantic=fe({},E.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:G(/^!?\[(label)\]\((.*?)\)/).replace("label",E._label).getRegex(),reflink:G(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",E._label).getRegex()}),E.gfm=fe({},E.normal,{escape:G(E.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),E.gfm.url=G(E.gfm.url,"i").replace("email",E.gfm._extended_email).getRegex(),E.breaks=fe({},E.gfm,{br:G(E.br).replace("{2,}","*").getRegex(),text:G(E.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var he={block:R,inline:E},ce=se,je=o.exports.defaults,Me=he.block,Je=he.inline,on=we.repeatString;function po(O){return O.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Ys(O){var Y="",J,P,W=O.length;for(J=0;J<W;J++)P=O.charCodeAt(J),Math.random()>.5&&(P="x"+P.toString(16)),Y+="&#"+P+";";return Y}var xs=function(){function O(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||je,this.options.tokenizer=this.options.tokenizer||new ce,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var P={block:Me.normal,inline:Je.normal};this.options.pedantic?(P.block=Me.pedantic,P.inline=Je.pedantic):this.options.gfm&&(P.block=Me.gfm,this.options.breaks?P.inline=Je.breaks:P.inline=Je.gfm),this.tokenizer.rules=P}O.lex=function(P,W){var F=new O(W);return F.lex(P)},O.lexInline=function(P,W){var F=new O(W);return F.inlineTokens(P)};var Y=O.prototype;return Y.lex=function(P){P=P.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(P,this.tokens);for(var W;W=this.inlineQueue.shift();)this.inlineTokens(W.src,W.tokens);return this.tokens},Y.blockTokens=function(P,W){var F=this;W===void 0&&(W=[]),this.options.pedantic&&(P=P.replace(/^ +$/gm,""));for(var I,U,ee,re;P;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Ue){return(I=Ue.call({lexer:F},P,W))?(P=P.substring(I.raw.length),W.push(I),!0):!1}))){if(I=this.tokenizer.space(P)){P=P.substring(I.raw.length),I.type&&W.push(I);continue}if(I=this.tokenizer.code(P)){P=P.substring(I.raw.length),U=W[W.length-1],U&&(U.type==="paragraph"||U.type==="text")?(U.raw+=`
`+I.raw,U.text+=`
`+I.text,this.inlineQueue[this.inlineQueue.length-1].src=U.text):W.push(I);continue}if(I=this.tokenizer.fences(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.heading(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.hr(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.blockquote(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.list(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.html(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.def(P)){P=P.substring(I.raw.length),U=W[W.length-1],U&&(U.type==="paragraph"||U.type==="text")?(U.raw+=`
`+I.raw,U.text+=`
`+I.raw,this.inlineQueue[this.inlineQueue.length-1].src=U.text):this.tokens.links[I.tag]||(this.tokens.links[I.tag]={href:I.href,title:I.title});continue}if(I=this.tokenizer.table(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.lheading(P)){P=P.substring(I.raw.length),W.push(I);continue}if(ee=P,this.options.extensions&&this.options.extensions.startBlock&&function(){var Ue=1/0,Ze=P.slice(1),tt=void 0;F.options.extensions.startBlock.forEach(function(Ce){tt=Ce.call({lexer:this},Ze),typeof tt=="number"&&tt>=0&&(Ue=Math.min(Ue,tt))}),Ue<1/0&&Ue>=0&&(ee=P.substring(0,Ue+1))}(),this.state.top&&(I=this.tokenizer.paragraph(ee))){U=W[W.length-1],re&&U.type==="paragraph"?(U.raw+=`
`+I.raw,U.text+=`
`+I.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=U.text):W.push(I),re=ee.length!==P.length,P=P.substring(I.raw.length);continue}if(I=this.tokenizer.text(P)){P=P.substring(I.raw.length),U=W[W.length-1],U&&U.type==="text"?(U.raw+=`
`+I.raw,U.text+=`
`+I.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=U.text):W.push(I);continue}if(P){var Le="Infinite loop on byte: "+P.charCodeAt(0);if(this.options.silent){console.error(Le);break}else throw new Error(Le)}}return this.state.top=!0,W},Y.inline=function(P,W){this.inlineQueue.push({src:P,tokens:W})},Y.inlineTokens=function(P,W){var F=this;W===void 0&&(W=[]);var I,U,ee,re=P,Le,Ue,Ze;if(this.tokens.links){var tt=Object.keys(this.tokens.links);if(tt.length>0)for(;(Le=this.tokenizer.rules.inline.reflinkSearch.exec(re))!=null;)tt.includes(Le[0].slice(Le[0].lastIndexOf("[")+1,-1))&&(re=re.slice(0,Le.index)+"["+on("a",Le[0].length-2)+"]"+re.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Le=this.tokenizer.rules.inline.blockSkip.exec(re))!=null;)re=re.slice(0,Le.index)+"["+on("a",Le[0].length-2)+"]"+re.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Le=this.tokenizer.rules.inline.escapedEmSt.exec(re))!=null;)re=re.slice(0,Le.index)+"++"+re.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;P;)if(Ue||(Ze=""),Ue=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(We){return(I=We.call({lexer:F},P,W))?(P=P.substring(I.raw.length),W.push(I),!0):!1}))){if(I=this.tokenizer.escape(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.tag(P)){P=P.substring(I.raw.length),U=W[W.length-1],U&&I.type==="text"&&U.type==="text"?(U.raw+=I.raw,U.text+=I.text):W.push(I);continue}if(I=this.tokenizer.link(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.reflink(P,this.tokens.links)){P=P.substring(I.raw.length),U=W[W.length-1],U&&I.type==="text"&&U.type==="text"?(U.raw+=I.raw,U.text+=I.text):W.push(I);continue}if(I=this.tokenizer.emStrong(P,re,Ze)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.codespan(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.br(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.del(P)){P=P.substring(I.raw.length),W.push(I);continue}if(I=this.tokenizer.autolink(P,Ys)){P=P.substring(I.raw.length),W.push(I);continue}if(!this.state.inLink&&(I=this.tokenizer.url(P,Ys))){P=P.substring(I.raw.length),W.push(I);continue}if(ee=P,this.options.extensions&&this.options.extensions.startInline&&function(){var We=1/0,Yi=P.slice(1),At=void 0;F.options.extensions.startInline.forEach(function(Qn){At=Qn.call({lexer:this},Yi),typeof At=="number"&&At>=0&&(We=Math.min(We,At))}),We<1/0&&We>=0&&(ee=P.substring(0,We+1))}(),I=this.tokenizer.inlineText(ee,po)){P=P.substring(I.raw.length),I.raw.slice(-1)!=="_"&&(Ze=I.raw.slice(-1)),Ue=!0,U=W[W.length-1],U&&U.type==="text"?(U.raw+=I.raw,U.text+=I.text):W.push(I);continue}if(P){var Ce="Infinite loop on byte: "+P.charCodeAt(0);if(this.options.silent){console.error(Ce);break}else throw new Error(Ce)}}return W},t(O,null,[{key:"rules",get:function(){return{block:Me,inline:Je}}}]),O}(),Vi=o.exports.defaults,Fn=we.cleanUrl,Ds=we.escape,In=function(){function O(J){this.options=J||Vi}var Y=O.prototype;return Y.code=function(P,W,F){var I=(W||"").match(/\S*/)[0];if(this.options.highlight){var U=this.options.highlight(P,I);U!=null&&U!==P&&(F=!0,P=U)}return P=P.replace(/\n$/,"")+`
`,I?'<pre><code class="'+this.options.langPrefix+Ds(I,!0)+'">'+(F?P:Ds(P,!0))+`</code></pre>
`:"<pre><code>"+(F?P:Ds(P,!0))+`</code></pre>
`},Y.blockquote=function(P){return`<blockquote>
`+P+`</blockquote>
`},Y.html=function(P){return P},Y.heading=function(P,W,F,I){return this.options.headerIds?"<h"+W+' id="'+this.options.headerPrefix+I.slug(F)+'">'+P+"</h"+W+`>
`:"<h"+W+">"+P+"</h"+W+`>
`},Y.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Y.list=function(P,W,F){var I=W?"ol":"ul",U=W&&F!==1?' start="'+F+'"':"";return"<"+I+U+`>
`+P+"</"+I+`>
`},Y.listitem=function(P){return"<li>"+P+`</li>
`},Y.checkbox=function(P){return"<input "+(P?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Y.paragraph=function(P){return"<p>"+P+`</p>
`},Y.table=function(P,W){return W&&(W="<tbody>"+W+"</tbody>"),`<table>
<thead>
`+P+`</thead>
`+W+`</table>
`},Y.tablerow=function(P){return`<tr>
`+P+`</tr>
`},Y.tablecell=function(P,W){var F=W.header?"th":"td",I=W.align?"<"+F+' align="'+W.align+'">':"<"+F+">";return I+P+"</"+F+`>
`},Y.strong=function(P){return"<strong>"+P+"</strong>"},Y.em=function(P){return"<em>"+P+"</em>"},Y.codespan=function(P){return"<code>"+P+"</code>"},Y.br=function(){return this.options.xhtml?"<br/>":"<br>"},Y.del=function(P){return"<del>"+P+"</del>"},Y.link=function(P,W,F){if(P=Fn(this.options.sanitize,this.options.baseUrl,P),P===null)return F;var I='<a href="'+Ds(P)+'"';return W&&(I+=' title="'+W+'"'),I+=">"+F+"</a>",I},Y.image=function(P,W,F){if(P=Fn(this.options.sanitize,this.options.baseUrl,P),P===null)return F;var I='<img src="'+P+'" alt="'+F+'"';return W&&(I+=' title="'+W+'"'),I+=this.options.xhtml?"/>":">",I},Y.text=function(P){return P},O}(),ks=function(){function O(){}var Y=O.prototype;return Y.strong=function(P){return P},Y.em=function(P){return P},Y.codespan=function(P){return P},Y.del=function(P){return P},Y.html=function(P){return P},Y.text=function(P){return P},Y.link=function(P,W,F){return""+F},Y.image=function(P,W,F){return""+F},Y.br=function(){return""},O}(),C=function(){function O(){this.seen={}}var Y=O.prototype;return Y.serialize=function(P){return P.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Y.getNextSafeSlug=function(P,W){var F=P,I=0;if(this.seen.hasOwnProperty(F)){I=this.seen[P];do I++,F=P+"-"+I;while(this.seen.hasOwnProperty(F))}return W||(this.seen[P]=I,this.seen[F]=0),F},Y.slug=function(P,W){W===void 0&&(W={});var F=this.serialize(P);return this.getNextSafeSlug(F,W.dryrun)},O}(),A=In,N=ks,q=C,X=o.exports.defaults,de=we.unescape,xe=function(){function O(J){this.options=J||X,this.options.renderer=this.options.renderer||new A,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new N,this.slugger=new q}O.parse=function(P,W){var F=new O(W);return F.parse(P)},O.parseInline=function(P,W){var F=new O(W);return F.parseInline(P)};var Y=O.prototype;return Y.parse=function(P,W){W===void 0&&(W=!0);var F="",I,U,ee,re,Le,Ue,Ze,tt,Ce,We,Yi,At,Qn,hh,un,ad,Ay,ld,hd,Iy=P.length;for(I=0;I<Iy;I++){if(We=P[I],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[We.type]&&(hd=this.options.extensions.renderers[We.type].call({parser:this},We),hd!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(We.type))){F+=hd||"";continue}switch(We.type){case"space":continue;case"hr":{F+=this.renderer.hr();continue}case"heading":{F+=this.renderer.heading(this.parseInline(We.tokens),We.depth,de(this.parseInline(We.tokens,this.textRenderer)),this.slugger);continue}case"code":{F+=this.renderer.code(We.text,We.lang,We.escaped);continue}case"table":{for(tt="",Ze="",re=We.header.length,U=0;U<re;U++)Ze+=this.renderer.tablecell(this.parseInline(We.header[U].tokens),{header:!0,align:We.align[U]});for(tt+=this.renderer.tablerow(Ze),Ce="",re=We.rows.length,U=0;U<re;U++){for(Ue=We.rows[U],Ze="",Le=Ue.length,ee=0;ee<Le;ee++)Ze+=this.renderer.tablecell(this.parseInline(Ue[ee].tokens),{header:!1,align:We.align[ee]});Ce+=this.renderer.tablerow(Ze)}F+=this.renderer.table(tt,Ce);continue}case"blockquote":{Ce=this.parse(We.tokens),F+=this.renderer.blockquote(Ce);continue}case"list":{for(Yi=We.ordered,At=We.start,Qn=We.loose,re=We.items.length,Ce="",U=0;U<re;U++)un=We.items[U],ad=un.checked,Ay=un.task,hh="",un.task&&(ld=this.renderer.checkbox(ad),Qn?un.tokens.length>0&&un.tokens[0].type==="paragraph"?(un.tokens[0].text=ld+" "+un.tokens[0].text,un.tokens[0].tokens&&un.tokens[0].tokens.length>0&&un.tokens[0].tokens[0].type==="text"&&(un.tokens[0].tokens[0].text=ld+" "+un.tokens[0].tokens[0].text)):un.tokens.unshift({type:"text",text:ld}):hh+=ld),hh+=this.parse(un.tokens,Qn),Ce+=this.renderer.listitem(hh,Ay,ad);F+=this.renderer.list(Ce,Yi,At);continue}case"html":{F+=this.renderer.html(We.text);continue}case"paragraph":{F+=this.renderer.paragraph(this.parseInline(We.tokens));continue}case"text":{for(Ce=We.tokens?this.parseInline(We.tokens):We.text;I+1<Iy&&P[I+1].type==="text";)We=P[++I],Ce+=`
`+(We.tokens?this.parseInline(We.tokens):We.text);F+=W?this.renderer.paragraph(Ce):Ce;continue}default:{var qg='Token with "'+We.type+'" type was not found.';if(this.options.silent){console.error(qg);return}else throw new Error(qg)}}}return F},Y.parseInline=function(P,W){W=W||this.renderer;var F="",I,U,ee,re=P.length;for(I=0;I<re;I++){if(U=P[I],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[U.type]&&(ee=this.options.extensions.renderers[U.type].call({parser:this},U),ee!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(U.type))){F+=ee||"";continue}switch(U.type){case"escape":{F+=W.text(U.text);break}case"html":{F+=W.html(U.text);break}case"link":{F+=W.link(U.href,U.title,this.parseInline(U.tokens,W));break}case"image":{F+=W.image(U.href,U.title,U.text);break}case"strong":{F+=W.strong(this.parseInline(U.tokens,W));break}case"em":{F+=W.em(this.parseInline(U.tokens,W));break}case"codespan":{F+=W.codespan(U.text);break}case"br":{F+=W.br();break}case"del":{F+=W.del(this.parseInline(U.tokens,W));break}case"text":{F+=W.text(U.text);break}default:{var Le='Token with "'+U.type+'" type was not found.';if(this.options.silent){console.error(Le);return}else throw new Error(Le)}}}return F},O}(),Lt=xs,_i=xe,Wt=se,zt=In,bi=ks,lh=C,tl=we.merge,Ug=we.checkSanitizeDeprecation,Qs=we.escape,od=o.exports.getDefaults,$g=o.exports.changeDefaults,jg=o.exports.defaults;function ft(O,Y,J){if(typeof O>"u"||O===null)throw new Error("marked(): input parameter is undefined or null");if(typeof O!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(O)+", string expected");if(typeof Y=="function"&&(J=Y,Y=null),Y=tl({},ft.defaults,Y||{}),Ug(Y),J){var P=Y.highlight,W;try{W=Lt.lex(O,Y)}catch(ee){return J(ee)}var F=function(re){var Le;if(!re)try{Y.walkTokens&&ft.walkTokens(W,Y.walkTokens),Le=_i.parse(W,Y)}catch(Ue){re=Ue}return Y.highlight=P,re?J(re):J(null,Le)};if(!P||P.length<3||(delete Y.highlight,!W.length))return F();var I=0;ft.walkTokens(W,function(ee){ee.type==="code"&&(I++,setTimeout(function(){P(ee.text,ee.lang,function(re,Le){if(re)return F(re);Le!=null&&Le!==ee.text&&(ee.text=Le,ee.escaped=!0),I--,I===0&&F()})},0))}),I===0&&F();return}try{var U=Lt.lex(O,Y);return Y.walkTokens&&ft.walkTokens(U,Y.walkTokens),_i.parse(U,Y)}catch(ee){if(ee.message+=`
Please report this to https://github.com/markedjs/marked.`,Y.silent)return"<p>An error occurred:</p><pre>"+Qs(ee.message+"",!0)+"</pre>";throw ee}}ft.options=ft.setOptions=function(O){return tl(ft.defaults,O),$g(ft.defaults),ft},ft.getDefaults=od,ft.defaults=jg,ft.use=function(){for(var O=this,Y=arguments.length,J=new Array(Y),P=0;P<Y;P++)J[P]=arguments[P];var W=tl.apply(void 0,[{}].concat(J)),F=ft.defaults.extensions||{renderers:{},childTokens:{}},I;J.forEach(function(U){if(U.extensions&&(I=!0,U.extensions.forEach(function(re){if(!re.name)throw new Error("extension name required");if(re.renderer){var Le=F.renderers?F.renderers[re.name]:null;Le?F.renderers[re.name]=function(){for(var Ue=arguments.length,Ze=new Array(Ue),tt=0;tt<Ue;tt++)Ze[tt]=arguments[tt];var Ce=re.renderer.apply(this,Ze);return Ce===!1&&(Ce=Le.apply(this,Ze)),Ce}:F.renderers[re.name]=re.renderer}if(re.tokenizer){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[re.level]?F[re.level].unshift(re.tokenizer):F[re.level]=[re.tokenizer],re.start&&(re.level==="block"?F.startBlock?F.startBlock.push(re.start):F.startBlock=[re.start]:re.level==="inline"&&(F.startInline?F.startInline.push(re.start):F.startInline=[re.start]))}re.childTokens&&(F.childTokens[re.name]=re.childTokens)})),U.renderer&&function(){var re=ft.defaults.renderer||new zt,Le=function(tt){var Ce=re[tt];re[tt]=function(){for(var We=arguments.length,Yi=new Array(We),At=0;At<We;At++)Yi[At]=arguments[At];var Qn=U.renderer[tt].apply(re,Yi);return Qn===!1&&(Qn=Ce.apply(re,Yi)),Qn}};for(var Ue in U.renderer)Le(Ue);W.renderer=re}(),U.tokenizer&&function(){var re=ft.defaults.tokenizer||new Wt,Le=function(tt){var Ce=re[tt];re[tt]=function(){for(var We=arguments.length,Yi=new Array(We),At=0;At<We;At++)Yi[At]=arguments[At];var Qn=U.tokenizer[tt].apply(re,Yi);return Qn===!1&&(Qn=Ce.apply(re,Yi)),Qn}};for(var Ue in U.tokenizer)Le(Ue);W.tokenizer=re}(),U.walkTokens){var ee=ft.defaults.walkTokens;W.walkTokens=function(re){U.walkTokens.call(O,re),ee&&ee(re)}}I&&(W.extensions=F),ft.setOptions(W)})},ft.walkTokens=function(O,Y){for(var J=function(){var I=W.value;switch(Y(I),I.type){case"table":{for(var U=r(I.header),ee;!(ee=U()).done;){var re=ee.value;ft.walkTokens(re.tokens,Y)}for(var Le=r(I.rows),Ue;!(Ue=Le()).done;)for(var Ze=Ue.value,tt=r(Ze),Ce;!(Ce=tt()).done;){var We=Ce.value;ft.walkTokens(We.tokens,Y)}break}case"list":{ft.walkTokens(I.items,Y);break}default:ft.defaults.extensions&&ft.defaults.extensions.childTokens&&ft.defaults.extensions.childTokens[I.type]?ft.defaults.extensions.childTokens[I.type].forEach(function(Yi){ft.walkTokens(I[Yi],Y)}):I.tokens&&ft.walkTokens(I.tokens,Y)}},P=r(O),W;!(W=P()).done;)J()},ft.parseInline=function(O,Y){if(typeof O>"u"||O===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof O!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(O)+", string expected");Y=tl({},ft.defaults,Y||{}),Ug(Y);try{var J=Lt.lexInline(O,Y);return Y.walkTokens&&ft.walkTokens(J,Y.walkTokens),_i.parseInline(J,Y)}catch(P){if(P.message+=`
Please report this to https://github.com/markedjs/marked.`,Y.silent)return"<p>An error occurred:</p><pre>"+Qs(P.message+"",!0)+"</pre>";throw P}},ft.Parser=_i,ft.parser=_i.parse,ft.Renderer=zt,ft.TextRenderer=bi,ft.Lexer=Lt,ft.lexer=Lt.lex,ft.Tokenizer=Wt,ft.Slugger=lh,ft.parse=ft;var il=ft;return il})})();ah.Parser;ah.parser;var lVe=ah.Renderer;ah.TextRenderer;ah.Lexer;ah.lexer;ah.Tokenizer;ah.Slugger;var hVe=ah.parse;function cVe(i,e={},t={}){var n;const s=new ve;let r=!1;const o=s.add(new Ya),a=mB(e),l=function(p){let m;try{m=IR(decodeURIComponent(p))}catch{}return m?(m=g2e(m,b=>{if(i.uris&&i.uris[b])return Ke.revive(i.uris[b])}),encodeURIComponent(JSON.stringify(m))):p},h=function(p,m){const b=i.uris&&i.uris[p];if(!b)return p;let _=Ke.revive(b);return m?p.startsWith(dt.data+":")?p:VX.asBrowserUri(_).toString(!0):Ke.parse(p).toString()===_.toString()?p:(_.query&&(_=_.with({query:l(_.query)})),_.toString())};let c;const u=new Promise(p=>c=p),d=new lVe;if(d.image=(p,m,b)=>{let _=[],w=[];if(p){({href:p,dimensions:_}=FFe(p)),p=h(p,!0);try{const y=Ke.parse(p);e.baseUrl&&y.scheme===dt.file&&(p=cW(e.baseUrl,p).toString())}catch{}w.push(`src="${p}"`)}return b&&w.push(`alt="${b}"`),m&&w.push(`title="${m}"`),_.length&&(w=w.concat(_)),"<img "+w.join(" ")+">"},d.link=(p,m,b)=>(p===b&&(b=uT(b)),p=h(p,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(p)||(p=cW(e.baseUrl,p).toString())),m=uT(m),p=uT(p),!p||p.match(/^data:|javascript:/i)||p.match(/^command:/i)&&!i.isTrusted||p.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?b:(p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${p}" title="${m||p}">${b}</a>`)),d.paragraph=p=>`<p>${p}</p>`,e.codeBlockRenderer&&(d.code=(p,m)=>{const b=e.codeBlockRenderer(m,p),_=yie.nextId();return FX(Promise.all([b,u]),o.token).then(w=>{var y;if(!r&&w){const x=a.querySelector(`div[data-code="${_}"]`);x&&ay(x,w[0]),(y=e.asyncRenderCallback)===null||y===void 0||y.call(e)}}).catch(()=>{}),`<div class="code" data-code="${_}">${T5(p)}</div>`}),e.actionHandler){const p=e.actionHandler.disposables.add(new $t(a,"click")),m=e.actionHandler.disposables.add(new $t(a,"auxclick"));e.actionHandler.disposables.add(Re.any(p.event,m.event)(b=>{const _=new Jr(b);if(!_.leftButton&&!_.middleButton)return;let w=_.target;if(!(w.tagName!=="A"&&(w=w.parentElement,!w||w.tagName!=="A")))try{const y=w.dataset.href;y&&e.actionHandler.callback(y,_)}catch(y){nt(y)}finally{_.preventDefault()}}))}i.supportHtml||(t.sanitizer=p=>(i.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(n=i.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}`),i.supportThemeIcons&&(f=WPe(f));let g=hVe(f,t);if(i.supportThemeIcons&&(g=Lm(g).map(m=>typeof m=="string"?m:m.outerHTML).join("")),a.innerHTML=uVe(i,g),c(),e.asyncRenderCallback)for(const p of a.getElementsByTagName("img")){const m=s.add(oe(p,"load",()=>{m.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,o.cancel(),s.dispose()}}}function uVe(i,e){const{config:t,allowedSchemes:n}=dVe(i);QU("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const s=document.createElement("a");QU("afterSanitizeAttributes",r=>{for(const o of["href","src"])r.hasAttribute(o)&&(s.href=r.getAttribute(o),n.includes(s.protocol.replace(/:$/,""))||r.removeAttribute(o))});try{return aVe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{XU("uponSanitizeAttribute"),XU("afterSanitizeAttributes")}}function dVe(i){const e=[dt.http,dt.https,dt.mailto,dt.data,dt.file,dt.vscodeFileResource,dt.vscodeRemote,dt.vscodeRemoteResource];return i.isTrusted&&e.push(dt.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var fVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},gVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})},IT;let ag=class Pne{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new H,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new ve;return{element:s.add(cVe(e,Object.assign(Object.assign({},this._getRenderOptions(e,s)),t),n)).element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,s)=>gVe(this,void 0,void 0,function*(){var r,o,a,l;let h;n?h=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(h=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),h||(h="plaintext"),this._modeService.triggerMode(h);const c=(o=yield Ri.getPromise(h))!==null&&o!==void 0?o:void 0,u=document.createElement("span");if(u.innerHTML=(l=(a=Pne._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(s,this._modeService.languageIdCodec,c))!==null&&l!==void 0?l:yte(s,this._modeService.languageIdCodec,c),this._options.editor){const d=this._options.editor.getOption(43);Kn.applyFontInfoSlow(u,d)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return u}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(nt),disposables:t}}}};ag._ttpTokenizer=(IT=window.trustedTypes)===null||IT===void 0?void 0:IT.createPolicy("tokenizeToString",{createHTML(i,e,t){return yte(i,e,t)}});ag=fVe([JU(1,Gs),JU(2,Ru)],ag);function Fne(i,e,t){const s=f1.ordered(i).map(r=>Promise.resolve(r.provideHover(i,e,t)).then(o=>o&&pVe(o)?o:void 0,o=>{ta(o)}));return Promise.all(s).then(e2)}r_("_executeHoverProvider",(i,e)=>Fne(i,e,ri.None));function pVe(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var mVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},TT=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},_Ve=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const e$=_e;class YC{constructor(e,t,n){this.owner=e,this.range=t,this.contents=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let O4=class{constructor(e,t,n,s,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=s,this._configurationService=r}createLoadingMessage(e){return new YC(this,e.range,[new _0().appendText(v("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const c of t){const u=c.range.startLineNumber===s?c.range.startColumn:1,d=c.range.endLineNumber===s?c.range.endColumn:r,f=c.options.hoverMessage;if(!f||bv(f))continue;const g=new V(e.range.startLineNumber,u,e.range.startLineNumber,d);o.push(new YC(this,g,BJ(f)))}const a=n.getLineLength(s),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return typeof h=="number"&&a>=h&&o.push(new YC(this,e.range,[{value:v("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),o}computeAsync(e,t,n){return _Ve(this,void 0,void 0,function*(){if(!this._editor.hasModel()||e.type!==1)return Promise.resolve([]);const s=this._editor.getModel();if(!f1.has(s))return Promise.resolve([]);const r=yield Fne(s,new K(e.range.startLineNumber,e.range.startColumn),n),o=[];for(const a of r){if(bv(a.contents))continue;const l=a.range?V.lift(a.range):e.range;o.push(new YC(this,l,a.contents))}return o})}renderHoverParts(e,t,n){const s=new ve;for(const r of e)for(const o of r.contents){if(bv(o))continue;const a=e$("div.hover-row.markdown-hover"),l=ae(a,e$("div.hover-contents")),h=s.add(new ag({editor:this._editor},this._modeService,this._openerService));s.add(h.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const c=s.add(h.render(o));l.appendChild(c.element),t.appendChild(a)}return s}};O4=mVe([TT(2,Gs),TT(3,Ru),TT(4,Ki)],O4);class Pt{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Pt.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Pt(this.value+Pt.sep+e)}}Pt.sep=".";Pt.None=new Pt("@@none@@");Pt.Empty=new Pt("");Pt.QuickFix=new Pt("quickfix");Pt.Refactor=new Pt("refactor");Pt.Source=new Pt("source");Pt.SourceOrganizeImports=Pt.Source.append("organizeImports");Pt.SourceFixAll=Pt.Source.append("fixAll");function bVe(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>Bne(e,t,i.include))||!i.includeSourceActions&&Pt.Source.contains(e))}function vVe(i,e){const t=e.kind?new Pt(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>Bne(t,n,i.include))||!i.includeSourceActions&&t&&Pt.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function Bne(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class Pd{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Pd(t.kind,t.apply,!1):new Pd(Pd.getKindFromUser(e,t.kind),Pd.getApplyFromUser(e,t.apply),Pd.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Pt(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var TB=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const wVe="editor.action.codeAction",yVe="editor.action.refactor",CVe="editor.action.sourceAction",Vne="editor.action.organizeImports",Wne="editor.action.fixAll";class zne{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return TB(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(s){ta(s)}n&&(this.action.edit=n.edit)}return this})}}class NB extends ne{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(NB.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:$l(e.diagnostics)?$l(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:$l(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Pt.QuickFix.contains(new Pt(e.kind))&&!!e.isPreferred)}}const t$={actions:[],documentation:void 0};function MB(i,e,t,n,s){var r;const o=t.filter||{},a={only:(r=o.include)===null||r===void 0?void 0:r.value,trigger:t.type},l=new X4e(i,s),h=SVe(i,o),c=new ve,u=h.map(f=>TB(this,void 0,void 0,function*(){try{n.report(f);const g=yield f.provideCodeActions(i,e,a,l.token);if(g&&c.add(g),l.token.isCancellationRequested)return t$;const p=((g==null?void 0:g.actions)||[]).filter(b=>b&&vVe(o,b)),m=xVe(f,p,o.include);return{actions:p.map(b=>new zne(b,f)),documentation:m}}catch(g){if(sd(g))throw g;return ta(g),t$}})),d=Hl.onDidChange(()=>{const f=Hl.all(i);Ul(f,h)||l.cancel()});return Promise.all(u).then(f=>{const g=Z5(f.map(m=>m.actions)),p=e2(f.map(m=>m.documentation));return new NB(g,p,c)}).finally(()=>{d.dispose(),l.dispose()})}function SVe(i,e){return Hl.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>bVe(e,new Pt(n))):!0)}function xVe(i,e,t){if(!i.documentation)return;const n=i.documentation.map(s=>({kind:new Pt(s.kind),command:s.command}));if(t){let s;for(const r of n)r.kind.contains(t)&&(s?s.kind.contains(r.kind)&&(s=r):s=r);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const r of n)if(r.kind.contains(new Pt(s.kind)))return r.command}}Ft.registerCommand("_executeCodeActionProvider",function(i,e,t,n,s){return TB(this,void 0,void 0,function*(){if(!(e instanceof Ke))throw Bl();const r=i.get(qs).getModel(e);if(!r)throw Bl();const o=Ge.isISelection(t)?Ge.liftSelection(t):V.isIRange(t)?r.validateRange(t):void 0;if(!o)throw Bl();const a=typeof n=="string"?new Pt(n):void 0,l=yield MB(r,o,{type:1,filter:{includeSourceActions:!0,include:a}},E2.None,ri.None),h=[],c=Math.min(l.validActions.length,typeof s=="number"?s:0);for(let u=0;u<c;u++)h.push(l.validActions[u].resolve(ri.None));try{return yield Promise.all(h),l.validActions.map(u=>u.action)}finally{setTimeout(()=>l.dispose(),100)}})});class Nk{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var DVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},i$=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},kVe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class n$ extends Go{constructor(e,t){super(e.command?e.command.id:e.title,LVe(e.title),void 0,!e.disabled,t),this.action=e}}function LVe(i){return i.replace(/\r\n|\r|\n/g," ")}let P4=class extends ne{constructor(e,t,n,s){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Vr),this._keybindingResolver=new tE({getKeybindings:()=>s.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,s){return kVe(this,void 0,void 0,function*(){const r=s.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,Q0();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,r,t.documentation),a=K.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),h=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:h?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:c=>c instanceof n$?l(c.action):void 0})})}getMenuActions(e,t,n){var s,r;const o=c=>new n$(c.action,()=>this._delegate.onSelectCodeAction(c)),a=t.map(o),l=[...n],h=this._editor.getModel();if(h&&a.length)for(const c of Hl.all(h))c._getAdditionalMenuItems&&l.push(...c._getAdditionalMenuItems({trigger:e.type,only:(r=(s=e.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},t.map(u=>u.action)));return l.length&&a.push(new La,...l.map(c=>o(new zne({title:c.title,command:c},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Un(this._editor.getDomNode()),s=n.left+t.left,r=n.top+t.top+t.height;return{x:s,y:r}}};P4=DVe([i$(2,Ng),i$(3,Zi)],P4);class tE{constructor(e){this._keybindingProvider=e}getResolver(){const e=new Nk(()=>this._keybindingProvider.getKeybindings().filter(t=>tE.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===Vne?n={kind:Pt.SourceOrganizeImports.value}:t.command===Wne&&(n={kind:Pt.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Pd.fromUser(n,{kind:Pt.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Pt(e.kind);return t.filter(s=>s.kind.contains(n)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,r)=>s?s.kind.contains(r.kind)?r:s:r,void 0)}}tE.codeActionCommands=[yVe,wVe,CVe,Vne,Wne];var EVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AVe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},yv;(function(i){i.Hidden={type:0};class e{constructor(n,s,r,o){this.actions=n,this.trigger=s,this.editorPosition=r,this.widgetPosition=o,this.type=1}}i.Showing=e})(yv||(yv={}));let Mk=class Hne extends ne{constructor(e,t,n,s){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=s,this._onClick=this._register(new H),this.onClick=this._onClick.event,this._state=yv.Hidden,this._domNode=document.createElement("div"),this._domNode.className=De.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),Mt.ignoreTarget(this._domNode),this._register(dLe(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();const{top:o,height:a}=Un(this._domNode),l=this._editor.getOption(58);let h=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(h+=l),this._onClick.fire({x:r.posx,y:o+a+h,actions:this.state.actions,trigger:this.state.trigger})})),this._register(oe(this._domNode,"mouseenter",r=>{if((r.buttons&1)!==1)return;this.hide();const o=new Ag;o.startMonitoring(r.target,r.buttons,o_,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const s=this._editor.getOptions();if(!s.get(56).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:o,column:a}=r.validatePosition(n),l=r.getOptions().tabSize,h=s.get(43),c=r.getLineContent(o),u=oo.computeIndentLevel(c,l),d=h.spaceWidth*u>22,f=p=>p>2&&this._editor.getTopForLineNumber(p)===this._editor.getTopForLineNumber(p-1);let g=o;if(!d){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*h.spaceWidth<22)return this.hide()}this.state=new yv.Showing(e,t,n,{position:{lineNumber:g,column:1},preference:Hne._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=yv.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...De.lightBulb.classNamesArray),this._domNode.classList.add(...De.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=v("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...De.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...De.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=v("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=v("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};Mk._posPref=[0];Mk=EVe([AVe(3,Zi)],Mk);oi((i,e)=>{var t;const n=(t=i.getColor(io))===null||t===void 0?void 0:t.transparent(.7),s=i.getColor(PNe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${De.lightBulb.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`);const r=i.getColor(FNe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${De.lightbulbAutofix.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`)});var IVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},TVe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},NT=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})},NVe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},MVe=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},ox;let F4=class extends ne{constructor(e,t,n,s,r){super(),this._editor=e,this.delegate=s,this._activeCodeActions=this._register(new Vr),ox.set(this,!1),this._codeActionWidget=new Nk(()=>this._register(r.createInstance(P4,this._editor,{onSelectCodeAction:o=>NT(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new Nk(()=>{const o=this._register(r.createInstance(Mk,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){NVe(this,ox,!0,"f"),super.dispose()}update(e){var t,n,s;return NT(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let r;try{r=yield e.actions}catch(o){nt(o);return}if(!MVe(this,ox,"f"))if(this._lightBulbWidget.getValue().update(r,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,r);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{r.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,r);if(l&&l.action.disabled){Xo.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),r.dispose();return}}}const o=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!r.allActions.length||!o&&!r.validActions.length)){Xo.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=r,r.dispose();return}this._activeCodeActions.value=r,this._codeActionWidget.getValue().show(e.trigger,r,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?r.dispose():this._activeCodeActions.value=r})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,s){return NT(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,s)})}};ox=new WeakMap;F4=IVe([TVe(4,qt)],F4);var MT=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},RVe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},Ep;const Une=new Ie("supportedCodeAction","");class OVe extends ne{constructor(e,t,n,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=s,this._autoTriggerTimer=this._register(new js),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>nJ(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const s=t.validateRange(n);if(V.intersectRanges(s,e))return V.lift(s)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:s,column:r}=n.getPosition(),o=t.getLineContent(s);if(o.length===0)return;if(r===1){if(/\s/.test(o[0]))return}else if(r===t.getLineMaxColumn(s)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[r-2])&&/\s/.test(o[r-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const s=this._getRangeOfMarker(t),r=s?s.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:r};return this._signalChange(o),o}}var Fd;(function(i){i.Empty={type:0};class e{constructor(n,s,r,o){this.trigger=n,this.rangeOrSelection=s,this.position=r,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(sd(a))return PVe;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(Fd||(Fd={}));const PVe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class FVe extends ne{constructor(e,t,n,s){super(),this._editor=e,this._markerService=t,this._progressService=s,this._codeActionOracle=this._register(new Vr),this._state=Fd.Empty,this._onDidChangeState=this._register(new H),this.onDidChangeState=this._onDidChangeState.event,Ep.set(this,!1),this._supportedCodeActions=Une.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(Hl.onDidChange(()=>this._update())),this._update()}dispose(){MT(this,Ep,"f")||(RVe(this,Ep,!0,"f"),super.dispose(),this.setState(Fd.Empty,!0))}_update(){if(MT(this,Ep,"f"))return;this._codeActionOracle.value=void 0,this.setState(Fd.Empty);const e=this._editor.getModel();if(e&&Hl.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of Hl.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new OVe(this._editor,this._markerService,n=>{var s;if(!n){this.setState(Fd.Empty);return}const r=Wr(o=>MB(e,n.selection,n.trigger,E2.None,o));n.trigger.type===1&&((s=this._progressService)===null||s===void 0||s.showWhile(r,250)),this.setState(new Fd.Triggered(n.trigger,n.selection,n.position,r))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!MT(this,Ep,"f")&&this._onDidChangeState.fire(e))}}Ep=new WeakMap;var BVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},$ne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};function VVe(i){return Ae.regex(Une.keys()[0],new RegExp("(\\s|^)"+Fa(i.value)+"\\b"))}v("args.schema.kind","Kind of the code action to run."),v("args.schema.apply","Controls when the returned actions are applied."),v("args.schema.apply.first","Always apply the first returned code action."),v("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),v("args.schema.apply.never","Do not apply the returned code actions."),v("args.schema.preferred","Controls if only preferred code actions should be returned.");let ow=class jne extends ne{constructor(e,t,n,s,r){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new FVe(this._editor,t,n,s)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new Nk(()=>this._register(new F4(e,Ly.Id,iE.Id,{applyCodeAction:(o,a)=>$ne(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(jne.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Xo.get(this._editor).closeMessage();const s=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(WVe,e,this._editor)}};ow.ID="editor.contrib.quickFixController";ow=BVe([QC(1,wy),QC(2,Xe),QC(3,u_),QC(4,qt)],ow);function WVe(i,e,t){return $ne(this,void 0,void 0,function*(){const n=i.get(GJ),s=i.get(An),r=i.get(s_),o=i.get(Yn);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(ri.None),e.action.edit&&(yield n.apply(tF.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=zVe(a);o.error(typeof l=="string"?l:v("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function zVe(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function qne(i,e,t,n){if(i.hasModel()){const s=ow.get(i);s&&s.manualTriggerAtCurrentPosition(e,t,n)}}class Ly extends Si{constructor(){super({id:Ly.Id,label:v("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Ae.and(Z.writable,Z.hasCodeActionsProvider),kbOpts:{kbExpr:Z.editorTextFocus,primary:2132,weight:100}})}run(e,t){return qne(t,v("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}Ly.Id="editor.action.quickFix";class iE extends Si{constructor(){super({id:iE.Id,label:v("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Ae.and(Z.writable,VVe(Pt.QuickFix)),kbOpts:{kbExpr:Z.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return qne(t,v("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Pt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}iE.Id="editor.action.autoFix";var Gne=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Kne=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class s${constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let B4=class Zne{constructor(e,t){this._markerService=t,this._onDidChange=new H,this.onDidChange=this._onDidChange.event,this._dispoables=new ve,this._markers=[],this._nextIdx=-1,Ke.isUri(e)?this._resourceFilter=s=>s.toString()===e.toString():e&&(this._resourceFilter=e);const n=()=>{this._markers=this._markerService.read({resource:Ke.isUri(e)?e:void 0,severities:gi.Error|gi.Warning|gi.Info}),typeof e=="function"&&(this._markers=this._markers.filter(s=>this._resourceFilter(s.resource))),this._markers.sort(Zne._compareMarker)};n(),this._dispoables.add(t.onMarkerChanged(s=>{(!this._resourceFilter||s.some(r=>this._resourceFilter(r)))&&(n(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new s$(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let s=!1,r=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());r<0&&(r=K5(this._markers,{resource:e.uri},(o,a)=>c1(o.resource.toString(),a.resource.toString())),r<0&&(r=~r));for(let o=r;o<this._markers.length;o++){let a=V.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new V(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,s=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let n=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(V.containsPosition(this._markers[n],t))return new s$(this._markers[n],n+1,this._markers.length)}}static _compareMarker(e,t){let n=c1(e.resource.toString(),t.resource.toString());return n===0&&(n=gi.compare(e.severity,t.severity)),n===0&&(n=V.compareRangesUsingStarts(e,t)),n}};B4=Gne([Kne(1,wy)],B4);const Yne=kt("IMarkerNavigationService");let V4=class{constructor(e){this._markerService=e,this._provider=new Ar}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new B4(e,this._markerService)}};V4=Gne([Kne(0,wy)],V4);Dg(Yne,V4,!0);var W4;(function(i){function e(t){switch(t){case Ei.Ignore:return"severity-ignore "+De.info.classNames;case Ei.Info:return De.info.classNames;case Ei.Warning:return De.warning.classNames;case Ei.Error:return De.error.classNames;default:return""}}i.className=e})(W4||(W4={}));oi((i,e)=>{const t=i.getColor(DMe);if(t){const r=De.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.text-search-provider-messages .providerMessage ${r},
			.extensions-viewlet > .extensions ${r} {
				color: ${t};
			}
		`)}const n=i.getColor(kMe);if(n){const r=De.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.extension-editor ${r},
			.text-search-provider-messages .providerMessage ${r},
			.preferences-editor ${r} {
				color: ${n};
			}
		`)}const s=i.getColor(LMe);if(s){const r=De.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.text-search-provider-messages .providerMessage ${r},
			.extension-editor ${r} {
				color: ${s};
			}
		`)}});var HVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pp=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class UVe{constructor(e,t,n,s,r){this._openerService=s,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ve,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(cn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new NF(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){mt(this._disposables)}update(e){const{source:t,message:n,relatedInformation:s,code:r}=e;let o=((t==null?void 0:t.length)||0)+2;r&&(typeof r=="string"?o+=r.length:o+=r.value.length);const a=ql(n);this._lines=a.length,this._longestLineLength=0;for(const d of a)this._longestLineLength=Math.max(d.length+o,this._longestLineLength);jn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const d of a)l=document.createElement("div"),l.innerText=d,d===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){const d=document.createElement("span");if(d.classList.add("details"),l.appendChild(d),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),d.appendChild(f)}if(r)if(typeof r=="string"){const f=document.createElement("span");f.innerText=`(${r})`,f.classList.add("code"),d.appendChild(f)}else{this._codeLink=_e("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(r.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=ae(this._codeLink,_e("span"));f.innerText=r.value,d.appendChild(this._codeLink)}}if(jn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),$l(s)){const d=this._relatedBlock.appendChild(document.createElement("div"));d.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const f of s){let g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${dne(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);let m=document.createElement("span");m.innerText=f.message,g.appendChild(p),g.appendChild(m),this._lines+=1,d.appendChild(g)}}const h=this._editor.getOption(43),c=Math.ceil(h.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=h.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case gi.Error:t=v("Error","Error");break;case gi.Warning:t=v("Warning","Warning");break;case gi.Info:t=v("Info","Info");break;case gi.Hint:t=v("Hint","Hint");break}let n=v("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(n=`${s.getLineContent(e.startLineNumber)}, ${n}`),n}}let x0=class Qne extends Ik{constructor(e,t,n,s,r,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=n,this._menuService=s,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new ve,this._onDidSelectRelatedInformation=new H,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=gi.Warning,this._backgroundColor=Q.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(GVe);let t=z4,n=$Ve;this._severity===gi.Warning?(t=H4,n=jVe):this._severity===gi.Info&&(t=U4,n=qVe);const s=e.getColor(t),r=e.getColor(n);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:r,primaryHeadingColor:e.getColor(hne),secondaryHeadingColor:e.getColor(cne)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(s=>this.editor.focus()));const t=[],n=this._menuService.createMenu(Qne.TitleMenu,this._contextKeyService);Y7e(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=ae(e,_e(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new UVe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let s=V.lift(e);const r=this.editor.getPosition();let o=r&&s.containsPosition(r)?r:s.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?v("problems","{0} of {1} problems",t,n):v("change","{0} of {1} problem",t,n);this.setTitle(Ba(a.uri),l)}this._icon.className=`codicon ${W4.className(gi.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};x0.TitleMenu=new Ye("gotoErrorTitleMenu");x0=HVe([pp(1,ci),pp(2,Ru),pp(3,n_),pp(4,qt),pp(5,Xe),pp(6,my)],x0);let r$=D1(cv,Uee),o$=D1(tc,w2),a$=D1(Ia,kF);const z4=z("editorMarkerNavigationError.background",{dark:r$,light:r$,hc:Gi},v("editorMarkerNavigationError","Editor marker navigation widget error color.")),$Ve=z("editorMarkerNavigationError.headerBackground",{dark:Qt(z4,.1),light:Qt(z4,.1),hc:null},v("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),H4=z("editorMarkerNavigationWarning.background",{dark:o$,light:o$,hc:Gi},v("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),jVe=z("editorMarkerNavigationWarning.headerBackground",{dark:Qt(H4,.1),light:Qt(H4,.1),hc:"#0C141F"},v("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),U4=z("editorMarkerNavigationInfo.background",{dark:a$,light:a$,hc:Gi},v("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),qVe=z("editorMarkerNavigationInfo.headerBackground",{dark:Qt(U4,.1),light:Qt(U4,.1),hc:null},v("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),GVe=z("editorMarkerNavigation.background",{dark:io,light:io,hc:io},v("editorMarkerNavigationBackground","Editor marker navigation widget background."));oi((i,e)=>{const t=i.getColor(b2);t&&e.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${t}; }`);const n=i.getColor(v2);n&&e.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)});var KVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Xne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};let qu=class ax{constructor(e,t,n,s,r){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=s,this._instantiationService=r,this._sessionDispoables=new ve,this._editor=e,this._widgetVisible=Jne.bindTo(this._contextKeyService)}static get(e){return e.getContribution(ax.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(x0,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var s,r,o;(!(!((s=this._model)===null||s===void 0)&&s.selected)||!V.containsPosition((r=this._model)===null||r===void 0?void 0:r.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:V.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new K(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Xne(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);s&&(ax.get(s).close(),ax.get(s).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};qu.ID="editor.contrib.markerController";qu=KVe([XC(1,Yne),XC(2,Xe),XC(3,li),XC(4,qt)],qu);class nE extends Si{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return Xne(this,void 0,void 0,function*(){t.hasModel()&&qu.get(t).nagivate(this._next,this._multiFile)})}}class nc extends nE{constructor(){super(!0,!1,{id:nc.ID,label:nc.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:578,weight:100},menuOpts:{menuId:x0.TitleMenu,title:nc.LABEL,icon:ls("marker-navigation-next",De.arrowDown,v("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}nc.ID="editor.action.marker.next";nc.LABEL=v("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class D0 extends nE{constructor(){super(!1,!1,{id:D0.ID,label:D0.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:1602,weight:100},menuOpts:{menuId:x0.TitleMenu,title:nc.LABEL,icon:ls("marker-navigation-previous",De.arrowUp,v("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}D0.ID="editor.action.marker.prev";D0.LABEL=v("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class ZVe extends nE{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:v("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:66,weight:100},menuOpts:{menuId:Ye.MenubarGoMenu,title:v({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class YVe extends nE{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:v("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Z.focus,primary:1090,weight:100},menuOpts:{menuId:Ye.MenubarGoMenu,title:v({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Ks(qu.ID,qu);gt(nc);gt(D0);gt(ZVe);gt(YVe);const Jne=new Ie("markersNavigationVisible",!1),QVe=ho.bindToContribution(qu.get);Se(new QVe({id:"closeMarkersNavigation",precondition:Jne,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:Z.focus,primary:9,secondary:[1033]}}));var XVe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},l$=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const vo=_e;class JVe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const h$={type:1,filter:{include:Pt.QuickFix}};let $4=class{constructor(e,t,n,s){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=s,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,h=a.range.endLineNumber===s?a.range.endColumn:r,c=this._markerDecorationsService.getMarker(n.uri,a);if(!c)continue;const u=new V(e.range.startLineNumber,l,e.range.startLineNumber,h);o.push(new JVe(this,u,c))}return o}renderHoverParts(e,t,n){if(!e.length)return ne.None;const s=new ve;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,s)));const r=e.length===1?e[0]:e.sort((o,a)=>gi.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(r,n,s),s}renderMarkerHover(e,t){const n=vo("div.hover-row"),s=ae(n,vo("div.marker.hover-contents")),{source:r,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const h=ae(s,vo("span"));if(h.style.whiteSpace="pre-wrap",h.innerText=o,r||a)if(a&&typeof a!="string"){const c=vo("span");if(r){const g=ae(c,vo("span"));g.innerText=r}const u=ae(c,vo("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(oe(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const d=ae(u,vo("span"));d.innerText=a.value;const f=ae(s,c);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const c=ae(s,vo("span"));c.style.opacity="0.6",c.style.paddingLeft="6px",c.innerText=r&&a?`${r}(${a})`:r||`(${a})`}if($l(l))for(const{message:c,resource:u,startLineNumber:d,startColumn:f}of l){const g=ae(s,vo("div"));g.style.marginTop="8px";const p=ae(g,vo("a"));p.innerText=`${Ba(u)}(${d}, ${f}): `,p.style.cursor="pointer",t.add(oe(p,"click",b=>{b.stopPropagation(),b.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:d,startColumn:f}}}).catch(nt)}));const m=ae(g,vo("span"));m.innerText=c,this._editor.applyFontInfo(m)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===gi.Error||e.marker.severity===gi.Warning||e.marker.severity===gi.Info)&&t.addAction({label:v("view problem","View Problem"),commandId:nc.ID,run:()=>{this._hover.hide(),qu.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const s=t.append(vo("div"));this.recentMarkerCodeActionsInfo&&(Lk.makeKey(this.recentMarkerCodeActionsInfo.marker)===Lk.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=v("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?ne.None:n.add(Qm(()=>s.textContent=v("checkingForQuickFixes","Checking for quick fixes..."),200));s.textContent||(s.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);n.add(xt(()=>o.cancel())),o.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=v("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;n.add(xt(()=>{l||a.dispose()})),t.addAction({label:v("quick fixes","Quick Fix..."),commandId:Ly.Id,run:h=>{l=!0;const c=ow.get(this._editor),u=Un(h);this._hover.hide(),c.showCodeActions(h$,a,{x:u.left+6,y:u.top+u.height+6})}})},nt)}}getCodeActions(e){return Wr(t=>MB(this._editor.getModel(),new V(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),h$,E2.None,t))}};$4=XVe([l$(2,aF),l$(3,Ru)],$4);oi((i,e)=>{const t=i.getColor(b2);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(v2);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const ese="editor.action.inlineSuggest.commit";class tse{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return tWe(n,this.parts.map(r=>({range:{startLineNumber:1,endLineNumber:1,startColumn:r.column,endColumn:r.column},text:r.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class eWe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function tWe(i,e){const t=new eWe(i),n=e.map(s=>{const r=V.lift(s.range);return{startOffset:t.getOffset(r.getStartPosition()),endOffset:t.getOffset(r.getEndPosition()),text:s.text}});n.sort((s,r)=>r.startOffset-s.startOffset);for(const s of n)i=i.substring(0,s.startOffset)+s.text+i.substring(s.endOffset);return i}class c${constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class ise extends ne{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function iWe(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function nse(i,e,t,n,s=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const r=e.getLineContent(i.range.startLineNumber),o=nn(r).length;if(i.range.startColumn-1<=o){const f=nn(i.text).length,g=r.substring(i.range.startColumn-1,o),p=V.fromPositions(i.range.getStartPosition().delta(0,g.length),i.range.getEndPosition()),m=i.text.startsWith(g)?i.text.substring(g.length):i.text.substring(f);i={range:p,text:m,command:i.command}}const l=e.getValueInRange(i.range),h=nWe(l,i.text);if(!h)return;const c=i.range.startLineNumber,u=new Array;if(t==="prefix"){const f=h.filter(g=>g.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const d=i.text.length-s;for(const f of h){const g=i.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&g<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const p=f.modifiedStart+f.modifiedLength,m=Math.max(f.modifiedStart,Math.min(p,d)),b=i.text.substring(f.modifiedStart,m),_=i.text.substring(m,Math.max(f.modifiedStart,p));if(b.length>0){const w=ql(b);u.push(new c$(g,w,!1))}if(_.length>0){const w=ql(_);u.push(new c$(g,w,!0))}}return new tse(c,u,0)}let ul;function nWe(i,e){if((ul==null?void 0:ul.originalValue)===i&&(ul==null?void 0:ul.newValue)===e)return ul==null?void 0:ul.changes;{const t=sWe(i,e);return ul={originalValue:i,newValue:e,changes:t},t}}function sWe(i,e){if(i.length>5e3||e.length>5e3)return;function t(l){let h=0;for(let c=0,u=l.length;c<u;c++){const d=l.charCodeAt(c);d>h&&(h=d)}return h}const n=Math.max(t(i),t(e));function s(l){if(l<0)throw new Error("unexpected");return n+l+1}function r(l){let h=0,c=0;const u=new Int32Array(l.length);for(let d=0,f=l.length;d<f;d++){const g=c*100+h;l[d]==="("?(u[d]=s(2*g),h++):l[d]===")"?(u[d]=s(2*g+1),h===1&&c++,h=Math.max(h-1,0)):u[d]=l.charCodeAt(d)}return u}const o=r(i),a=r(e);return new Dl({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var rWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Vh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};let j4=class extends ne{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Vr),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(s=>{new Set([cF.id,uF.id,uv.Tab.id,uv.DeleteLeft.id,uv.DeleteRight.id,ese,"acceptSelectedSuggestion"]).has(s.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(s=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(s=>{this.session&&!this.session.isValid&&this.hide()})),this._register(xt(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Gr.Automatic))}trigger(e){if(this.completionSession.value){e===Gr.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new aWe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Vh(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};j4=rWe([oWe(2,An)],j4);class aWe extends ise{constructor(e,t,n,s,r,o){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=s,this.cache=r,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new Vr),this.updateSoon=this._register(new yi(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=Gr.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const h=l.sourceProvider;h.handleItemDidShow&&h.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(xt(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register($5.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return Vh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return Vh(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Vh(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Gr.Explicit?yield this.updateOperation.value.promise:yield this.update(Gr.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Gr.Explicit&&(yield this.update(Gr.Explicit))})}hasMultipleInlineCompletions(){var e;return Vh(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?nse(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return Vh(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=Wr(r=>Vh(this,void 0,void 0,function*(){let o;try{o=yield rse(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r)}catch(a){nt(a);return}r.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),s=new sse(n,e);this.updateOperation.value=s,yield n,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[n0.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,ta):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class sse{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class lWe extends ne{constructor(e,t,n,s){super(),this.triggerKind=s;const r=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(xt(()=>{e.deltaDecorations(r,[])})),this.completions=t.items.map((o,a)=>new hWe(o,r[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const l of this.completions){const h=a.getDecorationRange(l.decorationId);if(!h){nt(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(h)||(o=!0,l.synchronizedRange=h)}o&&n()})),this._register(t)}}class hWe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function cWe(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new V(i.lineNumber,t.startColumn,i.lineNumber,n):V.fromPositions(i,i.with(void 0,n))}function rse(i,e,t,n=ri.None){return Vh(this,void 0,void 0,function*(){const s=cWe(i,e),r=$5.all(e),o=yield Promise.all(r.map(l=>Vh(this,void 0,void 0,function*(){const h=yield l.provideInlineCompletions(e,i,t,n);return{completions:h,provider:l,dispose:()=>{h&&l.freeInlineCompletions(h)}}}))),a=new Map;for(const l of o){const h=l.completions;if(h)for(const c of h.items.map(u=>({text:u.text,range:u.range?V.lift(u.range):s,command:u.command,sourceProvider:l.provider,sourceInlineCompletions:h,sourceInlineCompletion:u})))c.range.startLineNumber===c.range.endLineNumber&&a.set(JSON.stringify({text:c.text,range:c.range}),c)}return{items:[...a.values()],dispose:()=>{for(const l of o)l.dispose()}}})}function Rk(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=u1(t,e.text),s=i.getOffsetAt(e.range.getStartPosition())+n,r=i.getPositionAt(s),o=t.substr(n),a=AR(o,e.text),l=i.getPositionAt(Math.max(s,i.getOffsetAt(e.range.getEndPosition())-a));return{range:V.fromPositions(r,l),text:e.text.substr(n,e.text.length-n-a)}}const yn=new Uint8Array(16),us=[];for(let i=0;i<256;i++)us.push(i.toString(16).padStart(2,"0"));let q4;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?q4=crypto.getRandomValues.bind(crypto):q4=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function uWe(){q4(yn),yn[6]=yn[6]&15|64,yn[8]=yn[8]&63|128;let i=0,e="";return e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e+="-",e+=us[yn[i++]],e+=us[yn[i++]],e+="-",e+=us[yn[i++]],e+=us[yn[i++]],e+="-",e+=us[yn[i++]],e+=us[yn[i++]],e+="-",e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e+=us[yn[i++]],e}const u$="code-workspace";function d$(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&Ke.isUri(e.uri)}function dWe(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class fWe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class gWe{constructor(e,t,n,s){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,s=r.multiline)}if(n&&s&&e.snippet){const r=this._model.getLineContent(this._selection.startLineNumber),o=nn(r,0,this._selection.startColumn-1);let a=o;e.snippet.walk(h=>h===e?!1:(h instanceof nr&&(a=nn(ql(h.value).pop())),!0));const l=u1(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(h,c,u)=>`${c}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class pWe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return uf(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=uf(this._model.uri.fsPath),s=n.lastIndexOf(".");return s<=0?n:n.slice(0,s)}else{if(t==="TM_DIRECTORY")return AX(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(B5(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class mWe{constructor(e,t,n,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(s=>!YX(s));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class _We{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=zi.getComments(n);if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}}class Nl{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Nl.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Nl.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Nl.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Nl.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Nl.dayNames=[v("Sunday","Sunday"),v("Monday","Monday"),v("Tuesday","Tuesday"),v("Wednesday","Wednesday"),v("Thursday","Thursday"),v("Friday","Friday"),v("Saturday","Saturday")];Nl.dayNamesShort=[v("SundayShort","Sun"),v("MondayShort","Mon"),v("TuesdayShort","Tue"),v("WednesdayShort","Wed"),v("ThursdayShort","Thu"),v("FridayShort","Fri"),v("SaturdayShort","Sat")];Nl.monthNames=[v("January","January"),v("February","February"),v("March","March"),v("April","April"),v("May","May"),v("June","June"),v("July","July"),v("August","August"),v("September","September"),v("October","October"),v("November","November"),v("December","December")];Nl.monthNamesShort=[v("JanuaryShort","Jan"),v("FebruaryShort","Feb"),v("MarchShort","Mar"),v("AprilShort","Apr"),v("MayShort","May"),v("JuneShort","Jun"),v("JulyShort","Jul"),v("AugustShort","Aug"),v("SeptemberShort","Sep"),v("OctoberShort","Oct"),v("NovemberShort","Nov"),v("DecemberShort","Dec")];class bWe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=dWe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(d$(e))return uf(e.uri.path);let t=uf(e.configPath.path);return t.endsWith(u$)&&(t=t.substr(0,t.length-u$.length-1)),t}_resoveWorkspacePath(e){if(d$(e))return y4(e.uri.fsPath);let t=uf(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?y4(n):"/"}}class vWe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return uWe()}}oi((i,e)=>{function t(n){const s=i.getColor(n);return s?s.toString():"transparent"}e.addRule(`.monaco-editor .snippet-placeholder { background-color: ${t(dMe)}; outline-color: ${t(fMe)}; }`),e.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${t(gMe)}; outline-color: ${t(pMe)}; }`)});class Do{constructor(e,t,n,s){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=s,this._nestingLevel=1,this._placeholderGroups=FW(t.placeholders,Mo.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const s=this._snippet.offset(n),r=this._snippet.fullLen(n),o=V.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+r)),a=n.isFinalTabstop?Do._decor.inactiveFinal:Do._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let s=[];for(const r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){const o=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),h=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let c=1;c<h.length;c++)h[c]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+h[c]);s.push(n0.replace(a,h.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(s=>{const r=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),h=this._editor.getModel().getDecorationRange(l);o.push(new Ge(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?Do._decor.activeFinal:Do._decor.active),r.add(a);for(const c of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(c);s.changeDecorationOptions(u,c.isFinalTabstop?Do._decor.activeFinal:Do._decor.active),r.add(c)}}for(const[a,l]of this._placeholderDecorations)r.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?Do._decor.inactiveFinal:Do._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Mo){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const s of t){if(s.isFinalTabstop)break;n||(n=[],e.set(s.index,n));const r=this._placeholderDecorations.get(s),o=this._editor.getModel().getDecorationRange(r);if(!o){e.delete(s.index);break}n.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const r=e.shift();console.assert(!r._placeholderDecorations);const o=r._snippet.placeholderInfo.last.index;for(const l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(o+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,r._snippet.children);const a=this._placeholderDecorations.get(s);n.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of r._snippet.placeholders){const h=r._snippet.offset(l),c=r._snippet.fullLen(l),u=V.fromPositions(t.getPositionAt(r._offset+h),t.getPositionAt(r._offset+h+c)),d=n.addDecoration(u,Do._decor.inactive);this._placeholderDecorations.set(l,d)}}this._placeholderGroups=FW(this._snippet.placeholders,Mo.compareByIndex)})}}Do._decor={active:_t.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:_t.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:_t.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:_t.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const f$={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class _l{constructor(e,t,n=f$){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,s,r){const o=e.getLineContent(t.lineNumber),a=nn(o,0,t.column-1);let l;return n.walk(h=>{if(!(h instanceof nr)||h.parent instanceof Sy)return!0;const c=h.value.split(/\r\n|\r|\n/);if(s){const d=n.offset(h);if(d===0)c[0]=e.normalizeIndentation(c[0]);else{l=l??n.toString();let f=l.charCodeAt(d-1);(f===10||f===13)&&(c[0]=e.normalizeIndentation(a+c[0]))}for(let f=1;f<c.length;f++)c[f]=e.normalizeIndentation(a+c[f])}const u=c.join(e.getEOL());return u!==h.value&&(h.parent.replace(h,[new nr(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,s){if(n!==0||s!==0){const{positionLineNumber:r,positionColumn:o}=t,a=o-n,l=o+s,h=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=Ge.createWithDirection(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,s,r,o,a,l){const h=[],c=[];if(!e.hasModel())return{edits:h,snippets:c};const u=e.getModel(),d=e.invokeWithinContext(y=>y.get(iee)),f=e.invokeWithinContext(y=>new pWe(y.get(my),u)),g=()=>a;let p=0,m=u.getValueInRange(_l.adjustSelection(u,e.getSelection(),n,0)),b=u.getValueInRange(_l.adjustSelection(u,e.getSelection(),0,s)),_=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const w=e.getSelections().map((y,x)=>({selection:y,idx:x})).sort((y,x)=>V.compareRangesUsingStarts(y.selection,x.selection));for(const{selection:y,idx:x}of w){let L=_l.adjustSelection(u,y,n,0),S=_l.adjustSelection(u,y,0,s);m!==u.getValueInRange(L)&&(L=y),b!==u.getValueInRange(S)&&(S=y);const k=y.setStartPosition(L.startLineNumber,L.startColumn).setEndPosition(S.endLineNumber,S.endColumn),D=new q2().parse(t,!0,r),T=k.getStartPosition(),M=_l.adjustWhitespace(u,T,D,o||x>0&&_!==u.getLineFirstNonWhitespaceColumn(y.positionLineNumber),!0);D.resolveVariables(new fWe([f,new mWe(g,x,w.length,e.getOption(70)==="spread"),new gWe(u,y,x,l),new _We(u,y),new Nl,new bWe(d),new vWe]));const j=u.getOffsetAt(T)+p;p+=D.toString().length-u.getValueLengthInRange(k),h[x]=n0.replace(k,D.toString()),h[x].identifier={major:x,minor:0},c[x]=new Do(e,D,j,M)}return{edits:h,snippets:c}}dispose(){mt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=_l.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(s=>!!s.identifier).map(s=>Ge.fromPositions(s.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=f$){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:s}=_l.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,r=>{for(const o of this._snippets)o.merge(s);return console.assert(s.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):r.filter(o=>!!o.identifier).map(o=>Ge.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const s=n.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const s=n.computePossibleSelections();if(t.size===0)for(const[r,o]of s){o.sort(V.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,o)=>{r.push(...s.get(o))})}e.sort(V.compareRangesUsingStarts);for(let[n,s]of t){if(s.length!==e.length){t.delete(n);continue}s.sort(V.compareRangesUsingStarts);for(let r=0;r<s.length;r++)if(!s[r].containsRange(e[r])){t.delete(n);continue}}return t.size>0}}var wWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},g$=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const p$={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Rn=class Sb{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new ve,this._modelVersionId=-1,this._inSnippet=Sb.InSnippetMode.bindTo(n),this._hasNextTabstop=Sb.HasNextTabstop.bindTo(n),this._hasPrevTabstop=Sb.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(Sb.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?p$:Object.assign(Object.assign({},p$),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new _l(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>Ge.fromPositions(n.getStartPosition())));const[t]=e.options;G8e(this._editor,e.options.map((n,s)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(s+1),range:V.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Rn.ID="snippetController2";Rn.InSnippetMode=new Ie("inSnippetMode",!1,v("inSnippetMode","Whether the editor in current in snippet mode"));Rn.HasNextTabstop=new Ie("hasNextTabstop",!1,v("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Rn.HasPrevTabstop=new Ie("hasPrevTabstop",!1,v("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Rn=wWe([g$(1,_c),g$(2,Xe)],Rn);Ks(Rn.ID,Rn);const sE=ho.bindToContribution(Rn.get);Se(new sE({id:"jumpToNextSnippetPlaceholder",precondition:Ae.and(Rn.InSnippetMode,Rn.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:Z.editorTextFocus,primary:2}}));Se(new sE({id:"jumpToPrevSnippetPlaceholder",precondition:Ae.and(Rn.InSnippetMode,Rn.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:Z.editorTextFocus,primary:1026}}));Se(new sE({id:"leaveSnippet",precondition:Rn.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:Z.editorTextFocus,primary:9,secondary:[1033]}}));Se(new sE({id:"acceptSnippet",precondition:Rn.InSnippetMode,handler:i=>i.finish()}));var yWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},m$=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class RB{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let s=n[0].score[0];for(let r=0;r<n.length;r++){const{score:o,completion:a}=n[r];if(o[0]!==s)break;if(a.preselect)return r}return 0}}class ose extends RB{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class CWe extends RB{constructor(){super("recentlyUsed"),this._cache=new F5(300,.66),this._seq=0}memorize(e,t,n){const s=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(s,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,n);let r=n[0].score[0],o=-1,a=-1,l=-1;for(let h=0;h<n.length&&n[h].score[0]===r;h++){const c=`${e.getLanguageId()}/${n[h].textLabel}`,u=this._cache.peek(c);if(u&&u.touch>l&&u.type===n[h].completion.kind&&u.insertText===n[h].completion.insertText&&(l=u.touch,a=h),n[h].completion.preselect&&o===-1)return o=h}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:gJ(s.type),this._cache.set(n,s);this._seq=this._cache.size}}class SWe extends RB{constructor(){super("recentlyUsedByPrefix"),this._trie=fm.forStrings(),this._seq=0}memorize(e,t,n){const{word:s}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${s}`;this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,n);let r=`${e.getLanguageId()}/${s}`,o=this._trie.get(r);if(o||(o=this._trie.findSubstr(r)),o)for(let a=0;a<n.length;a++){let{kind:l,insertText:h}=n[a].completion;if(l===o.type&&h===o.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:gJ(n.type),this._trie.set(t,n)}}}let aw=class lx{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ve,this._persistSoon=new yi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===Y3.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==s){this._saveState();const r=lx._strategyCtors.get(s)||ose;this._strategy=new r;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${lx._storagePrefix}/${s}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${lx._storagePrefix}/${this._strategy.name}`,n,t,1)}}};aw._strategyCtors=new Map([["recentlyUsedByPrefix",SWe],["recentlyUsed",CWe],["first",ose]]);aw._storagePrefix="suggest/memories";aw=yWe([m$(0,Fg),m$(1,Ki)],aw);const ase=kt("ISuggestMemories");Dg(ase,aw,!0);var xWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},DWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let lw=class lse{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=lse.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),s=this._editor.getSelection(),r=n.getWordAtPosition(s.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};lw.AtEnd=new Ie("atEndOfWord",!1);lw=xWe([DWe(1,Xe)],lw);var kWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},LWe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let lg=class hx{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=hx.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(hx._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let s=n;for(;s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===n||!t.items[s].completion.additionalTextEdits););return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=hx._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};lg.OtherSuggestions=new Ie("hasOtherSuggestions",!1);lg=kWe([LWe(1,Xe)],lg);class EWe{constructor(e,t,n){this._disposables=new ve,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!$l(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new ZEe;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var AWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class Ur{provideSelectionRanges(e,t){return AWe(this,void 0,void 0,function*(){const n=[];for(const s of t){const r=[];n.push(r);const o=new Map;yield new Promise(a=>Ur._bracketsRightYield(a,0,e,s,o)),yield new Promise(a=>Ur._bracketsLeftYield(a,0,e,s,o,r))}return n})}static _bracketsRightYield(e,t,n,s,r){const o=new Map,a=Date.now();for(;;){if(t>=Ur._maxRounds){e();break}if(!s){e();break}let l=n.findNextBracket(s);if(!l){e();break}if(Date.now()-a>Ur._maxDuration){setTimeout(()=>Ur._bracketsRightYield(e,t+1,n,s,r));break}const c=l.close[0];if(l.isOpen){let u=o.has(c)?o.get(c):0;o.set(c,u+1)}else{let u=o.has(c)?o.get(c):0;if(u-=1,o.set(c,Math.max(0,u)),u<0){let d=r.get(c);d||(d=new Ar,r.set(c,d)),d.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,s,r,o){const a=new Map,l=Date.now();for(;;){if(t>=Ur._maxRounds&&r.size===0){e();break}if(!s){e();break}let h=n.findPrevBracket(s);if(!h){e();break}if(Date.now()-l>Ur._maxDuration){setTimeout(()=>Ur._bracketsLeftYield(e,t+1,n,s,r,o));break}const u=h.close[0];if(h.isOpen){let d=a.has(u)?a.get(u):0;if(d-=1,a.set(u,Math.max(0,d)),d<0){let f=r.get(u);if(f){let g=f.shift();f.size===0&&r.delete(u);const p=V.fromPositions(h.range.getEndPosition(),g.getStartPosition()),m=V.fromPositions(h.range.getStartPosition(),g.getEndPosition());o.push({range:p}),o.push({range:m}),Ur._addBracketLeading(n,m,o)}}}else{let d=a.has(u)?a.get(u):0;a.set(u,d+1)}s=h.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(s);r!==0&&r!==t.startColumn&&(n.push({range:V.fromPositions(new K(s,r),t.getEndPosition())}),n.push({range:V.fromPositions(new K(s,1),t.getEndPosition())}));const o=s-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:V.fromPositions(new K(o,a),t.getEndPosition())}),n.push({range:V.fromPositions(new K(o,1),t.getEndPosition())}))}}}Ur._maxDuration=30;Ur._maxRounds=2;var IWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class wl{static create(e,t){return IWe(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return wl.None;const n=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(n.uri))return wl.None;const[r]=yield new Ur().provideSelectionRanges(n,[s]);if(r.length===0)return wl.None;const o=yield e.computeWordRanges(n.uri,r[0].range);if(!o)return wl.None;const a=n.getWordUntilPosition(s);return delete o[a.word],new class extends wl{distance(l,h){if(!s.equals(t.getPosition()))return 0;if(h.kind===17)return 2<<20;let c=typeof h.label=="string"?h.label:h.label.label,u=o[c];if(FJ(u))return 2<<20;let d=K5(u,V.fromPositions(l),V.compareRangesUsingStarts),f=d>=0?u[d]:u[Math.max(0,~d-1)],g=r.length;for(const p of r){if(!V.containsRange(p.range,f))break;g-=1}return g}}})}}wl.None=new class extends wl{distance(){return 0}};class Bd{constructor(e,t,n,s,r,o,a){this.clipboardText=a,this._snippetCompareFn=Bd._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=r,this._refilterKind=1,this._lineContext=n,o==="top"?this._snippetCompareFn=Bd._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=Bd._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let s="",r="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?H1:RPe;for(let h=0;h<o.length;h++){const c=o[h];if(c.isInvalid)continue;this._providerInfo.set(c.provider,!!c.container.incomplete);const u=c.position.column-c.editStart.column,d=u+n-(c.position.column-this._column);if(s.length!==d&&(s=d===0?"":t.slice(-d),r=s.toLowerCase()),c.word=s,d===0)c.score=Ta.Default;else{let f=0;for(;f<u;){const g=s.charCodeAt(f);if(g===32||g===9)f+=1;else break}if(f>=d)c.score=Ta.Default;else if(typeof c.completion.filterText=="string"){let g=l(s,r,f,c.completion.filterText,c.filterTextLow,0,!1);if(!g)continue;ER(c.completion.filterText,c.textLabel)===0?c.score=g:(c.score=IPe(s,r,f,c.textLabel,c.labelLow,0),c.score[0]=g[0])}else{let g=l(s,r,f,c.textLabel,c.labelLow,0,!1);if(!g)continue;c.score=g}}c.idx=h,c.distance=this._wordDistance.distance(c.position,c.completion),a.push(c),e.push(c.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?YR(e.length-.85,e,(h,c)=>h-c):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Bd._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Bd._compareCompletionItems(e,t)}}var TWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mp=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},NWe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class _p{constructor(e,t,n,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const s=t.getWordAtPosition(n);return!(!s||s.endColumn!==n.column||!isNaN(Number(s.word)))}}function MWe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function RWe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let G4=class hse{constructor(e,t,n,s,r,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=s,this._logService=r,this._contextKeyService=o,this._configurationService=a,this._toDispose=new ve,this._quickSuggestDelay=10,this._triggerCharacterListener=new ve,this._triggerQuickSuggest=new js,this._state=0,this._completionDisposables=new ve,this._onDidCancel=new H,this._onDidTrigger=new H,this._onDidSuggest=new H,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ge(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(ba.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(h=>{this._onCursorChange(h)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){mt(this._triggerCharacterListener),mt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of ba.all(this._editor.getModel()))for(const s of n.triggerCharacters||[]){let r=e.get(s);r||(r=new Set,r.add(U8e()),e.set(s,r)),r.add(n)}const t=n=>{if(!RWe(this._editor,this._contextKeyService,this._configurationService)||_p.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let s="";Jm(n.charCodeAt(n.length-1))?kn(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const r=e.get(s);if(r){const o=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:s},!!this._completionModel,r,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!ba.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Rn.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!_p.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const s=e.getLineTokens(t.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&r===0||n.comments&&r===1||n.strings&&r===2))return}MWe(this._editor,this._contextKeyService,this._configurationService)&&ba.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new _p(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,s){var r;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,l=new _p(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let h={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(h={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Ya;const c=this._editor.getOption(100);let u=1;switch(c){case"top":u=0;break;case"bottom":u=2;break}const{itemKind:d,showDeprecated:f}=hse._createSuggestFilter(this._editor),g=wl.create(this._editorWorkerService,this._editor),p=jie(o,this._editor.getPosition(),new Ak(u,d,n,f),h,this._requestToken.token);Promise.all([p,g]).then(([m,b])=>NWe(this,void 0,void 0,function*(){var _;if((_=this._requestToken)===null||_===void 0||_.dispose(),!this._editor.hasModel())return;let w=s==null?void 0:s.clipboardText;if(!w&&m.needsClipboard&&(w=yield this._clipboardService.readText()),this._state===0)return;const y=this._editor.getModel();let x=m.items;if(s){const S=qie(u);x=x.concat(s.items).sort(S)}const L=new _p(y,this._editor.getPosition(),a,e.shy);this._completionModel=new Bd(x,this._context.column,{leadingLineContent:L.leadingLineContent,characterCountDelta:L.column-this._context.column},b,this._editor.getOption(105),this._editor.getOption(100),w),this._completionDisposables.add(m.disposable),this._onNewContext(L),this._reportDurationsTelemetry(m.durations)})).catch(nt)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const s=e.getOption(105);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(nn(e.leadingLineContent)!==nn(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(ba.all(this._editor.getModel()));for(let s of this._completionModel.allProvider)t.delete(s);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(_p.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};G4=TWe([mp(1,rd),mp(2,Mg),mp(3,s_),mp(4,_c),mp(5,Xe),mp(6,Ki)],G4);class rE{constructor(e,t){this._disposables=new ve,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),s=n.length;let r=!1;for(let a=0;a<s;a++)if(!n[a].isEmpty()){r=!0;break}if(!r)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<s;a++){const l=n[a];if(o.getValueLengthInRange(l)>rE._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}rE._maxSelectionLength=51200;var OWe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RT=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class OB extends C0{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=v("ddd","{0} ({1})",this._action.label,OB.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"")}}let K4=class{constructor(e,t,n,s){this._menuService=n,this._contextKeyService=s,this._menuDisposables=new ve,this.element=ae(e,_e(".suggest-status-bar"));const r=o=>o instanceof Fu?t.createInstance(OB,o,void 0):void 0;this._leftActions=new dc(this.element,{actionViewItemProvider:r}),this._rightActions=new dc(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu($u,this._contextKeyService),t=()=>{const n=[],s=[];for(let[r,o]of e.getActions())r==="left"?n.push(...o):s.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};K4=OWe([RT(1,qt),RT(2,n_),RT(3,Xe)],K4);const PWe=z("symbolIcon.arrayForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),FWe=z("symbolIcon.booleanForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),BWe=z("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},v("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),VWe=z("symbolIcon.colorForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),WWe=z("symbolIcon.constantForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zWe=z("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},v("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),HWe=z("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},v("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),UWe=z("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},v("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$We=z("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},v("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jWe=z("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},v("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qWe=z("symbolIcon.fileForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),GWe=z("symbolIcon.folderForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),KWe=z("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},v("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ZWe=z("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},v("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),YWe=z("symbolIcon.keyForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),QWe=z("symbolIcon.keywordForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),XWe=z("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},v("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),JWe=z("symbolIcon.moduleForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eze=z("symbolIcon.namespaceForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tze=z("symbolIcon.nullForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ize=z("symbolIcon.numberForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nze=z("symbolIcon.objectForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sze=z("symbolIcon.operatorForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rze=z("symbolIcon.packageForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oze=z("symbolIcon.propertyForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),aze=z("symbolIcon.referenceForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lze=z("symbolIcon.snippetForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hze=z("symbolIcon.stringForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cze=z("symbolIcon.structForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uze=z("symbolIcon.textForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dze=z("symbolIcon.typeParameterForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fze=z("symbolIcon.unitForeground",{dark:Fe,light:Fe,hc:Fe},v("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gze=z("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},v("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));oi((i,e)=>{const t=i.getColor(PWe);t&&e.addRule(`${De.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(FWe);n&&e.addRule(`${De.symbolBoolean.cssSelector} { color: ${n}; }`);const s=i.getColor(BWe);s&&e.addRule(`${De.symbolClass.cssSelector} { color: ${s}; }`);const r=i.getColor(XWe);r&&e.addRule(`${De.symbolMethod.cssSelector} { color: ${r}; }`);const o=i.getColor(VWe);o&&e.addRule(`${De.symbolColor.cssSelector} { color: ${o}; }`);const a=i.getColor(WWe);a&&e.addRule(`${De.symbolConstant.cssSelector} { color: ${a}; }`);const l=i.getColor(zWe);l&&e.addRule(`${De.symbolConstructor.cssSelector} { color: ${l}; }`);const h=i.getColor(HWe);h&&e.addRule(`
			${De.symbolValue.cssSelector},${De.symbolEnum.cssSelector} { color: ${h}; }`);const c=i.getColor(UWe);c&&e.addRule(`${De.symbolEnumMember.cssSelector} { color: ${c}; }`);const u=i.getColor($We);u&&e.addRule(`${De.symbolEvent.cssSelector} { color: ${u}; }`);const d=i.getColor(jWe);d&&e.addRule(`${De.symbolField.cssSelector} { color: ${d}; }`);const f=i.getColor(qWe);f&&e.addRule(`${De.symbolFile.cssSelector} { color: ${f}; }`);const g=i.getColor(GWe);g&&e.addRule(`${De.symbolFolder.cssSelector} { color: ${g}; }`);const p=i.getColor(KWe);p&&e.addRule(`${De.symbolFunction.cssSelector} { color: ${p}; }`);const m=i.getColor(ZWe);m&&e.addRule(`${De.symbolInterface.cssSelector} { color: ${m}; }`);const b=i.getColor(YWe);b&&e.addRule(`${De.symbolKey.cssSelector} { color: ${b}; }`);const _=i.getColor(QWe);_&&e.addRule(`${De.symbolKeyword.cssSelector} { color: ${_}; }`);const w=i.getColor(JWe);w&&e.addRule(`${De.symbolModule.cssSelector} { color: ${w}; }`);const y=i.getColor(eze);y&&e.addRule(`${De.symbolNamespace.cssSelector} { color: ${y}; }`);const x=i.getColor(tze);x&&e.addRule(`${De.symbolNull.cssSelector} { color: ${x}; }`);const L=i.getColor(ize);L&&e.addRule(`${De.symbolNumber.cssSelector} { color: ${L}; }`);const S=i.getColor(nze);S&&e.addRule(`${De.symbolObject.cssSelector} { color: ${S}; }`);const k=i.getColor(sze);k&&e.addRule(`${De.symbolOperator.cssSelector} { color: ${k}; }`);const D=i.getColor(rze);D&&e.addRule(`${De.symbolPackage.cssSelector} { color: ${D}; }`);const T=i.getColor(oze);T&&e.addRule(`${De.symbolProperty.cssSelector} { color: ${T}; }`);const M=i.getColor(aze);M&&e.addRule(`${De.symbolReference.cssSelector} { color: ${M}; }`);const j=i.getColor(lze);j&&e.addRule(`${De.symbolSnippet.cssSelector} { color: ${j}; }`);const $=i.getColor(hze);$&&e.addRule(`${De.symbolString.cssSelector} { color: ${$}; }`);const ie=i.getColor(cze);ie&&e.addRule(`${De.symbolStruct.cssSelector} { color: ${ie}; }`);const pe=i.getColor(uze);pe&&e.addRule(`${De.symbolText.cssSelector} { color: ${pe}; }`);const be=i.getColor(dze);be&&e.addRule(`${De.symbolTypeParameter.cssSelector} { color: ${be}; }`);const ye=i.getColor(fze);ye&&e.addRule(`${De.symbolUnit.cssSelector} { color: ${ye}; }`);const Ee=i.getColor(gze);Ee&&e.addRule(`${De.symbolVariable.cssSelector} { color: ${Ee}; }`)});class cse{constructor(){this._onDidWillResize=new H,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new H,this.onDidResize=this._onDidResize.event,this._sashListener=new ve,this._size=new jt(0,0),this._minSize=new jt(0,0),this._maxSize=new jt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new zn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new zn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new zn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:uk.North}),this._southSash=new zn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:uk.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Re.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Re.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(n=s.currentX-s.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(n=-(s.currentX-s.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Re.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Re.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:s}=this._minSize,{height:r,width:o}=this._maxSize;e=Math.max(n,Math.min(r,e)),t=Math.max(s,Math.min(o,t));const a=new jt(t,e);jt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var pze=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function PB(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let Z4=class{constructor(e,t){this._editor=e,this._onDidClose=new H,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new H,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ve,this._renderDisposeable=new ve,this._borderWidth=1,this._size=new jt(330,0),this.domNode=_e(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(ag,{editor:e}),this._body=_e(".body"),this._scrollbar=new k2(this._body,{}),ae(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ae(this._body,_e(".header")),this._close=ae(this._header,_e("span"+De.close.cssSelector)),this._close.title=v("details.close","Close"),this._type=ae(this._header,_e("p.type")),this._docs=ae(this._body,_e("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily($o?ws.fontFamily:null),s=e.get(106)||t.fontSize,r=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${s}px`,l=`${r}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${r/s}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=v("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,s;this._renderDisposeable.clear();let{detail:r,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(s=e.completion.commitCharacters)===null||s===void 0?void 0:s.join("")}
`,o=new _0().appendCodeblock("empty",a),r=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!PB(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),r){const a=r.length>1e5?`${r.substr(0,1e5)}`:r;this._type.textContent=a,this._type.title=a,Cr(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else jn(this._type),this._type.title="",Rs(this._type),this.domNode.classList.add("no-type");if(jn(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),jn(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new jt(e,t);jt.equals(n,this._size)||(this._size=n,bLe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Z4=pze([mze(1,qt)],Z4);class _ze{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new ve,this._added=!1,this._resizable=new cse,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,s,r=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=s.width-a.dimension.width,l=!0),a.north&&(r=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+r,left:n.left+o})}a.done&&(n=void 0,s=void 0,r=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const n=Un(e);this._anchorBox=n,this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size)}_placeAtAnchor(e,t){var n;const s=$L(document.body),r=this.widget.getLayoutInfo(),o=new jt(220,2*r.lineHeight),a=e.top,l=function(){const _=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),w=-r.borderWidth+e.left+e.width,y=new jt(_,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:_-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(_,o.width))}}(),h=function(){const _=e.left-r.borderWidth-r.horizontalPadding,w=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),y=new jt(_,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:_-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(_,o.width))}}(),c=function(){const _=e.left,w=-r.borderWidth+e.top+e.height,y=new jt(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:w,left:_,fit:y.height-t.height,maxSizeBottom:y,maxSizeTop:y,minSize:o.with(y.width)}}(),u=[l,h,c],d=(n=u.find(_=>_.fit>=0))!==null&&n!==void 0?n:u.sort((_,w)=>w.fit-_.fit)[0],f=e.top+e.height-r.borderHeight;let g,p=t.height;const m=Math.max(d.maxSizeTop.height,d.maxSizeBottom.height);p>m&&(p=m);let b;p<=d.maxSizeTop.height?(g=!0,b=d.maxSizeTop):(g=!1,b=d.maxSizeBottom),this._applyTopLeft({left:d.left,top:g?d.top:f-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!g,d===l,g,d!==l),this._resizable.minSize=d.minSize,this._resizable.maxSize=b,this._resizable.layout(p,Math.min(b.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Jh;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(Jh||(Jh={}));function JC(i,e,t,n){const s=n===Jh.ROOT_FOLDER?["rootfolder-icon"]:n===Jh.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===dt.data?r=Mu.parseMetaData(t).get(Mu.META_DATA_LABEL):r=_$(sJ(t).toLowerCase()),n===Jh.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),r.length<=255){const a=r.split(".");for(let l=1;l<a.length;l++)s.push(`${a.slice(l).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const o=bze(i,e,t);o&&s.push(`${_$(o)}-lang-file-icon`)}}return s}function bze(i,e,t){if(!t)return null;let n=null;if(t.scheme===dt.data){const r=Mu.parseMetaData(t).get(Mu.META_DATA_MIME);r&&(n=e.getModeId(r))}else{const s=i.getModel(t);s&&(n=s.getLanguageId())}return n&&n!==h_?n:e.getModeIdByFilepathOrFirstLine(t)}function _$(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var vze=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OT=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Z_;function use(i){return`suggest-aria-id:${i}`}const wze=ls("suggest-more-info",De.chevronRight,v("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),yze=new(Z_=class cx{extract(e,t){if(e.textLabel.match(cx._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(cx._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=cx._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},Z_._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Z_._regexStrict=new RegExp(`^${Z_._regexRelaxed.source}$`,"i"),Z_);let Y4=class{constructor(e,t,n,s){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=s,this._onDidToggleDetails=new H,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new ve,t.root=e,t.root.classList.add("show-file-icons"),t.icon=ae(e,_e(".icon")),t.colorspan=ae(t.icon,_e("span.colorspan"));const n=ae(e,_e(".contents")),s=ae(n,_e(".main"));t.iconContainer=ae(s,_e(".icon-label.codicon")),t.left=ae(s,_e("span.left")),t.right=ae(s,_e("span.right")),t.iconLabel=new _B(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=ae(t.left,_e("span.signature-label")),t.qualifierLabel=ae(t.left,_e("span.qualifier-label")),t.detailsLabel=ae(t.right,_e("span.details-label")),t.readMore=ae(t.right,_e("span.readMore"+fi.asCSSSelector(wze))),t.readMore.title=v("readMore","Read More");const r=()=>{const o=this._editor.getOptions(),a=o.get(43),l=a.getMassagedFontFamily($o?ws.fontFamily:null),h=a.fontFeatureSettings,c=o.get(106)||a.fontSize,u=o.get(107)||a.lineHeight,d=a.fontWeight,f=`${c}px`,g=`${u}px`;t.root.style.fontSize=f,t.root.style.fontWeight=d,s.style.fontFamily=l,s.style.fontFeatureSettings=h,s.style.lineHeight=g,t.icon.style.height=g,t.icon.style.width=g,t.readMore.style.height=g,t.readMore.style.width=g};return r(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&r()})),t}renderElement(e,t,n){const{completion:s}=e;n.root.id=use(t),n.colorspan.style.backgroundColor="";const r={labelEscapeNewLines:!0,matches:XF(e.score)};let o=[];if(s.kind===19&&yze.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=JC(this._modelService,this._modeService,Ke.from({scheme:"fake",path:e.textLabel}),Jh.FILE),l=JC(this._modelService,this._modeService,Ke.from({scheme:"fake",path:s.detail}),Jh.FILE);r.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",r.extraClasses=Z5([JC(this._modelService,this._modeService,Ke.from({scheme:"fake",path:e.textLabel}),Jh.FOLDER),JC(this._modelService,this._modeService,Ke.from({scheme:"fake",path:s.detail}),Jh.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...$2e(s.kind).split(" ")));s.tags&&s.tags.indexOf(1)>=0&&(r.extraClasses=(r.extraClasses||[]).concat(["deprecated"]),r.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,r),typeof s.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=PT(s.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=PT(s.label.detail||""),n.detailsLabel.textContent=PT(s.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Cr(n.detailsLabel):Rs(n.detailsLabel),PB(e)?(n.right.classList.add("can-expand-details"),Cr(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Rs(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};Y4=vze([OT(1,qs),OT(2,Gs),OT(3,ci)],Y4);function PT(i){return i.replace(/\r\n|\r|\n/g,"")}var Cze=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Sze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const xze=z("editorSuggestWidget.background",{dark:Ko,light:Ko,hc:Ko},v("editorSuggestWidgetBackground","Background color of the suggest widget.")),Dze=z("editorSuggestWidget.border",{dark:_f,light:_f,hc:_f},v("editorSuggestWidgetBorder","Border color of the suggest widget.")),kze=z("editorSuggestWidget.foreground",{dark:mu,light:mu,hc:mu},v("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Lze=z("editorSuggestWidget.selectedForeground",{dark:qS,light:qS,hc:qS},v("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),Eze=z("editorSuggestWidget.selectedIconForeground",{dark:GS,light:GS,hc:GS},v("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),Aze=z("editorSuggestWidget.selectedBackground",{dark:KS,light:KS,hc:KS},v("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),Ize=z("editorSuggestWidget.highlightForeground",{dark:Sm,light:Sm,hc:Sm},v("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),Tze=z("editorSuggestWidget.focusHighlightForeground",{dark:kI,light:kI,hc:kI},v("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class Nze{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof sg}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(jt.is(n))return jt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let hw=class Q4{constructor(e,t,n,s,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new js,this._disposables=new ve,this._onDidSelect=new H,this._onDidFocus=new H,this._onDidHide=new H,this._onDidShow=new H,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new H,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new cse,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Mze(this,e),this._persistedSize=new Nze(t,e);class o{constructor(f,g,p=!1,m=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=m}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(d=>{var f,g,p,m;if(this._resize(d.dimension.width,d.dimension.height),a&&(a.persistHeight=a.persistHeight||!!d.north||!!d.south,a.persistWidth=a.persistWidth||!!d.east||!!d.west),!!d.done){if(a){const{itemHeight:b,defaultSize:_}=this.getLayoutInfo(),w=Math.round(b/2);let{width:y,height:x}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-x)<=w)&&(x=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:_.height),(!a.persistWidth||Math.abs(a.currentSize.width-y)<=w)&&(y=(m=(p=a.persistedSize)===null||p===void 0?void 0:p.width)!==null&&m!==void 0?m:_.width),this._persistedSize.store(new jt(y,x))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ae(this.element.domNode,_e(".message")),this._listElement=ae(this.element.domNode,_e(".tree"));const l=r.createInstance(Z4,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new _ze(l,this.editor);const h=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);h();const c=r.createInstance(Y4,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails(()=>this.toggleDetails())),this._list=new sh("SuggestWidget",this._listElement,{getHeight:d=>this.getLayoutInfo().itemHeight,getTemplateId:d=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:d=>{if(d.isResolved&&this._isDetailsVisible()){const{documentation:f,detail:g}=d.completion,p=Lo("{0}{1}",g||"",f?typeof f=="string"?f:f.value:"");return v("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",d.textLabel,p)}else return d.textLabel},getWidgetAriaLabel:()=>v("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=r.createInstance(K4,this.element.domNode);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);u(),this._disposables.add(eg(this._list,s,{listInactiveFocusBackground:Aze,listInactiveFocusOutline:Hs})),this._disposables.add(s.onDidColorThemeChange(d=>this._onThemeChange(d))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onTap(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onDidChangeSelection(d=>this._onListSelection(d))),this._disposables.add(this._list.onDidChangeFocus(d=>this._onListFocus(d))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(d=>{d.hasChanged(105)&&(u(),h())})),this._ctxSuggestWidgetVisible=ht.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=ht.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=ht.MultipleSuggestions.bindTo(n),this._disposables.add(cn(this._details.widget.domNode,"keydown",d=>{this._onDetailsKeydown.fire(d)})),this._disposables.add(this.editor.onMouseDown(d=>this._onEditorMouseDown(d)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(xze);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const n=e.getColor(Dze);n&&(this.element.domNode.style.borderColor=n.toString(),this._messageElement.style.borderColor=n.toString(),this._status.element.style.borderTopColor=n.toString(),this._details.widget.domNode.style.borderColor=n.toString(),this._detailsBorderColor=n.toString());const s=e.getColor(Vu);s&&(this._detailsFocusBorderColor=s.toString()),this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],s=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(s),this._currentSuggestionDetails=Wr(r=>Sze(this,void 0,void 0,function*(){const o=Qm(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);r.onCancellationRequested(()=>o.dispose());const a=yield n.resolve(r);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{s>=this._list.length||n!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[n]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:use(s)}))}).catch(nt)),this._onDidFocus.fire({item:n,index:s,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Rs(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Q4.LOADING_MESSAGE,Rs(this._listElement,this._status.element),Cr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Q4.NO_SUGGESTIONS_MESSAGE,Rs(this._listElement,this._status.element),Cr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Rs(this._messageElement),Cr(this._listElement,this._status.element),this._show();break;case 4:Rs(this._messageElement),Cr(this._listElement,this._status.element),this._show();break;case 5:Rs(this._messageElement),Cr(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Qm(()=>this._setState(1),t)))}showSuggestions(e,t,n,s){var r,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(PB(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,s;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const r=$L(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new jt(l,a),this._contentWidget.setPreference(2);else{const h=r.width-o.borderHeight-2*o.horizontalPadding;l>h&&(l=h);const c=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,d=o.itemHeight+o.statusBarHeight,f=Un(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=f.top+g.top+g.height,m=Math.min(r.height-p-o.verticalPadding,u),b=f.top+g.top-o.verticalPadding,_=Math.min(b,u);let w=Math.min(Math.max(_,m)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<d&&(a=d),a>w&&(a=w);const y=150;a>m||this._forceRenderingAbove&&b>y?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=_):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=m),this.element.preferredSize=new jt(c,o.defaultSize.height),this.element.maxSize=new jt(h,w),this.element.minSize=new jt(220,d),this._cappedHeight=a===u?{wanted:(s=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&s!==void 0?s:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:s}=this.element.maxSize;e=Math.min(n,e),t=Math.min(s,t);const{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(43),t=ko(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,r=2*s;return{itemHeight:t,statusBarHeight:n,borderWidth:s,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new jt(430,n+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};hw.LOADING_MESSAGE=v("suggestWidget.loading","Loading...");hw.NO_SUGGESTIONS_MESSAGE=v("suggestWidget.noSuggestions","No suggestions.");hw=Cze([eS(1,Fg),eS(2,Xe),eS(3,ci),eS(4,qt)],hw);class Mze{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:s}=this._widget.getLayoutInfo();return new jt(t+2*n+s,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}oi((i,e)=>{const t=i.getColor(Ize);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${t}; }`);const n=i.getColor(Tze);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${n}; }`);const s=i.getColor(kze);s&&e.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${s}; }`);const r=i.getColor(Lze);r&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${r}; }`);const o=i.getColor(Eze);o&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${o}; }`);const a=i.getColor(b2);a&&e.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);const l=i.getColor(v2);l&&e.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);const h=i.getColor(Mee);h&&e.addRule(`.monaco-editor .suggest-details code { background-color: ${h}; }`)});var Rze=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Y_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class Oze{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),r=e.getPositionAt(s+1);this._marker=e.deltaDecorations([],[{range:V.fromPositions(t,r),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let jo=class dse{constructor(e,t,n,s,r,o){this._memoryService=t,this._commandService=n,this._contextKeyService=s,this._instantiationService=r,this._logService=o,this._lineSuffix=new Vr,this._toDispose=new ve,this._selectors=new Pze(c=>c.priority),this.editor=e,this.model=r.createInstance(G4,this.editor);const a=ht.InsertMode.bindTo(s);a.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new Ub(()=>{const c=this._instantiationService.createInstance(hw,this.editor);this._toDispose.add(c),this._toDispose.add(c.onDidSelect(p=>this._insertSuggestion(p,0),this));const u=new EWe(this.editor,c,p=>this._insertSuggestion(p,2));this._toDispose.add(u),this._toDispose.add(this.model.onDidSuggest(p=>{p.completionModel.items.length===0&&u.reset()}));const d=ht.MakesTextEdit.bindTo(this._contextKeyService),f=ht.HasInsertAndReplaceRange.bindTo(this._contextKeyService),g=ht.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(xt(()=>{d.reset(),f.reset(),g.reset()})),this._toDispose.add(c.onDidFocus(({item:p})=>{const m=this.editor.getPosition(),b=p.editStart.column,_=m.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!p.completion.additionalTextEdits&&!(p.completion.insertTextRules&4)&&_-b===p.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:m.lineNumber,startColumn:b,endLineNumber:m.lineNumber,endColumn:_})!==p.completion.insertText),d.set(w),f.set(!K.equals(p.editInsertEnd,p.editReplaceEnd)),g.set(!!p.provider.resolveCompletionItem||!!p.completion.documentation||p.completion.detail!==p.completion.label)})),this._toDispose.add(c.onDetailsKeyDown(p=>{if(p.toKeybinding().equals(new Uf(!0,!1,!1,!1,33))||vt&&p.toKeybinding().equals(new Uf(!1,!1,!1,!0,33))){p.stopPropagation();return}p.toKeybinding().isModifierKey()||this.editor.focus()})),c})),this._overtypingCapturer=this._toDispose.add(new Ub(()=>this._toDispose.add(new rE(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Ub(()=>this._toDispose.add(new lg(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(lw,e)),this._toDispose.add(this.model.onDidTrigger(c=>{this.widget.value.showTriggered(c.auto,c.shy?250:50),this._lineSuffix.value=new Oze(this.editor.getModel(),c.position)})),this._toDispose.add(this.model.onDidSuggest(c=>{if(!c.shy){let u=-1;for(const d of this._selectors.itemsOrderedByPriorityDesc)if(u=d.select(this.editor.getModel(),this.editor.getPosition(),c.completionModel.items),u!==-1)break;u===-1&&(u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),c.completionModel.items)),this.widget.value.showSuggestions(c.completionModel,u,c.isFrozen,c.auto)}})),this._toDispose.add(this.model.onDidCancel(c=>{c.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let l=ht.AcceptSuggestionsOnEnter.bindTo(s),h=()=>{const c=this.editor.getOption(1);l.set(c==="on"||c==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>h())),h()}static get(e){return e.getContribution(dse.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),s=n.getAlternativeVersionId(),{item:r}=e,o=[],a=new Ya;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(r,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const c=g0.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(u=>n0.replace(V.lift(u.range),u.text))),c.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const c=new hc(!0);let u;const d=n.onDidChangeContent(m=>{if(m.isFlush){a.cancel(),d.dispose();return}for(let b of m.changes){const _=V.getEndPosition(b.range);(!u||K.isBefore(_,u))&&(u=_)}});let f=t;t|=2;let g=!1,p=this.editor.onWillType(()=>{p.dispose(),g=!0,f&2||this.editor.pushUndoStop()});o.push(r.resolve(a.token).then(()=>{if(!r.completion.additionalTextEdits||a.token.isCancellationRequested||u&&r.completion.additionalTextEdits.some(b=>K.isBefore(u,V.getStartPosition(b.range))))return!1;g&&this.editor.pushUndoStop();const m=g0.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(b=>n0.replace(V.lift(b.range),b.text))),m.restoreRelativeVerticalPositionOfCursor(this.editor),(g||!(f&2))&&this.editor.pushUndoStop(),!0}).then(m=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",c.elapsed(),m),d.dispose(),p.dispose()}))}let{insertText:h}=r.completion;r.completion.insertTextRules&4||(h=q2.escape(h)),Rn.get(this.editor).insert(h,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===Ey.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(nt)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,c=>{for(a.cancel();n.canUndo();){s!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(c,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(o).finally(()=>{this.model.clear(),a.dispose()})}getOverwriteInfo(e,t){$i(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const s=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+o,overwriteAfter:r+a}}_alertCompletionItem(e){if($l(e.completion.additionalTextEdits)){let t=v("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Eg(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=r.editStart.column,l=o.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==r.completion.insertText};Re.once(this.model.onDidTrigger)(r=>{let o=[];Re.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{mt(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(mt(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),h=a.items[l];if(!s(h)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:h,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(n,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};jo.ID="editor.contrib.suggestController";jo=Rze([Y_(1,ase),Y_(2,An),Y_(3,Xe),Y_(4,qt),Y_(5,_c)],jo);class Pze{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class Ey extends Si{constructor(){super({id:Ey.id,label:v("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Ae.and(Z.writable,Z.hasCompletionItemProvider),kbOpts:{kbExpr:Z.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const n=jo.get(t);n&&n.triggerSuggest()}}Ey.id="editor.action.triggerSuggest";Ks(jo.ID,jo);gt(Ey);const go=100+90,gr=ho.bindToContribution(jo.get);Se(new gr({id:"acceptSelectedSuggestion",precondition:ht.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));ys.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Ae.and(ht.Visible,Z.textInputFocus),primary:2,weight:go});ys.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Ae.and(ht.Visible,Z.textInputFocus,ht.AcceptSuggestionsOnEnter,ht.MakesTextEdit),primary:3,weight:go});Aa.appendMenuItem($u,{command:{id:"acceptSelectedSuggestion",title:v("accept.insert","Insert")},group:"left",order:1,when:ht.HasInsertAndReplaceRange.toNegated()});Aa.appendMenuItem($u,{command:{id:"acceptSelectedSuggestion",title:v("accept.insert","Insert")},group:"left",order:1,when:Ae.and(ht.HasInsertAndReplaceRange,ht.InsertMode.isEqualTo("insert"))});Aa.appendMenuItem($u,{command:{id:"acceptSelectedSuggestion",title:v("accept.replace","Replace")},group:"left",order:1,when:Ae.and(ht.HasInsertAndReplaceRange,ht.InsertMode.isEqualTo("replace"))});Se(new gr({id:"acceptAlternativeSelectedSuggestion",precondition:Ae.and(ht.Visible,Z.textInputFocus),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:$u,group:"left",order:2,when:Ae.and(ht.HasInsertAndReplaceRange,ht.InsertMode.isEqualTo("insert")),title:v("accept.replace","Replace")},{menuId:$u,group:"left",order:2,when:Ae.and(ht.HasInsertAndReplaceRange,ht.InsertMode.isEqualTo("replace")),title:v("accept.insert","Insert")}]}));Ft.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Se(new gr({id:"hideSuggestWidget",precondition:ht.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:9,secondary:[1033]}}));Se(new gr({id:"selectNextSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Se(new gr({id:"selectNextPageSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:12,secondary:[2060]}}));Se(new gr({id:"selectLastSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));Se(new gr({id:"selectPrevSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Se(new gr({id:"selectPrevPageSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:11,secondary:[2059]}}));Se(new gr({id:"selectFirstSuggestion",precondition:Ae.and(ht.Visible,ht.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));Se(new gr({id:"toggleSuggestionDetails",precondition:ht.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:$u,group:"right",order:1,when:Ae.and(ht.DetailsVisible,ht.CanResolve),title:v("detail.more","show less")},{menuId:$u,group:"right",order:1,when:Ae.and(ht.DetailsVisible.toNegated(),ht.CanResolve),title:v("detail.less","show more")}]}));Se(new gr({id:"toggleExplainMode",precondition:ht.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));Se(new gr({id:"toggleSuggestionFocus",precondition:ht.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:2570,mac:{primary:778}}}));Se(new gr({id:"insertBestCompletion",precondition:Ae.and(Z.textInputFocus,Ae.equals("config.editor.tabCompletion","on"),lw.AtEnd,ht.Visible.toNegated(),lg.OtherSuggestions.toNegated(),Rn.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(Ps(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:go,primary:2}}));Se(new gr({id:"insertNextSuggestion",precondition:Ae.and(Z.textInputFocus,Ae.equals("config.editor.tabCompletion","on"),lg.OtherSuggestions,ht.Visible.toNegated(),Rn.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:2}}));Se(new gr({id:"insertPrevSuggestion",precondition:Ae.and(Z.textInputFocus,Ae.equals("config.editor.tabCompletion","on"),lg.OtherSuggestions,ht.Visible.toNegated(),Rn.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:go,kbExpr:Z.textInputFocus,primary:1026}}));gt(class extends Si{constructor(){super({id:"editor.action.resetSuggestSize",label:v("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){jo.get(e).resetWidgetSize()}});function Fze(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function Bze(i,e){return(t,n)=>e(i(t),i(n))}function Vze(){return(i,e)=>i-e}function Wze(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class zze extends ne{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new yi(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=jo.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,l)=>{const h=this.editor.getModel(),c=Rk(h,this.suggestControllerPreselector());if(!c)return-1;const u=K.lift(a),d=l.map((g,p)=>{const m=b$(n,u,g,this.isShiftKeyPressed),b=Rk(h,m);if(!b)return;const _=Hze(c.range,b.range)&&c.text.startsWith(b.text);return{index:p,valid:_,prefixLength:b.text.length,suggestItem:g}}).filter(g=>g&&g.valid),f=Wze(d,Bze(g=>g.prefixLength,Vze()));return f?f.index:-1}}));let s=!1;const r=()=>{s||(s=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Re.once(n.model.onDidTrigger)(o=>{r()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let n=!1;iWe(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=jo.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return b$(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=jo.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=jo.get(this.editor);e&&e.forceRenderingAbove()}}function Hze(i,e){return i.startLineNumber===e.startLineNumber&&i.startColumn===e.startColumn&&(i.endLineNumber<e.endLineNumber||i.endLineNumber===e.endLineNumber&&i.endColumn<=e.endColumn)}function b$(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{text:"",range:V.fromPositions(e,e)};let{insertText:s}=t.completion;if(t.completion.insertTextRules&4){const o=new q2().parse(s),a=i.editor.getModel();if(o.children.length>100)return;_l.adjustWhitespace(a,e,o,!0,!0),s=o.toString()}const r=i.getOverwriteInfo(t,n);return{text:s,range:V.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0)))}}var v$=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class Uze extends ise{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new zze(this.editor,()=>{var n,s;return(s=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new Vr),this.updateCacheSoon=this._register(new yi(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,$ze(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(xt(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return v$(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},n=this.editor.getPosition(),s=Wr(o=>v$(this,void 0,void 0,function*(){let a;try{a=yield rse(n,this.editor.getModel(),{triggerKind:Gr.Automatic,selectedSuggestionInfo:t},o)}catch(l){nt(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,Gr.Automatic),this.onDidChangeEmitter.fire())})),r=new sse(s,Gr.Automatic);this.updateOperation.value=r,yield s,this.updateOperation.value===r&&this.updateOperation.clear()})}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;const n=this.suggestionInlineCompletionSource.state,s=Rk(this.editor.getModel(),n==null?void 0:n.selectedItemAsInlineCompletion),r=Rk(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=r&&s&&r.text.startsWith(s.text)&&r.range.equalsRange(s.range)?r:s||r,a=s?((o==null?void 0:o.text.length)||0)-s.text.length:0;return(c=>{const u=this.editor.getOptions().get(105).previewMode;return c?nse(c,this.editor.getModel(),u,this.editor.getPosition(),a)||new tse(c.range.endLineNumber,[],this.minReservedLineCount):void 0})(o)}}function $ze(i){return i.reduce((e,t)=>e+t,0)}var jze=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Gze=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};class Kze extends ne{constructor(){super(...arguments),this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Vr)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?Fze(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let X4=class extends Kze{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new Zze),this.suggestWidgetAdapterModel=this._register(new Uze(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new j4(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(s=>e.containsPosition(new K(n.lineNumber,s.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Gr.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return Gze(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};X4=jze([qze(1,An)],X4);class Zze extends ne{constructor(){super(...arguments),this.onDidChangeEmitter=new H,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Vr)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new lWe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var fse=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Cv=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},FT;const w$=(FT=window.trustedTypes)===null||FT===void 0?void 0:FT.createPolicy("editorGhostText",{createHTML:i=>i});let J4=class extends ne{constructor(e,t,n,s){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=s,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(eO,this.editor)),this.additionalLinesWidget=this._register(new Yze(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(29)||r.hasChanged(104)||r.hasChanged(87)||r.hasChanged(82)||r.hasChanged(44)||r.hasChanged(43)||r.hasChanged(58))&&this.update()})),this._register(xt(()=>{var r;this.disposed=!0,this.update(),(r=this.viewMoreContentWidget)===null||r===void 0||r.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,s=new Array;function r(h,c){if(s.length>0){const u=s[s.length-1];c&&u.decorations.push(new Ir(u.content.length+1,u.content.length+1+h[0].length,c,0)),u.content+=h[0],h=h.slice(1)}for(const u of h)s.push({content:u,decorations:c?[new Ir(1,u.length+1,c,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const h of t.parts){let c=h.lines;a===void 0?(n.push({column:h.column,text:c[0],preview:h.preview}),c=c.slice(1)):r([o.substring(l,h.column-1)],void 0),c.length>0&&(r(c,"ghost-text"),a===void 0&&h.column<=o.length&&(a=h.column)),l=h.column-1}a!==void 0&&r([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,s,t.additionalReservedLineCount),t.parts.some(h=>h.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new K(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const s=this.editor.getOption(43),r=document.createElement("div");r.className="suggest-preview-additional-widget",Kn.applyFontInfoSlow(r,s);const o=document.createElement("span");o.className="content-spacer",o.append(t),r.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("  "),r.append(a);const l=new ve,h=document.createElement("div");return h.className="button suggest-preview-text",h.append(`+${n} lines`),l.add(cn(h,"mousedown",c=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),c.preventDefault(),this.editor.focus()})),r.append(h),new eHe(this.editor,e,r,l)}};J4=fse([Cv(2,qt),Cv(3,Gs)],J4);let eO=class{constructor(e,t,n,s){this.editor=e,this.codeEditorService=t,this.themeService=n,this.contextKeyService=s,this.decorationIds=[],this.disposableStore=new ve}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){this.disposableStore.clear();const s=this.themeService.getColorTheme(),r=s.getColor(tte);let o,a;r&&(o=String(r.rgba.a),a=Q.Format.CSS.format(gse(r)));const l=s.getColor(ete);let h;l&&(h=`2px dashed ${l}`);const c=this.editor.getModel();if(!c)return;const{tabSize:u}=c.getOptions(),d=c.getLineContent(e)||"";let f=0,g="";const p=new Array;n&&p.push({range:V.fromPositions(new K(e,n.column),new K(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const m=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),b=m===void 0?!0:!!m;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(_=>{g+=d.substring(f,_.column-1),f=_.column-1;const w=b?_.text:this.renderSingleLineText(_.text,g,u,!1),y=this.disposableStore.add(Jze(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:w,opacity:o,color:a,border:h,fontWeight:_.preview?"bold":"normal"}}));return{range:V.fromPositions(new K(e,_.column)),options:b?{description:"ghost-text",after:{content:w,inlineClassName:_.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},y.resolve())}}).concat(p))}renderSingleLineText(e,t,n,s){const r=t+e,o=Rt.visibleColumnsByColumns(r,n);let a="",l=t.length+1;for(const h of e){if(h==="	"){const c=o[l+1]-o[l];if(s){a+="";for(let u=1;u<c;u++)a+=""}else for(let u=0;u<c;u++)a+=""}else h===" "?s?a+="":a+="":a+=h;l+=1}return a}};eO=fse([Cv(1,li),Cv(2,ci),Cv(3,Xe)],eO);function gse(i){const{r:e,b:t,g:n}=i.rgba;return new Q(new ct(e,n,t,255))}class Yze{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const s=this.editor.getModel();if(!s)return;const{tabSize:r}=s.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");Qze(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function Qze(i,e,t,n,s){const r=n.get(29),o=n.get(104),a="none",l=n.get(82),h=n.get(44),c=n.get(43),u=n.get(58),d=jf(1e4);d.appendASCIIString('<div class="suggest-preview-text">');for(let p=0,m=t.length;p<m;p++){const b=t[p],_=b.content;d.appendASCIIString('<div class="view-line'),d.appendASCIIString('" style="top:'),d.appendASCIIString(String(p*u)),d.appendASCIIString('px;width:1000000px;">');const w=O5(_),y=jL(_),x=Ln.createEmpty(_,s);t2(new kg(c.isMonospace&&!r,c.canUseHalfwidthRightwardsArrow,_,!1,w,y,0,x,b.decorations,e,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,o,a,l,h!==yr.OFF,null),d),d.appendASCIIString("</div>")}d.appendASCIIString("</div>"),Kn.applyFontInfoSlow(i,c);const f=d.build(),g=w$?w$.createHTML(f):f;i.innerHTML=g}let Xze=0;function Jze(i,e,t,n){const s=t+Xze++;return i.registerDecorationType(e,s,n),{dispose(){i.removeDecorationType(s)},resolve(){return i.resolveDecorationOptions(s,!0)}}}class eHe extends ne{constructor(e,t,n,s){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(s),this._register(xt(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}oi((i,e)=>{const t=i.getColor(tte);if(t){const s=String(t.rgba.a),r=Q.Format.CSS.format(gse(t));e.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${s} !important; color: ${r} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${s} !important; color: ${r} !important; }`)}const n=i.getColor(ete);n&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${n}; }`))});var pse=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tO=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oE=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};let vn=class mse extends ne{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Vr),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(mse.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(iO,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return oE(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};vn.inlineSuggestionVisible=new Ie("inlineSuggestionVisible",!1,v("inlineSuggestionVisible","Whether an inline suggestion is visible"));vn.inlineSuggestionHasIndentation=new Ie("inlineSuggestionHasIndentation",!1,v("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));vn.inlineSuggestionHasIndentationLessThanTabSize=new Ie("inlineSuggestionHasIndentationLessThanTabSize",!0,v("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));vn.ID="editor.contrib.ghostTextController";vn=pse([tO(1,qt)],vn);class tHe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=vn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=vn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=vn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let iO=class extends ne{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new tHe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(X4,this.editor)),this.widget=this._register(this.instantiationService.createInstance(J4,this.editor,this.model)),this._register(xt(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const s=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&s&&s.parts.length>0){const{column:r,lines:o}=s.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(s.lineNumber);if(r<=l){let c=ar(a);c===-1&&(c=a.length-1),t=c>0;const u=this.editor.getModel().getOptions().tabSize;n=Rt.visibleColumnFromColumn(a,c+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};iO=pse([tO(1,qt),tO(2,Xe)],iO);const _se=ho.bindToContribution(vn.get),cw=new _se({id:ese,precondition:vn.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});Se(cw);ys.registerKeybindingRule({primary:2,weight:200,id:cw.id,when:Ae.and(cw.precondition,Z.tabMovesFocus.toNegated(),vn.inlineSuggestionHasIndentationLessThanTabSize)});Se(new _se({id:"editor.action.inlineSuggest.hide",precondition:vn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class k0 extends Si{constructor(){super({id:k0.ID,label:v("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Ae.and(Z.writable,vn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return oE(this,void 0,void 0,function*(){const n=vn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}k0.ID="editor.action.inlineSuggest.showNext";class L0 extends Si{constructor(){super({id:L0.ID,label:v("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Ae.and(Z.writable,vn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return oE(this,void 0,void 0,function*(){const n=vn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}L0.ID="editor.action.inlineSuggest.showPrevious";class iHe extends Si{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:v("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:Z.writable})}run(e,t){return oE(this,void 0,void 0,function*(){const n=vn.get(t);n&&n.trigger()})}}Ks(vn.ID,vn);gt(iHe);gt(k0);gt(L0);var nHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bp=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class sHe{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let nO=class{constructor(e,t,n,s,r,o,a,l){this._editor=e,this._hover=t,this._commandService=n,this._menuService=s,this._contextKeyService=r,this._modeService=o,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=vn.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new DT(1e3,this,V.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new DT(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new DT(1e3,this,e.target.range):null}computeSync(e,t){const n=vn.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new sHe(this,e.range,n)]:[]}renderHoverParts(e,t,n){const s=new ve,r=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(r,t,s);const o=s.add(this._menuService.createMenu(Ye.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:v("showNextInlineSuggestion","Next"),commandId:k0.ID,run:()=>this._commandService.executeCommand(k0.ID)}),l=n.addAction({label:v("showPreviousInlineSuggestion","Previous"),commandId:L0.ID,run:()=>this._commandService.executeCommand(L0.ID)});n.addAction({label:v("acceptInlineSuggestion","Accept"),commandId:cw.id,run:()=>this._commandService.executeCommand(cw.id)});const h=[a,l];for(const c of h)c.setEnabled(!1);r.hasMultipleSuggestions().then(c=>{for(const u of h)u.setEnabled(c)});for(const[c,u]of o.getActions())for(const d of u)d instanceof Fu&&n.addAction({label:d.label,commandId:d.item.id,run:()=>this._commandService.executeCommand(d.item.id)});return s}renderScreenReaderText(e,t,n){var s,r;const o=_e,a=o("div.hover-row.markdown-hover"),l=ae(a,o("div.hover-contents")),h=n.add(new ag({editor:this._editor},this._modeService,this._openerService)),c=d=>{n.add(h.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const f=v("inlineSuggestionFollows","Suggestion:"),g=n.add(h.render(new _0().appendText(f).appendCodeblock("text",d)));l.replaceChildren(g.element)},u=(r=(s=e.controller.activeModel)===null||s===void 0?void 0:s.inlineCompletionsModel)===null||r===void 0?void 0:r.ghostText;if(u){const d=this._editor.getModel().getLineContent(u.lineNumber);c(u.renderForScreenReader(d))}t.appendChild(a)}};nO=nHe([bp(2,An),bp(3,n_),bp(4,Xe),bp(5,Gs),bp(6,Ru),bp(7,fr)],nO);var bse=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ux=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},y$=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{h(n.next(c))}catch(u){o(u)}}function l(c){try{h(n.throw(c))}catch(u){o(u)}}function h(c){c.done?r(c.value):s(c.value).then(a,l)}h((n=n.apply(i,e||[])).next())})};const C$=_e;let sO=class extends ne{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=C$("div.hover-row.status-bar"),this.actionsElement=ae(this.hoverElement,C$("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(IB.render(this.actionsElement,e,n))}append(e){const t=ae(this.actionsElement,e);return this._hasContent=!0,t}};sO=bse([ux(0,Zi)],sO);class Ok{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),s=t.range.startLineNumber,r=n.getLineMaxColumn(s);return e.getLineDecorations(s).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===s?o.range.startColumn:1,l=o.range.endLineNumber===s?o.range.endColumn:r;return!(a>t.range.startColumn||t.range.endColumn>l)})}computeAsync(e){return y$(this,void 0,void 0,function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const n=Ok._getLineDecorations(this._editor,t),s=yield Promise.all(this._participants.map(r=>this._computeAsync(r,n,t,e)));return Z5(s)})}_computeAsync(e,t,n,s){return y$(this,void 0,void 0,function*(){return e.computeAsync?e.computeAsync(n,t,s):[]})}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Ok._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return e2(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let lu=class rO extends uo{constructor(e,t,n,s,r){super(),this._hoverVisibleKey=t,this._keybindingService=s,this._contextKeyService=r,this.allowEditorOverflow=!0,this._participants=[n.createInstance(M4,e,this),n.createInstance(O4,e,this),n.createInstance(nO,e,this),n.createInstance($4,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new Ine),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new Ok(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new Mne(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(cn(this.getDomNode(),Oe.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(cn(this.getDomNode(),Oe.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Ri.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return rO.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,s=e.target.detail;if(s&&!s.isAfterLines&&typeof s.horizontalDistanceToText=="number"&&s.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const s of this._participants)if(typeof s.suggestHoverAnchor=="function"){const r=s.suggestHoverAnchor(e);r&&n.push(r)}if(this._shouldShowAt(e)&&e.target.range){const r=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new V(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new HU(0,r))}return n.length===0?!1:(n.sort((s,r)=>r.priority-s.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(ht.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new HU(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const s=this._messages.filter(r=>r.isValidForHoverAnchor(e));if(s.length===0)this.hide();else{if(s.length===this._messages.length)return;this._renderMessages(e,s)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,s=t[0].range,r=null,o=document.createDocumentFragment();const a=new ve,l=new Map;for(const c of t)n=Math.min(n,c.range.startColumn),s=V.plusRange(s,c.range),c.forceShowAtRange&&(r=c.range),l.has(c.owner)||l.set(c.owner,[]),l.get(c.owner).push(c);const h=a.add(new sO(this._keybindingService));for(const[c,u]of l)a.add(c.renderHoverParts(u,o,h));h.hasContent&&o.appendChild(h.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new K(e.range.startLineNumber,n),s,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:rO._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};lu.ID="editor.contrib.modesContentHoverWidget";lu._DECORATION_OPTIONS=_t.register({description:"content-hover-highlight",className:"hoverHighlight"});lu=bse([ux(2,qt),ux(3,Zi),ux(4,Xe)],lu);const S$=_e;class rHe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=s=>({value:s}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const s of t){if(!s.options.glyphMarginClassName)continue;const r=s.options.glyphMarginHoverMessage;!r||bv(r)||n.push(...BJ(r).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class sf extends uo{constructor(e,t,n=d2e){super(),this._renderDisposeables=this._register(new ve),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new Ine),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new ag({editor:this._editor},t,n)),this._computer=new rHe(this._editor),this._hoverOperation=new Mne(this._computer,s=>this._withResult(s),void 0,s=>this._withResult(s),300),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return sf.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),r=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=n-s-(o-r)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const s of t){const r=S$("div.hover-row.markdown-hover"),o=ae(r,S$("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));o.appendChild(a.element),n.appendChild(r)}this._updateContents(n),this._showAt(e)}}sf.ID="editor.contrib.modesGlyphHoverWidget";var oHe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let hg=class vse{constructor(e,t,n,s,r){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=s,this._toUnhook=new ve,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=Z.hoverVisible.bindTo(r)}static get(e){return e.getContribution(vse.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===lu.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===sf.ID||(t!==12&&e.target.detail!==sf.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,s,r,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===lu.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===lu.ID&&(!((s=this._contentWidget)===null||s===void 0)&&s.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===sf.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new sf(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(lu,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};hg.ID="editor.contrib.hover";hg=oHe([tS(1,qt),tS(2,Ru),tS(3,Gs),tS(4,Xe)],hg);class aHe extends Si{constructor(){super({id:"editor.action.showHover",label:v({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:Z.editorTextFocus,primary:$s(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=hg.get(t);if(!n)return;const s=t.getPosition(),r=new V(s.lineNumber,s.column,s.lineNumber,s.column),o=t.getOption(2)===2;n.showContentHover(r,1,o)}}class lHe extends Si{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:v({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=hg.get(t);if(!n)return;const s=t.getPosition();if(!s)return;const r=new V(s.lineNumber,s.column,s.lineNumber,s.column);rg.get(t).startFindDefinitionFromCursor(s).then(()=>{n.showContentHover(r,1,!0)})}}Ks(hg.ID,hg);gt(aHe);gt(lHe);oi((i,e)=>{const t=i.getColor(TNe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(x1);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const s=i.getColor(MNe);s&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${s}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${s.transparent(.5)}; }`));const r=i.getColor(b2);r&&e.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const o=i.getColor(v2);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=i.getColor(NNe);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=i.getColor(RNe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const h=i.getColor(Mee);h&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${h}; }`)});function hHe(){return new Worker(""+new URL("json.worker-5aea2fd8.js",import.meta.url).href)}self.MonacoEnvironment={getWorker(i,e){if(e==="json")return new hHe;throw new Error("Unsupported language: "+e)}};class cHe extends Zp{constructor(){super();v_(this,"_editor");v_(this,"_initialValue")}set value(t){this._editor?this._editor.setValue(t):this._initialValue=t}get value(){var t;return((t=this._editor)==null?void 0:t.getValue())??this._initialValue}createRenderRoot(){return this}disconnectedCallback(){var t,n,s;(t=this._editor)==null||t.dispose(),(s=(n=this._editor)==null?void 0:n.getModel())==null||s.dispose()}render(){return _n}firstUpdated(){this._editor=y6e.create(this,{value:this._initialValue,language:"json",minimap:{enabled:!1},fontFamily:"'Source Code Pro', monospace",fontSize:12}),this._editor.getModel().onDidChangeContent(()=>{this.dispatchEvent(new CustomEvent("change",{detail:{}}))}),new ResizeObserver(n=>{this._editor.layout()}).observe(this)}}customElements.define("code-editor",cHe);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*uHe(i,e){if(i!==void 0){let t=0;for(const n of i)yield e(n,t++)}}function b_(i,e,t){return i.fields=e||[],i.fname=t,i}function dHe(i){return i.length===1?fHe(i[0]):gHe(i)}const fHe=i=>function(e){return e[i]},gHe=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function xf(i){throw Error(i)}function pHe(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function h(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)h(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?h():o=a+1:l==="["?(a>o&&h(),s=o=a+1):l==="]"&&(s||xf("Access path missing open bracket: "+i),s>0&&h(),s=0,o=a+1)}return s&&xf("Access path missing closing bracket: "+i),n&&xf("Access path missing closing quote: "+i),a>o&&(a++,h()),e}function wse(i,e,t){const n=pHe(i);return i=n.length===1?n[0]:i,b_((t&&t.get||dHe)(n),[i],e||i)}wse("id");const yse=b_(i=>i,[],"identity");b_(()=>0,[],"zero");b_(()=>1,[],"one");b_(()=>!0,[],"true");b_(()=>!1,[],"false");var Cse=Array.isArray;function FB(i){return i===Object(i)}function x$(i){return i==null||i===""?null:+i}function Sse(i){return typeof i=="function"}function mHe(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const _He=Object.prototype.hasOwnProperty;function xse(i,e){return _He.call(i,e)}function bHe(i){return Object.prototype.toString.call(i)==="[object Date]"}function vHe(i){return i&&Sse(i[Symbol.iterator])}function wHe(i){return typeof i=="number"}function oO(i){return typeof i=="string"}function Dse(i){return Cse(i)?"["+i.map(Dse)+"]":FB(i)||oO(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function yHe(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const CHe=i=>wHe(i)||bHe(i)?i:Date.parse(i);function SHe(i,e){return e=e||CHe,i==null||i===""?null:e(i)}function xHe(i){return i==null||i===""?null:i+""}var D$={},BT={},VT=34,Q_=10,WT=13;function kse(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function DHe(i,e){var t=kse(i);return function(n,s){return e(t(n),s,i)}}function k$(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function br(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function kHe(i){return i<0?"-"+br(-i,6):i>9999?"+"+br(i,6):br(i,4)}function LHe(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":kHe(i.getUTCFullYear())+"-"+br(i.getUTCMonth()+1,2)+"-"+br(i.getUTCDate(),2)+(s?"T"+br(e,2)+":"+br(t,2)+":"+br(n,2)+"."+br(s,3)+"Z":n?"T"+br(e,2)+":"+br(t,2)+":"+br(n,2)+"Z":t||e?"T"+br(e,2)+":"+br(t,2)+"Z":"")}function EHe(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,b){if(f)return f(m,b-1);g=m,f=d?DHe(m,d):kse(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,b,_=g<=0,w=!1;u.charCodeAt(g-1)===Q_&&--g,u.charCodeAt(g-1)===WT&&--g;function y(){if(_)return BT;if(w)return w=!1,D$;var L,S=p,k;if(u.charCodeAt(S)===VT){for(;p++<g&&u.charCodeAt(p)!==VT||u.charCodeAt(++p)===VT;);return(L=p)>=g?_=!0:(k=u.charCodeAt(p++))===Q_?w=!0:k===WT&&(w=!0,u.charCodeAt(p)===Q_&&++p),u.slice(S+1,L-1).replace(/""/g,'"')}for(;p<g;){if((k=u.charCodeAt(L=p++))===Q_)w=!0;else if(k===WT)w=!0,u.charCodeAt(p)===Q_&&++p;else if(k!==t)continue;return u.slice(S,L)}return _=!0,u.slice(S,g)}for(;(b=y())!==BT;){for(var x=[];b!==D$&&b!==BT;)x.push(b),b=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return c(f[g])}).join(i)})}function o(u,d){return d==null&&(d=k$(u)),[d.map(c).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=k$(u)),r(u,d).join(`
`)}function l(u){return u.map(h).join(`
`)}function h(u){return u.map(c).join(i)}function c(u){return u==null?"":u instanceof Date?LHe(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:h,formatValue:c}}function AHe(i){return i}function IHe(i){if(i==null)return AHe;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var h=2,c=a.length,u=new Array(c);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;h<c;)u[h]=a[h],++h;return u}}function THe(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function NHe(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return L$(i,t)})}:L$(i,e)}function L$(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=Lse(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function Lse(i,e){var t=IHe(i.transform),n=i.arcs;function s(c,u){u.length&&u.pop();for(var d=n[c<0?~c:c],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));c<0&&THe(u,g)}function r(c){return t(c)}function o(c){for(var u=[],d=0,f=c.length;d<f;++d)s(c[d],u);return u.length<2&&u.push(u[0]),u}function a(c){for(var u=o(c);u.length<4;)u.push(u[0]);return u}function l(c){return c.map(a)}function h(c){var u=c.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:c.geometries.map(h)};case"Point":d=r(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(r);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return h(e)}function MHe(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(h,c){var u=i.arcs[h<0?~h:h],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=h,e[c]=d)}),e.forEach(function(h){var c=a(h),u=c[0],d=c[1],f,g;if(f=s[u])if(delete s[f.end],f.push(h),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(h),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[h],n[f.start=u]=s[f.end=d]=f});function a(h){var c=i.arcs[h<0?~h:h],u=c[0],d;return i.transform?(d=[0,0],c.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=c[c.length-1],h<0?[d,u]:[u,d]}function l(h,c){for(var u in h){var d=h[u];delete c[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(h){t[h<0?~h:h]||r.push([h])}),r}function RHe(i){return Lse(i,OHe.apply(this,arguments))}function OHe(i,e,t){var n,s,r;if(arguments.length>1)n=PHe(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:MHe(i,n)}}function PHe(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function h(u){u.forEach(l)}function c(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(c);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":h(u.arcs);break}}return c(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}var FHe=Math.sqrt(50),BHe=Math.sqrt(10),VHe=Math.sqrt(2);function WHe(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=FHe?s*=10:r>=BHe?s*=5:r>=VHe&&(s*=2),e<i?-s:s}function zHe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function Pk(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function E0(i){return i=Pk(Math.abs(i)),i?i[1]:NaN}function HHe(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function UHe(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var $He=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uw(i){if(!(e=$He.exec(i)))throw new Error("invalid format: "+i);var e;return new BB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uw.prototype=BB.prototype;function BB(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}BB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jHe(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var Ese;function qHe(i,e){var t=Pk(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(Ese=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+Pk(i,Math.max(0,e+r-1))[0]}function E$(i,e){var t=Pk(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const A$={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:zHe,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>E$(i*100,e),r:E$,s:qHe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function I$(i){return i}var T$=Array.prototype.map,N$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GHe(i){var e=i.grouping===void 0||i.thousands===void 0?I$:HHe(T$.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?I$:UHe(T$.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function h(u){u=uw(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,b=u.width,_=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(_=!0,x="g"):A$[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var L=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",k=A$[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(M){var j=L,$=S,ie,pe,be;if(x==="c")$=k(M)+$,M="";else{M=+M;var ye=M<0||1/M<0;if(M=isNaN(M)?l:k(Math.abs(M),w),y&&(M=jHe(M)),ye&&+M==0&&g!=="+"&&(ye=!1),j=(ye?g==="("?g:a:g==="-"||g==="("?"":g)+j,$=(x==="s"?N$[8+Ese/3]:"")+$+(ye&&g==="("?")":""),D){for(ie=-1,pe=M.length;++ie<pe;)if(be=M.charCodeAt(ie),48>be||be>57){$=(be===46?s+M.slice(ie+1):M.slice(ie))+$,M=M.slice(0,ie);break}}}_&&!m&&(M=e(M,1/0));var Ee=j.length+M.length+$.length,we=Ee<b?new Array(b-Ee+1).join(d):"";switch(_&&m&&(M=e(we+M,we.length?b-$.length:1/0),we=""),f){case"<":M=j+M+$+we;break;case"=":M=j+we+M+$;break;case"^":M=we.slice(0,Ee=we.length>>1)+j+M+$+we.slice(Ee);break;default:M=we+j+M+$;break}return r(M)}return T.toString=function(){return u+""},T}function c(u,d){var f=h((u=uw(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(E0(d)/3)))*3,p=Math.pow(10,-g),m=N$[8+g/3];return function(b){return f(p*b)+m}}return{format:h,formatPrefix:c}}var iS,Ase,Ise;KHe({thousands:",",grouping:[3],currency:["$",""]});function KHe(i){return iS=GHe(i),Ase=iS.format,Ise=iS.formatPrefix,iS}function ZHe(i){return Math.max(0,-E0(Math.abs(i)))}function YHe(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(E0(e)/3)))*3-E0(Math.abs(i)))}function QHe(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,E0(e)-E0(i))+1}var zT=new Date,HT=new Date;function hs(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],h;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(h=new Date(+r)),e(r,a),i(r);while(h<r&&r<o);return l},s.filter=function(r){return hs(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return zT.setTime(+r),HT.setTime(+o),i(zT),i(HT),Math.floor(t(zT,HT))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var Fk=hs(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});Fk.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?hs(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):Fk};const Tse=Fk;Fk.range;const dw=1e3,Gu=dw*60,fw=Gu*60,VB=fw*24,Nse=VB*7;var Mse=hs(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*dw)},function(i,e){return(e-i)/dw},function(i){return i.getUTCSeconds()});const Rse=Mse;Mse.range;var Ose=hs(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*dw)},function(i,e){i.setTime(+i+e*Gu)},function(i,e){return(e-i)/Gu},function(i){return i.getMinutes()});const XHe=Ose;Ose.range;var Pse=hs(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*dw-i.getMinutes()*Gu)},function(i,e){i.setTime(+i+e*fw)},function(i,e){return(e-i)/fw},function(i){return i.getHours()});const JHe=Pse;Pse.range;var Fse=hs(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*Gu)/VB,i=>i.getDate()-1);const Sv=Fse;Fse.range;function zg(i){return hs(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gu)/Nse})}var WB=zg(0),Bk=zg(1),eUe=zg(2),tUe=zg(3),A0=zg(4),iUe=zg(5),nUe=zg(6);WB.range;Bk.range;eUe.range;tUe.range;A0.range;iUe.range;nUe.range;var Bse=hs(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const M$=Bse;Bse.range;var zB=hs(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});zB.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:hs(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const I0=zB;zB.range;var Vse=hs(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*Gu)},function(i,e){return(e-i)/Gu},function(i){return i.getUTCMinutes()});const sUe=Vse;Vse.range;var Wse=hs(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*fw)},function(i,e){return(e-i)/fw},function(i){return i.getUTCHours()});const rUe=Wse;Wse.range;var zse=hs(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/VB},function(i){return i.getUTCDate()-1});const xv=zse;zse.range;function Hg(i){return hs(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Nse})}var HB=Hg(0),Vk=Hg(1),oUe=Hg(2),aUe=Hg(3),T0=Hg(4),lUe=Hg(5),hUe=Hg(6);HB.range;Vk.range;oUe.range;aUe.range;T0.range;lUe.range;hUe.range;var Hse=hs(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const R$=Hse;Hse.range;var UB=hs(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});UB.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:hs(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const N0=UB;UB.range;const gw="year",pw="quarter",mw="month",_w="week",bw="date",aE="day",$B="dayofyear",vw="hours",ww="minutes",yw="seconds",lE="milliseconds",cUe=[gw,pw,mw,_w,bw,aE,$B,vw,ww,yw,lE];cUe.reduce((i,e,t)=>(i[e]=1+t,i),{});const uUe={[gw]:I0,[pw]:M$.every(3),[mw]:M$,[_w]:WB,[bw]:Sv,[aE]:Sv,[$B]:Sv,[vw]:JHe,[ww]:XHe,[yw]:Rse,[lE]:Tse},dUe={[gw]:N0,[pw]:R$.every(3),[mw]:R$,[_w]:HB,[bw]:xv,[aE]:xv,[$B]:xv,[vw]:rUe,[ww]:sUe,[yw]:Rse,[lE]:Tse};function fUe(i){return uUe[i]}function gUe(i){return dUe[i]}function UT(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function $T(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function X_(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function Use(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,h=J_(s),c=eb(s),u=J_(r),d=eb(r),f=J_(o),g=eb(o),p=J_(a),m=eb(a),b=J_(l),_=eb(l),w={a:ye,A:Ee,b:we,B:Dt,c:null,d:W$,e:W$,f:FUe,g:GUe,G:ZUe,H:RUe,I:OUe,j:PUe,L:$se,m:BUe,M:VUe,p:$e,q:Qe,Q:U$,s:$$,S:WUe,u:zUe,U:HUe,V:UUe,w:$Ue,W:jUe,x:null,X:null,y:qUe,Y:KUe,Z:YUe,"%":H$},y={a:pt,A:lt,b:mi,B:te,c:null,d:z$,e:z$,f:e$e,g:c$e,G:d$e,H:QUe,I:XUe,j:JUe,L:qse,m:t$e,M:i$e,p:se,q:me,Q:U$,s:$$,S:n$e,u:s$e,U:r$e,V:o$e,w:a$e,W:l$e,x:null,X:null,y:h$e,Y:u$e,Z:f$e,"%":H$},x={a:T,A:M,b:j,B:$,c:ie,d:B$,e:B$,f:IUe,g:F$,G:P$,H:V$,I:V$,j:kUe,L:AUe,m:DUe,M:LUe,p:D,q:xUe,Q:NUe,s:MUe,S:EUe,u:vUe,U:wUe,V:yUe,w:bUe,W:CUe,x:pe,X:be,y:F$,Y:P$,Z:SUe,"%":TUe};w.x=L(t,w),w.X=L(n,w),w.c=L(e,w),y.x=L(t,y),y.X=L(n,y),y.c=L(e,y);function L(G,fe){return function(R){var E=[],he=-1,ce=0,je=G.length,Me,Je,on;for(R instanceof Date||(R=new Date(+R));++he<je;)G.charCodeAt(he)===37&&(E.push(G.slice(ce,he)),(Je=O$[Me=G.charAt(++he)])!=null?Me=G.charAt(++he):Je=Me==="e"?" ":"0",(on=fe[Me])&&(Me=on(R,Je)),E.push(Me),ce=he+1);return E.push(G.slice(ce,he)),E.join("")}}function S(G,fe){return function(R){var E=X_(1900,void 0,1),he=k(E,G,R+="",0),ce,je;if(he!=R.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(fe&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(ce=$T(X_(E.y,0,1)),je=ce.getUTCDay(),ce=je>4||je===0?Vk.ceil(ce):Vk(ce),ce=xv.offset(ce,(E.V-1)*7),E.y=ce.getUTCFullYear(),E.m=ce.getUTCMonth(),E.d=ce.getUTCDate()+(E.w+6)%7):(ce=UT(X_(E.y,0,1)),je=ce.getDay(),ce=je>4||je===0?Bk.ceil(ce):Bk(ce),ce=Sv.offset(ce,(E.V-1)*7),E.y=ce.getFullYear(),E.m=ce.getMonth(),E.d=ce.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),je="Z"in E?$T(X_(E.y,0,1)).getUTCDay():UT(X_(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(je+5)%7:E.w+E.U*7-(je+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,$T(E)):UT(E)}}function k(G,fe,R,E){for(var he=0,ce=fe.length,je=R.length,Me,Je;he<ce;){if(E>=je)return-1;if(Me=fe.charCodeAt(he++),Me===37){if(Me=fe.charAt(he++),Je=x[Me in O$?fe.charAt(he++):Me],!Je||(E=Je(G,R,E))<0)return-1}else if(Me!=R.charCodeAt(E++))return-1}return E}function D(G,fe,R){var E=h.exec(fe.slice(R));return E?(G.p=c.get(E[0].toLowerCase()),R+E[0].length):-1}function T(G,fe,R){var E=f.exec(fe.slice(R));return E?(G.w=g.get(E[0].toLowerCase()),R+E[0].length):-1}function M(G,fe,R){var E=u.exec(fe.slice(R));return E?(G.w=d.get(E[0].toLowerCase()),R+E[0].length):-1}function j(G,fe,R){var E=b.exec(fe.slice(R));return E?(G.m=_.get(E[0].toLowerCase()),R+E[0].length):-1}function $(G,fe,R){var E=p.exec(fe.slice(R));return E?(G.m=m.get(E[0].toLowerCase()),R+E[0].length):-1}function ie(G,fe,R){return k(G,e,fe,R)}function pe(G,fe,R){return k(G,t,fe,R)}function be(G,fe,R){return k(G,n,fe,R)}function ye(G){return o[G.getDay()]}function Ee(G){return r[G.getDay()]}function we(G){return l[G.getMonth()]}function Dt(G){return a[G.getMonth()]}function $e(G){return s[+(G.getHours()>=12)]}function Qe(G){return 1+~~(G.getMonth()/3)}function pt(G){return o[G.getUTCDay()]}function lt(G){return r[G.getUTCDay()]}function mi(G){return l[G.getUTCMonth()]}function te(G){return a[G.getUTCMonth()]}function se(G){return s[+(G.getUTCHours()>=12)]}function me(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var fe=L(G+="",w);return fe.toString=function(){return G},fe},parse:function(G){var fe=S(G+="",!1);return fe.toString=function(){return G},fe},utcFormat:function(G){var fe=L(G+="",y);return fe.toString=function(){return G},fe},utcParse:function(G){var fe=S(G+="",!0);return fe.toString=function(){return G},fe}}}var O$={"-":"",_:" ",0:"0"},cs=/^\s*\d+/,pUe=/^%/,mUe=/[\\^$*+?|[\]().{}]/g;function si(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function _Ue(i){return i.replace(mUe,"\\$&")}function J_(i){return new RegExp("^(?:"+i.map(_Ue).join("|")+")","i")}function eb(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function bUe(i,e,t){var n=cs.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function vUe(i,e,t){var n=cs.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function wUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function yUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function CUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function P$(i,e,t){var n=cs.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function F$(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function SUe(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function xUe(i,e,t){var n=cs.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function DUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function B$(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function kUe(i,e,t){var n=cs.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function V$(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function LUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function EUe(i,e,t){var n=cs.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function AUe(i,e,t){var n=cs.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function IUe(i,e,t){var n=cs.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function TUe(i,e,t){var n=pUe.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function NUe(i,e,t){var n=cs.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function MUe(i,e,t){var n=cs.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function W$(i,e){return si(i.getDate(),e,2)}function RUe(i,e){return si(i.getHours(),e,2)}function OUe(i,e){return si(i.getHours()%12||12,e,2)}function PUe(i,e){return si(1+Sv.count(I0(i),i),e,3)}function $se(i,e){return si(i.getMilliseconds(),e,3)}function FUe(i,e){return $se(i,e)+"000"}function BUe(i,e){return si(i.getMonth()+1,e,2)}function VUe(i,e){return si(i.getMinutes(),e,2)}function WUe(i,e){return si(i.getSeconds(),e,2)}function zUe(i){var e=i.getDay();return e===0?7:e}function HUe(i,e){return si(WB.count(I0(i)-1,i),e,2)}function jse(i){var e=i.getDay();return e>=4||e===0?A0(i):A0.ceil(i)}function UUe(i,e){return i=jse(i),si(A0.count(I0(i),i)+(I0(i).getDay()===4),e,2)}function $Ue(i){return i.getDay()}function jUe(i,e){return si(Bk.count(I0(i)-1,i),e,2)}function qUe(i,e){return si(i.getFullYear()%100,e,2)}function GUe(i,e){return i=jse(i),si(i.getFullYear()%100,e,2)}function KUe(i,e){return si(i.getFullYear()%1e4,e,4)}function ZUe(i,e){var t=i.getDay();return i=t>=4||t===0?A0(i):A0.ceil(i),si(i.getFullYear()%1e4,e,4)}function YUe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+si(e/60|0,"0",2)+si(e%60,"0",2)}function z$(i,e){return si(i.getUTCDate(),e,2)}function QUe(i,e){return si(i.getUTCHours(),e,2)}function XUe(i,e){return si(i.getUTCHours()%12||12,e,2)}function JUe(i,e){return si(1+xv.count(N0(i),i),e,3)}function qse(i,e){return si(i.getUTCMilliseconds(),e,3)}function e$e(i,e){return qse(i,e)+"000"}function t$e(i,e){return si(i.getUTCMonth()+1,e,2)}function i$e(i,e){return si(i.getUTCMinutes(),e,2)}function n$e(i,e){return si(i.getUTCSeconds(),e,2)}function s$e(i){var e=i.getUTCDay();return e===0?7:e}function r$e(i,e){return si(HB.count(N0(i)-1,i),e,2)}function Gse(i){var e=i.getUTCDay();return e>=4||e===0?T0(i):T0.ceil(i)}function o$e(i,e){return i=Gse(i),si(T0.count(N0(i),i)+(N0(i).getUTCDay()===4),e,2)}function a$e(i){return i.getUTCDay()}function l$e(i,e){return si(Vk.count(N0(i)-1,i),e,2)}function h$e(i,e){return si(i.getUTCFullYear()%100,e,2)}function c$e(i,e){return i=Gse(i),si(i.getUTCFullYear()%100,e,2)}function u$e(i,e){return si(i.getUTCFullYear()%1e4,e,4)}function d$e(i,e){var t=i.getUTCDay();return i=t>=4||t===0?T0(i):T0.ceil(i),si(i.getUTCFullYear()%1e4,e,4)}function f$e(){return"+0000"}function H$(){return"%"}function U$(i){return+i}function $$(i){return Math.floor(+i/1e3)}var vp,Kse,Zse,Yse,Qse;g$e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g$e(i){return vp=Use(i),Kse=vp.format,Zse=vp.parse,Yse=vp.utcFormat,Qse=vp.utcParse,vp}function xb(i){const e={};return t=>e[t]||(e[t]=i(t))}function p$e(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=m$e(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function m$e(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function _$e(i){const e=xb(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=uw(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return p$e(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=uw(o??",f");const a=WHe(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let h;if(o.precision==null)switch(o.type){case"s":return isNaN(h=YHe(a,l))||(o.precision=h),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(h=QHe(a,l))||(o.precision=h-(o.type==="e"));break}case"f":case"%":{isNaN(h=ZHe(a))||(o.precision=h-(o.type==="%")*2);break}}return e(o)}}}b$e();function b$e(){return _$e({format:Ase,formatPrefix:Ise})}function j$(i,e,t){t=t||{},FB(t)||xf("Invalid time multi-format specifier: ".concat(t));const n=e(yw),s=e(ww),r=e(vw),o=e(bw),a=e(_w),l=e(mw),h=e(pw),c=e(gw),u=i(t[lE]||".%L"),d=i(t[yw]||":%S"),f=i(t[ww]||"%I:%M"),g=i(t[vw]||"%I %p"),p=i(t[bw]||t[aE]||"%a %d"),m=i(t[_w]||"%b %d"),b=i(t[mw]||"%B"),_=i(t[pw]||"%B"),w=i(t[gw]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:c(y)<y?h(y)<y?b:_:w)(y)}function Xse(i){const e=xb(i.format),t=xb(i.utcFormat);return{timeFormat:n=>oO(n)?e(n):j$(e,fUe,n),utcFormat:n=>oO(n)?t(n):j$(t,gUe,n),timeParse:xb(i.parse),utcParse:xb(i.utcParse)}}let aO;v$e();function v$e(){return aO=Xse({format:Kse,parse:Zse,utcFormat:Yse,utcParse:Qse})}function w$e(i){return Xse(Use(i))}function y$e(i){return arguments.length?aO=w$e(i):aO}const C$e=i=>i!=null&&i===i,S$e=i=>i==="true"||i==="false"||i===!0||i===!1,x$e=i=>!Number.isNaN(Date.parse(i)),Jse=i=>!Number.isNaN(+i)&&!(i instanceof Date),D$e=i=>Jse(i)&&Number.isInteger(+i),q$={boolean:yHe,integer:x$,number:x$,date:SHe,string:xHe,unknown:yse},nS=[S$e,D$e,Jse,x$e],k$e=["boolean","integer","number","date"];function L$e(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=nS.length,s=nS.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&C$e(l)&&!nS[a](l)&&(s[a]=0,++o,o===nS.length))return"string";return k$e[s.reduce((r,o)=>r===0?o:r,0)-1]}function E$e(i,e){return e.reduce((t,n)=>(t[n]=L$e(i,n),t),{})}function G$(i){const e=function(t,n){const s={delimiter:i};return jB(t,n?mHe(n,s):s)};return e.responseType="text",e}function jB(i,e){return e.header&&(i=e.header.map(Dse).join(e.delimiter)+`
`+i),EHe(e.delimiter).parse(i+"")}jB.responseType="text";function A$e(i){return typeof Buffer=="function"&&Sse(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function qB(i,e){const t=e&&e.property?wse(e.property):yse;return FB(i)&&!A$e(i)?I$e(t(i),e):t(JSON.parse(i))}qB.responseType="json";function I$e(i,e){return!Cse(i)&&vHe(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const T$e={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function ere(i,e){let t,n,s,r;return i=qB(i,e),e&&e.feature?(t=NHe,s=e.feature):e&&e.mesh?(t=RHe,s=e.mesh,r=T$e[e.filter]):xf("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):xf("Invalid TopoJSON object: "+s),n&&n.features||[n]}ere.responseType="json";const jT={dsv:jB,csv:G$(","),tsv:G$("	"),json:qB,topojson:ere};function N$e(i,e){return arguments.length>1?(jT[i]=e,this):xse(jT,i)?jT[i]:null}function M$e(i,e,t,n){e=e||{};const s=N$e(e.type||"json");return s||xf("Unknown data format type: "+e.type),i=s(i,e),e.parse&&R$e(i,e.parse,t,n),xse(i,"columns")&&delete i.columns,i}function R$e(i,e,t,n){if(!i.length)return;const s=y$e();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,h,c,u;e==="auto"&&(e=E$e(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!q$[g])throw Error("Illegal format pattern: "+f+":"+g);return q$[g]});for(l=0,c=i.length,u=r.length;l<c;++l)for(o=i[l],h=0;h<u;++h)a=r[h],o[a]=d[h](o[a])}var Wh;class tre extends Zp{constructor(){super();XB(this,Wh,void 0);v_(this,"files");this.missingFiles=new Set}createRenderRoot(){return this}render(){return er`
            <ul class="tabs">
                ${Object.keys(this.files).map(t=>er`
                            <li
                                data-name=${t}
                                class=${t==w_(this,Wh)?"selected":""}
                            >
                                <a
                                    href="#"
                                    @click=${n=>this._changeTab(n)}
                                    >${t}</a
                                >
                            </li>
                        `)}
                <li class=${w_(this,Wh)===void 0?"selected":""}>
                    <a
                        href="#"
                        @click=${t=>this._changeTab(t)}
                        >Add new files</a
                    >
                </li>
                <li style="flex-grow: 1"></li>
            </ul>

            <div class="tab-pages">
                ${Object.keys(this.files).map(t=>er`
                        <div
                            class=${t==w_(this,Wh)?"selected":""}
                        >
                            ${P$e(this.files[t].data)}
                        </div>
                    `)}

                <div class=${w_(this,Wh)===void 0?"selected":""}>
                    ${this.missingFiles.size?er`<div class="missing-files">
                              <p>Please add the following files:</p>
                              <ul>
                                  ${uHe(this.missingFiles,t=>er`<li>${t}</li>`)}
                              </ul>
                          </div>`:_n}
                    ${O$e(t=>this._handleFiles(t))}
                </div>
            </div>
        `}async _handleFiles(t){const s=t.target.files;for(const r of s){const o=await F$e(r),a=M$e(o,{type:B$e(o,r.name),parse:"auto"});this.files[r.name]={metadata:r,data:a},hE(this,Wh,r.name)}this.requestUpdate(),this.dispatchEvent(new CustomEvent("upload",{detail:{}}))}_changeTab(t){const s=t.target.parentElement.dataset.name;hE(this,Wh,s),t.preventDefault(),this.requestUpdate()}}Wh=new WeakMap,v_(tre,"properties",{missingFiles:{type:Set,attribute:!1}});customElements.define("file-pane",tre);function O$e(i){return er` <form class="upload-form">
        <input
            type="file"
            multiple
            accept=".csv,.tsv,.txt,.json"
            id="fileInput"
            @change=${i}
            style="display:none"
        />
        <div id="upload-button-wrapper">
            <button
                class="btn"
                @click=${e=>{document.getElementById("fileInput").click(),e.preventDefault(),e.stopPropagation()}}
            >
                Choose files
            </button>
        </div>

        <p>
            The added file becomes a named datasource, which can be accessed as
            follows:
        </p>

        <pre>
"data": {
    "name": "filename.csv"
}
</pre
        >

        <p>
            N.B. All data processing takes place in your web browser. Nothing is
            uploaded anywhere.
        </p>
    </form>`}function P$e(i){const e=Object.keys(i[0]),t=i.slice(0,30),n=e.map(a=>"text-align: "+(typeof i[0][a]=="number"?"right":"left")),s=a=>er`
        <tr>
            ${e.map((l,h)=>er`<td style=${n[h]}>${a[l]}</td> `)}
        </tr>
    `,r=()=>er`
        <tr>
            ${e.map((a,l)=>er`<td style=${n[l]}>...</td> `)}
        </tr>
    `;return er`
        <table class="data-sample-table">
            <thead>
                ${(()=>er`
        <tr>
            ${e.map((a,l)=>er`<th style=${n[l]}>${a}</th> `)}
        </tr>
    `)()}
            </thead>
            <tbody>
                ${t.map(s)}
                ${t.length<i.length?r():""}
            </tbody>
        </table>
    `}function F$e(i){return new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(i)})}function B$e(i,e){return/\.json$/.test(e)?"json":i.indexOf("	")>=0?"tsv":"csv"}function ire(i){if(typeof i=="object"&&i!==null){i.description&&(i.markdownDescription=i.description);for(const e in i)i.hasOwnProperty(e)&&(i[e]=ire(i[e]))}return i}function V$e(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}H$e();const nre="playgroundSpec",sre=ij(),GB=ij(),rre={};let KB=new Set,qT,K$="";const dx=["stacked","parallel","full"];let lO=dx[0],fx,ore="";async function W$e(){const e=new URLSearchParams(window.location.search).get("spec");if(e){const s=await fetch(e);return fx=e.match(/.*\//)[0],s.text()}const t=window.localStorage.getItem(nre),n=(t==null?void 0:t.length)>0?t:MDe;return console.log("Jeejee",n),n}function z$e(){lO=dx[(dx.indexOf(lO)+1)%dx.length],ZB(),window.dispatchEvent(new Event("resize"))}function H$e(){ire(dU),H2.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://unpkg.com/@genome-spy/core/dist/schema.json",fileMatch:["*"],schema:dU}]})}function U$e(i){let e=rre[i];return e||KB.add(i),e==null?void 0:e.data}async function are(i=!1){var t,n;KB=new Set,fx&&window.location.search&&window.history.replaceState(null,"",window.location.pathname);const e=(t=GB.value)==null?void 0:t.value;e&&window.localStorage.setItem(nre,e);try{const s=JSON.parse(e),r=JSON.stringify(s);if(r===K$&&!i)return;K$=r,qT&&qT.finalize(),fx&&!s.baseUrl&&(s.baseUrl=fx),ore=(n=V$e(s.description))==null?void 0:n[0],qT=await ADe(sre.value,s,{namedDataProvider:U$e}),ZB()}catch(s){console.log(s)}}const $$e=()=>er`
    <div class="toolbar">
        <a
            href="https://genomespy.app/"
            target="_blank"
            class="genome-spy-icon"
        >
            <img title="GenomeSpy" alt="GenomeSpy" src="${EDe}" />
        </a>
        <span class="title">
            <span>GenomeSpy Playground</span>
        </span>
        <button @click=${z$e} class="tool-button hide-mobile">
            ${P6(bae).node[0]}
            <span>Toggle layout</span>
        </button>
        <span class="vis-title">
            <span class="hide-mobile">${ore}</span>
        </span>
        <a
            class="version tool-button"
            href="https://github.com/genome-spy/genome-spy/releases/tag/v${fU.version}"
            >v${fU.version}</a
        >
        <a
            href="https://genomespy.app/docs/"
            target="_blank"
            class="tool-button hide-mobile"
            >${P6(mae).node[0]} <span>Docs</span></a
        >
    </div>
`,j$e=NDe(()=>are(),500,!1),q$e=()=>er`
    <section id="playground-layout" class="${lO}">
        ${$$e()}
        <section id="editor-pane">
            <code-editor
                ${u6(GB)}
                @change=${j$e}
            ></code-editor>
        </section>
        <section id="genome-spy-pane">
            <div ${u6(sre)}></div>
        </section>
        <section id="file-pane">
            <file-pane
                @upload=${are}
                .files=${rre}
                .missingFiles=${KB}
            ></file-pane>
        </section>
    </section>
`;function ZB(){ej(q$e(),document.body)}ZB();W$e().then(i=>{GB.value.value=i});export{Kje as M,Gje as R,y6e as e,H2 as l};
