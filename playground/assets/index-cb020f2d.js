var Uie=Object.defineProperty;var $ie=(i,e,t)=>e in i?Uie(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Q0=(i,e,t)=>($ie(i,typeof e!="symbol"?e+"":e,t),t),UF=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var X0=(i,e,t)=>(UF(i,e,"read from private field"),t?t.call(i):e.get(i)),$F=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},A2=(i,e,t,n)=>(UF(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const IC=window,lR=IC.ShadowRoot&&(IC.ShadyCSS===void 0||IC.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,hU=Symbol(),jF=new WeakMap;let jie=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==hU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(lR&&e===void 0){const n=t!==void 0&&t.length===1;n&&(e=jF.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&jF.set(t,e))}return e}toString(){return this.cssText}};const qie=i=>new jie(typeof i=="string"?i:i+"",void 0,hU),Gie=(i,e)=>{lR?i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const n=document.createElement("style"),s=IC.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=t.cssText,i.appendChild(n)})},qF=lR?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return qie(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var E2;const FS=window,GF=FS.trustedTypes,Kie=GF?GF.emptyScript:"",KF=FS.reactiveElementPolyfillSupport,QI={toAttribute(i,e){switch(e){case Boolean:i=i?Kie:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},uU=(i,e)=>e!==i&&(e==e||i==i),I2={attribute:!0,type:String,converter:QI,reflect:!1,hasChanged:uU};let sp=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;(t=this.h)!==null&&t!==void 0||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,n)=>{const s=this._$Ep(n,t);s!==void 0&&(this._$Ev.set(s,n),e.push(s))}),e}static createProperty(e,t=I2){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,s=this.getPropertyDescriptor(e,n,t);s!==void 0&&Object.defineProperty(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(s){const r=this[e];this[t]=s,this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||I2}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of n)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)t.unshift(qF(s))}else e!==void 0&&t.push(qF(e));return t}static _$Ep(e,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,n;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Gie(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostConnected)===null||n===void 0?void 0:n.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)})}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=I2){var s;const r=this.constructor._$Ep(e,n);if(r!==void 0&&n.reflect===!0){const o=(((s=n.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?n.converter:QI).toAttribute(t,n.type);this._$El=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var n;const s=this.constructor,r=s._$Ev.get(e);if(r!==void 0&&this._$El!==r){const o=s.getPropertyOptions(r),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:QI;this._$El=r,this[r]=a.fromAttribute(t,o.type),this._$El=null}}requestUpdate(e,t,n){let s=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||uU)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,r)=>this[r]=s),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(s=>{var r;return(r=s.hostUpdate)===null||r===void 0?void 0:r.call(s)}),this.update(n)):this._$Ek()}catch(s){throw t=!1,this._$Ek(),s}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var s;return(s=n.hostUpdated)===null||s===void 0?void 0:s.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,n)=>this._$EO(n,this[n],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};sp.finalized=!0,sp.elementProperties=new Map,sp.elementStyles=[],sp.shadowRootOptions={mode:"open"},KF==null||KF({ReactiveElement:sp}),((E2=FS.reactiveElementVersions)!==null&&E2!==void 0?E2:FS.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var T2;const BS=window,cm=BS.trustedTypes,ZF=cm?cm.createPolicy("lit-html",{createHTML:i=>i}):void 0,Eh=`lit$${(Math.random()+"").slice(9)}$`,dU="?"+Eh,Zie=`<${dU}>`,hm=document,tv=(i="")=>hm.createComment(i),iv=i=>i===null||typeof i!="object"&&typeof i!="function",fU=Array.isArray,Yie=i=>fU(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",J0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,YF=/-->/g,QF=/>/g,Qu=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),XF=/'/g,JF=/"/g,gU=/^(?:script|style|textarea|title)$/i,Qie=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),js=Qie(1),um=Symbol.for("lit-noChange"),hn=Symbol.for("lit-nothing"),eB=new WeakMap,Tp=hm.createTreeWalker(hm,129,null,!1),Xie=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=J0;for(let l=0;l<t;l++){const c=i[l];let h,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===J0?u[1]==="!--"?o=YF:u[1]!==void 0?o=QF:u[2]!==void 0?(gU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Qu):u[3]!==void 0&&(o=Qu):o===Qu?u[0]===">"?(o=s??J0,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?Qu:u[3]==='"'?JF:XF):o===JF||o===XF?o=Qu:o===YF||o===QF?o=J0:(o=Qu,s=void 0);const g=o===Qu&&i[l+1].startsWith("/>")?" ":"";r+=o===J0?c+Zie:d>=0?(n.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+Eh+g):c+Eh+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[ZF!==void 0?ZF.createHTML(a):a,n]};class nv{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,h]=Xie(e,t);if(this.el=nv.createElement(c,n),Tp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=Tp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(Eh)){const f=h[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(Eh),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?ene:p[1]==="?"?ine:p[1]==="@"?nne:ok})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(gU.test(s.tagName)){const u=s.textContent.split(Eh),d=u.length-1;if(d>0){s.textContent=cm?cm.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],tv()),Tp.nextNode(),l.push({type:2,index:++r});s.append(u[d],tv())}}}else if(s.nodeType===8)if(s.data===dU)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(Eh,u+1))!==-1;)l.push({type:7,index:r}),u+=Eh.length-1}r++}}static createElement(e,t){const n=hm.createElement("template");return n.innerHTML=e,n}}function dm(i,e,t=i,n){var s,r,o,a;if(e===um)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const c=iv(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=dm(i,l._$AS(i,e.values),l,n)),e}let Jie=class{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:hm).importNode(n,!0);Tp.currentNode=r;let o=Tp.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new Q1(o,o.nextSibling,this,e):c.type===1?h=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(h=new sne(o,this,e)),this.u.push(h),c=s[++l]}a!==(c==null?void 0:c.index)&&(o=Tp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class Q1{constructor(e,t,n,s){var r;this.type=2,this._$AH=hn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=dm(this,e,t),iv(e)?e===hn||e==null||e===""?(this._$AH!==hn&&this._$AR(),this._$AH=hn):e!==this._$AH&&e!==um&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Yie(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==hn&&iv(this._$AH)?this._$AA.nextSibling.data=e:this.T(hm.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=nv.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new Jie(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=eB.get(e.strings);return t===void 0&&eB.set(e.strings,t=new nv(e)),t}k(e){fU(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new Q1(this.O(tv()),this.O(tv()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class ok{constructor(e,t,n,s,r){this.type=1,this._$AH=hn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=hn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=dm(this,e,t,0),o=!iv(e)||e!==this._$AH&&e!==um,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=dm(this,a[n+l],t,l),c===um&&(c=this._$AH[l]),o||(o=!iv(c)||c!==this._$AH[l]),c===hn?e=hn:e!==hn&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===hn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ene extends ok{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===hn?void 0:e}}const tne=cm?cm.emptyScript:"";class ine extends ok{constructor(){super(...arguments),this.type=4}j(e){e&&e!==hn?this.element.setAttribute(this.name,tne):this.element.removeAttribute(this.name)}}class nne extends ok{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=dm(this,e,t,0))!==null&&n!==void 0?n:hn)===um)return;const s=this._$AH,r=e===hn&&s!==hn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==hn&&(s===hn||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class sne{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){dm(this,e)}}const tB=BS.litHtmlPolyfillSupport;tB==null||tB(nv,Q1),((T2=BS.litHtmlVersions)!==null&&T2!==void 0?T2:BS.litHtmlVersions=[]).push("2.4.0");const pU=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new Q1(e.insertBefore(tv(),a),a,void 0,t??{})}return o._$AI(i),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var N2,M2;let Np=class extends sp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=pU(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return um}};Np.finalized=!0,Np._$litElement$=!0,(N2=globalThis.litElementHydrateSupport)===null||N2===void 0||N2.call(globalThis,{LitElement:Np});const iB=globalThis.litElementPolyfillSupport;iB==null||iB({LitElement:Np});((M2=globalThis.litElementVersions)!==null&&M2!==void 0?M2:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rne=i=>i.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const one={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ane=i=>(...e)=>({_$litDirective$:i,values:e});class lne{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ib=(i,e)=>{var t,n;const s=i._$AN;if(s===void 0)return!1;for(const r of s)(n=(t=r)._$AO)===null||n===void 0||n.call(t,e,!1),ib(r,e);return!0},VS=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},mU=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),une(e)}};function cne(i){this._$AN!==void 0?(VS(this),this._$AM=i,mU(this)):this._$AM=i}function hne(i,e=!1,t=0){const n=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(n))for(let r=t;r<n.length;r++)ib(n[r],!1),VS(n[r]);else n!=null&&(ib(n,!1),VS(n));else ib(this,i)}const une=i=>{var e,t,n,s;i.type==one.CHILD&&((e=(n=i)._$AP)!==null&&e!==void 0||(n._$AP=hne),(t=(s=i)._$AQ)!==null&&t!==void 0||(s._$AQ=cne))};class dne extends lne{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),mU(this),this.isConnected=e._$AU}_$AO(e,t=!0){var n,s;e!==this.isConnected&&(this.isConnected=e,e?(n=this.reconnected)===null||n===void 0||n.call(this):(s=this.disconnected)===null||s===void 0||s.call(this)),t&&(ib(this,e),VS(this))}setValue(e){if(rne(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _U=()=>new fne;let fne=class{};const R2=new WeakMap,nB=ane(class extends dne{render(i){return hn}update(i,[e]){var t;const n=e!==this.Y;return n&&this.Y!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=e,this.dt=(t=i.options)===null||t===void 0?void 0:t.host,this.rt(this.ct=i.element)),hn}rt(i){var e;if(typeof this.Y=="function"){const t=(e=this.dt)!==null&&e!==void 0?e:globalThis;let n=R2.get(t);n===void 0&&(n=new WeakMap,R2.set(t,n)),n.get(this.Y)!==void 0&&this.Y.call(this.dt,void 0),n.set(this.Y,i),i!==void 0&&this.Y.call(this.dt,i)}else this.Y.value=i}get lt(){var i,e,t;return typeof this.Y=="function"?(e=R2.get((i=this.dt)!==null&&i!==void 0?i:globalThis))===null||e===void 0?void 0:e.get(this.Y):(t=this.Y)===null||t===void 0?void 0:t.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function sB(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Oe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(t),!0).forEach(function(n){mne(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):sB(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function WS(i){return WS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WS(i)}function gne(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function rB(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function pne(i,e,t){return e&&rB(i.prototype,e),t&&rB(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function mne(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function cR(i,e){return bne(i)||wne(i,e)||bU(i,e)||Cne()}function ak(i){return _ne(i)||vne(i)||bU(i)||yne()}function _ne(i){if(Array.isArray(i))return XI(i)}function bne(i){if(Array.isArray(i))return i}function vne(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function wne(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],s=!0,r=!1,o,a;try{for(t=t.call(i);!(s=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return n}}function bU(i,e){if(i){if(typeof i=="string")return XI(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return XI(i,e)}}function XI(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function yne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oB=function(){},hR={},vU={},wU=null,yU={mark:oB,measure:oB};try{typeof window<"u"&&(hR=window),typeof document<"u"&&(vU=document),typeof MutationObserver<"u"&&(wU=MutationObserver),typeof performance<"u"&&(yU=performance)}catch{}var Sne=hR.navigator||{},aB=Sne.userAgent,lB=aB===void 0?"":aB,lu=hR,Fi=vU,cB=wU,ny=yU;lu.document;var Qc=!!Fi.documentElement&&!!Fi.head&&typeof Fi.addEventListener=="function"&&typeof Fi.createElement=="function",CU=~lB.indexOf("MSIE")||~lB.indexOf("Trident/"),zc="___FONT_AWESOME___",JI=16,SU="fa",xU="svg-inline--fa",uf="data-fa-i2svg",eT="data-fa-pseudo-element",xne="data-fa-pseudo-element-pending",uR="data-prefix",dR="data-icon",hB="fontawesome-i2svg",Dne="async",kne=["HTML","HEAD","STYLE","SCRIPT"],DU=function(){try{return!0}catch{return!1}}(),fR={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},zS={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},kU={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Lne={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},Ane=/fa[srltdbk\-\ ]/,LU="fa-layers-text",Ene=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Ine={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},AU=[1,2,3,4,5,6,7,8,9,10],Tne=AU.concat([11,12,13,14,15,16,17,18,19,20]),Nne=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],kd={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Mne=[].concat(ak(Object.keys(zS)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",kd.GROUP,kd.SWAP_OPACITY,kd.PRIMARY,kd.SECONDARY]).concat(AU.map(function(i){return"".concat(i,"x")})).concat(Tne.map(function(i){return"w-".concat(i)})),EU=lu.FontAwesomeConfig||{};function Rne(i){var e=Fi.querySelector("script["+i+"]");if(e)return e.getAttribute(i)}function One(i){return i===""?!0:i==="false"?!1:i==="true"?!0:i}if(Fi&&typeof Fi.querySelector=="function"){var Pne=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Pne.forEach(function(i){var e=cR(i,2),t=e[0],n=e[1],s=One(Rne(t));s!=null&&(EU[n]=s)})}var Fne={familyPrefix:SU,styleDefault:"solid",replacementClass:xU,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nb=Oe(Oe({},Fne),EU);nb.autoReplaceSvg||(nb.observeMutations=!1);var Ye={};Object.keys(nb).forEach(function(i){Object.defineProperty(Ye,i,{enumerable:!0,set:function(t){nb[i]=t,TC.forEach(function(n){return n(Ye)})},get:function(){return nb[i]}})});lu.FontAwesomeConfig=Ye;var TC=[];function Bne(i){return TC.push(i),function(){TC.splice(TC.indexOf(i),1)}}var oh=JI,fl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Vne(i){if(!(!i||!Qc)){var e=Fi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=i;for(var t=Fi.head.childNodes,n=null,s=t.length-1;s>-1;s--){var r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(n=r)}return Fi.head.insertBefore(e,n),i}}var Wne="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function sv(){for(var i=12,e="";i-- >0;)e+=Wne[Math.random()*62|0];return e}function u0(i){for(var e=[],t=(i||[]).length>>>0;t--;)e[t]=i[t];return e}function gR(i){return i.classList?u0(i.classList):(i.getAttribute("class")||"").split(" ").filter(function(e){return e})}function IU(i){return"".concat(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function zne(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(IU(i[t]),'" ')},"").trim()}function lk(i){return Object.keys(i||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(i[t].trim(),";")},"")}function pR(i){return i.size!==fl.size||i.x!==fl.x||i.y!==fl.y||i.rotate!==fl.rotate||i.flipX||i.flipY}function Hne(i){var e=i.transform,t=i.containerWidth,n=i.iconWidth,s={transform:"translate(".concat(t/2," 256)")},r="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(o," ").concat(a)},c={transform:"translate(".concat(n/2*-1," -256)")};return{outer:s,inner:l,path:c}}function Une(i){var e=i.transform,t=i.width,n=t===void 0?JI:t,s=i.height,r=s===void 0?JI:s,o=i.startCentered,a=o===void 0?!1:o,l="";return a&&CU?l+="translate(".concat(e.x/oh-n/2,"em, ").concat(e.y/oh-r/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/oh,"em), calc(-50% + ").concat(e.y/oh,"em)) "):l+="translate(".concat(e.x/oh,"em, ").concat(e.y/oh,"em) "),l+="scale(".concat(e.size/oh*(e.flipX?-1:1),", ").concat(e.size/oh*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var $ne=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function TU(){var i=SU,e=xU,t=Ye.familyPrefix,n=Ye.replacementClass,s=$ne;if(t!==i||n!==e){var r=new RegExp("\\.".concat(i,"\\-"),"g"),o=new RegExp("\\--".concat(i,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(n))}return s}var uB=!1;function O2(){Ye.autoAddCss&&!uB&&(Vne(TU()),uB=!0)}var jne={mixout:function(){return{dom:{css:TU,insertCss:O2}}},hooks:function(){return{beforeDOMElementCreation:function(){O2()},beforeI2svg:function(){O2()}}}},Hc=lu||{};Hc[zc]||(Hc[zc]={});Hc[zc].styles||(Hc[zc].styles={});Hc[zc].hooks||(Hc[zc].hooks={});Hc[zc].shims||(Hc[zc].shims=[]);var sa=Hc[zc],NU=[],qne=function i(){Fi.removeEventListener("DOMContentLoaded",i),HS=1,NU.map(function(e){return e()})},HS=!1;Qc&&(HS=(Fi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Fi.readyState),HS||Fi.addEventListener("DOMContentLoaded",qne));function Gne(i){Qc&&(HS?setTimeout(i,0):NU.push(i))}function X1(i){var e=i.tag,t=i.attributes,n=t===void 0?{}:t,s=i.children,r=s===void 0?[]:s;return typeof i=="string"?IU(i):"<".concat(e," ").concat(zne(n),">").concat(r.map(X1).join(""),"</").concat(e,">")}function dB(i,e,t){if(i&&i[e]&&i[e][t])return{prefix:e,iconName:t,icon:i[e][t]}}var Kne=function(e,t){return function(n,s,r,o){return e.call(t,n,s,r,o)}},P2=function(e,t,n,s){var r=Object.keys(e),o=r.length,a=s!==void 0?Kne(t,s):t,l,c,h;for(n===void 0?(l=1,h=e[r[0]]):(l=0,h=n);l<o;l++)c=r[l],h=a(h,e[c],c,e);return h};function Zne(i){for(var e=[],t=0,n=i.length;t<n;){var s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){var r=i.charCodeAt(t++);(r&64512)==56320?e.push(((s&1023)<<10)+(r&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function tT(i){var e=Zne(i);return e.length===1?e[0].toString(16):null}function Yne(i,e){var t=i.length,n=i.charCodeAt(e),s;return n>=55296&&n<=56319&&t>e+1&&(s=i.charCodeAt(e+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function fB(i){return Object.keys(i).reduce(function(e,t){var n=i[t],s=!!n.icon;return s?e[n.iconName]=n.icon:e[t]=n,e},{})}function iT(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.skipHooks,s=n===void 0?!1:n,r=fB(e);typeof sa.hooks.addPack=="function"&&!s?sa.hooks.addPack(i,fB(e)):sa.styles[i]=Oe(Oe({},sa.styles[i]||{}),r),i==="fas"&&iT("fa",e)}var sb=sa.styles,Qne=sa.shims,Xne=Object.values(kU),mR=null,MU={},RU={},OU={},PU={},FU={},Jne=Object.keys(fR);function ese(i){return~Mne.indexOf(i)}function tse(i,e){var t=e.split("-"),n=t[0],s=t.slice(1).join("-");return n===i&&s!==""&&!ese(s)?s:null}var BU=function(){var e=function(r){return P2(sb,function(o,a,l){return o[l]=P2(a,r,{}),o},{})};MU=e(function(s,r,o){if(r[3]&&(s[r[3]]=o),r[2]){var a=r[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){s[l.toString(16)]=o})}return s}),RU=e(function(s,r,o){if(s[o]=o,r[2]){var a=r[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){s[l]=o})}return s}),FU=e(function(s,r,o){var a=r[2];return s[o]=o,a.forEach(function(l){s[l]=o}),s});var t="far"in sb||Ye.autoFetchSvg,n=P2(Qne,function(s,r){var o=r[0],a=r[1],l=r[2];return a==="far"&&!t&&(a="fas"),typeof o=="string"&&(s.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(s.unicodes[o.toString(16)]={prefix:a,iconName:l}),s},{names:{},unicodes:{}});OU=n.names,PU=n.unicodes,mR=ck(Ye.styleDefault)};Bne(function(i){mR=ck(i.styleDefault)});BU();function _R(i,e){return(MU[i]||{})[e]}function ise(i,e){return(RU[i]||{})[e]}function fp(i,e){return(FU[i]||{})[e]}function VU(i){return OU[i]||{prefix:null,iconName:null}}function nse(i){var e=PU[i],t=_R("fas",i);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function cu(){return mR}var bR=function(){return{prefix:null,iconName:null,rest:[]}};function ck(i){var e=fR[i],t=zS[i]||zS[e],n=i in sa.styles?i:null;return t||n||null}function hk(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.skipLookups,n=t===void 0?!1:t,s=null,r=i.reduce(function(o,a){var l=tse(Ye.familyPrefix,a);if(sb[a]?(a=Xne.includes(a)?Lne[a]:a,s=a,o.prefix=a):Jne.indexOf(a)>-1?(s=a,o.prefix=ck(a)):l?o.iconName=l:a!==Ye.replacementClass&&o.rest.push(a),!n&&o.prefix&&o.iconName){var c=s==="fa"?VU(o.iconName):{},h=fp(o.prefix,o.iconName);c.prefix&&(s=null),o.iconName=c.iconName||h||o.iconName,o.prefix=c.prefix||o.prefix,o.prefix==="far"&&!sb.far&&sb.fas&&!Ye.autoFetchSvg&&(o.prefix="fas")}return o},bR());return(r.prefix==="fa"||s==="fa")&&(r.prefix=cu()||"fas"),r}var sse=function(){function i(){gne(this,i),this.definitions={}}return pne(i,[{key:"add",value:function(){for(var t=this,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var o=s.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=Oe(Oe({},t.definitions[a]||{}),o[a]),iT(a,o[a]);var l=kU[a];l&&iT(l,o[a]),BU()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,n){var s=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(s).map(function(r){var o=s[r],a=o.prefix,l=o.iconName,c=o.icon,h=c[2];t[a]||(t[a]={}),h.length>0&&h.forEach(function(u){typeof u=="string"&&(t[a][u]=c)}),t[a][l]=c}),t}}]),i}(),gB=[],gp={},Mp={},rse=Object.keys(Mp);function ose(i,e){var t=e.mixoutsTo;return gB=i,gp={},Object.keys(Mp).forEach(function(n){rse.indexOf(n)===-1&&delete Mp[n]}),gB.forEach(function(n){var s=n.mixout?n.mixout():{};if(Object.keys(s).forEach(function(o){typeof s[o]=="function"&&(t[o]=s[o]),WS(s[o])==="object"&&Object.keys(s[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=s[o][a]})}),n.hooks){var r=n.hooks();Object.keys(r).forEach(function(o){gp[o]||(gp[o]=[]),gp[o].push(r[o])})}n.provides&&n.provides(Mp)}),t}function nT(i,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];var r=gp[i]||[];return r.forEach(function(o){e=o.apply(null,[e].concat(n))}),e}function df(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var s=gp[i]||[];s.forEach(function(r){r.apply(null,t)})}function Uc(){var i=arguments[0],e=Array.prototype.slice.call(arguments,1);return Mp[i]?Mp[i].apply(null,e):void 0}function sT(i){i.prefix==="fa"&&(i.prefix="fas");var e=i.iconName,t=i.prefix||cu();if(e)return e=fp(t,e)||e,dB(WU.definitions,t,e)||dB(sa.styles,t,e)}var WU=new sse,ase=function(){Ye.autoReplaceSvg=!1,Ye.observeMutations=!1,df("noAuto")},lse={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qc?(df("beforeI2svg",e),Uc("pseudoElements2svg",e),Uc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Ye.autoReplaceSvg===!1&&(Ye.autoReplaceSvg=!0),Ye.observeMutations=!0,Gne(function(){hse({autoReplaceSvgRoot:t}),df("watch",e)})}},cse={icon:function(e){if(e===null)return null;if(WS(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:fp(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=ck(e[0]);return{prefix:n,iconName:fp(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Ye.familyPrefix,"-"))>-1||e.match(Ane))){var s=hk(e.split(" "),{skipLookups:!0});return{prefix:s.prefix||cu(),iconName:fp(s.prefix,s.iconName)||s.iconName}}if(typeof e=="string"){var r=cu();return{prefix:r,iconName:fp(r,e)||e}}}},Yr={noAuto:ase,config:Ye,dom:lse,parse:cse,library:WU,findIconDefinition:sT,toHtml:X1},hse=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,n=t===void 0?Fi:t;(Object.keys(sa.styles).length>0||Ye.autoFetchSvg)&&Qc&&Ye.autoReplaceSvg&&Yr.dom.i2svg({node:n})};function uk(i,e){return Object.defineProperty(i,"abstract",{get:e}),Object.defineProperty(i,"html",{get:function(){return i.abstract.map(function(n){return X1(n)})}}),Object.defineProperty(i,"node",{get:function(){if(Qc){var n=Fi.createElement("div");return n.innerHTML=i.html,n.children}}}),i}function use(i){var e=i.children,t=i.main,n=i.mask,s=i.attributes,r=i.styles,o=i.transform;if(pR(o)&&t.found&&!n.found){var a=t.width,l=t.height,c={x:a/l/2,y:.5};s.style=lk(Oe(Oe({},r),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function dse(i){var e=i.prefix,t=i.iconName,n=i.children,s=i.attributes,r=i.symbol,o=r===!0?"".concat(e,"-").concat(Ye.familyPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Oe(Oe({},s),{},{id:o}),children:n}]}]}function vR(i){var e=i.icons,t=e.main,n=e.mask,s=i.prefix,r=i.iconName,o=i.transform,a=i.symbol,l=i.title,c=i.maskId,h=i.titleId,u=i.extra,d=i.watchable,f=d===void 0?!1:d,g=n.found?n:t,p=g.width,m=g.height,v=s==="fak",b=[Ye.replacementClass,r?"".concat(Ye.familyPrefix,"-").concat(r):""].filter(function(D){return u.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(u.classes).join(" "),w={children:[],attributes:Oe(Oe({},u.attributes),{},{"data-prefix":s,"data-icon":r,class:b,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(p," ").concat(m)})},y=v&&!~u.classes.indexOf("fa-fw")?{width:"".concat(p/m*16*.0625,"em")}:{};f&&(w.attributes[uf]=""),l&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(h||sv())},children:[l]}),delete w.attributes.title);var x=Oe(Oe({},w),{},{prefix:s,iconName:r,main:t,mask:n,maskId:c,transform:o,symbol:a,styles:Oe(Oe({},y),u.styles)}),L=n.found&&t.found?Uc("generateAbstractMask",x)||{children:[],attributes:{}}:Uc("generateAbstractIcon",x)||{children:[],attributes:{}},S=L.children,k=L.attributes;return x.children=S,x.attributes=k,a?dse(x):use(x)}function pB(i){var e=i.content,t=i.width,n=i.height,s=i.transform,r=i.title,o=i.extra,a=i.watchable,l=a===void 0?!1:a,c=Oe(Oe(Oe({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});l&&(c[uf]="");var h=Oe({},o.styles);pR(s)&&(h.transform=Une({transform:s,startCentered:!0,width:t,height:n}),h["-webkit-transform"]=h.transform);var u=lk(h);u.length>0&&(c.style=u);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function fse(i){var e=i.content,t=i.title,n=i.extra,s=Oe(Oe(Oe({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),r=lk(n.styles);r.length>0&&(s.style=r);var o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}var F2=sa.styles;function rT(i){var e=i[0],t=i[1],n=i.slice(4),s=cR(n,1),r=s[0],o=null;return Array.isArray(r)?o={tag:"g",attributes:{class:"".concat(Ye.familyPrefix,"-").concat(kd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ye.familyPrefix,"-").concat(kd.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ye.familyPrefix,"-").concat(kd.PRIMARY),fill:"currentColor",d:r[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:o}}var gse={found:!1,width:512,height:512};function pse(i,e){!DU&&!Ye.showMissingIcons&&i&&console.error('Icon with name "'.concat(i,'" and prefix "').concat(e,'" is missing.'))}function oT(i,e){var t=e;return e==="fa"&&Ye.styleDefault!==null&&(e=cu()),new Promise(function(n,s){if(Uc("missingIconAbstract"),t==="fa"){var r=VU(i)||{};i=r.iconName||i,e=r.prefix||e}if(i&&e&&F2[e]&&F2[e][i]){var o=F2[e][i];return n(rT(o))}pse(i,e),n(Oe(Oe({},gse),{},{icon:Ye.showMissingIcons&&i?Uc("missingIconAbstract")||{}:{}}))})}var mB=function(){},aT=Ye.measurePerformance&&ny&&ny.mark&&ny.measure?ny:{mark:mB,measure:mB},M_='FA "6.1.1"',mse=function(e){return aT.mark("".concat(M_," ").concat(e," begins")),function(){return zU(e)}},zU=function(e){aT.mark("".concat(M_," ").concat(e," ends")),aT.measure("".concat(M_," ").concat(e),"".concat(M_," ").concat(e," begins"),"".concat(M_," ").concat(e," ends"))},wR={begin:mse,end:zU},NC=function(){};function _B(i){var e=i.getAttribute?i.getAttribute(uf):null;return typeof e=="string"}function _se(i){var e=i.getAttribute?i.getAttribute(uR):null,t=i.getAttribute?i.getAttribute(dR):null;return e&&t}function bse(i){return i&&i.classList&&i.classList.contains&&i.classList.contains(Ye.replacementClass)}function vse(){if(Ye.autoReplaceSvg===!0)return MC.replace;var i=MC[Ye.autoReplaceSvg];return i||MC.replace}function wse(i){return Fi.createElementNS("http://www.w3.org/2000/svg",i)}function yse(i){return Fi.createElement(i)}function HU(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,n=t===void 0?i.tag==="svg"?wse:yse:t;if(typeof i=="string")return Fi.createTextNode(i);var s=n(i.tag);Object.keys(i.attributes||[]).forEach(function(o){s.setAttribute(o,i.attributes[o])});var r=i.children||[];return r.forEach(function(o){s.appendChild(HU(o,{ceFn:n}))}),s}function Cse(i){var e=" ".concat(i.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var MC={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(s){t.parentNode.insertBefore(HU(s),t)}),t.getAttribute(uf)===null&&Ye.keepOriginalSource){var n=Fi.createComment(Cse(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~gR(t).indexOf(Ye.replacementClass))return MC.replace(e);var s=new RegExp("".concat(Ye.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce(function(a,l){return l===Ye.replacementClass||l.match(s)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var o=n.map(function(a){return X1(a)}).join(`
`);t.setAttribute(uf,""),t.innerHTML=o}};function bB(i){i()}function UU(i,e){var t=typeof e=="function"?e:NC;if(i.length===0)t();else{var n=bB;Ye.mutateApproach===Dne&&(n=lu.requestAnimationFrame||bB),n(function(){var s=vse(),r=wR.begin("mutate");i.map(s),r(),t()})}}var yR=!1;function $U(){yR=!0}function lT(){yR=!1}var US=null;function vB(i){if(cB&&Ye.observeMutations){var e=i.treeCallback,t=e===void 0?NC:e,n=i.nodeCallback,s=n===void 0?NC:n,r=i.pseudoElementsCallback,o=r===void 0?NC:r,a=i.observeMutationsRoot,l=a===void 0?Fi:a;US=new cB(function(c){if(!yR){var h=cu();u0(c).forEach(function(u){if(u.type==="childList"&&u.addedNodes.length>0&&!_B(u.addedNodes[0])&&(Ye.searchPseudoElements&&o(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&Ye.searchPseudoElements&&o(u.target.parentNode),u.type==="attributes"&&_B(u.target)&&~Nne.indexOf(u.attributeName))if(u.attributeName==="class"&&_se(u.target)){var d=hk(gR(u.target)),f=d.prefix,g=d.iconName;u.target.setAttribute(uR,f||h),g&&u.target.setAttribute(dR,g)}else bse(u.target)&&s(u.target)})}}),Qc&&US.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Sse(){US&&US.disconnect()}function xse(i){var e=i.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(n,s){var r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(n[o]=a.join(":").trim()),n},{})),t}function Dse(i){var e=i.getAttribute("data-prefix"),t=i.getAttribute("data-icon"),n=i.innerText!==void 0?i.innerText.trim():"",s=hk(gR(i));return s.prefix||(s.prefix=cu()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||s.prefix&&n.length>0&&(s.iconName=ise(s.prefix,i.innerText)||_R(s.prefix,tT(i.innerText))),s}function kse(i){var e=u0(i.attributes).reduce(function(s,r){return s.name!=="class"&&s.name!=="style"&&(s[r.name]=r.value),s},{}),t=i.getAttribute("title"),n=i.getAttribute("data-fa-title-id");return Ye.autoA11y&&(t?e["aria-labelledby"]="".concat(Ye.replacementClass,"-title-").concat(n||sv()):(e["aria-hidden"]="true",e.focusable="false")),e}function Lse(){return{iconName:null,title:null,titleId:null,prefix:null,transform:fl,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function wB(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=Dse(i),n=t.iconName,s=t.prefix,r=t.rest,o=kse(i),a=nT("parseNodeAttributes",{},i),l=e.styleParser?xse(i):[];return Oe({iconName:n,title:i.getAttribute("title"),titleId:i.getAttribute("data-fa-title-id"),prefix:s,transform:fl,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:l,attributes:o}},a)}var Ase=sa.styles;function jU(i){var e=Ye.autoReplaceSvg==="nest"?wB(i,{styleParser:!1}):wB(i);return~e.extra.classes.indexOf(LU)?Uc("generateLayersText",i,e):Uc("generateSvgReplacementMutation",i,e)}function yB(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Qc)return Promise.resolve();var t=Fi.documentElement.classList,n=function(u){return t.add("".concat(hB,"-").concat(u))},s=function(u){return t.remove("".concat(hB,"-").concat(u))},r=Ye.autoFetchSvg?Object.keys(fR):Object.keys(Ase),o=[".".concat(LU,":not([").concat(uf,"])")].concat(r.map(function(h){return".".concat(h,":not([").concat(uf,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=u0(i.querySelectorAll(o))}catch{}if(a.length>0)n("pending"),s("complete");else return Promise.resolve();var l=wR.begin("onTree"),c=a.reduce(function(h,u){try{var d=jU(u);d&&h.push(d)}catch(f){DU||f.name==="MissingIcon"&&console.error(f)}return h},[]);return new Promise(function(h,u){Promise.all(c).then(function(d){UU(d,function(){n("active"),n("complete"),s("pending"),typeof e=="function"&&e(),l(),h()})}).catch(function(d){l(),u(d)})})}function Ese(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;jU(i).then(function(t){t&&UU([t],e)})}function Ise(i){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=(e||{}).icon?e:sT(e||{}),s=t.mask;return s&&(s=(s||{}).icon?s:sT(s||{})),i(n,Oe(Oe({},t),{},{mask:s}))}}var Tse=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transform,s=n===void 0?fl:n,r=t.symbol,o=r===void 0?!1:r,a=t.mask,l=a===void 0?null:a,c=t.maskId,h=c===void 0?null:c,u=t.title,d=u===void 0?null:u,f=t.titleId,g=f===void 0?null:f,p=t.classes,m=p===void 0?[]:p,v=t.attributes,b=v===void 0?{}:v,w=t.styles,y=w===void 0?{}:w;if(e){var x=e.prefix,L=e.iconName,S=e.icon;return uk(Oe({type:"icon"},e),function(){return df("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ye.autoA11y&&(d?b["aria-labelledby"]="".concat(Ye.replacementClass,"-title-").concat(g||sv()):(b["aria-hidden"]="true",b.focusable="false")),vR({icons:{main:rT(S),mask:l?rT(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:L,transform:Oe(Oe({},fl),s),symbol:o,title:d,maskId:h,titleId:g,extra:{attributes:b,styles:y,classes:m}})})}},Nse={mixout:function(){return{icon:Ise(Tse)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=yB,t.nodeCallback=Ese,t}}},provides:function(e){e.i2svg=function(t){var n=t.node,s=n===void 0?Fi:n,r=t.callback,o=r===void 0?function(){}:r;return yB(s,o)},e.generateSvgReplacementMutation=function(t,n){var s=n.iconName,r=n.title,o=n.titleId,a=n.prefix,l=n.transform,c=n.symbol,h=n.mask,u=n.maskId,d=n.extra;return new Promise(function(f,g){Promise.all([oT(s,a),h.iconName?oT(h.iconName,h.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var m=cR(p,2),v=m[0],b=m[1];f([t,vR({icons:{main:v,mask:b},prefix:a,iconName:s,transform:l,symbol:c,maskId:u,title:r,titleId:o,extra:d,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.transform,a=t.styles,l=lk(a);l.length>0&&(s.style=l);var c;return pR(o)&&(c=Uc("generateAbstractTransformGrouping",{main:r,transform:o,containerWidth:r.width,iconWidth:r.width})),n.push(c||r.icon),{children:n,attributes:s}}}},Mse={mixout:function(){return{layer:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.classes,r=s===void 0?[]:s;return uk({type:"layer"},function(){df("beforeDOMElementCreation",{assembler:t,params:n});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Ye.familyPrefix,"-layers")].concat(ak(r)).join(" ")},children:o}]})}}}},Rse={mixout:function(){return{counter:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.title,r=s===void 0?null:s,o=n.classes,a=o===void 0?[]:o,l=n.attributes,c=l===void 0?{}:l,h=n.styles,u=h===void 0?{}:h;return uk({type:"counter",content:t},function(){return df("beforeDOMElementCreation",{content:t,params:n}),fse({content:t.toString(),title:r,extra:{attributes:c,styles:u,classes:["".concat(Ye.familyPrefix,"-layers-counter")].concat(ak(a))}})})}}}},Ose={mixout:function(){return{text:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.transform,r=s===void 0?fl:s,o=n.title,a=o===void 0?null:o,l=n.classes,c=l===void 0?[]:l,h=n.attributes,u=h===void 0?{}:h,d=n.styles,f=d===void 0?{}:d;return uk({type:"text",content:t},function(){return df("beforeDOMElementCreation",{content:t,params:n}),pB({content:t,transform:Oe(Oe({},fl),r),title:a,extra:{attributes:u,styles:f,classes:["".concat(Ye.familyPrefix,"-layers-text")].concat(ak(c))}})})}}},provides:function(e){e.generateLayersText=function(t,n){var s=n.title,r=n.transform,o=n.extra,a=null,l=null;if(CU){var c=parseInt(getComputedStyle(t).fontSize,10),h=t.getBoundingClientRect();a=h.width/c,l=h.height/c}return Ye.autoA11y&&!s&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,pB({content:t.innerHTML,width:a,height:l,transform:r,title:s,extra:o,watchable:!0})])}}},Pse=new RegExp('"',"ug"),CB=[1105920,1112319];function Fse(i){var e=i.replace(Pse,""),t=Yne(e,0),n=t>=CB[0]&&t<=CB[1],s=e.length===2?e[0]===e[1]:!1;return{value:tT(s?e[0]:e),isSecondary:n||s}}function SB(i,e){var t="".concat(xne).concat(e.replace(":","-"));return new Promise(function(n,s){if(i.getAttribute(t)!==null)return n();var r=u0(i.children),o=r.filter(function(L){return L.getAttribute(eT)===e})[0],a=lu.getComputedStyle(i,e),l=a.getPropertyValue("font-family").match(Ene),c=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!l)return i.removeChild(o),n();if(l&&h!=="none"&&h!==""){var u=a.getPropertyValue("content"),d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?zS[l[2].toLowerCase()]:Ine[c],f=Fse(u),g=f.value,p=f.isSecondary,m=l[0].startsWith("FontAwesome"),v=_R(d,g),b=v;if(m){var w=nse(g);w.iconName&&w.prefix&&(v=w.iconName,d=w.prefix)}if(v&&!p&&(!o||o.getAttribute(uR)!==d||o.getAttribute(dR)!==b)){i.setAttribute(t,b),o&&i.removeChild(o);var y=Lse(),x=y.extra;x.attributes[eT]=e,oT(v,d).then(function(L){var S=vR(Oe(Oe({},y),{},{icons:{main:L,mask:bR()},prefix:d,iconName:b,extra:x,watchable:!0})),k=Fi.createElement("svg");e==="::before"?i.insertBefore(k,i.firstChild):i.appendChild(k),k.outerHTML=S.map(function(D){return X1(D)}).join(`
`),i.removeAttribute(t),n()}).catch(s)}else n()}else n()})}function Bse(i){return Promise.all([SB(i,"::before"),SB(i,"::after")])}function Vse(i){return i.parentNode!==document.head&&!~kne.indexOf(i.tagName.toUpperCase())&&!i.getAttribute(eT)&&(!i.parentNode||i.parentNode.tagName!=="svg")}function xB(i){if(Qc)return new Promise(function(e,t){var n=u0(i.querySelectorAll("*")).filter(Vse).map(Bse),s=wR.begin("searchPseudoElements");$U(),Promise.all(n).then(function(){s(),lT(),e()}).catch(function(){s(),lT(),t()})})}var Wse={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=xB,t}}},provides:function(e){e.pseudoElements2svg=function(t){var n=t.node,s=n===void 0?Fi:n;Ye.searchPseudoElements&&xB(s)}}},DB=!1,zse={mixout:function(){return{dom:{unwatch:function(){$U(),DB=!0}}}},hooks:function(){return{bootstrap:function(){vB(nT("mutationObserverCallbacks",{}))},noAuto:function(){Sse()},watch:function(t){var n=t.observeMutationsRoot;DB?lT():vB(nT("mutationObserverCallbacks",{observeMutationsRoot:n}))}}}},kB=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(n,s){var r=s.toLowerCase().split("-"),o=r[0],a=r.slice(1).join("-");if(o&&a==="h")return n.flipX=!0,n;if(o&&a==="v")return n.flipY=!0,n;if(a=parseFloat(a),isNaN(a))return n;switch(o){case"grow":n.size=n.size+a;break;case"shrink":n.size=n.size-a;break;case"left":n.x=n.x-a;break;case"right":n.x=n.x+a;break;case"up":n.y=n.y-a;break;case"down":n.y=n.y+a;break;case"rotate":n.rotate=n.rotate+a;break}return n},t)},Hse={mixout:function(){return{parse:{transform:function(t){return kB(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-transform");return s&&(t.transform=kB(s)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var n=t.main,s=t.transform,r=t.containerWidth,o=t.iconWidth,a={transform:"translate(".concat(r/2," 256)")},l="translate(".concat(s.x*32,", ").concat(s.y*32,") "),c="scale(".concat(s.size/16*(s.flipX?-1:1),", ").concat(s.size/16*(s.flipY?-1:1),") "),h="rotate(".concat(s.rotate," 0 0)"),u={transform:"".concat(l," ").concat(c," ").concat(h)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:u,path:d};return{tag:"g",attributes:Oe({},f.outer),children:[{tag:"g",attributes:Oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Oe(Oe({},n.icon.attributes),f.path)}]}]}}}},B2={x:0,y:0,width:"100%",height:"100%"};function LB(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i.attributes&&(i.attributes.fill||e)&&(i.attributes.fill="black"),i}function Use(i){return i.tag==="g"?i.children:[i]}var $se={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-mask"),r=s?hk(s.split(" ").map(function(o){return o.trim()})):bR();return r.prefix||(r.prefix=cu()),t.mask=r,t.maskId=n.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n=t.children,s=t.attributes,r=t.main,o=t.mask,a=t.maskId,l=t.transform,c=r.width,h=r.icon,u=o.width,d=o.icon,f=Hne({transform:l,containerWidth:u,iconWidth:c}),g={tag:"rect",attributes:Oe(Oe({},B2),{},{fill:"white"})},p=h.children?{children:h.children.map(LB)}:{},m={tag:"g",attributes:Oe({},f.inner),children:[LB(Oe({tag:h.tag,attributes:Oe(Oe({},h.attributes),f.path)},p))]},v={tag:"g",attributes:Oe({},f.outer),children:[m]},b="mask-".concat(a||sv()),w="clip-".concat(a||sv()),y={tag:"mask",attributes:Oe(Oe({},B2),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:Use(d)},y]};return n.push(x,{tag:"rect",attributes:Oe({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(b,")")},B2)}),{children:n,attributes:s}}}},jse={provides:function(e){var t=!1;lu.matchMedia&&(t=lu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var n=[],s={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Oe(Oe({},s),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=Oe(Oe({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Oe(Oe({},s),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Oe(Oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Oe(Oe({},o),{},{values:"1;0;1;1;0;1;"})}),n.push(a),n.push({tag:"path",attributes:Oe(Oe({},s),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Oe(Oe({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Oe(Oe({},s),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Oe(Oe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},qse={hooks:function(){return{parseNodeAttributes:function(t,n){var s=n.getAttribute("data-fa-symbol"),r=s===null?!1:s===""?!0:s;return t.symbol=r,t}}}},Gse=[jne,Nse,Mse,Rse,Ose,Wse,zse,Hse,$se,jse,qse];ose(Gse,{mixoutsTo:Yr});Yr.noAuto;Yr.config;Yr.library;Yr.dom;Yr.parse;Yr.findIconDefinition;Yr.toHtml;var AB=Yr.icon;Yr.layer;Yr.text;Yr.counter;/*!
 * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Kse={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"]},Zse=Kse,Yse={prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.65 28.65 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96zM64 416H224V160H64V416zM448 160H288V416H448V160z"]},Qse=Yse,Xse=Object.defineProperty,Jse=(i,e,t)=>e in i?Xse(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Il=(i,e,t)=>(Jse(i,typeof e!="symbol"?e+"":e,t),t),CR=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ke=(i,e,t)=>(CR(i,e,"read from private field"),t?t.call(i):e.get(i)),Ut=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Lc=(i,e,t,n)=>(CR(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),ere=(i,e,t,n)=>({set _(s){Lc(i,e,s,t)},get _(){return Ke(i,e,n)}}),_t=(i,e,t)=>(CR(i,e,"access private method"),t);function Ou(i,e,t){return i.fields=e||[],i.fname=t,i}function tre(i){return i==null?null:i.fname}function qU(i){return i==null?null:i.fields}function ire(i){return i.length===1?nre(i[0]):sre(i)}const nre=i=>function(e){return e[i]},sre=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function Xi(i){throw Error(i)}function rre(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function c(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)c(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?c():o=a+1:l==="["?(a>o&&c(),s=o=a+1):l==="]"&&(s||Xi("Access path missing open bracket: "+i),s>0&&c(),s=0,o=a+1)}return s&&Xi("Access path missing closing bracket: "+i),n&&Xi("Access path missing closing quote: "+i),a>o&&(a++,c()),e}function dk(i,e,t){const n=rre(i);return i=n.length===1?n[0]:i,Ou((t&&t.get||ire)(n),[i],e||i)}dk("id");const fk=Ou(i=>i,[],"identity");Ou(()=>0,[],"zero");Ou(()=>1,[],"one");Ou(()=>!0,[],"true");Ou(()=>!1,[],"false");var Fo=Array.isArray;function Ea(i){return i===Object(i)}function ba(i){return i[i.length-1]}function rv(i){return i==null||i===""?null:+i}const GU=i=>e=>i*Math.exp(e),KU=i=>e=>Math.log(i*e),ore=i=>e=>Math.sign(e)*Math.log1p(Math.abs(e/i)),are=i=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*i,$S=i=>e=>e<0?-Math.pow(-e,i):Math.pow(e,i);function SR(i,e,t,n){const s=t(i[0]),r=t(ba(i)),o=(r-s)*e;return[n(s-o),n(r-o)]}function lre(i,e){return SR(i,e,rv,fk)}function cre(i,e){var t=Math.sign(i[0]);return SR(i,e,KU(t),GU(t))}function hre(i,e,t){return SR(i,e,$S(t),$S(1/t))}function gk(i,e,t,n,s){const r=n(i[0]),o=n(ba(i)),a=e!=null?n(e):(r+o)/2;return[s(a+(r-a)*t),s(a+(o-a)*t)]}function ZU(i,e,t){return gk(i,e,t,rv,fk)}function YU(i,e,t){const n=Math.sign(i[0]);return gk(i,e,t,KU(n),GU(n))}function cT(i,e,t,n){return gk(i,e,t,$S(n),$S(1/n))}function ure(i,e,t,n){return gk(i,e,t,ore(n),are(n))}function hT(i){return i!=null?Fo(i)?i:[i]:[]}function dre(i,e,t){let n=i[0],s=i[1],r;return s<n&&(r=s,s=n,n=r),r=s-n,r>=t-e?[e,t]:[n=Math.min(Math.max(n,e),t-r),n+r]}function Sr(i){return typeof i=="function"}const fre="descending";function QU(i,e,t){t=t||{},e=hT(e)||[];const n=[],s=[],r={},o=t.comparator||gre;return hT(i).forEach((a,l)=>{a!=null&&(n.push(e[l]===fre?-1:1),s.push(a=Sr(a)?a:dk(a,null,t)),(qU(a)||[]).forEach(c=>r[c]=1))}),s.length===0?null:Ou(o(s,n),Object.keys(r))}const XU=(i,e)=>(i<e||i==null)&&e!=null?-1:(i>e||e==null)&&i!=null?1:(e=e instanceof Date?+e:e,(i=i instanceof Date?+i:i)!==i&&e===e?-1:e!==e&&i===i?1:0),gre=(i,e)=>i.length===1?pre(i[0],e[0]):mre(i,e,i.length),pre=(i,e)=>function(t,n){return XU(i(t),i(n))*e},mre=(i,e,t)=>(e.push(0),function(n,s){let r,o=0,a=-1;for(;o===0&&++a<t;)r=i[a],o=XU(r(n),r(s));return o*e[a]});function _re(i){return Sr(i)?i:()=>i}function xR(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const bre=Object.prototype.hasOwnProperty;function Ld(i,e){return bre.call(i,e)}function pk(i){return typeof i=="boolean"}function vre(i){return Object.prototype.toString.call(i)==="[object Date]"}function wre(i){return i&&Sr(i[Symbol.iterator])}function xr(i){return typeof i=="number"}function en(i){return typeof i=="string"}function yre(i,e){const t=i[0],n=ba(i),s=+e;return s?s===1?n:t+s*(n-t):t}function jS(i){return i&&ba(i)-i[0]||0}function mk(i){return Fo(i)?"["+i.map(mk)+"]":Ea(i)||en(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function Cre(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const Sre=i=>xr(i)||vre(i)?i:Date.parse(i);function xre(i,e){return e=e||Sre,i==null||i===""?null:e(i)}function Dre(i){return i==null||i===""?null:i+""}function qS(i){const e={},t=i.length;for(let n=0;n<t;++n)e[i[n]]=!0;return e}var EB={},V2={},W2=34,e_=10,z2=13;function JU(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function kre(i,e){var t=JU(i);return function(n,s){return e(t(n),s,i)}}function IB(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function cr(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function Lre(i){return i<0?"-"+cr(-i,6):i>9999?"+"+cr(i,6):cr(i,4)}function Are(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":Lre(i.getUTCFullYear())+"-"+cr(i.getUTCMonth()+1,2)+"-"+cr(i.getUTCDate(),2)+(s?"T"+cr(e,2)+":"+cr(t,2)+":"+cr(n,2)+"."+cr(s,3)+"Z":n?"T"+cr(e,2)+":"+cr(t,2)+":"+cr(n,2)+"Z":t||e?"T"+cr(e,2)+":"+cr(t,2)+"Z":"")}function e$(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,v){if(f)return f(m,v-1);g=m,f=d?kre(m,d):JU(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,v,b=g<=0,w=!1;u.charCodeAt(g-1)===e_&&--g,u.charCodeAt(g-1)===z2&&--g;function y(){if(b)return V2;if(w)return w=!1,EB;var L,S=p,k;if(u.charCodeAt(S)===W2){for(;p++<g&&u.charCodeAt(p)!==W2||u.charCodeAt(++p)===W2;);return(L=p)>=g?b=!0:(k=u.charCodeAt(p++))===e_?w=!0:k===z2&&(w=!0,u.charCodeAt(p)===e_&&++p),u.slice(S+1,L-1).replace(/""/g,'"')}for(;p<g;){if((k=u.charCodeAt(L=p++))===e_)w=!0;else if(k===z2)w=!0,u.charCodeAt(p)===e_&&++p;else if(k!==t)continue;return u.slice(S,L)}return b=!0,u.slice(S,g)}for(;(v=y())!==V2;){for(var x=[];v!==EB&&v!==V2;)x.push(v),v=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return h(f[g])}).join(i)})}function o(u,d){return d==null&&(d=IB(u)),[d.map(h).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=IB(u)),r(u,d).join(`
`)}function l(u){return u.map(c).join(`
`)}function c(u){return u.map(h).join(i)}function h(u){return u==null?"":u instanceof Date?Are(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:h}}var Ere=e$("	"),Ire=Ere.parseRows;function Tre(i){return i}function Nre(i){if(i==null)return Tre;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function Mre(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function Rre(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return TB(i,t)})}:TB(i,e)}function TB(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=t$(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function t$(i,e){var t=Nre(i.transform),n=i.arcs;function s(h,u){u.length&&u.pop();for(var d=n[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&Mre(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}function Ore(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(c,h){var u=i.arcs[c<0?~c:c],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=c,e[h]=d)}),e.forEach(function(c){var h=a(c),u=h[0],d=h[1],f,g;if(f=s[u])if(delete s[f.end],f.push(c),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(c),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[c],n[f.start=u]=s[f.end=d]=f});function a(c){var h=i.arcs[c<0?~c:c],u=h[0],d;return i.transform?(d=[0,0],h.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=h[h.length-1],c<0?[d,u]:[u,d]}function l(c,h){for(var u in c){var d=c[u];delete h[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(c){t[c<0?~c:c]||r.push([c])}),r}function Pre(i){return t$(i,Fre.apply(this,arguments))}function Fre(i,e,t){var n,s,r;if(arguments.length>1)n=Bre(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:Ore(i,n)}}function Bre(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function c(u){u.forEach(l)}function h(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(h);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":c(u.arcs);break}}return h(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}function rb(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function Vre(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function _k(i){let e,t,n;i.length!==2?(e=rb,t=(a,l)=>rb(i(a),l),n=(a,l)=>i(a)-l):(e=i===rb||i===Vre?i:Wre,t=i,n=i);function s(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<0?c=u+1:h=u}while(c<h)}return c}function r(a,l,c=0,h=a.length){if(c<h){if(e(l,l)!==0)return h;do{const u=c+h>>>1;t(a[u],l)<=0?c=u+1:h=u}while(c<h)}return c}function o(a,l,c=0,h=a.length){const u=s(a,l,c,h-1);return u>c&&n(a[u-1],l)>-n(a[u],l)?u-1:u}return{left:s,center:o,right:r}}function Wre(){return 0}function i$(i){return i===null?NaN:+i}const n$=_k(rb),uT=n$.right;n$.left;_k(i$).center;const d0=uT;function zre(i,e){let t,n;if(e===void 0)for(const s of i)s!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)));else{let s=-1;for(let r of i)(r=e(r,++s,i))!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)))}return[t,n]}class ff extends Map{constructor(e,t=$re){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(NB(this,e))}has(e){return super.has(NB(this,e))}set(e,t){return super.set(Hre(this,e),t)}delete(e){return super.delete(Ure(this,e))}}function NB({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):t}function Hre({_intern:i,_key:e},t){const n=e(t);return i.has(n)?i.get(n):(i.set(n,t),t)}function Ure({_intern:i,_key:e},t){const n=e(t);return i.has(n)&&(t=i.get(n),i.delete(n)),t}function $re(i){return i!==null&&typeof i=="object"?i.valueOf():i}function dT(i){return i}function bk(i,...e){return s$(i,dT,dT,e)}function jre(i,...e){return s$(i,Array.from,dT,e)}function s$(i,e,t,n){return function s(r,o){if(o>=n.length)return t(r);const a=new ff,l=n[o++];let c=-1;for(const h of r){const u=l(h,++c,r),d=a.get(u);d?d.push(h):a.set(u,[h])}for(const[h,u]of a)a.set(h,s(u,o));return e(a)}(i,0)}var fT=Math.sqrt(50),gT=Math.sqrt(10),pT=Math.sqrt(2);function GS(i,e,t){var n,s=-1,r,o,a;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((n=e<i)&&(r=i,i=e,e=r),(a=r$(i,e,t))===0||!isFinite(a))return[];if(a>0){let l=Math.round(i/a),c=Math.round(e/a);for(l*a<i&&++l,c*a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)*a}else{a=-a;let l=Math.round(i*a),c=Math.round(e*a);for(l/a<i&&++l,c/a>e&&--c,o=new Array(r=c-l+1);++s<r;)o[s]=(l+s)/a}return n&&o.reverse(),o}function r$(i,e,t){var n=(e-i)/Math.max(0,t),s=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,s);return s>=0?(r>=fT?10:r>=gT?5:r>=pT?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(r>=fT?10:r>=gT?5:r>=pT?2:1)}function gf(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=fT?s*=10:r>=gT?s*=5:r>=pT&&(s*=2),e<i?-s:s}function o$(i,e,t=i$){if(n=i.length){if((e=+e)<=0||n<2)return+t(i[0],0,i);if(e>=1)return+t(i[n-1],n-1,i);var n,s=(n-1)*e,r=Math.floor(s),o=+t(i[r],r,i),a=+t(i[r+1],r+1,i);return o+(a-o)*(s-r)}}function ov(i,e,t){i=+i,e=+e,t=(s=arguments.length)<2?(e=i,i=0,1):s<3?1:+t;for(var n=-1,s=Math.max(0,Math.ceil((e-i)/t))|0,r=new Array(s);++n<s;)r[n]=i+n*t;return r}function sy(i,e){let t=0;if(e===void 0)for(let n of i)(n=+n)&&(t+=n);else{let n=-1;for(let s of i)(s=+e(s,++n,i))&&(t+=s)}return t}function qre(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function KS(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function fm(i){return i=KS(Math.abs(i)),i?i[1]:NaN}function Gre(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function Kre(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var Zre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hu(i){if(!(e=Zre.exec(i)))throw new Error("invalid format: "+i);var e;return new DR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hu.prototype=DR.prototype;function DR(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}DR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yre(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var a$;function Qre(i,e){var t=KS(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(a$=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+KS(i,Math.max(0,e+r-1))[0]}function MB(i,e){var t=KS(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const RB={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:qre,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>MB(i*100,e),r:MB,s:Qre,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function OB(i){return i}var PB=Array.prototype.map,FB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xre(i){var e=i.grouping===void 0||i.thousands===void 0?OB:Gre(PB.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?OB:Kre(PB.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=hu(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,v=u.width,b=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(b=!0,x="g"):RB[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var L=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",k=RB[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(N){var $=L,U=S,ee,he,fe;if(x==="c")U=k(N)+U,N="";else{N=+N;var Ce=N<0||1/N<0;if(N=isNaN(N)?l:k(Math.abs(N),w),y&&(N=Yre(N)),Ce&&+N==0&&g!=="+"&&(Ce=!1),$=(Ce?g==="("?g:a:g==="-"||g==="("?"":g)+$,U=(x==="s"?FB[8+a$/3]:"")+U+(Ce&&g==="("?")":""),D){for(ee=-1,he=N.length;++ee<he;)if(fe=N.charCodeAt(ee),48>fe||fe>57){U=(fe===46?s+N.slice(ee+1):N.slice(ee))+U,N=N.slice(0,ee);break}}}b&&!m&&(N=e(N,1/0));var Se=$.length+N.length+U.length,me=Se<v?new Array(v-Se+1).join(d):"";switch(b&&m&&(N=e(me+N,me.length?v-U.length:1/0),me=""),f){case"<":N=$+N+U+me;break;case"=":N=$+me+N+U;break;case"^":N=me.slice(0,Se=me.length>>1)+$+N+U+me.slice(Se);break;default:N=me+$+N+U;break}return r(N)}return T.toString=function(){return u+""},T}function h(u,d){var f=c((u=hu(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(fm(d)/3)))*3,p=Math.pow(10,-g),m=FB[8+g/3];return function(v){return f(p*v)+m}}return{format:c,formatPrefix:h}}var ry,ds,kR;Jre({thousands:",",grouping:[3],currency:["$",""]});function Jre(i){return ry=Xre(i),ds=ry.format,kR=ry.formatPrefix,ry}function l$(i){return Math.max(0,-fm(Math.abs(i)))}function c$(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fm(e)/3)))*3-fm(Math.abs(i)))}function h$(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,fm(e)-fm(i))+1}var H2=new Date,U2=new Date;function es(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],c;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(c=new Date(+r)),e(r,a),i(r);while(c<r&&r<o);return l},s.filter=function(r){return es(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return H2.setTime(+r),U2.setTime(+o),i(H2),i(U2),Math.floor(t(H2,U2))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var ZS=es(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});ZS.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?es(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):ZS};const LR=ZS;ZS.range;const Ac=1e3,So=Ac*60,Ec=So*60,pf=Ec*24,AR=pf*7,BB=pf*30,$2=pf*365;var u$=es(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*Ac)},function(i,e){return(e-i)/Ac},function(i){return i.getUTCSeconds()});const Wh=u$;u$.range;var d$=es(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Ac)},function(i,e){i.setTime(+i+e*So)},function(i,e){return(e-i)/So},function(i){return i.getMinutes()});const ER=d$;d$.range;var f$=es(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Ac-i.getMinutes()*So)},function(i,e){i.setTime(+i+e*Ec)},function(i,e){return(e-i)/Ec},function(i){return i.getHours()});const IR=f$;f$.range;var g$=es(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*So)/pf,i=>i.getDate()-1);const $d=g$;g$.range;function Qf(i){return es(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*So)/AR})}var J1=Qf(0),YS=Qf(1),eoe=Qf(2),toe=Qf(3),gm=Qf(4),ioe=Qf(5),noe=Qf(6);J1.range;YS.range;eoe.range;toe.range;gm.range;ioe.range;noe.range;var p$=es(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const QS=p$;p$.range;var TR=es(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});TR.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:es(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const uu=TR;TR.range;var m$=es(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*So)},function(i,e){return(e-i)/So},function(i){return i.getUTCMinutes()});const NR=m$;m$.range;var _$=es(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*Ec)},function(i,e){return(e-i)/Ec},function(i){return i.getUTCHours()});const MR=_$;_$.range;var b$=es(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/pf},function(i){return i.getUTCDate()-1});const jd=b$;b$.range;function Xf(i){return es(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/AR})}var ew=Xf(0),XS=Xf(1),soe=Xf(2),roe=Xf(3),pm=Xf(4),ooe=Xf(5),aoe=Xf(6);ew.range;XS.range;soe.range;roe.range;pm.range;ooe.range;aoe.range;var v$=es(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const JS=v$;v$.range;var RR=es(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});RR.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:es(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const du=RR;RR.range;function w$(i,e,t,n,s,r){const o=[[Wh,1,Ac],[Wh,5,5*Ac],[Wh,15,15*Ac],[Wh,30,30*Ac],[r,1,So],[r,5,5*So],[r,15,15*So],[r,30,30*So],[s,1,Ec],[s,3,3*Ec],[s,6,6*Ec],[s,12,12*Ec],[n,1,pf],[n,2,2*pf],[t,1,AR],[e,1,BB],[e,3,3*BB],[i,1,$2]];function a(c,h,u){const d=h<c;d&&([c,h]=[h,c]);const f=u&&typeof u.range=="function"?u:l(c,h,u),g=f?f.range(c,+h+1):[];return d?g.reverse():g}function l(c,h,u){const d=Math.abs(h-c)/u,f=_k(([,,m])=>m).right(o,d);if(f===o.length)return i.every(gf(c/$2,h/$2,u));if(f===0)return LR.every(Math.max(gf(c,h,u),1));const[g,p]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(p)}return[a,l]}const[loe,coe]=w$(du,JS,ew,jd,MR,NR),[hoe,uoe]=w$(uu,QS,J1,$d,IR,ER),av="year",lv="quarter",cv="month",hv="week",uv="date",vk="day",OR="dayofyear",dv="hours",fv="minutes",gv="seconds",wk="milliseconds",doe=[av,lv,cv,hv,uv,vk,OR,dv,fv,gv,wk];doe.reduce((i,e,t)=>(i[e]=1+t,i),{});const foe={[av]:uu,[lv]:QS.every(3),[cv]:QS,[hv]:J1,[uv]:$d,[vk]:$d,[OR]:$d,[dv]:IR,[fv]:ER,[gv]:Wh,[wk]:LR},goe={[av]:du,[lv]:JS.every(3),[cv]:JS,[hv]:ew,[uv]:jd,[vk]:jd,[OR]:jd,[dv]:MR,[fv]:NR,[gv]:Wh,[wk]:LR};function poe(i){return foe[i]}function moe(i){return goe[i]}function j2(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function q2(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function t_(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function y$(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=i_(s),h=n_(s),u=i_(r),d=n_(r),f=i_(o),g=n_(o),p=i_(a),m=n_(a),v=i_(l),b=n_(l),w={a:Ce,A:Se,b:me,B:kt,c:null,d:$B,e:$B,f:Voe,g:Zoe,G:Qoe,H:Poe,I:Foe,j:Boe,L:C$,m:Woe,M:zoe,p:ze,q:Ge,Q:GB,s:KB,S:Hoe,u:Uoe,U:$oe,V:joe,w:qoe,W:Goe,x:null,X:null,y:Koe,Y:Yoe,Z:Xoe,"%":qB},y={a:Lt,A:st,b:Hi,B:Cn,c:null,d:jB,e:jB,f:iae,g:dae,G:gae,H:Joe,I:eae,j:tae,L:x$,m:nae,M:sae,p:Hn,q:Ti,Q:GB,s:KB,S:rae,u:oae,U:aae,V:lae,w:cae,W:hae,x:null,X:null,y:uae,Y:fae,Z:pae,"%":qB},x={a:T,A:N,b:$,B:U,c:ee,d:HB,e:HB,f:Noe,g:zB,G:WB,H:UB,I:UB,j:Aoe,L:Toe,m:Loe,M:Eoe,p:D,q:koe,Q:Roe,s:Ooe,S:Ioe,u:yoe,U:Coe,V:Soe,w:woe,W:xoe,x:he,X:fe,y:zB,Y:WB,Z:Doe,"%":Moe};w.x=L(t,w),w.X=L(n,w),w.c=L(e,w),y.x=L(t,y),y.X=L(n,y),y.c=L(e,y);function L(J,ye){return function(ce){var W=[],at=-1,Me=0,yt=J.length,mt,ii,Un;for(ce instanceof Date||(ce=new Date(+ce));++at<yt;)J.charCodeAt(at)===37&&(W.push(J.slice(Me,at)),(ii=VB[mt=J.charAt(++at)])!=null?mt=J.charAt(++at):ii=mt==="e"?" ":"0",(Un=ye[mt])&&(mt=Un(ce,ii)),W.push(mt),Me=at+1);return W.push(J.slice(Me,at)),W.join("")}}function S(J,ye){return function(ce){var W=t_(1900,void 0,1),at=k(W,J,ce+="",0),Me,yt;if(at!=ce.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ye&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Me=q2(t_(W.y,0,1)),yt=Me.getUTCDay(),Me=yt>4||yt===0?XS.ceil(Me):XS(Me),Me=jd.offset(Me,(W.V-1)*7),W.y=Me.getUTCFullYear(),W.m=Me.getUTCMonth(),W.d=Me.getUTCDate()+(W.w+6)%7):(Me=j2(t_(W.y,0,1)),yt=Me.getDay(),Me=yt>4||yt===0?YS.ceil(Me):YS(Me),Me=$d.offset(Me,(W.V-1)*7),W.y=Me.getFullYear(),W.m=Me.getMonth(),W.d=Me.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),yt="Z"in W?q2(t_(W.y,0,1)).getUTCDay():j2(t_(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(yt+5)%7:W.w+W.U*7-(yt+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,q2(W)):j2(W)}}function k(J,ye,ce,W){for(var at=0,Me=ye.length,yt=ce.length,mt,ii;at<Me;){if(W>=yt)return-1;if(mt=ye.charCodeAt(at++),mt===37){if(mt=ye.charAt(at++),ii=x[mt in VB?ye.charAt(at++):mt],!ii||(W=ii(J,ce,W))<0)return-1}else if(mt!=ce.charCodeAt(W++))return-1}return W}function D(J,ye,ce){var W=c.exec(ye.slice(ce));return W?(J.p=h.get(W[0].toLowerCase()),ce+W[0].length):-1}function T(J,ye,ce){var W=f.exec(ye.slice(ce));return W?(J.w=g.get(W[0].toLowerCase()),ce+W[0].length):-1}function N(J,ye,ce){var W=u.exec(ye.slice(ce));return W?(J.w=d.get(W[0].toLowerCase()),ce+W[0].length):-1}function $(J,ye,ce){var W=v.exec(ye.slice(ce));return W?(J.m=b.get(W[0].toLowerCase()),ce+W[0].length):-1}function U(J,ye,ce){var W=p.exec(ye.slice(ce));return W?(J.m=m.get(W[0].toLowerCase()),ce+W[0].length):-1}function ee(J,ye,ce){return k(J,e,ye,ce)}function he(J,ye,ce){return k(J,t,ye,ce)}function fe(J,ye,ce){return k(J,n,ye,ce)}function Ce(J){return o[J.getDay()]}function Se(J){return r[J.getDay()]}function me(J){return l[J.getMonth()]}function kt(J){return a[J.getMonth()]}function ze(J){return s[+(J.getHours()>=12)]}function Ge(J){return 1+~~(J.getMonth()/3)}function Lt(J){return o[J.getUTCDay()]}function st(J){return r[J.getUTCDay()]}function Hi(J){return l[J.getUTCMonth()]}function Cn(J){return a[J.getUTCMonth()]}function Hn(J){return s[+(J.getUTCHours()>=12)]}function Ti(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ye=L(J+="",w);return ye.toString=function(){return J},ye},parse:function(J){var ye=S(J+="",!1);return ye.toString=function(){return J},ye},utcFormat:function(J){var ye=L(J+="",y);return ye.toString=function(){return J},ye},utcParse:function(J){var ye=S(J+="",!0);return ye.toString=function(){return J},ye}}}var VB={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,_oe=/^%/,boe=/[\\^$*+?|[\]().{}]/g;function Xt(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function voe(i){return i.replace(boe,"\\$&")}function i_(i){return new RegExp("^(?:"+i.map(voe).join("|")+")","i")}function n_(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function woe(i,e,t){var n=ts.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function yoe(i,e,t){var n=ts.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function Coe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function Soe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function xoe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function WB(i,e,t){var n=ts.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function zB(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function Doe(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function koe(i,e,t){var n=ts.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function Loe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function HB(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function Aoe(i,e,t){var n=ts.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function UB(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function Eoe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function Ioe(i,e,t){var n=ts.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function Toe(i,e,t){var n=ts.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function Noe(i,e,t){var n=ts.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function Moe(i,e,t){var n=_oe.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function Roe(i,e,t){var n=ts.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function Ooe(i,e,t){var n=ts.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function $B(i,e){return Xt(i.getDate(),e,2)}function Poe(i,e){return Xt(i.getHours(),e,2)}function Foe(i,e){return Xt(i.getHours()%12||12,e,2)}function Boe(i,e){return Xt(1+$d.count(uu(i),i),e,3)}function C$(i,e){return Xt(i.getMilliseconds(),e,3)}function Voe(i,e){return C$(i,e)+"000"}function Woe(i,e){return Xt(i.getMonth()+1,e,2)}function zoe(i,e){return Xt(i.getMinutes(),e,2)}function Hoe(i,e){return Xt(i.getSeconds(),e,2)}function Uoe(i){var e=i.getDay();return e===0?7:e}function $oe(i,e){return Xt(J1.count(uu(i)-1,i),e,2)}function S$(i){var e=i.getDay();return e>=4||e===0?gm(i):gm.ceil(i)}function joe(i,e){return i=S$(i),Xt(gm.count(uu(i),i)+(uu(i).getDay()===4),e,2)}function qoe(i){return i.getDay()}function Goe(i,e){return Xt(YS.count(uu(i)-1,i),e,2)}function Koe(i,e){return Xt(i.getFullYear()%100,e,2)}function Zoe(i,e){return i=S$(i),Xt(i.getFullYear()%100,e,2)}function Yoe(i,e){return Xt(i.getFullYear()%1e4,e,4)}function Qoe(i,e){var t=i.getDay();return i=t>=4||t===0?gm(i):gm.ceil(i),Xt(i.getFullYear()%1e4,e,4)}function Xoe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xt(e/60|0,"0",2)+Xt(e%60,"0",2)}function jB(i,e){return Xt(i.getUTCDate(),e,2)}function Joe(i,e){return Xt(i.getUTCHours(),e,2)}function eae(i,e){return Xt(i.getUTCHours()%12||12,e,2)}function tae(i,e){return Xt(1+jd.count(du(i),i),e,3)}function x$(i,e){return Xt(i.getUTCMilliseconds(),e,3)}function iae(i,e){return x$(i,e)+"000"}function nae(i,e){return Xt(i.getUTCMonth()+1,e,2)}function sae(i,e){return Xt(i.getUTCMinutes(),e,2)}function rae(i,e){return Xt(i.getUTCSeconds(),e,2)}function oae(i){var e=i.getUTCDay();return e===0?7:e}function aae(i,e){return Xt(ew.count(du(i)-1,i),e,2)}function D$(i){var e=i.getUTCDay();return e>=4||e===0?pm(i):pm.ceil(i)}function lae(i,e){return i=D$(i),Xt(pm.count(du(i),i)+(du(i).getUTCDay()===4),e,2)}function cae(i){return i.getUTCDay()}function hae(i,e){return Xt(XS.count(du(i)-1,i),e,2)}function uae(i,e){return Xt(i.getUTCFullYear()%100,e,2)}function dae(i,e){return i=D$(i),Xt(i.getUTCFullYear()%100,e,2)}function fae(i,e){return Xt(i.getUTCFullYear()%1e4,e,4)}function gae(i,e){var t=i.getUTCDay();return i=t>=4||t===0?pm(i):pm.ceil(i),Xt(i.getUTCFullYear()%1e4,e,4)}function pae(){return"+0000"}function qB(){return"%"}function GB(i){return+i}function KB(i){return Math.floor(+i/1e3)}var Tg,PR,k$,FR,L$;mae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mae(i){return Tg=y$(i),PR=Tg.format,k$=Tg.parse,FR=Tg.utcFormat,L$=Tg.utcParse,Tg}function R_(i){const e={};return t=>e[t]||(e[t]=i(t))}function _ae(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=bae(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function bae(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function vae(i){const e=R_(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=hu(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return _ae(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=hu(o??",f");const a=gf(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let c;if(o.precision==null)switch(o.type){case"s":return isNaN(c=c$(a,l))||(o.precision=c),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=h$(a,l))||(o.precision=c-(o.type==="e"));break}case"f":case"%":{isNaN(c=l$(a))||(o.precision=c-(o.type==="%")*2);break}}return e(o)}}}wae();function wae(){return vae({format:ds,formatPrefix:kR})}function ZB(i,e,t){t=t||{},Ea(t)||Xi("Invalid time multi-format specifier: ".concat(t));const n=e(gv),s=e(fv),r=e(dv),o=e(uv),a=e(hv),l=e(cv),c=e(lv),h=e(av),u=i(t[wk]||".%L"),d=i(t[gv]||":%S"),f=i(t[fv]||"%I:%M"),g=i(t[dv]||"%I %p"),p=i(t[uv]||t[vk]||"%a %d"),m=i(t[hv]||"%b %d"),v=i(t[cv]||"%B"),b=i(t[lv]||"%B"),w=i(t[av]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:h(y)<y?c(y)<y?v:b:w)(y)}function A$(i){const e=R_(i.format),t=R_(i.utcFormat);return{timeFormat:n=>en(n)?e(n):ZB(e,poe,n),utcFormat:n=>en(n)?t(n):ZB(t,moe,n),timeParse:R_(i.parse),utcParse:R_(i.utcParse)}}let mT;yae();function yae(){return mT=A$({format:PR,parse:k$,utcFormat:FR,utcParse:L$})}function Cae(i){return A$(y$(i))}function Sae(i){return arguments.length?mT=Cae(i):mT}const xae=/^(data:|([A-Za-z]+:)?\/\/)/,Dae=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,kae=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,YB="file://";function Lae(i,e){return t=>({options:t||{},sanitize:Eae,load:Aae,fileAccess:!!e,file:Iae(e),http:Nae(i)})}async function Aae(i,e){const t=await this.sanitize(i,e),n=t.href;return t.localFile?this.file(n):this.http(n,e)}async function Eae(i,e){e=xR({},this.options,e);const t=this.fileAccess,n={href:null};let s,r,o;const a=Dae.test(i.replace(kae,""));(i==null||typeof i!="string"||!a)&&Xi("Sanitize failure, invalid URI: "+mk(i));const l=xae.test(i);return(o=e.baseURL)&&!l&&(!i.startsWith("/")&&!o.endsWith("/")&&(i="/"+i),i=o+i),r=(s=i.startsWith(YB))||e.mode==="file"||e.mode!=="http"&&!l&&t,s?i=i.slice(YB.length):i.startsWith("//")&&(e.defaultProtocol==="file"?(i=i.slice(2),r=!0):i=(e.defaultProtocol||"http")+":"+i),Object.defineProperty(n,"localFile",{value:!!r}),n.href=i,e.target&&(n.target=e.target+""),e.rel&&(n.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(n.crossOrigin=e.crossOrigin+""),n}function Iae(i){return i?e=>new Promise((t,n)=>{i.readFile(e,(s,r)=>{s?n(s):t(r)})}):Tae}async function Tae(){Xi("No file system access.")}function Nae(i){return i?async function(e,t){const n=xR({},this.options.http,t),s=t&&t.response,r=await i(e,n);return r.ok?Sr(r[s])?r[s]():r.text():Xi(r.status+""+r.statusText)}:Mae}async function Mae(){Xi("No HTTP fetch method available.")}const Rae=i=>i!=null&&i===i,Oae=i=>i==="true"||i==="false"||i===!0||i===!1,Pae=i=>!Number.isNaN(Date.parse(i)),E$=i=>!Number.isNaN(+i)&&!(i instanceof Date),Fae=i=>E$(i)&&Number.isInteger(+i),QB={boolean:Cre,integer:rv,number:rv,date:xre,string:Dre,unknown:fk},oy=[Oae,Fae,E$,Pae],Bae=["boolean","integer","number","date"];function Vae(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=oy.length,s=oy.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&Rae(l)&&!oy[a](l)&&(s[a]=0,++o,o===oy.length))return"string";return Bae[s.reduce((r,o)=>r===0?o:r,0)-1]}function Wae(i,e){return e.reduce((t,n)=>(t[n]=Vae(i,n),t),{})}function XB(i){const e=function(t,n){const s={delimiter:i};return BR(t,n?xR(n,s):s)};return e.responseType="text",e}function BR(i,e){return e.header&&(i=e.header.map(mk).join(e.delimiter)+`
`+i),e$(e.delimiter).parse(i+"")}BR.responseType="text";function zae(i){return typeof Buffer=="function"&&Sr(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function VR(i,e){const t=e&&e.property?dk(e.property):fk;return Ea(i)&&!zae(i)?Hae(t(i),e):t(JSON.parse(i))}VR.responseType="json";function Hae(i,e){return!Fo(i)&&wre(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const Uae={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function I$(i,e){let t,n,s,r;return i=VR(i,e),e&&e.feature?(t=Rre,s=e.feature):e&&e.mesh?(t=Pre,s=e.mesh,r=Uae[e.filter]):Xi("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):Xi("Invalid TopoJSON object: "+s),n&&n.features||[n]}I$.responseType="json";const G2={dsv:BR,csv:XB(","),tsv:XB("	"),json:VR,topojson:I$};function T$(i,e){return arguments.length>1?(G2[i]=e,this):Ld(G2,i)?G2[i]:null}function N$(i,e,t,n){e=e||{};const s=T$(e.type||"json");return s||Xi("Unknown data format type: "+e.type),i=s(i,e),e.parse&&$ae(i,e.parse,t,n),Ld(i,"columns")&&delete i.columns,i}function $ae(i,e,t,n){if(!i.length)return;const s=Sae();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,c,h,u;e==="auto"&&(e=Wae(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!QB[g])throw Error("Illegal format pattern: "+f+":"+g);return QB[g]});for(l=0,h=i.length,u=r.length;l<h;++l)for(o=i[l],c=0;c<u;++c)a=r[c],o[a]=d[c](o[a])}const yk=Lae(typeof fetch<"u"&&fetch,null);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var K2;const ex=window,mm=ex.trustedTypes,JB=mm?mm.createPolicy("lit-html",{createHTML:i=>i}):void 0,Ih=`lit$${(Math.random()+"").slice(9)}$`,M$="?"+Ih,jae=`<${M$}>`,_m=document,pv=(i="")=>_m.createComment(i),mv=i=>i===null||typeof i!="object"&&typeof i!="function",R$=Array.isArray,qae=i=>R$(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",s_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,e6=/-->/g,t6=/>/g,Xu=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),i6=/'/g,n6=/"/g,O$=/^(?:script|style|textarea|title)$/i,Gae=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Th=Gae(1),_v=Symbol.for("lit-noChange"),Zn=Symbol.for("lit-nothing"),s6=new WeakMap,Rp=_m.createTreeWalker(_m,129,null,!1),Kae=(i,e)=>{const t=i.length-1,n=[];let s,r=e===2?"<svg>":"",o=s_;for(let l=0;l<t;l++){const c=i[l];let h,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===s_?u[1]==="!--"?o=e6:u[1]!==void 0?o=t6:u[2]!==void 0?(O$.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Xu):u[3]!==void 0&&(o=Xu):o===Xu?u[0]===">"?(o=s??s_,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,h=u[1],o=u[3]===void 0?Xu:u[3]==='"'?n6:i6):o===n6||o===i6?o=Xu:o===e6||o===t6?o=s_:(o=Xu,s=void 0);const g=o===Xu&&i[l+1].startsWith("/>")?" ":"";r+=o===s_?c+jae:d>=0?(n.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+Ih+g):c+Ih+(d===-2?(n.push(void 0),l):g)}const a=r+(i[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return[JB!==void 0?JB.createHTML(a):a,n]};let _T=class P${constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,h]=Kae(e,t);if(this.el=P$.createElement(c,n),Rp.currentNode=this.el.content,t===2){const u=this.el.content,d=u.firstChild;d.remove(),u.append(...d.childNodes)}for(;(s=Rp.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const u=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(Ih)){const f=h[o++];if(u.push(d),f!==void 0){const g=s.getAttribute(f.toLowerCase()+"$lit$").split(Ih),p=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:p[2],strings:g,ctor:p[1]==="."?Yae:p[1]==="?"?Xae:p[1]==="@"?Jae:Ck})}else l.push({type:6,index:r})}for(const d of u)s.removeAttribute(d)}if(O$.test(s.tagName)){const u=s.textContent.split(Ih),d=u.length-1;if(d>0){s.textContent=mm?mm.emptyScript:"";for(let f=0;f<d;f++)s.append(u[f],pv()),Rp.nextNode(),l.push({type:2,index:++r});s.append(u[d],pv())}}}else if(s.nodeType===8)if(s.data===M$)l.push({type:2,index:r});else{let u=-1;for(;(u=s.data.indexOf(Ih,u+1))!==-1;)l.push({type:7,index:r}),u+=Ih.length-1}r++}}static createElement(e,t){const n=_m.createElement("template");return n.innerHTML=e,n}};function bm(i,e,t=i,n){var s,r,o,a;if(e===_v)return e;let l=n!==void 0?(s=t._$Co)===null||s===void 0?void 0:s[n]:t._$Cl;const c=mv(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(i),l._$AT(i,t,n)),n!==void 0?((o=(a=t)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:t._$Cl=l),l!==void 0&&(e=bm(i,l._$AS(i,e.values),l,n)),e}class Zae{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:s}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:_m).importNode(n,!0);Rp.currentNode=r;let o=Rp.nextNode(),a=0,l=0,c=s[0];for(;c!==void 0;){if(a===c.index){let h;c.type===2?h=new tw(o,o.nextSibling,this,e):c.type===1?h=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(h=new ele(o,this,e)),this.u.push(h),c=s[++l]}a!==(c==null?void 0:c.index)&&(o=Rp.nextNode(),a++)}return r}p(e){let t=0;for(const n of this.u)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class tw{constructor(e,t,n,s){var r;this.type=2,this._$AH=Zn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cm=(r=s==null?void 0:s.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=bm(this,e,t),mv(e)?e===Zn||e==null||e===""?(this._$AH!==Zn&&this._$AR(),this._$AH=Zn):e!==this._$AH&&e!==_v&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):qae(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==Zn&&mv(this._$AH)?this._$AA.nextSibling.data=e:this.T(_m.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:s}=e,r=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=_T.createElement(s.h,this.options)),s);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(n);else{const o=new Zae(r,this),a=o.v(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let t=s6.get(e.strings);return t===void 0&&s6.set(e.strings,t=new _T(e)),t}k(e){R$(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,s=0;for(const r of e)s===t.length?t.push(n=new tw(this.O(pv()),this.O(pv()),this,this.options)):n=t[s],n._$AI(r),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,t);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class Ck{constructor(e,t,n,s,r){this.type=1,this._$AH=Zn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Zn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,s){const r=this.strings;let o=!1;if(r===void 0)e=bm(this,e,t,0),o=!mv(e)||e!==this._$AH&&e!==_v,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=bm(this,a[n+l],t,l),c===_v&&(c=this._$AH[l]),o||(o=!mv(c)||c!==this._$AH[l]),c===Zn?e=Zn:e!==Zn&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===Zn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Yae extends Ck{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Zn?void 0:e}}const Qae=mm?mm.emptyScript:"";class Xae extends Ck{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Zn?this.element.setAttribute(this.name,Qae):this.element.removeAttribute(this.name)}}class Jae extends Ck{constructor(e,t,n,s,r){super(e,t,n,s,r),this.type=5}_$AI(e,t=this){var n;if((e=(n=bm(this,e,t,0))!==null&&n!==void 0?n:Zn)===_v)return;const s=this._$AH,r=e===Zn&&s!==Zn||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,o=e!==Zn&&(s===Zn||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;typeof this._$AH=="function"?this._$AH.call((n=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}class ele{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){bm(this,e)}}const r6=ex.litHtmlPolyfillSupport;r6==null||r6(_T,tw),((K2=ex.litHtmlVersions)!==null&&K2!==void 0?K2:ex.litHtmlVersions=[]).push("2.4.0");const o6=(i,e,t)=>{var n,s;const r=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:e;let o=r._$litPart$;if(o===void 0){const a=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:null;r._$litPart$=o=new tw(e.insertBefore(pv(),a),a,void 0,t??{})}return o._$AI(i),o};function tle(i,e){var t=i.getBoundingClientRect();return[e.clientX-t.left-i.clientLeft,e.clientY-t.top-i.clientTop]}function tx(i,e){return i.length==e.length&&i.every((t,n)=>i[n]===e[n])}function _l(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}function iw(i){return i[i.length-1]}class ile{constructor(e){this.container=e,this.element=document.createElement("div"),this.element.className="tooltip",this._visible=!0,this.container.appendChild(this.element),this._previousTooltipDatum=void 0,this.enabledStack=[!0],this._penaltyUntil=0,this._lastCoords=void 0,this._previousMove=0,this.clear()}set visible(e){e!=this._visible&&(this.element.style.display=e?null:"none",this._visible=e)}get visible(){return this._visible}get enabled(){return iw(this.enabledStack)??!0}pushEnabledState(e){this.enabledStack.push(e),e||(this.visible=!1)}popEnabledState(){this.enabledStack.pop()}handleMouseMove(e){this.mouseCoords=tle(this.container,e);const t=performance.now();!this.visible&&!this._isPenalty()&&t-this._previousMove>500&&(this._penaltyUntil=t+70),this._lastCoords&&nle(this.mouseCoords,this._lastCoords)>20&&(this._penaltyUntil=t+400),this._lastCoords=this.mouseCoords,this.visible&&this.updatePlacement(),this._previousMove=t}updatePlacement(){const[e,t]=this.mouseCoords;let n=e+20;n>this.container.clientWidth-this.element.offsetWidth&&(n=e-20-this.element.offsetWidth),this.element.style.left=n+"px",this.element.style.top=Math.min(t+20,this.container.clientHeight-this.element.offsetHeight)+"px"}setContent(e){if(!e||!this.enabled||this._isPenalty()){this.visible&&(o6("",this.element),this.visible=!1),this._previousTooltipDatum=void 0;return}o6(e,this.element),this.visible=!0,this.updatePlacement()}clear(){this._previousTooltipDatum=void 0,this.setContent(void 0)}updateWithDatum(e,t){e!==this._previousTooltipDatum&&(this._previousTooltipDatum=e,t||(t=n=>Promise.resolve(Th`${JSON.stringify(n)}`)),t(e).then(n=>this.setContent(n)).catch(n=>{if(n!=="debounced")throw n}))}_isPenalty(){return this._penaltyUntil&&this._penaltyUntil>performance.now()}}function nle(i,e){let t=0;for(let n=0;n<i.length;n++)t+=(i[n]-e[n])**2;return Math.sqrt(t)}const sle="RawCode",rle="Literal",ole="Property",ale="Identifier",lle="ArrayExpression",cle="BinaryExpression",hle="CallExpression",ule="ConditionalExpression",dle="LogicalExpression",fle="MemberExpression",gle="ObjectExpression",ple="UnaryExpression";function Ia(i){this.type=i}Ia.prototype.visit=function(i){let e,t,n;if(i(this))return 1;for(e=mle(this),t=0,n=e.length;t<n;++t)if(e[t].visit(i))return 1};function mle(i){switch(i.type){case lle:return i.elements;case cle:case dle:return[i.left,i.right];case hle:return[i.callee].concat(i.arguments);case ule:return[i.test,i.consequent,i.alternate];case fle:return[i.object,i.property];case gle:return i.properties;case ole:return[i.key,i.value];case ple:return[i.argument];case ale:case rle:case sle:default:return[]}}var Wl,Be,le,Ls,li,Sk=1,nw=2,mf=3,Pu=4,xk=5,Jf=6,ur=7,sw=8,_le=9;Wl={};Wl[Sk]="Boolean";Wl[nw]="<end>";Wl[mf]="Identifier";Wl[Pu]="Keyword";Wl[xk]="Null";Wl[Jf]="Numeric";Wl[ur]="Punctuator";Wl[sw]="String";Wl[_le]="RegularExpression";var ble="ArrayExpression",vle="BinaryExpression",wle="CallExpression",yle="ConditionalExpression",F$="Identifier",Cle="Literal",Sle="LogicalExpression",xle="MemberExpression",Dle="ObjectExpression",kle="Property",Lle="UnaryExpression",Qn="Unexpected token %0",Ale="Unexpected number",Ele="Unexpected string",Ile="Unexpected identifier",Tle="Unexpected reserved word",Nle="Unexpected end of input",bT="Invalid regular expression",Z2="Invalid regular expression: missing /",B$="Octal literals are not allowed in strict mode.",Mle="Duplicate data property in object literal not allowed in strict mode",ls="ILLEGAL",bv="Disabled.",Rle=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ole=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Dk(i,e){if(!i)throw new Error("ASSERT: "+e)}function fc(i){return i>=48&&i<=57}function WR(i){return"0123456789abcdefABCDEF".indexOf(i)>=0}function ob(i){return"01234567".indexOf(i)>=0}function Ple(i){return i===32||i===9||i===11||i===12||i===160||i>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(i)>=0}function vv(i){return i===10||i===13||i===8232||i===8233}function rw(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i===92||i>=128&&Rle.test(String.fromCharCode(i))}function ix(i){return i===36||i===95||i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||i===92||i>=128&&Ole.test(String.fromCharCode(i))}const Fle={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function V$(){for(;le<Ls;){const i=Be.charCodeAt(le);if(Ple(i)||vv(i))++le;else break}}function vT(i){var e,t,n,s=0;for(t=i==="u"?4:2,e=0;e<t;++e)le<Ls&&WR(Be[le])?(n=Be[le++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase())):Yt({},Qn,ls);return String.fromCharCode(s)}function Ble(){var i,e,t,n;for(i=Be[le],e=0,i==="}"&&Yt({},Qn,ls);le<Ls&&(i=Be[le++],!!WR(i));)e=e*16+"0123456789abcdef".indexOf(i.toLowerCase());return(e>1114111||i!=="}")&&Yt({},Qn,ls),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(t,n))}function W$(){var i,e;for(i=Be.charCodeAt(le++),e=String.fromCharCode(i),i===92&&(Be.charCodeAt(le)!==117&&Yt({},Qn,ls),++le,i=vT("u"),(!i||i==="\\"||!rw(i.charCodeAt(0)))&&Yt({},Qn,ls),e=i);le<Ls&&(i=Be.charCodeAt(le),!!ix(i));)++le,e+=String.fromCharCode(i),i===92&&(e=e.substr(0,e.length-1),Be.charCodeAt(le)!==117&&Yt({},Qn,ls),++le,i=vT("u"),(!i||i==="\\"||!ix(i.charCodeAt(0)))&&Yt({},Qn,ls),e+=i);return e}function Vle(){var i,e;for(i=le++;le<Ls;){if(e=Be.charCodeAt(le),e===92)return le=i,W$();if(ix(e))++le;else break}return Be.slice(i,le)}function Wle(){var i,e,t;return i=le,e=Be.charCodeAt(le)===92?W$():Vle(),e.length===1?t=mf:Fle.hasOwnProperty(e)?t=Pu:e==="null"?t=xk:e==="true"||e==="false"?t=Sk:t=mf,{type:t,value:e,start:i,end:le}}function Y2(){var i=le,e=Be.charCodeAt(le),t,n=Be[le],s,r,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++le,{type:ur,value:String.fromCharCode(e),start:i,end:le};default:if(t=Be.charCodeAt(le+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return le+=2,{type:ur,value:String.fromCharCode(e)+String.fromCharCode(t),start:i,end:le};case 33:case 61:return le+=2,Be.charCodeAt(le)===61&&++le,{type:ur,value:Be.slice(i,le),start:i,end:le}}}if(o=Be.substr(le,4),o===">>>=")return le+=4,{type:ur,value:o,start:i,end:le};if(r=o.substr(0,3),r===">>>"||r==="<<="||r===">>=")return le+=3,{type:ur,value:r,start:i,end:le};if(s=r.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return le+=2,{type:ur,value:s,start:i,end:le};if(s==="//"&&Yt({},Qn,ls),"<>=!+-*%&|^/".indexOf(n)>=0)return++le,{type:ur,value:n,start:i,end:le};Yt({},Qn,ls)}function zle(i){let e="";for(;le<Ls&&WR(Be[le]);)e+=Be[le++];return e.length===0&&Yt({},Qn,ls),rw(Be.charCodeAt(le))&&Yt({},Qn,ls),{type:Jf,value:parseInt("0x"+e,16),start:i,end:le}}function Hle(i){let e="0"+Be[le++];for(;le<Ls&&ob(Be[le]);)e+=Be[le++];return(rw(Be.charCodeAt(le))||fc(Be.charCodeAt(le)))&&Yt({},Qn,ls),{type:Jf,value:parseInt(e,8),octal:!0,start:i,end:le}}function a6(){var i,e,t;if(t=Be[le],Dk(fc(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=le,i="",t!=="."){if(i=Be[le++],t=Be[le],i==="0"){if(t==="x"||t==="X")return++le,zle(e);if(ob(t))return Hle(e);t&&fc(t.charCodeAt(0))&&Yt({},Qn,ls)}for(;fc(Be.charCodeAt(le));)i+=Be[le++];t=Be[le]}if(t==="."){for(i+=Be[le++];fc(Be.charCodeAt(le));)i+=Be[le++];t=Be[le]}if(t==="e"||t==="E")if(i+=Be[le++],t=Be[le],(t==="+"||t==="-")&&(i+=Be[le++]),fc(Be.charCodeAt(le)))for(;fc(Be.charCodeAt(le));)i+=Be[le++];else Yt({},Qn,ls);return rw(Be.charCodeAt(le))&&Yt({},Qn,ls),{type:Jf,value:parseFloat(i),start:e,end:le}}function Ule(){var i="",e,t,n,s,r=!1;for(e=Be[le],Dk(e==="'"||e==='"',"String literal must starts with a quote"),t=le,++le;le<Ls;)if(n=Be[le++],n===e){e="";break}else if(n==="\\")if(n=Be[le++],!n||!vv(n.charCodeAt(0)))switch(n){case"u":case"x":Be[le]==="{"?(++le,i+=Ble()):i+=vT(n);break;case"n":i+=`
`;break;case"r":i+="\r";break;case"t":i+="	";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:ob(n)?(s="01234567".indexOf(n),s!==0&&(r=!0),le<Ls&&ob(Be[le])&&(r=!0,s=s*8+"01234567".indexOf(Be[le++]),"0123".indexOf(n)>=0&&le<Ls&&ob(Be[le])&&(s=s*8+"01234567".indexOf(Be[le++]))),i+=String.fromCharCode(s)):i+=n;break}else n==="\r"&&Be[le]===`
`&&++le;else{if(vv(n.charCodeAt(0)))break;i+=n}return e!==""&&Yt({},Qn,ls),{type:sw,value:i,octal:r,start:t,end:le}}function $le(i,e){let t=i;e.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,s)=>{if(parseInt(s,16)<=1114111)return"x";Yt({},bT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t)}catch{Yt({},bT)}try{return new RegExp(i,e)}catch{return null}}function jle(){var i,e,t,n,s;for(i=Be[le],Dk(i==="/","Regular expression literal must start with a slash"),e=Be[le++],t=!1,n=!1;le<Ls;)if(i=Be[le++],e+=i,i==="\\")i=Be[le++],vv(i.charCodeAt(0))&&Yt({},Z2),e+=i;else if(vv(i.charCodeAt(0)))Yt({},Z2);else if(t)i==="]"&&(t=!1);else if(i==="/"){n=!0;break}else i==="["&&(t=!0);return n||Yt({},Z2),s=e.substr(1,e.length-2),{value:s,literal:e}}function qle(){var i,e,t;for(e="",t="";le<Ls&&(i=Be[le],!!ix(i.charCodeAt(0)));)++le,i==="\\"&&le<Ls?Yt({},Qn,ls):(t+=i,e+=i);return t.search(/[^gimuy]/g)>=0&&Yt({},bT,t),{value:t,literal:e}}function Gle(){var i,e,t,n;return li=null,V$(),i=le,e=jle(),t=qle(),n=$le(e.value,t.value),{literal:e.literal+t.literal,value:n,regex:{pattern:e.value,flags:t.value},start:i,end:le}}function Kle(i){return i.type===mf||i.type===Pu||i.type===Sk||i.type===xk}function z$(){if(V$(),le>=Ls)return{type:nw,start:le,end:le};const i=Be.charCodeAt(le);return rw(i)?Wle():i===40||i===41||i===59?Y2():i===39||i===34?Ule():i===46?fc(Be.charCodeAt(le+1))?a6():Y2():fc(i)?a6():Y2()}function dr(){const i=li;return le=i.end,li=z$(),le=i.end,i}function H$(){const i=le;li=z$(),le=i}function Zle(i){const e=new Ia(ble);return e.elements=i,e}function l6(i,e,t){const n=new Ia(i==="||"||i==="&&"?Sle:vle);return n.operator=i,n.left=e,n.right=t,n}function Yle(i,e){const t=new Ia(wle);return t.callee=i,t.arguments=e,t}function Qle(i,e,t){const n=new Ia(yle);return n.test=i,n.consequent=e,n.alternate=t,n}function zR(i){const e=new Ia(F$);return e.name=i,e}function O_(i){const e=new Ia(Cle);return e.value=i.value,e.raw=Be.slice(i.start,i.end),i.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=i.regex),e}function c6(i,e,t){const n=new Ia(xle);return n.computed=i==="[",n.object=e,n.property=t,n.computed||(t.member=!0),n}function Xle(i){const e=new Ia(Dle);return e.properties=i,e}function h6(i,e,t){const n=new Ia(kle);return n.key=e,n.value=t,n.kind=i,n}function Jle(i,e){const t=new Ia(Lle);return t.operator=i,t.argument=e,t.prefix=!0,t}function Yt(i,e){var t,n=Array.prototype.slice.call(arguments,2),s=e.replace(/%(\d)/g,(r,o)=>(Dk(o<n.length,"Message reference must be in range"),n[o]));throw t=new Error(s),t.index=le,t.description=s,t}function kk(i){i.type===nw&&Yt(i,Nle),i.type===Jf&&Yt(i,Ale),i.type===sw&&Yt(i,Ele),i.type===mf&&Yt(i,Ile),i.type===Pu&&Yt(i,Tle),Yt(i,Qn,i.value)}function As(i){const e=dr();(e.type!==ur||e.value!==i)&&kk(e)}function Oi(i){return li.type===ur&&li.value===i}function Q2(i){return li.type===Pu&&li.value===i}function ece(){const i=[];for(le=li.start,As("[");!Oi("]");)Oi(",")?(dr(),i.push(null)):(i.push(_f()),Oi("]")||As(","));return dr(),Zle(i)}function u6(){le=li.start;const i=dr();return i.type===sw||i.type===Jf?(i.octal&&Yt(i,B$),O_(i)):zR(i.value)}function tce(){var i,e,t,n;if(le=li.start,i=li,i.type===mf)return t=u6(),As(":"),n=_f(),h6("init",t,n);if(i.type===nw||i.type===ur)kk(i);else return e=u6(),As(":"),n=_f(),h6("init",e,n)}function ice(){var i=[],e,t,n,s={},r=String;for(le=li.start,As("{");!Oi("}");)e=tce(),e.key.type===F$?t=e.key.name:t=r(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(s,n)?Yt({},Mle):s[n]=!0,i.push(e),Oi("}")||As(",");return As("}"),Xle(i)}function nce(){As("(");const i=HR();return As(")"),i}const sce={if:1};function rce(){var i,e,t;if(Oi("("))return nce();if(Oi("["))return ece();if(Oi("{"))return ice();if(i=li.type,le=li.start,i===mf||sce[li.value])t=zR(dr().value);else if(i===sw||i===Jf)li.octal&&Yt(li,B$),t=O_(dr());else{if(i===Pu)throw new Error(bv);i===Sk?(e=dr(),e.value=e.value==="true",t=O_(e)):i===xk?(e=dr(),e.value=null,t=O_(e)):Oi("/")||Oi("/=")?(t=O_(Gle()),H$()):kk(dr())}return t}function oce(){const i=[];if(As("("),!Oi(")"))for(;le<Ls&&(i.push(_f()),!Oi(")"));)As(",");return As(")"),i}function ace(){le=li.start;const i=dr();return Kle(i)||kk(i),zR(i.value)}function lce(){return As("."),ace()}function cce(){As("[");const i=HR();return As("]"),i}function hce(){var i,e,t;for(i=rce();;)if(Oi("."))t=lce(),i=c6(".",i,t);else if(Oi("("))e=oce(),i=Yle(i,e);else if(Oi("["))t=cce(),i=c6("[",i,t);else break;return i}function d6(){const i=hce();if(li.type===ur&&(Oi("++")||Oi("--")))throw new Error(bv);return i}function RC(){var i,e;if(li.type!==ur&&li.type!==Pu)e=d6();else{if(Oi("++")||Oi("--"))throw new Error(bv);if(Oi("+")||Oi("-")||Oi("~")||Oi("!"))i=dr(),e=RC(),e=Jle(i.value,e);else{if(Q2("delete")||Q2("void")||Q2("typeof"))throw new Error(bv);e=d6()}}return e}function f6(i){let e=0;if(i.type!==ur&&i.type!==Pu)return 0;switch(i.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function uce(){var i,e,t,n,s,r,o,a,l,c;if(i=li,l=RC(),n=li,s=f6(n),s===0)return l;for(n.prec=s,dr(),e=[i,li],o=RC(),r=[l,n,o];(s=f6(li))>0;){for(;r.length>2&&s<=r[r.length-2].prec;)o=r.pop(),a=r.pop().value,l=r.pop(),e.pop(),t=l6(a,l,o),r.push(t);n=dr(),n.prec=s,r.push(n),e.push(li),t=RC(),r.push(t)}for(c=r.length-1,t=r[c],e.pop();c>1;)e.pop(),t=l6(r[c-1].value,r[c-2],t),c-=2;return t}function _f(){var i,e,t;return i=uce(),Oi("?")&&(dr(),e=_f(),As(":"),t=_f(),i=Qle(i,e,t)),i}function HR(){const i=_f();if(Oi(","))throw new Error(bv);return i}function dce(i){Be=i,le=0,Ls=Be.length,li=null,H$();const e=HR();if(li.type!==nw)throw new Error("Unexpect token after expression.");return e}var fce={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function gce(i){function e(o,a,l,c){let h=i(a[0]);return l&&(h=l+"("+h+")",l.lastIndexOf("new ",0)===0&&(h="("+h+")")),h+"."+o+(c<0?"":c===0?"()":"("+a.slice(1).map(i).join(",")+")")}function t(o,a,l){return c=>e(o,c,a,l)}const n="new Date",s="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Xi("Missing arguments to clamp function."),o.length>3&&Xi("Too many arguments to clamp function.");const a=o.map(i);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",s,0),lower:t("toLowerCase",s,0),substring:t("substring",s),split:t("split",s),trim:t("trim",s,0),regexp:r,test:t("test",r),if:function(o){o.length<3&&Xi("Missing arguments to if function."),o.length>3&&Xi("Too many arguments to if function.");const a=o.map(i);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function pce(i){const e=i&&i.length-1;return e&&(i[0]==='"'&&i[e]==='"'||i[0]==="'"&&i[e]==="'")?i.slice(1,-1):i}function mce(i){i=i||{};const e=i.allowed?qS(i.allowed):{},t=i.forbidden?qS(i.forbidden):{},n=i.constants||fce,s=(i.functions||gce)(u),r=i.globalvar,o=i.fieldvar,a=Sr(r)?r:g=>`${r}["${g}"]`;let l={},c={},h=0;function u(g){if(en(g))return g;const p=d[g.type];return p==null&&Xi("Unsupported type: "+g.type),p(g)}const d={Literal:g=>g.raw,Identifier:g=>{const p=g.name;return h>0?p:Ld(t,p)?Xi("Illegal identifier: "+p):Ld(n,p)?n[p]:Ld(e,p)?p:(l[p]=1,a(p))},MemberExpression:g=>{const p=!g.computed,m=u(g.object);p&&(h+=1);const v=u(g.property);return m===o&&(c[pce(v)]=1),p&&(h-=1),m+(p?"."+v:"["+v+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&Xi("Illegal callee type: "+g.callee.type);const p=g.callee.name,m=g.arguments,v=Ld(s,p)&&s[p];return v||Xi("Unrecognized function: "+p),Sr(v)?v(m):v+"("+m.map(u).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(u).join(",")+"]",BinaryExpression:g=>"("+u(g.left)+" "+g.operator+" "+u(g.right)+")",UnaryExpression:g=>"("+g.operator+u(g.argument)+")",ConditionalExpression:g=>"("+u(g.test)+"?"+u(g.consequent)+":"+u(g.alternate)+")",LogicalExpression:g=>"("+u(g.left)+g.operator+u(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(u).join(",")+"}",Property:g=>{h+=1;const p=u(g.key);return h-=1,p+":"+u(g.value)}};function f(g){const p={code:u(g),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},p}return f.functions=s,f.constants=n,f}function UR(i,e={}){const t=mce({forbidden:[],allowed:["datum"],globalvar:"global",fieldvar:"datum"});try{const n=dce(i),s=t(n),r=Function("datum","global",`"use strict"; return (${s.code});`),o=a=>r(a,e);return o.fields=s.fields,o}catch(n){throw new Error(`Invalid expression: ${i}, ${n.message}`)}}function zl(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function Fu(i,e){switch(arguments.length){case 0:break;case 1:{typeof i=="function"?this.interpolator(i):this.range(i);break}default:{this.domain(i),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const wT=Symbol("implicit");function $R(){var i=new ff,e=[],t=[],n=wT;function s(r){let o=i.get(r);if(o===void 0){if(n!==wT)return n;i.set(r,o=e.push(r)-1)}return t[o%t.length]}return s.domain=function(r){if(!arguments.length)return e.slice();e=[],i=new ff;for(const o of r)i.has(o)||i.set(o,e.push(o)-1);return s},s.range=function(r){return arguments.length?(t=Array.from(r),s):t.slice()},s.unknown=function(r){return arguments.length?(n=r,s):n},s.copy=function(){return $R(e,t).unknown(n)},zl.apply(s,arguments),s}function f0(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function ow(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function Bu(){}var bf=.7,vm=1/bf,Op="\\s*([+-]?\\d+)\\s*",wv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_ce=/^#([0-9a-f]{3,8})$/,bce=new RegExp(`^rgb\\(${Op},${Op},${Op}\\)$`),vce=new RegExp(`^rgb\\(${bl},${bl},${bl}\\)$`),wce=new RegExp(`^rgba\\(${Op},${Op},${Op},${wv}\\)$`),yce=new RegExp(`^rgba\\(${bl},${bl},${bl},${wv}\\)$`),Cce=new RegExp(`^hsl\\(${wv},${bl},${bl}\\)$`),Sce=new RegExp(`^hsla\\(${wv},${bl},${bl},${wv}\\)$`),g6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f0(Bu,fu,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:p6,formatHex:p6,formatHex8:xce,formatHsl:Dce,formatRgb:m6,toString:m6});function p6(){return this.rgb().formatHex()}function xce(){return this.rgb().formatHex8()}function Dce(){return U$(this).formatHsl()}function m6(){return this.rgb().formatRgb()}function fu(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=_ce.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?_6(e):t===3?new Xn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?ay(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?ay(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bce.exec(i))?new Xn(e[1],e[2],e[3],1):(e=vce.exec(i))?new Xn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wce.exec(i))?ay(e[1],e[2],e[3],e[4]):(e=yce.exec(i))?ay(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cce.exec(i))?w6(e[1],e[2]/100,e[3]/100,1):(e=Sce.exec(i))?w6(e[1],e[2]/100,e[3]/100,e[4]):g6.hasOwnProperty(i)?_6(g6[i]):i==="transparent"?new Xn(NaN,NaN,NaN,0):null}function _6(i){return new Xn(i>>16&255,i>>8&255,i&255,1)}function ay(i,e,t,n){return n<=0&&(i=e=t=NaN),new Xn(i,e,t,n)}function jR(i){return i instanceof Bu||(i=fu(i)),i?(i=i.rgb(),new Xn(i.r,i.g,i.b,i.opacity)):new Xn}function nx(i,e,t,n){return arguments.length===1?jR(i):new Xn(i,e,t,n??1)}function Xn(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}f0(Xn,nx,ow(Bu,{brighter(i){return i=i==null?vm:Math.pow(vm,i),new Xn(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?bf:Math.pow(bf,i),new Xn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Xn(qd(this.r),qd(this.g),qd(this.b),sx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b6,formatHex:b6,formatHex8:kce,formatRgb:v6,toString:v6}));function b6(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}`}function kce(){return`#${Ad(this.r)}${Ad(this.g)}${Ad(this.b)}${Ad((isNaN(this.opacity)?1:this.opacity)*255)}`}function v6(){const i=sx(this.opacity);return`${i===1?"rgb(":"rgba("}${qd(this.r)}, ${qd(this.g)}, ${qd(this.b)}${i===1?")":`, ${i})`}`}function sx(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function qd(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ad(i){return i=qd(i),(i<16?"0":"")+i.toString(16)}function w6(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new ia(i,e,t,n)}function U$(i){if(i instanceof ia)return new ia(i.h,i.s,i.l,i.opacity);if(i instanceof Bu||(i=fu(i)),!i)return new ia;if(i instanceof ia)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,s=Math.min(e,t,n),r=Math.max(e,t,n),o=NaN,a=r-s,l=(r+s)/2;return a?(e===r?o=(t-n)/a+(t<n)*6:t===r?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?r+s:2-r-s,o*=60):a=l>0&&l<1?0:o,new ia(o,a,l,i.opacity)}function yT(i,e,t,n){return arguments.length===1?U$(i):new ia(i,e,t,n??1)}function ia(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}f0(ia,yT,ow(Bu,{brighter(i){return i=i==null?vm:Math.pow(vm,i),new ia(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?bf:Math.pow(bf,i),new ia(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,s=2*t-n;return new Xn(X2(i>=240?i-240:i+120,s,n),X2(i,s,n),X2(i<120?i+240:i-120,s,n),this.opacity)},clamp(){return new ia(y6(this.h),ly(this.s),ly(this.l),sx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=sx(this.opacity);return`${i===1?"hsl(":"hsla("}${y6(this.h)}, ${ly(this.s)*100}%, ${ly(this.l)*100}%${i===1?")":`, ${i})`}`}}));function y6(i){return i=(i||0)%360,i<0?i+360:i}function ly(i){return Math.max(0,Math.min(1,i||0))}function X2(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const $$=Math.PI/180,j$=180/Math.PI,rx=18,q$=.96422,G$=1,K$=.82521,Z$=4/29,Pp=6/29,Y$=3*Pp*Pp,Lce=Pp*Pp*Pp;function Q$(i){if(i instanceof vl)return new vl(i.l,i.a,i.b,i.opacity);if(i instanceof Ic)return X$(i);i instanceof Xn||(i=jR(i));var e=iA(i.r),t=iA(i.g),n=iA(i.b),s=J2((.2225045*e+.7168786*t+.0606169*n)/G$),r,o;return e===t&&t===n?r=o=s:(r=J2((.4360747*e+.3850649*t+.1430804*n)/q$),o=J2((.0139322*e+.0971045*t+.7141733*n)/K$)),new vl(116*s-16,500*(r-s),200*(s-o),i.opacity)}function CT(i,e,t,n){return arguments.length===1?Q$(i):new vl(i,e,t,n??1)}function vl(i,e,t,n){this.l=+i,this.a=+e,this.b=+t,this.opacity=+n}f0(vl,CT,ow(Bu,{brighter(i){return new vl(this.l+rx*(i??1),this.a,this.b,this.opacity)},darker(i){return new vl(this.l-rx*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,e=isNaN(this.a)?i:i+this.a/500,t=isNaN(this.b)?i:i-this.b/200;return e=q$*eA(e),i=G$*eA(i),t=K$*eA(t),new Xn(tA(3.1338561*e-1.6168667*i-.4906146*t),tA(-.9787684*e+1.9161415*i+.033454*t),tA(.0719453*e-.2289914*i+1.4052427*t),this.opacity)}}));function J2(i){return i>Lce?Math.pow(i,1/3):i/Y$+Z$}function eA(i){return i>Pp?i*i*i:Y$*(i-Z$)}function tA(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function iA(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Ace(i){if(i instanceof Ic)return new Ic(i.h,i.c,i.l,i.opacity);if(i instanceof vl||(i=Q$(i)),i.a===0&&i.b===0)return new Ic(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var e=Math.atan2(i.b,i.a)*j$;return new Ic(e<0?e+360:e,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function ST(i,e,t,n){return arguments.length===1?Ace(i):new Ic(i,e,t,n??1)}function Ic(i,e,t,n){this.h=+i,this.c=+e,this.l=+t,this.opacity=+n}function X$(i){if(isNaN(i.h))return new vl(i.l,0,0,i.opacity);var e=i.h*$$;return new vl(i.l,Math.cos(e)*i.c,Math.sin(e)*i.c,i.opacity)}f0(Ic,ST,ow(Bu,{brighter(i){return new Ic(this.h,this.c,this.l+rx*(i??1),this.opacity)},darker(i){return new Ic(this.h,this.c,this.l-rx*(i??1),this.opacity)},rgb(){return X$(this).rgb()}}));var J$=-.14861,qR=1.78277,GR=-.29227,Lk=-.90649,yv=1.97294,C6=yv*Lk,S6=yv*qR,x6=qR*GR-Lk*J$;function Ece(i){if(i instanceof Gd)return new Gd(i.h,i.s,i.l,i.opacity);i instanceof Xn||(i=jR(i));var e=i.r/255,t=i.g/255,n=i.b/255,s=(x6*n+C6*e-S6*t)/(x6+C6-S6),r=n-s,o=(yv*(t-s)-GR*r)/Lk,a=Math.sqrt(o*o+r*r)/(yv*s*(1-s)),l=a?Math.atan2(o,r)*j$-120:NaN;return new Gd(l<0?l+360:l,a,s,i.opacity)}function xT(i,e,t,n){return arguments.length===1?Ece(i):new Gd(i,e,t,n??1)}function Gd(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}f0(Gd,xT,ow(Bu,{brighter(i){return i=i==null?vm:Math.pow(vm,i),new Gd(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?bf:Math.pow(bf,i),new Gd(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=isNaN(this.h)?0:(this.h+120)*$$,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(i),s=Math.sin(i);return new Xn(255*(e+t*(J$*n+qR*s)),255*(e+t*(GR*n+Lk*s)),255*(e+t*(yv*n)),this.opacity)}}));function ej(i,e,t,n,s){var r=i*i,o=r*i;return((1-3*i+3*r-o)*e+(4-6*r+3*o)*t+(1+3*i+3*r-3*o)*n+o*s)/6}function tj(i){var e=i.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=i[n],r=i[n+1],o=n>0?i[n-1]:2*s-r,a=n<e-1?i[n+2]:2*r-s;return ej((t-n/e)*e,o,s,r,a)}}function ij(i){var e=i.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e),s=i[(n+e-1)%e],r=i[n%e],o=i[(n+1)%e],a=i[(n+2)%e];return ej((t-n/e)*e,s,r,o,a)}}const Ak=i=>()=>i;function nj(i,e){return function(t){return i+t*e}}function Ice(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function Ek(i,e){var t=e-i;return t?nj(i,t>180||t<-180?t-360*Math.round(t/360):t):Ak(isNaN(i)?e:i)}function Tce(i){return(i=+i)==1?Jn:function(e,t){return t-e?Ice(e,t,i):Ak(isNaN(e)?t:e)}}function Jn(i,e){var t=e-i;return t?nj(i,t):Ak(isNaN(i)?e:i)}const DT=function i(e){var t=Tce(e);function n(s,r){var o=t((s=nx(s)).r,(r=nx(r)).r),a=t(s.g,r.g),l=t(s.b,r.b),c=Jn(s.opacity,r.opacity);return function(h){return s.r=o(h),s.g=a(h),s.b=l(h),s.opacity=c(h),s+""}}return n.gamma=i,n}(1);function sj(i){return function(e){var t=e.length,n=new Array(t),s=new Array(t),r=new Array(t),o,a;for(o=0;o<t;++o)a=nx(e[o]),n[o]=a.r||0,s[o]=a.g||0,r[o]=a.b||0;return n=i(n),s=i(s),r=i(r),a.opacity=1,function(l){return a.r=n(l),a.g=s(l),a.b=r(l),a+""}}}var Nce=sj(tj),Mce=sj(ij);function KR(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),s;return function(r){for(s=0;s<t;++s)n[s]=i[s]*(1-r)+e[s]*r;return n}}function rj(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Rce(i,e){return(rj(e)?KR:oj)(i,e)}function oj(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,s=new Array(n),r=new Array(t),o;for(o=0;o<n;++o)s[o]=Vu(i[o],e[o]);for(;o<t;++o)r[o]=e[o];return function(a){for(o=0;o<n;++o)r[o]=s[o](a);return r}}function aj(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function Jo(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function lj(i,e){var t={},n={},s;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in i?t[s]=Vu(i[s],e[s]):n[s]=e[s];return function(r){for(s in t)n[s]=t[s](r);return n}}var kT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nA=new RegExp(kT.source,"g");function Oce(i){return function(){return i}}function Pce(i){return function(e){return i(e)+""}}function cj(i,e){var t=kT.lastIndex=nA.lastIndex=0,n,s,r,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=kT.exec(i))&&(s=nA.exec(e));)(r=s.index)>t&&(r=e.slice(t,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Jo(n,s)})),t=nA.lastIndex;return t<e.length&&(r=e.slice(t),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?Pce(l[0].x):Oce(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}function Vu(i,e){var t=typeof e,n;return e==null||t==="boolean"?Ak(e):(t==="number"?Jo:t==="string"?(n=fu(e))?(e=n,DT):cj:e instanceof fu?DT:e instanceof Date?aj:rj(e)?KR:Array.isArray(e)?oj:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lj:Jo)(i,e)}function Fce(i){var e=i.length;return function(t){return i[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}function Bce(i,e){var t=Ek(+i,+e);return function(n){var s=t(n);return s-360*Math.floor(s/360)}}function aw(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}var D6=180/Math.PI,hj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uj(i,e,t,n,s,r){var o,a,l;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(l=i*t+e*n)&&(t-=i*l,n-=e*l),(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a,l/=a),i*n<e*t&&(i=-i,e=-e,l=-l,o=-o),{translateX:s,translateY:r,rotate:Math.atan2(e,i)*D6,skewX:Math.atan(l)*D6,scaleX:o,scaleY:a}}var cy;function Vce(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?hj:uj(e.a,e.b,e.c,e.d,e.e,e.f)}function Wce(i){return i==null||(cy||(cy=document.createElementNS("http://www.w3.org/2000/svg","g")),cy.setAttribute("transform",i),!(i=cy.transform.baseVal.consolidate()))?hj:(i=i.matrix,uj(i.a,i.b,i.c,i.d,i.e,i.f))}function dj(i,e,t,n){function s(c){return c.length?c.pop()+" ":""}function r(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push("translate(",null,e,null,t);g.push({i:p-4,x:Jo(c,u)},{i:p-2,x:Jo(h,d)})}else(u||d)&&f.push("translate("+u+e+d+t)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(s(u)+"rotate(",null,n)-2,x:Jo(c,h)})):h&&u.push(s(u)+"rotate("+h+n)}function a(c,h,u,d){c!==h?d.push({i:u.push(s(u)+"skewX(",null,n)-2,x:Jo(c,h)}):h&&u.push(s(u)+"skewX("+h+n)}function l(c,h,u,d,f,g){if(c!==u||h!==d){var p=f.push(s(f)+"scale(",null,",",null,")");g.push({i:p-4,x:Jo(c,u)},{i:p-2,x:Jo(h,d)})}else(u!==1||d!==1)&&f.push(s(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=i(c),h=i(h),r(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var g=-1,p=d.length,m;++g<p;)u[(m=d[g]).i]=m.x(f);return u.join("")}}}var zce=dj(Vce,"px, ","px)","deg)"),Hce=dj(Wce,", ",")",")"),Uce=1e-12;function k6(i){return((i=Math.exp(i))+1/i)/2}function $ce(i){return((i=Math.exp(i))-1/i)/2}function jce(i){return((i=Math.exp(2*i))-1)/(i+1)}const qce=function i(e,t,n){function s(r,o){var a=r[0],l=r[1],c=r[2],h=o[0],u=o[1],d=o[2],f=h-a,g=u-l,p=f*f+g*g,m,v;if(p<Uce)v=Math.log(d/c)/e,m=function(S){return[a+S*f,l+S*g,c*Math.exp(e*S*v)]};else{var b=Math.sqrt(p),w=(d*d-c*c+n*p)/(2*c*t*b),y=(d*d-c*c-n*p)/(2*d*t*b),x=Math.log(Math.sqrt(w*w+1)-w),L=Math.log(Math.sqrt(y*y+1)-y);v=(L-x)/e,m=function(S){var k=S*v,D=k6(x),T=c/(t*b)*(D*jce(e*k+x)-$ce(x));return[a+T*f,l+T*g,c*D/k6(e*k+x)]}}return m.duration=v*1e3*e/Math.SQRT2,m}return s.rho=function(r){var o=Math.max(.001,+r),a=o*o,l=a*a;return i(o,a,l)},s}(Math.SQRT2,2,4);function fj(i){return function(e,t){var n=i((e=yT(e)).h,(t=yT(t)).h),s=Jn(e.s,t.s),r=Jn(e.l,t.l),o=Jn(e.opacity,t.opacity);return function(a){return e.h=n(a),e.s=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const Gce=fj(Ek);var Kce=fj(Jn);function Zce(i,e){var t=Jn((i=CT(i)).l,(e=CT(e)).l),n=Jn(i.a,e.a),s=Jn(i.b,e.b),r=Jn(i.opacity,e.opacity);return function(o){return i.l=t(o),i.a=n(o),i.b=s(o),i.opacity=r(o),i+""}}function gj(i){return function(e,t){var n=i((e=ST(e)).h,(t=ST(t)).h),s=Jn(e.c,t.c),r=Jn(e.l,t.l),o=Jn(e.opacity,t.opacity);return function(a){return e.h=n(a),e.c=s(a),e.l=r(a),e.opacity=o(a),e+""}}}const Yce=gj(Ek);var Qce=gj(Jn);function pj(i){return function e(t){t=+t;function n(s,r){var o=i((s=xT(s)).h,(r=xT(r)).h),a=Jn(s.s,r.s),l=Jn(s.l,r.l),c=Jn(s.opacity,r.opacity);return function(h){return s.h=o(h),s.s=a(h),s.l=l(Math.pow(h,t)),s.opacity=c(h),s+""}}return n.gamma=e,n}(1)}const Xce=pj(Ek);var Jce=pj(Jn);function ZR(i,e){e===void 0&&(e=i,i=Vu);for(var t=0,n=e.length-1,s=e[0],r=new Array(n<0?0:n);t<n;)r[t]=i(s,s=e[++t]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return r[a](o-a)}}function ehe(i,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=i(n/(e-1));return t}const the=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vu,interpolateArray:Rce,interpolateBasis:tj,interpolateBasisClosed:ij,interpolateCubehelix:Xce,interpolateCubehelixLong:Jce,interpolateDate:aj,interpolateDiscrete:Fce,interpolateHcl:Yce,interpolateHclLong:Qce,interpolateHsl:Gce,interpolateHslLong:Kce,interpolateHue:Bce,interpolateLab:Zce,interpolateNumber:Jo,interpolateNumberArray:KR,interpolateObject:lj,interpolateRgb:DT,interpolateRgbBasis:Nce,interpolateRgbBasisClosed:Mce,interpolateRound:aw,interpolateString:cj,interpolateTransformCss:zce,interpolateTransformSvg:Hce,interpolateZoom:qce,piecewise:ZR,quantize:ehe},Symbol.toStringTag,{value:"Module"}));function ihe(i){return function(){return i}}function LT(i){return+i}var L6=[0,1];function mr(i){return i}function AT(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:ihe(isNaN(e)?NaN:.5)}function nhe(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function she(i,e,t){var n=i[0],s=i[1],r=e[0],o=e[1];return s<n?(n=AT(s,n),r=t(o,r)):(n=AT(n,s),r=t(r,o)),function(a){return r(n(a))}}function rhe(i,e,t){var n=Math.min(i.length,e.length)-1,s=new Array(n),r=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=AT(i[o],i[o+1]),r[o]=t(e[o],e[o+1]);return function(a){var l=d0(i,a,1,n)-1;return r[l](s[l](a))}}function lw(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Ik(){var i=L6,e=L6,t=Vu,n,s,r,o=mr,a,l,c;function h(){var d=Math.min(i.length,e.length);return o!==mr&&(o=nhe(i[0],i[d-1])),a=d>2?rhe:she,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?r:(l||(l=a(i.map(n),e,t)))(n(o(d)))}return u.invert=function(d){return o(s((c||(c=a(e,i.map(n),Jo)))(d)))},u.domain=function(d){return arguments.length?(i=Array.from(d,LT),h()):i.slice()},u.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},u.rangeRound=function(d){return e=Array.from(d),t=aw,h()},u.clamp=function(d){return arguments.length?(o=d?!0:mr,h()):o!==mr},u.interpolate=function(d){return arguments.length?(t=d,h()):t},u.unknown=function(d){return arguments.length?(r=d,u):r},function(d,f){return n=d,s=f,h()}}function mj(){return Ik()(mr,mr)}function _j(i,e,t,n){var s=gf(i,e,t),r;switch(n=hu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(r=c$(s,o))&&(n.precision=r),kR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(r=h$(s,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=r-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(r=l$(s))&&(n.precision=r-(n.type==="%")*2);break}}return ds(n)}function eg(i){var e=i.domain;return i.ticks=function(t){var n=e();return GS(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var s=e();return _j(s[0],s[s.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),s=0,r=n.length-1,o=n[s],a=n[r],l,c,h=10;for(a<o&&(c=o,o=a,a=c,c=s,s=r,r=c);h-- >0;){if(c=r$(o,a,t),c===l)return n[s]=o,n[r]=a,e(n);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function bj(){var i=mj();return i.copy=function(){return lw(i,bj())},zl.apply(i,arguments),eg(i)}function vj(i){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(i=Array.from(n,LT),t):i.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return vj(i).unknown(e)},i=arguments.length?Array.from(i,LT):[0,1],eg(t)}function wj(i,e){i=i.slice();var t=0,n=i.length-1,s=i[t],r=i[n],o;return r<s&&(o=t,t=n,n=o,o=s,s=r,r=o),i[t]=e.floor(s),i[n]=e.ceil(r),i}function A6(i){return Math.log(i)}function E6(i){return Math.exp(i)}function ohe(i){return-Math.log(-i)}function ahe(i){return-Math.exp(-i)}function lhe(i){return isFinite(i)?+("1e"+i):i<0?0:i}function che(i){return i===10?lhe:i===Math.E?Math.exp:e=>Math.pow(i,e)}function hhe(i){return i===Math.E?Math.log:i===10&&Math.log10||i===2&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i)}function I6(i){return(e,t)=>-i(-e,t)}function YR(i){const e=i(A6,E6),t=e.domain;let n=10,s,r;function o(){return s=hhe(n),r=che(n),t()[0]<0?(s=I6(s),r=I6(r),i(ohe,ahe)):i(A6,E6),e}return e.base=function(a){return arguments.length?(n=+a,o()):n},e.domain=function(a){return arguments.length?(t(a),o()):t()},e.ticks=a=>{const l=t();let c=l[0],h=l[l.length-1];const u=h<c;u&&([c,h]=[h,c]);let d=s(c),f=s(h),g,p;const m=a==null?10:+a;let v=[];if(!(n%1)&&f-d<m){if(d=Math.floor(d),f=Math.ceil(f),c>0){for(;d<=f;++d)for(g=1;g<n;++g)if(p=d<0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}}else for(;d<=f;++d)for(g=n-1;g>=1;--g)if(p=d>0?g/r(-d):g*r(d),!(p<c)){if(p>h)break;v.push(p)}v.length*2<m&&(v=GS(c,h,m))}else v=GS(d,f,Math.min(f-d,m)).map(r);return u?v.reverse():v},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=hu(l)).precision==null&&(l.trim=!0),l=ds(l)),a===1/0)return l;const c=Math.max(1,n*a/e.ticks().length);return h=>{let u=h/r(Math.round(s(h)));return u*n<n-.5&&(u*=n),u<=c?l(h):""}},e.nice=()=>t(wj(t(),{floor:a=>r(Math.floor(s(a))),ceil:a=>r(Math.ceil(s(a)))})),e}function QR(){const i=YR(Ik()).domain([1,10]);return i.copy=()=>lw(i,QR()).base(i.base()),zl.apply(i,arguments),i}function T6(i){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/i))}}function N6(i){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*i}}function XR(i){var e=1,t=i(T6(e),N6(e));return t.constant=function(n){return arguments.length?i(T6(e=+n),N6(e)):e},eg(t)}function yj(){var i=XR(Ik());return i.copy=function(){return lw(i,yj()).constant(i.constant())},zl.apply(i,arguments)}function M6(i){return function(e){return e<0?-Math.pow(-e,i):Math.pow(e,i)}}function uhe(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function dhe(i){return i<0?-i*i:i*i}function JR(i){var e=i(mr,mr),t=1;function n(){return t===1?i(mr,mr):t===.5?i(uhe,dhe):i(M6(t),M6(1/t))}return e.exponent=function(s){return arguments.length?(t=+s,n()):t},eg(e)}function eO(){var i=JR(Ik());return i.copy=function(){return lw(i,eO()).exponent(i.exponent())},zl.apply(i,arguments),i}function fhe(){return eO.apply(null,arguments).exponent(.5)}function Cj(){var i=[],e=[],t=[],n;function s(){var o=0,a=Math.max(1,e.length);for(t=new Array(a-1);++o<a;)t[o-1]=o$(i,o/a);return r}function r(o){return o==null||isNaN(o=+o)?n:e[d0(t,o)]}return r.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?t[a-1]:i[0],a<t.length?t[a]:i[i.length-1]]},r.domain=function(o){if(!arguments.length)return i.slice();i=[];for(let a of o)a!=null&&!isNaN(a=+a)&&i.push(a);return i.sort(rb),s()},r.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.quantiles=function(){return t.slice()},r.copy=function(){return Cj().domain(i).range(e).unknown(n)},zl.apply(r,arguments)}function Sj(){var i=0,e=1,t=1,n=[.5],s=[0,1],r;function o(l){return l!=null&&l<=l?s[d0(n,l,0,t)]:r}function a(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return o}return o.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,a()):[i,e]},o.range=function(l){return arguments.length?(t=(s=Array.from(l)).length-1,a()):s.slice()},o.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[i,n[0]]:c>=t?[n[t-1],e]:[n[c-1],n[c]]},o.unknown=function(l){return arguments.length&&(r=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Sj().domain([i,e]).range(s).unknown(r)},zl.apply(eg(o),arguments)}function xj(){var i=[.5],e=[0,1],t,n=1;function s(r){return r!=null&&r<=r?e[d0(i,r,0,n)]:t}return s.domain=function(r){return arguments.length?(i=Array.from(r),n=Math.min(i.length,e.length-1),s):i.slice()},s.range=function(r){return arguments.length?(e=Array.from(r),n=Math.min(i.length,e.length-1),s):e.slice()},s.invertExtent=function(r){var o=e.indexOf(r);return[i[o-1],i[o]]},s.unknown=function(r){return arguments.length?(t=r,s):t},s.copy=function(){return xj().domain(i).range(e).unknown(t)},zl.apply(s,arguments)}function ghe(i){return new Date(i)}function phe(i){return i instanceof Date?+i:+new Date(+i)}function tO(i,e,t,n,s,r,o,a,l,c){var h=mj(),u=h.invert,d=h.domain,f=c(".%L"),g=c(":%S"),p=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),b=c("%b %d"),w=c("%B"),y=c("%Y");function x(L){return(l(L)<L?f:a(L)<L?g:o(L)<L?p:r(L)<L?m:n(L)<L?s(L)<L?v:b:t(L)<L?w:y)(L)}return h.invert=function(L){return new Date(u(L))},h.domain=function(L){return arguments.length?d(Array.from(L,phe)):d().map(ghe)},h.ticks=function(L){var S=d();return i(S[0],S[S.length-1],L??10)},h.tickFormat=function(L,S){return S==null?x:c(S)},h.nice=function(L){var S=d();return(!L||typeof L.range!="function")&&(L=e(S[0],S[S.length-1],L??10)),L?d(wj(S,L)):h},h.copy=function(){return lw(h,tO(i,e,t,n,s,r,o,a,l,c))},h}function mhe(){return zl.apply(tO(hoe,uoe,uu,QS,J1,$d,IR,ER,Wh,PR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _he(){return zl.apply(tO(loe,coe,du,JS,ew,jd,MR,NR,Wh,FR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tk(){var i=0,e=1,t,n,s,r,o=mr,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:o(s===0?.5:(u=(r(u)-t)*s,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([i,e]=u,t=r(i=+i),n=r(e=+e),s=t===n?0:1/(n-t),c):[i,e]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(o=u,c):o};function h(u){return function(d){var f,g;return arguments.length?([f,g]=d,o=u(f,g),c):[o(0),o(1)]}}return c.range=h(Vu),c.rangeRound=h(aw),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return r=u,t=u(i),n=u(e),s=t===n?0:1/(n-t),c}}function Wu(i,e){return e.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function iO(){var i=eg(Tk()(mr));return i.copy=function(){return Wu(i,iO())},Fu.apply(i,arguments)}function Dj(){var i=YR(Tk()).domain([1,10]);return i.copy=function(){return Wu(i,Dj()).base(i.base())},Fu.apply(i,arguments)}function kj(){var i=XR(Tk());return i.copy=function(){return Wu(i,kj()).constant(i.constant())},Fu.apply(i,arguments)}function nO(){var i=JR(Tk());return i.copy=function(){return Wu(i,nO()).exponent(i.exponent())},Fu.apply(i,arguments)}function bhe(){return nO.apply(null,arguments).exponent(.5)}function Nk(){var i=0,e=.5,t=1,n=1,s,r,o,a,l,c=mr,h,u=!1,d;function f(p){return isNaN(p=+p)?d:(p=.5+((p=+h(p))-r)*(n*p<n*r?a:l),c(u?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([i,e,t]=p,s=h(i=+i),r=h(e=+e),o=h(t=+t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f):[i,e,t]},f.clamp=function(p){return arguments.length?(u=!!p,f):u},f.interpolator=function(p){return arguments.length?(c=p,f):c};function g(p){return function(m){var v,b,w;return arguments.length?([v,b,w]=m,c=ZR(p,[v,b,w]),f):[c(0),c(.5),c(1)]}}return f.range=g(Vu),f.rangeRound=g(aw),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return h=p,s=p(i),r=p(e),o=p(t),a=s===r?0:.5/(r-s),l=r===o?0:.5/(o-r),n=r<s?-1:1,f}}function Lj(){var i=eg(Nk()(mr));return i.copy=function(){return Wu(i,Lj())},Fu.apply(i,arguments)}function Aj(){var i=YR(Nk()).domain([.1,1,10]);return i.copy=function(){return Wu(i,Aj()).base(i.base())},Fu.apply(i,arguments)}function Ej(){var i=XR(Nk());return i.copy=function(){return Wu(i,Ej()).constant(i.constant())},Fu.apply(i,arguments)}function sO(){var i=JR(Nk());return i.copy=function(){return Wu(i,sO()).exponent(i.exponent())},Fu.apply(i,arguments)}function vhe(){return sO.apply(null,arguments).exponent(.5)}function rO(i,e,t){const n=i-e+t*2;return i?n>0?n:1:0}const whe="identity",wm="linear",gu="log",cw="pow",hw="sqrt",Mk="symlog",Ij="time",Tj="utc",wl="sequential",g0="diverging",ET="quantile",Nj="quantize",Mj="threshold",oO="ordinal",IT="point",Rj="band",aO="bin-ordinal",Wn="continuous",uw="discrete",dw="discretizing",Bo="interpolating",Oj="temporal";function yhe(i){return function(e){let t=e[0],n=e[1],s;return n<t&&(s=t,t=n,n=s),[i.invert(t),i.invert(n)]}}function Che(i){return function(e){const t=i.range();let n=e[0],s=e[1],r=-1,o,a,l,c;for(s<n&&(a=n,n=s,s=a),l=0,c=t.length;l<c;++l)t[l]>=n&&t[l]<=s&&(r<0&&(r=l),o=l);if(!(r<0))return n=i.invertExtent(t[r]),s=i.invertExtent(t[o]),[n[0]===void 0?n[1]:n[0],s[1]===void 0?s[0]:s[1]]}}function lO(){const i=$R().unknown(void 0),e=i.domain,t=i.range;let n=[0,1],s,r,o=!1,a=0,l=0,c=.5;delete i.unknown;function h(){const u=e().length,d=n[1]<n[0],f=n[1-d],g=rO(u,a,l);let p=n[d-0];s=(f-p)/(g||1),o&&(s=Math.floor(s)),p+=(f-p-s*(u-a))*c,r=s*(1-a),o&&(p=Math.round(p),r=Math.round(r));const m=ov(u).map(v=>p+s*v);return t(d?m.reverse():m)}return i.domain=function(u){return arguments.length?(e(u),h()):e()},i.range=function(u){return arguments.length?(n=[+u[0],+u[1]],h()):n.slice()},i.rangeRound=function(u){return n=[+u[0],+u[1]],o=!0,h()},i.bandwidth=function(){return r},i.step=function(){return s},i.round=function(u){return arguments.length?(o=!!u,h()):o},i.padding=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),a=l,h()):a},i.paddingInner=function(u){return arguments.length?(a=Math.max(0,Math.min(1,u)),h()):a},i.paddingOuter=function(u){return arguments.length?(l=Math.max(0,Math.min(1,u)),h()):l},i.align=function(u){return arguments.length?(c=Math.max(0,Math.min(1,u)),h()):c},i.invertRange=function(u){if(u[0]==null||u[1]==null)return;const d=n[1]<n[0],f=d?t().reverse():t(),g=f.length-1;let p=+u[0],m=+u[1],v,b,w;if(!(p!==p||m!==m)&&(m<p&&(w=p,p=m,m=w),!(m<f[0]||p>n[1-d])))return v=Math.max(0,uT(f,p)-1),b=p===m?v:uT(f,m)-1,p-f[v]>r+1e-10&&++v,d&&(w=v,v=g-b,b=g-w),v>b?void 0:e().slice(v,b+1)},i.invert=function(u){const d=i.invertRange([u,u]);return d&&d[0]},i.copy=function(){return lO().domain(e()).range(n).round(o).paddingInner(a).paddingOuter(l).align(c)},h()}function Pj(i){const e=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,i.copy=function(){return Pj(e())},i}function She(){return Pj(lO().paddingInner(1))}var xhe=Array.prototype.map;function Dhe(i){return xhe.call(i,rv)}const khe=Array.prototype.slice;function Fj(){let i=[],e=[];function t(n){return n==null||n!==n?void 0:e[(d0(i,n)-1)%e.length]}return t.domain=function(n){return arguments.length?(i=Dhe(n),t):i.slice()},t.range=function(n){return arguments.length?(e=khe.call(n),t):e.slice()},t.tickFormat=function(n,s){return _j(i[0],ba(i),n??10,s)},t.copy=function(){return Fj().domain(t.domain()).range(t.range())},t}const ox={};function Lhe(i,e,t){const n=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?yhe(s):s.invertExtent?Che(s):void 0),s.type=i,s};return n.metadata=qS(hT(t)),n}function ri(i,e,t){return arguments.length>1?(ox[i]=Lhe(i,e,t),this):Ahe(i)?ox[i]:void 0}ri(whe,vj);ri(wm,bj,Wn);ri(gu,QR,[Wn,gu]);ri(cw,eO,Wn);ri(hw,fhe,Wn);ri(Mk,yj,Wn);ri(Ij,mhe,[Wn,Oj]);ri(Tj,_he,[Wn,Oj]);ri(wl,iO,[Wn,Bo]);ri("".concat(wl,"-").concat(wm),iO,[Wn,Bo]);ri("".concat(wl,"-").concat(gu),Dj,[Wn,Bo,gu]);ri("".concat(wl,"-").concat(cw),nO,[Wn,Bo]);ri("".concat(wl,"-").concat(hw),bhe,[Wn,Bo]);ri("".concat(wl,"-").concat(Mk),kj,[Wn,Bo]);ri("".concat(g0,"-").concat(wm),Lj,[Wn,Bo]);ri("".concat(g0,"-").concat(gu),Aj,[Wn,Bo,gu]);ri("".concat(g0,"-").concat(cw),sO,[Wn,Bo]);ri("".concat(g0,"-").concat(hw),vhe,[Wn,Bo]);ri("".concat(g0,"-").concat(Mk),Ej,[Wn,Bo]);ri(ET,Cj,[dw,ET]);ri(Nj,Sj,dw);ri(Mj,xj,dw);ri(aO,Fj,[uw,dw]);ri(oO,$R,uw);ri(Rj,lO,uw);ri(IT,She,uw);function Ahe(i){return Ld(ox,i)}function fw(i,e){const t=ox[i];return t&&t.metadata[e]}function Ds(i){return fw(i,Wn)}function pu(i){return fw(i,uw)}function rp(i){return fw(i,dw)}function Bj(i){return fw(i,gu)}function Rk(i){return fw(i,Bo)}function Ehe(i,e){const t=e[0],n=ba(e)-t;return function(s){return i(t+s*n)}}function Ok(i,e,t){return ZR(Vj(e||"rgb",t),i)}function Ihe(i,e){const t=new Array(e),n=e+1;for(let s=0;s<e;)t[s]=i(++s/n);return t}function Vj(i,e){const t=the[The(i)];return e!=null&&t&&t.gamma?t.gamma(e):t}function The(i){return"interpolate"+i.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Nhe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Mhe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Wj(i){const e=i.length/6|0,t=new Array(e);for(let n=0;n<e;)t[n]="#"+i.slice(n*6,++n*6);return t}function zj(i,e){for(const t in i)cO(t,e(i[t]))}const R6={};zj(Mhe,Wj);zj(Nhe,i=>Ok(Wj(i)));function cO(i,e){return i=i&&i.toLowerCase(),arguments.length>1?(R6[i]=e,this):R6[i]}function Rhe(){let i=0;const e=new Map,t=n=>{let s=e.get(n);return s===void 0&&(s=i++,e.set(n,s)),s};return t.addAll=n=>{for(const s of n)t(s)},t.invert=n=>{for(const s of e.entries())if(s[1]==n)return s[0]},t.domain=()=>[...e.keys()],t}function Pk(){const i=e=>e;return i.invert=e=>e,i.copy=Pk,i.invertRange=()=>{},i.type="null",i}function Ohe(i,e){const t={};e||(e=i.encoding);for(const[n,s]of Object.entries(e)){if(!s)continue;const r=((xo(s)&&s.resolutionChannel)??(Zd(n)&&n))||void 0,o=i.unitView.getScaleResolution(r);t[n]=Phe(e[n],o==null?void 0:o.getScale(),i.unitView.getAccessor(n),n)}return t}function Phe(i,e,t,n){let s;if(va(i)){const r=i.value;s=o=>r,s.constant=!0,s.constantValue=!0,s.accessor=void 0}else if(t)if(n=="text")s=r=>{},s.accessor=t,s.constant=t.constant;else{if(!e)if(!Zd(n))e=Pk();else throw new Error(`Missing scale! "${n}": ${JSON.stringify(i)}`);if(s=r=>e(t(r)),pu(e.type)){const r=Rhe();r.addAll(e.domain()),s.indexer=r}s.constant=t.constant,s.accessor=t,s.scale=e}else throw new Error(`Missing value or accessor (field, expr, datum) on channel "${n}": ${JSON.stringify(i)}`);return s.invert=e?r=>e.invert(r):r=>{throw new Error("No scale available, cannot invert: "+JSON.stringify(i))},s.channelDef=i,s.applyMetadata=r=>{for(const o in s)o in s&&(r[o]=s[o]);return r},s}function va(i){return i&&"value"in i}function gw(i){return i&&"field"in i}function pw(i){return i&&"datum"in i}function xo(i){return gw(i)||pw(i)||uO(i)||Hj(i)}function hO(i,e){const t=i.mark.encoding[e];if(xo(t))return t;throw new Error("Not a channel def with scale!")}function Hj(i){return i&&"chrom"in i}function uO(i){return i&&"expr"in i}const p0=["x","y"],Fhe=["x2","y2"],Bhe=[...p0,...Fhe];function Uj(i){return p0.includes(i)}function Cv(i){return Bhe.includes(i)}const dO={x:"x2",y:"y2"},$j=Object.fromEntries(Object.entries(dO).map(i=>[i[1],i[0]]));function ab(i){return i in $j}function Vhe(i){const e=dO[i];if(e)return e;throw new Error(`${i} has no secondary channel!`)}function vf(i){return $j[i]??i}function Kd(i){return["color","fill","stroke"].includes(vf(i))}function Fk(i){return["shape","squeeze"].includes(i)}function Zd(i){return["x","y","x2","y2","color","fill","stroke","opacity","fillOpacity","strokeOpacity","strokeWidth","size","shape","angle","dx","dy","sample"].includes(i)}function jj(i){switch(i){case"shape":return["circle","square","triangle-up","cross","diamond","triangle-down","triangle-right","triangle-left"]}}function qj(i){if(!Fk(i))throw new Error("Not a discrete channel: "+i);const e=new Map(jj(i).map((t,n)=>[t,n]));return t=>{const n=e.get(t);if(n!==void 0)return n;throw new Error(`Invalid value for "${i}" channel: ${t}`)}}function Ai(i,e=i){if(/^[A-Za-z0-9_]+$/.test(i)){const t=new Function("datum",`return datum[${JSON.stringify(i)}]`);return Ou(t,[i],e)}else return dk(i)}class Whe{constructor(){this.accessorCreators=[],this.register(e=>{if(gw(e))try{const t=Ai(e.field);return t.constant=!1,t.fields=qU(t),t}catch(t){throw new Error(`Invalid field definition: ${t.message}`)}}),this.register(e=>uO(e)?zhe(e.expr):void 0),this.register(e=>{if(pw(e)){const t=_re(e.datum);return t.constant=!0,t.fields=[],t}})}register(e){this.accessorCreators.push(e)}createAccessor(e){for(const t of this.accessorCreators){const n=t(e);if(n)return n}}}function zhe(i){const e=UR(i);return e.constant=e.fields.length==0,e}/* @license twgl.js 4.22.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const fO=5120,gO=5121,pO=5122,mO=5123,_O=5124,bO=5125,vO=5126,Hhe=32819,Uhe=32820,$he=33635,jhe=5131,qhe=33640,Ghe=35899,Khe=35902,Zhe=36269,Yhe=34042,Gj={};{const i=Gj;i[fO]=Int8Array,i[gO]=Uint8Array,i[pO]=Int16Array,i[mO]=Uint16Array,i[_O]=Int32Array,i[bO]=Uint32Array,i[vO]=Float32Array,i[Hhe]=Uint16Array,i[Uhe]=Uint16Array,i[$he]=Uint16Array,i[jhe]=Uint16Array,i[qhe]=Uint32Array,i[Ghe]=Uint32Array,i[Khe]=Uint32Array,i[Zhe]=Uint32Array,i[Yhe]=Uint32Array}function wO(i){if(i instanceof Int8Array)return fO;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)return gO;if(i instanceof Int16Array)return pO;if(i instanceof Uint16Array)return mO;if(i instanceof Int32Array)return _O;if(i instanceof Uint32Array)return bO;if(i instanceof Float32Array)return vO;throw new Error("unsupported typed array type")}function Qhe(i){if(i===Int8Array)return fO;if(i===Uint8Array||i===Uint8ClampedArray)return gO;if(i===Int16Array)return pO;if(i===Uint16Array)return mO;if(i===Int32Array)return _O;if(i===Uint32Array)return bO;if(i===Float32Array)return vO;throw new Error("unsupported typed array type")}function Xhe(i){const e=Gj[i];if(!e)throw new Error("unknown gl type");return e}const ax=typeof SharedArrayBuffer<"u"?function(i){return i&&i.buffer&&(i.buffer instanceof ArrayBuffer||i.buffer instanceof SharedArrayBuffer)}:function(i){return i&&i.buffer&&i.buffer instanceof ArrayBuffer};function Jhe(...i){console.error(...i)}function Kj(...i){console.warn(...i)}function eue(i,e){return typeof WebGLBuffer<"u"&&e instanceof WebGLBuffer}function Zj(i,e){return typeof WebGLRenderbuffer<"u"&&e instanceof WebGLRenderbuffer}function Bk(i,e){return typeof WebGLTexture<"u"&&e instanceof WebGLTexture}function tue(i,e){return typeof WebGLSampler<"u"&&e instanceof WebGLSampler}const Yj=35044,yl=34962,iue=34963,nue=34660,sue=5120,rue=5121,oue=5122,aue=5123,lue=5124,cue=5125,hue=5126,Qj={attribPrefix:""};function Xj(i,e,t,n,s){i.bindBuffer(e,t),i.bufferData(e,n,s||Yj)}function Jj(i,e,t,n){if(eue(i,e))return e;t=t||yl;const s=i.createBuffer();return Xj(i,t,s,e,n),s}function eq(i){return i==="indices"}function uue(i){return i instanceof Int8Array||i instanceof Uint8Array}function due(i){return i===Int8Array||i===Uint8Array}function fue(i){return i.length?i:i.data}const gue=/coord|texture/i,pue=/color|colour/i;function tq(i,e){let t;if(gue.test(i)?t=2:pue.test(i)?t=4:t=3,e%t>0)throw new Error(`Can not guess numComponents for attribute '${i}'. Tried ${t} but ${e} values is not evenly divisible by ${t}. You should specify it.`);return t}function mue(i,e){return i.numComponents||i.size||tq(e,fue(i).length)}function yO(i,e){if(ax(i))return i;if(ax(i.data))return i.data;Array.isArray(i)&&(i={data:i});let t=i.type;return t||(eq(e)?t=Uint16Array:t=Float32Array),new t(i.data)}function _ue(i,e){const t={};return Object.keys(e).forEach(function(n){if(!eq(n)){const s=e[n],r=s.attrib||s.name||s.attribName||Qj.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!ax(s.value))throw new Error("array.value is not array or typedarray");t[r]={value:s.value}}else{let o,a,l,c;if(s.buffer&&s.buffer instanceof WebGLBuffer)o=s.buffer,c=s.numComponents||s.size,a=s.type,l=s.normalize;else if(typeof s=="number"||typeof s.data=="number"){const h=s.data||s,u=s.type||Float32Array,d=h*u.BYTES_PER_ELEMENT;a=Qhe(u),l=s.normalize!==void 0?s.normalize:due(u),c=s.numComponents||s.size||tq(n,h),o=i.createBuffer(),i.bindBuffer(yl,o),i.bufferData(yl,d,s.drawType||Yj)}else{const h=yO(s,n);o=Jj(i,h,void 0,s.drawType),a=wO(h),l=s.normalize!==void 0?s.normalize:uue(h),c=mue(s,n)}t[r]={buffer:o,numComponents:c,type:a,normalize:l,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),i.bindBuffer(yl,null),t}function bue(i,e,t,n){t=yO(t),n!==void 0?(i.bindBuffer(yl,e.buffer),i.bufferSubData(yl,n,t)):Xj(i,yl,e.buffer,t,e.drawType)}function vue(i,e){return e===sue||e===rue?1:e===oue||e===aue?2:e===lue||e===cue||e===hue?4:0}const sA=["position","positions","a_position"];function wue(i,e){let t,n;for(n=0;n<sA.length&&(t=sA[n],!(t in e||(t=Qj.attribPrefix+t,t in e)));++n);n===sA.length&&(t=Object.keys(e)[0]);const s=e[t];i.bindBuffer(yl,s.buffer);const r=i.getBufferParameter(yl,nue);i.bindBuffer(yl,null);const o=vue(i,s.type),a=r/o,l=s.numComponents||s.size,c=a/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function yue(i,e,t){const n=_ue(i,e),s=Object.assign({},t||{});s.attribs=Object.assign({},t?t.attribs:{},n);const r=e.indices;if(r){const o=yO(r,"indices");s.indices=Jj(i,o,iue),s.numElements=o.length,s.elementType=wO(o)}else s.numElements||(s.numElements=wue(i,s.attribs));return s}function m0(i){return!!i.texStorage2D}const TT=function(){const i={},e={};function t(n){const s=n.constructor.name;if(!i[s]){for(const r in n)if(typeof n[r]=="number"){const o=e[n[r]];e[n[r]]=o?`${o} | ${r}`:r}i[s]=!0}}return function(n,s){return t(n),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),zu={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},ym=ax,iq=function(){let i;return function(){return i=i||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),i}}(),O6=6406,Ha=6407,Yi=6408,P6=6409,F6=6410,r_=6402,B6=34041,lx=33071,Cue=9728,Sue=9729,Xc=3553,$c=34067,mu=32879,_u=35866,Vk=34069,xue=34070,Due=34071,kue=34072,Lue=34073,Aue=34074,NT=10241,MT=10240,cx=10242,hx=10243,V6=32882,Eue=33082,Iue=33083,Tue=33084,Nue=33085,CO=3317,nq=3314,sq=32878,rq=3316,oq=3315,aq=32877,Mue=37443,Rue=37441,Oue=37440,Pue=33321,Fue=36756,Bue=33325,Vue=33326,Wue=33330,zue=33329,Hue=33338,Uue=33337,$ue=33340,jue=33339,que=33323,Gue=36757,Kue=33327,Zue=33328,Yue=33336,Que=33335,Xue=33332,Jue=33331,ede=33334,tde=33333,ide=32849,nde=35905,sde=36194,rde=36758,ode=35898,ade=35901,lde=34843,cde=34837,hde=36221,ude=36239,dde=36215,fde=36233,gde=36209,pde=36227,mde=32856,_de=35907,bde=36759,vde=32855,wde=32854,yde=32857,Cde=34842,Sde=34836,xde=36220,Dde=36238,kde=36975,Lde=36214,Ade=36232,Ede=36226,Ide=36208,Tde=33189,Nde=33190,Mde=36012,Rde=36013,Ode=35056,ah=5120,Ki=5121,hy=5122,Ng=5123,uy=5124,Ju=5125,bs=5126,W6=32819,z6=32820,H6=33635,Uo=5131,o_=36193,rA=33640,Pde=35899,Fde=35902,Bde=36269,Vde=34042,dy=33319,Mg=33320,fy=6403,Rg=36244,Og=36248,ed=36249;let oA;function Wk(i){if(!oA){const e={};e[O6]={textureFormat:O6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ki,Uo,o_,bs]},e[P6]={textureFormat:P6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Ki,Uo,o_,bs]},e[F6]={textureFormat:F6,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Ki,Uo,o_,bs]},e[Ha]={textureFormat:Ha,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Ki,Uo,o_,bs,H6]},e[Yi]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Ki,Uo,o_,bs,W6,z6]},e[r_]={textureFormat:r_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ju,Ng]},e[Pue]={textureFormat:fy,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Ki]},e[Fue]={textureFormat:fy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[ah]},e[Bue]={textureFormat:fy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[bs,Uo]},e[Vue]={textureFormat:fy,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[bs]},e[Wue]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ki]},e[zue]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[ah]},e[Xue]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ng]},e[Jue]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[hy]},e[ede]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ju]},e[tde]={textureFormat:Rg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[uy]},e[que]={textureFormat:dy,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Ki]},e[Gue]={textureFormat:dy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[ah]},e[Kue]={textureFormat:dy,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[bs,Uo]},e[Zue]={textureFormat:dy,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[bs]},e[Yue]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ki]},e[Que]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ah]},e[Hue]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ng]},e[Uue]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hy]},e[$ue]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ju]},e[jue]={textureFormat:Mg,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[uy]},e[ide]={textureFormat:Ha,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Ki]},e[nde]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ki]},e[sde]={textureFormat:Ha,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Ki,H6]},e[rde]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[ah]},e[ode]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[bs,Uo,Pde]},e[ade]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[bs,Uo,Fde]},e[lde]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[bs,Uo]},e[cde]={textureFormat:Ha,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[bs]},e[hde]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ki]},e[ude]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[ah]},e[dde]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ng]},e[fde]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[hy]},e[gde]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ju]},e[pde]={textureFormat:Og,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[uy]},e[mde]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ki]},e[_de]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ki]},e[bde]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[ah]},e[vde]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Ki,z6,rA]},e[wde]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Ki,W6]},e[yde]={textureFormat:Yi,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[rA]},e[Cde]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[bs,Uo]},e[Sde]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[bs]},e[xde]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ki]},e[Dde]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ah]},e[kde]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rA]},e[Lde]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ng]},e[Ade]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[hy]},e[Ede]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[uy]},e[Ide]={textureFormat:ed,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ju]},e[Tde]={textureFormat:r_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Ng,Ju]},e[Nde]={textureFormat:r_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ju]},e[Mde]={textureFormat:r_,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bs]},e[Ode]={textureFormat:B6,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vde]},e[Rde]={textureFormat:B6,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Bde]},Object.keys(e).forEach(function(t){const n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(s,r){const o=n.type[r];n.bytesPerElementMap[o]=s})}),oA=e}return oA[i]}function Wde(i,e){const t=Wk(i);if(!t)throw"unknown internal format";const n=t.bytesPerElementMap[e];if(n===void 0)throw"unknown internal format";return n}function _0(i){const e=Wk(i);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function U6(i){return(i&i-1)===0}function zde(i,e,t,n){if(!m0(i))return U6(e)&&U6(t);const s=Wk(n);if(!s)throw"unknown internal format";return s.colorRenderable&&s.textureFilterable}function Hde(i){const e=Wk(i);if(!e)throw"unknown internal format";return e.textureFilterable}function lq(i,e,t){return ym(e)?wO(e):t||Ki}function gy(i,e,t,n,s){if(s%1!==0)throw"can't guess dimensions";if(!t&&!n){const r=Math.sqrt(s/(e===$c?6:1));r%1===0?(t=r,n=r):(t=s,n=1)}else if(n){if(!t&&(t=s/n,t%1))throw"can't guess dimensions"}else if(n=s/t,n%1)throw"can't guess dimensions";return{width:t,height:n}}function Cm(i,e){e.colorspaceConversion!==void 0&&i.pixelStorei(Mue,e.colorspaceConversion),e.premultiplyAlpha!==void 0&&i.pixelStorei(Rue,e.premultiplyAlpha),e.flipY!==void 0&&i.pixelStorei(Oue,e.flipY)}function cq(i){i.pixelStorei(CO,4),m0(i)&&(i.pixelStorei(nq,0),i.pixelStorei(sq,0),i.pixelStorei(rq,0),i.pixelStorei(oq,0),i.pixelStorei(aq,0))}function Ude(i,e,t,n){n.minMag&&(t.call(i,e,NT,n.minMag),t.call(i,e,MT,n.minMag)),n.min&&t.call(i,e,NT,n.min),n.mag&&t.call(i,e,MT,n.mag),n.wrap&&(t.call(i,e,cx,n.wrap),t.call(i,e,hx,n.wrap),(e===mu||tue(i,e))&&t.call(i,e,V6,n.wrap)),n.wrapR&&t.call(i,e,V6,n.wrapR),n.wrapS&&t.call(i,e,cx,n.wrapS),n.wrapT&&t.call(i,e,hx,n.wrapT),n.minLod&&t.call(i,e,Eue,n.minLod),n.maxLod&&t.call(i,e,Iue,n.maxLod),n.baseLevel&&t.call(i,e,Tue,n.baseLevel),n.maxLevel&&t.call(i,e,Nue,n.maxLevel)}function hq(i,e,t){const n=t.target||Xc;i.bindTexture(n,e),Ude(i,n,i.texParameteri,t)}function $de(i){return i=i||zu.textureColor,ym(i)?i:new Uint8Array([i[0]*255,i[1]*255,i[2]*255,i[3]*255])}function RT(i,e,t,n,s,r){t=t||zu.textureOptions,r=r||Yi;const o=t.target||Xc;if(n=n||t.width,s=s||t.height,i.bindTexture(o,e),zde(i,n,s,r))i.generateMipmap(o);else{const a=Hde(r)?Sue:Cue;i.texParameteri(o,NT,a),i.texParameteri(o,MT,a),i.texParameteri(o,cx,lx),i.texParameteri(o,hx,lx)}}function Sv(i){return i.auto===!0||i.auto===void 0&&i.level===void 0}function OT(i,e){return e=e||{},e.cubeFaceOrder||[Vk,xue,Due,kue,Lue,Aue]}function PT(i,e){const t=OT(i,e).map(function(n,s){return{face:n,ndx:s}});return t.sort(function(n,s){return n.face-s.face}),t}function uq(i,e,t,n){n=n||zu.textureOptions;const s=n.target||Xc,r=n.level||0;let o=t.width,a=t.height;const l=n.internalFormat||n.format||Yi,c=_0(l),h=n.format||c.format,u=n.type||c.type;if(Cm(i,n),i.bindTexture(s,e),s===$c){const d=t.width,f=t.height;let g,p;if(d/6===f)g=f,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(f/6===d)g=d,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(d/3===f/2)g=d/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(d/2===f/3)g=d/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(t.src?t.src:t.nodeName);const m=iq();m?(m.canvas.width=g,m.canvas.height=g,o=g,a=g,PT(i,n).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;m.drawImage(t,b,w,g,g,0,0,g,g),i.texImage2D(v.face,r,l,h,u,m.canvas)}),m.canvas.width=1,m.canvas.height=1):typeof createImageBitmap<"u"&&(o=g,a=g,PT(i,n).forEach(function(v){const b=p[v.ndx*2+0]*g,w=p[v.ndx*2+1]*g;i.texImage2D(v.face,r,l,g,g,0,h,u,null),createImageBitmap(t,b,w,g,g,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(y){Cm(i,n),i.bindTexture(s,e),i.texImage2D(v.face,r,l,h,u,y),Sv(n)&&RT(i,e,n,o,a,l)})}))}else if(s===mu||s===_u){const d=Math.min(t.width,t.height),f=Math.max(t.width,t.height),g=f/d;if(g%1!==0)throw"can not compute 3D dimensions of element";const p=t.width===f?1:0,m=t.height===f?1:0;i.pixelStorei(CO,1),i.pixelStorei(nq,t.width),i.pixelStorei(sq,0),i.pixelStorei(aq,0),i.texImage3D(s,r,l,d,d,d,0,h,u,null);for(let v=0;v<g;++v){const b=v*d*p,w=v*d*m;i.pixelStorei(rq,b),i.pixelStorei(oq,w),i.texSubImage3D(s,r,0,0,v,d,d,1,h,u,t)}cq(i)}else i.texImage2D(s,r,l,h,u,t);Sv(n)&&RT(i,e,n,o,a,l),hq(i,e,n)}function mw(){}function jde(i){if(typeof document<"u"){const e=document.createElement("a");return e.href=i,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}else{const e=new URL(location.href).origin;return new URL(i,location.href).origin===e}}function qde(i,e){return e===void 0&&!jde(i)?"anonymous":e}function Gde(i,e,t){t=t||mw;let n;if(e=e!==void 0?e:zu.crossOrigin,e=qde(i,e),typeof Image<"u"){n=new Image,e!==void 0&&(n.crossOrigin=e);const s=function(){n.removeEventListener("error",r),n.removeEventListener("load",o),n=null},r=function(){const a="couldn't load image: "+i;Jhe(a),t(a,n),s()},o=function(){t(null,n),s()};return n.addEventListener("error",r),n.addEventListener("load",o),n.src=i,n}else if(typeof ImageBitmap<"u"){let s,r;const o=function(){t(s,r)},a={};e&&(a.mode="cors"),fetch(i,a).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){r=l,setTimeout(o)}).catch(function(l){s=l,setTimeout(o)}),n=null}return n}function dq(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof ImageData<"u"&&i instanceof ImageData||typeof HTMLElement<"u"&&i instanceof HTMLElement}function SO(i,e,t){return dq(i)?(setTimeout(function(){t(null,i)}),i):Gde(i,e,t)}function xO(i,e,t){t=t||zu.textureOptions;const n=t.target||Xc;if(i.bindTexture(n,e),t.color===!1)return;const s=$de(t.color);if(n===$c)for(let r=0;r<6;++r)i.texImage2D(Vk+r,0,Yi,1,1,0,Yi,Ki,s);else n===mu||n===_u?i.texImage3D(n,0,Yi,1,1,1,0,Yi,Ki,s):i.texImage2D(n,0,Yi,1,1,0,Yi,Ki,s)}function Kde(i,e,t,n){return n=n||mw,t=t||zu.textureOptions,xO(i,e,t),t=Object.assign({},t),SO(t.src,t.crossOrigin,function(s,r){s?n(s,e,r):(uq(i,e,r,t),n(null,e,r))})}function Zde(i,e,t,n){n=n||mw;const s=t.src;if(s.length!==6)throw"there must be 6 urls for a cubemap";const r=t.level||0,o=t.internalFormat||t.format||Yi,a=_0(o),l=t.format||a.format,c=t.type||Ki,h=t.target||Xc;if(h!==$c)throw"target must be TEXTURE_CUBE_MAP";xO(i,e,t),t=Object.assign({},t);let u=6;const d=[],f=OT(i,t);let g;function p(m){return function(v,b){--u,v?d.push(v):b.width!==b.height?d.push("cubemap face img is not a square: "+b.src):(Cm(i,t),i.bindTexture(h,e),u===5?OT().forEach(function(w){i.texImage2D(w,r,o,l,c,b)}):i.texImage2D(m,r,o,l,c,b),Sv(t)&&i.generateMipmap(h)),u===0&&n(d.length?d:void 0,e,g)}}g=s.map(function(m,v){return SO(m,t.crossOrigin,p(f[v]))})}function Yde(i,e,t,n){n=n||mw;const s=t.src,r=t.internalFormat||t.format||Yi,o=_0(r),a=t.format||o.format,l=t.type||Ki,c=t.target||_u;if(c!==mu&&c!==_u)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";xO(i,e,t),t=Object.assign({},t);let h=s.length;const u=[];let d;const f=t.level||0;let g=t.width,p=t.height;const m=s.length;let v=!0;function b(w){return function(y,x){if(--h,y)u.push(y);else{if(Cm(i,t),i.bindTexture(c,e),v){v=!1,g=t.width||x.width,p=t.height||x.height,i.texImage3D(c,f,r,g,p,m,0,a,l,null);for(let L=0;L<m;++L)i.texSubImage3D(c,f,0,0,L,g,p,1,a,l,x)}else{let L=x,S;(x.width!==g||x.height!==p)&&(S=iq(),L=S.canvas,S.canvas.width=g,S.canvas.height=p,S.drawImage(x,0,0,g,p)),i.texSubImage3D(c,f,0,0,w,g,p,1,a,l,L),S&&L===S.canvas&&(S.canvas.width=0,S.canvas.height=0)}Sv(t)&&i.generateMipmap(c)}h===0&&n(u.length?u:void 0,e,d)}}d=s.map(function(w,y){return SO(w,t.crossOrigin,b(y))})}function fq(i,e,t,n){n=n||zu.textureOptions;const s=n.target||Xc;i.bindTexture(s,e);let r=n.width,o=n.height,a=n.depth;const l=n.level||0,c=n.internalFormat||n.format||Yi,h=_0(c),u=n.format||h.format,d=n.type||lq(i,t,h.type);if(ym(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const m=Xhe(d);t=new m(t)}const f=Wde(c,d),g=t.byteLength/f;if(g%1)throw"length wrong size for format: "+TT(i,u);let p;if(s===mu||s===_u)if(!r&&!o&&!a){const m=Math.cbrt(g);if(m%1!==0)throw"can't guess cube size of array of numElements: "+g;r=m,o=m,a=m}else r&&(!o||!a)?(p=gy(i,s,o,a,g/r),o=p.width,a=p.height):o&&(!r||!a)?(p=gy(i,s,r,a,g/o),r=p.width,a=p.height):(p=gy(i,s,r,o,g/a),r=p.width,o=p.height);else p=gy(i,s,r,o,g),r=p.width,o=p.height;if(cq(i),i.pixelStorei(CO,n.unpackAlignment||1),Cm(i,n),s===$c){const m=f/t.BYTES_PER_ELEMENT,v=g/6*m;PT(i,n).forEach(b=>{const w=v*b.ndx,y=t.subarray(w,w+v);i.texImage2D(b.face,l,c,r,o,0,u,d,y)})}else s===mu||s===_u?i.texImage3D(s,l,c,r,o,a,0,u,d,t):i.texImage2D(s,l,c,r,o,0,u,d,t);return{width:r,height:o,depth:a,type:d}}function Qde(i,e,t){const n=t.target||Xc;i.bindTexture(n,e);const s=t.level||0,r=t.internalFormat||t.format||Yi,o=_0(r),a=t.format||o.format,l=t.type||o.type;if(Cm(i,t),n===$c)for(let c=0;c<6;++c)i.texImage2D(Vk+c,s,r,t.width,t.height,0,a,l,null);else n===mu||n===_u?i.texImage3D(n,s,r,t.width,t.height,t.depth,0,a,l,null):i.texImage2D(n,s,r,t.width,t.height,0,a,l,null)}function xv(i,e,t){t=t||mw,e=e||zu.textureOptions;const n=i.createTexture(),s=e.target||Xc;let r=e.width||1,o=e.height||1;const a=e.internalFormat||Yi;i.bindTexture(s,n),s===$c&&(i.texParameteri(s,cx,lx),i.texParameteri(s,hx,lx));let l=e.src;if(l)if(typeof l=="function"&&(l=l(i,e)),typeof l=="string")Kde(i,n,e,t);else if(ym(l)||Array.isArray(l)&&(typeof l[0]=="number"||Array.isArray(l[0])||ym(l[0]))){const c=fq(i,n,l,e);r=c.width,o=c.height}else Array.isArray(l)&&(typeof l[0]=="string"||dq(l[0]))?s===$c?Zde(i,n,e,t):Yde(i,n,e,t):(uq(i,n,l,e),r=l.width,o=l.height);else Qde(i,n,e);return Sv(e)&&RT(i,n,e,r,o,a),hq(i,n,e),n}function Xde(i,e,t,n,s,r){n=n||t.width,s=s||t.height,r=r||t.depth;const o=t.target||Xc;i.bindTexture(o,e);const a=t.level||0,l=t.internalFormat||t.format||Yi,c=_0(l),h=t.format||c.format;let u;const d=t.src;if(d&&(ym(d)||Array.isArray(d)&&typeof d[0]=="number")?u=t.type||lq(i,d,c.type):u=t.type||c.type,o===$c)for(let f=0;f<6;++f)i.texImage2D(Vk+f,a,l,n,s,0,h,u,null);else o===mu||o===_u?i.texImage3D(o,a,l,n,s,r,0,h,u,null):i.texImage2D(o,a,l,n,s,0,h,u,null)}const Jde=Kj,ux=33984,efe=35048,zk=34962,tfe=34963,DO=35345,gq=35718,ife=35721,nfe=35971,sfe=35382,rfe=35396,ofe=35398,afe=35392,lfe=35395,Hk=5126,pq=35664,mq=35665,_q=35666,kO=5124,bq=35667,vq=35668,wq=35669,yq=35670,Cq=35671,Sq=35672,xq=35673,Dq=35674,kq=35675,Lq=35676,cfe=35678,hfe=35680,ufe=35679,dfe=35682,ffe=35685,gfe=35686,pfe=35687,mfe=35688,_fe=35689,bfe=35690,vfe=36289,wfe=36292,yfe=36293,LO=5125,Aq=36294,Eq=36295,Iq=36296,Cfe=36298,Sfe=36299,xfe=36300,Dfe=36303,kfe=36306,Lfe=36307,Afe=36308,Efe=36311,Uk=3553,$k=34067,AO=32879,jk=35866,dt={};function Tq(i,e){return dt[e].bindPoint}function Ife(i,e){return function(t){i.uniform1f(e,t)}}function Tfe(i,e){return function(t){i.uniform1fv(e,t)}}function Nfe(i,e){return function(t){i.uniform2fv(e,t)}}function Mfe(i,e){return function(t){i.uniform3fv(e,t)}}function Rfe(i,e){return function(t){i.uniform4fv(e,t)}}function Nq(i,e){return function(t){i.uniform1i(e,t)}}function Mq(i,e){return function(t){i.uniform1iv(e,t)}}function Rq(i,e){return function(t){i.uniform2iv(e,t)}}function Oq(i,e){return function(t){i.uniform3iv(e,t)}}function Pq(i,e){return function(t){i.uniform4iv(e,t)}}function Ofe(i,e){return function(t){i.uniform1ui(e,t)}}function Pfe(i,e){return function(t){i.uniform1uiv(e,t)}}function Ffe(i,e){return function(t){i.uniform2uiv(e,t)}}function Bfe(i,e){return function(t){i.uniform3uiv(e,t)}}function Vfe(i,e){return function(t){i.uniform4uiv(e,t)}}function Wfe(i,e){return function(t){i.uniformMatrix2fv(e,!1,t)}}function zfe(i,e){return function(t){i.uniformMatrix3fv(e,!1,t)}}function Hfe(i,e){return function(t){i.uniformMatrix4fv(e,!1,t)}}function Ufe(i,e){return function(t){i.uniformMatrix2x3fv(e,!1,t)}}function $fe(i,e){return function(t){i.uniformMatrix3x2fv(e,!1,t)}}function jfe(i,e){return function(t){i.uniformMatrix2x4fv(e,!1,t)}}function qfe(i,e){return function(t){i.uniformMatrix4x2fv(e,!1,t)}}function Gfe(i,e){return function(t){i.uniformMatrix3x4fv(e,!1,t)}}function Kfe(i,e){return function(t){i.uniformMatrix4x3fv(e,!1,t)}}function ir(i,e,t,n){const s=Tq(i,e);return m0(i)?function(r){let o,a;Bk(i,r)?(o=r,a=null):(o=r.texture,a=r.sampler),i.uniform1i(n,t),i.activeTexture(ux+t),i.bindTexture(s,o),i.bindSampler(t,a)}:function(r){i.uniform1i(n,t),i.activeTexture(ux+t),i.bindTexture(s,r)}}function nr(i,e,t,n,s){const r=Tq(i,e),o=new Int32Array(s);for(let a=0;a<s;++a)o[a]=t+a;return m0(i)?function(a){i.uniform1iv(n,o),a.forEach(function(l,c){i.activeTexture(ux+o[c]);let h,u;Bk(i,l)?(h=l,u=null):(h=l.texture,u=l.sampler),i.bindSampler(t,u),i.bindTexture(r,h)})}:function(a){i.uniform1iv(n,o),a.forEach(function(l,c){i.activeTexture(ux+o[c]),i.bindTexture(r,l)})}}dt[Hk]={Type:Float32Array,size:4,setter:Ife,arraySetter:Tfe};dt[pq]={Type:Float32Array,size:8,setter:Nfe,cols:2};dt[mq]={Type:Float32Array,size:12,setter:Mfe,cols:3};dt[_q]={Type:Float32Array,size:16,setter:Rfe,cols:4};dt[kO]={Type:Int32Array,size:4,setter:Nq,arraySetter:Mq};dt[bq]={Type:Int32Array,size:8,setter:Rq,cols:2};dt[vq]={Type:Int32Array,size:12,setter:Oq,cols:3};dt[wq]={Type:Int32Array,size:16,setter:Pq,cols:4};dt[LO]={Type:Uint32Array,size:4,setter:Ofe,arraySetter:Pfe};dt[Aq]={Type:Uint32Array,size:8,setter:Ffe,cols:2};dt[Eq]={Type:Uint32Array,size:12,setter:Bfe,cols:3};dt[Iq]={Type:Uint32Array,size:16,setter:Vfe,cols:4};dt[yq]={Type:Uint32Array,size:4,setter:Nq,arraySetter:Mq};dt[Cq]={Type:Uint32Array,size:8,setter:Rq,cols:2};dt[Sq]={Type:Uint32Array,size:12,setter:Oq,cols:3};dt[xq]={Type:Uint32Array,size:16,setter:Pq,cols:4};dt[Dq]={Type:Float32Array,size:32,setter:Wfe,rows:2,cols:2};dt[kq]={Type:Float32Array,size:48,setter:zfe,rows:3,cols:3};dt[Lq]={Type:Float32Array,size:64,setter:Hfe,rows:4,cols:4};dt[ffe]={Type:Float32Array,size:32,setter:Ufe,rows:2,cols:3};dt[gfe]={Type:Float32Array,size:32,setter:jfe,rows:2,cols:4};dt[pfe]={Type:Float32Array,size:48,setter:$fe,rows:3,cols:2};dt[mfe]={Type:Float32Array,size:48,setter:Gfe,rows:3,cols:4};dt[_fe]={Type:Float32Array,size:64,setter:qfe,rows:4,cols:2};dt[bfe]={Type:Float32Array,size:64,setter:Kfe,rows:4,cols:3};dt[cfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:Uk};dt[hfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:$k};dt[ufe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:AO};dt[dfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:Uk};dt[vfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:jk};dt[wfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:jk};dt[yfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:$k};dt[Cfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:Uk};dt[Sfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:AO};dt[xfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:$k};dt[Dfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:jk};dt[kfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:Uk};dt[Lfe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:AO};dt[Afe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:$k};dt[Efe]={Type:null,size:0,setter:ir,arraySetter:nr,bindPoint:jk};function qk(i,e){return function(t){if(t.value)switch(i.disableVertexAttribArray(e),t.value.length){case 4:i.vertexAttrib4fv(e,t.value);break;case 3:i.vertexAttrib3fv(e,t.value);break;case 2:i.vertexAttrib2fv(e,t.value);break;case 1:i.vertexAttrib1fv(e,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else i.bindBuffer(zk,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribPointer(e,t.numComponents||t.size,t.type||Hk,t.normalize||!1,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function Hu(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4iv(e,t.value);else throw new Error("The length of an integer constant value must be 4!");else i.bindBuffer(zk,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||kO,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function Gk(i,e){return function(t){if(t.value)if(i.disableVertexAttribArray(e),t.value.length===4)i.vertexAttrib4uiv(e,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else i.bindBuffer(zk,t.buffer),i.enableVertexAttribArray(e),i.vertexAttribIPointer(e,t.numComponents||t.size,t.type||LO,t.stride||0,t.offset||0),t.divisor!==void 0&&i.vertexAttribDivisor(e,t.divisor)}}function EO(i,e,t){const n=t.size,s=t.count;return function(r){i.bindBuffer(zk,r.buffer);const o=r.size||r.numComponents||n,a=o/s,l=r.type||Hk,c=dt[l].size*o,h=r.normalize||!1,u=r.offset||0,d=c/s;for(let f=0;f<s;++f)i.enableVertexAttribArray(e+f),i.vertexAttribPointer(e+f,a,l,h,c,u+d*f),r.divisor!==void 0&&i.vertexAttribDivisor(e+f,r.divisor)}}const Ln={};Ln[Hk]={size:4,setter:qk};Ln[pq]={size:8,setter:qk};Ln[mq]={size:12,setter:qk};Ln[_q]={size:16,setter:qk};Ln[kO]={size:4,setter:Hu};Ln[bq]={size:8,setter:Hu};Ln[vq]={size:12,setter:Hu};Ln[wq]={size:16,setter:Hu};Ln[LO]={size:4,setter:Gk};Ln[Aq]={size:8,setter:Gk};Ln[Eq]={size:12,setter:Gk};Ln[Iq]={size:16,setter:Gk};Ln[yq]={size:4,setter:Hu};Ln[Cq]={size:8,setter:Hu};Ln[Sq]={size:12,setter:Hu};Ln[xq]={size:16,setter:Hu};Ln[Dq]={size:4,setter:EO,count:2};Ln[kq]={size:9,setter:EO,count:3};Ln[Lq]={size:16,setter:EO,count:4};function Fq(i){const e=i.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const Zfe=/(\.|\[|]|\w+)/g,Yfe=i=>i>="0"&&i<="9";function Bq(i,e,t,n){const s=i.split(Zfe).filter(a=>a!=="");let r=0,o="";for(;;){const a=s[r++];o+=a;const l=Yfe(a[0]),c=l?parseInt(a):a;if(l&&(o+=s[r++]),r===s.length){t[c]=e;break}else{const h=s[r++],u=h==="[",d=t[c]||(u?[]:{});t[c]=d,t=d,n[o]=n[o]||function(f){return function(g){Vq(f,g)}}(d),o+=h}}}function Qfe(i,e){let t=0;function n(a,l,c){const h=l.name.endsWith("[0]"),u=l.type,d=dt[u];if(!d)throw new Error(`unknown type: 0x${u.toString(16)}`);let f;if(d.bindPoint){const g=t;t+=l.size,h?f=d.arraySetter(i,u,g,c,l.size):f=d.setter(i,u,g,c,l.size)}else d.arraySetter&&h?f=d.arraySetter(i,c):f=d.setter(i,c);return f.location=c,f}const s={},r={},o=i.getProgramParameter(e,gq);for(let a=0;a<o;++a){const l=i.getActiveUniform(e,a);if(Fq(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const h=i.getUniformLocation(e,l.name);if(h){const u=n(e,l,h);s[c]=u,Bq(c,u,r,s)}}return s}function Xfe(i,e){const t={},n=i.getProgramParameter(e,nfe);for(let s=0;s<n;++s){const r=i.getTransformFeedbackVarying(e,s);t[r.name]={index:s,type:r.type,size:r.size}}return t}function Jfe(i,e){const t=i.getProgramParameter(e,gq),n=[],s=[];for(let a=0;a<t;++a){s.push(a),n.push({});const l=i.getActiveUniform(e,a);n[a].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){const l=a[0],c=a[1];i.getActiveUniforms(e,s,i[l]).forEach(function(h,u){n[u][c]=h})});const r={},o=i.getProgramParameter(e,sfe);for(let a=0;a<o;++a){const l=i.getActiveUniformBlockName(e,a),c={index:i.getUniformBlockIndex(e,l),usedByVertexShader:i.getActiveUniformBlockParameter(e,a,rfe),usedByFragmentShader:i.getActiveUniformBlockParameter(e,a,ofe),size:i.getActiveUniformBlockParameter(e,a,afe),uniformIndices:i.getActiveUniformBlockParameter(e,a,lfe)};c.used=c.usedByVertexShader||c.usedByFragmentShader,r[l]=c}return{blockSpecs:r,uniformData:n}}const $6=/\[\d+\]\.$/,ege=(i,e)=>((i+(e-1))/e|0)*e;function tge(i,e,t,n){if(e||t){n=n||1;const s=i.length/4;return function(r){let o=0,a=0;for(let l=0;l<s;++l){for(let c=0;c<n;++c)i[o++]=r[a++];o+=4-n}}}else return function(s){s.length?i.set(s):i[0]=s}}function ige(i,e,t,n){const s=t.blockSpecs,r=t.uniformData,o=s[n];if(!o)return Jde("no uniform block object named:",n),{name:n,uniforms:{}};const a=new ArrayBuffer(o.size),l=i.createBuffer(),c=o.index;i.bindBuffer(DO,l),i.uniformBlockBinding(e,o.index,c);let h=n+".";$6.test(h)&&(h=h.replace($6,"."));const u={},d={},f={};return o.uniformIndices.forEach(function(g){const p=r[g];let m=p.name;m.startsWith(h)&&(m=m.substr(h.length));const v=m.endsWith("[0]");v&&(m=m.substr(0,m.length-3));const b=dt[p.type],w=b.Type,y=v?ege(b.size,16)*p.size:b.size*p.size,x=new w(a,p.offset,y/w.BYTES_PER_ELEMENT);u[m]=x;const L=tge(x,v,b.rows,b.cols);d[m]=L,Bq(m,L,f,d)}),{name:n,array:a,asFloat:new Float32Array(a),buffer:l,uniforms:u,setters:d}}function j6(i,e,t){return ige(i,e.program,e.uniformBlockSpec,t)}function nge(i,e,t){const n=(e.uniformBlockSpec||e).blockSpecs[t.name];if(n){const s=n.index;return i.bindBufferRange(DO,s,t.buffer,t.offset||0,t.array.byteLength),!0}return!1}function q6(i,e,t){nge(i,e,t)&&i.bufferData(DO,t.array,efe)}function G6(i,e){const t=i.setters;for(const n in e){const s=t[n];if(s){const r=e[n];s(r)}}}function Vq(i,e){for(const t in e){const n=i[t];typeof n=="function"?n(e[t]):Vq(i[t],e[t])}}function Wr(i,...e){const t=i.uniformSetters||i,n=e.length;for(let s=0;s<n;++s){const r=e[s];if(Array.isArray(r)){const o=r.length;for(let a=0;a<o;++a)Wr(t,r[a])}else for(const o in r){const a=t[o];a&&a(r[o])}}}function sge(i,e){const t={},n=i.getProgramParameter(e,ife);for(let s=0;s<n;++s){const r=i.getActiveAttrib(e,s);if(Fq(r))continue;const o=i.getAttribLocation(e,r.name),a=Ln[r.type],l=a.setter(i,o,a);l.location=o,t[r.name]=l}return t}function rge(i,e){for(const t in e){const n=i[t];n&&n(e[t])}}function b0(i,e,t){t.vertexArrayObject?i.bindVertexArray(t.vertexArrayObject):(rge(e.attribSetters||e,t.attribs),t.indices&&i.bindBuffer(tfe,t.indices))}function oge(i,e){const t=Qfe(i,e),n=sge(i,e),s={program:e,uniformSetters:t,attribSetters:n};return m0(i)&&(s.uniformBlockSpec=Jfe(i,e),s.transformFeedbackInfo=Xfe(i,e)),s}const age=4,K6=5123;function _w(i,e,t,n,s,r){t=t===void 0?age:t;const o=e.indices,a=e.elementType,l=n===void 0?e.numElements:n;s=s===void 0?0:s,a||o?r!==void 0?i.drawElementsInstanced(t,l,a===void 0?K6:e.elementType,s,r):i.drawElements(t,l,a===void 0?K6:e.elementType,s):r!==void 0?i.drawArraysInstanced(t,s,l,r):i.drawArrays(t,s,l)}const lge=36160,Ed=36161,cge=3553,hge=5121,uge=6402,dge=6408,fge=33190,gge=36012,pge=35056,mge=36013,_ge=32854,bge=32855,vge=36194,Wq=33189,zq=6401,Hq=36168,IO=34041,wge=36064,Kk=36096,Uq=36128,TO=33306,FT=33071,BT=9729,$q=[{format:dge,type:hge,min:BT,wrap:FT},{format:IO}],wa={};wa[IO]=TO;wa[zq]=Uq;wa[Hq]=Uq;wa[uge]=Kk;wa[Wq]=Kk;wa[fge]=Kk;wa[gge]=Kk;wa[pge]=TO;wa[mge]=TO;function yge(i,e){return wa[i]||wa[e]}const Uu={};Uu[_ge]=!0;Uu[bge]=!0;Uu[vge]=!0;Uu[IO]=!0;Uu[Wq]=!0;Uu[zq]=!0;Uu[Hq]=!0;function Cge(i){return Uu[i]}function Sge(i,e,t,n){const s=lge,r=i.createFramebuffer();i.bindFramebuffer(s,r),t=t||i.drawingBufferWidth,n=n||i.drawingBufferHeight,e=e||$q;let o=0;const a={framebuffer:r,attachments:[],width:t,height:n};return e.forEach(function(l){let c=l.attachment;const h=l.samples,u=l.format;let d=l.attachmentPoint||yge(u,l.internalFormat);if(d||(d=wge+o++),!c)if(h!==void 0||Cge(u))c=i.createRenderbuffer(),i.bindRenderbuffer(Ed,c),h>1?i.renderbufferStorageMultisample(Ed,h,u,t,n):i.renderbufferStorage(Ed,u,t,n);else{const f=Object.assign({},l);f.width=t,f.height=n,f.auto===void 0&&(f.auto=!1,f.min=f.min||f.minMag||BT,f.mag=f.mag||f.minMag||BT,f.wrapS=f.wrapS||f.wrap||FT,f.wrapT=f.wrapT||f.wrap||FT),c=xv(i,f)}if(Zj(i,c))i.framebufferRenderbuffer(s,d,Ed,c);else if(Bk(i,c))l.layer!==void 0?i.framebufferTextureLayer(s,d,c,l.level||0,l.layer):i.framebufferTexture2D(s,d,l.target||cge,c,l.level||0);else throw new Error("unknown attachment type");a.attachments.push(c)}),a}function xge(i,e,t,n,s){n=n||i.drawingBufferWidth,s=s||i.drawingBufferHeight,e.width=n,e.height=s,t=t||$q,t.forEach(function(r,o){const a=e.attachments[o],l=r.format,c=r.samples;if(c!==void 0||Zj(i,a))i.bindRenderbuffer(Ed,a),c>1?i.renderbufferStorageMultisample(Ed,c,l,n,s):i.renderbufferStorage(Ed,l,n,s);else if(Bk(i,a))Xde(i,a,r,n,s);else throw new Error("unknown attachment type")})}function Dge(i,e,t){const n=i.createVertexArray();return i.bindVertexArray(n),e.length||(e=[e]),e.forEach(function(s){b0(i,s,t)}),i.bindVertexArray(null),{numElements:t.numElements,elementType:t.elementType,vertexArrayObject:n}}const kge=/^(.*?)_/;function Lge(i,e){TT(i,0);const t=i.getExtension(e);if(t){const n={},s=kge.exec(e)[1],r="_"+s;for(const o in t){const a=t[o],l=typeof a=="function",c=l?s:r;let h=o;o.endsWith(c)&&(h=o.substring(0,o.length-c.length)),i[h]!==void 0?!l&&i[h]!==a&&Kj(h,i[h],a,o):l?i[h]=function(u){return function(){return u.apply(t,arguments)}}(a):(i[h]=a,n[h]=a)}n.constructor={name:t.constructor.name},TT(n,0)}return t}const Z6=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function jq(i){for(let e=0;e<Z6.length;++e)Lge(i,Z6[e])}function Age(i,e){const t=["webgl2","webgl","experimental-webgl"];let n=null;for(let s=0;s<t.length;++s)if(n=i.getContext(t[s],e),n){jq(n);break}return n}function Ege(i,e){return Age(i,e)}const Ige=`/***The vertex position wrt the rectangle specified by(x,x2,y,y2).*[0,0]=[x,y],[1,1]=[x2,y2].*The x or y component may contain fractional values if the rectangle*have been tessellated.*/in vec2 frac;uniform vec2 uMinSize;uniform float uMinOpacity;uniform vec4 uCornerRadii;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out float vHalfStrokeWidth;out vec4 vCornerRadii;
#if defined(ROUNDED_CORNERS) || defined(STROKED)
out vec2 vPosInPixels;
#endif
out vec2 vHalfSizeInPixels;/***Clamps the minimumSize and returns an opacity that reflects the amount of clamping.*/float clampMinSize(inout float pos,float frac,float size,float minSize){if(minSize>0.0&&abs(size)<minSize){pos+=(frac-0.5)*(minSize*sign(size)-size);return abs(size)/minSize;}return 1.0;}void sort(inout float a,inout float b){if(a>b){float tmp=b;b=a;a=tmp;}}void main(void){vec2 normalizedMinSize=uMinSize/uViewportSize;float x=getScaled_x();float x2=getScaled_x2();float y=getScaled_y();float y2=getScaled_y2();sort(x,x2);sort(y,y2);float clampMargin=1.0;vec2 pos1=vec2(clamp(x,0.0-clampMargin,1.0+clampMargin),y);vec2 pos2=vec2(clamp(x2,0.0-clampMargin,1.0+clampMargin),y2);vec2 size=pos2-pos1;if(size.x<=0.0||size.y<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}vec2 pos=pos1+frac*size;size.y*=getSampleFacetHeight(pos);float opaFactor=uViewOpacity*max(uMinOpacity,clampMinSize(pos.x,frac.x,size.x,normalizedMinSize.x)*clampMinSize(pos.y,frac.y,size.y,normalizedMinSize.y));pos=applySampleFacet(pos);
#if defined(ROUNDED_CORNERS) || defined(STROKED)
float aaPadding=1.0/uDevicePixelRatio;float strokeWidth=getScaled_strokeWidth();float strokeOpacity=getScaled_strokeOpacity()*opaFactor;vec2 centeredFrac=frac-0.5;vec2 expand=centeredFrac*(strokeWidth+aaPadding)/uViewportSize;pos+=expand;vec2 sizeInPixels=size*uViewportSize;vPosInPixels=(centeredFrac+expand/size)*sizeInPixels;vHalfSizeInPixels=sizeInPixels/2.0;vCornerRadii=min(uCornerRadii,min(vHalfSizeInPixels.x,vHalfSizeInPixels.y));vHalfStrokeWidth=strokeWidth/2.0;vStrokeColor=vec4(getScaled_stroke()*strokeOpacity,strokeOpacity);
#endif
gl_Position=unitToNdc(pos);float fillOpacity=getScaled_fillOpacity()*opaFactor;vFillColor=vec4(getScaled_fill()*fillOpacity,fillOpacity);setupPicking();}`,Tge=`#if defined(ROUNDED_CORNERS) || defined(STROKED)
in vec2 vPosInPixels;
#endif
in vec2 vHalfSizeInPixels;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in float vHalfStrokeWidth;in vec4 vCornerRadii;out lowp vec4 fragColor;float sdRoundedBox(vec2 p,vec2 b,vec4 r){r.xy=p.x>0.0 ? r.xy : r.zw;r.x=p.y>0.0 ? r.x  : r.y;vec2 q=abs(p)-b+r.x;return min(max(q.x,q.y),0.0)+length(max(q,0.0))-r.x;}float sdSharpBox(vec2 p,vec2 b){vec2 q=abs(p)-b;return max(q.x,q.y);}void main(void){
#if defined(ROUNDED_CORNERS) || defined(STROKED)
#ifdef ROUNDED_CORNERS
float d=sdRoundedBox(vPosInPixels,vHalfSizeInPixels,vCornerRadii);
#else
float d=sdSharpBox(vPosInPixels,vHalfSizeInPixels);
#endif
fragColor=distanceToColor(d,vFillColor,vStrokeColor,vHalfStrokeWidth);if(fragColor.a==0.0){discard;}
#else
fragColor=vFillColor;
#endif
if(uPickingEnabled){fragColor=vPickingColor;}}`,NO="attr_",qq="uDomain_",Nge="range_",Y6="scale_",Gq="getScaled_",VT="uRangeTexture_",Q6=3402823466e29;function Mge(i){const e=i.match(/^(?:(\w+)-)?(\w+)$/);if(!e)throw new Error("Not a scale type: "+i);return{family:e[1]||"continuous",transform:e[2]}}function Rge(i,e){let t;if(Fk(i))t=Id(qj(i)(e));else if(en(e))if(Kd(i))t=Pge(e);else throw new Error(`String values are not supported on the "${i}" channel: ${e}`);else if(pk(e))t=Id(e?1:0);else if(e===null)if(Kd(i))t=Id([0,0,0]);else throw new Error(`null value is not supported on the "${i}" chanel.`);else t=Id(e);return`
#define ${i}_DEFINED
${t.type} ${Gq}${i}() {
    // Constant value
    return ${t};
}`}function Oge(i,e,t){if(va(t))throw new Error(`Cannot create scale for "value": ${JSON.stringify(t)}`);if(!e)throw new Error("Scale is undefined");const n=vf(i),s=NO+i,r=qq+n,o=Nge+n,a=dx(e.type),l=a?"vec2":"float",c=e.domain?e.domain().length:void 0;let h;const u=[];u.push(""),u.push("/".repeat(70)),u.push(`// Channel: ${i}`),u.push(""),u.push(`#define ${i}_DEFINED`);const{transform:d}=Mge(e.type),f=(S,...k)=>Fge.apply(null,[S,"value",...k]);let g;switch(d){case"linear":g=f("scaleLinear","domain",o);break;case"log":g=f("scaleLog","domain",o,e.base());break;case"symlog":g=f("scaleSymlog","domain",o,e.constant());break;case"pow":case"sqrt":g=f("scalePow","domain",o,e.exponent());break;case"index":case"locus":g=f("scaleBandHp","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"point":case"band":g=f("scaleBand","domain",o,e.paddingInner(),e.paddingOuter(),e.align(),t.band??.5);break;case"ordinal":case"null":case"identity":g=f("scaleIdentity");break;case"threshold":break;default:throw new Error(`Unsupported scale type: ${e.type}! ${i}: ${JSON.stringify(t)}`)}const p=Rk(e.type)||Ds(e.type)&&Kd(i)?[0,1]:e.range?e.range():void 0;if(p&&i==n&&p.length&&p.every(xr)){const S=X6(p);u.push(`const ${S.type} ${o} = ${S};`)}const m=Kd(i)?"vec3":"float";let v;if(Kd(i)){const S=VT+n;if(i==n&&u.push(`uniform sampler2D ${S};`),Ds(e.type))v=`getInterpolatedColor(${S}, transformed)`;else if(pu(e.type)||rp(e.type))v=`getDiscreteColor(${S}, int(transformed))`;else throw new Error("Problem with color scale!")}else if(e.type==="ordinal"||rp(e.type)){const S=VT+n;i==n&&u.push(`uniform sampler2D ${S};`),v=`getDiscreteColor(${S}, int(transformed)).r`}pw(t)?u.push(`uniform highp ${l} ${s};`):u.push(`in highp ${l} ${s};`);const b=[],w=Ds(e.type)&&c>2,y=rp(e.type)||w;if(b.push("int slot = 0;"),y){const S=r;b.push(w?`while (slot < ${S}.length() - 2 && value >= ${S}[slot + 1]) { slot++; }`:`while (slot < ${S}.length() && value >= ${S}[slot]) { slot++; }`)}const x=Ds(e.type)||rp(e.type)||["band","point"].includes(e.type);if(g){const S=r;x&&(a?b.push(`vec3 domain = ${S};`):b.push(`vec2 domain = vec2(${S}[slot], ${S}[slot + 1]);`)),b.push(`float transformed = ${g};`),w&&b.push(`transformed = (float(slot) + transformed) / (float(${S}.length() - 1));`)}else b.push("float transformed = float(slot);");"clamp"in e&&e.clamp()&&b.push(`transformed = clampToRange(transformed, ${X6(p)});`),b.push(`return ${v??"transformed"};`),u.push(`
${m} ${Y6}${i}(${l} value) {
${b.map(S=>`    ${S}
`).join("")}
}`),u.push(`
${m} ${Gq}${i}() {
    return ${Y6}${i}(${s});
}`);const L=u.join(`
`);if(x&&i==n){const S=Ds(e.type)||rp(e.type)?c:2;h=a?`highp vec3 ${r};`:`mediump float ${r}[${S}];`}return{glsl:L,domainUniform:h}}function WT(i){if(!xr(i))throw new Error(`Not a number: ${i}`);if(i==1/0)return""+Q6;if(i==-1/0)return""+-Q6;{let e=`${i}`;return/^(-)?\d+$/.test(e)&&(e+=".0"),e}}function Id(i){typeof i=="number"&&(i=[i]);const e=i.length;if(e<1||e>4)throw new Error("Invalid number of components: "+e);let t,n;return e>1?(t=`vec${e}`,n=`${t}(${i.map(WT).join(", ")})`):(t="float",n=WT(i[0])),Object.assign(n,{type:t,numComponents:e})}function Pge(i){const e=fu(i).rgb();return Id([e.r,e.g,e.b].map(t=>t/255))}function X6(i){return Id([i[0],iw(i)])}function Fge(i,...e){const t=[];for(const n of e)xr(n)?t.push(WT(n)):Fo(n)?t.push(Id(n)):t.push(n);return`${i}(${t.join(", ")})`}function dx(i){return i=="index"||i=="locus"}const Kq=2**11,Bge=Kq-1;function Zq(i,e=[]){const t=i&Bge,n=i-t;return e[0]=n,e[1]=t,e}function Vge(i){const e=i%Kq;return[i-e,e]}function Wge(i){return[...Vge(i[0]),i[1]-i[0]]}class zge{constructor(e){this.size=e,this.arrays={},this.pushers=[],this.dataUpdaters=[],this.vertexCount=0}addConverter(e,t){const n=this.createUpdater(NO+e,t.numComponents||1,t.arrayReference),s=t.f;this.dataUpdaters.push(t.arrayReference?r=>n(s(r)):r=>n(s(r)))}createUpdater(e,t,n){if(!xr(this.size))throw new Error("The number of vertices must be defined!");let s,r,o=0;const a=new Float32Array(this.size*t);if(this.arrays[e]={data:a,numComponents:t},t==1){let l=0;const c=h=>{l=+h};s=()=>{a[o++]=l},r=c}else{let l=n??[0];const c=n?h=>{}:h=>{l=h};switch(t){case 1:break;case 2:s=()=>{a[o++]=l[0],a[o++]=l[1]},r=c;break;case 3:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2]},r=c;break;case 4:s=()=>{a[o++]=l[0],a[o++]=l[1],a[o++]=l[2],a[o++]=l[3]},r=c;break;default:throw new Error("Invalid numComponents: "+t)}}return this.pushers.push(s),r}_unrollPushAll(){let e="",t="";for(let s=0;s<this.pushers.length;s++)e+=`const p${s} = that.pushers[${s}];
`,t+=`p${s}();
`;const n=new Function("that",`${e}

            return function unrolledPushAll() {
                ${t}
                that.vertexCount++;
            };
        `);this.pushAll=n(this)}pushAll(){this.size>1e5?this._unrollPushAll():this.pushAll=()=>{for(let e=0;e<this.pushers.length;e++)this.pushers[e]();this.vertexCount++},this.pushAll()}updateFromDatum(e){for(let t=0;t<this.dataUpdaters.length;t++)this.dataUpdaters[t](e)}pushFromDatum(e){this.updateFromDatum(e),this.pushAll()}}const pp=5,aA=127;function zT(i){const e=[];for(let g=0;g<=aA;g++)e.push(void 0);const t=new Map;for(const g of i.chars)g.id<=aA?e[g.id]=g:t.set(g.id,g);const n=8722;t.has(n)||t.set(n,e["-".charCodeAt(0)]);function s(g){return(g<=aA?e[g]:t.get(g))||e[63]}function r(g){return s(g.charCodeAt(0))}const o=i.common.base,a=r("x"),l=r("X"),c=r("q"),h=a.height-pp*2,u=l.height-pp*2,d=c.height-a.height+c.yoffset-a.yoffset;function f(g,p=1){let m=0;for(let v=0;v<g.length;v++)m+=s(g.charCodeAt(v)).xadvance;return m/o*p}return{measureWidth:f,getCharByCode:s,getChar:r,xHeight:h,capHeight:u,descent:d,common:i.common}}function Hge(i,e=0,t=1){return Math.max(e,Math.min(t,i))}const J6=2**31-1,Uge=-(2**31);function $ge(i,e,t,n=t){const s=new Int32Array(i);s.fill(J6);let r=Uge,o=!1;const a=new Int32Array(i),l=e[0],c=(e[1]-e[0])/i,h=(p,m)=>{const v=(p-l)/c,b=Math.floor(v);return Hge(m&&b==v?b-1:b,0,i-1)};function u(p,m,v){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const b=t(p),w=h(b,!1);s[w]>m&&(s[w]=m),a[w]<v&&(a[w]=v)}function d(p,m,v){m>r?r=m:o||(o=!0,console.debug("Items are not ordered properly. Disabling binned index."));const b=t(p),w=n(p),y=h(b,!1),x=h(w,!0);for(let L=y;L<=x;L++)s[L]>m&&(s[L]=m),a[L]<v&&(a[L]=v)}const f=(p,m,v=[0,0])=>{const b=h(p,!1),w=h(m,!0),y=s[b],x=Math.max(a[w],y);return v[0]=y,v[1]=x,v},g=()=>{for(let m=1;m<a.length;m++)a[m]<a[m-1]&&(a[m]=a[m-1]);let p=!0;for(let m=s.length-1;m>0;m--)p&&s[m]==J6?(s[m]=a[m],p=!1):s[m-1]>s[m]&&(s[m-1]=s[m]);return f};if(u.getIndex=g,d.getIndex=g,!o)return t==n?u:d}class bw{constructor({encoders:e,numVertices:t=void 0,attributes:n=[]}){this.encoders=e,this.variableEncoders=Object.fromEntries(Object.entries(e).filter(([s,r])=>n.includes(s)&&r&&r.scale&&!r.constant)),this.allocatedVertices=t,this.variableBuilder=new zge(t);for(const[s,r]of Object.entries(this.variableEncoders)){const o=r.accessor,a=[0,0],l=dx(r.scale.type),c=r.indexer,h=c?u=>c(o(u)):l?u=>Zq(o(u),a):o;this.variableBuilder.addConverter(s,{f:h,numComponents:l?2:1,arrayReference:l?a:void 0})}this.lastOffset=0,this.rangeMap=new ff([],JSON.stringify)}registerBatch(e){var t;const n=this.lastOffset,s=this.variableBuilder.vertexCount,r=s-n;r&&this.rangeMap.set(e,{offset:n,count:r,xIndex:(t=this.xIndexer)==null?void 0:t.getIndex()}),this.lastOffset=s}addBatches(e){for(const[t,n]of e)this.addBatch(t,n)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.pushFromDatum(o),this.addToXIndex(o)}this.registerBatch(e)}prepareXIndexer(e,t=0,n=t+e.length){const s=()=>{this.addToXIndex=l=>{},this.xIndexer=void 0};if(!e.length||n-t<0){s();return}const r=l=>{var c;return l&&Ds((c=l.scale)==null?void 0:c.type)&&l},o=r(this.variableEncoders.x),a=r(this.variableEncoders.x2);if(o){const l=o.accessor,c=a?a.accessor:l,h=[l(e[t]),c(e[n-1])];if(h[1]>h[0]){this.xIndexer=$ge(50,h,l,c);let u=this.variableBuilder.vertexCount;this.addToXIndex=d=>{let f=this.variableBuilder.vertexCount;this.xIndexer(d,u,f),u=f}}else s()}else s()}addToXIndex(e){}toArrays(){return{arrays:this.variableBuilder.arrays,vertexCount:this.variableBuilder.vertexCount,allocatedVertices:this.allocatedVertices,rangeMap:this.rangeMap}}}class jge extends bw{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateFrac=this.variableBuilder.createUpdater("frac",2)}addBatch(e,t,n=0,s=t.length){if(s<=n)return;const r=this.encoders,[o,a]=this.visibleRange,l=d=>d.accessor||(f=>0),c=l(r.x),h=l(r.x2);this.prepareXIndexer(t,n,s);const u=[0,0];this.updateFrac(u);for(let d=n;d<s;d++){const f=t[d];let g=c(f),p=h(f);if(g>p&&([g,p]=[p,g]),p<o||g>a)continue;g<o&&(g=o),p>a&&(p=a),this.variableBuilder.updateFromDatum(f),u[0]=0,u[1]=0;const m=1;this.variableBuilder.pushAll();for(let v=0;v<=m;v++)u[0]=v/m,u[1]=0,this.variableBuilder.pushAll(),u[1]=1,this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(f)}this.registerBatch(e)}}class qge extends bw{constructor({encoders:e,attributes:t,tessellationThreshold:n=1/0,visibleRange:s=[-1/0,1/0],numItems:r}){super({encoders:e,attributes:t,numVertices:n==1/0?r*6:void 0}),this.visibleRange=s,this.tessellationThreshold=n||1/0,this.updateSide=this.variableBuilder.createUpdater("side",1),this.updatePos=this.variableBuilder.createUpdater("pos",1)}addBatch(e,t,n=0,s=t.length){this.prepareXIndexer(t,n,s);for(let r=n;r<s;r++){const o=t[r];this.variableBuilder.updateFromDatum(o),this.updateSide(-.5),this.updatePos(0),this.variableBuilder.pushAll();const a=1;for(let l=0;l<=a;l++)this.updatePos(l/a),this.updateSide(-.5),this.variableBuilder.pushAll(),this.updateSide(.5),this.variableBuilder.pushAll();this.variableBuilder.pushAll(),this.addToXIndex(o)}this.registerBatch(e)}}class Gge extends bw{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}}class Kge extends bw{constructor({encoders:e,attributes:t,numItems:n=void 0}){super({encoders:e,attributes:t,numVertices:n})}toArrays(){const e=this.variableBuilder.arrays;for(let t of Object.values(e))t.divisor=1;return super.toArrays()}}class Zge extends bw{constructor({encoders:e,attributes:t,fontMetrics:n,properties:s,numCharacters:r=void 0}){super({encoders:e,attributes:t,numVertices:r*6}),this.metadata=n,this.metrics=n,this.properties=s;const o=e.text.channelDef;this.numberFormat=!va(o)&&"format"in o&&o.format?ds(o.format):a=>a,this.updateVertexCoord=this.variableBuilder.createUpdater("vertexCoord",2),this.updateTextureCoord=this.variableBuilder.createUpdater("textureCoord",2),this.updateWidth=this.variableBuilder.createUpdater("width",1)}addBatch(e,t,n=0,s=t.length){const r=this.properties.align||"left",o=this.properties.logoLetters??!1,a=this.metadata.common.base,l=this.metadata.common.scaleH;let c=-pp;switch(this.properties.baseline){case"top":c+=this.metrics.capHeight;break;case"middle":c+=this.metrics.capHeight/2;break;case"bottom":c-=this.metrics.descent;break}const h=this.encoders.text.accessor||this.encoders.text,u=[0,0];this.updateVertexCoord(u);const d=[0,0];this.updateTextureCoord(d),this.prepareXIndexer(t,n,s);for(let f=n;f<s;f++){const g=t[f],p=this.numberFormat(h(g)),m=en(p)?p:p===null?"":""+p;if(m.length==0)continue;this.variableBuilder.updateFromDatum(g);const v=o?m.length:this.metrics.measureWidth(m);this.updateWidth(v);let b=r=="right"?-v:r=="center"?-v/2:0;if(!o){const L=this.metrics.getCharByCode(m.charCodeAt(0));b-=(L.width-L.xadvance)/a/2}let w=-.5,y=1,x=1;for(let L=0;L<m.length;L++){const S=this.metrics.getCharByCode(m.charCodeAt(L)),k=o?1:S.xadvance/a;if(S.id==32){b+=k;continue}o?(x=(S.width+pp*2)/S.width,b=-x/2,y=(S.height+pp*2)/S.height,w=-.5-pp/S.height):(y=S.height/a,w=-(S.height+S.yoffset+c)/a,x=S.width/a);const D=S.x,T=S.y;u[0]=b,u[1]=w+y,d[0]=D/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=b,u[1]=w,d[0]=D/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w+y,d[0]=(D+S.width)/l,d[1]=T/l,this.variableBuilder.pushAll(),u[0]=b,u[1]=w,d[0]=D/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),u[0]=b+x,u[1]=w,d[0]=(D+S.width)/l,d[1]=(T+S.height)/l,this.variableBuilder.pushAll(),b+=k}this.addToXIndex(g)}this.registerBatch(e)}}const e8=`#define PI 3.141593
uniform View{mediump vec2 uViewOffset;mediump vec2 uViewScale;mediump vec2 uViewportSize;lowp float uDevicePixelRatio;lowp float uViewOpacity;bool uPickingEnabled;};/***Maps a coordinate on the unit scale to a normalized device coordinate.*(0,0)is at the bottom left corner.*/vec4 unitToNdc(vec2 coord){return vec4((coord*uViewScale+uViewOffset)*2.0-1.0,0.0,1.0);}vec4 unitToNdc(float x,float y){return unitToNdc(vec2(x,y));}vec4 pixelsToNdc(vec2 coord){return unitToNdc(coord/uViewportSize);}vec4 pixelsToNdc(float x,float y){return pixelsToNdc(vec2(x,y));}float linearstep(float edge0,float edge1,float x){return clamp((x-edge0)/(edge1-edge0),0.0,1.0);}/***Specialized linearstep for doing antialiasing*/float distanceToRatio(float d){return clamp(d*uDevicePixelRatio+0.5,0.0,1.0);}vec4 distanceToColor(float d,vec4 fill,vec4 stroke,float halfStrokeWidth){if(halfStrokeWidth>0.0){float sd=abs(d)-halfStrokeWidth;return mix(stroke,d<=0.0 ? fill : vec4(0.0),distanceToRatio(sd));}else{return fill*distanceToRatio(-d);}}`,Yge="const float inf=1.0/0.0;vec3 getDiscreteColor(sampler2D s,int index){return texelFetch(s,ivec2(index % textureSize(s,0).x,0),0).rgb;}vec3 getInterpolatedColor(sampler2D s,float unitValue){return texture(s,vec2(unitValue,0.0)).rgb;}float clampToRange(float value,vec2 range){return clamp(value,min(range[0],range[1]),max(range[0],range[1]));}float scaleIdentity(float value){return value;}float scaleLinear(float value,vec2 domain,vec2 range){float domainSpan=domain[1]-domain[0];float rangeSpan=range[1]-range[0];return(value-domain[0])/domainSpan*rangeSpan+range[0];}float scaleLog(float value,vec2 domain,vec2 range,float base){return scaleLinear(log(value)/log(base),log(domain)/log(base),range);}float symlog(float value,float constant){return sign(value)*log(abs(value/constant)+1.0);}float scaleSymlog(float value,vec2 domain,vec2 range,float constant){return scaleLinear(symlog(value,constant),vec2(symlog(domain[0],constant),symlog(domain[1],constant)),range);}float scalePow(float value,vec2 domain,vec2 range,float exponent){return scaleLinear(pow(abs(value),exponent)*sign(value),pow(abs(domain),vec2(exponent))*sign(domain),range);}float scaleBand(float value,vec2 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;float n=domainExtent[1]-domainExtent[0];paddingInner=int(n)>1 ? paddingInner : 0.0;float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);return start+(value-domainExtent[0])*step+bandwidth*band;}float scaleBandHp(vec2 value,vec3 domainExtent,vec2 range,float paddingInner,float paddingOuter,float align,float band){float start=range[0];float stop=range[1];float rangeSpan=stop-start;vec2 domainStart=domainExtent.xy;float n=domainExtent[2];float step=rangeSpan/max(1.0,n-paddingInner+paddingOuter*2.0);start+=(rangeSpan-step*(n-paddingInner))*align;float bandwidth=step*(1.0-paddingInner);float hi=max(value[0]-domainStart[0],-inf);float lo=max(value[1]-domainStart[1],-inf);return dot(vec4(start,hi,lo,bandwidth),vec4(1.0,step,step,band));}",Qge=`/***Describes where a sample facet should be shown. Interpolating between the*current and target positions/heights allows for transitioning between facet*configurations.*/struct SampleFacetPosition{float pos;float height;float targetPos;float targetHeight;};/***Trasition fraction[0,1]between the current and target configurations.*/uniform float uTransitionOffset;
#if !defined(SAMPLE_FACET_UNIFORM) && !defined(SAMPLE_FACET_TEXTURE)
SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(0.0,1.0,0.0,1.0);}
#elif defined(SAMPLE_FACET_UNIFORM)
/***Location and height of the band on the Y axis on a normalized[0,1]scale.*Elements: curr pos,curr height,target pos,target height*/uniform vec4 uSampleFacet;SampleFacetPosition getSampleFacetPos(){return SampleFacetPosition(1.0-uSampleFacet.x-uSampleFacet.y,uSampleFacet.y,1.0-uSampleFacet.z-uSampleFacet.w,uSampleFacet.w);}
#elif defined(SAMPLE_FACET_TEXTURE)
uniform sampler2D uSampleFacetTexture;SampleFacetPosition getSampleFacetPos(){vec4 texel=texelFetch(uSampleFacetTexture,ivec2(int(attr_facetIndex),0),0);return SampleFacetPosition(1.0-texel.r-texel.g,texel.g,1.0-texel.r-texel.g,texel.g);}
#endif
bool isFacetedSamples(SampleFacetPosition facetPos){return facetPos!=SampleFacetPosition(0.0,1.0,0.0,1.0);}bool isFacetedSamples(){return isFacetedSamples(getSampleFacetPos());}bool isInTransit(){return uTransitionOffset>0.0;}float getTransitionFraction(float xPos){return smoothstep(0.0,0.7+uTransitionOffset,(xPos-uTransitionOffset)*2.0);}vec2 applySampleFacet(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return pos;}else if(isInTransit()){vec2 interpolated=mix(vec2(facetPos.pos,facetPos.height),vec2(facetPos.targetPos,facetPos.targetHeight),getTransitionFraction(pos.x));return vec2(pos.x,interpolated[0]+pos.y*interpolated[1]);}else{return vec2(pos.x,facetPos.pos+pos.y*facetPos.height);}}float getSampleFacetHeight(vec2 pos){SampleFacetPosition facetPos=getSampleFacetPos();if(!isFacetedSamples(facetPos)){return 1.0;}else if(isInTransit()){return mix(facetPos.height,facetPos.targetHeight,getTransitionFraction(pos.x));}else{return facetPos.height;}}`,Xge=`/**Based on concepts presented at:*https:*https:*/out highp vec4 vPickingColor;/***Passes the unique id to the fragment shader as a color if picking is enabled.*Returns true if picking is enabled.*/bool setupPicking(){if(uPickingEnabled){
#ifdef uniqueId_DEFINED
int id=int(getScaled_uniqueId());vPickingColor=vec4(ivec4(id>>0,id>>8,id>>16,0xFF)&0xFF)/float(0xFF);
#else
vPickingColor=vec4(1.0);
#endif
return true;}return false;}`,Jge="in highp vec4 vPickingColor;",HT=Symbol("cacheMap");function v0(i,e,t){let n=Dv(i).get(e);return n===void 0&&(n=t(e),Dv(i).set(e,n)),n}function Yq(i,e){Dv(i).delete(e)}function OC(i,e){const t=Dv(i);for(const n of t.keys())n.startsWith(e)&&t.delete(n);Dv(i).delete(e)}function Qq(i){i[HT]=new Map}function Dv(i){return i[HT]||Qq(i),i[HT]}function epe(i,e,t,n){const s=en(i)?i:i.name,r=!en(i)&&i.extent||[0,1];if(t===void 0&&!en(i)&&(t=i.count),s){const o=cO(s);if(Sr(o)){const a=Xq(o,{extent:r,count:t});return Zk(e,{minMag:e.LINEAR,format:e.RGB,height:1,wrap:e.CLAMP_TO_EDGE},a,n)}else{if(Fo(o))return UT(o,e);throw new Error("Unknown scheme: "+s)}}}function tpe(i,e="rgb",t,n){const s=Ok(i,en(e)?e:e.type,en(e)?void 0:e.gamma),r=Xq(s);return Zk(t,{minMag:t.LINEAR,format:t.RGB,height:1,wrap:t.CLAMP_TO_EDGE},r,n)}function ipe(i,e,t,n){const s=Math.max(i.length,t||0),r=new Float32Array(s);for(let o=0;o<s;o++)r[o]=i[o%i.length];return Zk(e,{minMag:e.NEAREST,format:e.RED,internalFormat:e.R32F,height:1},r,n)}function UT(i,e,t,n){const s=Jq(i,t);return Zk(e,{minMag:e.NEAREST,format:e.RGB,height:1},s,n)}function Xq(i,{extent:e=[0,1],reverse:t=!1,count:n=256}={}){const s=e[0],r=iw(e)-s,o=ov(n).map(a=>a/(n-1)).map(a=>s+a/r).map(i);return t&&o.reverse(),Jq(o)}function Jq(i,e){const t=Math.max(i.length,e||0),n=new Uint8Array(t*3);for(let s=0;s<t;s++){const r=fu(i[s%i.length]).rgb();n[s*3+0]=r.r,n[s*3+1]=r.g,n[s*3+2]=r.b}return n}class npe{constructor(e,t,n){this._container=e,this._sizeSource=t,this._shaderCache=new Map,this._listeners=[],this.rangeTextures=new WeakMap;const s=document.createElement("canvas");e.appendChild(s);const r=Ege(s,{antialias:!0,depth:!1,premultipliedAlpha:!0});if(!r)throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.");if(!m0(r))throw new Error("Your web browser does not support WebGL 2.0. Chrome, Firefox, and Safari Tech Preview should work.");if(jq(r),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this.canvas=s,this.gl=r,this._pickingAttachmentOptions=[{format:r.RGBA,type:r.UNSIGNED_BYTE,minMag:r.LINEAR,wrap:r.CLAMP_TO_EDGE}],this._pickingBufferInfo=Sge(r,this._pickingAttachmentOptions),r.bindFramebuffer(r.FRAMEBUFFER,null),this.adjustGl(),this._resizeObserver=new ResizeObserver(o=>{this.invalidateSize(),this._emit("resize")}),this._resizeObserver.observe(this._container),this._updateDpr(),this._clearColor=[0,0,0,0],n){const o=fu(n).rgb();this._clearColor=[o.r/255,o.g/255,o.b/255,o.opacity]}}invalidateSize(){this._logicalCanvasSize=void 0,this._updateDpr(),this.adjustGl()}_updateDpr(){this.dpr=window.devicePixelRatio}compileShader(e,t){const n="#version 300 es",s="precision mediump float;";Fo(t)&&(t=t.join(`

`));const r=this.gl,o=t.replaceAll(/ {2,}|^\s*\/\/.*$/gm,"");let a=this._shaderCache.get(o);if(!a){const l=[n,s,t].join(`

`);a=r.createShader(e),r.shaderSource(a,l),r.compileShader(a),this._shaderCache.set(o,a)}return a}adjustGl(){const e=this.getLogicalCanvasSize();this.canvas.style.width=`${e.width}px`,this.canvas.style.height=`${e.height}px`;const t=this.getPhysicalCanvasSize(e);this.canvas.width=t.width,this.canvas.height=t.height,xge(this.gl,this._pickingBufferInfo,this._pickingAttachmentOptions)}finalize(){this._resizeObserver.unobserve(this._container),this.canvas.remove()}getPhysicalCanvasSize(e){return e=e||this.getLogicalCanvasSize(),{width:e.width*this.dpr,height:e.height*this.dpr}}getLogicalCanvasSize(){var e;if(this._logicalCanvasSize)return this._logicalCanvasSize;const t=((e=this._sizeSource)==null?void 0:e.call(this))??{width:void 0,height:void 0},n=window.getComputedStyle(this._container,null),s=t.width??this._container.clientWidth-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight),r=t.height??this._container.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);return this._logicalCanvasSize={width:s,height:r},this._logicalCanvasSize}addEventListener(e,t){this._listeners.push({type:e,listener:t})}_emit(e){for(const t of this._listeners)t.type===e&&t.listener()}readPickingPixel(e,t){const n=this.gl;e*=this.dpr,t*=this.dpr;const s=this.getPhysicalCanvasSize().height,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this._pickingBufferInfo.framebuffer),n.readPixels(e,s-t-1,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}clearAll(){const e=this.gl,{width:t,height:n}=this.getPhysicalCanvasSize();e.viewport(0,0,t,n),e.disable(e.SCISSOR_TEST),e.clearColor(...this._clearColor),e.clear(e.COLOR_BUFFER_BIT)}createRangeTexture(e,t=!1){const n=this.rangeTextures.get(e);if(!t&&n)return;function s(o,a){return pu(a.type)?a.domain().length:a.type=="threshold"?a.domain().length+1:a.type=="quantize"||a.type=="quantile"?o??4:o}const r=e.channel;if(Kd(r)){const o=e.getScaleProps(),a=e.getScale(),l=a.range();let c;if(o.scheme)if(a.type=="threshold"&&l)c=UT(l,this.gl,a.domain().length,n);else{let h=en(o.scheme)?void 0:o.scheme.count;h=s(h,a),c=epe(o.scheme,this.gl,h,n)}else Rk(a.type)||Ds(a.type)&&l.length>2?c=tpe(l,o.interpolate,this.gl,n):c=UT(l,this.gl,a.domain().length,n);this.rangeTextures.set(e,c)}else{const o=e.getScale();if(o.type==="ordinal"||rp(o.type)){const a=Fk(r)?qj(r):c=>c,l=e.getScale().range();this.rangeTextures.set(e,ipe(l.map(a),this.gl,o.domain().length,n))}}}}function spe(i,e="",t=0){const n=/ERROR:\s*\d+:(\d+)/gi,s=[...e.matchAll(n)],r=new Map(s.map((o,a)=>{const l=parseInt(o[1]),c=s[a+1],h=c?c.index:e.length,u=e.substring(o.index,h);return[l-1,u]}));return i.split(`
`).map((o,a)=>{const l=r.get(a);return`${a+1+t}: ${o}${l?`

^^^ ${l}`:""}`}).join(`
`)}function rpe(i,e,t){const n=i.createProgram();i.attachShader(n,e),i.attachShader(n,t),i.linkProgram(n);function s(){let r,o;if(!i.getProgramParameter(n,i.LINK_STATUS)){r=i.getProgramInfoLog(n);for(const a of[e,t])i.getShaderParameter(a,i.COMPILE_STATUS)||(r=i.getShaderInfoLog(a),o=spe(i.getShaderSource(a),r,0)+`
Error compiling: ${r}`,i.deleteShader(a));i.deleteProgram(n)}if(r)return{message:r,detail:o}}return{program:n,getProgramErrors:s}}function Zk(i,e,t,n){return n?fq(i,n,t,e):n=xv(i,{...e,src:t}),n}function ope(...i){const e={get(t,n,s){for(const r of i){const o=r()[n];if(o!==void 0)return o}},has(t,n,s){for(const r of i){const o=r();if(n in o)return!0}return!1}};return new Proxy({},e)}function ape(i){return en(i)||xr(i)||pk(i)}const lpe="SAMPLE_FACET_UNIFORM",t8="SAMPLE_FACET_TEXTURE";class vw{constructor(e){this.unitView=e,this.encoders=void 0,this.bufferInfo=void 0,this.programInfo=void 0,this.vertexArrayInfo=void 0,this.domainUniformInfo=void 0,this.viewUniformInfo=void 0,this.rangeMap=new cpe,this.defaultProperties={get clip(){return["x","y"].map(t=>e.getScaleResolution(t)).some(t=>(t==null?void 0:t.isZoomable())??!1)},xOffset:0,yOffset:0,minBufferSize:0},this.properties=ope(typeof this.unitView.spec.mark=="object"?()=>this.unitView.spec.mark:()=>({}),()=>this.defaultProperties)}get opaque(){return!1}getAttributes(){throw new Error("Not implemented!")}getSupportedChannels(){return["sample","facetIndex","x","y","color","opacity","search","uniqueId"]}getDefaultEncoding(){const e={sample:void 0,uniqueId:void 0};return this.isPickingParticipant()&&(e.uniqueId={field:"_uniqueId"}),e}fixEncoding(e){return e}get encoding(){return v0(this,"encoding",()=>{const e=this.getDefaultEncoding(),t=this.unitView.getEncoding(),n=o=>{const a=this.properties[o];return ape(a)&&{value:a}},s=Object.fromEntries(this.getSupportedChannels().map(o=>[o,n(o)]).filter(o=>o[1].value!==void 0)),r=this.fixEncoding({...e,...s,...t});for(const o of Object.keys(r))this.getSupportedChannels().includes(o)||delete r[o];return r})}getContext(){return this.unitView.context}getType(){return this.unitView.getMarkType()}initializeData(){}initializeEncoders(){this.encoders=Ohe(this)}async initializeGraphics(){}updateGraphicsData(){}getSampleFacetMode(){if(this.encoders.facetIndex)return t8;if(this.unitView.getLayoutAncestors().find(e=>"samples"in e.spec))return lpe}createAndLinkShaders(e,t,n=[]){const s=this.getAttributes();n.push("// view: "+this.unitView.getPathString()),this.domainUniforms=[];let r=[];const o=this.getSampleFacetMode();o&&n.push(`#define ${o}`);for(const u of s){let d;if(u in this.encoding)d=u;else continue;const f=this.encoding[d];if(f)if(va(f))r.push(Rge(d,f.value));else{const g=xo(f)&&f.resolutionChannel||d,p=Zd(g)?this.unitView.getScaleResolution(g).getScale():Pk(),m=Oge(d,p,f);r.push(m.glsl),m.domainUniform&&this.domainUniforms.push(m.domainUniform)}}const a=this.domainUniforms.length?`layout(std140) uniform Domains {
`+this.domainUniforms.map(u=>`    ${u}
`).join("")+`};

`:"",l=[`precision highp float;
`,...n,e8,Yge,a,...r,Qge,Xge,e],c=[...n,e8,Jge,t],h=this.gl;this.programStatus=rpe(h,this.glHelper.compileShader(h.VERTEX_SHADER,l),this.glHelper.compileShader(h.FRAGMENT_SHADER,c))}finalizeGraphicsInitialization(){const e=this.programStatus.getProgramErrors();if(e){e.detail&&console.warn(e.detail);const t=new Error("Cannot create shader program: "+e.message);throw t.view=this.unitView,t}this.programInfo=oge(this.gl,this.programStatus.program),delete this.programStatus,this.domainUniforms.length&&(this.domainUniformInfo=j6(this.gl,this.programInfo,"Domains")),this.viewUniformInfo=j6(this.gl,this.programInfo,"View"),this.gl.useProgram(this.programInfo.program),this._setDatums(),Wr(this.programInfo,{uSampleFacet:[0,1,0,1],uTransitionOffset:0})}_setDatums(){for(const[e,t]of Object.entries(this.encoding))if(pw(t)){const n=this.encoders[e],s=n.indexer?n.indexer(t.datum):dx(n.scale.type)?Zq(+t.datum):+t.datum;Wr(this.programInfo,{[NO+e]:s})}}deleteGraphicsData(){if(this.bufferInfo){const e=this.gl;for(let t=0;t<8;t++)e.disableVertexAttribArray(t);Object.values(this.bufferInfo.attribs).forEach(t=>this.gl.deleteBuffer(t.buffer)),this.bufferInfo.indices&&this.gl.deleteBuffer(this.bufferInfo.indices),this.bufferInfo=void 0}}updateBufferInfo(e){if(this.gl.bindVertexArray(null),this.bufferInfo&&e.vertexCount<=this.bufferInfo.allocatedVertices)for(const[t,n]of Object.entries(e.arrays))n.data&&bue(this.gl,this.bufferInfo.attribs[t],n.data,0);else this.deleteGraphicsData(),this.bufferInfo=yue(this.gl,e.arrays,{numElements:e.vertexCount}),this.bufferInfo.allocatedVertices=e.allocatedVertices,this.vertexArrayInfo=void 0}get glHelper(){return this.getContext().glHelper}get gl(){return this.glHelper.gl}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}isReady(){return this.bufferInfo&&this.programInfo}isPickingParticipant(){if(this.properties.tooltip===null)return!1;for(const e of this.unitView.getLayoutAncestors())if(!e.isPickingSupported())return!1;return!0}prepareRender(e){const t=this.glHelper,n=this.gl,s=[];if(s.push(()=>{this.vertexArrayInfo||(this.vertexArrayInfo=Dge(this.gl,this.programInfo,this.bufferInfo)),n.useProgram(this.programInfo.program)}),this.domainUniformInfo){for(const[o,a]of Object.entries(this.domainUniformInfo.setters)){const l=o.substring(qq.length),c=this.encoding[l],h=xo(c)&&c.resolutionChannel||l;if(Zd(h)){const u=this.unitView.getScaleResolution(h).getScale();s.push(()=>{const d=pu(u.type)?[0,u.domain().length]:u.domain();a(dx(u.type)?Wge(d):d)})}}s.push(()=>q6(n,this.programInfo,this.domainUniformInfo))}for(const[o,a]of Object.entries(this.encoding))if(xo(a)){const l=xo(a)&&a.resolutionChannel||o;if(Zd(l)){const c=this.unitView.getScaleResolution(l),h=t.rangeTextures.get(c);h&&s.push(()=>Wr(this.programInfo,{[VT+o]:h}))}}this.getSampleFacetMode()==t8&&s.push(()=>{let o;for(const a of this.unitView.getLayoutAncestors())if(o=a.getSampleFacetTexture(),o)break;if(!o)throw new Error("No facet texture available. This is bug.");Wr(this.programInfo,{uSampleFacetTexture:o})});const r=(e.picking??!1)&&this.isPickingParticipant();return s.push(()=>G6(this.viewUniformInfo,{uViewOpacity:this.unitView.getEffectiveOpacity(),uPickingEnabled:r})),this.opaque||e.picking?s.push(()=>n.disable(n.BLEND)):s.push(()=>n.enable(n.BLEND)),s}prepareSampleFacetRendering(e){const t=e.sampleFacetRenderingOptions,n=this.programInfo.uniformSetters.uSampleFacet;if(t&&n){const s=t.locSize?t.locSize.location:0,r=t.locSize?t.locSize.size:1;if(s>1||s+r<0)return!1;const o=t.targetLocSize?t.targetLocSize.location:s,a=t.targetLocSize?t.targetLocSize.size:r;this.gl.uniform4f(n.location,s,r,o,a)}return!0}render(e){}createRenderCallback(e,t){var n;if(!this.bufferInfo){const d=new Error(`${this.getType()} mark has no data. This is bug.`);throw d.view=this.unitView,d}const s=this;let r;const o=(n=this.unitView.getScaleResolution("x"))==null?void 0:n.getScale(),a=o&&Ds(o.type),l=["index","locus"].includes(o==null?void 0:o.type)?-1:0,c=[0,0];r=d=>{if(a&&d.xIndex){const f=o.domain(),g=d.xIndex(f[0]+l,f[1],c),p=g[0],m=g[1]-p;m>0&&e(p,m)}else e(d.offset,d.count)};const h=this.rangeMap.get(void 0).count==0?t.facetId:void 0,u=this.rangeMap.get(h);return t.sampleFacetRenderingOptions?function(){u.count&&s.prepareSampleFacetRendering(t)&&r(u)}:function(){u.count&&r(u)}}setViewport(e,t){e=e.flatten();const n=this.unitView.context.devicePixelRatio,s=this.gl,r=this.properties,o=this.glHelper.getLogicalCanvasSize(),a=.5,l=(r.xOffset??0)+a,c=(r.yOffset??0)+a;let h,u=e;if(r.clip!=="never"&&(r.clip||t)){let d=0,f=0,g;if(t){if(u=e.intersect(t).flatten(),!u.isDefined())return!1;g=[e.width/u.width,e.height/u.height],f=Math.max(0,e.y2-t.y2),d=Math.max(0,e.x2-t.x2)}else g=[1,1];const p=[u.x,o.height-u.y2,u.width,u.height].map(w=>w*n),m=p.map(w=>Math.round(w)),[v,b]=p.map((w,y)=>w-m[y]);s.viewport(...m),s.scissor(...m),s.enable(s.SCISSOR_TEST),h={uViewOffset:[(l+d+v/n)/u.width,-(c+f-b/n)/u.height],uViewScale:g}}else{if(!e.isDefined())return!1;s.viewport(0,0,o.width*n,o.height*n),s.disable(s.SCISSOR_TEST),h={uViewOffset:[(e.x+l)/o.width,(o.height-e.y-c-e.height)/o.height],uViewScale:[e.width/o.width,e.height/o.height]}}return G6(this.viewUniformInfo,{...h,uViewportSize:[e.width,e.height],uDevicePixelRatio:n}),q6(this.gl,this.programInfo,this.viewUniformInfo),!0}findDatumAt(e,t){}}class cpe extends ff{constructor(){super([],JSON.stringify)}get(e){let t=super.get(e);return t===void 0&&(t={offset:0,count:0,xIndex:void 0},super.set(e,t)),t}migrateEntries(e){for(const[t,n]of e.entries())Object.assign(this.get(t),n)}}function $T(i,e){const t=Vhe(e);let n=i[e]&&{...i[e]},s=i[t]&&{...i[t]};if(!(va(n)||va(s))){if(n){if(!xo(i[e]))return;if(s){if(n.type!="quantitative"){const r=(1-(n.band||1))/2;n.band=r,s.band=-r}}else if(n.type=="quantitative")s={datum:0};else{s={...n};const r=(1-(n.band??1))/2;n.band=0+r,s.band=1-r}}else n={value:0},s={value:1};i[e]=n,i[t]=s}}function eG(i,e){i.stroke||(e?i.stroke={value:null}:i.stroke={resolutionChannel:"color",...i.color}),va(i.stroke)&&i.stroke.value===null&&(i.strokeWidth={value:0}),i.strokeOpacity||(i.strokeOpacity={resolutionChannel:"opacity",...i.opacity})}function tG(i,e){va(i.fill)&&i.fill.value===null?i.fillOpacity={value:0}:i.fill||(i.fill={resolutionChannel:"color",...i.color},!e&&!i.fillOpacity&&(i.fillOpacity={value:0})),i.fillOpacity||(e?i.fillOpacity={resolutionChannel:"opacity",...i.opacity}:i.fillOpacity={value:0})}class hpe extends vw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,filled:!0,color:"#4c78a8",opacity:1,strokeWidth:3,cornerRadius:0,minWidth:.5,minHeight:.5,minOpacity:1,tessellationZoomThreshold:10,tessellationTiles:35}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","fill","stroke","fillOpacity","strokeOpacity","strokeWidth"]}get opaque(){return v0(this,"opaque",()=>!this._isRoundedCorners()&&!this._isStroked()&&va(this.encoding.fillOpacity)&&this.encoding.fillOpacity.value==1&&this.properties.minOpacity==1)&&this.unitView.getEffectiveOpacity()==1}fixEncoding(e){return $T(e,"x"),$T(e,"y"),eG(e,this.properties.filled),tG(e,this.properties.filled),delete e.color,delete e.opacity,e}onBeforeSampleAnimation(){}onAfterSampleAnimation(){}_isRoundedCorners(){const e=this.properties;return e.cornerRadius||e.cornerRadiusBottomLeft||e.cornerRadiusBottomRight||e.cornerRadiusTopLeft||e.cornerRadiusTopRight}_isStroked(){const e=this.encoding.strokeWidth;return!(va(e)&&!e.value)}async initializeGraphics(){await super.initializeGraphics();const e=[];this._isRoundedCorners()&&e.push("ROUNDED_CORNERS"),this._isStroked()&&e.push("STROKED"),this.createAndLinkShaders(Ige,Tge,e.map(t=>"#define "+t))}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Wr(this.programInfo,{uMinSize:[e.minWidth,e.minHeight],uMinOpacity:e.minOpacity,uCornerRadii:[e.cornerRadiusTopRight??e.cornerRadius,e.cornerRadiusBottomRight??e.cornerRadius,e.cornerRadiusTopLeft??e.cornerRadius,e.cornerRadiusBottomLeft??e.cornerRadius]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new jge({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>b0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{_w(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n)},e)}findDatumAt(e,t){e=_l(e);const n=this.unitView.getCollector().facetBatches.get(e);if(!n)return;const s=this.encoders,r=s.x.scale.type;if(pu(r)){const o=s.x.accessor;return n.find(a=>t==o(a))}else{const o=s.x.accessor,a=s.x2.accessor;return n.find(l=>t>=o(l)&&t<a(l))}}}const upe=`/***The stroke should only grow inwards,e.g,the diameter/outline is not affected by the stroke width.*Thus,a point that has a zero size has no visible stroke. This allows strokes to be used with*geometric zoom,etc.*/uniform bool uInwardStroke;uniform lowp float uMaxRelativePointDiameter;uniform float uScaleFactor;uniform float uMaxPointSize;uniform float uZoomLevel;uniform float uSemanticThreshold;out float vRadius;out float vRadiusWithPadding;out lowp vec4 vFillColor;out lowp vec4 vStrokeColor;out lowp float vShape;out lowp float vHalfStrokeWidth;out mat2 vRotationMatrix;float computeSemanticThresholdFactor(){return getScaled_semanticScore()>=uSemanticThreshold ? 1.0 : 0.0;}/***Computes a scaling factor for the points in a sample-faceted view.*/float getDownscaleFactor(vec2 pos){if(!isFacetedSamples()){return 1.0;}float sampleFacetHeight=getSampleFacetHeight(pos);float maxPointDiameter=sqrt(uMaxPointSize);float factor=sampleFacetHeight*uViewportSize.y*uMaxRelativePointDiameter;return clamp(0.0,maxPointDiameter,factor)/maxPointDiameter;}vec2 getDxDy(){
#if defined(dx_DEFINED) || defined(dy_DEFINED)
return vec2(getScaled_dx(),getScaled_dy())/uViewportSize;
#else
return vec2(0.0,0.0);
#endif
}void main(void){float semanticThresholdFactor=computeSemanticThresholdFactor();if(semanticThresholdFactor<=0.0){gl_PointSize=0.0;gl_Position=vec4(100.0,0.0,0.0,0.0);return;}float size=getScaled_size();vec2 pos=vec2(getScaled_x(),getScaled_y())+getDxDy();gl_Position=unitToNdc(applySampleFacet(pos));float strokeWidth=getScaled_strokeWidth();float diameter=sqrt(size)*uScaleFactor*semanticThresholdFactor*getDownscaleFactor(pos);float opacity=uViewOpacity;if(strokeWidth<=0.0||uInwardStroke){float minDiameter=1.0/uDevicePixelRatio;if(diameter<minDiameter){opacity*=pow(diameter/minDiameter,2.5);diameter=minDiameter;}}float fillOpa=getScaled_fillOpacity()*opacity;float strokeOpa=getScaled_strokeOpacity()*opacity;vShape=getScaled_shape();bool circle=vShape==0.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);vRotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);float roomForRotation=circle ? 1.0 : sin(mod(angle,PI/2.0)+PI/4.0)/sin(PI/4.0);float aaPadding=1.0/uDevicePixelRatio;float rotationPadding=(diameter*roomForRotation)-diameter;float strokePadding=uInwardStroke ? 0.0 : strokeWidth*(circle ? 1.0 : sqrt(3.0));float padding=rotationPadding+strokePadding+aaPadding;gl_PointSize=(diameter+padding)*uDevicePixelRatio;vRadius=diameter/2.0;vRadiusWithPadding=vRadius+padding/2.0;vHalfStrokeWidth=strokeWidth/2.0;vFillColor=vec4(getScaled_fill()*fillOpa,fillOpa);vStrokeColor=vec4(getScaled_stroke()*strokeOpa,strokeOpa);setupPicking();}`,dpe="const lowp vec4 white=vec4(1.0);const lowp vec4 black=vec4(0.0,0.0,0.0,1.0);uniform bool uInwardStroke;uniform float uGradientStrength;in float vRadius;in float vRadiusWithPadding;in lowp vec4 vFillColor;in lowp vec4 vStrokeColor;in lowp float vShape;in lowp float vHalfStrokeWidth;in mat2 vRotationMatrix;out lowp vec4 fragColor;const float CIRCLE=0.0;const float SQUARE=1.0;const float TRIANGLE_UP=2.0;const float CROSS=3.0;const float DIAMOND=4.0;const float TRIANGLE_DOWN=5.0;const float TRIANGLE_RIGHT=6.0;const float TRIANGLE_LEFT=7.0;float circle(vec2 p,float r){return length(p)-r;}float square(vec2 p,float r){p=abs(p);return max(p.x,p.y)-r;}float equilateralTriangle(vec2 p,float r,bool flip,bool swap){if(swap){p.xy=p.yx;}if(flip){p.y=-p.y;}float k=sqrt(3.0);float kr=k*r;p.y-=kr/2.0;return max((abs(p.x)*k+p.y)/2.0,-p.y-kr);}float crossShape(vec2 p,float r){p=abs(p);vec2 b=vec2(0.4,1.0)*r;vec2 v=abs(p)-b.xy;vec2 h=abs(p)-b.yx;return min(max(v.x,v.y),max(h.x,h.y));}float diamond(vec2 p,float r){p=abs(p);return(max(abs(p.x-p.y),abs(p.x+p.y))-r)/sqrt(2.0);}void main(){float d;vec2 p=vRotationMatrix*(2.0*gl_PointCoord-1.0)*vRadiusWithPadding;float r=vRadius;if(vShape==CIRCLE){d=circle(p,r);}else if(vShape==SQUARE){d=square(p,r);}else if(vShape==TRIANGLE_UP){d=equilateralTriangle(p,r,true,false);}else if(vShape==CROSS){d=crossShape(p,r);}else if(vShape==DIAMOND){d=diamond(p,r);}else if(vShape==TRIANGLE_DOWN){d=equilateralTriangle(p,r,false,false);}else if(vShape==TRIANGLE_RIGHT){d=equilateralTriangle(p,r,false,true);}else if(vShape==TRIANGLE_LEFT){d=equilateralTriangle(p,r,true,true);}else{d=0.0;}if(!uPickingEnabled){lowp vec4 fillColor=mix(vFillColor,white,-d*uGradientStrength/vRadius);fragColor=distanceToColor(d+(uInwardStroke ? vHalfStrokeWidth : 0.0),fillColor,vStrokeColor,vHalfStrokeWidth);}else if(d-vHalfStrokeWidth<=0.0){fragColor=vPickingColor;}else{discard;}}",Jc=1<<0,$u=1<<1,MO=1<<2,fpe={};class An{get behavior(){return 0}constructor(){this.children=[],this.parent=void 0,this.completed=!1}reset(){this.completed=!1;for(const e of this.children)e.reset()}initialize(){}_updatePropagator(){this._propagate=Function("children",ov(this.children.length).map(e=>`const child${e} = children[${e}];`).join(`
`)+`return function propagate(datum) {${ov(this.children.length).map(e=>`child${e}.handle(datum);`).join(`
`)}}`)(this.children)}setParent(e){this.parent=e}addChild(e){if(e.parent)throw new Error("Cannot add the child! It already has a parent.");return this.children.push(e),e.setParent(this),this._updatePropagator(),this}adopt(e){e.parent&&e.parent.removeChild(e),this.addChild(e)}adoptChildrenOf(e){for(const t of e.children)this.adopt(t)}insertAsParent(e){if(this.isRoot())throw new Error("Cannot insert a new parent for a root node!");e.parent=this.parent,this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.parent=void 0,e.addChild(this)}removeChild(e){const t=this.children.indexOf(e);if(t>-1)this.children.splice(t,1),e.parent=void 0,this._updatePropagator();else throw new Error("Trying to remove an unknown child node!")}excise(){if(this.isRoot())throw new Error("Cannot excise root node!");if(this.isTerminal())this.parent.removeChild(this);else if(this.children.length==1){const e=this.children[0];e.setParent(this.parent),this.parent.children[this.parent.children.indexOf(this)]=e,this.parent._updatePropagator(),this.setParent(void 0),this.children.length=0}else throw new Error("Cannot excise a node that has multiple children!")}isRoot(){return!this.parent}isBranching(){return this.children.length>1}isTerminal(){return this.children.length==0}visit(e){e(this);for(const t of this.children)t.visit(e);e.afterChildren&&e.afterChildren(this)}subtreeToString(e=0){const t=this.children.map(n=>n.subtreeToString(e+1)).join("");return`${" ".repeat(e*2)}* ${this.constructor.name}${("identifier"in this&&this.identifier?": "+this.identifier:"")??""} 
${t}`}getGlobalObject(){return this.parent?this.parent.getGlobalObject():fpe}handle(e){this._propagate(e)}complete(){this.completed=!0;for(const e of this.children)e.complete()}beginBatch(e){for(const t of this.children)t.beginBatch(e)}_propagate(e){}}function iG(i){return i.type=="file"}function gpe(i){return i.type=="facet"}class nG extends An{constructor(e){super(),this.k=e.size||500,this.reset()}reset(){super.reset(),this.reservoir=[],this.W=void 0,this.ingester=this._initialIngester}_initialIngester(e){this.reservoir.push(e),this.reservoir.length==this.k&&(this.W=Math.exp(Math.log(Math.random())/this.k),this.i=this.k,this.next=this.i,this.ingester=this._finalIngester,this._setNextStop())}_finalIngester(e){++this.i==this.next&&(this.reservoir[Math.floor(Math.random()*this.k)]=e,this.W*=Math.exp(Math.log(Math.random())/this.k),this._setNextStop())}_setNextStop(){this.next+=Math.floor(Math.log(Math.random())/Math.log(1-this.W))+1}handle(e){this.ingester(e)}complete(){for(const e of this.reservoir)this._propagate(e);super.complete()}}function ppe(i,e,t){const n=new nG({type:"sample",size:i});for(const s of e)n.handle(t(s));return n.complete(),n.reservoir}const mpe={};class _pe extends vw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,color:"#4c78a8",filled:!0,opacity:1,size:100,semanticScore:0,shape:"circle",strokeWidth:2,fillGradientStrength:0,dx:0,dy:0,angle:0,sampleFacetPadding:.1,semanticZoomFraction:.02}))}getAttributes(){return["inwardStroke","uniqueId","facetIndex","x","y","size","semanticScore","shape","strokeWidth","gradientStrength","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"size","semanticScore","shape","strokeWidth","dx","dy","fill","stroke","fillOpacity","strokeOpacity","angle"]}getDefaultEncoding(){return{...super.getDefaultEncoding(),...mpe}}fixEncoding(e){return eG(e,this.properties.filled),tG(e,this.properties.filled),delete e.color,delete e.opacity,e}initializeData(){super.initializeData();const e=this.unitView.getAccessor("semanticScore");e&&(this.sampledSemanticScores=Float32Array.from(ppe(1e4,this.unitView.getCollector().getData(),e)),this.sampledSemanticScores.sort((t,n)=>t-n))}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(upe,dpe)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Wr(this.programInfo,{uInwardStroke:e.inwardStroke,uGradientStrength:e.fillGradientStrength,uMaxRelativePointDiameter:1-2*e.sampleFacetPadding})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new Gge({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}_getGeometricScaleFactor(){const e=Math.pow(2,this.properties.geometricZoomBound||0);return Math.pow(Math.min(1,this.unitView.getZoomLevel()/e),1/3)}_getMaxPointSize(){const e=this.encoders.size;return e.constant?e(null):e.scale.range().reduce((t,n)=>Math.max(t,n))}getSemanticThreshold(){if(this.sampledSemanticScores){const e=Math.max(0,1-this.properties.semanticZoomFraction*this.unitView.getZoomLevel());if(e<=0)return-1/0;if(e>=1)return 1/0;{const t=this.sampledSemanticScores;return o$(t,e)}}else return-1}prepareRender(e){const t=super.prepareRender(e);return t.push(()=>Wr(this.programInfo,{uMaxPointSize:this._getMaxPointSize(),uScaleFactor:this._getGeometricScaleFactor(),uSemanticThreshold:this.getSemanticThreshold()})),t.push(()=>b0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{s&&_w(t,this.vertexArrayInfo,t.POINTS,s,n)},e)}}const bpe="const int BUTT=0;const int SQUARE=1;const int ROUND=2;in float pos;in float side;uniform float uMinLength;uniform mediump float uDashTextureSize;uniform lowp int uStrokeCap;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;out highp vec2 vPosInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float size=getScaled_size();float opacity=getScaled_opacity()*uViewOpacity;if(size<pixelSize){opacity*=size/pixelSize;size=pixelSize;}vec2 a=applySampleFacet(vec2(getScaled_x(),getScaled_y()));vec2 b=applySampleFacet(vec2(getScaled_x2(),getScaled_y2()));vec2 tangent=b-a;float offset=0.0;float relativeDiff=0.0;if(uMinLength>0.0||uStrokeCap!=BUTT){float len=length(tangent*uViewportSize);float diff=max(0.0,uMinLength-len);if(uStrokeCap!=BUTT){diff+=size;}relativeDiff=diff/len;offset=relativeDiff*(pos-0.5);}vec2 p=pos<1.0? a+tangent*(pos+offset): b+tangent*offset;float aaPadding=pixelSize;vec2 normal=normalize(vec2(-tangent.y,tangent.x)/uViewportSize);p+=normal*side*(size+aaPadding)/uViewportSize;gl_Position=unitToNdc(p);vColor=vec4(getScaled_color()*opacity,opacity);vSize=size;vNormalLengthInPixels=side*(size+aaPadding);vPosInPixels=vec2(pos,(1.0-pos))*(1.0+relativeDiff)*length(tangent*uViewportSize)-vec2(uStrokeCap!=BUTT ? size/2.0 : 0.0);setupPicking();}",vpe="const int BUTT=0;const int SQUARE=1;const int ROUND=2;uniform sampler2D uDashTexture;uniform float uDashTextureSize;uniform float uStrokeDashOffset;uniform lowp int uStrokeCap;in vec4 vColor;in float vSize;in vec2 vPosInPixels;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distanceFromEnd=-min(vPosInPixels[0],vPosInPixels[1]);float distance;if(distanceFromEnd>0.0&&uStrokeCap==ROUND){distance=length(vec2(distanceFromEnd,vNormalLengthInPixels));}else{distance=abs(vNormalLengthInPixels);}float opacity=clamp(((vSize/2.0-distance)*dpr),-0.5,0.5)+0.5;if(uDashTextureSize>0.0){float pos=(vPosInPixels[0]+uStrokeDashOffset)*dpr;float floored=floor(pos);vec2 texelPositions=(floored+vec2(0.5,1.5))/dpr/uDashTextureSize;opacity*=mix(texture(uDashTexture,vec2(texelPositions[0],0)).r,texture(uDashTexture,vec2(texelPositions[1],0)).r,clamp((pos-floored),0.0,1.0));}fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class wpe extends vw{constructor(e){super(e),this.dashTextureSize=0,Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x2:void 0,y2:void 0,size:1,color:"black",opacity:1,minLength:0,strokeDash:null,strokeDashOffset:0,strokeCap:"butt"}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){if(!(e.x&&e.y&&e.x2&&e.y2))if(e.x&&e.x2&&!e.y)e.y={value:.5},e.y2=e.y;else if(e.y&&e.y2&&!e.x)e.x={value:.5},e.x2=e.x;else if(e.x&&!e.y)e.y={value:0},e.y2={value:1},e.x2=e.x;else if(e.y&&!e.x)e.x={value:0},e.x2={value:1},e.y2=e.y;else if(e.x&&e.y&&e.y2)e.x2=e.x;else if(e.y&&e.x&&e.x2)e.y2=e.y;else if(e.y&&e.x)if(!e.x2&&xo(e.y)&&e.y.type=="quantitative")e.x2=e.x,e.y2={datum:0};else if(!e.y2&&xo(e.x)&&e.x.type=="quantitative")e.y2=e.y,e.x2={datum:0};else throw new Error("A bug!");else throw new Error("Invalid x and y encodings for rule mark: "+JSON.stringify(e));return e}async initializeGraphics(){if(await super.initializeGraphics(),this.properties.strokeDash){const e=this.gl,t=ype(this.properties.strokeDash);this.dashTexture=xv(e,{mag:e.NEAREST,min:e.NEAREST,internalFormat:e.R8,format:e.RED,src:t,height:1}),this.dashTextureSize=t.length}this.createAndLinkShaders(bpe,vpe)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Wr(this.programInfo,{uMinLength:e.minLength,uDashTextureSize:this.dashTextureSize,uStrokeCap:["butt","square","round"].indexOf(e.strokeCap)})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new qge({encoders:this.encoders,attributes:this.getAttributes(),numItems:Math.max(t,this.properties.minBufferSize||0)});n.addBatches(e.facetBatches);const s=n.toArrays();this.rangeMap.migrateEntries(s.rangeMap),this.updateBufferInfo(s)}prepareRender(e){const t=super.prepareRender(e);return this.dashTexture&&t.push(()=>Wr(this.programInfo,{uDashTexture:this.dashTexture,uStrokeDashOffset:this.properties.strokeDashOffset})),t.push(()=>b0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>_w(t,this.vertexArrayInfo,t.TRIANGLE_STRIP,s,n),e)}}function ype(i){if(i.length==0||i.length%2||i.findIndex(r=>Math.round(r)!=r||r<1||r>1e3)>=0)throw new Error("Invalid stroke dash pattern: "+JSON.stringify(i));const e=i.reduce((r,o)=>r+o),t=new Uint8Array(e);let n=!0,s=0;for(let r of i){for(;r;)t[s++]=n&&255||0,r--;n=!n}return t}const Cpe=`uniform float uSagittaScaleFactor;uniform float uMinSagittaLength;in vec2 strip;out vec4 vColor;out float vSize;out float vNormalLengthInPixels;void main(void){float pixelSize=1.0/uDevicePixelRatio;float opacity=getScaled_opacity()*uViewOpacity;vec2 a=vec2(getScaled_x(),getScaled_y())*uViewportSize;vec2 b=vec2(getScaled_x2(),getScaled_y2())*uViewportSize;vec2 chordVector=b-a;vec2 unitChordVector=normalize(chordVector);vec2 chordNormal=vec2(-unitChordVector.y,unitChordVector.x);float sagitta=max(length(chordVector)/2.0*uSagittaScaleFactor,uMinSagittaLength);bool compress=false;if(compress){float maxSagittaLen=length(chordNormal*uViewportSize);float maxChordLen=length(unitChordVector*uViewportSize);float threshold=maxSagittaLen*0.5;if(sagitta>threshold){float m=(maxSagittaLen-threshold)/(maxChordLen-threshold);sagitta=(sagitta-threshold)*m+threshold;}}vec2 controlOffset=chordNormal*sagitta/0.75;vec2 p1=a;vec2 p2=a+controlOffset;vec2 p3=b+controlOffset;vec2 p4=b;float t=smoothstep(0.0,1.0,strip.x);vec2 C1=p4-3.0*p3+3.0*p2-p1;vec2 C2=3.0*p3-6.0*p2+3.0*p1;vec2 C3=3.0*p2-3.0*p1;vec2 C4=p1;vec2 p;if(t==0.0){p=p1;}else if(t==1.0){p=p4;}else{p=C1*t*t*t+C2*t*t+C3*t+C4;}vec2 tangent=normalize(3.0*C1*t*t+2.0*C2*t+C3);vec2 normal=vec2(-tangent.y,tangent.x);
#ifdef size2_DEFINED
float mixedSize=mix(getScaled_size(),getScaled_size2(),t);
#else
float mixedSize=getScaled_size();
#endif
if(mixedSize<pixelSize){opacity*=mixedSize/pixelSize;mixedSize=pixelSize;}float paddedSize=mixedSize+pixelSize;vNormalLengthInPixels=strip.y*paddedSize;p+=normal*vNormalLengthInPixels;gl_Position=pixelsToNdc(p);
#ifdef color2_DEFINED
vec3 color=mix(getScaled_color(),getScaled_color2(),t);
#else
vec3 color=getScaled_color();
#endif
vColor=vec4(color*opacity,opacity);vSize=paddedSize;setupPicking();}`,Spe="in lowp vec4 vColor;in float vSize;in float vNormalLengthInPixels;out lowp vec4 fragColor;void main(void){float dpr=uDevicePixelRatio;float distance=abs(vNormalLengthInPixels);float opacity=clamp(((vSize/2.0-distance)*dpr),0.0,1.0);fragColor=vColor*opacity;if(uPickingEnabled){fragColor=vPickingColor;}}";class xpe extends vw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:0,x2:void 0,y:0,y2:void 0,size:1,color:"black",opacity:1,segments:101,sagittaScaleFactor:1,minSagittaLength:1.5}))}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","size","height","color","opacity"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size"]}fixEncoding(e){return e.x||(e.x2=e.x),e.y2||(e.y2=e.y),e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(Cpe,Spe)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Wr(this.programInfo,{uSagittaScaleFactor:e.sagittaScaleFactor,uMinSagittaLength:e.minSagittaLength})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getItemCount(),n=new Kge({encoders:this.encoders,attributes:this.getAttributes(),numItems:t});n.addBatches(e.facetBatches);const s=n.toArrays();s.arrays.strip={data:Dpe(this.properties.segments),numComponents:2},this.rangeMap.migrateEntries(s.rangeMap),this.arrays=Object.fromEntries(Object.entries(s.arrays).map(([r,o])=>[r,{...o,data:void 0}])),this.updateBufferInfo(s)}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>{this.gl.bindVertexArray(this.vertexArrayInfo.vertexArrayObject);for(const r of Object.entries(this.bufferInfo.attribs)){const[o,a]=r;a.buffer&&a.numComponents&&a.divisor&&(a.offset=n*this.arrays[o].numComponents*4)}b0(t,this.programInfo,this.bufferInfo),_w(t,this.bufferInfo,t.TRIANGLE_STRIP,(this.properties.segments+1)*2,0,s)},e)}}function Dpe(i){let e=0;const t=[];for(;e<=i;e++)t.push(e/i,.5),t.push(e/i,-.5);return t}const kpe=`uniform float uSdfNumerator;uniform vec2 uD;in mediump vec2 vertexCoord;in lowp vec2 textureCoord;uniform vec4 uViewportEdgeFadeWidth;uniform vec4 uViewportEdgeFadeDistance;uniform bool uSqueeze;uniform bool uLogoLetter;in float width;uniform ivec2 uAlign;
#ifdef x2_DEFINED
uniform float uPaddingX;uniform bool uFlushX;
#endif
#ifdef y2_DEFINED
uniform float uPaddingY;uniform bool uFlushY;
#endif
out vec2 vTexCoord;out vec4 vColor;out float vSlope;out float vEdgeFadeOpacity;struct RangeResult{float pos;float scale;};float minValue(vec4 v){return min(min(v.x,v.y),min(v.z,v.w));}float maxValue(vec4 v){return max(max(v.x,v.y),max(v.z,v.w));}/***All measures are in[0,1]*/RangeResult positionInsideRange(float a,float b,float width,float padding,int align,bool flush){float span=b-a;float paddedWidth=width+2.0*padding;if(a>1.0||b<0.0){return RangeResult(0.0,0.0);}float extra=max(0.0,span-paddedWidth);float pos;if(align==0){float centre=a+b;if(flush){float leftOver=max(0.0,paddedWidth-centre);centre+=min(leftOver,extra);float rightOver=max(0.0,paddedWidth+centre-2.0);centre-=min(rightOver,extra);}pos=centre/2.0;}else if(align<0){float edge=a;if(flush){float over=max(0.0,-edge);edge+=min(over,extra);}pos=edge+padding;}else{float edge=b;if(flush){float over=max(0.0,edge-1.0);edge-=min(over,extra);}pos=edge-padding;}float scale=clamp((span-padding)/paddedWidth,0.0,1.0);return RangeResult(pos,scale);}vec2 calculateRotatedDimensions(float width,mat2 rotationMatrix){vec2 a=abs(rotationMatrix*vec2(width/2.0,0.5));vec2 b=abs(rotationMatrix*vec2(width/2.0,-0.5));return vec2(max(a.x,b.x),max(a.y,b.y))*2.0;}ivec2 fixAlignForAngle(ivec2 align,float angleInDegrees){float a=mod(angleInDegrees+45.0,360.0);int x=align.x;int y=-align.y;if(a<90.0){return ivec2(x,y);}else if(a<180.0){return ivec2(y,-x);}else if(a<270.0){return ivec2(-x,y);}else{return ivec2(-y,x);}}void main(void){float opacity=getScaled_opacity()*uViewOpacity;vec2 size=vec2(getScaled_size());float x=getScaled_x();float y=getScaled_y();float scale=1.0;float angleInDegrees=getScaled_angle();float angle=-angleInDegrees*PI/180.0;float sinTheta=sin(angle);float cosTheta=cos(angle);mat2 rotationMatrix=mat2(cosTheta,sinTheta,-sinTheta,cosTheta);vec2 flushSize=calculateRotatedDimensions(width,rotationMatrix);
#if defined(x2_DEFINED) || defined(y2_DEFINED)
ivec2 align=fixAlignForAngle(uAlign,angleInDegrees);
#else
ivec2 align=uAlign;
#endif
#ifdef x2_DEFINED
float x2=getScaled_x2();if(uLogoLetter){size.x=(x2-x)*uViewportSize.x;x+=(x2-x)/2.0;}else{float x2=getScaled_x2();RangeResult result=positionInsideRange(min(x,x2),max(x,x2),size.x*scale*flushSize.x/uViewportSize.x,uPaddingX/uViewportSize.x,align.x,uFlushX);x=result.pos;scale*=result.scale;}
#endif
vec2 pos=applySampleFacet(vec2(x,y));
#ifdef y2_DEFINED
float y2=getScaled_y2();vec2 pos2=applySampleFacet(vec2(x,y2));if(uLogoLetter){size.y=(pos2.y-pos.y)*uViewportSize.y;pos.y+=(pos2.y-pos.y)/2.0;}else{RangeResult result=positionInsideRange(min(pos.y,pos2.y),max(pos.y,pos2.y),size.y*scale*flushSize.y/uViewportSize.y,uPaddingY/uViewportSize.y,align.y,uFlushY);pos.y=result.pos;scale*=result.scale;}
#endif
if(scale<1.0){if(uSqueeze){vec2 scaleFadeExtent=vec2(3.0,6.0)/size;if(scale<scaleFadeExtent[0]){gl_Position=vec4(0.0);return;}size*=scale;opacity*=linearstep(scaleFadeExtent[0],scaleFadeExtent[1],scale);}else if(scale<1.0){gl_Position=vec4(0.0);return;}}vec2 charPos=rotationMatrix*(vertexCoord*size+uD);vec2 unitPos=pos+charPos/uViewportSize;gl_Position=unitToNdc(unitPos);vSlope=max(1.0,min(size.x,size.y)/uSdfNumerator);vColor=vec4(getScaled_color()*opacity,opacity);vTexCoord=textureCoord;if(maxValue(uViewportEdgeFadeDistance)>-pow(10.0,10.0)){vEdgeFadeOpacity=minValue(((vec4(1.0,1.0,0.0,0.0)+vec4(-1.0,-1.0,1.0,1.0)*unitPos.yxyx)*uViewportSize.yxyx-uViewportEdgeFadeDistance)/uViewportEdgeFadeWidth);}else{vEdgeFadeOpacity=1.0;}setupPicking();}`,Lpe="uniform sampler2D uTexture;uniform bool uLogoLetter;in vec2 vTexCoord;in float vEdgeFadeOpacity;in vec4 vColor;in float vSlope;out lowp vec4 fragColor;float median(float r,float g,float b){return max(min(r,g),min(max(r,g),b));}void main(){vec3 c=texture(uTexture,vTexCoord).rgb;float sigDist=1.0-median(c.r,c.g,c.b);float slope=uLogoLetter? 0.7/length(vec2(dFdy(sigDist),dFdx(sigDist))): vSlope;float opa=clamp((sigDist-0.5)*slope+0.5,0.0,1.0);opa*=pow(clamp(vEdgeFadeOpacity,0.0,1.0),2.2);fragColor=vColor*opa;if(uPickingEnabled){fragColor=vPickingColor;}}",Ape={left:-1,center:0,right:1},Epe={top:-1,middle:0,bottom:1,alphabetic:1};class Ipe extends vw{constructor(e){super(e),Object.defineProperties(this.defaultProperties,Object.getOwnPropertyDescriptors({x:.5,y:.5,x2:void 0,y2:void 0,text:"",size:11,color:"black",opacity:1,font:void 0,fontStyle:void 0,fontWeight:void 0,align:"center",baseline:"middle",dx:0,dy:0,angle:0,fitToBand:!1,squeeze:!0,paddingX:0,paddingY:0,flushX:!0,flushY:!0,logoLetters:!1,viewportEdgeFadeWidthTop:0,viewportEdgeFadeWidthRight:0,viewportEdgeFadeWidthBottom:0,viewportEdgeFadeWidthLeft:0,viewportEdgeFadeDistanceTop:-1/0,viewportEdgeFadeDistanceRight:-1/0,viewportEdgeFadeDistanceBottom:-1/0,viewportEdgeFadeDistanceLeft:-1/0})),this.font=this.properties.font?e.context.fontManager.getFont(this.properties.font,this.properties.fontStyle,this.properties.fontWeight):e.context.fontManager.getDefaultFont()}getAttributes(){return["uniqueId","facetIndex","x","x2","y","y2","color","size","opacity","angle"]}getSupportedChannels(){return[...super.getSupportedChannels(),"x2","y2","size","text","angle"]}fixEncoding(e){for(const t of p0)this.properties.fitToBand&&$T(e,t);return e}async initializeGraphics(){await super.initializeGraphics(),this.createAndLinkShaders(kpe,Lpe)}finalizeGraphicsInitialization(){super.finalizeGraphicsInitialization(),this.gl.useProgram(this.programInfo.program);const e=this.properties;Wr(this.programInfo,{uPaddingX:e.paddingX,uPaddingY:e.paddingY,uFlushX:!!e.flushX,uFlushY:!!e.flushY,uAlign:[Ape[e.align],Epe[e.baseline]],uD:[e.dx,-e.dy],uLogoLetter:!!e.logoLetters,uSqueeze:!!e.squeeze,uViewportEdgeFadeWidth:[e.viewportEdgeFadeWidthTop,e.viewportEdgeFadeWidthRight,e.viewportEdgeFadeWidthBottom,e.viewportEdgeFadeWidthLeft],uViewportEdgeFadeDistance:[e.viewportEdgeFadeDistanceTop,e.viewportEdgeFadeDistanceRight,e.viewportEdgeFadeDistanceBottom,e.viewportEdgeFadeDistanceLeft]})}updateGraphicsData(){const e=this.unitView.getCollector(),t=e.getData(),n=this.encoding,s=this.encoders.text.accessor||this.encoders.text;let r=0;const o="format"in n.text?ds(n.text.format):c=>c;for(const c of t){const h=o(s(c)),u=en(h)?h:h===null?"":""+h;r+=u&&u.length||0}const a=new Zge({encoders:this.encoders,attributes:this.getAttributes(),properties:this.properties,fontMetrics:this.font.metrics,numCharacters:Math.max(r,this.properties.minBufferSize||0)});a.addBatches(e.facetBatches);const l=a.toArrays();this.rangeMap.migrateEntries(l.rangeMap),this.updateBufferInfo(l)}prepareRender(e){const t=super.prepareRender(e);let n=.35;this.properties.logoLetters&&(n/=2);const s=this.font.metrics.common.base/(this.unitView.context.devicePixelRatio/n);return t.push(()=>Wr(this.programInfo,{uTexture:this.font.texture,uSdfNumerator:s})),t.push(()=>b0(this.gl,this.programInfo,this.vertexArrayInfo)),t}render(e){const t=this.gl;return this.createRenderCallback((n,s)=>_w(t,this.vertexArrayInfo,t.TRIANGLES,s,n),e)}}function i8(i,e,{spacing:t,devicePixelRatio:n,offset:s,reverse:r}={}){t=t||0,s=s||0;let o=0,a=0;for(const g of i)o+=py(g.px)+(lA(g)?0:t),a+=py(g.grow);o-=t;const l=Math.max(0,e-o),c=n!==void 0?g=>Math.round(g*n)/n:g=>g,h=[],u=[],d=g=>{const p=h.length;if(!p)return;const m=(g?t:0)*(r?-1:1);f-=m;for(let v=0;v<p;v++)u.push({location:f+(v+1)/(p+1)*m,size:0});f+=m,h.length=0};let f=r?Math.max(e,o):0+s;if(i.length==1&&lA(i[0]))return[{location:f,size:0}];for(let g=0;g<i.length;g++){const p=i[g];if(lA(p))h.push(p);else{d(u.length>0);const m=py(p.px)+(a?py(p.grow)/a*l:0);r&&(f-=m),u.push({location:c(f),size:c(m)}),r?f-=t:f+=m+t}}return f+=r?t:-t,d(!1),u}function Tpe(i){let e=0,t=0;for(const n of i)e=Math.max(e,n.px??0),t=Math.max(t,n.grow??0);return{px:e,grow:t}}var PC,jT;const sG=class{constructor(i,e){Ut(this,PC),this.width=i,this.height=e}addPadding(i){return _t(this,PC,jT).call(this,i.width,i.height)}subtractPadding(i){return _t(this,PC,jT).call(this,-i.width,-i.height)}};let kv=sG;PC=new WeakSet,jT=function(i,e){return new sG({px:(this.width.px??0)+i,grow:this.width.grow},{px:(this.height.px??0)+e,grow:this.height.grow})};const lb=Object.freeze({px:0,grow:0}),Npe=new kv(lb,lb);function lA(i){return!i.px&&!i.grow}function py(i){return i||0}function Mpe(i){return i&&(xr(i.px)||xr(i.grow))}function rG(i){if(cG(i))throw new Error("parseSizeDef does not accept step-based sizes.");if(Mpe(i))return i;if(xr(i))return{px:i,grow:0};if(i==="container")return{px:0,grow:1};if(!i)return{px:0,grow:1};throw new Error(`Invalid sizeDef: ${i}`)}class Cs{constructor(e,t,n,s){this.top=e||0,this.right=t||0,this.bottom=n||0,this.left=s||0}get width(){return this.left+this.right}get height(){return this.top+this.bottom}expand(e){return e<=0?this:new Cs(this.top+e,this.right+e,this.bottom+e,this.left+e)}add(e){return new Cs(this.top+e.top,this.right+e.right,this.bottom+e.bottom,this.left+e.left)}subtract(e){return new Cs(this.top-e.top,this.right-e.right,this.bottom-e.bottom,this.left-e.left)}union(e){return new Cs(Math.max(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom),Math.max(this.left,e.left))}getHorizontal(){return new Cs(0,this.right,0,this.left)}getVertical(){return new Cs(this.top,0,this.bottom,0)}get horizontalTotal(){return this.left+this.right}get verticalTotal(){return this.top+this.bottom}static createFromConfig(e){return typeof e=="number"?this.createUniformPadding(e):e?this.createFromRecord(e):qT}static createFromRecord(e){return new Cs(e.top,e.right,e.bottom,e.left)}static zero(){return qT}static createUniformPadding(e){return new Cs(e,e,e,e)}}const qT=Cs.createUniformPadding(0);Object.freeze(qT);const Rpe=/^([A-Za-z]+:)?\/\//;function Ope(i,e){if(e&&Rpe.test(e))return e;const t=i();return t&&e?t.endsWith("/")?t+e:t+"/"+e:t??e}const oG="VISIT_SKIP",cb="VISIT_STOP",n8=i=>i;var P_,FC,BC,GT,aG,VC,KT;class lG{constructor(e,t,n,s,r){if(Ut(this,GT),Ut(this,VC),Ut(this,P_,{}),Ut(this,FC,{}),Ut(this,BC,{}),Il(this,"opacityFunction",n8),!e)throw new Error("View spec must be defined!");this.context=t,this.layoutParent=n,this.dataParent=s,this.name=e.name||r,this.spec=e,this.resolutions={scale:{},axis:{}},Qq(this),this.blockEncodingInheritance=!1,this.contributesToScaleDomain=!0,this.needsAxes={x:!1,y:!1}}getPadding(){return this._cache("size/padding",()=>Cs.createFromConfig(this.spec.padding))}getOverhang(){return Cs.zero()}getSize(){return this._cache("size/size",()=>this.isConfiguredVisible()?_t(this,GT,aG).call(this):Npe)}isConfiguredVisible(){return this.context.isViewConfiguredVisible(this)}isVisibleInSpec(){return this.spec.visible??!0}isVisible(){return this.getLayoutAncestors().every(e=>e.isConfiguredVisible())}getEffectiveOpacity(){var e;return this.opacityFunction(((e=this.layoutParent)==null?void 0:e.getEffectiveOpacity())??1)}getPathString(){return this.getLayoutAncestors().map(e=>e.name).reverse().join("/")}getLayoutAncestors(){return _t(this,VC,KT).call(this,"layoutParent")}getDataAncestors(){return _t(this,VC,KT).call(this,"dataParent")}handleBroadcast(e){for(const t of Ke(this,P_)[e.type]||[])t(e)}_addBroadcastHandler(e,t){let n=Ke(this,P_)[e];n||(n=[],Ke(this,P_)[e]=n),n.push(t)}handleInteractionEvent(e,t,n){const s=n?Ke(this,FC):Ke(this,BC);for(const r of s[t.type]||[])r(e,t)}addInteractionEventListener(e,t,n){const s=n?Ke(this,FC):Ke(this,BC);let r=s[e];r||(r=[],s[e]=r),r.push(t)}visit(e){try{const t=e(this);if(e.postOrder&&e.postOrder(this),t!==cb)return t}catch(t){throw t.view=this,t}}getDescendants(){const e=[];return this.visit(t=>{e.push(t)}),e}onScalesResolved(){(!this.opacityFunction||this.opacityFunction===n8)&&(this.opacityFunction=Fpe(this))}onBeforeRender(){}render(e,t,n={}){}getEncoding(){const e=this.dataParent&&!this.blockEncodingInheritance?this.dataParent.getEncoding():{},t=this.spec.encoding||{},n={...e,...t};for(const[s,r]of Object.entries(n))r===null&&delete n[s];return n}getFacetAccessor(e){if(this.layoutParent)return this.layoutParent.getFacetAccessor(this)}getFacetFields(e){var t;const n=this.getEncoding().sample;return gw(n)?[n.field]:(t=this.layoutParent)==null?void 0:t.getFacetFields(this)}getSampleFacetTexture(){}getScaleResolution(e){const t=vf(e);return this.getDataAncestors().map(n=>n.resolutions.scale[t]).find(n=>n)}getAxisResolution(e){const t=vf(e);return this.getDataAncestors().map(n=>n.resolutions.axis[t]).find(n=>n)}getConfiguredResolution(e,t){var n,s;return(s=(n=this.spec.resolve)==null?void 0:n[t])==null?void 0:s[e]}getConfiguredOrDefaultResolution(e,t){return this.getConfiguredResolution(e,t)??this.getConfiguredResolution("default",t)??this.getDefaultResolution(e,t)}getDefaultResolution(e,t){return"independent"}getBaseUrl(){return Ope(()=>{var e;return(e=this.dataParent)==null?void 0:e.getBaseUrl()},this.spec.baseUrl)}isPickingSupported(){return!0}getTitleText(){const e=this.spec.title;if(e)return en(e)?e:e.text}_cache(e,t){return v0(this,e,t)}_invalidateCacheByPrefix(e,t="self"){switch(t){case"self":OC(this,e);break;case"ancestors":for(const n of this.getLayoutAncestors())OC(n,e);break;case"progeny":this.visit(n=>OC(n,e));break}}invalidateSizeCache(){this._invalidateCacheByPrefix("size/","ancestors")}propagateInteractionEvent(e){}}P_=new WeakMap,FC=new WeakMap,BC=new WeakMap,GT=new WeakSet,aG=function(){const i=e=>{var t;let n=this.spec[e];if(cG(n)){const s=n.step,r=(t=this.getScaleResolution(e=="width"?"x":"y"))==null?void 0:t.getScale();if(r){let o=0;if(pu(r.type))o=r.domain().length;else if(["locus","index"].includes(r.type)){const l=r.domain();o=iw(l)-l[0]}else throw new Error(`Cannot use step-based size with "${r.type}" scale!`);const a=r;return o=rO(o,a.paddingInner(),a.paddingOuter()),{px:o*s,grow:0}}else throw new Error("Cannot use 'step' size with missing scale!")}else return(n&&rG(n))??{px:0,grow:1}};return this._cache("size/sizeFromSpec",()=>new kv(i("width"),i("height")))},VC=new WeakSet,KT=function(i){const e=[];let t=this;do e.push(t),t=t[i];while(t);return e};function Ppe(i){return"unitsPerPixel"in i}function Fpe(i){const e=i.spec.opacity;if(e!==void 0){if(xr(e))return t=>t*e;if(Ppe(e)){const t=r=>{var o;const a=(o=i.getScaleResolution(r))==null?void 0:o.getScale();if(["linear","index","locus"].includes(a==null?void 0:a.type))return a},n=e.channel?t(e.channel):t("x")||t("y");if(!n)throw new Error("Cannot find a resolved quantitative scale for dynamic opacity!");const s=QR().domain(e.unitsPerPixel).range(e.values).clamp(!0);return r=>{const o=jS(n.domain())/1e3;return s(o)*r}}}return t=>t}const cG=i=>!!(i!=null&&i.step);class Sm extends lG{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e}*[Symbol.iterator](){}replaceChild(e,t){throw new Error("Not implemented")}visit(e){let t;try{t=e(this)}catch(n){throw n.view=this,n}if(t===cb)return t;if(t!==oG){e.beforeChildren&&e.beforeChildren(this);for(const n of this){const s=n.visit(e);if(s===cb)return s}e.afterChildren&&e.afterChildren(this),e.postOrder&&e.postOrder(this)}}findDescendantByPath(e){for(const t of this)if(t.name===e[0]){if(e.length==1)return t;if(t instanceof Sm)return t.findDescendantByPath(e.slice(1))}}findChildByName(e){for(const t of this)if(t.name===e)return t}findDescendantByName(e){let t;return this.visit(n=>{if(n.name==e)return t=n,cb}),t}getDefaultResolution(e,t){return"shared"}}const s8=1;function RO(){let i=[0,1],e=[0,1],t=1,n=1,s=0,r=0,o=.5,a=0;const l=c=>(c+o-i[0])/t*n+e[0];return l.invert=c=>(c-e[0])/n*t+i[0]-o,l.domain=function(c){if(arguments.length){i=zre(c),t=i[1]-i[0];const h=i[0]===0&&i[0]===0;if(t<s8&&!h){t=s8;const u=(i[0]+i[1])/2;i[0]=u-t/2,i[1]=u+t/2}return l}else return i},l.range=function(c){return arguments.length?(e=[...c],n=e[1]-e[0],l):e},l.numberingOffset=function(c){return arguments.length?(a=c,l):a},l.padding=function(c){return arguments.length?(r=c,s=Math.min(1,c),l):s},l.paddingInner=function(c){return arguments.length?(s=Math.min(1,c),l):s},l.paddingOuter=function(c){return arguments.length?(r=c,l):r},l.align=function(c){return arguments.length?(o=Math.max(0,Math.min(1,c)),l):o},l.step=()=>n/t,l.bandwidth=()=>l.step(),l.ticks=c=>{const h=l.align(),u=l.numberingOffset();return GS(i[0]-h+u,i[1]-h+u,Math.min(c,Math.ceil(t))).filter(Number.isInteger).map(d=>d-a)},l.tickFormat=(c,h)=>{if(h)throw new Error("Index scale's tickFormat does not support a specifier!");const u=gf(i[0],i[1],Math.min(c,Math.ceil(t)))<1e5?ds(","):ds(".3s");return d=>u(d+a)},l.copy=()=>RO().domain(i).range(e).paddingInner(s).paddingOuter(r).numberingOffset(a),l}function Bpe(){const i=RO().numberingOffset(1);let e;i.genome=function(n){return arguments.length?(e=n,i):e},i.ticks=n=>{if(!e)return[];const s=i.domain(),r=i.numberingOffset(),[o,a]=[Math.max(s[0],0),Math.min(s[1],e.totalSize-1)].map(h=>e.toChromosome(h)),l=Math.max(1,gf(s[0],s[1],n)),c=[];for(let h=o.index;h<=a.index;h++){const u=e.chromosomes[h],d=Math.max(u.continuousStart+l,s[0]-(s[0]-u.continuousStart)%l),f=Math.min(u.continuousEnd-l/4,s[1]+1);for(let g=d;g<=f;g+=l){const p=g-r;p>=s[0]&&p<s[1]&&c.push(p)}}return c},i.tickFormat=(n,s)=>{if(!e)return;if(s)throw new Error("Locus scale's tickFormat does not support a specifier!");const r=i.domain(),o=r[1]-r[0],a=i.numberingOffset(),l=gf(r[0],r[1],Math.min(n,Math.ceil(o)))<1e6?ds(","):ds(".3s"),c=h=>h-e.toChromosome(h).continuousStart;return h=>l(c(h)+a)};const t=i.copy;return i.copy=()=>t().genome(e),i}function Vpe(i){return i.type=="locus"}function fx(i,e,t){if(t=t||[],i.some(o=>o===null)){if(i.every(o=>o===null))return null;throw console.warn(i),new Error("Cannot merge objects with nulls!")}const n={},s=(o,a)=>o===a||Pg(o)&&Pg(a)||Pg(o)&&a===!0||o===!0&&Ea(a),r=o=>{for(let a in o){const l=o[a];if(!t.includes(a)&&l!==void 0)if(n[a]!==void 0&&!s(n[a],l))console.warn(`Conflicting property ${a} of ${e}: (${JSON.stringify(n[a])} and ${JSON.stringify(o[a])}). Using ${JSON.stringify(n[a])}.`);else{const c=n[a];if(Pg(c))Pg(l)&&(n[a]=fx([c,l],a));else if(Pg(l)){if(!(c===!0||c===void 0))throw new Error("Bug in merge! Target is: "+c);n[a]=fx([{},l],a)}else n[a]=l}}};for(const o of i)r(o);return n}function Pg(i){return Ea(i)&&!Array.isArray(i)}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/ticks.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */function hG(i,e,t){return xr(e)&&t!=null&&(e=Math.min(e,~~(jS(i.domain())/t)||1)),Ea(e)&&(e.step,e=e.interval),e}function uG(i,e,t){var n=i.range(),s=Math.floor(n[0]),r=Math.ceil(ba(n));if(s>r&&(n=r,r=s,s=n),e=e.filter(function(a){return a=i(a),s<=a&&a<=r}),t>0&&e.length>1){for(var o=[e[0],ba(e)];e.length>t&&e.length>=3;)e=e.filter(function(a,l){return!(l%2)});e.length<3&&(e=o)}return e}function Wpe(i,e){return i.bins?uG(i,zpe(i.bins,e)):i.ticks?i.ticks(e):i.domain()}function zpe(i,e){var t=i.length,n=~~(t/(e||t));return n<2?i.slice():i.filter(function(s,r){return!(r%n)})}function Hpe(i,e,t){var n=i.tickFormat?i.tickFormat(e,t):t?ds(t):String;if(Bj(i.type)){var s=$pe(t);n=i.bins?s:Upe(n,s)}return n}function Upe(i,e){return function(t){return i(t)?e(t):""}}function $pe(i){var e=hu(i||",");if(e.precision==null){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return jpe(ds(e),ds(".1f")(1)[1])}else return ds(e)}function jpe(i,e){return function(t){var n=i(t),s=n.indexOf(e),r,o;if(s<0)return n;for(r=qpe(n,s),o=r<n.length?n.slice(r):"";--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function qpe(i,e){var t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}/*!
 * Adapted from vega-encode:
 * https://github.com/vega/vega/blob/master/packages/vega-encode/src/Scale.js
 *
 * Copyright (c) 2015-2018, University of Washington Interactive Data Lab
 * All rights reserved.
 *
 * BSD-3-Clause License: https://github.com/vega/vega-lite/blob/master/LICENSE
 */const Gpe="locus",Kpe="index";var Zpe=5;function Ype(i){const e=i.type;return!i.bins&&(e===wm||e===cw||e===hw)}function dG(i){return Ds(i)&&![wl,Kpe,Gpe].includes(i)}function fG(i){return i||{warn:(e,...t)=>console.warn(e,...t)}}var Qpe=qS(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma","zoom","fp64","name"]);function gG(i,e,t){t=fG(t);for(const n in i)if(!Qpe[n]){if(n==="padding"&&dG(e.type))continue;Sr(e[n])?e[n](i[n]):t.warn("Unsupported scale property: "+n)}rme(e,i,sme(e,i,tme(e,i,t)))}function Xpe(i,e){const t=Jpe(i),n=ri(t);if(!n)throw new Error("Unknown scale type: "+t);const s=n();return!i.domain&&Ds(s.type)&&(i.domain=[0,0]),gG(i,s,e),s}function Jpe(i){var e=i.type,t="",n;return e===wl?wl+"-"+wm:(eme(i)&&(n=i.rawDomain?i.rawDomain.length:i.domain?i.domain.length+ +(i.domainMid!=null):0,t=n===2?wl+"-":n===3?g0+"-":""),(t+e||wm).toLowerCase())}function eme(i){const e=i.type;return Ds(e)&&e!==Ij&&e!==Tj&&(i.scheme||i.range&&i.range.length&&i.range.every(en))}function tme(i,e,t){if(!i.domain)return 0;t=fG(t);var n=ime(i,e.domainRaw,t);if(n>-1)return n;var s=e.domain,r=i.type,o=e.zero||e.zero===void 0&&Ype(i),a,l;return s?(dG(r)&&e.padding&&s[0]!==ba(s)&&(s=nme(r,s,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(s=s.slice()).length-1||1,o&&(s[0]>0&&(s[0]=0),s[a]<0&&(s[a]=0)),e.domainMin!=null&&(s[0]=e.domainMin),e.domainMax!=null&&(s[a]=e.domainMax),e.domainMid!=null&&(l=e.domainMid,(l<s[0]||l>s[a])&&t.warn("Scale domainMid exceeds domain min or max.",l),s.splice(a,0,l))),i.domain(pG(r,s,t)),r===oO&&i.unknown(e.domainImplicit?wT:void 0),e.nice&&i.nice&&i.nice(e.nice!==!0&&hG(i,e.nice)||null),s.length):0}function ime(i,e,t){return e?(i.domain(pG(i.type,e,t)),e.length):-1}function nme(i,e,t,n,s,r){var o=Math.abs(ba(t)-t[0]),a=o/(o-2*n),l=i===gu?YU(e,null,a):i===hw?cT(e,null,a,.5):i===cw?cT(e,null,a,s||1):i===Mk?ure(e,null,a,r||1):ZU(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function pG(i,e,t){if(Bj(i)){var n=Math.abs(e.reduce(function(s,r){return s+(r<0?-1:r>0?1:0)},0));n!==e.length&&t.warn("Log scale domain includes zero: "+mk(e))}return e}function sme(i,e,t){let n=e.bins;if(n&&!Fo(n)){const s=(n.start==null||n.stop==null)&&i.domain(),r=n.start==null?s[0]:n.start,o=n.stop==null?ba(s):n.stop,a=n.step;a||Xi("Scale bins parameter missing step property."),n=ov(r,o+a,a)}return n?i.bins=n:i.bins&&delete i.bins,i.type===aO&&(n?!e.domain&&!e.domainRaw&&(i.domain(n),t=n.length):i.bins=i.domain()),t}function rme(i,e,t){var n=i.type,s=e.round||!1,r=e.range;if(e.rangeStep!=null)r=ome(n,e,t);else if(e.scheme&&(r=ame(n,e,t),Sr(r))){if(i.interpolator)return i.interpolator(r);Xi(`Scale type ${n} does not support interpolating color schemes.`)}if(r&&Rk(n))return i.interpolator(Ok(ZT(r,e.reverse),e.interpolate,e.interpolateGamma));r&&e.interpolate&&i.interpolate?i.interpolate(Vj(e.interpolate,e.interpolateGamma)):Sr(i.round)?i.round(s):Sr(i.rangeRound)&&i.interpolate(s?aw:Vu),r&&i.range(ZT(r,e.reverse))}function ome(i,e,t){i!==Rj&&i!==IT&&Xi("Only band and point scales support rangeStep.");var n=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,s=i===IT?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*rO(t,s,n)]}function ame(i,e,t){var n=e.schemeExtent,s,r;return Fo(e.scheme)?r=Ok(e.scheme,e.interpolate,e.interpolateGamma):(s=e.scheme.toLowerCase(),r=cO(s),r||Xi(`Unrecognized scheme name: ${e.scheme}`)),t=i===Mj?t+1:i===aO?t-1:i===ET||i===Nj?+e.schemeCount||Zpe:t,Rk(i)?r8(r,n,e.reverse):Sr(r)?Ihe(r8(r,n),t):i===oO?r:r.slice(0,t)}function r8(i,e,t){return Sr(i)&&(e||t)?Ehe(i,ZT(e||[0,1],t)):i}function ZT(i,e){return e?i.slice().reverse():i}const o8=ds(",d");function lme(i,e){return i.chrom+":"+o8(Math.floor(i.pos+1))+"-"+(i.chrom!=e.chrom?e.chrom+":":"")+o8(Math.ceil(e.pos))}const cme="https://genomespy.app/data/genomes/";class hme{constructor(e){if(this.config=e,!this.config.contigs&&typeof this.config.name!="string")throw new Error("No name has been defined for the genome assembly!");this.chromosomes=[],this.cumulativeChromPositions=new Map,this.chromosomesByName=new Map,this.startByIndex=[],this.totalSize=0,this.config.contigs&&this.setChromSizes(this.config.contigs)}get name(){return this.config.name}async load(e){if(!this.config.contigs){this.config.baseUrl?this.baseUrl=/^http(s)?/.test(this.config.baseUrl)?this.config.baseUrl:e+"/"+this.config.baseUrl:this.baseUrl=cme;try{this.setChromSizes(ume(await yk({baseURL:this.baseUrl}).load(`${this.config.name}/${this.name}.chrom.sizes`)))}catch(t){throw new Error(`Could not load chrom sizes: ${t.message}`)}}}hasChrPrefix(){return this.chromosomes.some(e=>e.name.startsWith("chr"))}setChromSizes(e){let t=0;this.startByIndex=[0];for(let n=0;n<e.length;n++){this.startByIndex.push(t);const s=e[n].size,r={...e[n],continuousStart:t,continuousEnd:t+s,continuousInterval:[t,t+s],index:n,number:n+1,odd:!(n&1)};this.chromosomes.push(r);const o=r.name.replace(/^chr/i,"");for(const a of["chr"+o,"CHR"+o,"Chr"+o,r.number,""+r.number,o,r.name])this.cumulativeChromPositions.set(a,t),this.chromosomesByName.set(a,r);t+=r.size}this.totalSize=t}getExtent(){return[0,this.totalSize]}toContinuous(e,t){let n=this.cumulativeChromPositions.get(e);if(n===void 0)throw new Error("Unknown chromosome/contig: "+e);return n+ +t}toChromosome(e){if(e>this.totalSize)return;e=Math.floor(e);const t=d0(this.startByIndex,e)-1;if(t>0&&t<=this.chromosomes.length)return this.chromosomes[t-1]}toChromosomal(e){const t=this.toChromosome(e);if(t)return{chrom:t.name,pos:Math.floor(e)-t.continuousStart}}getChromosome(e){return this.chromosomesByName.get(e)}formatInterval(e){return lme(...this.toChromosomalInterval(e))}toChromosomalInterval(e){const t=this.toChromosomal(e[0]+.5),n=this.toChromosomal(e[1]-.5);return n.pos+=1,[t,n]}toContinuousInterval(e){var t;let[n,s]=e;return s||(s=n),[this.toContinuous(n.chrom,n.pos??0),this.toContinuous(s.chrom,s.pos??((t=this.chromosomesByName.get(s.chrom))==null?void 0:t.size))]}toDiscreteChromosomeIntervals(e){const t=e[0],n=e[1],s=[];if(t.chrom===n.chrom)s.push({chrom:t.chrom,startPos:t.pos,endPos:n.pos});else{const r=this.chromosomes.findIndex(a=>a.name===t.chrom),o=this.chromosomes.findIndex(a=>a.name===n.chrom);s.push({chrom:t.chrom,startPos:t.pos,endPos:this.chromosomes[r].size});for(let a=r+1;a<o;a++)s.push({chrom:this.chromosomes[a].name,startPos:0,endPos:this.chromosomes[a].size});s.push({chrom:n.chrom,startPos:0,endPos:n.pos})}return s}continuousToDiscreteChromosomeIntervals(e){return this.toDiscreteChromosomeIntervals([this.toChromosomal(e[0]),this.toChromosomal(e[1])])}parseInterval(e){const t=e.match(/^(chr[0-9A-Z]+)(?::([0-9,]+)(?:-(?:(chr[0-9A-Z]+):)?([0-9,]+))?)?$/);if(t){const n=t[1];if(t.slice(2).every(a=>a===void 0)){const a=this.getChromosome(n);return a?[a.continuousStart,a.continuousEnd]:void 0}const s=t[3]||n,r=parseInt(t[2].replace(/,/g,"")),o=t[4]!==void 0?parseInt(t[4].replace(/,/g,"")):r;return[this.toContinuous(n,r-1),this.toContinuous(s,o)]}}}function ume(i){return Ire(i).filter(e=>/^chr[0-9A-Z]+$/.test(e[0])).map(([e,t])=>({name:e,size:parseInt(t)}))}function mG(i){return Ea(i)&&"chrom"in i}function dme(i){return i.every(mG)}class ww extends Array{constructor(){super(),this.type=void 0}extend(e){return this}extendAll(e){if(e instanceof ww&&e.type!=this.type)throw new Error(`Cannot combine different types of domains: ${this.type} and ${e.type}`);for(const t of e)this.extend(t);return this}extendAllWithAccessor(e,t){for(const n of e)this.extend(t(n));return this}}class cA extends ww{constructor(){super(),this.type="quantitative"}extend(e){return e==null||Number.isNaN(e)?this:(e=+e,this.length?e<this[0]?this[0]=e:e>this[1]&&(this[1]=e):(this.push(e),this.push(e)),this)}}class _G extends ww{constructor(){super(),this.type="ordinal",this.uniqueValues=new Set}extend(e){return e==null||Number.isNaN(e)?this:(this.uniqueValues.has(e)||(this.uniqueValues.add(e),this.push(e)),this)}}class bG extends _G{constructor(){super(),this.type="nominal"}}class fme extends ww{constructor(e){super();let t=0;for(let n=1;n<e.length;n++)t+=Math.sign(e[n]-e[n-1]);if(Math.abs(t)!=e.length-1)throw new Error("Piecewise domain must be strictly increasing or decreasing: "+JSON.stringify(e));e.forEach(n=>this.push(n))}extend(e){if(this.includes(e))return this;throw new Error("Piecewise domains are immutable and cannot be unioned!")}}const a8={quantitative:cA,index:cA,locus:cA,nominal:bG,ordinal:_G};function l8(i,e){if(i=="quantitative"&&gme(e)){const t=new fme(e);return t.type=i,t}else if(a8[i]){const t=new a8[i];return t.type=i,e&&t.extendAll(e),t}throw new Error("Unknown type: "+i)}function gme(i){return i&&i.length>0&&i.length!=2&&i.every(e=>typeof e=="number")}function pme(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}function mme(i,e,t){return i*Math.pow(e/i,t)}ri("index",RO,["continuous"]);ri("locus",Bpe,["continuous"]);ri("null",Pk,[]);const c8="quantitative",vG="ordinal",wG="nominal",yG="locus",_me="index";var ph,hb,Us,mh,hd,YT,CG,F_,WC,_h,ud,zC,QT,XT,SG,xG,HC,JT;class bme{constructor(e){Ut(this,mh),Ut(this,YT),Ut(this,F_),Ut(this,_h),Ut(this,zC),Ut(this,XT),Ut(this,xG),Ut(this,HC),Ut(this,ph,void 0),Ut(this,hb,new Set),Ut(this,Us,void 0),this.channel=e,this.members=[],this.type=null,this.name=void 0}addEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);Ke(this,hb).add(t)}removeEventListener(e,t){if(e!="domain")throw new Error("Unsupported event type: "+e);Ke(this,hb).delete(t)}pushUnitView(e,t){var n;const s=hO(e,t),r=s.type,o=(n=s==null?void 0:s.scale)==null?void 0:n.name;if(o){if(this.name!==void 0&&o!=this.name)throw new Error(`Shared scales have conflicting names: "${o}" vs. "${this.name}"!`);this.name=o}if(!this.type)this.type=r;else if(r!==this.type&&!ab(t))throw new Error(`Can not use shared scale for different data types: ${this.type} vs. ${r}. Use "resolve: independent" for channel ${this.channel}`);this.members.push({view:e,channel:t})}isExplicitDomain(){return!!this.getConfiguredDomain()}isDomainInitialized(){const e=Ke(this,Us);if(!e)return!1;const t=e.domain();return Ds(e.type)?t.length>2||t.length==2&&(t[0]!==0||t[1]!==0):t.length>0}getScaleProps(){return v0(this,"scaleProps",()=>{const e=_t(this,YT,CG).call(this);if(e===null||e.type=="null")return{type:"null"};const t={..._t(this,XT,SG).call(this,this.type),...e};t.type||(t.type=vme(this.channel,this.type));const n=_t(this,F_,WC).call(this);return n&&n.length>0?t.domain=n:pu(t.type)&&(t.domain=new bG),!t.domain&&t.domainMid!==void 0&&(t.domain=[t.domainMin??0,t.domainMax??1]),this.channel=="y"&&pu(t.type)&&t.reverse==null&&(t.reverse=!0),t.range&&t.scheme&&delete t.scheme,!("zoom"in t)&&["index","locus"].includes(t.type)&&(t.zoom=!0),wme(t,this.channel),t})}getConfiguredDomain(){return _t(this,HC,JT).call(this,e=>ab(e.channel)?void 0:e.view.getConfiguredDomain(e.channel))}getDataDomain(){return _t(this,HC,JT).call(this,e=>ab(e.channel)?void 0:e.view.extractDataDomain(e.channel))}reconfigure(){if(Ke(this,Us)&&Ke(this,Us).type!="null"){const e=this.isDomainInitialized(),t=[...Ke(this,Us).domain()];Yq(this,"scaleProps");const n=this.getScaleProps();gG(n,Ke(this,Us)),Ds(Ke(this,Us).type)&&Lc(this,ph,_t(this,zC,QT).call(this));const s=[...Ke(this,Us).domain()];tx(s,t)||(_t(this,_h,ud).call(this)&&e?(Ke(this,Us).domain(t),this.zoomTo(s,500)):_t(this,mh,hd).call(this))}}getScale(){if(Ke(this,Us))return Ke(this,Us);const e=this.getScaleProps(),t=Xpe(e);return Lc(this,Us,t),Vpe(t)&&t.genome(this.getGenome()),Ds(t.type)&&Lc(this,ph,_t(this,zC,QT).call(this)),t}getDomain(){return this.getScale().domain()}getComplexDomain(){var e;return((e=this.getGenome())==null?void 0:e.toChromosomalInterval(this.getDomain()))??this.getDomain()}isZoomed(){return _t(this,_h,ud).call(this)&&tx(_t(this,F_,WC).call(this),this.getDomain())}isZoomable(){return _t(this,_h,ud).call(this)&&!!this.getScaleProps().zoom}zoom(e,t,n){if(!_t(this,_h,ud).call(this))return!1;const s=this.getScale(),r=s.domain();let o=[...r],a=s.invert(t);switch(this.getScaleProps().reverse&&(n=-n),"align"in s&&(a+=s.align()),s.type){case"linear":case"index":case"locus":o=lre(o,n||0),o=ZU(o,a,e);break;case"log":o=cre(o,n||0),o=YU(o,a,e);break;case"pow":case"sqrt":{const l=s;o=hre(o,n||0,l.exponent()),o=cT(o,a,e,l.exponent());break}default:throw new Error("Zooming is not implemented for: "+s.type)}return Ke(this,ph)&&(o=dre(o,Ke(this,ph)[0],Ke(this,ph)[1])),[0,1].some(l=>o[l]!=r[l])?(s.domain(o),_t(this,mh,hd).call(this),!0):!1}async zoomTo(e,t=!1){var n;if(pk(t)&&(t=t?700:0),!_t(this,_h,ud).call(this))throw new Error("Not a zoomable scale!");const s=this.fromComplexInterval(e),r=(n=this.members[0])==null?void 0:n.view.context.animator,o=this.getScale(),a=o.domain();if(t>0&&a.length==2){const l=a[1]-a[0],c=a[0]+l/2,h=s[1]-s[0],u=s[0]+h/2;await r.transition({duration:t,easingFunction:pme,onUpdate:d=>{const f=mme(l,h,d),g=(l-f)/(l-h),p=g*u+(1-g)*c;o.domain([p-f/2,p+f/2]),_t(this,mh,hd).call(this)}}),o.domain(s),_t(this,mh,hd).call(this)}else o.domain(s),r==null||r.requestRender(),_t(this,mh,hd).call(this)}resetZoom(){if(!_t(this,_h,ud).call(this))throw new Error("Not a zoomable scale!");const e=this.getDomain(),t=_t(this,F_,WC).call(this);return[0,1].some(n=>t[n]!=e[n])?(Ke(this,Us).domain(t),_t(this,mh,hd).call(this),!0):!1}getZoomLevel(){return this.isZoomable()?jS(Ke(this,ph))/jS(this.getScale().domain()):1}getGenome(){var e;if(this.type!=="locus")return;const t=(e=this.members[0].view.context.genomeStore)==null?void 0:e.getGenome();if(!t)throw new Error("No genome has been defined!");return t}invertToComplex(e){const t=this.getScale();if("invert"in t){const n=t.invert(e);return this.toComplex(n)}else throw new Error("The scale does not support inverting!")}toComplex(e){const t=this.getGenome();return t?t.toChromosomal(e):e}fromComplex(e){return mG(e)?this.getGenome().toContinuous(e.chrom,e.pos):e}fromComplexInterval(e){return this.type==="locus"&&dme(e)?this.getGenome().toContinuousInterval(e):e}}ph=new WeakMap,hb=new WeakMap,Us=new WeakMap,mh=new WeakSet,hd=function(){for(const i of Ke(this,hb).values())i({type:"domain",scaleResolution:this})},YT=new WeakSet,CG=function(){return v0(this,"mergedScaleProps",()=>{const i=this.members.map(e=>hO(e.view,e.channel).scale).filter(e=>e!==void 0);return fx(i,"scale",["domain"])})},F_=new WeakSet,WC=function(){return this.getConfiguredDomain()??(this.type==yG?this.getGenome().getExtent():this.getDataDomain())},_h=new WeakSet,ud=function(){const i=this.getScale().type;return Ds(i)},zC=new WeakSet,QT=function(){const i=this.getScaleProps(),e=i.zoom;if(yme(e)&&Fo(e.extent))return this.fromComplexInterval(e.extent);if(e)return i.type=="locus"?this.getGenome().getExtent():Ke(this,Us).domain()},XT=new WeakSet,SG=function(i){const e=this.channel,t={};return this.isExplicitDomain()&&(t.zero=!1),Cv(e)?t.nice=!this.isExplicitDomain():Kd(e)?t.scheme=i==wG?"tableau10":i==vG?"blues":"viridis":Fk(e)?t.range=jj(e):e=="size"?t.range=[0,400]:e=="angle"&&(t.range=[0,360]),t},xG=new WeakSet,HC=new WeakSet,JT=function(i){const e=this.members.filter(t=>!t.view.getLayoutAncestors().some(n=>!n.contributesToScaleDomain)).map(i).filter(t=>!!t);if(e.length)return e.reduce((t,n)=>t.extendAll(n))};function vme(i,e){if(e==_me||e==yG){if(Uj(i))return e;throw new Error(`${i} does not support ${e} data type. Only positional channels do.`)}const t={x:["band","band","linear"],y:["band","band","linear"],size:[void 0,"point","linear"],opacity:[void 0,"point","linear"],fillOpacity:[void 0,"point","linear"],strokeOpacity:[void 0,"point","linear"],color:["ordinal","ordinal","linear"],fill:["ordinal","ordinal","linear"],stroke:["ordinal","ordinal","linear"],strokeWidth:[void 0,void 0,"linear"],shape:["ordinal","ordinal",void 0],dx:[void 0,void 0,"null"],dy:[void 0,void 0,"null"],angle:[void 0,void 0,"linear"]},n=["sample"].includes(i)?"null":t[i]?t[i][[wG,vG,c8].indexOf(e)]:e==c8?"linear":"ordinal";if(n===void 0)throw new Error(`Channel "${i}" is not compatible with "${e}" data type. Use of a proper scale may be needed.`);return n}function wme(i,e){Cv(e)&&i.type!=="ordinal"&&(i.range=[0,1]),e=="opacity"&&Ds(i.type)&&(i.clamp=!0)}function yme(i){return Ea(i)}function DG(i,e=[]){const t=new Set;i.visit(n=>{for(const s of Object.values(n.resolutions.scale))e.includes(s.channel)||t.add(s)}),t.forEach(n=>n.reconfigure())}function hA(...i){for(const e of i)if(e!==void 0)return e}class Cme{constructor(e){this.channel=e,this.members=[]}get scaleResolution(){var e;return(e=iw(this.members))==null?void 0:e.view.getScaleResolution(this.channel)}pushUnitView(e,t){const n=e.getScaleResolution(this.channel);if(!n)throw new Error("Cannot find a scale resolution!");if(this.scaleResolution&&n!==this.scaleResolution)throw new Error("Shared axes must have a shared scale!");this.members.push({view:e,channel:t})}getAxisProps(){return v0(this,"axisProps",()=>{const e=this.members.map(t=>{const n=t.view.mark.encoding[t.channel];return"axis"in n&&n.axis});return e.length>0&&e.some(t=>t===null)?null:fx(e.filter(t=>t!==void 0),"axis",["title"])})}getTitle(){const e=r=>{var o;const a=hO(r.view,r.channel);if(!va(a))return{member:r,explicitTitle:hA("axis"in a?(o=a.axis)==null?void 0:o.title:void 0,a.title),implicitTitle:hA(gw(a)?a.field:void 0,uO(a)?a.expr:void 0)}},t=this.members.map(e),n=t.filter(r=>{var o;if(ab(r.member.channel)&&!r.explicitTitle){const a=vf(r.member.channel);return((o=t.find(l=>l.member.view==r.member.view&&l.member.channel==a))==null?void 0:o.explicitTitle)===void 0}return!0}),s=new Set(n.map(r=>hA(r.explicitTitle,r.implicitTitle)).filter(en));return s.size?[...s].join(", "):null}}const Sme={point:_pe,rect:hpe,rule:wpe,link:xpe,text:Ipe};class Ys extends Sm{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e;const o=Sme[this.getMarkType()];if(o)this.mark=new o(this);else throw new Error(`No such mark: ${this.getMarkType()}`);this.coords=void 0,this.needsAxes={x:!0,y:!0}}render(e,t,n={}){this.isConfiguredVisible()&&(this.coords=t,e.pushView(this,t),e.renderMark(this.mark,n),e.popView(this))}getMarkType(){return typeof this.spec.mark=="object"?this.spec.mark.type:this.spec.mark}resolve(e){const t=this.mark.encoding;for(const[n,s]of Object.entries(t)){if(!xo(s))continue;const r=vf(s.resolutionChannel??n);if(!Zd(r)||e=="axis"&&!Cv(r))continue;let o=this;for(;(o.getConfiguredOrDefaultResolution(r,e)=="forced"||o.dataParent instanceof Sm&&["shared","excluded","forced"].includes(o.dataParent.getConfiguredOrDefaultResolution(r,e)))&&o.getConfiguredOrDefaultResolution(r,e)!="excluded";)o=o.dataParent;e=="axis"&&Cv(n)&&Uj(r)?(o.resolutions[e][r]||(o.resolutions[e][r]=new Cme(r)),o.resolutions[e][r].pushUnitView(this,n)):e=="scale"&&Zd(n)&&(o.resolutions[e][r]||(o.resolutions[e][r]=new bme(r)),o.resolutions[e][r].pushUnitView(this,n))}}getAccessor(e){return this._cache("accessor/"+e,()=>{const t=this.mark.encoding;if(t&&t[e])return this.context.accessorFactory.createAccessor(t[e])})}getFacetAccessor(e){return this.getAccessor("sample")||super.getFacetAccessor(this)}getCollector(){return this.context.dataFlow.findCollectorByKey(this)}_validateDomainQuery(e){if(ab(e))throw new Error(`getDomain(${e}), must only be called for primary channels!`);const t=this.mark.encoding[e];if(!xo(t))throw new Error("The channel has no scale, cannot get domain!");return t}getConfiguredDomain(e){const t=this._validateDomainQuery(e),n=t&&t.scale&&t.scale.domain;if(n){const s=this.getScaleResolution(t.resolutionChannel??e);return l8(t.type??"nominal",s.fromComplexInterval(n))}}extractDataDomain(e){const t=this._validateDomainQuery(e).type??"nominal",n=o=>{let a;const l=this.mark.encoding[o];if(l){const c=this.context.accessorFactory.createAccessor(l);if(c)if(a=l8(t),c.constant)a.extend(c({}));else{const h=this.getCollector();h!=null&&h.completed&&h.visitData(u=>a.extend(c(u)))}}return a};let s=n(e);const r=dO[e];if(r){const o=n(r);o&&s.extendAll(o)}return s}getZoomLevel(){const e=t=>{var n;return((n=this.getScaleResolution(t))==null?void 0:n.getZoomLevel())??1};return p0.map(e).reduce((t,n)=>t*n,1)}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0),e.target=this,!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return e=="x"?"shared":"independent"}}class kG extends lG{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e}}function*OO(i,e=[]){for(const[t,n]of i.entries())if(n instanceof Map)for(const s of OO(n,[...e,t]))yield s;else yield[[...e,t],n]}class LG extends An{get behavior(){return MO}constructor(e){super(),this.params=e??{type:"collect"},this.observers=[],this.facetBatches=void 0,this._init()}_init(){this._data=[],this.facetBatches=new ff([],JSON.stringify),this.facetBatches.set(void 0,this._data)}reset(){super.reset(),this._init()}handle(e){this._data.push(e)}beginBatch(e){gpe(e)&&(this._data=[],this.facetBatches.set(_l(e.facetId),this._data))}complete(){var e,t;const n=(e=this.params)==null?void 0:e.sort,s=n?QU(n.field,n.order):void 0,r=o=>{s&&o.sort(s)};if((t=this.params.groupby)!=null&&t.length){if(this.facetBatches.size>1)throw new Error("TODO: Support faceted data!");const o=this.params.groupby.map(l=>Ai(l)),a=bk(this._data,...o);this.facetBatches.clear();for(const[l,c]of OO(a))this.facetBatches.set(l,c)}for(const o of this.facetBatches.values())r(o);if(this.children.length)for(const[o,a]of this.facetBatches.entries()){if(o){const l={type:"facet",facetId:o};for(const c of this.children)c.beginBatch(l)}for(const l of a)this._propagate(l)}super.complete();for(const o of this.observers)o(this)}getData(){switch(this._checkStatus(),this.facetBatches.size){case 0:return[];case 1:return[...this.facetBatches.values()][0];default:{const e=this.facetBatches;return{[Symbol.iterator]:function*(){for(const t of e.values())for(let n=0;n<t.length;n++)yield t[n]}}}}}visitData(e){this._checkStatus();for(const t of this.facetBatches.values())for(let n=0;n<t.length;n++)e(t[n])}getItemCount(){let e=0;for(const t of this.facetBatches.values())e+=t.length;return e}_checkStatus(){if(!this.completed)throw new Error("Data propagation is not completed! No data are available.")}}class gx{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let n=this.length++;for(;n>0;){const s=n-1>>1,r=this.values[s];if(t>=r)break;this.ids[n]=this.ids[s],this.values[n]=r,n=s}this.ids[n]=e,this.values[n]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],n=this.values[0]=this.values[this.length],s=this.length>>1;let r=0;for(;r<s;){let o=(r<<1)+1;const a=o+1;let l=this.ids[o],c=this.values[o];const h=this.values[a];if(a<this.length&&h<c&&(o=a,l=this.ids[a],c=h),c>=n)break;this.ids[r]=l,this.values[r]=c,r=o}this.ids[r]=t,this.values[r]=n}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}class xme extends An{get behavior(){return Jc}constructor(e){super(),this.params=e,this.startAccessor=Ai(e.start),this.endAccessor=Ai(e.end),this.chromAccessor=e.chrom?Ai(e.chrom):t=>{},this.weightAccessor=e.weight?Ai(e.weight):t=>1,this.as={coverage:e.as||"coverage",start:e.asStart||e.start,end:e.asEnd||e.end,chrom:e.asChrom||e.chrom},this.createSegment=new Function("start","end","coverage","chrom","return {"+Object.entries(this.as).filter(([t,n])=>n).map(([t,n])=>`${JSON.stringify(n)}: ${t}`).join(", ")+"};"),this.ends=new gx}reset(){super.reset(),this.initialize()}initialize(){const e=this.as.coverage,t=this.as.end,n=this.as.chrom,s=this.startAccessor,r=this.endAccessor,o=this.chromAccessor,a=this.weightAccessor;let l,c,h,u=0,d;const f=this.ends;f.clear();const g=(m,v,b)=>{if(m==v)return;let w=!1;l&&(l[e]===b?(l[t]=v,w=!0):l[e]!=0&&this._propagate(l)),w||(l=this.createSegment(m,v,b,h))},p=()=>{let m;for(;(m=f.peekValue())!==void 0;)g(d,m,u),d=m,u-=f.pop();d=void 0,l&&(this._propagate(l),l=void 0)};this.handle=m=>{const v=s(m);let b;for(;(b=f.peekValue())!==void 0&&b<v;)g(d,b,u),d=b,u-=f.pop();if(n){let y=o(m);y!==c&&(p(),h=y,c=h)}d!==void 0&&g(d,v,u),d=v;const w=a(m);u+=w,f.push(w,r(m))},this.complete=()=>{p(),super.complete()}}}function Dme(i,e,t=0,n=i.length){const s=new gx,r=n-t;let o;for(o=0;o<e&&o<r;o++)s.push(o,i[t+o]);for(;o<r;o++){const c=i[t+o];c>=s.peekValue()&&(s.push(o,c),s.pop())}const a=[];let l;for(;(l=s.pop())!==void 0;)a.push(t+l);return a.reverse()}class kme{constructor(e,t=-1/0,n=1/0){this.maxSize=e,this.lowerLimit=t,this.upperLimit=n;const s=this.maxSize*2+1;this.lowerLimits=new Float64Array(s),this.upperLimits=new Float64Array(s),this.lowerChildren=new Int32Array(s),this.upperChildren=new Int32Array(s),this.reset()}reset(){this.lowerLimits.fill(0),this.upperLimits.fill(0),this.lowerChildren.fill(0),this.upperChildren.fill(0),this.n=1,this.lowerLimits[0]=this.lowerLimit,this.upperLimits[0]=this.upperLimit}_findSlot(e,t,n=0){if(e>=this.lowerLimits[n]&&t<=this.upperLimits[n]){const s=this.lowerChildren[n];if(s){const r=this._findSlot(e,t,s);return r>=0?r:this._findSlot(e,t,this.upperChildren[n])}else return n}else return-1}reserve(e,t){if(t-e<=0)throw new Error("Cannot reserve an empty or negative-size slot!");if(this.n+1>this.lowerLimits.length)return!1;const n=this._findSlot(e,t);if(n<0)return!1;const s=this.n++,r=this.n++;return this.lowerLimits[s]=this.lowerLimits[n],this.upperLimits[s]=e,this.lowerLimits[r]=t,this.upperLimits[r]=this.upperLimits[n],this.lowerChildren[n]=s,this.upperChildren[n]=r,!0}}class Lme extends An{get behavior(){return MO}constructor(e,t){if(super(),this.params=e,this._data=[],this.channel=e.channel??"x",!["x","y"].includes(this.channel))throw new Error("Invalid channel: "+this.channel);this.posAccessor=Ai(this.params.pos),this.posBisector=_k(this.posAccessor),this.scoreAccessor=Ai(this.params.score),this.widthAccessor=Ai(this.params.width),this.laneAccessor=this.params.lane?Ai(this.params.lane):s=>0,this.padding=this.params.padding??0,this.reservationMaps=new Map,this.resolution=t.getScaleResolution(this.channel);const n=()=>this._filterAndPropagate();this.schedule=()=>t.context.animator.requestTransition(n),this.resolution.addEventListener("domain",s=>this.schedule()),t._addBroadcastHandler("layoutComputed",()=>this.schedule())}complete(){const e=this.posAccessor;this._data.sort((t,n)=>e(t)-e(n)),this._scores=this._data.map(this.scoreAccessor);for(const t of new Set(this._data.map(this.laneAccessor)))this.reservationMaps.set(t,new kme(200));this.schedule(),super.complete()}_filterAndPropagate(){var e;super.reset();const t=this.resolution.getScale(),n=(e=this.resolution.members[0].view.coords)==null?void 0:e[this.channel=="x"?"width":"height"];if(!n)return;for(const a of this.reservationMaps.values())a.reset();const s=t.domain(),r=70,o=Dme(this._scores,r,this.posBisector.left(this._data,s[0]),this.posBisector.right(this._data,s[1]));for(const a of o){const l=this._data[a],c=t(this.posAccessor(l))*n,h=this.widthAccessor(l)/2+this.padding;this.reservationMaps.get(this.laneAccessor(l)).reserve(c-h,c+h)&&this._propagate(l)}super.complete()}reset(){super.reset(),this._data=[],this.groups=new Map}handle(e){this._data.push(e)}}class Ame extends An{constructor(e){super(),this.params=e,this.predicate=void 0}initialize(){this.predicate=UR(this.params.expr,this.getGlobalObject())}handle(e){this.predicate(e)&&this._propagate(e)}}const Eme="0".charCodeAt(0);function*Ime(i,e=","){const t=e.charCodeAt(0);let n=0;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);r==t?(yield n,n=0):n=n*10+r-Eme}yield n}class Tme extends An{get behavior(){return Jc}constructor(e){super();const t=Ai(e.exons??"exons"),n=Ai(e.start??"start"),[s,r]=e.as||["exonStart","exonEnd"];this.handle=o=>{let a=n(o),l=a,c=!0;const h=t(o);for(const u of Ime(h)){if(c)l=a+u;else{a=l+u;const d=Object.assign({},o);d[s]=l,d[r]=a,this._propagate(d)}c=!c}}}}class Nme extends An{get behavior(){return Jc}constructor(e){super();const t=_l(e.field).map(r=>Ai(r)),n=_l(e.separator),s=_l(e.as||e.field);if(t.length!==n.length||t.length!==s.length)throw new Error(`Lengths of "separator" (${n.length}), "fields" (${t.length}), and "as" (${s.length}) do not match!`);this.handle=r=>{if(t.some(l=>!l(r)))return;const o=t.map((l,c)=>l(r).split(n[c]));Mme(o,r);const a=o[0].length;for(let l=0;l<a;l++){const c=Object.assign({},r);for(let h=0;h<t.length;h++)c[s[h]]=o[h][l];this._propagate(c)}}}}function Mme(i,e){const t=i.map(n=>n.length);if(!t.every(n=>n==t[0]))throw new Error("Mismatching number of elements in the fields to be split: "+JSON.stringify(e))}class Rme extends An{get behavior(){return $u}constructor(e){super(),this.params=e,this.as=e.as,this.fn=void 0}initialize(){this.fn=UR(this.params.expr,this.getGlobalObject())}handle(e){e[this.as]=this.fn(e),this._propagate(e)}}class AG extends An{get behavior(){return $u}constructor(e,t){super();const n=e.channel??"x";if(!["x","y"].includes(n))throw new Error("Invalid channel: "+n);const s=t.getScaleResolution(n).getGenome();if(!s)throw new Error("LinearizeGenomicCoordinate transform requires a locus scale!");const r=Ai(e.chrom),o=_l(e.pos).map(g=>Ai(g)),a=_l(e.as);if(o.length!=a.length)throw new Error('The number of "pos" and "as" elements must be equal!');const l=_l(e.offset);let c;if(l.length==0)c=new Array(o.length).fill(0);else if(l.length==1)c=new Array(o.length).fill(l[0]);else if(l.length==o.length)c=l;else throw new Error(`Invalid "offset" parameter: ${JSON.stringify(e.offset)}!`);const h=new Function("datum","chromOffset","posAccessors",a.map((g,p)=>`datum[${JSON.stringify(g)}] = chromOffset + +posAccessors[${p}](datum) - ${c[p]};`).join(`
`));let u,d=0;const f=g=>{if(g!==u){if(d=s.cumulativeChromPositions.get(g),d===void 0)throw new Error("Unknown chromosome/contig: "+g);u=g}return d};this.handle=g=>{h(g,f(r(g)),o),this._propagate(g)}}}const Ome=["Lato-Regular.png"],Pme=[{id:87,width:53,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:43.491,chnl:15,x:0,y:0,page:0},{id:124,width:17,height:50,xoffset:0,yoffset:-32.193000000000005,xadvance:10.521,chnl:15,x:0,y:42,page:0},{id:40,width:20,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:94,page:0},{id:41,width:19,height:49,xoffset:0,yoffset:-32.571000000000005,xadvance:11.214,chnl:15,x:0,y:145,page:0},{id:36,width:32,height:49,xoffset:0,yoffset:-34.419000000000004,xadvance:24.360000000000003,chnl:15,x:0,y:196,page:0},{id:125,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:247,page:0},{id:91,width:22,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:297,page:0},{id:93,width:19,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.852,chnl:15,x:0,y:347,page:0},{id:123,width:21,height:48,xoffset:0,yoffset:-32.193000000000005,xadvance:12.642000000000001,chnl:15,x:0,y:397,page:0},{id:106,width:19,height:48,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:0,y:447,page:0},{id:81,width:43,height:47,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:21,y:447,page:0},{id:77,width:45,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:38.997,chnl:15,x:66,y:447,page:0},{id:64,width:43,height:44,xoffset:0,yoffset:-28.539,xadvance:35.133,chnl:15,x:23,y:397,page:0},{id:92,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:68,y:397,page:0},{id:47,width:28,height:43,xoffset:0,yoffset:-30.933000000000003,xadvance:18.984,chnl:15,x:98,y:397,page:0},{id:109,width:42,height:32,xoffset:0,yoffset:-21.609,xadvance:34.545,chnl:15,x:113,y:447,page:0},{id:119,width:42,height:31,xoffset:0,yoffset:-21.315,xadvance:32.991,chnl:15,x:157,y:447,page:0},{id:42,width:25,height:42,xoffset:0,yoffset:-31.626,xadvance:17.85,chnl:15,x:128,y:397,page:0},{id:37,width:42,height:41,xoffset:0,yoffset:-30.387,xadvance:33.663000000000004,chnl:15,x:155,y:397,page:0},{id:79,width:42,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:33.621,chnl:15,x:199,y:397,page:0},{id:102,width:24,height:41,xoffset:0,yoffset:-30.534000000000002,xadvance:14.721,chnl:15,x:243,y:397,page:0},{id:100,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:269,y:397,page:0},{id:98,width:32,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.520000000000003,chnl:15,x:302,y:397,page:0},{id:56,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:336,y:397,page:0},{id:38,width:40,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:29.904000000000003,chnl:15,x:370,y:397,page:0},{id:108,width:17,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:9.912,chnl:15,x:412,y:397,page:0},{id:107,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:21.336000000000002,chnl:15,x:431,y:397,page:0},{id:48,width:33,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:464,y:397,page:0},{id:71,width:38,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:30.681,chnl:15,x:21,y:347,page:0},{id:83,width:31,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:22.785,chnl:15,x:61,y:347,page:0},{id:63,width:27,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:18.795,chnl:15,x:94,y:347,page:0},{id:105,width:18,height:41,xoffset:0,yoffset:-30.639000000000003,xadvance:10.08,chnl:15,x:123,y:347,page:0},{id:51,width:32,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:143,y:347,page:0},{id:104,width:31,height:41,xoffset:0,yoffset:-30.933000000000003,xadvance:23.436,chnl:15,x:177,y:347,page:0},{id:67,width:37,height:41,xoffset:0,yoffset:-30.429000000000002,xadvance:28.056,chnl:15,x:210,y:347,page:0},{id:88,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.258000000000003,chnl:15,x:249,y:347,page:0},{id:68,width:40,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:31.941000000000003,chnl:15,x:288,y:347,page:0},{id:70,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:23.751,chnl:15,x:330,y:347,page:0},{id:34,width:23,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:15.561000000000002,chnl:15,x:364,y:347,page:0},{id:72,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:389,y:347,page:0},{id:73,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.760000000000002,chnl:15,x:429,y:347,page:0},{id:74,width:24,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:17.745,chnl:15,x:449,y:347,page:0},{id:75,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.825000000000003,chnl:15,x:24,y:297,page:0},{id:76,width:31,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:21.567,chnl:15,x:475,y:347,page:0},{id:66,width:35,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:27.153000000000002,chnl:15,x:64,y:297,page:0},{id:78,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:32.067,chnl:15,x:101,y:297,page:0},{id:33,width:18,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:11.298,chnl:15,x:141,y:297,page:0},{id:80,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.221,chnl:15,x:161,y:297,page:0},{id:65,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:197,y:297,page:0},{id:82,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.313000000000002,chnl:15,x:237,y:297,page:0},{id:35,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:275,y:297,page:0},{id:84,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.801000000000002,chnl:15,x:310,y:297,page:0},{id:85,width:37,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:30.891000000000002,chnl:15,x:346,y:297,page:0},{id:86,width:38,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:28.434,chnl:15,x:385,y:297,page:0},{id:39,width:16,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:8.568000000000001,chnl:15,x:425,y:297,page:0},{id:69,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.255000000000003,chnl:15,x:443,y:297,page:0},{id:89,width:36,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:26.208000000000002,chnl:15,x:23,y:247,page:0},{id:90,width:34,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:25.284000000000002,chnl:15,x:477,y:297,page:0},{id:49,width:31,height:40,xoffset:0,yoffset:-30.156000000000002,xadvance:24.360000000000003,chnl:15,x:61,y:247,page:0},{id:50,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:94,y:247,page:0},{id:57,width:32,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:24.360000000000003,chnl:15,x:128,y:247,page:0},{id:94,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:162,y:247,page:0},{id:96,width:21,height:40,xoffset:0,yoffset:-30.429000000000002,xadvance:16.8,chnl:15,x:196,y:247,page:0},{id:55,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:219,y:247,page:0},{id:54,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:254,y:247,page:0},{id:53,width:32,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:289,y:247,page:0},{id:52,width:33,height:40,xoffset:0,yoffset:-30.093000000000004,xadvance:24.360000000000003,chnl:15,x:323,y:247,page:0},{id:103,width:31,height:39,xoffset:0,yoffset:-21.630000000000003,xadvance:21.84,chnl:15,x:358,y:247,page:0},{id:112,width:32,height:39,xoffset:0,yoffset:-21.651,xadvance:23.541,chnl:15,x:391,y:247,page:0},{id:113,width:31,height:39,xoffset:0,yoffset:-21.651,xadvance:23.520000000000003,chnl:15,x:425,y:247,page:0},{id:116,width:25,height:39,xoffset:0,yoffset:-28.182000000000002,xadvance:15.057,chnl:15,x:458,y:247,page:0},{id:121,width:31,height:38,xoffset:0,yoffset:-21.273,xadvance:21.651,chnl:15,x:34,y:196,page:0},{id:59,width:18,height:36,xoffset:0,yoffset:-20.706,xadvance:10.983,chnl:15,x:485,y:247,page:0},{id:43,width:32,height:34,xoffset:0,yoffset:-24.486,xadvance:24.360000000000003,chnl:15,x:67,y:196,page:0},{id:60,width:30,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:101,y:196,page:0},{id:62,width:31,height:33,xoffset:0,yoffset:-23.331000000000003,xadvance:24.360000000000003,chnl:15,x:133,y:196,page:0},{id:117,width:30,height:32,xoffset:0,yoffset:-21.273,xadvance:23.415000000000003,chnl:15,x:166,y:196,page:0},{id:99,width:29,height:32,xoffset:0,yoffset:-21.609,xadvance:20.055,chnl:15,x:198,y:196,page:0},{id:110,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:23.436,chnl:15,x:229,y:196,page:0},{id:111,width:32,height:32,xoffset:0,yoffset:-21.609,xadvance:23.814,chnl:15,x:262,y:196,page:0},{id:126,width:32,height:26,xoffset:0,yoffset:-16.128,xadvance:24.360000000000003,chnl:15,x:201,y:447,page:0},{id:101,width:31,height:32,xoffset:0,yoffset:-21.609,xadvance:22.176000000000002,chnl:15,x:296,y:196,page:0},{id:114,width:25,height:32,xoffset:0,yoffset:-21.651,xadvance:15.288,chnl:15,x:329,y:196,page:0},{id:115,width:27,height:32,xoffset:0,yoffset:-21.609,xadvance:18.186,chnl:15,x:356,y:196,page:0},{id:97,width:28,height:32,xoffset:0,yoffset:-21.651,xadvance:20.874000000000002,chnl:15,x:385,y:196,page:0},{id:118,width:31,height:31,xoffset:0,yoffset:-21.273,xadvance:21.672,chnl:15,x:415,y:196,page:0},{id:61,width:31,height:29,xoffset:0,yoffset:-19.089000000000002,xadvance:24.360000000000003,chnl:15,x:448,y:196,page:0},{id:120,width:30,height:31,xoffset:0,yoffset:-21.273,xadvance:20.916,chnl:15,x:21,y:145,page:0},{id:58,width:18,height:31,xoffset:0,yoffset:-20.706,xadvance:10.5,chnl:15,x:53,y:145,page:0},{id:122,width:28,height:31,xoffset:0,yoffset:-21.273,xadvance:18.984,chnl:15,x:73,y:145,page:0},{id:95,width:28,height:16,xoffset:0,yoffset:0,xadvance:19.278000000000002,chnl:15,x:235,y:447,page:0},{id:45,width:23,height:24,xoffset:0,yoffset:-14.175,xadvance:15.603000000000002,chnl:15,x:481,y:196,page:0},{id:44,width:17,height:21,xoffset:0,yoffset:-4.956,xadvance:9.534,chnl:15,x:103,y:145,page:0},{id:46,width:18,height:15,xoffset:0,yoffset:-4.956,xadvance:9.912,chnl:15,x:0,y:497,page:0},{id:32,width:0,height:0,xoffset:0,yoffset:0,xadvance:10.752,chnl:15,x:20,y:497,page:0}],Fme={face:"Lato Regular",size:42,bold:0,italic:0,charset:[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],unicode:1,stretchH:100,smooth:1,aa:1,padding:[0,0,0,0],spacing:[2,2]},Bme={lineHeight:50.400000000000006,base:41.454,scaleW:512,scaleH:512,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},Vme=[],EG={pages:Ome,chars:Pme,info:Fme,common:Bme,kernings:Vme};class Wme extends An{get behavior(){return $u}constructor(e){super();const t=zT(EG),n=Ai(e.field),s=e.as,r=e.fontSize;this.handle=o=>{const a=n(o);a!==void 0?o[s]=t.measureWidth(a,r):o[s]=0,this._propagate(o)}}}const zme=65536;class Hme extends An{get behavior(){return $u}constructor(e){super(),this.params=e}reset(){super.reset(),this.initialize()}initialize(){const e=this.params,t=e.as||"lane",n=xr(e.spacing)?e.spacing:1,s=Ai(e.start),r=Ai(e.end);if(!e.preference!=!e.preferredOrder)throw new Error('Must specify both "preference" and "preferredOrder"');if(e.preference){const o=new Float64Array(zme),a=Ai(e.preference),l=e.preferredOrder;let c=1/0;this.handle=h=>{const u=s(h);u<c&&o.fill(-1/0),c=u;const d=l.indexOf(a(h));let f=-1;if(d>=0&&o[d]<u)f=d;else{const g=s(h);for(f=0;f<o.length&&!(o[f]<g);f++);if(f>=o.length)throw new Error("Out of lanes!")}o[f]=r(h)+n,h[t]=f,this._propagate(h)}}else{const o=new gx,a=new gx;let l=-1/0,c=0;this.handle=h=>{const u=s(h);for(;o.length&&(o.peekValue()<=u||u<l);){const f=o.pop();a.push(f,f)}l=u;let d=a.pop();d===void 0&&(d=c++),h[t]=d,this._propagate(h),o.push(d,r(h)+n)}}}}class Ume extends An{get behavior(){return Jc}constructor(e){if(super(),e.as&&e.as.length!=e.fields.length)throw new Error('"fields" and "as" have unequal lengths!');const t=e.fields.map(s=>Ai(s)),n=e.as?e.as:t.map(tre);this.handle=s=>{const r={};for(let o=0;o<t.length;o++)r[n[o]]=t[o](s);this._propagate(r)}}}class $me extends An{get behavior(){return $u}constructor(e){super();const t=new RegExp(e.regex),n=typeof e.as=="string"?[e.as]:e.as,s=Ai(e.field);this.handle=r=>{const o=s(r);if(en(o)){const a=o.match(t);if(a){if(a.length-1!=n.length)throw new Error('The number of RegEx groups and the length of "as" do not match!');for(let l=0;l<n.length;l++)r[n[l]]=a[l+1]}else if(e.skipInvalidInput)for(let l=0;l<n.length;l++)r[n[l]]=void 0;else throw new Error(`"${o}" does not match the given regex: ${t.toString()}`)}else if(!e.skipInvalidInput)throw new Error(`Trying to match a non-string field. Encountered type: ${typeof o}, field content: "${o}".`);this._propagate(r)}}}class jme extends An{get behavior(){return Jc}constructor(e){super();const t=_l(e.columnRegex).map(d=>new RegExp(d)),n=_l(e.asValue);if(t.length!=n.length)throw new Error('Lengths of "columnRegex" and "as" are not equal!');const s=e.skipRegex?new RegExp(e.skipRegex):void 0,r=e.asKey||"sample";let o,a,l;const c=d=>{var f;const g=Object.keys(d),p=new Map;for(const[v,b]of t.entries())for(const w of g){const y=(f=b.exec(w))==null?void 0:f[1];if(y!==void 0){let x=p.get(y);x||(x=[],p.set(y,x)),x[v]=w}}o=[...p.entries()],a=g.filter(v=>!t.some(b=>b.test(v))&&!(s&&s.test(v)));const m=[...a.map(v=>JSON.stringify(v)+": datum["+JSON.stringify(v)+"]"),JSON.stringify(r)+": sampleId",...n.map(v=>JSON.stringify(v)+": null")];l=new Function("datum","sampleId",`return {
`+m.join(`,
`)+`
};`)},h=d=>{o||c(d);for(const[f,g]of o){const p=l(d,f);for(let m=0;m<g.length;m++)p[n[m]]=d[g[m]];this._propagate(p)}},u=d=>{c(d),h(d),this.handle=h};this.handle=u,this.beginBatch=d=>{iG(d)&&(this.handle=u),super.beginBatch(d)}}}class qme extends An{get behavior(){return $u}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params,t=e.as||["y0","y1"],n=e.sort?QU(e.sort.field,e.sort.order):void 0,s=e.field?Ai(e.field):()=>1,r=e.groupby.map(h=>Ai(h)),o=jre(this.buffer,h=>r.map(u=>u(h)).join()).map(h=>h[1]);let a=h=>!0;if(e.baseField){const h=Ai(e.baseField);a=u=>h(u)!==null}let l,c;switch(e.offset){case"normalize":l=(h,u)=>h/u,c=(h,u)=>sy(h,u);break;case"center":l=(h,u)=>h-u/2,c=(h,u)=>sy(h,u);break;case"information":{const h=Math.log2(e.cardinality??4);l=(u,d)=>u/d,c=(u,d)=>{const f=sy(u,v=>+!a(v)),g=sy(u,d),p=g-f;let m=0;for(let v=0;v<u.length;v++){const b=u[v];if(a(b)){const w=d(b)/p;m-=w*Math.log2(w)}}return p/(h-(m+0))*(p/g)}}break;default:l=(h,u)=>h,c=(h,u)=>1}for(const h of o){n&&h.sort(n);const u=c(h,s);let d=0;for(const f of h){const g=d+s(f);a(f)&&(f[t[0]]=l(d,u),f[t[1]]=l(g,u),this._propagate(f),d=g)}}super.complete()}}class Gme extends An{get behavior(){return Jc}constructor(e){super();const t=Ai(e.field??"sequence"),[n,s]=e.as??["pos","sequence"];this.handle=r=>{const o=Object.assign({},r,{[s]:"",[n]:0}),a=t(r);for(let l=0;l<a.length;l++){const c=Object.assign({},o);c[n]=l,c[s]=a.charAt(l),this._propagate(c)}}}}class Kme extends An{get behavior(){return Jc}constructor(e){super(),this.params=e,this.buffer=[]}reset(){this.buffer=[]}handle(e){this.buffer.push(e)}complete(){const e=this.params.groupby,t=e.map(s=>Ai(s)),n=bk(this.buffer,...t);for(const[s,r]of OO(n)){const o={count:r.length};for(let a=0;a<e.length;a++)o[e[a]]=s[a];this._propagate(o)}super.complete()}}const Zme="_uniqueId",h8=1e4,u8=[null];class IG extends An{get behavior(){return $u}constructor(e){super(),this.params=e,this.as=e.as??Zme,this._blocks=[],this._usedBlocks=0,this._id=-1}initialize(){}reset(){super.reset(),this._usedBlocks=0,this._id=-1}handle(e){e[this.as]=this._nextId(),this._propagate(e)}_nextId(){return++this._id%h8==0&&(this._id=this._getBlock()*h8),this._id}_getBlock(){return this._usedBlocks<this._blocks.length?this._blocks[this._usedBlocks++]:this._reserveBlock()}_reserveBlock(){const e=u8.length;return u8[e]=this,this._blocks.push(e),this._usedBlocks++,e}}const Yme={aggregate:Kme,collect:LG,coverage:xme,filterScoredLabels:Lme,filter:Ame,flattenCompressedExons:Tme,flattenDelimited:Nme,flattenSequence:Gme,formula:Rme,identifier:IG,linearizeGenomicCoordinate:AG,measureText:Wme,pileup:Hme,project:Ume,regexExtract:$me,regexFold:jme,sample:nG,stack:qme};function Qme(i,e){const t=Yme[i.type];if(t)return new t(i,e);throw new Error("Unknown transform: "+i.type)}function TG(i){if(!MG(i)&&!d8(i))return;const e={...i.format};if(e.type??(e.type=d8(i)&&Xme(i.url)),e.parse??(e.parse="auto"),!e.type)throw new Error("Format for the data source was not defined and it could not be inferred: "+JSON.stringify(i));return e}function Xme(i){var e;if(Array.isArray(i)&&(i=i[0]),i)return(e=i.match(/\.(csv|tsv|json)/))==null?void 0:e[1]}const NG=i=>typeof i!="object"?Jme:e0e,Jme=i=>({data:i}),e0e=i=>i;function d8(i){return"url"in i}class yw extends An{get identifier(){}handle(e){throw new Error("Source does not handle incoming data!")}async load(){}}function MG(i){return"values"in i}class t0e extends yw{constructor(e,t){var n;if(super(),this.params=e,typeof e.values=="string"&&!((n=e==null?void 0:e.format)!=null&&n.type))throw new Error("Data format type (csv, dsv, ...) must be specified if a string is provided!")}loadSynchronously(){const e=this.params.values;let t=[],n=s=>s;if(Array.isArray(e))e.length>0&&(t=e,n=NG(e[0]));else if(typeof e=="object")t=[e];else if(typeof e=="string")t=N$(e,TG(this.params));else throw new Error('"values" in data configuration is not an array, object, or a string!');this.reset(),this.beginBatch({type:"file"});for(const s of t)this._propagate(n(s));this.complete()}async load(){this.loadSynchronously()}}function i0e(i){return"url"in i}class n0e extends yw{constructor(e,t){super(),this.params=e,this.baseUrl=t==null?void 0:t.getBaseUrl()}get identifier(){return JSON.stringify({params:this.params,baseUrl:this.baseUrl})}async load(){const e=this.params.url,t=Array.isArray(e)?e:[e],n=async r=>yk({baseURL:this.baseUrl}).load(r).catch(o=>{throw new Error(`Cannot fetch: ${this.baseUrl}${r}: ${o.message}`)}),s=(r,o)=>{try{const a=N$(r,TG(this.params));this.beginBatch({type:"file",url:o});for(const l of a)this._propagate(l)}catch(a){throw new Error(`Cannot parse: ${o}: ${a.message}`)}};this.reset(),await Promise.all(t.map(r=>n(r).then(s))),this.complete()}}function s0e(i){return"sequence"in i}class r0e extends yw{constructor(e,t){if(super(),this.sequence=e.sequence,!("start"in this.sequence))throw new Error("'start' is missing from sequence parameters!");if(!("stop"in this.sequence))throw new Error("'stop' is missing from sequence parameters!")}loadSynchronously(){const e=this.sequence.as||"data",t=this.sequence.step||1,n=this.sequence.stop;this.reset(),this.beginBatch({type:"file"});for(let s=this.sequence.start;s<n;s+=t)this._propagate({[e]:s});this.complete()}async load(){this.loadSynchronously()}}function o0e(i,e,t){return t=(t-i)/(e-i),t=Math.max(0,Math.min(1,t)),t*t*(3-2*t)}class w0 extends yw{constructor(e,t){if(super(),this.view=e,t){if(t!=="x"&&t!=="y")throw new Error(`Invalid channel specified for the dynamic data source: ${t}. Must be either "x" or "y"`)}else throw new Error('No channel has been specified for the dynamic data source. Must be either "x" or "y".');if(this.channel=t,this.scaleResolution=this.view.getScaleResolution(t),!this.scaleResolution){const s=[`The dynamic data source cannot find a resolved scale for channel "${t}".`];throw this.view instanceof Ys||s.push('Make sure the view has a "shared" scale resolution as it is not a unit view.'),new Error(s.join(" "))}const n=()=>{this.view.isVisible()&&this.onDomainChanged(this.scaleResolution.getDomain(),this.scaleResolution.getComplexDomain())};this.scaleResolution.addEventListener("domain",n),this.view.context.addBroadcastListener("layoutComputed",n)}getAxisLength(){const e=this.scaleResolution.members.map(t=>{var n;return(n=t.view.coords)==null?void 0:n[this.channel==="x"?"width":"height"]}).filter(t=>t>0);return e.length?e.reduce((t,n)=>Math.min(t,n),1e4):0}get genome(){return this.scaleResolution.getGenome()}async onDomainChanged(e,t){}requestRender(){this.view.context.animator.requestRender()}async load(){this.reset(),this.complete()}publishData(e){this.reset(),this.beginBatch({type:"file"});for(const t of e)this._propagate(t);this.complete(),DG(this.view,[this.channel]),this.requestRender()}}class a0e extends w0{constructor(e,t){const n={axis:{},...e};super(t,n.channel),Il(this,"ticks",[]),this.params=e}async onDomainChanged(){const e=this.scaleResolution.getScale(),t=this.params.axis,n=this.getAxisLength(),s=l=>25+60*o0e(100,700,l),r=xr(t.tickCount)?t.tickCount:Math.round(n/s(n)),o=hG(e,r,t.tickMinStep),a=t.values?uG(e,t.values,o):Wpe(e,o);if(!tx(a,this.ticks)){this.ticks=a;const l=Hpe(e,r,t.format);this.publishData(a.map(c=>({value:c,label:l(c)})))}}}class l0e extends w0{constructor(e,t){super(t,e.channel)}async load(){this.publishData(this.genome.chromosomes)}}var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var zr={},Yk={};Yk.byteLength=u0e;Yk.toByteArray=f0e;Yk.fromByteArray=m0e;var ol=[],co=[],c0e=typeof Uint8Array<"u"?Uint8Array:Array,uA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Fg=0,h0e=uA.length;Fg<h0e;++Fg)ol[Fg]=uA[Fg],co[uA.charCodeAt(Fg)]=Fg;co["-".charCodeAt(0)]=62;co["_".charCodeAt(0)]=63;function RG(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function u0e(i){var e=RG(i),t=e[0],n=e[1];return(t+n)*3/4-n}function d0e(i,e,t){return(e+t)*3/4-t}function f0e(i){var e,t=RG(i),n=t[0],s=t[1],r=new c0e(d0e(i,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=co[i.charCodeAt(l)]<<18|co[i.charCodeAt(l+1)]<<12|co[i.charCodeAt(l+2)]<<6|co[i.charCodeAt(l+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=co[i.charCodeAt(l)]<<2|co[i.charCodeAt(l+1)]>>4,r[o++]=e&255),s===1&&(e=co[i.charCodeAt(l)]<<10|co[i.charCodeAt(l+1)]<<4|co[i.charCodeAt(l+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function g0e(i){return ol[i>>18&63]+ol[i>>12&63]+ol[i>>6&63]+ol[i&63]}function p0e(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(g0e(n));return s.join("")}function m0e(i){for(var e,t=i.length,n=t%3,s=[],r=16383,o=0,a=t-n;o<a;o+=r)s.push(p0e(i,o,o+r>a?a:o+r));return n===1?(e=i[t-1],s.push(ol[e>>2]+ol[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(ol[e>>10]+ol[e>>4&63]+ol[e<<2&63]+"=")),s.join("")}var PO={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */PO.read=function(i,e,t,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=t?s-1:0,d=t?-1:1,f=i[e+u];for(u+=d,r=f&(1<<-h)-1,f>>=-h,h+=a;h>0;r=r*256+i[e+u],u+=d,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=n;h>0;o=o*256+i[e+u],u+=d,h-=8);if(r===0)r=1-c;else{if(r===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-c}return(f?-1:1)*o*Math.pow(2,r-n)};PO.write=function(i,e,t,n,s,r){var o,a,l,c=r*8-s-1,h=(1<<c)-1,u=h>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=d/l:e+=d*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,s),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;i[t+f]=a&255,f+=g,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;i[t+f]=o&255,f+=g,o/=256,c-=8);i[t+f-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=Yk,t=PO,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=b,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const C=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(C,A),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const A=new Uint8Array(C);return Object.setPrototypeOf(A,a.prototype),A}function a(C,A,I){if(typeof C=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(C)}return l(C,A,I)}a.poolSize=8192;function l(C,A,I){if(typeof C=="string")return d(C,A);if(ArrayBuffer.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(nn(C,ArrayBuffer)||C&&nn(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(nn(C,SharedArrayBuffer)||C&&nn(C.buffer,SharedArrayBuffer)))return p(C,A,I);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=C.valueOf&&C.valueOf();if(j!=null&&j!==C)return a.from(j,A,I);const Y=m(C);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),A,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,A,I){return l(C,A,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function h(C,A,I){return c(C),C<=0?o(C):A!==void 0?typeof I=="string"?o(C).fill(A,I):o(C).fill(A):o(C)}a.alloc=function(C,A,I){return h(C,A,I)};function u(C){return c(C),o(C<0?0:v(C)|0)}a.allocUnsafe=function(C){return u(C)},a.allocUnsafeSlow=function(C){return u(C)};function d(C,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const I=w(C,A)|0;let j=o(I);const Y=j.write(C,A);return Y!==I&&(j=j.slice(0,Y)),j}function f(C){const A=C.length<0?0:v(C.length)|0,I=o(A);for(let j=0;j<A;j+=1)I[j]=C[j]&255;return I}function g(C){if(nn(C,Uint8Array)){const A=new Uint8Array(C);return p(A.buffer,A.byteOffset,A.byteLength)}return f(C)}function p(C,A,I){if(A<0||C.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<A+(I||0))throw new RangeError('"length" is outside of buffer bounds');let j;return A===void 0&&I===void 0?j=new Uint8Array(C):I===void 0?j=new Uint8Array(C,A):j=new Uint8Array(C,A,I),Object.setPrototypeOf(j,a.prototype),j}function m(C){if(a.isBuffer(C)){const A=v(C.length)|0,I=o(A);return I.length===0||C.copy(I,0,0,A),I}if(C.length!==void 0)return typeof C.length!="number"||Ws(C.length)?o(0):f(C);if(C.type==="Buffer"&&Array.isArray(C.data))return f(C.data)}function v(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function b(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,A){if(nn(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),nn(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(C)||!a.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===A)return 0;let I=C.length,j=A.length;for(let Y=0,ae=Math.min(I,j);Y<ae;++Y)if(C[Y]!==A[Y]){I=C[Y],j=A[Y];break}return I<j?-1:j<I?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,A){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let I;if(A===void 0)for(A=0,I=0;I<C.length;++I)A+=C[I].length;const j=a.allocUnsafe(A);let Y=0;for(I=0;I<C.length;++I){let ae=C[I];if(nn(ae,Uint8Array))Y+ae.length>j.length?(a.isBuffer(ae)||(ae=a.from(ae)),ae.copy(j,Y)):Uint8Array.prototype.set.call(j,ae,Y);else if(a.isBuffer(ae))ae.copy(j,Y);else throw new TypeError('"list" argument must be an Array of Buffers');Y+=ae.length}return j};function w(C,A){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||nn(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const I=C.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&I===0)return 0;let Y=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return ii(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return io(C).length;default:if(Y)return j?-1:ii(C).length;A=(""+A).toLowerCase(),Y=!0}}a.byteLength=w;function y(C,A,I){let j=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,A>>>=0,I<=A))return"";for(C||(C="utf8");;)switch(C){case"hex":return me(this,A,I);case"utf8":case"utf-8":return ee(this,A,I);case"ascii":return Ce(this,A,I);case"latin1":case"binary":return Se(this,A,I);case"base64":return U(this,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,A,I);default:if(j)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),j=!0}}a.prototype._isBuffer=!0;function x(C,A,I){const j=C[A];C[A]=C[I],C[I]=j}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<C;A+=2)x(this,A,A+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<C;A+=4)x(this,A,A+3),x(this,A+1,A+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<C;A+=8)x(this,A,A+7),x(this,A+1,A+6),x(this,A+2,A+5),x(this,A+3,A+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?ee(this,0,C):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const A=i.INSPECT_MAX_BYTES;return C=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(C+=" ... "),"<Buffer "+C+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(C,A,I,j,Y){if(nn(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(A===void 0&&(A=0),I===void 0&&(I=C?C.length:0),j===void 0&&(j=0),Y===void 0&&(Y=this.length),A<0||I>C.length||j<0||Y>this.length)throw new RangeError("out of range index");if(j>=Y&&A>=I)return 0;if(j>=Y)return-1;if(A>=I)return 1;if(A>>>=0,I>>>=0,j>>>=0,Y>>>=0,this===C)return 0;let ae=Y-j,_e=I-A;const vt=Math.min(ae,_e),di=this.slice(j,Y),Ot=C.slice(A,I);for(let Pt=0;Pt<vt;++Pt)if(di[Pt]!==Ot[Pt]){ae=di[Pt],_e=Ot[Pt];break}return ae<_e?-1:_e<ae?1:0};function L(C,A,I,j,Y){if(C.length===0)return-1;if(typeof I=="string"?(j=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Ws(I)&&(I=Y?0:C.length-1),I<0&&(I=C.length+I),I>=C.length){if(Y)return-1;I=C.length-1}else if(I<0)if(Y)I=0;else return-1;if(typeof A=="string"&&(A=a.from(A,j)),a.isBuffer(A))return A.length===0?-1:S(C,A,I,j,Y);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(C,A,I):Uint8Array.prototype.lastIndexOf.call(C,A,I):S(C,[A],I,j,Y);throw new TypeError("val must be string, number or Buffer")}function S(C,A,I,j,Y){let ae=1,_e=C.length,vt=A.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(C.length<2||A.length<2)return-1;ae=2,_e/=2,vt/=2,I/=2}function di(Pt,fi){return ae===1?Pt[fi]:Pt.readUInt16BE(fi*ae)}let Ot;if(Y){let Pt=-1;for(Ot=I;Ot<_e;Ot++)if(di(C,Ot)===di(A,Pt===-1?0:Ot-Pt)){if(Pt===-1&&(Pt=Ot),Ot-Pt+1===vt)return Pt*ae}else Pt!==-1&&(Ot-=Ot-Pt),Pt=-1}else for(I+vt>_e&&(I=_e-vt),Ot=I;Ot>=0;Ot--){let Pt=!0;for(let fi=0;fi<vt;fi++)if(di(C,Ot+fi)!==di(A,fi)){Pt=!1;break}if(Pt)return Ot}return-1}a.prototype.includes=function(C,A,I){return this.indexOf(C,A,I)!==-1},a.prototype.indexOf=function(C,A,I){return L(this,C,A,I,!0)},a.prototype.lastIndexOf=function(C,A,I){return L(this,C,A,I,!1)};function k(C,A,I,j){I=Number(I)||0;const Y=C.length-I;j?(j=Number(j),j>Y&&(j=Y)):j=Y;const ae=A.length;j>ae/2&&(j=ae/2);let _e;for(_e=0;_e<j;++_e){const vt=parseInt(A.substr(_e*2,2),16);if(Ws(vt))return _e;C[I+_e]=vt}return _e}function D(C,A,I,j){return or(ii(A,C.length-I),C,I,j)}function T(C,A,I,j){return or(Un(A),C,I,j)}function N(C,A,I,j){return or(io(A),C,I,j)}function $(C,A,I,j){return or(ih(A,C.length-I),C,I,j)}a.prototype.write=function(C,A,I,j){if(A===void 0)j="utf8",I=this.length,A=0;else if(I===void 0&&typeof A=="string")j=A,I=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(I)?(I=I>>>0,j===void 0&&(j="utf8")):(j=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Y=this.length-A;if((I===void 0||I>Y)&&(I=Y),C.length>0&&(I<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let ae=!1;for(;;)switch(j){case"hex":return k(this,C,A,I);case"utf8":case"utf-8":return D(this,C,A,I);case"ascii":case"latin1":case"binary":return T(this,C,A,I);case"base64":return N(this,C,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,C,A,I);default:if(ae)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),ae=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(C,A,I){return A===0&&I===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(A,I))}function ee(C,A,I){I=Math.min(C.length,I);const j=[];let Y=A;for(;Y<I;){const ae=C[Y];let _e=null,vt=ae>239?4:ae>223?3:ae>191?2:1;if(Y+vt<=I){let di,Ot,Pt,fi;switch(vt){case 1:ae<128&&(_e=ae);break;case 2:di=C[Y+1],(di&192)===128&&(fi=(ae&31)<<6|di&63,fi>127&&(_e=fi));break;case 3:di=C[Y+1],Ot=C[Y+2],(di&192)===128&&(Ot&192)===128&&(fi=(ae&15)<<12|(di&63)<<6|Ot&63,fi>2047&&(fi<55296||fi>57343)&&(_e=fi));break;case 4:di=C[Y+1],Ot=C[Y+2],Pt=C[Y+3],(di&192)===128&&(Ot&192)===128&&(Pt&192)===128&&(fi=(ae&15)<<18|(di&63)<<12|(Ot&63)<<6|Pt&63,fi>65535&&fi<1114112&&(_e=fi))}}_e===null?(_e=65533,vt=1):_e>65535&&(_e-=65536,j.push(_e>>>10&1023|55296),_e=56320|_e&1023),j.push(_e),Y+=vt}return fe(j)}const he=4096;function fe(C){const A=C.length;if(A<=he)return String.fromCharCode.apply(String,C);let I="",j=0;for(;j<A;)I+=String.fromCharCode.apply(String,C.slice(j,j+=he));return I}function Ce(C,A,I){let j="";I=Math.min(C.length,I);for(let Y=A;Y<I;++Y)j+=String.fromCharCode(C[Y]&127);return j}function Se(C,A,I){let j="";I=Math.min(C.length,I);for(let Y=A;Y<I;++Y)j+=String.fromCharCode(C[Y]);return j}function me(C,A,I){const j=C.length;(!A||A<0)&&(A=0),(!I||I<0||I>j)&&(I=j);let Y="";for(let ae=A;ae<I;++ae)Y+=no[C[ae]];return Y}function kt(C,A,I){const j=C.slice(A,I);let Y="";for(let ae=0;ae<j.length-1;ae+=2)Y+=String.fromCharCode(j[ae]+j[ae+1]*256);return Y}a.prototype.slice=function(C,A){const I=this.length;C=~~C,A=A===void 0?I:~~A,C<0?(C+=I,C<0&&(C=0)):C>I&&(C=I),A<0?(A+=I,A<0&&(A=0)):A>I&&(A=I),A<C&&(A=C);const j=this.subarray(C,A);return Object.setPrototypeOf(j,a.prototype),j};function ze(C,A,I){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+A>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C],Y=1,ae=0;for(;++ae<A&&(Y*=256);)j+=this[C+ae]*Y;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C+--A],Y=1;for(;A>0&&(Y*=256);)j+=this[C+--A]*Y;return j},a.prototype.readUint8=a.prototype.readUInt8=function(C,A){return C=C>>>0,A||ze(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,A){return C=C>>>0,A||ze(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,A){return C=C>>>0,A||ze(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=_s(function(C){C=C>>>0,at(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,Y=this[++C]+this[++C]*2**8+this[++C]*2**16+I*2**24;return BigInt(j)+(BigInt(Y)<<BigInt(32))}),a.prototype.readBigUInt64BE=_s(function(C){C=C>>>0,at(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=A*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],Y=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+I;return(BigInt(j)<<BigInt(32))+BigInt(Y)}),a.prototype.readIntLE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=this[C],Y=1,ae=0;for(;++ae<A&&(Y*=256);)j+=this[C+ae]*Y;return Y*=128,j>=Y&&(j-=Math.pow(2,8*A)),j},a.prototype.readIntBE=function(C,A,I){C=C>>>0,A=A>>>0,I||ze(C,A,this.length);let j=A,Y=1,ae=this[C+--j];for(;j>0&&(Y*=256);)ae+=this[C+--j]*Y;return Y*=128,ae>=Y&&(ae-=Math.pow(2,8*A)),ae},a.prototype.readInt8=function(C,A){return C=C>>>0,A||ze(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,A){C=C>>>0,A||ze(C,2,this.length);const I=this[C]|this[C+1]<<8;return I&32768?I|4294901760:I},a.prototype.readInt16BE=function(C,A){C=C>>>0,A||ze(C,2,this.length);const I=this[C+1]|this[C]<<8;return I&32768?I|4294901760:I},a.prototype.readInt32LE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=_s(function(C){C=C>>>0,at(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(I<<24);return(BigInt(j)<<BigInt(32))+BigInt(A+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=_s(function(C){C=C>>>0,at(C,"offset");const A=this[C],I=this[C+7];(A===void 0||I===void 0)&&Me(C,this.length-8);const j=(A<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(j)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+I)}),a.prototype.readFloatLE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),t.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,A){return C=C>>>0,A||ze(C,4,this.length),t.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,A){return C=C>>>0,A||ze(C,8,this.length),t.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,A){return C=C>>>0,A||ze(C,8,this.length),t.read(this,C,!1,52,8)};function Ge(C,A,I,j,Y,ae){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>Y||A<ae)throw new RangeError('"value" argument is out of bounds');if(I+j>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,A,I,j){if(C=+C,A=A>>>0,I=I>>>0,!j){const _e=Math.pow(2,8*I)-1;Ge(this,C,A,I,_e,0)}let Y=1,ae=0;for(this[A]=C&255;++ae<I&&(Y*=256);)this[A+ae]=C/Y&255;return A+I},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,A,I,j){if(C=+C,A=A>>>0,I=I>>>0,!j){const _e=Math.pow(2,8*I)-1;Ge(this,C,A,I,_e,0)}let Y=I-1,ae=1;for(this[A+Y]=C&255;--Y>=0&&(ae*=256);)this[A+Y]=C/ae&255;return A+I},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,1,255,0),this[A]=C&255,A+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,65535,0),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,65535,0),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,4294967295,0),this[A+3]=C>>>24,this[A+2]=C>>>16,this[A+1]=C>>>8,this[A]=C&255,A+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,4294967295,0),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4};function Lt(C,A,I,j,Y){W(A,j,Y,C,I,7);let ae=Number(A&BigInt(4294967295));C[I++]=ae,ae=ae>>8,C[I++]=ae,ae=ae>>8,C[I++]=ae,ae=ae>>8,C[I++]=ae;let _e=Number(A>>BigInt(32)&BigInt(4294967295));return C[I++]=_e,_e=_e>>8,C[I++]=_e,_e=_e>>8,C[I++]=_e,_e=_e>>8,C[I++]=_e,I}function st(C,A,I,j,Y){W(A,j,Y,C,I,7);let ae=Number(A&BigInt(4294967295));C[I+7]=ae,ae=ae>>8,C[I+6]=ae,ae=ae>>8,C[I+5]=ae,ae=ae>>8,C[I+4]=ae;let _e=Number(A>>BigInt(32)&BigInt(4294967295));return C[I+3]=_e,_e=_e>>8,C[I+2]=_e,_e=_e>>8,C[I+1]=_e,_e=_e>>8,C[I]=_e,I+8}a.prototype.writeBigUInt64LE=_s(function(C,A=0){return Lt(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=_s(function(C,A=0){return st(this,C,A,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,A,I,j){if(C=+C,A=A>>>0,!j){const vt=Math.pow(2,8*I-1);Ge(this,C,A,I,vt-1,-vt)}let Y=0,ae=1,_e=0;for(this[A]=C&255;++Y<I&&(ae*=256);)C<0&&_e===0&&this[A+Y-1]!==0&&(_e=1),this[A+Y]=(C/ae>>0)-_e&255;return A+I},a.prototype.writeIntBE=function(C,A,I,j){if(C=+C,A=A>>>0,!j){const vt=Math.pow(2,8*I-1);Ge(this,C,A,I,vt-1,-vt)}let Y=I-1,ae=1,_e=0;for(this[A+Y]=C&255;--Y>=0&&(ae*=256);)C<0&&_e===0&&this[A+Y+1]!==0&&(_e=1),this[A+Y]=(C/ae>>0)-_e&255;return A+I},a.prototype.writeInt8=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,1,127,-128),C<0&&(C=255+C+1),this[A]=C&255,A+1},a.prototype.writeInt16LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,32767,-32768),this[A]=C&255,this[A+1]=C>>>8,A+2},a.prototype.writeInt16BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,2,32767,-32768),this[A]=C>>>8,this[A+1]=C&255,A+2},a.prototype.writeInt32LE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,2147483647,-2147483648),this[A]=C&255,this[A+1]=C>>>8,this[A+2]=C>>>16,this[A+3]=C>>>24,A+4},a.prototype.writeInt32BE=function(C,A,I){return C=+C,A=A>>>0,I||Ge(this,C,A,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[A]=C>>>24,this[A+1]=C>>>16,this[A+2]=C>>>8,this[A+3]=C&255,A+4},a.prototype.writeBigInt64LE=_s(function(C,A=0){return Lt(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=_s(function(C,A=0){return st(this,C,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Hi(C,A,I,j,Y,ae){if(I+j>C.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Cn(C,A,I,j,Y){return A=+A,I=I>>>0,Y||Hi(C,A,I,4),t.write(C,A,I,j,23,4),I+4}a.prototype.writeFloatLE=function(C,A,I){return Cn(this,C,A,!0,I)},a.prototype.writeFloatBE=function(C,A,I){return Cn(this,C,A,!1,I)};function Hn(C,A,I,j,Y){return A=+A,I=I>>>0,Y||Hi(C,A,I,8),t.write(C,A,I,j,52,8),I+8}a.prototype.writeDoubleLE=function(C,A,I){return Hn(this,C,A,!0,I)},a.prototype.writeDoubleBE=function(C,A,I){return Hn(this,C,A,!1,I)},a.prototype.copy=function(C,A,I,j){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(I||(I=0),!j&&j!==0&&(j=this.length),A>=C.length&&(A=C.length),A||(A=0),j>0&&j<I&&(j=I),j===I||C.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),C.length-A<j-I&&(j=C.length-A+I);const Y=j-I;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,I,j):Uint8Array.prototype.set.call(C,this.subarray(I,j),A),Y},a.prototype.fill=function(C,A,I,j){if(typeof C=="string"){if(typeof A=="string"?(j=A,A=0,I=this.length):typeof I=="string"&&(j=I,I=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(C.length===1){const ae=C.charCodeAt(0);(j==="utf8"&&ae<128||j==="latin1")&&(C=ae)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(A<0||this.length<A||this.length<I)throw new RangeError("Out of range index");if(I<=A)return this;A=A>>>0,I=I===void 0?this.length:I>>>0,C||(C=0);let Y;if(typeof C=="number")for(Y=A;Y<I;++Y)this[Y]=C;else{const ae=a.isBuffer(C)?C:a.from(C,j),_e=ae.length;if(_e===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(Y=0;Y<I-A;++Y)this[Y+A]=ae[Y%_e]}return this};const Ti={};function J(C,A,I){Ti[C]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(C,A){return`The "${C}" argument must be of type number. Received type ${typeof A}`},TypeError),J("ERR_OUT_OF_RANGE",function(C,A,I){let j=`The value of "${C}" is out of range.`,Y=I;return Number.isInteger(I)&&Math.abs(I)>2**32?Y=ye(String(I)):typeof I=="bigint"&&(Y=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(Y=ye(Y)),Y+="n"),j+=` It must be ${A}. Received ${Y}`,j},RangeError);function ye(C){let A="",I=C.length;const j=C[0]==="-"?1:0;for(;I>=j+4;I-=3)A=`_${C.slice(I-3,I)}${A}`;return`${C.slice(0,I)}${A}`}function ce(C,A,I){at(A,"offset"),(C[A]===void 0||C[A+I]===void 0)&&Me(A,C.length-(I+1))}function W(C,A,I,j,Y,ae){if(C>I||C<A){const _e=typeof A=="bigint"?"n":"";let vt;throw ae>3?A===0||A===BigInt(0)?vt=`>= 0${_e} and < 2${_e} ** ${(ae+1)*8}${_e}`:vt=`>= -(2${_e} ** ${(ae+1)*8-1}${_e}) and < 2 ** ${(ae+1)*8-1}${_e}`:vt=`>= ${A}${_e} and <= ${I}${_e}`,new Ti.ERR_OUT_OF_RANGE("value",vt,C)}ce(j,Y,ae)}function at(C,A){if(typeof C!="number")throw new Ti.ERR_INVALID_ARG_TYPE(A,"number",C)}function Me(C,A,I){throw Math.floor(C)!==C?(at(C,I),new Ti.ERR_OUT_OF_RANGE(I||"offset","an integer",C)):A<0?new Ti.ERR_BUFFER_OUT_OF_BOUNDS:new Ti.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${A}`,C)}const yt=/[^+/0-9A-Za-z-_]/g;function mt(C){if(C=C.split("=")[0],C=C.trim().replace(yt,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function ii(C,A){A=A||1/0;let I;const j=C.length;let Y=null;const ae=[];for(let _e=0;_e<j;++_e){if(I=C.charCodeAt(_e),I>55295&&I<57344){if(!Y){if(I>56319){(A-=3)>-1&&ae.push(239,191,189);continue}else if(_e+1===j){(A-=3)>-1&&ae.push(239,191,189);continue}Y=I;continue}if(I<56320){(A-=3)>-1&&ae.push(239,191,189),Y=I;continue}I=(Y-55296<<10|I-56320)+65536}else Y&&(A-=3)>-1&&ae.push(239,191,189);if(Y=null,I<128){if((A-=1)<0)break;ae.push(I)}else if(I<2048){if((A-=2)<0)break;ae.push(I>>6|192,I&63|128)}else if(I<65536){if((A-=3)<0)break;ae.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((A-=4)<0)break;ae.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ae}function Un(C){const A=[];for(let I=0;I<C.length;++I)A.push(C.charCodeAt(I)&255);return A}function ih(C,A){let I,j,Y;const ae=[];for(let _e=0;_e<C.length&&!((A-=2)<0);++_e)I=C.charCodeAt(_e),j=I>>8,Y=I%256,ae.push(Y),ae.push(j);return ae}function io(C){return e.toByteArray(mt(C))}function or(C,A,I,j){let Y;for(Y=0;Y<j&&!(Y+I>=A.length||Y>=C.length);++Y)A[Y+I]=C[Y];return Y}function nn(C,A){return C instanceof A||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===A.name}function Ws(C){return C!==C}const no=function(){const C="0123456789abcdef",A=new Array(256);for(let I=0;I<16;++I){const j=I*16;for(let Y=0;Y<16;++Y)A[j+Y]=C[I]+C[Y]}return A}();function _s(C){return typeof BigInt>"u"?Va:C}function Va(){throw new Error("BigInt not supported")}})(zr);const zh={},dA=typeof window<"u"?window:typeof self<"u"?self:{fetch:void 0};class Tc{async getBufferFromResponse(e){if(typeof e.buffer=="function")return e.buffer();if(typeof e.arrayBuffer=="function"){const t=await e.arrayBuffer();return zr.Buffer.from(t)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(e,t={}){this.baseOverrides={},this.url=e;const n=t.fetch||dA.fetch&&dA.fetch.bind(dA);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=n}async fetch(e,t){let n;try{n=await this.fetchImplementation(e,t)}catch(s){if(`${s}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(e,{...t,cache:"reload"});else throw s}return n}async read(e,t=0,n,s=0,r={}){const{headers:o={},signal:a,overrides:l={}}=r;n<1/0?o.range=`bytes=${s}-${s+n}`:n===1/0&&s!==0&&(o.range=`bytes=${s}-`);const c={...this.baseOverrides,...l,headers:{...o,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:a},h=await this.fetch(this.url,c);if(!h.ok)throw new Error(`HTTP ${h.status} ${h.statusText} ${this.url}`);if(h.status===200&&s===0||h.status===206){const u=await this.getBufferFromResponse(h),d=u.copy(e,t,0,Math.min(n,u.length)),f=h.headers.get("content-range"),g=/\/(\d+)$/.exec(f||"");return g&&g[1]&&(this._stat={size:parseInt(g[1],10)}),{bytesRead:d,buffer:e}}throw h.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${h.status} fetching ${this.url}`)}async readFile(e={}){let t,n;typeof e=="string"?(t=e,n={}):(t=e.encoding,n=e,delete n.encoding);const{headers:s={},signal:r,overrides:o={}}=n,a={headers:s,method:"GET",redirect:"follow",mode:"cors",signal:r,...this.baseOverrides,...o},l=await this.fetch(this.url,a);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(t==="utf8")return l.text();if(t)throw new Error(`unsupported encoding: ${t}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){const e=zr.Buffer.allocUnsafe(10);if(await this.read(e,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}var eh={};(function(i){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(r,o){return Object.prototype.hasOwnProperty.call(r,o)}i.assign=function(r){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)t(a,l)&&(r[l]=a[l])}}return r},i.shrinkBuf=function(r,o){return r.length===o?r:r.subarray?r.subarray(0,o):(r.length=o,r)};var n={arraySet:function(r,o,a,l,c){if(o.subarray&&r.subarray){r.set(o.subarray(a,a+l),c);return}for(var h=0;h<l;h++)r[c+h]=o[a+h]},flattenChunks:function(r){var o,a,l,c,h,u;for(l=0,o=0,a=r.length;o<a;o++)l+=r[o].length;for(u=new Uint8Array(l),c=0,o=0,a=r.length;o<a;o++)h=r[o],u.set(h,c),c+=h.length;return u}},s={arraySet:function(r,o,a,l,c){for(var h=0;h<l;h++)r[c+h]=o[a+h]},flattenChunks:function(r){return[].concat.apply([],r)}};i.setTyped=function(r){r?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(e)})(eh);var Cw={},Hl={},C0={},_0e=eh,b0e=4,f8=0,g8=1,v0e=2;function S0(i){for(var e=i.length;--e>=0;)i[e]=0}var w0e=0,OG=1,y0e=2,C0e=3,S0e=258,FO=29,Sw=256,Lv=Sw+1+FO,Fp=30,BO=19,PG=2*Lv+1,Td=15,fA=16,x0e=7,VO=256,FG=16,BG=17,VG=18,eN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],UC=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],WG=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k0e=512,gc=new Array((Lv+2)*2);S0(gc);var ub=new Array(Fp*2);S0(ub);var Av=new Array(k0e);S0(Av);var Ev=new Array(S0e-C0e+1);S0(Ev);var WO=new Array(FO);S0(WO);var px=new Array(Fp);S0(px);function gA(i,e,t,n,s){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=i&&i.length}var zG,HG,UG;function pA(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}function $G(i){return i<256?Av[i]:Av[256+(i>>>7)]}function Iv(i,e){i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255}function _r(i,e,t){i.bi_valid>fA-t?(i.bi_buf|=e<<i.bi_valid&65535,Iv(i,i.bi_buf),i.bi_buf=e>>fA-i.bi_valid,i.bi_valid+=t-fA):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)}function al(i,e,t){_r(i,t[e*2],t[e*2+1])}function jG(i,e){var t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1}function L0e(i){i.bi_valid===16?(Iv(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)}function A0e(i,e){var t=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,h,u,d,f,g,p=0;for(d=0;d<=Td;d++)i.bl_count[d]=0;for(t[i.heap[i.heap_max]*2+1]=0,c=i.heap_max+1;c<PG;c++)h=i.heap[c],d=t[t[h*2+1]*2+1]+1,d>l&&(d=l,p++),t[h*2+1]=d,!(h>n)&&(i.bl_count[d]++,f=0,h>=a&&(f=o[h-a]),g=t[h*2],i.opt_len+=g*(d+f),r&&(i.static_len+=g*(s[h*2+1]+f)));if(p!==0){do{for(d=l-1;i.bl_count[d]===0;)d--;i.bl_count[d]--,i.bl_count[d+1]+=2,i.bl_count[l]--,p-=2}while(p>0);for(d=l;d!==0;d--)for(h=i.bl_count[d];h!==0;)u=i.heap[--c],!(u>n)&&(t[u*2+1]!==d&&(i.opt_len+=(d-t[u*2+1])*t[u*2],t[u*2+1]=d),h--)}}function qG(i,e,t){var n=new Array(Td+1),s=0,r,o;for(r=1;r<=Td;r++)n[r]=s=s+t[r-1]<<1;for(o=0;o<=e;o++){var a=i[o*2+1];a!==0&&(i[o*2]=jG(n[a]++,a))}}function E0e(){var i,e,t,n,s,r=new Array(Td+1);for(t=0,n=0;n<FO-1;n++)for(WO[n]=t,i=0;i<1<<eN[n];i++)Ev[t++]=n;for(Ev[t-1]=n,s=0,n=0;n<16;n++)for(px[n]=s,i=0;i<1<<UC[n];i++)Av[s++]=n;for(s>>=7;n<Fp;n++)for(px[n]=s<<7,i=0;i<1<<UC[n]-7;i++)Av[256+s++]=n;for(e=0;e<=Td;e++)r[e]=0;for(i=0;i<=143;)gc[i*2+1]=8,i++,r[8]++;for(;i<=255;)gc[i*2+1]=9,i++,r[9]++;for(;i<=279;)gc[i*2+1]=7,i++,r[7]++;for(;i<=287;)gc[i*2+1]=8,i++,r[8]++;for(qG(gc,Lv+1,r),i=0;i<Fp;i++)ub[i*2+1]=5,ub[i*2]=jG(i,5);zG=new gA(gc,eN,Sw+1,Lv,Td),HG=new gA(ub,UC,0,Fp,Td),UG=new gA(new Array(0),D0e,0,BO,x0e)}function GG(i){var e;for(e=0;e<Lv;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Fp;e++)i.dyn_dtree[e*2]=0;for(e=0;e<BO;e++)i.bl_tree[e*2]=0;i.dyn_ltree[VO*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function KG(i){i.bi_valid>8?Iv(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function I0e(i,e,t,n){KG(i),n&&(Iv(i,t),Iv(i,~t)),_0e.arraySet(i.pending_buf,i.window,e,t,i.pending),i.pending+=t}function p8(i,e,t,n){var s=e*2,r=t*2;return i[s]<i[r]||i[s]===i[r]&&n[e]<=n[t]}function mA(i,e,t){for(var n=i.heap[t],s=t<<1;s<=i.heap_len&&(s<i.heap_len&&p8(e,i.heap[s+1],i.heap[s],i.depth)&&s++,!p8(e,n,i.heap[s],i.depth));)i.heap[t]=i.heap[s],t=s,s<<=1;i.heap[t]=n}function m8(i,e,t){var n,s,r=0,o,a;if(i.last_lit!==0)do n=i.pending_buf[i.d_buf+r*2]<<8|i.pending_buf[i.d_buf+r*2+1],s=i.pending_buf[i.l_buf+r],r++,n===0?al(i,s,e):(o=Ev[s],al(i,o+Sw+1,e),a=eN[o],a!==0&&(s-=WO[o],_r(i,s,a)),n--,o=$G(n),al(i,o,t),a=UC[o],a!==0&&(n-=px[o],_r(i,n,a)));while(r<i.last_lit);al(i,VO,e)}function tN(i,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems,o,a,l=-1,c;for(i.heap_len=0,i.heap_max=PG,o=0;o<r;o++)t[o*2]!==0?(i.heap[++i.heap_len]=l=o,i.depth[o]=0):t[o*2+1]=0;for(;i.heap_len<2;)c=i.heap[++i.heap_len]=l<2?++l:0,t[c*2]=1,i.depth[c]=0,i.opt_len--,s&&(i.static_len-=n[c*2+1]);for(e.max_code=l,o=i.heap_len>>1;o>=1;o--)mA(i,t,o);c=r;do o=i.heap[1],i.heap[1]=i.heap[i.heap_len--],mA(i,t,1),a=i.heap[1],i.heap[--i.heap_max]=o,i.heap[--i.heap_max]=a,t[c*2]=t[o*2]+t[a*2],i.depth[c]=(i.depth[o]>=i.depth[a]?i.depth[o]:i.depth[a])+1,t[o*2+1]=t[a*2+1]=c,i.heap[1]=c++,mA(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],A0e(i,e),qG(t,l,i.bl_count)}function _8(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)&&(a<c?i.bl_tree[r*2]+=a:r!==0?(r!==s&&i.bl_tree[r*2]++,i.bl_tree[FG*2]++):a<=10?i.bl_tree[BG*2]++:i.bl_tree[VG*2]++,a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))}function b8(i,e,t){var n,s=-1,r,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),n=0;n<=t;n++)if(r=o,o=e[(n+1)*2+1],!(++a<l&&r===o)){if(a<c)do al(i,r,i.bl_tree);while(--a!==0);else r!==0?(r!==s&&(al(i,r,i.bl_tree),a--),al(i,FG,i.bl_tree),_r(i,a-3,2)):a<=10?(al(i,BG,i.bl_tree),_r(i,a-3,3)):(al(i,VG,i.bl_tree),_r(i,a-11,7));a=0,s=r,o===0?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}}function T0e(i){var e;for(_8(i,i.dyn_ltree,i.l_desc.max_code),_8(i,i.dyn_dtree,i.d_desc.max_code),tN(i,i.bl_desc),e=BO-1;e>=3&&i.bl_tree[WG[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e}function N0e(i,e,t,n){var s;for(_r(i,e-257,5),_r(i,t-1,5),_r(i,n-4,4),s=0;s<n;s++)_r(i,i.bl_tree[WG[s]*2+1],3);b8(i,i.dyn_ltree,e-1),b8(i,i.dyn_dtree,t-1)}function M0e(i){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return f8;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return g8;for(t=32;t<Sw;t++)if(i.dyn_ltree[t*2]!==0)return g8;return f8}var v8=!1;function R0e(i){v8||(E0e(),v8=!0),i.l_desc=new pA(i.dyn_ltree,zG),i.d_desc=new pA(i.dyn_dtree,HG),i.bl_desc=new pA(i.bl_tree,UG),i.bi_buf=0,i.bi_valid=0,GG(i)}function ZG(i,e,t,n){_r(i,(w0e<<1)+(n?1:0),3),I0e(i,e,t,!0)}function O0e(i){_r(i,OG<<1,3),al(i,VO,gc),L0e(i)}function P0e(i,e,t,n){var s,r,o=0;i.level>0?(i.strm.data_type===v0e&&(i.strm.data_type=M0e(i)),tN(i,i.l_desc),tN(i,i.d_desc),o=T0e(i),s=i.opt_len+3+7>>>3,r=i.static_len+3+7>>>3,r<=s&&(s=r)):s=r=t+5,t+4<=s&&e!==-1?ZG(i,e,t,n):i.strategy===b0e||r===s?(_r(i,(OG<<1)+(n?1:0),3),m8(i,gc,ub)):(_r(i,(y0e<<1)+(n?1:0),3),N0e(i,i.l_desc.max_code+1,i.d_desc.max_code+1,o+1),m8(i,i.dyn_ltree,i.dyn_dtree)),GG(i),n&&KG(i)}function F0e(i,e,t){return i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=t&255,i.last_lit++,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(Ev[t]+Sw+1)*2]++,i.dyn_dtree[$G(e)*2]++),i.last_lit===i.lit_bufsize-1}C0._tr_init=R0e;C0._tr_stored_block=ZG;C0._tr_flush_block=P0e;C0._tr_tally=F0e;C0._tr_align=O0e;function B0e(i,e,t,n){for(var s=i&65535|0,r=i>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0}var YG=B0e;function V0e(){for(var i,e=[],t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e}var W0e=V0e();function z0e(i,e,t,n){var s=W0e,r=n+t;i^=-1;for(var o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1}var QG=z0e,zO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gs=eh,No=C0,XG=YG,bh=QG,H0e=zO,tg=0,U0e=1,$0e=3,Yh=4,w8=5,ll=0,y8=1,Cl=-2,j0e=-3,_A=-5,q0e=-1,G0e=1,my=2,K0e=3,Z0e=4,Y0e=0,Q0e=2,Qk=8,X0e=9,J0e=15,e_e=8,t_e=29,i_e=256,iN=i_e+1+t_e,n_e=30,s_e=19,r_e=2*iN+1,o_e=15,Mt=3,Hh=258,ca=Hh+Mt+1,a_e=32,Xk=42,nN=69,$C=73,jC=91,qC=103,Nd=113,B_=666,cs=1,xw=2,yf=3,x0=4,l_e=3;function Uh(i,e){return i.msg=H0e[e],e}function C8(i){return(i<<1)-(i>4?9:0)}function Nh(i){for(var e=i.length;--e>=0;)i[e]=0}function vh(i){var e=i.state,t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(Gs.arraySet(i.output,e.pending_buf,e.pending_out,t,i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function hs(i,e){No._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,vh(i.strm)}function Gt(i,e){i.pending_buf[i.pending++]=e}function a_(i,e){i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255}function c_e(i,e,t,n){var s=i.avail_in;return s>n&&(s=n),s===0?0:(i.avail_in-=s,Gs.arraySet(e,i.input,i.next_in,s,t),i.state.wrap===1?i.adler=XG(i.adler,e,s,t):i.state.wrap===2&&(i.adler=bh(i.adler,e,s,t)),i.next_in+=s,i.total_in+=s,s)}function JG(i,e){var t=i.max_chain_length,n=i.strstart,s,r,o=i.prev_length,a=i.nice_match,l=i.strstart>i.w_size-ca?i.strstart-(i.w_size-ca):0,c=i.window,h=i.w_mask,u=i.prev,d=i.strstart+Hh,f=c[n+o-1],g=c[n+o];i.prev_length>=i.good_match&&(t>>=2),a>i.lookahead&&(a=i.lookahead);do if(s=e,!(c[s+o]!==g||c[s+o-1]!==f||c[s]!==c[n]||c[++s]!==c[n+1])){n+=2,s++;do;while(c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&c[++n]===c[++s]&&n<d);if(r=Hh-(d-n),n=d-Hh,r>o){if(i.match_start=e,o=r,r>=a)break;f=c[n+o-1],g=c[n+o]}}while((e=u[e&h])>l&&--t!==0);return o<=i.lookahead?o:i.lookahead}function Cf(i){var e=i.w_size,t,n,s,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-ca)){Gs.arraySet(i.window,i.window,e,e,0),i.match_start-=e,i.strstart-=e,i.block_start-=e,n=i.hash_size,t=n;do s=i.head[--t],i.head[t]=s>=e?s-e:0;while(--n);n=e,t=n;do s=i.prev[--t],i.prev[t]=s>=e?s-e:0;while(--n);r+=e}if(i.strm.avail_in===0)break;if(n=c_e(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=n,i.lookahead+i.insert>=Mt)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[o+Mt-1])&i.hash_mask,i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<Mt)););}while(i.lookahead<ca&&i.strm.avail_in!==0)}function h_e(i,e){var t=65535;for(t>i.pending_buf_size-5&&(t=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Cf(i),i.lookahead===0&&e===tg)return cs;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var n=i.block_start+t;if((i.strstart===0||i.strstart>=n)&&(i.lookahead=i.strstart-n,i.strstart=n,hs(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-ca&&(hs(i,!1),i.strm.avail_out===0))return cs}return i.insert=0,e===Yh?(hs(i,!0),i.strm.avail_out===0?yf:x0):(i.strstart>i.block_start&&(hs(i,!1),i.strm.avail_out),cs)}function bA(i,e){for(var t,n;;){if(i.lookahead<ca){if(Cf(i),i.lookahead<ca&&e===tg)return cs;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-ca&&(i.match_length=JG(i,t)),i.match_length>=Mt)if(n=No._tr_tally(i,i.strstart-i.match_start,i.match_length-Mt),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Mt){i.match_length--;do i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else n=No._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(hs(i,!1),i.strm.avail_out===0))return cs}return i.insert=i.strstart<Mt-1?i.strstart:Mt-1,e===Yh?(hs(i,!0),i.strm.avail_out===0?yf:x0):i.last_lit&&(hs(i,!1),i.strm.avail_out===0)?cs:xw}function Bg(i,e){for(var t,n,s;;){if(i.lookahead<ca){if(Cf(i),i.lookahead<ca&&e===tg)return cs;if(i.lookahead===0)break}if(t=0,i.lookahead>=Mt&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Mt-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-ca&&(i.match_length=JG(i,t),i.match_length<=5&&(i.strategy===G0e||i.match_length===Mt&&i.strstart-i.match_start>4096)&&(i.match_length=Mt-1)),i.prev_length>=Mt&&i.match_length<=i.prev_length){s=i.strstart+i.lookahead-Mt,n=No._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-Mt),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=s&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+Mt-1])&i.hash_mask,t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Mt-1,i.strstart++,n&&(hs(i,!1),i.strm.avail_out===0))return cs}else if(i.match_available){if(n=No._tr_tally(i,0,i.window[i.strstart-1]),n&&hs(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return cs}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=No._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Mt-1?i.strstart:Mt-1,e===Yh?(hs(i,!0),i.strm.avail_out===0?yf:x0):i.last_lit&&(hs(i,!1),i.strm.avail_out===0)?cs:xw}function u_e(i,e){for(var t,n,s,r,o=i.window;;){if(i.lookahead<=Hh){if(Cf(i),i.lookahead<=Hh&&e===tg)return cs;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Mt&&i.strstart>0&&(s=i.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){r=i.strstart+Hh;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<r);i.match_length=Hh-(r-s),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Mt?(t=No._tr_tally(i,1,i.match_length-Mt),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=No._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(hs(i,!1),i.strm.avail_out===0))return cs}return i.insert=0,e===Yh?(hs(i,!0),i.strm.avail_out===0?yf:x0):i.last_lit&&(hs(i,!1),i.strm.avail_out===0)?cs:xw}function d_e(i,e){for(var t;;){if(i.lookahead===0&&(Cf(i),i.lookahead===0)){if(e===tg)return cs;break}if(i.match_length=0,t=No._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(hs(i,!1),i.strm.avail_out===0))return cs}return i.insert=0,e===Yh?(hs(i,!0),i.strm.avail_out===0?yf:x0):i.last_lit&&(hs(i,!1),i.strm.avail_out===0)?cs:xw}function Ua(i,e,t,n,s){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=s}var mp;mp=[new Ua(0,0,0,0,h_e),new Ua(4,4,8,4,bA),new Ua(4,5,16,8,bA),new Ua(4,6,32,32,bA),new Ua(4,4,16,16,Bg),new Ua(8,16,32,32,Bg),new Ua(8,16,128,128,Bg),new Ua(8,32,128,256,Bg),new Ua(32,128,258,1024,Bg),new Ua(32,258,258,4096,Bg)];function f_e(i){i.window_size=2*i.w_size,Nh(i.head),i.max_lazy_match=mp[i.level].max_lazy,i.good_match=mp[i.level].good_length,i.nice_match=mp[i.level].nice_length,i.max_chain_length=mp[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Mt-1,i.match_available=0,i.ins_h=0}function g_e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Qk,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Gs.Buf16(r_e*2),this.dyn_dtree=new Gs.Buf16((2*n_e+1)*2),this.bl_tree=new Gs.Buf16((2*s_e+1)*2),Nh(this.dyn_ltree),Nh(this.dyn_dtree),Nh(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Gs.Buf16(o_e+1),this.heap=new Gs.Buf16(2*iN+1),Nh(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Gs.Buf16(2*iN+1),Nh(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function eK(i){var e;return!i||!i.state?Uh(i,Cl):(i.total_in=i.total_out=0,i.data_type=Q0e,e=i.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Xk:Nd,i.adler=e.wrap===2?0:1,e.last_flush=tg,No._tr_init(e),ll)}function tK(i){var e=eK(i);return e===ll&&f_e(i.state),e}function p_e(i,e){return!i||!i.state||i.state.wrap!==2?Cl:(i.state.gzhead=e,ll)}function iK(i,e,t,n,s,r){if(!i)return Cl;var o=1;if(e===q0e&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>X0e||t!==Qk||n<8||n>15||e<0||e>9||r<0||r>Z0e)return Uh(i,Cl);n===8&&(n=9);var a=new g_e;return i.state=a,a.strm=i,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Mt-1)/Mt),a.window=new Gs.Buf8(a.w_size*2),a.head=new Gs.Buf16(a.hash_size),a.prev=new Gs.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Gs.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=r,a.method=t,tK(i)}function m_e(i,e){return iK(i,e,Qk,J0e,e_e,Y0e)}function __e(i,e){var t,n,s,r;if(!i||!i.state||e>w8||e<0)return i?Uh(i,Cl):Cl;if(n=i.state,!i.output||!i.input&&i.avail_in!==0||n.status===B_&&e!==Yh)return Uh(i,i.avail_out===0?_A:Cl);if(n.strm=i,t=n.last_flush,n.last_flush=e,n.status===Xk)if(n.wrap===2)i.adler=0,Gt(n,31),Gt(n,139),Gt(n,8),n.gzhead?(Gt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Gt(n,n.gzhead.time&255),Gt(n,n.gzhead.time>>8&255),Gt(n,n.gzhead.time>>16&255),Gt(n,n.gzhead.time>>24&255),Gt(n,n.level===9?2:n.strategy>=my||n.level<2?4:0),Gt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Gt(n,n.gzhead.extra.length&255),Gt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(i.adler=bh(i.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=nN):(Gt(n,0),Gt(n,0),Gt(n,0),Gt(n,0),Gt(n,0),Gt(n,n.level===9?2:n.strategy>=my||n.level<2?4:0),Gt(n,l_e),n.status=Nd);else{var o=Qk+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=my||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=a_e),o+=31-o%31,n.status=Nd,a_(n,o),n.strstart!==0&&(a_(n,i.adler>>>16),a_(n,i.adler&65535)),i.adler=1}if(n.status===nN)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),vh(i),s=n.pending,n.pending===n.pending_buf_size));)Gt(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=$C)}else n.status=$C;if(n.status===$C)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),vh(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.name.length?r=n.gzhead.name.charCodeAt(n.gzindex++)&255:r=0,Gt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.gzindex=0,n.status=jC)}else n.status=jC;if(n.status===jC)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),vh(i),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}n.gzindex<n.gzhead.comment.length?r=n.gzhead.comment.charCodeAt(n.gzindex++)&255:r=0,Gt(n,r)}while(r!==0);n.gzhead.hcrc&&n.pending>s&&(i.adler=bh(i.adler,n.pending_buf,n.pending-s,s)),r===0&&(n.status=qC)}else n.status=qC;if(n.status===qC&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&vh(i),n.pending+2<=n.pending_buf_size&&(Gt(n,i.adler&255),Gt(n,i.adler>>8&255),i.adler=0,n.status=Nd)):n.status=Nd),n.pending!==0){if(vh(i),i.avail_out===0)return n.last_flush=-1,ll}else if(i.avail_in===0&&C8(e)<=C8(t)&&e!==Yh)return Uh(i,_A);if(n.status===B_&&i.avail_in!==0)return Uh(i,_A);if(i.avail_in!==0||n.lookahead!==0||e!==tg&&n.status!==B_){var l=n.strategy===my?d_e(n,e):n.strategy===K0e?u_e(n,e):mp[n.level].func(n,e);if((l===yf||l===x0)&&(n.status=B_),l===cs||l===yf)return i.avail_out===0&&(n.last_flush=-1),ll;if(l===xw&&(e===U0e?No._tr_align(n):e!==w8&&(No._tr_stored_block(n,0,0,!1),e===$0e&&(Nh(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),vh(i),i.avail_out===0))return n.last_flush=-1,ll}return e!==Yh?ll:n.wrap<=0?y8:(n.wrap===2?(Gt(n,i.adler&255),Gt(n,i.adler>>8&255),Gt(n,i.adler>>16&255),Gt(n,i.adler>>24&255),Gt(n,i.total_in&255),Gt(n,i.total_in>>8&255),Gt(n,i.total_in>>16&255),Gt(n,i.total_in>>24&255)):(a_(n,i.adler>>>16),a_(n,i.adler&65535)),vh(i),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ll:y8)}function b_e(i){var e;return!i||!i.state?Cl:(e=i.state.status,e!==Xk&&e!==nN&&e!==$C&&e!==jC&&e!==qC&&e!==Nd&&e!==B_?Uh(i,Cl):(i.state=null,e===Nd?Uh(i,j0e):ll))}function v_e(i,e){var t=e.length,n,s,r,o,a,l,c,h;if(!i||!i.state||(n=i.state,o=n.wrap,o===2||o===1&&n.status!==Xk||n.lookahead))return Cl;for(o===1&&(i.adler=XG(i.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(o===0&&(Nh(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new Gs.Buf8(n.w_size),Gs.arraySet(h,e,t-n.w_size,n.w_size,0),e=h,t=n.w_size),a=i.avail_in,l=i.next_in,c=i.input,i.avail_in=t,i.next_in=0,i.input=e,Cf(n);n.lookahead>=Mt;){s=n.strstart,r=n.lookahead-(Mt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+Mt-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++;while(--r);n.strstart=s,n.lookahead=Mt-1,Cf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Mt-1,n.match_available=0,i.next_in=l,i.input=c,i.avail_in=a,n.wrap=o,ll}Hl.deflateInit=m_e;Hl.deflateInit2=iK;Hl.deflateReset=tK;Hl.deflateResetKeep=eK;Hl.deflateSetHeader=p_e;Hl.deflate=__e;Hl.deflateEnd=b_e;Hl.deflateSetDictionary=v_e;Hl.deflateInfo="pako deflate (from Nodeca project)";var ig={},Jk=eh,nK=!0,sK=!0;try{String.fromCharCode.apply(null,[0])}catch{nK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sK=!1}var Tv=new Jk.Buf8(256);for(var lh=0;lh<256;lh++)Tv[lh]=lh>=252?6:lh>=248?5:lh>=240?4:lh>=224?3:lh>=192?2:1;Tv[254]=Tv[254]=1;ig.string2buf=function(i){var e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Jk.Buf8(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};function rK(i,e){if(e<65534&&(i.subarray&&sK||!i.subarray&&nK))return String.fromCharCode.apply(null,Jk.shrinkBuf(i,e));for(var t="",n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t}ig.buf2binstring=function(i){return rK(i,i.length)};ig.binstring2buf=function(i){for(var e=new Jk.Buf8(i.length),t=0,n=e.length;t<n;t++)e[t]=i.charCodeAt(t);return e};ig.buf2string=function(i,e){var t,n,s,r,o=e||i.length,a=new Array(o*2);for(n=0,t=0;t<o;){if(s=i[t++],s<128){a[n++]=s;continue}if(r=Tv[s],r>4){a[n++]=65533,t+=r-1;continue}for(s&=r===2?31:r===3?15:7;r>1&&t<o;)s=s<<6|i[t++]&63,r--;if(r>1){a[n++]=65533;continue}s<65536?a[n++]=s:(s-=65536,a[n++]=55296|s>>10&1023,a[n++]=56320|s&1023)}return rK(a,n)};ig.utf8border=function(i,e){var t;for(e=e||i.length,e>i.length&&(e=i.length),t=e-1;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+Tv[i[t]]>e?t:e};function w_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var oK=w_e,db=Hl,fb=eh,sN=ig,rN=zO,y_e=oK,aK=Object.prototype.toString,C_e=0,vA=4,Bp=0,S8=1,x8=2,S_e=-1,x_e=0,D_e=8;function Sf(i){if(!(this instanceof Sf))return new Sf(i);this.options=fb.assign({level:S_e,method:D_e,chunkSize:16384,windowBits:15,memLevel:8,strategy:x_e,to:""},i||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y_e,this.strm.avail_out=0;var t=db.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Bp)throw new Error(rN[t]);if(e.header&&db.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=sN.string2buf(e.dictionary):aK.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=db.deflateSetDictionary(this.strm,n),t!==Bp)throw new Error(rN[t]);this._dict_set=!0}}Sf.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s,r;if(this.ended)return!1;r=e===~~e?e:e===!0?vA:C_e,typeof i=="string"?t.input=sN.string2buf(i):aK.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new fb.Buf8(n),t.next_out=0,t.avail_out=n),s=db.deflate(t,r),s!==S8&&s!==Bp)return this.onEnd(s),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(r===vA||r===x8))&&(this.options.to==="string"?this.onData(sN.buf2binstring(fb.shrinkBuf(t.output,t.next_out))):this.onData(fb.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&s!==S8);return r===vA?(s=db.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Bp):(r===x8&&(this.onEnd(Bp),t.avail_out=0),!0)};Sf.prototype.onData=function(i){this.chunks.push(i)};Sf.prototype.onEnd=function(i){i===Bp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function HO(i,e){var t=new Sf(e);if(t.push(i,!0),t.err)throw t.msg||rN[t.err];return t.result}function k_e(i,e){return e=e||{},e.raw=!0,HO(i,e)}function L_e(i,e){return e=e||{},e.gzip=!0,HO(i,e)}Cw.Deflate=Sf;Cw.deflate=HO;Cw.deflateRaw=k_e;Cw.gzip=L_e;var Dw={},Ta={},_y=30,A_e=12,E_e=function(i,e){var t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w,y,x,L,S,k,D,T;t=i.state,n=i.next_in,D=i.input,s=n+(i.avail_in-5),r=i.next_out,T=i.output,o=r-(e-i.avail_out),a=r+(i.avail_out-257),l=t.dmax,c=t.wsize,h=t.whave,u=t.wnext,d=t.window,f=t.hold,g=t.bits,p=t.lencode,m=t.distcode,v=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=p[f&v];t:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y===0)T[r++]=w&65535;else if(y&16){x=w&65535,y&=15,y&&(g<y&&(f+=D[n++]<<g,g+=8),x+=f&(1<<y)-1,f>>>=y,g-=y),g<15&&(f+=D[n++]<<g,g+=8,f+=D[n++]<<g,g+=8),w=m[f&b];i:for(;;){if(y=w>>>24,f>>>=y,g-=y,y=w>>>16&255,y&16){if(L=w&65535,y&=15,g<y&&(f+=D[n++]<<g,g+=8,g<y&&(f+=D[n++]<<g,g+=8)),L+=f&(1<<y)-1,L>l){i.msg="invalid distance too far back",t.mode=_y;break e}if(f>>>=y,g-=y,y=r-o,L>y){if(y=L-y,y>h&&t.sane){i.msg="invalid distance too far back",t.mode=_y;break e}if(S=0,k=d,u===0){if(S+=c-y,y<x){x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}}else if(u<y){if(S+=c+u-y,y-=u,y<x){x-=y;do T[r++]=d[S++];while(--y);if(S=0,u<x){y=u,x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}}}else if(S+=u-y,y<x){x-=y;do T[r++]=d[S++];while(--y);S=r-L,k=T}for(;x>2;)T[r++]=k[S++],T[r++]=k[S++],T[r++]=k[S++],x-=3;x&&(T[r++]=k[S++],x>1&&(T[r++]=k[S++]))}else{S=r-L;do T[r++]=T[S++],T[r++]=T[S++],T[r++]=T[S++],x-=3;while(x>2);x&&(T[r++]=T[S++],x>1&&(T[r++]=T[S++]))}}else if(y&64){i.msg="invalid distance code",t.mode=_y;break e}else{w=m[(w&65535)+(f&(1<<y)-1)];continue i}break}}else if(y&64)if(y&32){t.mode=A_e;break e}else{i.msg="invalid literal/length code",t.mode=_y;break e}else{w=p[(w&65535)+(f&(1<<y)-1)];continue t}break}}while(n<s&&r<a);x=g>>3,n-=x,g-=x<<3,f&=(1<<g)-1,i.next_in=n,i.next_out=r,i.avail_in=n<s?5+(s-n):5-(n-s),i.avail_out=r<a?257+(a-r):257-(r-a),t.hold=f,t.bits=g},D8=eh,Vg=15,k8=852,L8=592,A8=0,wA=1,E8=2,I_e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T_e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N_e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],M_e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],R_e=function(i,e,t,n,s,r,o,a){var l=a.bits,c=0,h=0,u=0,d=0,f=0,g=0,p=0,m=0,v=0,b=0,w,y,x,L,S,k=null,D=0,T,N=new D8.Buf16(Vg+1),$=new D8.Buf16(Vg+1),U=null,ee=0,he,fe,Ce;for(c=0;c<=Vg;c++)N[c]=0;for(h=0;h<n;h++)N[e[t+h]]++;for(f=l,d=Vg;d>=1&&N[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&N[u]===0;u++);for(f<u&&(f=u),m=1,c=1;c<=Vg;c++)if(m<<=1,m-=N[c],m<0)return-1;if(m>0&&(i===A8||d!==1))return-1;for($[1]=0,c=1;c<Vg;c++)$[c+1]=$[c]+N[c];for(h=0;h<n;h++)e[t+h]!==0&&(o[$[e[t+h]]++]=h);if(i===A8?(k=U=o,T=19):i===wA?(k=I_e,D-=257,U=T_e,ee-=257,T=256):(k=N_e,U=M_e,T=-1),b=0,h=0,c=u,S=r,g=f,p=0,x=-1,v=1<<f,L=v-1,i===wA&&v>k8||i===E8&&v>L8)return 1;for(;;){he=c-p,o[h]<T?(fe=0,Ce=o[h]):o[h]>T?(fe=U[ee+o[h]],Ce=k[D+o[h]]):(fe=32+64,Ce=0),w=1<<c-p,y=1<<g,u=y;do y-=w,s[S+(b>>p)+y]=he<<24|fe<<16|Ce|0;while(y!==0);for(w=1<<c-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--N[c]===0){if(c===d)break;c=e[t+o[h]]}if(c>f&&(b&L)!==x){for(p===0&&(p=f),S+=u,g=c-p,m=1<<g;g+p<d&&(m-=N[g+p],!(m<=0));)g++,m<<=1;if(v+=1<<g,i===wA&&v>k8||i===E8&&v>L8)return 1;x=b&L,s[x]=f<<24|g<<16|S-r|0}}return b!==0&&(s[S+b]=c-p<<24|64<<16|0),a.bits=f,0},Hr=eh,oN=YG,$a=QG,O_e=E_e,gb=R_e,P_e=0,lK=1,cK=2,I8=4,F_e=5,by=6,xf=0,B_e=1,V_e=2,jc=-2,hK=-3,uK=-4,W_e=-5,T8=8,dK=1,N8=2,M8=3,R8=4,O8=5,P8=6,F8=7,B8=8,V8=9,W8=10,mx=11,Xl=12,yA=13,z8=14,CA=15,H8=16,U8=17,$8=18,j8=19,vy=20,wy=21,q8=22,G8=23,K8=24,Z8=25,Y8=26,SA=27,Q8=28,X8=29,ji=30,fK=31,z_e=32,H_e=852,U_e=592,$_e=15,j_e=$_e;function J8(i){return(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24)}function q_e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Hr.Buf16(320),this.work=new Hr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function gK(i){var e;return!i||!i.state?jc:(e=i.state,i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=dK,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Hr.Buf32(H_e),e.distcode=e.distdyn=new Hr.Buf32(U_e),e.sane=1,e.back=-1,xf)}function pK(i){var e;return!i||!i.state?jc:(e=i.state,e.wsize=0,e.whave=0,e.wnext=0,gK(i))}function mK(i,e){var t,n;return!i||!i.state||(n=i.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?jc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,pK(i))}function _K(i,e){var t,n;return i?(n=new q_e,i.state=n,n.window=null,t=mK(i,e),t!==xf&&(i.state=null),t):jc}function G_e(i){return _K(i,j_e)}var e9=!0,xA,DA;function K_e(i){if(e9){var e;for(xA=new Hr.Buf32(512),DA=new Hr.Buf32(32),e=0;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(gb(lK,i.lens,0,288,xA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;gb(cK,i.lens,0,32,DA,0,i.work,{bits:5}),e9=!1}i.lencode=xA,i.lenbits=9,i.distcode=DA,i.distbits=5}function bK(i,e,t,n){var s,r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Hr.Buf8(r.wsize)),n>=r.wsize?(Hr.arraySet(r.window,e,t-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),Hr.arraySet(r.window,e,t-n,s,r.wnext),n-=s,n?(Hr.arraySet(r.window,e,t-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}function Z_e(i,e){var t,n,s,r,o,a,l,c,h,u,d,f,g,p,m=0,v,b,w,y,x,L,S,k,D=new Hr.Buf8(4),T,N,$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return jc;t=i.state,t.mode===Xl&&(t.mode=yA),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,u=a,d=l,k=xf;e:for(;;)switch(t.mode){case dK:if(t.wrap===0){t.mode=yA;break}for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&2&&c===35615){t.check=0,D[0]=c&255,D[1]=c>>>8&255,t.check=$a(t.check,D,2,0),c=0,h=0,t.mode=N8;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=ji;break}if((c&15)!==T8){i.msg="unknown compression method",t.mode=ji;break}if(c>>>=4,h-=4,S=(c&15)+8,t.wbits===0)t.wbits=S;else if(S>t.wbits){i.msg="invalid window size",t.mode=ji;break}t.dmax=1<<S,i.adler=t.check=1,t.mode=c&512?W8:Xl,c=0,h=0;break;case N8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==T8){i.msg="unknown compression method",t.mode=ji;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=ji;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=$a(t.check,D,2,0)),c=0,h=0,t.mode=M8;case M8:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,t.check=$a(t.check,D,4,0)),c=0,h=0,t.mode=R8;case R8:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=$a(t.check,D,2,0)),c=0,h=0,t.mode=O8;case O8:if(t.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(D[0]=c&255,D[1]=c>>>8&255,t.check=$a(t.check,D,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=P8;case P8:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Hr.arraySet(t.head.extra,n,r,f,S)),t.flags&512&&(t.check=$a(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=F8;case F8:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=$a(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=B8;case B8:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&(t.check=$a(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=V8;case V8:if(t.flags&512){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=ji;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Xl;break;case W8:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}i.adler=t.check=J8(c),c=0,h=0,t.mode=mx;case mx:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,V_e;i.adler=t.check=1,t.mode=Xl;case Xl:if(e===F_e||e===by)break e;case yA:if(t.last){c>>>=h&7,h-=h&7,t.mode=SA;break}for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=z8;break;case 1:if(K_e(t),t.mode=vy,e===by){c>>>=2,h-=2;break e}break;case 2:t.mode=U8;break;case 3:i.msg="invalid block type",t.mode=ji}c>>>=2,h-=2;break;case z8:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=ji;break}if(t.length=c&65535,c=0,h=0,t.mode=CA,e===by)break e;case CA:t.mode=H8;case H8:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Hr.arraySet(s,n,r,f,o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=Xl;break;case U8:for(;h<14;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=ji;break}t.have=0,t.mode=$8;case $8:for(;t.have<t.ncode;){for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.lens[$[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},k=gb(P_e,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid code lengths set",t.mode=ji;break}t.have=0,t.mode=j8;case j8:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(w<16)c>>>=v,h-=v,t.lens[t.have++]=w;else{if(w===16){for(N=v+2;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c>>>=v,h-=v,t.have===0){i.msg="invalid bit length repeat",t.mode=ji;break}S=t.lens[t.have-1],f=3+(c&3),c>>>=2,h-=2}else if(w===17){for(N=v+3;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=3+(c&7),c>>>=3,h-=3}else{for(N=v+7;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=11+(c&127),c>>>=7,h-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=ji;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===ji)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=ji;break}if(t.lenbits=9,T={bits:t.lenbits},k=gb(lK,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid literal/lengths set",t.mode=ji;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},k=gb(cK,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,k){i.msg="invalid distances set",t.mode=ji;break}if(t.mode=vy,e===by)break e;case vy:t.mode=wy;case wy:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,O_e(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,t.mode===Xl&&(t.back=-1);break}for(t.back=0;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(b&&!(b&240)){for(y=v,x=b,L=w;m=t.lencode[L+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,t.length=w,b===0){t.mode=Y8;break}if(b&32){t.back=-1,t.mode=Xl;break}if(b&64){i.msg="invalid literal/length code",t.mode=ji;break}t.extra=b&15,t.mode=q8;case q8:if(t.extra){for(N=t.extra;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=G8;case G8:for(;m=t.distcode[c&(1<<t.distbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(!(b&240)){for(y=v,x=b,L=w;m=t.distcode[L+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,b&64){i.msg="invalid distance code",t.mode=ji;break}t.offset=w,t.extra=b&15,t.mode=K8;case K8:if(t.extra){for(N=t.extra;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=ji;break}t.mode=Z8;case Z8:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=ji;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=wy);break;case Y8:if(l===0)break e;s[o++]=t.length,l--,t.mode=wy;break;case SA:if(t.wrap){for(;h<32;){if(a===0)break e;a--,c|=n[r++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,d&&(i.adler=t.check=t.flags?$a(t.check,s,d,o-d):oN(t.check,s,d,o-d)),d=l,(t.flags?c:J8(c))!==t.check){i.msg="incorrect data check",t.mode=ji;break}c=0,h=0}t.mode=Q8;case Q8:if(t.wrap&&t.flags){for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=ji;break}c=0,h=0}t.mode=X8;case X8:k=B_e;break e;case ji:k=hK;break e;case fK:return uK;case z_e:default:return jc}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<ji&&(t.mode<SA||e!==I8))&&bK(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&&d&&(i.adler=t.check=t.flags?$a(t.check,s,d,i.next_out-d):oN(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Xl?128:0)+(t.mode===vy||t.mode===CA?256:0),(u===0&&d===0||e===I8)&&k===xf&&(k=W_e),k}function Y_e(i){if(!i||!i.state)return jc;var e=i.state;return e.window&&(e.window=null),i.state=null,xf}function Q_e(i,e){var t;return!i||!i.state||(t=i.state,!(t.wrap&2))?jc:(t.head=e,e.done=!1,xf)}function X_e(i,e){var t=e.length,n,s,r;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==mx)?jc:n.mode===mx&&(s=1,s=oN(s,e,t,0),s!==n.check)?hK:(r=bK(i,e,t,t),r?(n.mode=fK,uK):(n.havedict=1,xf))}Ta.inflateReset=pK;Ta.inflateReset2=mK;Ta.inflateResetKeep=gK;Ta.inflateInit=G_e;Ta.inflateInit2=_K;Ta.inflate=Z_e;Ta.inflateEnd=Y_e;Ta.inflateGetHeader=Q_e;Ta.inflateSetDictionary=X_e;Ta.inflateInfo="pako inflate (from Nodeca project)";var vK={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function J_e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ebe=J_e,Vp=Ta,pb=eh,GC=ig,mn=vK,aN=zO,tbe=oK,ibe=ebe,wK=Object.prototype.toString;function Df(i){if(!(this instanceof Df))return new Df(i);this.options=pb.assign({chunkSize:16384,windowBits:0,to:""},i||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tbe,this.strm.avail_out=0;var t=Vp.inflateInit2(this.strm,e.windowBits);if(t!==mn.Z_OK)throw new Error(aN[t]);if(this.header=new ibe,Vp.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=GC.string2buf(e.dictionary):wK.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Vp.inflateSetDictionary(this.strm,e.dictionary),t!==mn.Z_OK)))throw new Error(aN[t])}Df.prototype.push=function(i,e){var t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,r,o,a,l,c,h=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?mn.Z_FINISH:mn.Z_NO_FLUSH,typeof i=="string"?t.input=GC.binstring2buf(i):wK.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new pb.Buf8(n),t.next_out=0,t.avail_out=n),r=Vp.inflate(t,mn.Z_NO_FLUSH),r===mn.Z_NEED_DICT&&s&&(r=Vp.inflateSetDictionary(this.strm,s)),r===mn.Z_BUF_ERROR&&h===!0&&(r=mn.Z_OK,h=!1),r!==mn.Z_STREAM_END&&r!==mn.Z_OK)return this.onEnd(r),this.ended=!0,!1;t.next_out&&(t.avail_out===0||r===mn.Z_STREAM_END||t.avail_in===0&&(o===mn.Z_FINISH||o===mn.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=GC.utf8border(t.output,t.next_out),l=t.next_out-a,c=GC.buf2string(t.output,a),t.next_out=l,t.avail_out=n-l,l&&pb.arraySet(t.output,t.output,a,l,0),this.onData(c)):this.onData(pb.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(h=!0)}while((t.avail_in>0||t.avail_out===0)&&r!==mn.Z_STREAM_END);return r===mn.Z_STREAM_END&&(o=mn.Z_FINISH),o===mn.Z_FINISH?(r=Vp.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===mn.Z_OK):(o===mn.Z_SYNC_FLUSH&&(this.onEnd(mn.Z_OK),t.avail_out=0),!0)};Df.prototype.onData=function(i){this.chunks.push(i)};Df.prototype.onEnd=function(i){i===mn.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=pb.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function UO(i,e){var t=new Df(e);if(t.push(i,!0),t.err)throw t.msg||aN[t.err];return t.result}function nbe(i,e){return e=e||{},e.raw=!0,UO(i,e)}Dw.Inflate=Df;Dw.inflate=UO;Dw.inflateRaw=nbe;Dw.ungzip=UO;var sbe=eh.assign,rbe=Cw,obe=Dw,abe=vK,yK={};sbe(yK,rbe,obe,abe);var _x=yK;async function lN(i){try{let e,t=0,n=0;const s=[];let r=0,o;do{const l=i.subarray(t);if(o=new _x.Inflate,{strm:e}=o,o.push(l,_x.Z_SYNC_FLUSH),o.err)throw new Error(o.msg);t+=e.next_in,s[n]=o.result,r+=s[n].length,n+=1}while(e.avail_in);const a=new Uint8Array(r);for(let l=0,c=0;l<s.length;l++)a.set(s[l],c),c+=s[l].length;return Buffer.from(a)}catch(e){throw`${e}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function lbe(i,e){try{let t;const{minv:n,maxv:s}=e;let r=n.blockPosition,o=n.dataPosition;const a=[],l=[],c=[];let h=0,u=0;do{const f=i.subarray(r-n.blockPosition),g=new _x.Inflate;if({strm:t}=g,g.push(f,_x.Z_SYNC_FLUSH),g.err)throw new Error(g.msg);const p=g.result;a.push(p);let m=p.length;l.push(r),c.push(o),a.length===1&&n.dataPosition&&(a[0]=a[0].subarray(n.dataPosition),m=a[0].length);const v=r;if(r+=t.next_in,o+=m,v>=s.blockPosition){a[u]=a[u].subarray(0,s.blockPosition===n.blockPosition?s.dataPosition-n.dataPosition+1:s.dataPosition+1),l.push(r),c.push(o),h+=a[u].length;break}h+=a[u].length,u++}while(t.avail_in);const d=new Uint8Array(h);for(let f=0,g=0;f<a.length;f++)d.set(a[f],g),g+=a[f].length;return{buffer:Buffer.from(d),cpositions:l,dpositions:c}}catch(t){throw`${t}`.match(/incorrect header check/)?new Error("problem decompressing block: incorrect gzip header check"):t}}/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Do=null;try{Do=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Bi(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Bi.prototype.__isLong__;Object.defineProperty(Bi.prototype,"__isLong__",{value:!0});function Ms(i){return(i&&i.__isLong__)===!0}function t9(i){var e=Math.clz32(i&-i);return i?31-e:e}Bi.isLong=Ms;var i9={},n9={};function ng(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=n9[i],n)?n:(t=Qt(i,0,!0),s&&(n9[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=i9[i],n)?n:(t=Qt(i,i<0?-1:0,!1),s&&(i9[i]=t),t))}Bi.fromInt=ng;function ko(i,e){if(isNaN(i))return e?Nc:ra;if(e){if(i<0)return Nc;if(i>=CK)return DK}else{if(i<=-r9)return br;if(i+1>=r9)return xK}return i<0?ko(-i,e).neg():Qt(i%xm|0,i/xm|0,e)}Bi.fromNumber=ko;function Qt(i,e,t){return new Bi(i,e,t)}Bi.fromBits=Qt;var bx=Math.pow;function $O(i,e,t){if(i.length===0)throw Error("empty string");if(typeof e=="number"?(t=e,e=!1):e=!!e,i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return e?Nc:ra;if(t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return $O(i.substring(1),e,t).neg();for(var s=ko(bx(t,8)),r=ra,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var c=ko(bx(t,a));r=r.mul(c).add(ko(l))}else r=r.mul(s),r=r.add(ko(l))}return r.unsigned=e,r}Bi.fromString=$O;function Na(i,e){return typeof i=="number"?ko(i,e):typeof i=="string"?$O(i,e):Qt(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Bi.fromValue=Na;var s9=1<<16,cbe=1<<24,xm=s9*s9,CK=xm*xm,r9=CK/2,o9=ng(cbe),ra=ng(0);Bi.ZERO=ra;var Nc=ng(0,!0);Bi.UZERO=Nc;var _p=ng(1);Bi.ONE=_p;var SK=ng(1,!0);Bi.UONE=SK;var cN=ng(-1);Bi.NEG_ONE=cN;var xK=Qt(-1,2147483647,!1);Bi.MAX_VALUE=xK;var DK=Qt(-1,-1,!0);Bi.MAX_UNSIGNED_VALUE=DK;var br=Qt(0,-2147483648,!1);Bi.MIN_VALUE=br;var ve=Bi.prototype;ve.toInt=function(){return this.unsigned?this.low>>>0:this.low};ve.toNumber=function(){return this.unsigned?(this.high>>>0)*xm+(this.low>>>0):this.high*xm+(this.low>>>0)};ve.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(br)){var e=ko(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=ko(bx(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,c=l.toString(i);if(r=a,r.isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}};ve.getHighBits=function(){return this.high};ve.getHighBitsUnsigned=function(){return this.high>>>0};ve.getLowBits=function(){return this.low};ve.getLowBitsUnsigned=function(){return this.low>>>0};ve.getNumBitsAbs=function(){if(this.isNegative())return this.eq(br)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};ve.isZero=function(){return this.high===0&&this.low===0};ve.eqz=ve.isZero;ve.isNegative=function(){return!this.unsigned&&this.high<0};ve.isPositive=function(){return this.unsigned||this.high>=0};ve.isOdd=function(){return(this.low&1)===1};ve.isEven=function(){return(this.low&1)===0};ve.equals=function(i){return Ms(i)||(i=Na(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};ve.eq=ve.equals;ve.notEquals=function(i){return!this.eq(i)};ve.neq=ve.notEquals;ve.ne=ve.notEquals;ve.lessThan=function(i){return this.comp(i)<0};ve.lt=ve.lessThan;ve.lessThanOrEqual=function(i){return this.comp(i)<=0};ve.lte=ve.lessThanOrEqual;ve.le=ve.lessThanOrEqual;ve.greaterThan=function(i){return this.comp(i)>0};ve.gt=ve.greaterThan;ve.greaterThanOrEqual=function(i){return this.comp(i)>=0};ve.gte=ve.greaterThanOrEqual;ve.ge=ve.greaterThanOrEqual;ve.compare=function(i){if(Ms(i)||(i=Na(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};ve.comp=ve.compare;ve.negate=function(){return!this.unsigned&&this.eq(br)?br:this.not().add(_p)};ve.neg=ve.negate;ve.add=function(i){Ms(i)||(i=Na(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,c=0,h=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,h+=u>>>16,u&=65535,h+=t+o,c+=h>>>16,h&=65535,c+=e+r,c&=65535,Qt(u<<16|d,c<<16|h,this.unsigned)};ve.subtract=function(i){return Ms(i)||(i=Na(i)),this.add(i.neg())};ve.sub=ve.subtract;ve.multiply=function(i){if(this.isZero())return this;if(Ms(i)||(i=Na(i)),Do){var e=Do.mul(this.low,this.high,i.low,i.high);return Qt(e,Do.get_high(),this.unsigned)}if(i.isZero())return this.unsigned?Nc:ra;if(this.eq(br))return i.isOdd()?br:ra;if(i.eq(br))return this.isOdd()?br:ra;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(o9)&&i.lt(o9))return ko(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,c=i.low&65535,h=0,u=0,d=0,f=0;return f+=r*c,d+=f>>>16,f&=65535,d+=s*c,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*c,h+=u>>>16,u&=65535,u+=s*l,h+=u>>>16,u&=65535,u+=r*a,h+=u>>>16,u&=65535,h+=t*c+n*l+s*a+r*o,h&=65535,Qt(d<<16|f,h<<16|u,this.unsigned)};ve.mul=ve.multiply;ve.divide=function(i){if(Ms(i)||(i=Na(i)),i.isZero())throw Error("division by zero");if(Do){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?Do.div_u:Do.div_s)(this.low,this.high,i.low,i.high);return Qt(e,Do.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Nc:ra;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Nc;if(i.gt(this.shru(1)))return SK;s=Nc}else{if(this.eq(br)){if(i.eq(_p)||i.eq(cN))return br;if(i.eq(br))return _p;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(ra)?i.isNegative()?_p:cN:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(br))return this.unsigned?Nc:ra;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=ra}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:bx(2,o-48),l=ko(t),c=l.mul(i);c.isNegative()||c.gt(n);)t-=a,l=ko(t,this.unsigned),c=l.mul(i);l.isZero()&&(l=_p),s=s.add(l),n=n.sub(c)}return s};ve.div=ve.divide;ve.modulo=function(i){if(Ms(i)||(i=Na(i)),Do){var e=(this.unsigned?Do.rem_u:Do.rem_s)(this.low,this.high,i.low,i.high);return Qt(e,Do.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};ve.mod=ve.modulo;ve.rem=ve.modulo;ve.not=function(){return Qt(~this.low,~this.high,this.unsigned)};ve.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};ve.clz=ve.countLeadingZeros;ve.countTrailingZeros=function(){return this.low?t9(this.low):t9(this.high)+32};ve.ctz=ve.countTrailingZeros;ve.and=function(i){return Ms(i)||(i=Na(i)),Qt(this.low&i.low,this.high&i.high,this.unsigned)};ve.or=function(i){return Ms(i)||(i=Na(i)),Qt(this.low|i.low,this.high|i.high,this.unsigned)};ve.xor=function(i){return Ms(i)||(i=Na(i)),Qt(this.low^i.low,this.high^i.high,this.unsigned)};ve.shiftLeft=function(i){return Ms(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Qt(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):Qt(0,this.low<<i-32,this.unsigned)};ve.shl=ve.shiftLeft;ve.shiftRight=function(i){return Ms(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Qt(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):Qt(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};ve.shr=ve.shiftRight;ve.shiftRightUnsigned=function(i){return Ms(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Qt(this.low>>>i|this.high<<32-i,this.high>>>i,this.unsigned):i===32?Qt(this.high,0,this.unsigned):Qt(this.high>>>i-32,0,this.unsigned)};ve.shru=ve.shiftRightUnsigned;ve.shr_u=ve.shiftRightUnsigned;ve.rotateLeft=function(i){var e;return Ms(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?Qt(this.high,this.low,this.unsigned):i<32?(e=32-i,Qt(this.low<<i|this.high>>>e,this.high<<i|this.low>>>e,this.unsigned)):(i-=32,e=32-i,Qt(this.high<<i|this.low>>>e,this.low<<i|this.high>>>e,this.unsigned))};ve.rotl=ve.rotateLeft;ve.rotateRight=function(i){var e;return Ms(i)&&(i=i.toInt()),(i&=63)===0?this:i===32?Qt(this.high,this.low,this.unsigned):i<32?(e=32-i,Qt(this.high<<e|this.low>>>i,this.low<<e|this.high>>>i,this.unsigned)):(i-=32,e=32-i,Qt(this.low<<e|this.high>>>i,this.high<<e|this.low>>>i,this.unsigned))};ve.rotr=ve.rotateRight;ve.toSigned=function(){return this.unsigned?Qt(this.low,this.high,!1):this};ve.toUnsigned=function(){return this.unsigned?this:Qt(this.low,this.high,!0)};ve.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};ve.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};ve.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Bi.fromBytes=function(i,e,t){return t?Bi.fromBytesLE(i,e):Bi.fromBytesBE(i,e)};Bi.fromBytesLE=function(i,e){return new Bi(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Bi.fromBytesBE=function(i,e){return new Bi(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};function a9(i,e){return i.offset+i.lineBytes*Math.floor(e/i.lineLength)+e%i.lineLength}async function hbe(i,e){const t=await i.readFile(e);if(!(t&&t.length))throw new Error("No data read from FASTA index (FAI) file");let n=0,s;const r=t.toString("utf8").split(/\r?\n/).filter(o=>/\S/.test(o)).map(o=>o.split("	")).filter(o=>o[0]!=="").map(o=>((!s||s.name!==o[0])&&(s={name:o[0],id:n},n+=1),{id:s.id,name:o[0],length:+o[1],start:0,end:+o[1],offset:+o[2],lineLength:+o[3],lineBytes:+o[4]}));return{name:Object.fromEntries(r.map(o=>[o.name,o])),id:Object.fromEntries(r.map(o=>[o.id,o]))}}class ube{constructor({fasta:e,fai:t,path:n,faiPath:s,chunkSizeLimit:r=1e6}){if(e)this.fasta=e;else if(n)this.fasta=new zh(n);else throw new Error("Need to pass filehandle for fasta or path to localfile");if(t)this.fai=t;else if(s)this.fai=new zh(s);else if(n)this.fai=new zh(`${n}.fai`);else throw new Error("Need to pass filehandle for  or path to localfile");this.chunkSizeLimit=r}async _getIndexes(e){return this.indexes||(this.indexes=hbe(this.fai,e)),this.indexes}async getSequenceNames(e){return Object.keys((await this._getIndexes(e)).name)}async getSequenceSizes(e){const t={},n=await this._getIndexes(e),s=Object.values(n.id);for(let r=0;r<s.length;r+=1)t[s[r].name]=s[r].length;return t}async getSequenceSize(e,t){var n;return(n=(await this._getIndexes(t)).name[e])===null||n===void 0?void 0:n.length}async hasReferenceSequence(e,t){return!!(await this._getIndexes(t)).name[e]}async getResiduesById(e,t,n,s){const r=(await this._getIndexes(s)).id[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getResiduesByName(e,t,n,s){const r=(await this._getIndexes(s)).name[e];if(r)return this._fetchFromIndexEntry(r,t,n,s)}async getSequence(e,t,n,s){return this.getResiduesByName(e,t,n,s)}async _fetchFromIndexEntry(e,t=0,n,s){let r=n;if(t<0)throw new TypeError("regionStart cannot be less than 0");if((r===void 0||r>e.length)&&(r=e.length),t>=r)return"";const o=a9(e,t),a=a9(e,r)-o;if(a>this.chunkSizeLimit)throw new Error(`data size of ${a.toLocaleString()} bytes exceeded chunk size limit of ${this.chunkSizeLimit.toLocaleString()} bytes`);const l=Buffer.allocUnsafe(a);return await this.fasta.read(l,0,a,o,s),l.toString("utf8").replace(/\s+/g,"")}}function eL(i){return class extends i{constructor(){super(...arguments),Il(this,"lastQuantizedInterval",[0,0])}quantizeInterval(e,t){return[Math.max(Math.floor(e[0]/t-1)*t,0),Math.min(Math.ceil(e[1]/t+1)*t,this.genome.totalSize)]}checkAndUpdateLastInterval(e){return tx(this.lastQuantizedInterval,e)?!1:(this.lastQuantizedInterval=e,!0)}}}function tL(i,e){return!e||/^(data:|([A-Za-z]+:)?\/\/)/.test(i)||i.startsWith("/")?i:(e.endsWith("/")||(e+="/"),e+i)}typeof window<"u"&&(window.Buffer=zr.Buffer);class dbe extends eL(w0){constructor(e,t){const n={channel:"x",windowSize:7e3,...e};if(super(t,n.channel),this.params=n,!this.params.url)throw new Error("No URL provided for IndexedFastaSource");const s=r=>new Tc(tL(r,this.view.getBaseUrl()));this.fasta=new ube({fasta:s(this.params.url),fai:s(this.params.indexUrl??this.params.url+".fai")})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.fasta.getSequence(o.chrom,o.startPos,o.endPos).then(a=>({chrom:o.chrom,start:o.startPos,sequence:a}))));this.publishData(r)}}}const iL=BigInt(32);function fbe(i,e,t){const n=+!!t,s=+!t;return BigInt(i.getInt32(e,t)*s+i.getInt32(e+4,t)*n)<<iL|BigInt(i.getUint32(e,t)*n+i.getUint32(e+4,t)*s)}function gbe(i,e,t){const n=i.getUint32(e,t),s=i.getUint32(e+4,t),r=+!!t,o=+!t;return BigInt(n*o+s*r)<<iL|BigInt(n*r+s*o)}function pbe(i,e,t,n){const s=Number(t>>iL),r=Number(t&BigInt(4294967295));n?(i.setInt32(e+4,s,n),i.setUint32(e,r,n)):(i.setInt32(e,s,n),i.setUint32(e+4,r,n))}function mbe(i,e,t,n){const s=Number(t>>iL),r=Number(t&BigInt(4294967295));n?(i.setUint32(e+4,s,n),i.setUint32(e,r,n)):(i.setUint32(e,s,n),i.setUint32(e+4,r,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(i,e){return fbe(this,i,e)});"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(i,e){return gbe(this,i,e)});"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(i,e,t){pbe(this,i,e,t)});"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(i,e,t){mbe(this,i,e,t)});class _be{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+`
`}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach(t=>{const n=this.references.get(t);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([e,t])=>!t.resolved&&!t.requested).map(([e,t])=>e)}}const $o=new Map,td="___parser_",jo={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},yy={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Cy={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};let ai=class qo{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new qo}primitiveGenerateN(e,t){const n=yy[e],s=Cy[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${n}(offset, ${s});`),t.pushCode(`offset += ${jo[e]};`)}primitiveN(e,t,n){return this.setNextParser(e,t,n)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,n){return n.length=e,this.setNextParser("bit",t,n)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return $o.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!(t.length||t.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if(typeof t.type=="string"&&!$o.has(t.type)&&!(t.type in jo))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const n in t.choices){const s=parseInt(n,10),r=t.choices[s];if(isNaN(s))throw new Error(`Choice key "${n}" is not a number.`);if(typeof r=="string"&&!$o.has(r)&&!(r in jo))throw new Error(`Choice type "${r}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if(typeof t!="object"&&typeof e=="object"&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof qo)&&!$o.has(t.type))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof qo)&&!e)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if(typeof t.type=="string"&&!(t.type in jo)&&!$o.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new _be(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${td+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){const e="imports";return this.getContext(e).code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${td+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach(n=>{var s;(s=$o.get(n))===null||s===void 0||s.addAliasedCode(e)})}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(jo).indexOf(this.type)>=0)e=jo[this.type];else if(this.type==="string"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")e=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let t=NaN;typeof this.options.type=="string"?t=jo[this.options.type]:this.options.type instanceof qo&&(t=this.options.type.sizeOf()),e=this.options.length*t}else this.type==="seek"?e=this.options.length:this.type==="nest"?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,n){const s=new qo;return s.type=e,s.varName=t,s.options=n,s.endian=this.endian,this.head?this.head.next=s:this.next=s,this.head=s,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e);break}this.type!=="bit"&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=e.addImport(this.options.assert);e.pushCode(`if (!${n}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const n=e.generateTmpVariable();e.pushCode(`var ${n} = 0;`);const s=(h=0)=>{let u=0;for(let d=h;d<e.bitFields.length;d++){const f=e.bitFields[d].options.length;if(u+f>32)break;u+=f}return u},r=h=>(h<=8?(e.pushCode(`${n} = dataView.getUint8(offset);`),h=8):h<=16?(e.pushCode(`${n} = dataView.getUint16(offset);`),h=16):h<=24?(e.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),h=24):(e.pushCode(`${n} = dataView.getUint32(offset);`),h=32),e.pushCode(`offset += ${h/8};`),h);let o=0;const a=this.endian==="be";let l=0,c=0;e.bitFields.forEach((h,u)=>{let d=h.options.length;if(d>c){if(c){const p=-1>>>32-c;e.pushCode(`${h.varName} = (${n} & 0x${p.toString(16)}) << ${d-c};`),d-=c}o=0,c=l=r(s(u)-c)}const f=a?l-o-d:o,g=-1>>>32-d;e.pushCode(`${h.varName} ${d<h.options.length?"|=":"="} ${n} >> ${f} & 0x${g.toString(16)};`),h.options.length===32&&e.pushCode(`${h.varName} >>>= 0`),h.options.assert&&h.generateAssert(e),h.options.formatter&&h.generateFormatter(e,h.varName,h.options.formatter),o+=d,c-=d}),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable(),s=this.options.encoding,r=s.toLowerCase()==="hex",o='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const a=this.options.length;e.pushCode(`var ${n} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${a});`);const l=`offset - ${n} < ${a} ? offset - 1 : offset`;e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, ${l}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, ${l}));`)}else if(this.options.length){const a=e.generateOption(this.options.length);e.pushCode(r?`${t} = Array.from(buffer.subarray(offset, offset + ${a}), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(offset, offset + ${a}));`),e.pushCode(`offset += ${a};`)}else this.options.zeroTerminated?(e.pushCode(`var ${n} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset - 1), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${n} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${n}, offset), ${o}).join('');`:`${t} = new TextDecoder('${s}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){const n=this.options.readUntil,s=e.generateTmpVariable(),r=e.generateTmpVariable();e.pushCode(`var ${s} = offset;`),e.pushCode(`var ${r} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${r} = dataView.getUint8(offset);`);const o=e.addImport(n);e.pushCode(`if (${o}.call(${e.generateVariable()}, ${r}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${s}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${t} = buffer.subarray(offset);`);else{const n=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${n});`),e.pushCode(`offset += ${n};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),n=e.generateOption(this.options.lengthInBytes),s=this.options.type,r=e.generateTmpVariable(),o=e.generateVariable(this.varName),a=e.generateTmpVariable(),l=this.options.key,c=typeof l=="string";if(c?e.pushCode(`${o} = {};`):e.pushCode(`${o} = [];`),typeof this.options.readUntil=="function"?e.pushCode("do {"):this.options.readUntil==="eof"?e.pushCode(`for (var ${r} = 0; offset < buffer.length; ${r}++) {`):n!==void 0?e.pushCode(`for (var ${r} = offset + ${n}; offset < ${r}; ) {`):e.pushCode(`for (var ${r} = ${t}; ${r} > 0; ${r}--) {`),typeof s=="string")if($o.get(s)){const h=e.generateTmpVariable();if(e.pushCode(`var ${h} = ${td+s}(offset, {`),e.useContextVariables){const u=e.generateVariable();e.pushCode(`$parent: ${u},`),e.pushCode(`$root: ${u}.$root,`),!this.options.readUntil&&n===void 0&&e.pushCode(`$index: ${t} - ${r},`)}e.pushCode("});"),e.pushCode(`var ${a} = ${h}.result; offset = ${h}.offset;`),s!==this.alias&&e.addReference(s)}else{const h=yy[s],u=Cy[s];e.pushCode(`var ${a} = dataView.get${h}(offset, ${u});`),e.pushCode(`offset += ${jo[s]};`)}else if(s instanceof qo){e.pushCode(`var ${a} = {};`);const h=e.generateVariable();e.pushScope(a),e.useContextVariables&&(e.pushCode(`${a}.$parent = ${h};`),e.pushCode(`${a}.$root = ${h}.$root;`),!this.options.readUntil&&n===void 0&&e.pushCode(`${a}.$index = ${t} - ${r};`)),s.generate(e),e.useContextVariables&&(e.pushCode(`delete ${a}.$parent;`),e.pushCode(`delete ${a}.$root;`),e.pushCode(`delete ${a}.$index;`)),e.popScope()}if(c?e.pushCode(`${o}[${a}.${l}] = ${a};`):e.pushCode(`${o}.push(${a});`),e.pushCode("}"),typeof this.options.readUntil=="function"){const h=this.options.readUntil,u=e.addImport(h);e.pushCode(`while (!${u}.call(${e.generateVariable()}, ${a}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,n){if(typeof n=="string"){const s=e.generateVariable(this.varName);if($o.has(n)){const r=e.generateTmpVariable();e.pushCode(`var ${r} = ${td+n}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${s}.$parent,`),e.pushCode(`$root: ${s}.$root,`)),e.pushCode("});"),e.pushCode(`${s} = ${r}.result; offset = ${r}.offset;`),n!==this.alias&&e.addReference(n)}else{const r=yy[n],o=Cy[n];e.pushCode(`${s} = dataView.get${r}(offset, ${o});`),e.pushCode(`offset += ${jo[n]}`)}}else n instanceof qo&&(e.pushPath(t),n.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),n=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${n} = {};`),e.useContextVariables)){const s=e.generateVariable();e.pushCode(`${n}.$parent = ${s};`),e.pushCode(`${n}.$root = ${s}.$root;`)}e.pushCode(`switch(${t}) {`);for(const s in this.options.choices){const r=parseInt(s,10),o=this.options.choices[r];e.pushCode(`case ${r}:`),this.generateChoiceCase(e,this.varName,o),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${n}.$parent;`),e.pushCode(`delete ${n}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof qo){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const n=e.generateVariable();e.pushCode(`${t}.$parent = ${n};`),e.pushCode(`${t}.$root = ${n}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if($o.has(this.options.type)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${td+this.options.type}(offset, {`),e.useContextVariables){const s=e.generateVariable();e.pushCode(`$parent: ${s},`),e.pushCode(`$root: ${s}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),n=e.generateTmpVariable();if(typeof this.options.readUntil=="function"){const l=this.options.readUntil,c=e.generateTmpVariable(),h=e.generateTmpVariable();e.pushCode(`var ${c} = offset;`),e.pushCode(`var ${h} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${h} = dataView.getUint8(offset);`);const u=e.addImport(l);e.pushCode(`if (${u}.call(${e.generateVariable()}, ${h}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${n} = buffer.subarray(${c}, offset);`)}else if(this.options.readUntil==="eof")e.pushCode(`${n} = buffer.subarray(offset);`);else{const l=e.generateOption(this.options.length);e.pushCode(`${n} = buffer.subarray(offset, offset + ${l});`),e.pushCode(`offset += ${l};`)}this.options.clone&&e.pushCode(`${n} = buffer.constructor.from(${n});`);const s=e.generateTmpVariable(),r=e.generateTmpVariable(),o=e.generateTmpVariable(),a=e.addImport(this.options.wrapper);if(e.pushCode(`${n} = ${a}.call(this, ${n}).subarray(0);`),e.pushCode(`var ${s} = buffer;`),e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${o} = dataView;`),e.pushCode(`buffer = ${n};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof qo)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if($o.has(this.options.type)){const l=e.generateTmpVariable();e.pushCode(`var ${l} = ${td+this.options.type}(0);`),e.pushCode(`${t} = ${l}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${s};`),e.pushCode(`dataView = ${o};`),e.pushCode(`offset = ${r};`)}generateFormatter(e,t,n){if(typeof n=="function"){const s=e.addImport(n);e.pushCode(`${t} = ${s}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,n=e.generateOption(this.options.offset),s=e.generateTmpVariable(),r=e.generateVariable(this.varName);if(e.pushCode(`var ${s} = offset;`),e.pushCode(`offset = ${n};`),this.options.type instanceof qo){if(e.pushCode(`${r} = {};`),e.useContextVariables){const o=e.generateVariable();e.pushCode(`${r}.$parent = ${o};`),e.pushCode(`${r}.$root = ${o}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}else if($o.has(this.options.type)){const o=e.generateTmpVariable();if(e.pushCode(`var ${o} = ${td+this.options.type}(offset, {`),e.useContextVariables){const a=e.generateVariable();e.pushCode(`$parent: ${a},`),e.pushCode(`$root: ${a}.$root,`)}e.pushCode("});"),e.pushCode(`${r} = ${o}.result; offset = ${o}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(jo).indexOf(this.options.type)>=0){const o=yy[t],a=Cy[t];e.pushCode(`${r} = dataView.get${o}(offset, ${a});`),e.pushCode(`offset += ${jo[t]};`)}e.pushCode(`offset = ${s};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}};var kK={},jO={},kf={},kw={};Object.defineProperty(kw,"__esModule",{value:!0});function qO(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function l9(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function GO(i,e,t){return e&&l9(i.prototype,e),t&&l9(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function bbe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&hN(i,e)}function Dm(i){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dm(i)}function hN(i,e){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},hN(i,e)}function vbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function V_(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function wbe(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V_(i)}function ybe(i){var e=vbe();return function(){var t=Dm(i),n;if(e){var s=Dm(this).constructor;n=Reflect.construct(t,arguments,s)}else n=t.apply(this,arguments);return wbe(this,n)}}function Cbe(i,e){for(;!Object.prototype.hasOwnProperty.call(i,e)&&(i=Dm(i),i!==null););return i}function KC(){return typeof Reflect<"u"&&Reflect.get?KC=Reflect.get.bind():KC=function(i,e,t){var n=Cbe(i,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(arguments.length<3?i:t):s.value}},KC.apply(this,arguments)}var c9=function(){function i(){qO(this,i),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return GO(i,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners){for(var n=this.listeners[e],s=0,r=n.length;s<r;s++)if(n[s].callback===t){n.splice(s,1);return}}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type],n=t.slice(),s=0,r=n.length;s<r;s++){var o=n[s];try{o.callback.call(this,e)}catch(a){Promise.resolve().then(function(){throw a})}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),i}(),KO=function(i){bbe(t,i);var e=ybe(t);function t(){var n;return qO(this,t),n=e.call(this),n.listeners||c9.call(V_(n)),Object.defineProperty(V_(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(V_(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(V_(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return GO(t,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(n){n.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,n)),KC(Dm(t.prototype),"dispatchEvent",this).call(this,n)}}]),t}(c9),LK=function(){function i(){qO(this,i),Object.defineProperty(this,"signal",{value:new KO,writable:!0,configurable:!0})}return GO(i,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(n===void 0)if(typeof document>"u")n=new Error("This operation was aborted"),n.name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch{n=new Error("This operation was aborted"),n.name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),i}();typeof Symbol<"u"&&Symbol.toStringTag&&(LK.prototype[Symbol.toStringTag]="AbortController",KO.prototype[Symbol.toStringTag]="AbortSignal");function Sbe(i){return i.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof i.Request=="function"&&!i.Request.prototype.hasOwnProperty("signal")||!i.AbortController}function xbe(i){typeof i=="function"&&(i={fetch:i});var e=i,t=e.fetch,n=e.Request,s=n===void 0?t.Request:n,r=e.AbortController,o=e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=o===void 0?!1:o;if(!Sbe({fetch:t,Request:s,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:t,Request:l};var l=s;(l&&!l.prototype.hasOwnProperty("signal")||a)&&(l=function(u,d){var f;d&&d.signal&&(f=d.signal,delete d.signal);var g=new s(u,d);return f&&Object.defineProperty(g,"signal",{writable:!1,enumerable:!1,configurable:!0,value:f}),g},l.prototype=s.prototype);var c=t,h=function(u,d){var f=l&&l.prototype.isPrototypeOf(u)?u.signal:d?d.signal:void 0;if(f){var g;try{g=new DOMException("Aborted","AbortError")}catch{g=new Error("Aborted"),g.name="AbortError"}if(f.aborted)return Promise.reject(g);var p=new Promise(function(m,v){f.addEventListener("abort",function(){return v(g)},{once:!0})});return d&&d.signal&&delete d.signal,Promise.race([p,c(u,d)])}return c(u,d)};return{fetch:h,Request:l}}kw.AbortController=LK;kw.AbortSignal=KO;kw.abortableFetch=xbe;Object.defineProperty(kf,"__esModule",{value:!0});kf.AbortSignal=kf.AbortController=void 0;const AK=kw;var vx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof wf<"u")return wf;throw new Error("unable to locate global object")};let Dbe=typeof vx().AbortController>"u"?AK.AbortController:vx().AbortController;kf.AbortController=Dbe;let kbe=typeof vx().AbortController>"u"?AK.AbortSignal:vx().AbortSignal;kf.AbortSignal=kbe;var ZO={};Object.defineProperty(ZO,"__esModule",{value:!0});const Lbe=kf;class Abe{}class Ebe{constructor(){this.signals=new Set,this.abortController=new Lbe.AbortController}addSignal(e=new Abe){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):typeof e.addEventListener=="function"&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}ZO.default=Ebe;var YO={};Object.defineProperty(YO,"__esModule",{value:!0});class Ibe{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach(t=>{t(e)})}}YO.default=Ibe;var EK=wf&&wf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(jO,"__esModule",{value:!0});const Tbe=kf,Nbe=EK(ZO),Mbe=EK(YO);class wx{constructor({fill:e,cache:t}){if(typeof e!="function")throw new TypeError("must pass a fill function");if(typeof t!="object")throw new TypeError("must pass a cache object");if(typeof t.get!="function"||typeof t.set!="function"||typeof t.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||e.message==="AbortError: aborted"||e.message==="Error: aborted"}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,s){const r=new Nbe.default,o=new Mbe.default;o.addCallback(s);const a={aborter:r,promise:this.fillCallback(t,r.signal,l=>{o.callback(l)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};a.aborter.addSignal(n),a.aborter.signal.addEventListener("abort",()=>{a.settled||this.evict(e,a)}),a.promise.then(()=>{a.settled=!0},()=>{a.settled=!0,this.evict(e,a)}).catch(l=>{throw console.error(l),l}),this.cache.set(e,a)}static checkSinglePromise(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(s=>(n(),s),s=>{throw n(),s})}has(e){return this.cache.has(e)}get(e,t,n,s){if(!n&&t instanceof Tbe.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const r=this.cache.get(e);return r?r.aborted&&!r.settled?(this.evict(e,r),this.get(e,t,n,s)):r.settled?r.promise:(r.aborter.addSignal(n),r.statusReporter.addCallback(s),wx.checkSinglePromise(r.promise,n)):(this.fill(e,t,n,s),wx.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}jO.default=wx;var Rbe=wf&&wf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kK,"__esModule",{value:!0});const Obe=Rbe(jO);var QO=kK.default=Obe.default;let Pbe=class{constructor(i={}){if(!(i.maxSize&&i.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=i.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(i,e){this.cache.set(i,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i)){const e=this.oldCache.get(i);return this.oldCache.delete(i),this._set(i,e),e}}set(i,e){return this.cache.has(i)?this.cache.set(i,e):this._set(i,e),this}has(i){return this.cache.has(i)||this.oldCache.has(i)}peek(i){if(this.cache.has(i))return this.cache.get(i);if(this.oldCache.has(i))return this.oldCache.get(i)}delete(i){const e=this.cache.delete(i);return e&&this._size--,this.oldCache.delete(i)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[i]of this)yield i}*values(){for(const[,i]of this)yield i}*[Symbol.iterator](){for(const i of this.cache)yield i;for(const i of this.oldCache){const[e]=i;this.cache.has(e)||(yield i)}}get size(){let i=0;for(const e of this.oldCache.keys())this.cache.has(e)||i++;return this._size+i}};var Fbe=Pbe;const IK=y0(Fbe);class Mh{constructor(e,t){this.ranges=arguments.length===2?[{min:e,max:t}]:0 in e?Object.assign({},e):[e]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(e){for(let t=0;t<this.ranges.length;t+=1){const n=this.ranges[t];if(n.min<=e&&n.max>=e)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(e=>new Mh(e.min,e.max))}toString(){return this.ranges.map(e=>`[${e.min}-${e.max}]`).join(",")}union(e){const t=this.getRanges().concat(e.getRanges()).sort(this.rangeOrder),n=[];let s=t[0];for(let r=1;r<t.length;r+=1){const o=t[r];o.min()>s.max()+1?(n.push(s),s=o):o.max()>s.max()&&(s=new Mh(s.min(),o.max()))}return n.push(s),n.length===1?n[0]:new Mh(n)}intersection(e){let t=this,n=e;const s=this.ranges(),r=n.ranges(),o=s.length,a=r.length;let l=0,c=0;const h=[];for(;l<o&&c<a;){t=s[l],n=r[c];const u=Math.max(t.min(),n.min()),d=Math.min(t.max(),n.max());d>=u&&h.push(new Mh(u,d)),t.max()>n.max()?c+=1:l+=1}if(h.length===0)throw new Error("found range of length 0");return h.length===1?h[0]:new Mh(h)}coverage(){let e=0;const t=this.ranges();for(const n of t)e+=n.max()-n.min()+1;return e}rangeOrder(e,t){let n=e,s=t;return arguments.length<2&&(s=n,n=this),n.min()<s.min()?-1:n.min()>s.min()?1:n.max()<s.max()?-1:s.max()>n.max()?1:0}}function D0(i){let e=i.length;for(;--e>=0;)i[e]=0}const Bbe=3,Vbe=258,TK=29,Wbe=256,zbe=Wbe+1+TK,NK=30,Hbe=512,Ube=new Array((zbe+2)*2);D0(Ube);const $be=new Array(NK*2);D0($be);const jbe=new Array(Hbe);D0(jbe);const qbe=new Array(Vbe-Bbe+1);D0(qbe);const Gbe=new Array(TK);D0(Gbe);const Kbe=new Array(NK);D0(Kbe);const Zbe=(i,e,t,n)=>{let s=i&65535|0,r=i>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,r=r+s|0;while(--o);s%=65521,r%=65521}return s|r<<16|0};var uN=Zbe;const Ybe=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},Qbe=new Uint32Array(Ybe()),Xbe=(i,e,t,n)=>{const s=Qbe,r=n+t;i^=-1;for(let o=n;o<r;o++)i=i>>>8^s[(i^e[o])&255];return i^-1};var ja=Xbe,dN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},XO={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const Jbe=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var eve=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Jbe(t,n)&&(i[n]=t[n])}}return i},tve=i=>{let e=0;for(let n=0,s=i.length;n<s;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,s=0,r=i.length;n<r;n++){let o=i[n];t.set(o,s),s+=o.length}return t},MK={assign:eve,flattenChunks:tve};let RK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{RK=!1}const Nv=new Uint8Array(256);for(let i=0;i<256;i++)Nv[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Nv[254]=Nv[254]=1;var ive=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,s,r,o=i.length,a=0;for(s=0;s<o;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),r=0,s=0;r<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const nve=(i,e)=>{if(e<65534&&i.subarray&&RK)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t};var sve=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,s;const r=new Array(t*2);for(s=0,n=0;n<t;){let o=i[n++];if(o<128){r[s++]=o;continue}let a=Nv[o];if(a>4){r[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<t;)o=o<<6|i[n++]&63,a--;if(a>1){r[s++]=65533;continue}o<65536?r[s++]=o:(o-=65536,r[s++]=55296|o>>10&1023,r[s++]=56320|o&1023)}return nve(r,s)},rve=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+Nv[i[t]]>e?t:e},fN={string2buf:ive,buf2string:sve,utf8border:rve};function ove(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ave=ove;const Sy=16209,lve=16191;var cve=function(i,e){let t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w,y,x,L,S,k,D;const T=i.state;t=i.next_in,k=i.input,n=t+(i.avail_in-5),s=i.next_out,D=i.output,r=s-(e-i.avail_out),o=s+(i.avail_out-257),a=T.dmax,l=T.wsize,c=T.whave,h=T.wnext,u=T.window,d=T.hold,f=T.bits,g=T.lencode,p=T.distcode,m=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;e:do{f<15&&(d+=k[t++]<<f,f+=8,d+=k[t++]<<f,f+=8),b=g[d&m];t:for(;;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,w===0)D[s++]=b&65535;else if(w&16){y=b&65535,w&=15,w&&(f<w&&(d+=k[t++]<<f,f+=8),y+=d&(1<<w)-1,d>>>=w,f-=w),f<15&&(d+=k[t++]<<f,f+=8,d+=k[t++]<<f,f+=8),b=p[d&v];i:for(;;){if(w=b>>>24,d>>>=w,f-=w,w=b>>>16&255,w&16){if(x=b&65535,w&=15,f<w&&(d+=k[t++]<<f,f+=8,f<w&&(d+=k[t++]<<f,f+=8)),x+=d&(1<<w)-1,x>a){i.msg="invalid distance too far back",T.mode=Sy;break e}if(d>>>=w,f-=w,w=s-r,x>w){if(w=x-w,w>c&&T.sane){i.msg="invalid distance too far back",T.mode=Sy;break e}if(L=0,S=u,h===0){if(L+=l-w,w<y){y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}}else if(h<w){if(L+=l+h-w,w-=h,w<y){y-=w;do D[s++]=u[L++];while(--w);if(L=0,h<y){w=h,y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}}}else if(L+=h-w,w<y){y-=w;do D[s++]=u[L++];while(--w);L=s-x,S=D}for(;y>2;)D[s++]=S[L++],D[s++]=S[L++],D[s++]=S[L++],y-=3;y&&(D[s++]=S[L++],y>1&&(D[s++]=S[L++]))}else{L=s-x;do D[s++]=D[L++],D[s++]=D[L++],D[s++]=D[L++],y-=3;while(y>2);y&&(D[s++]=D[L++],y>1&&(D[s++]=D[L++]))}}else if(w&64){i.msg="invalid distance code",T.mode=Sy;break e}else{b=p[(b&65535)+(d&(1<<w)-1)];continue i}break}}else if(w&64)if(w&32){T.mode=lve;break e}else{i.msg="invalid literal/length code",T.mode=Sy;break e}else{b=g[(b&65535)+(d&(1<<w)-1)];continue t}break}}while(t<n&&s<o);y=f>>3,t-=y,f-=y<<3,d&=(1<<f)-1,i.next_in=t,i.next_out=s,i.avail_in=t<n?5+(n-t):5-(t-n),i.avail_out=s<o?257+(o-s):257-(s-o),T.hold=d,T.bits=f};const Wg=15,h9=852,u9=592,d9=0,kA=1,f9=2,hve=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),uve=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dve=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fve=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),gve=(i,e,t,n,s,r,o,a)=>{const l=a.bits;let c=0,h=0,u=0,d=0,f=0,g=0,p=0,m=0,v=0,b=0,w,y,x,L,S,k=null,D;const T=new Uint16Array(Wg+1),N=new Uint16Array(Wg+1);let $=null,U,ee,he;for(c=0;c<=Wg;c++)T[c]=0;for(h=0;h<n;h++)T[e[t+h]]++;for(f=l,d=Wg;d>=1&&T[d]===0;d--);if(f>d&&(f=d),d===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,a.bits=1,0;for(u=1;u<d&&T[u]===0;u++);for(f<u&&(f=u),m=1,c=1;c<=Wg;c++)if(m<<=1,m-=T[c],m<0)return-1;if(m>0&&(i===d9||d!==1))return-1;for(N[1]=0,c=1;c<Wg;c++)N[c+1]=N[c]+T[c];for(h=0;h<n;h++)e[t+h]!==0&&(o[N[e[t+h]]++]=h);if(i===d9?(k=$=o,D=20):i===kA?(k=hve,$=uve,D=257):(k=dve,$=fve,D=0),b=0,h=0,c=u,S=r,g=f,p=0,x=-1,v=1<<f,L=v-1,i===kA&&v>h9||i===f9&&v>u9)return 1;for(;;){U=c-p,o[h]+1<D?(ee=0,he=o[h]):o[h]>=D?(ee=$[o[h]-D],he=k[o[h]-D]):(ee=32+64,he=0),w=1<<c-p,y=1<<g,u=y;do y-=w,s[S+(b>>p)+y]=U<<24|ee<<16|he|0;while(y!==0);for(w=1<<c-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,h++,--T[c]===0){if(c===d)break;c=e[t+o[h]]}if(c>f&&(b&L)!==x){for(p===0&&(p=f),S+=u,g=c-p,m=1<<g;g+p<d&&(m-=T[g+p],!(m<=0));)g++,m<<=1;if(v+=1<<g,i===kA&&v>h9||i===f9&&v>u9)return 1;x=b&L,s[x]=f<<24|g<<16|S-r|0}}return b!==0&&(s[S+b]=c-p<<24|64<<16|0),a.bits=f,0};var mb=gve;const pve=0,OK=1,PK=2,{Z_FINISH:g9,Z_BLOCK:mve,Z_TREES:xy,Z_OK:Lf,Z_STREAM_END:_ve,Z_NEED_DICT:bve,Z_STREAM_ERROR:ya,Z_DATA_ERROR:FK,Z_MEM_ERROR:BK,Z_BUF_ERROR:vve,Z_DEFLATED:p9}=XO,nL=16180,m9=16181,_9=16182,b9=16183,v9=16184,w9=16185,y9=16186,C9=16187,S9=16188,x9=16189,yx=16190,Jl=16191,LA=16192,D9=16193,AA=16194,k9=16195,L9=16196,A9=16197,E9=16198,Dy=16199,ky=16200,I9=16201,T9=16202,N9=16203,M9=16204,R9=16205,EA=16206,O9=16207,P9=16208,qi=16209,VK=16210,WK=16211,wve=852,yve=592,Cve=15,Sve=Cve,F9=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function xve(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const sg=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<nL||e.mode>WK?1:0},zK=i=>{if(sg(i))return ya;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=nL,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(wve),e.distcode=e.distdyn=new Int32Array(yve),e.sane=1,e.back=-1,Lf},HK=i=>{if(sg(i))return ya;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,zK(i)},UK=(i,e)=>{let t;if(sg(i))return ya;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ya:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,HK(i))},$K=(i,e)=>{if(!i)return ya;const t=new xve;i.state=t,t.strm=i,t.window=null,t.mode=nL;const n=UK(i,e);return n!==Lf&&(i.state=null),n},Dve=i=>$K(i,Sve);let B9=!0,IA,TA;const kve=i=>{if(B9){IA=new Int32Array(512),TA=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(mb(OK,i.lens,0,288,IA,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;mb(PK,i.lens,0,32,TA,0,i.work,{bits:5}),B9=!1}i.lencode=IA,i.lenbits=9,i.distcode=TA,i.distbits=5},jK=(i,e,t,n)=>{let s;const r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(t-n,t-n+s),r.wnext),n-=s,n?(r.window.set(e.subarray(t-n,t),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},Lve=(i,e)=>{let t,n,s,r,o,a,l,c,h,u,d,f,g,p,m=0,v,b,w,y,x,L,S,k;const D=new Uint8Array(4);let T,N;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sg(i)||!i.output||!i.input&&i.avail_in!==0)return ya;t=i.state,t.mode===Jl&&(t.mode=LA),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,u=a,d=l,k=Lf;e:for(;;)switch(t.mode){case nL:if(t.wrap===0){t.mode=LA;break}for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=c&255,D[1]=c>>>8&255,t.check=ja(t.check,D,2,0),c=0,h=0,t.mode=m9;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=qi;break}if((c&15)!==p9){i.msg="unknown compression method",t.mode=qi;break}if(c>>>=4,h-=4,S=(c&15)+8,t.wbits===0&&(t.wbits=S),S>15||S>t.wbits){i.msg="invalid window size",t.mode=qi;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=c&512?x9:Jl,c=0,h=0;break;case m9:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==p9){i.msg="unknown compression method",t.mode=qi;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=qi;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=ja(t.check,D,2,0)),c=0,h=0,t.mode=_9;case _9:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,t.check=ja(t.check,D,4,0)),c=0,h=0,t.mode=b9;case b9:for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=ja(t.check,D,2,0)),c=0,h=0,t.mode=v9;case v9:if(t.flags&1024){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(D[0]=c&255,D[1]=c>>>8&255,t.check=ja(t.check,D,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=w9;case w9:if(t.flags&1024&&(f=t.length,f>a&&(f=a),f&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+f),S)),t.flags&512&&t.wrap&4&&(t.check=ja(t.check,n,f,r)),a-=f,r+=f,t.length-=f),t.length))break e;t.length=0,t.mode=y9;case y9:if(t.flags&2048){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=ja(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=C9;case C9:if(t.flags&4096){if(a===0)break e;f=0;do S=n[r+f++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&f<a);if(t.flags&512&&t.wrap&4&&(t.check=ja(t.check,n,f,r)),a-=f,r+=f,S)break e}else t.head&&(t.head.comment=null);t.mode=S9;case S9:if(t.flags&512){for(;h<16;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&4&&c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=qi;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Jl;break;case x9:for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}i.adler=t.check=F9(c),c=0,h=0,t.mode=yx;case yx:if(t.havedict===0)return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,bve;i.adler=t.check=1,t.mode=Jl;case Jl:if(e===mve||e===xy)break e;case LA:if(t.last){c>>>=h&7,h-=h&7,t.mode=EA;break}for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=D9;break;case 1:if(kve(t),t.mode=Dy,e===xy){c>>>=2,h-=2;break e}break;case 2:t.mode=L9;break;case 3:i.msg="invalid block type",t.mode=qi}c>>>=2,h-=2;break;case D9:for(c>>>=h&7,h-=h&7;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=qi;break}if(t.length=c&65535,c=0,h=0,t.mode=AA,e===xy)break e;case AA:t.mode=k9;case k9:if(f=t.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;s.set(n.subarray(r,r+f),o),a-=f,r+=f,l-=f,o+=f,t.length-=f;break}t.mode=Jl;break;case L9:for(;h<14;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=qi;break}t.have=0,t.mode=A9;case A9:for(;t.have<t.ncode;){for(;h<3;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.lens[$[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},k=mb(pve,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid code lengths set",t.mode=qi;break}t.have=0,t.mode=E9;case E9:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(w<16)c>>>=v,h-=v,t.lens[t.have++]=w;else{if(w===16){for(N=v+2;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(c>>>=v,h-=v,t.have===0){i.msg="invalid bit length repeat",t.mode=qi;break}S=t.lens[t.have-1],f=3+(c&3),c>>>=2,h-=2}else if(w===17){for(N=v+3;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=3+(c&7),c>>>=3,h-=3}else{for(N=v+7;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=v,h-=v,S=0,f=11+(c&127),c>>>=7,h-=7}if(t.have+f>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=qi;break}for(;f--;)t.lens[t.have++]=S}}if(t.mode===qi)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=qi;break}if(t.lenbits=9,T={bits:t.lenbits},k=mb(OK,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,k){i.msg="invalid literal/lengths set",t.mode=qi;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},k=mb(PK,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,k){i.msg="invalid distances set",t.mode=qi;break}if(t.mode=Dy,e===xy)break e;case Dy:t.mode=ky;case ky:if(a>=6&&l>=258){i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,cve(i,d),o=i.next_out,s=i.output,l=i.avail_out,r=i.next_in,n=i.input,a=i.avail_in,c=t.hold,h=t.bits,t.mode===Jl&&(t.back=-1);break}for(t.back=0;m=t.lencode[c&(1<<t.lenbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(b&&!(b&240)){for(y=v,x=b,L=w;m=t.lencode[L+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,t.length=w,b===0){t.mode=R9;break}if(b&32){t.back=-1,t.mode=Jl;break}if(b&64){i.msg="invalid literal/length code",t.mode=qi;break}t.extra=b&15,t.mode=I9;case I9:if(t.extra){for(N=t.extra;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=T9;case T9:for(;m=t.distcode[c&(1<<t.distbits)-1],v=m>>>24,b=m>>>16&255,w=m&65535,!(v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(!(b&240)){for(y=v,x=b,L=w;m=t.distcode[L+((c&(1<<y+x)-1)>>y)],v=m>>>24,b=m>>>16&255,w=m&65535,!(y+v<=h);){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=v,h-=v,t.back+=v,b&64){i.msg="invalid distance code",t.mode=qi;break}t.offset=w,t.extra=b&15,t.mode=N9;case N9:if(t.extra){for(N=t.extra;h<N;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=qi;break}t.mode=M9;case M9:if(l===0)break e;if(f=d-l,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=qi;break}f>t.wnext?(f-=t.wnext,g=t.wsize-f):g=t.wnext-f,f>t.length&&(f=t.length),p=t.window}else p=s,g=o-t.offset,f=t.length;f>l&&(f=l),l-=f,t.length-=f;do s[o++]=p[g++];while(--f);t.length===0&&(t.mode=ky);break;case R9:if(l===0)break e;s[o++]=t.length,l--,t.mode=ky;break;case EA:if(t.wrap){for(;h<32;){if(a===0)break e;a--,c|=n[r++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ja(t.check,s,d,o-d):uN(t.check,s,d,o-d)),d=l,t.wrap&4&&(t.flags?c:F9(c))!==t.check){i.msg="incorrect data check",t.mode=qi;break}c=0,h=0}t.mode=O9;case O9:if(t.wrap&&t.flags){for(;h<32;){if(a===0)break e;a--,c+=n[r++]<<h,h+=8}if(t.wrap&4&&c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=qi;break}c=0,h=0}t.mode=P9;case P9:k=_ve;break e;case qi:k=FK;break e;case VK:return BK;case WK:default:return ya}return i.next_out=o,i.avail_out=l,i.next_in=r,i.avail_in=a,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<qi&&(t.mode<EA||e!==g9))&&jK(i,i.output,i.next_out,d-i.avail_out),u-=i.avail_in,d-=i.avail_out,i.total_in+=u,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?ja(t.check,s,d,i.next_out-d):uN(t.check,s,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Jl?128:0)+(t.mode===Dy||t.mode===AA?256:0),(u===0&&d===0||e===g9)&&k===Lf&&(k=vve),k},Ave=i=>{if(sg(i))return ya;let e=i.state;return e.window&&(e.window=null),i.state=null,Lf},Eve=(i,e)=>{if(sg(i))return ya;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Lf):ya},Ive=(i,e)=>{const t=e.length;let n,s,r;return sg(i)||(n=i.state,n.wrap!==0&&n.mode!==yx)?ya:n.mode===yx&&(s=1,s=uN(s,e,t,0),s!==n.check)?FK:(r=jK(i,e,t,t),r?(n.mode=VK,BK):(n.havedict=1,Lf))};var Tve=HK,Nve=UK,Mve=zK,Rve=Dve,Ove=$K,Pve=Lve,Fve=Ave,Bve=Eve,Vve=Ive,Wve="pako inflate (from Nodeca project)",pc={inflateReset:Tve,inflateReset2:Nve,inflateResetKeep:Mve,inflateInit:Rve,inflateInit2:Ove,inflate:Pve,inflateEnd:Fve,inflateGetHeader:Bve,inflateSetDictionary:Vve,inflateInfo:Wve};function zve(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Hve=zve;const qK=Object.prototype.toString,{Z_NO_FLUSH:Uve,Z_FINISH:$ve,Z_OK:Mv,Z_STREAM_END:NA,Z_NEED_DICT:MA,Z_STREAM_ERROR:jve,Z_DATA_ERROR:V9,Z_MEM_ERROR:qve}=XO;function Lw(i){this.options=MK.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ave,this.strm.avail_out=0;let t=pc.inflateInit2(this.strm,e.windowBits);if(t!==Mv)throw new Error(dN[t]);if(this.header=new Hve,pc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=fN.string2buf(e.dictionary):qK.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=pc.inflateSetDictionary(this.strm,e.dictionary),t!==Mv)))throw new Error(dN[t])}Lw.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?$ve:Uve,qK.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),r=pc.inflate(t,o),r===MA&&s&&(r=pc.inflateSetDictionary(t,s),r===Mv?r=pc.inflate(t,o):r===V9&&(r=MA));t.avail_in>0&&r===NA&&t.state.wrap>0&&i[t.next_in]!==0;)pc.inflateReset(t),r=pc.inflate(t,o);switch(r){case jve:case V9:case MA:case qve:return this.onEnd(r),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||r===NA))if(this.options.to==="string"){let l=fN.utf8border(t.output,t.next_out),c=t.next_out-l,h=fN.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===Mv&&a===0)){if(r===NA)return r=pc.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Lw.prototype.onData=function(i){this.chunks.push(i)};Lw.prototype.onEnd=function(i){i===Mv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=MK.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function JO(i,e){const t=new Lw(e);if(t.push(i),t.err)throw t.msg||dN[t.err];return t.result}function Gve(i,e){return e=e||{},e.raw=!0,JO(i,e)}var Kve=Lw,Zve=JO,Yve=Gve,Qve=JO,Xve=XO,Jve={Inflate:Kve,inflate:Zve,inflateRaw:Yve,ungzip:Qve,constants:Xve};const{Inflate:Nze,inflate:Mze,inflateRaw:e1e,ungzip:Rze}=Jve;var t1e=e1e;function i1e(i){return t1e(i.subarray(2))}class n1e extends Error{constructor(e){super(e),this.code="ERR_ABORTED"}}function s1e(i){i.sort((s,r)=>Number(s.offset)-Number(r.offset));const e=[];let t,n;for(const s of i)t&&n&&Number(s.offset)-n<=2e3?(t.length=BigInt(Number(t.length)+Number(s.length)-n+Number(s.offset)),t.blocks.push(s)):e.push(t={blocks:[s],length:s.length,offset:s.offset}),n=Number(t.offset)+Number(t.length);return e}function Ly(i){if(i&&i.aborted)if(typeof DOMException>"u"){const e=new n1e("aborted");throw e.code="ERR_ABORTED",e}else throw new DOMException("aborted","AbortError")}const r1e=1,o1e=2,a1e=3;function RA(i,e,t,n){return i<n&&e>=t}function l1e(i){const e=i?"big":"little",t=new ai().endianess(e).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new ai().endianess(e).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new ai().endianess(e).array("blocksToFetch",{length:"cnt",type:new ai().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new ai().array("recurOffsets",{length:"cnt",type:new ai().endianess(e).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),s=new ai().endianess(e).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new ai().endianess(e).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[a1e]:new ai().array("items",{length:"itemCount",type:new ai().floatle("score")}),[o1e]:new ai().array("items",{length:"itemCount",type:new ai().endianess(e).int32("start").floatle("score")}),[r1e]:new ai().array("items",{length:"itemCount",type:new ai().endianess(e).int32("start").int32("end").floatle("score")})}}),bigBedParser:s,summaryParser:t,leafParser:n}}class GK{constructor(e,t,n,s,r,o){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=n,this.isBigEndian=s,this.isCompressed=r,this.blockType=o,this.featureCache=new QO({cache:new IK({maxSize:1e3}),fill:async(l,c)=>{const h=Number(l.length),u=Number(l.offset),{buffer:d}=await this.bbi.read(zr.Buffer.alloc(h),0,h,u,{signal:c});return d}}),!(n>=0))throw new Error("invalid cirTreeOffset!");const a=l1e(s);this.leafParser=a.leafParser,this.bigBedParser=a.bigBedParser}async readWigData(e,t,n,s,r){try{const{refsByName:o,bbi:a,cirTreeOffset:l,isBigEndian:c}=this,h=o[e];h===void 0&&s.complete();const u={chrId:h,start:t,end:n};this.cirTreePromise||(this.cirTreePromise=a.read(zr.Buffer.alloc(48),0,48,Number(l),r));const{buffer:d}=await this.cirTreePromise,f=c?d.readUInt32BE(4):d.readUInt32LE(4);let g=[],p=0;const m=(y,x,L)=>{try{const S=y.subarray(x),k=this.leafParser.parse(S);if(k.blocksToFetch&&(g=g.concat(k.blocksToFetch.filter(D=>v(D)).map(D=>({offset:D.blockOffset,length:D.blockSize})))),k.recurOffsets){const D=k.recurOffsets.filter(T=>v(T)).map(T=>Number(T.blockOffset));D.length>0&&w(D,L+1)}}catch(S){s.error(S)}},v=y=>{const{startChrom:x,startBase:L,endChrom:S,endBase:k}=y;return(x<h||x===h&&L<=n)&&(S>h||S===h&&k>=t)},b=async(y,x,L)=>{try{const S=x.max()-x.min(),k=x.min(),D=await this.featureCache.get(`${S}_${k}`,{length:S,offset:k},r==null?void 0:r.signal);for(const T of y)x.contains(T)&&(m(D,T-k,L),p-=1,p===0&&this.readFeatures(s,g,{...r,request:u}))}catch(S){s.error(S)}},w=(y,x)=>{try{p+=y.length;const L=4+Number(f)*32;let S=new Mh(y[0],y[0]+L);for(let k=1;k<y.length;k+=1){const D=new Mh(y[k],y[k]+L);S=S.union(D)}S.getRanges().map(k=>b(y,k,x))}catch(L){s.error(L)}};return w([Number(l)+48],1)}catch(o){s.error(o)}}parseSummaryBlock(e,t,n){const s=[];let r=t;const o=new DataView(e.buffer,e.byteOffset,e.length);for(;r<e.byteLength;){const a=o.getUint32(r,!0);r+=4;const l=o.getUint32(r,!0);r+=4;const c=o.getUint32(r,!0);r+=4;const h=o.getUint32(r,!0);r+=4;const u=o.getFloat32(r,!0);r+=4;const d=o.getFloat32(r,!0);r+=4;const f=o.getFloat32(r,!0);r+=4,r+=4,(!n||a===n.chrId&&RA(l,c,n.start,n.end))&&s.push({start:l,end:c,maxScore:d,minScore:u,summary:!0,score:f/(h||1)})}return s}parseBigBedBlock(e,t,n,s){const r=[];let o=t;for(;o<e.byteLength;){const a=this.bigBedParser.parse(e.subarray(o));r.push({...a,uniqueId:`bb-${n+o}`}),o+=a.offset}return s?r.filter(a=>RA(a.start,a.end,s.start,s.end)):r}parseBigWigBlock(e,t,n){const s=e.subarray(t),r=new DataView(s.buffer,s.byteOffset,s.length);let o=0;o+=4;const a=r.getInt32(o,!0);o+=8;const l=r.getUint32(o,!0);o+=4;const c=r.getUint32(o,!0);o+=4;const h=r.getUint8(o);o+=2;const u=r.getUint16(o,!0);o+=2;const d=new Array(u);switch(h){case 1:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getInt32(o,!0);o+=4;const m=r.getFloat32(o,!0);o+=4,d[f]={start:g,end:p,score:m}}break}case 2:{for(let f=0;f<u;f++){const g=r.getInt32(o,!0);o+=4;const p=r.getFloat32(o,!0);o+=4,d[f]={score:p,start:g,end:g+c}}break}case 3:{for(let f=0;f<u;f++){const g=r.getFloat32(o,!0);o+=4;const p=a+f*l;d[f]={score:g,start:p,end:p+c}}break}}return n?d.filter(f=>RA(f.start,f.end,n.start,n.end)):d}async readFeatures(e,t,n={}){try{const{blockType:s,isCompressed:r}=this,{signal:o,request:a}=n,l=s1e(t);Ly(o),await Promise.all(l.map(async c=>{Ly(o);const{length:h,offset:u}=c,d=await this.featureCache.get(`${h}_${u}`,c,o);for(const f of c.blocks){Ly(o);let g=Number(f.offset)-Number(c.offset),p=d;switch(r&&(p=i1e(d.subarray(g)),g=0),Ly(o),s){case"summary":{e.next(this.parseSummaryBlock(p,g,a));break}case"bigwig":{e.next(this.parseBigWigBlock(p,g,a));break}case"bigbed":{e.next(this.parseBigBedBlock(p,g,Number(f.offset)*(1<<8),a));break}default:console.warn(`Don't know what to do with ${s}`)}}})),e.complete()}catch(s){e.error(s)}}}var gN=function(i,e){return gN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},gN(i,e)};function e5(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gN(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function c1e(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}function KK(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(h){c=[6,h],s=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Rv(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pN(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return r}function mN(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function Wp(i){return this instanceof Wp?(this.v=i,this):new Wp(i)}function h1e(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(d){n[d]&&(s[d]=function(f){return new Promise(function(g,p){r.push([d,f,g,p])>1||a(d,f)})})}function a(d,f){try{l(n[d](f))}catch(g){u(r[0][3],g)}}function l(d){d.value instanceof Wp?Promise.resolve(d.value.v).then(c,h):u(r[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function u(d,f){d(f),r.shift(),r.length&&a(r[0][0],r[0][1])}}function u1e(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Rv=="function"?Rv(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(o){return new Promise(function(a,l){o=i[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}function On(i){return typeof i=="function"}function ZK(i){var e=function(n){Error.call(n),n.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var OA=ZK(function(i){return function(e){i(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function W9(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var t5=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,n,s,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Rv(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(On(h))try{h()}catch(p){r=p instanceof OA?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=Rv(u),f=d.next();!f.done;f=d.next()){var g=f.value;try{z9(g)}catch(p){r=r??[],p instanceof OA?r=mN(mN([],pN(r)),pN(p.errors)):r.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}}if(r)throw new OA(r)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)z9(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&W9(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&W9(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}();t5.EMPTY;function YK(i){return i instanceof t5||i&&"closed"in i&&On(i.remove)&&On(i.add)&&On(i.unsubscribe)}function z9(i){On(i)?i():i.unsubscribe()}var QK={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},d1e={setTimeout:function(i,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,mN([i,e],pN(t)))},clearTimeout:function(i){return clearTimeout(i)},delegate:void 0};function XK(i){d1e.setTimeout(function(){throw i})}function H9(){}function f1e(i){i()}var i5=function(i){e5(e,i);function e(t){var n=i.call(this)||this;return n.isStopped=!1,t?(n.destination=t,YK(t)&&t.add(n)):n.destination=_1e,n}return e.create=function(t,n,s){return new Cx(t,n,s)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(t5),g1e=Function.prototype.bind;function PA(i,e){return g1e.call(i,e)}var p1e=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Ay(n)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Ay(n)}else Ay(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ay(t)}},i}(),Cx=function(i){e5(e,i);function e(t,n,s){var r=i.call(this)||this,o;if(On(t)||!t)o={next:t??void 0,error:n??void 0,complete:s??void 0};else{var a;r&&QK.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&PA(t.next,a),error:t.error&&PA(t.error,a),complete:t.complete&&PA(t.complete,a)}):o=t}return r.destination=new p1e(o),r}return e}(i5);function Ay(i){XK(i)}function m1e(i){throw i}var _1e={closed:!0,next:H9,error:m1e,complete:H9},n5=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function JK(i){return i}function b1e(i){return i.length===0?JK:i.length===1?i[0]:function(e){return i.reduce(function(t,n){return n(t)},e)}}var Vo=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,n){var s=this,r=w1e(e)?e:new Cx(e,t,n);return f1e(function(){var o=s,a=o.operator,l=o.source;r.add(a?a.call(r,l):l?s._subscribe(r):s._trySubscribe(r))}),r},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var n=this;return t=U9(t),new t(function(s,r){var o=new Cx({next:function(a){try{e(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});n.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[n5]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b1e(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=U9(e),new e(function(n,s){var r;t.subscribe(function(o){return r=o},function(o){return s(o)},function(){return n(r)})})},i.create=function(e){return new i(e)},i}();function U9(i){var e;return(e=i??QK.Promise)!==null&&e!==void 0?e:Promise}function v1e(i){return i&&On(i.next)&&On(i.error)&&On(i.complete)}function w1e(i){return i&&i instanceof i5||v1e(i)&&YK(i)}function y1e(i){return On(i==null?void 0:i.lift)}function k0(i){return function(e){if(y1e(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ov(i,e,t,n,s){return new C1e(i,e,t,n,s)}var C1e=function(i){e5(e,i);function e(t,n,s,r,o,a){var l=i.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(h){t.error(h)}}:i.prototype._next,l._error=r?function(c){try{r(c)}catch(h){t.error(h)}finally{this.unsubscribe()}}:i.prototype._error,l._complete=s?function(){try{s()}catch(c){t.error(c)}finally{this.unsubscribe()}}:i.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;i.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(i5),S1e=new Vo(function(i){return i.complete()});function x1e(i){return i&&On(i.schedule)}function eZ(i){return i[i.length-1]}function D1e(i){return x1e(eZ(i))?i.pop():void 0}function k1e(i,e){return typeof eZ(i)=="number"?i.pop():e}var tZ=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function iZ(i){return On(i==null?void 0:i.then)}function nZ(i){return On(i[n5])}function sZ(i){return Symbol.asyncIterator&&On(i==null?void 0:i[Symbol.asyncIterator])}function rZ(i){return new TypeError("You provided "+(i!==null&&typeof i=="object"?"an invalid object":"'"+i+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function L1e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oZ=L1e();function aZ(i){return On(i==null?void 0:i[oZ])}function lZ(i){return h1e(this,arguments,function(){var e,t,n,s;return KK(this,function(r){switch(r.label){case 0:e=i.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,Wp(e.read())];case 3:return t=r.sent(),n=t.value,s=t.done,s?[4,Wp(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,Wp(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function cZ(i){return On(i==null?void 0:i.getReader)}function L0(i){if(i instanceof Vo)return i;if(i!=null){if(nZ(i))return A1e(i);if(tZ(i))return E1e(i);if(iZ(i))return I1e(i);if(sZ(i))return hZ(i);if(aZ(i))return T1e(i);if(cZ(i))return N1e(i)}throw rZ(i)}function A1e(i){return new Vo(function(e){var t=i[n5]();if(On(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function E1e(i){return new Vo(function(e){for(var t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function I1e(i){return new Vo(function(e){i.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,XK)})}function T1e(i){return new Vo(function(e){var t,n;try{for(var s=Rv(i),r=s.next();!r.done;r=s.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}e.complete()})}function hZ(i){return new Vo(function(e){M1e(i,e).catch(function(t){return e.error(t)})})}function N1e(i){return hZ(lZ(i))}function M1e(i,e){var t,n,s,r;return c1e(this,void 0,void 0,function(){var o,a;return KK(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),t=u1e(i),l.label=1;case 1:return[4,t.next()];case 2:if(n=l.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),s={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(r=t.return)?[4,r.call(t)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Qh(i,e,t,n,s){n===void 0&&(n=0),s===void 0&&(s=!1);var r=e.schedule(function(){t(),s?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(r),!s)return r}function uZ(i,e){return e===void 0&&(e=0),k0(function(t,n){t.subscribe(Ov(n,function(s){return Qh(n,i,function(){return n.next(s)},e)},function(){return Qh(n,i,function(){return n.complete()},e)},function(s){return Qh(n,i,function(){return n.error(s)},e)}))})}function dZ(i,e){return e===void 0&&(e=0),k0(function(t,n){n.add(i.schedule(function(){return t.subscribe(n)},e))})}function R1e(i,e){return L0(i).pipe(dZ(e),uZ(e))}function O1e(i,e){return L0(i).pipe(dZ(e),uZ(e))}function P1e(i,e){return new Vo(function(t){var n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function F1e(i,e){return new Vo(function(t){var n;return Qh(t,e,function(){n=i[oZ](),Qh(t,e,function(){var s,r,o;try{s=n.next(),r=s.value,o=s.done}catch(a){t.error(a);return}o?t.complete():t.next(r)},0,!0)}),function(){return On(n==null?void 0:n.return)&&n.return()}})}function fZ(i,e){if(!i)throw new Error("Iterable cannot be null");return new Vo(function(t){Qh(t,e,function(){var n=i[Symbol.asyncIterator]();Qh(t,e,function(){n.next().then(function(s){s.done?t.complete():t.next(s.value)})},0,!0)})})}function B1e(i,e){return fZ(lZ(i),e)}function V1e(i,e){if(i!=null){if(nZ(i))return R1e(i,e);if(tZ(i))return P1e(i,e);if(iZ(i))return O1e(i,e);if(sZ(i))return fZ(i,e);if(aZ(i))return F1e(i,e);if(cZ(i))return B1e(i,e)}throw rZ(i)}function W1e(i,e){return e?V1e(i,e):L0(i)}var z1e=ZK(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}});function gZ(i,e){var t=typeof e=="object";return new Promise(function(n,s){var r=new Cx({next:function(o){n(o),r.unsubscribe()},error:s,complete:function(){t?n(e.defaultValue):s(new z1e)}});i.subscribe(r)})}function pZ(i,e){return k0(function(t,n){var s=0;t.subscribe(Ov(n,function(r){n.next(i.call(e,r,s++))}))})}function H1e(i,e,t,n,s,r,o,a){var l=[],c=0,h=0,u=!1,d=function(){u&&!l.length&&!c&&e.complete()},f=function(p){return c<n?g(p):l.push(p)},g=function(p){r&&e.next(p),c++;var m=!1;L0(t(p,h++)).subscribe(Ov(e,function(v){s==null||s(v),r?f(v):e.next(v)},function(){m=!0},void 0,function(){if(m)try{c--;for(var v=function(){var b=l.shift();o?Qh(e,o,function(){return g(b)}):g(b)};l.length&&c<n;)v();d()}catch(b){e.error(b)}}))};return i.subscribe(Ov(e,f,function(){u=!0,d()})),function(){a==null||a()}}function mZ(i,e,t){return t===void 0&&(t=1/0),On(e)?mZ(function(n,s){return pZ(function(r,o){return e(n,r,s,o)})(L0(i(n,s)))},t):(typeof e=="number"&&(t=e),k0(function(n,s){return H1e(n,s,i,t)}))}function U1e(i){return i===void 0&&(i=1/0),mZ(JK,i)}function $1e(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=D1e(i),n=k1e(i,1/0),s=i;return s.length?s.length===1?L0(s[0]):U1e(n)(W1e(s,t)):S1e}function j1e(i,e,t,n,s){return function(r,o){var a=t,l=e,c=0;r.subscribe(Ov(o,function(h){var u=c++;l=a?i(l,h,u):(a=!0,h),n&&o.next(l)},s&&function(){a&&o.next(l),o.complete()}))}}function _Z(i,e){return k0(j1e(i,e,arguments.length>=2,!1,!0))}var q1e=function(i,e){return i.push(e),i};function G1e(){return k0(function(i,e){_Z(q1e,[])(i).subscribe(e)})}const $9=-2003829722,FA=-2021002517;function K1e(i){return new TextDecoder().decode(i)}function j9(i){const e=i?"big":"little",t=new ai().endianess(e).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new ai().endianess(e).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new ai().endianess(e).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),s=new ai().endianess(e).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),r=new ai().endianess(e).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:s,totalSummaryParser:n,headerParser:t,isLeafNode:r}}class bZ{getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch(t=>{throw this.headerP=void 0,t})),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:n=o=>o,path:s,url:r}=e;if(this.renameRefSeqs=n,t)this.bbi=t;else if(r)this.bbi=new Tc(r);else if(s)this.bbi=new zh(s);else throw new Error("no file given")}async _getHeader(e){const t=await this._getMainHeader(e),n=await this._readChromTree(t,e);return{...t,...n}}async _getMainHeader(e,t=2e3){const{buffer:n}=await this.bbi.read(zr.Buffer.alloc(t),0,t,0,e),s=this._isBigEndian(n),r=j9(s),o=r.headerParser.parse(n),{magic:a,asOffset:l,totalSummaryOffset:c}=o;if(o.fileType=a===FA?"bigbed":"bigwig",l>t||c>t)return this._getMainHeader(e,t*2);if(l){const h=Number(o.asOffset);o.autoSql=K1e(n.subarray(h,n.indexOf(0,h)))}if(o.totalSummaryOffset>t)return this._getMainHeader(e,t*2);if(o.totalSummaryOffset){const h=n.subarray(Number(o.totalSummaryOffset)),u=r.totalSummaryParser.parse(h);o.totalSummary={...u,basesCovered:Number(u.basesCovered)}}return{...o,isBigEndian:s}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===$9||t===FA)return!1;if(t=e.readInt32BE(0),t===$9||t===FA)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(e,t){const n=e.isBigEndian,s=n?"big":"little",r=[],o={};let a=Number(e.unzoomedDataOffset);const l=Number(e.chromTreeOffset);for(;a%4!==0;)a+=1;const c=a-l,{buffer:h}=await this.bbi.read(zr.Buffer.alloc(c),0,c,Number(l),t),u=j9(n),{keySize:d}=u.chromTreeParser.parse(h),f=new ai().endianess(s).string("key",{stripNull:!0,length:d}).uint32("refId").uint32("refSize").saveOffset("offset"),g=new ai().endianess(s).skip(d).uint64("childOffset").saveOffset("offset"),p=32,m=async v=>{let b=v;if(b>=h.length)throw new Error("reading beyond end of buffer");const w=u.isLeafNode.parse(h.subarray(b)),{isLeafNode:y,cnt:x}=w;if(b+=w.offset,y)for(let L=0;L<x;L+=1){const S=f.parse(h.subarray(b));b+=S.offset;const{key:k,refId:D,refSize:T}=S,N={name:k,id:D,length:T};o[this.renameRefSeqs(k)]=D,r[D]=N}else{const L=[];for(let S=0;S<x;S+=1){const k=g.parse(h.subarray(b)),{childOffset:D}=k;b+=k.offset,L.push(m(Number(D)-Number(l)))}await Promise.all(L)}};return await m(p),{refsByName:o,refsByNumber:r}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:n,uncompressBufSize:s,isBigEndian:r,fileType:o}=await this.getHeader(e);return new GK(this.bbi,n,t,r,s>0,o)}async getFeatureStream(e,t,n,s){await this.getHeader(s);const r=this.renameRefSeqs(e);let o;const{basesPerSpan:a,scale:l}=s||{};return a?o=await this.getView(1/a,s):l?o=await this.getView(l,s):o=await this.getView(1,s),new Vo(c=>{o.readWigData(r,t,n,c,s)})}async getFeatures(e,t,n,s){const r=await this.getFeatureStream(e,t,n,s);return(await gZ(r.pipe(G1e()))).flat()}}class Z1e extends bZ{async getView(e,t){const{zoomLevels:n,refsByName:s,fileSize:r,isBigEndian:o,uncompressBufSize:a}=await this.getHeader(t),l=1/e;let c=n.length;r||(c-=1);for(let h=c;h>=0;h-=1){const u=n[h];if(u&&u.reductionLevel<=2*l){const d=Number(u.indexOffset);return new GK(this.bbi,s,d,o,a>0,"summary")}}return this.getUnzoomedView(t)}}function Y1e(i){return i.filter(e=>!!e)}class Q1e extends bZ{constructor(){super(...arguments),this.readIndicesCache=new QO({cache:new IK({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})})}readIndices(e={}){const{signal:t,...n}=e;return this.readIndicesCache.get(JSON.stringify(n),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t,isBigEndian:n}=await this.getHeader(e),{buffer:s}=await this.bbi.read(zr.Buffer.alloc(64),0,64,Number(t)),r=n?"big":"little",o=new ai().endianess(r).uint16("size").uint16("count").uint64("offset").parse(s),{count:a,offset:l}=o;if(a===0)return[];const c=20,h=c*a,{buffer:u}=await this.bbi.read(zr.Buffer.alloc(h),0,h,Number(l)),d=new ai().endianess(r).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),f=[];for(let g=0;g<a;g+=1)f.push(d.parse(u.subarray(g*c)));return f}async searchExtraIndexBlocks(e,t={}){const{isBigEndian:n}=await this.getHeader(t),s=await this.readIndices(t);if(s.length===0)return[];const r=s.map(async o=>{const{offset:a,field:l}=o,{buffer:c}=await this.bbi.read(zr.Buffer.alloc(32),0,32,Number(a),t),h=n?"big":"little",u=new ai().endianess(h).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:d,keySize:f,valSize:g}=u.parse(c),p=new ai().endianess(h).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:new ai().array("leafkeys",{length:"cnt",type:new ai().endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset")}),1:new ai().array("keys",{length:"cnt",type:new ai().endianess(h).string("key",{length:f,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),m=async b=>{const w=Number(b),y=4+d*(f+g),{buffer:x}=await this.bbi.read(zr.Buffer.alloc(y),0,y,w,t),L=p.parse(x);if(L.leafkeys){let S;for(let k=0;k<L.leafkeys.length;k+=1){const{key:D}=L.leafkeys[k];if(e.localeCompare(D)<0&&S)return m(S);S=L.leafkeys[k].offset}return m(S)}for(let S=0;S<L.keys.length;S+=1)if(L.keys[S].key===e)return{...L.keys[S],field:l}},v=32;return m(Number(a)+v)});return Y1e(await Promise.all(r))}async searchExtraIndex(e,t={}){const n=await this.searchExtraIndexBlocks(e,t);if(n.length===0)return[];const s=await this.getUnzoomedView(t),r=n.map(o=>new Vo(a=>{s.readFeatures(a,[o],t)}).pipe(_Z((a,l)=>a.concat(l)),pZ(a=>{for(const l of a)l.field=o.field;return a})));return(await gZ($1e(...r))).filter(o=>{var a;return((a=o.rest)===null||a===void 0?void 0:a.split("	")[(o.field||0)-3])===e})}}function s5(i,e,t=!0){let n,s=r=>{};return function(...r){return new Promise((o,a)=>{const l=()=>{clearTimeout(n),s=c=>{},o(i(...r))};t&&s("debounced"),clearTimeout(n),s=a,n=window.setTimeout(l,e)})}}class X1e extends eL(w0){constructor(e,t){const n={pixelsPerBin:2,channel:"x",...e};if(super(t,n.channel),Il(this,"reductionLevels",[]),Il(this,"lastRequestId",0),this.params=n,!this.params.url)throw new Error("No URL provided for BigWigSource");this.bbi=new Z1e({filehandle:new Tc(tL(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=s5(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.reductionLevels=s.zoomLevels.map(r=>r.reductionLevel).reverse(),this.reductionLevels.push(1)})}async onDomainChanged(e){await this.headerPromise;const t=this.getAxisLength()||700,n=J1e(e,t,this.reductionLevels),s=Math.max(n*t,5e3),r=this.quantizeInterval(e,s);this.checkAndUpdateLastInterval(r)&&this.doDebouncedRequest(r,n)}async doRequest(e,t){const n=await this.getFeatures(e,.5/t/this.params.pixelsPerBin);n.requestId<this.lastRequestId||this.publishData(n.features)}async getFeatures(e,t){let n=++this.lastRequestId;const s=new AbortController,r=this.genome.continuousToDiscreteChromosomeIntervals(e),o=await Promise.all(r.map(a=>this.bbi.getFeatures(a.chrom,a.startPos,a.endPos,{scale:t,signal:s.signal}).then(l=>l.map(c=>({chrom:a.chrom,start:c.start,end:c.end,score:c.score})))));return{requestId:n,abort:()=>s.abort(),features:o.flat()}}}function J1e(i,e,t){const n=(i[1]-i[0])/e;return t.find(s=>s<n)??t.at(-1)}function ewe(i,e){function t(){this.constructor=i}t.prototype=e.prototype,i.prototype=new t}function km(i,e,t,n){this.message=i,this.expected=e,this.found=t,this.location=n,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,km)}ewe(km,Error);km.buildMessage=function(i,e){var t={literal:function(c){return'"'+s(c.text)+'"'},class:function(c){var h="",u;for(u=0;u<c.parts.length;u++)h+=c.parts[u]instanceof Array?r(c.parts[u][0])+"-"+r(c.parts[u][1]):r(c.parts[u]);return"["+(c.inverted?"^":"")+h+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function n(c){return c.charCodeAt(0).toString(16).toUpperCase()}function s(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function r(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function o(c){return t[c.type](c)}function a(c){var h=new Array(c.length),u,d;for(u=0;u<c.length;u++)h[u]=o(c[u]);if(h.sort(),h.length>0){for(u=1,d=1;u<h.length;u++)h[u-1]!==h[u]&&(h[d]=h[u],d++);h.length=d}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function l(c){return c?'"'+s(c)+'"':"end of input"}return"Expected "+a(i)+" but "+l(e)+" found."};function twe(i,e){e=e!==void 0?e:{};var t={},n={declaration:Ui},s=Ui,r="(",o=X("(",!1),a=")",l=X(")",!1),c=function(P,re,Ee,Ne){return{type:P,name:re,comment:Ee,fields:Ne}},h="simple",u=X("simple",!1),d="object",f=X("object",!1),g="table",p=X("table",!1),m="auto",v=X("auto",!1),b="primary",w=X("primary",!1),y="index",x=X("index",!1),L="unique",S=X("unique",!1),k=function(P,re){return re},D=function(P,re){return P.name&&re.unshift(P),re},T="#",N=X("#",!1),$=";",U=X(";",!1),ee=function(P,re,Ee){return{type:P,name:re,comment:Ee}},he="[",fe=X("[",!1),Ce="]",Se=X("]",!1),me=function(P,re,Ee,Ne){return{type:P,size:re,name:Ee,comment:Ne}},kt=function(P,re,Ee,Ne){return{type:P,vals:re,name:Ee,comment:Ne}},ze=",",Ge=X(",",!1),Lt=function(P,re){return re.unshift(P),re},st="int",Hi=X("int",!1),Cn="uint",Hn=X("uint",!1),Ti="short",J=X("short",!1),ye="ushort",ce=X("ushort",!1),W="byte",at=X("byte",!1),Me="ubyte",yt=X("ubyte",!1),mt="float",ii=X("float",!1),Un="char",ih=X("char",!1),io="string",or=X("string",!1),nn="lstring",Ws=X("lstring",!1),no="enum",_s=X("enum",!1),Va="double",C=X("double",!1),A="bigint",I=X("bigint",!1),j="set",Y=X("set",!1),ae=function(P,re){return P+" "+re},_e=/^[a-zA-Z_]/,vt=ie([["a","z"],["A","Z"],"_"],!1,!1),di=/^[a-zA-Z0-9_]/,Ot=ie([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Pt=function(P){return H()},fi=/^[^\n\r]/,Gl=ie([`
`,"\r"],!0,!1),Wa=function(P){return P.join("").replace(/^"/,"").replace(/"$/,"")},Lg=Fe("integer"),zs=/^[0-9]/,Gu=ie([["0","9"]],!1,!1),Ag=function(){return parseInt(H(),10)},Eg=Fe("whitespace"),rt=/^[ \t\n\r]/,za=ie([" ","	",`
`,"\r"],!1,!1),M=0,K=0,Q=[{line:1,column:1}],R=0,B=[],O=0,E;if("startRule"in e){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function H(){return i.substring(K,M)}function X(P,re){return{type:"literal",text:P,ignoreCase:re}}function ie(P,re,Ee){return{type:"class",parts:P,inverted:re,ignoreCase:Ee}}function we(){return{type:"end"}}function Fe(P){return{type:"other",description:P}}function He(P){var re=Q[P],Ee;if(re)return re;for(Ee=P-1;!Q[Ee];)Ee--;for(re=Q[Ee],re={line:re.line,column:re.column};Ee<P;)i.charCodeAt(Ee)===10?(re.line++,re.column=1):re.column++,Ee++;return Q[P]=re,re}function qe(P,re){var Ee=He(P),Ne=He(re);return{start:{offset:P,line:Ee.line,column:Ee.column},end:{offset:re,line:Ne.line,column:Ne.column}}}function ge(P){M<R||(M>R&&(R=M,B=[]),B.push(P))}function Re(P,re,Ee){return new km(km.buildMessage(P,re),P,re,Ee)}function Ui(){var P,re,Ee,Ne,Qe,xi,$i,so,nh,Zl,sh,Yl,rh,Ql;return P=M,re=Ht(),re!==t?(Ee=Ct(),Ee!==t?(Ne=Ht(),Ne!==t?(Qe=$n(),Qe!==t?(xi=Ht(),xi!==t?($i=sn(),$i!==t?(so=Ht(),so!==t?(i.charCodeAt(M)===40?(nh=r,M++):(nh=t,O===0&&ge(o)),nh!==t?(Zl=Ht(),Zl!==t?(sh=Ku(),sh!==t?(Yl=Ht(),Yl!==t?(i.charCodeAt(M)===41?(rh=a,M++):(rh=t,O===0&&ge(l)),rh!==t?(Ql=Ht(),Ql!==t?(K=P,re=c(Ee,Qe,$i,sh),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P}function Ct(){var P;return i.substr(M,6)===h?(P=h,M+=6):(P=t,O===0&&ge(u)),P===t&&(i.substr(M,6)===d?(P=d,M+=6):(P=t,O===0&&ge(f)),P===t&&(i.substr(M,5)===g?(P=g,M+=5):(P=t,O===0&&ge(p)))),P}function $n(){var P,re,Ee,Ne;return P=Ho(),P===t&&(P=M,re=Ho(),re!==t?(Ee=Kl(),Ee!==t?(re=[re,Ee],P=re):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Ho(),re!==t?(i.substr(M,4)===m?(Ee=m,M+=4):(Ee=t,O===0&&ge(v)),Ee!==t?(re=[re,Ee],P=re):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Ho(),re!==t?(Ee=Kl(),Ee!==t?(i.substr(M,4)===m?(Ne=m,M+=4):(Ne=t,O===0&&ge(v)),Ne!==t?(re=[re,Ee,Ne],P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)))),P}function Kl(){var P;return i.substr(M,7)===b?(P=b,M+=7):(P=t,O===0&&ge(w)),P===t&&(i.substr(M,5)===y?(P=y,M+=5):(P=t,O===0&&ge(x)),P===t&&(i.substr(M,6)===L?(P=L,M+=6):(P=t,O===0&&ge(S)))),P}function sn(){var P;return P=HF(),P===t&&(P=Ht()),P}function Ku(){var P,re,Ee,Ne,Qe,xi,$i;if(P=M,re=Yu(),re!==t)if(Ee=Ht(),Ee!==t){for(Ne=[],Qe=M,xi=Ht(),xi!==t?($i=Yu(),$i!==t?(K=Qe,xi=k(re,$i),Qe=xi):(M=Qe,Qe=t)):(M=Qe,Qe=t);Qe!==t;)Ne.push(Qe),Qe=M,xi=Ht(),xi!==t?($i=Yu(),$i!==t?(K=Qe,xi=k(re,$i),Qe=xi):(M=Qe,Qe=t)):(M=Qe,Qe=t);Ne!==t?(Qe=Ht(),Qe!==t?(K=P,re=D(re,Ne),P=re):(M=P,P=t)):(M=P,P=t)}else M=P,P=t;else M=P,P=t;return P}function ty(){var P;return i.charCodeAt(M)===35?(P=T,M++):(P=t,O===0&&ge(N)),P}function Zu(){var P,re,Ee,Ne,Qe;return P=M,re=Ht(),re!==t?(Ee=ty(),Ee!==t?(Ne=HF(),Ne!==t?(Qe=Ht(),Qe!==t?(re=[re,Ee,Ne,Qe],P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P}function Yu(){var P,re,Ee,Ne,Qe,xi,$i,so,nh,Zl,sh,Yl,rh,Ql;return P=M,re=Ig(),re!==t?(Ee=Ht(),Ee!==t?(Ne=Ho(),Ne!==t?(Qe=Ht(),Qe!==t?(i.charCodeAt(M)===59?(xi=$,M++):(xi=t,O===0&&ge(U)),xi!==t?($i=Ht(),$i!==t?(so=sn(),so!==t?(K=P,re=ee(re,Ne,so),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Ig(),re!==t?(Ee=Ht(),Ee!==t?(i.charCodeAt(M)===91?(Ne=he,M++):(Ne=t,O===0&&ge(fe)),Ne!==t?(Qe=Ht(),Qe!==t?(xi=zie(),xi!==t?($i=Ht(),$i!==t?(i.charCodeAt(M)===93?(so=Ce,M++):(so=t,O===0&&ge(Se)),so!==t?(nh=Ht(),nh!==t?(Zl=Ho(),Zl!==t?(sh=Ht(),sh!==t?(i.charCodeAt(M)===59?(Yl=$,M++):(Yl=t,O===0&&ge(U)),Yl!==t?(rh=Ht(),rh!==t?(Ql=sn(),Ql!==t?(K=P,re=me(re,xi,Zl,Ql),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=M,re=Ig(),re!==t?(Ee=Ht(),Ee!==t?(i.charCodeAt(M)===40?(Ne=r,M++):(Ne=t,O===0&&ge(o)),Ne!==t?(Qe=Ht(),Qe!==t?(xi=iy(),xi!==t?($i=Ht(),$i!==t?(i.charCodeAt(M)===41?(so=a,M++):(so=t,O===0&&ge(l)),so!==t?(nh=Ht(),nh!==t?(Zl=Ho(),Zl!==t?(sh=Ht(),sh!==t?(i.charCodeAt(M)===59?(Yl=$,M++):(Yl=t,O===0&&ge(U)),Yl!==t?(rh=Ht(),rh!==t?(Ql=sn(),Ql!==t?(K=P,re=kt(re,xi,Zl,Ql),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t)):(M=P,P=t),P===t&&(P=Zu()))),P}function iy(){var P,re,Ee,Ne,Qe,xi,$i;if(P=M,re=Ho(),re!==t){for(Ee=[],Ne=M,i.charCodeAt(M)===44?(Qe=ze,M++):(Qe=t,O===0&&ge(Ge)),Qe!==t?(xi=Ht(),xi!==t?($i=Ho(),$i!==t?(K=Ne,Qe=k(re,$i),Ne=Qe):(M=Ne,Ne=t)):(M=Ne,Ne=t)):(M=Ne,Ne=t);Ne!==t;)Ee.push(Ne),Ne=M,i.charCodeAt(M)===44?(Qe=ze,M++):(Qe=t,O===0&&ge(Ge)),Qe!==t?(xi=Ht(),xi!==t?($i=Ho(),$i!==t?(K=Ne,Qe=k(re,$i),Ne=Qe):(M=Ne,Ne=t)):(M=Ne,Ne=t)):(M=Ne,Ne=t);Ee!==t?(K=P,re=Lt(re,Ee),P=re):(M=P,P=t)}else M=P,P=t;return P}function Ig(){var P,re,Ee,Ne;return i.substr(M,3)===st?(P=st,M+=3):(P=t,O===0&&ge(Hi)),P===t&&(i.substr(M,4)===Cn?(P=Cn,M+=4):(P=t,O===0&&ge(Hn)),P===t&&(i.substr(M,5)===Ti?(P=Ti,M+=5):(P=t,O===0&&ge(J)),P===t&&(i.substr(M,6)===ye?(P=ye,M+=6):(P=t,O===0&&ge(ce)),P===t&&(i.substr(M,4)===W?(P=W,M+=4):(P=t,O===0&&ge(at)),P===t&&(i.substr(M,5)===Me?(P=Me,M+=5):(P=t,O===0&&ge(yt)),P===t&&(i.substr(M,5)===mt?(P=mt,M+=5):(P=t,O===0&&ge(ii)),P===t&&(i.substr(M,4)===Un?(P=Un,M+=4):(P=t,O===0&&ge(ih)),P===t&&(i.substr(M,6)===io?(P=io,M+=6):(P=t,O===0&&ge(or)),P===t&&(i.substr(M,7)===nn?(P=nn,M+=7):(P=t,O===0&&ge(Ws)),P===t&&(i.substr(M,4)===no?(P=no,M+=4):(P=t,O===0&&ge(_s)),P===t&&(i.substr(M,6)===Va?(P=Va,M+=6):(P=t,O===0&&ge(C)),P===t&&(i.substr(M,6)===A?(P=A,M+=6):(P=t,O===0&&ge(I)),P===t&&(i.substr(M,3)===j?(P=j,M+=3):(P=t,O===0&&ge(Y)),P===t&&(P=M,re=Ct(),re!==t?(Ee=Ht(),Ee!==t?(Ne=$n(),Ne!==t?(K=P,re=ae(re,Ne),P=re):(M=P,P=t)):(M=P,P=t)):(M=P,P=t))))))))))))))),P}function zie(){var P;return P=Hie(),P===t&&(P=Ho()),P}function Ho(){var P,re,Ee,Ne,Qe;if(P=M,re=M,_e.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge(vt)),Ee!==t){for(Ne=[],di.test(i.charAt(M))?(Qe=i.charAt(M),M++):(Qe=t,O===0&&ge(Ot));Qe!==t;)Ne.push(Qe),di.test(i.charAt(M))?(Qe=i.charAt(M),M++):(Qe=t,O===0&&ge(Ot));Ne!==t?(Ee=[Ee,Ne],re=Ee):(M=re,re=t)}else M=re,re=t;return re!==t&&(K=P,re=Pt()),P=re,P}function HF(){var P,re,Ee;for(P=M,re=[],fi.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge(Gl));Ee!==t;)re.push(Ee),fi.test(i.charAt(M))?(Ee=i.charAt(M),M++):(Ee=t,O===0&&ge(Gl));return re!==t&&(K=P,re=Wa(re)),P=re,P}function Hie(){var P,re,Ee,Ne;if(O++,P=M,re=Ht(),re!==t){if(Ee=[],zs.test(i.charAt(M))?(Ne=i.charAt(M),M++):(Ne=t,O===0&&ge(Gu)),Ne!==t)for(;Ne!==t;)Ee.push(Ne),zs.test(i.charAt(M))?(Ne=i.charAt(M),M++):(Ne=t,O===0&&ge(Gu));else Ee=t;Ee!==t?(K=P,re=Ag(),P=re):(M=P,P=t)}else M=P,P=t;return O--,P===t&&(re=t,O===0&&ge(Lg)),P}function Ht(){var P,re;for(O++,P=[],rt.test(i.charAt(M))?(re=i.charAt(M),M++):(re=t,O===0&&ge(za));re!==t;)P.push(re),rt.test(i.charAt(M))?(re=i.charAt(M),M++):(re=t,O===0&&ge(za));return O--,P===t&&(re=t,O===0&&ge(Eg)),P}if(E=s(),E!==t&&M===i.length)return E;throw E!==t&&M<i.length&&ge(we()),Re(B,R<i.length?i.charAt(R):null,R<i.length?qe(R,R+1):qe(R,R))}var vZ={SyntaxError:km,parse:twe};const iwe=y0(vZ),nwe=`table bigChain
"bigChain pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - for strand"
    uint tSize;         "size of target sequence"
    string qName;       "name of query sequence"
    uint qSize;         "size of query sequence"
    uint qStart;        "start of alignment on query sequence"
    uint qEnd;          "end of alignment on query sequence"
    uint chainScore;    "score from chain"
    )`,swe=`table bigGenePred
"bigGenePred gene models"
   (
   string chrom;       "Reference sequence chromosome or scaffold"
   uint   chromStart;  "Start position in chromosome"
   uint   chromEnd;    "End position in chromosome"
   string name;        "Name or ID of item, ideally both human readable and unique"
   uint score;         "Score (0-1000)"
   char[1] strand;     "+ or - for strand"
   uint thickStart;    "Start of where display should be thick (start codon)"
   uint thickEnd;      "End of where display should be thick (stop codon)"
   uint reserved;       "RGB value (use R,G,B string in input file)"
   int blockCount;     "Number of blocks"
   int[blockCount] blockSizes; "Comma separated list of block sizes"
   int[blockCount] chromStarts; "Start positions relative to chromStart"
   string name2;       "Alternative/human readable name"
   string cdsStartStat; "Status of CDS start annotation (none, unknown, incomplete, or complete)"
   string cdsEndStat;   "Status of CDS end annotation (none, unknown, incomplete, or complete)"
   int[blockCount] exonFrames; "Exon frame {0,1,2}, or -1 if no frame for exon"
   string type;        "Transcript type"
   string geneName;    "Primary identifier for gene"
   string geneName2;   "Alternative/human readable gene name"
   string geneType;    "Gene type"
   )`,rwe=`table interact
"interaction between two regions"
    (
    string chrom;        "Chromosome (or contig, scaffold, etc.). For interchromosomal, use 2 records"
    uint chromStart;     "Start position of lower region. For interchromosomal, set to chromStart of this region"
    uint chromEnd;       "End position of upper region. For interchromosomal, set to chromEnd of this region"
    string name;         "Name of item, for display.  Usually 'sourceName/targetName/exp' or empty"
    uint score;          "Score (0-1000)"
    double value;        "Strength of interaction or other data value. Typically basis for score"
    string exp;          "Experiment name (metadata for filtering). Use . if not applicable"
    string color;        "Item color.  Specified as r,g,b or hexadecimal #RRGGBB or html color name, as in //www.w3.org/TR/css3-color/#html4. Use 0 and spectrum setting to shade by score"
    string sourceChrom;  "Chromosome of source region (directional) or lower region. For non-directional interchromosomal, chrom of this region."
    uint sourceStart;    "Start position in chromosome of source/lower/this region"
    uint sourceEnd;      "End position in chromosome of source/lower/this region"
    string sourceName;   "Identifier of source/lower/this region"
    string sourceStrand; "Orientation of source/lower/this region: + or -.  Use . if not applicable"
    string targetChrom;  "Chromosome of target region (directional) or upper region. For non-directional interchromosomal, chrom of other region"
    uint targetStart;    "Start position in chromosome of target/upper/this region"
    uint targetEnd;      "End position in chromosome of target/upper/this region"
    string targetName;   "Identifier of target/upper/this region"
    string targetStrand; "Orientation of target/upper/this region: + or -.  Use . if not applicable"

    )`,owe=`table bigLink
"bigLink pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint qStart;        "start of alignment on query sequence"
    )`,awe=`table bedMaf
"Bed3 with MAF block"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    lstring mafBlock;   "MAF block"
    )`,lwe=`table bigNarrowPeak
"BED6+4 Peaks of signal enrichment based on pooled, normalized (interpreted) data."
(
    string chrom;        "Reference sequence chromosome or scaffold"
    uint   chromStart;   "Start position in chromosome"
    uint   chromEnd;     "End position in chromosome"
    string name;	 "Name given to a region (preferably unique). Use . if no name is assigned"
    uint   score;        "Indicates how dark the peak will be displayed in the browser (0-1000) "
    char[1]  strand;     "+ or - or . for unknown"
    float  signalValue;  "Measurement of average enrichment for the region"
    float  pValue;       "Statistical significance of signal value (-log10). Set to -1 if not used."
    float  qValue;       "Statistical significance with multiple-test correction applied (FDR -log10). Set to -1 if not used."
    int   peak;         "Point-source called for this peak; 0-based offset from chromStart. Set to -1 if no point-source called."
)`,cwe=`table bigPsl
"bigPsl pairwise alignment"
    (
    string chrom;       "Reference sequence chromosome or scaffold"
    uint   chromStart;  "Start position in chromosome"
    uint   chromEnd;    "End position in chromosome"
    string name;        "Name or ID of item, ideally both human readable and unique"
    uint score;         "Score (0-1000)"
    char[1] strand;     "+ or - indicates whether the query aligns to the + or - strand on the reference"
    uint thickStart;    "Start of where display should be thick (start codon)"
    uint thickEnd;      "End of where display should be thick (stop codon)"
    uint reserved;       "RGB value (use R,G,B string in input file)"
    int blockCount;     "Number of blocks"
    int[blockCount] blockSizes; "Comma separated list of block sizes"
    int[blockCount] chromStarts; "Start positions relative to chromStart"

    uint    oChromStart;"Start position in other chromosome"
    uint    oChromEnd;  "End position in other chromosome"
    char[1] oStrand;    "+ or -, - means that psl was reversed into BED-compatible coordinates"
    uint    oChromSize; "Size of other chromosome."
    int[blockCount] oChromStarts; "Start positions relative to oChromStart or from oChromStart+oChromSize depending on strand"

    lstring  oSequence;  "Sequence on other chrom (or empty)"
    string   oCDS;       "CDS in NCBI format"

    uint    chromSize;"Size of target chromosome"

    uint match;        "Number of bases matched."
    uint misMatch; " Number of bases that don't match "
    uint repMatch; " Number of bases that match but are part of repeats "
    uint nCount;   " Number of 'N' bases "
    uint seqType;    "0=empty, 1=nucleotide, 2=amino_acid"
    )`,hwe=`table defaultBedSchema
"BED12"
    (
    string chrom;      "The name of the chromosome (e.g. chr3, chrY, chr2_random) or scaffold (e.g. scaffold10671)."
    uint   chromStart; "The starting position of the feature in the chromosome or scaffold. The first base in a chromosome is numbered 0."
    uint   chromEnd;   "The ending position of the feature in the chromosome or scaffold. The chromEnd base is not included in the display of the feature. For example, the first 100 bases of a chromosome are defined as chromStart=0, chromEnd=100, and span the bases numbered 0-99."
    string   name;   "Defines the name of the BED line."
    float   score;   "Feature score, doesn't care about the 0-1000 limit as in bed"
    char   strand;   "Defines the strand. Either '.' (=no strand) or '+' or '-'"
    uint thickStart; "The starting position at which the feature is drawn thickly (for example, the start codon in gene displays). When there is no thick part, thickStart and thickEnd are usually set to the chromStart position."
    uint thickEnd; "The ending position at which the feature is drawn thickly (for example the stop codon in gene displays)."
    string itemRgb; "An RGB value of the form R,G,B (e.g. 255,0,0). "
    uint blockCount; " The number of blocks (exons) in the BED line."
    uint[blockCount] blockSizes; " A comma-separated list of the block sizes. The number of items in this list should correspond to blockCount."
    uint[blockCount] blockStarts; "A comma-separated list of block starts. All of the blockStart positions should be calculated relative to chromStart. The number of items in this list should correspond to blockCount."
    )`,uwe=`table mafFrames
"codon frame assignment for MAF components"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start range in chromosome"
    uint   chromEnd;   "End range in chromosome"
    string src;        "Name of sequence source in MAF"
    ubyte frame;       "frame (0,1,2) for first base(+) or last bast(-)"
    char[1] strand;    "+ or -"
    string name;       "Name of gene used to define frame"
    int    prevFramePos;  "target position of the previous base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    int    nextFramePos;  "target position of the next base (in transcription direction) that continues this frame, or -1 if none, or frame not contiguous"
    ubyte  isExonStart;  "does this start the CDS portion of an exon?"
    ubyte  isExonEnd;    "does this end the CDS portion of an exon?"
    )`,dwe=`table mafSummary
"Positions and scores for alignment blocks"
    (
    string chrom;      "Reference sequence chromosome or scaffold"
    uint   chromStart; "Start position in chromosome"
    uint   chromEnd;   "End position in chromosome"
    string src;        "Sequence name or database of alignment"
    float  score;      "Floating point score."
    char[1] leftStatus;  "Gap/break annotation for preceding block"
    char[1] rightStatus; "Gap/break annotation for following block"
    )`,fwe=Object.freeze(Object.defineProperty({__proto__:null,bigChain:nwe,bigGenePred:swe,bigInteract:rwe,bigLink:owe,bigMaf:awe,bigNarrowPeak:lwe,bigPsl:cwe,defaultBedSchema:hwe,mafFrames:uwe,mafSummary:dwe},Symbol.toStringTag,{value:"Module"})),BA=Object.fromEntries(Object.entries(fwe).map(([i,e])=>[i,vZ.parse(e.trim())]));function VA(i){const e=["uint","int","float","long"];return{...i,fields:i.fields.map(t=>({...t,isArray:t.size&&t.type!=="char",arrayIsNumeric:t.size&&e.includes(t.type),isNumeric:!t.size&&e.includes(t.type)}))}}const gwe={".":0,"-":-1,"+":1};function pwe(i){var e;return i.length>=12&&!Number.isNaN(parseInt(i[9],10))&&((e=i[10])===null||e===void 0?void 0:e.split(",").filter(t=>!!t).length)===parseInt(i[9],10)}class mwe{constructor(e={}){if(e.autoSql)this.autoSql=VA(iwe.parse(e.autoSql));else if(e.type){if(!BA[e.type])throw new Error("Type not found");this.autoSql=VA(BA[e.type])}else this.autoSql=VA(BA.defaultBedSchema),this.attemptDefaultBed=!0}parseLine(e,t={}){const{autoSql:n}=this,{uniqueId:s}=t,r=Array.isArray(e)?e:e.split("	");let o={};if(!this.attemptDefaultBed||this.attemptDefaultBed&&pwe(r))for(let a=0;a<n.fields.length;a++){const l=n.fields[a];let c=r[a];const{isNumeric:h,isArray:u,arrayIsNumeric:d,name:f}=l;if(c==null)break;if(c!=="."){if(h){const g=Number(c);c=Number.isNaN(g)?c:g}else u&&(c=c.split(","),c[c.length-1]===""&&c.pop(),d&&(c=c.map(g=>Number(g))));o[f]=c}}else{const a=["chrom","chromStart","chromEnd","name"];o=Object.fromEntries(r.map((l,c)=>[a[c]||"field"+c,l])),o.chromStart=+o.chromStart,o.chromEnd=+o.chromEnd,Number.isNaN(Number.parseFloat(o.field4))||(o.score=+o.field4,delete o.field4),(o.field5==="+"||o.field5==="-")&&(o.strand=o.field5,delete o.field5)}return s&&(o.uniqueId=s),o.strand=gwe[o.strand]||0,o.chrom=decodeURIComponent(o.chrom),o}}class _we extends eL(w0){constructor(e,t){const n={channel:"x",windowSize:1e6,...e};if(super(t,n.channel),Il(this,"lastRequestId",0),Il(this,"parser"),this.params=n,!this.params.url)throw new Error("No URL provided for BigBedSource");this.bbi=new Q1e({filehandle:new Tc(tL(this.params.url,this.view.getBaseUrl()))}),this.doDebouncedRequest=s5(this.doRequest.bind(this),200,!1),this.headerPromise=this.bbi.getHeader(),this.headerPromise.then(s=>{this.parser=new mwe({autoSql:s.autoSql})})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;const n=this.quantizeInterval(e,t);this.checkAndUpdateLastInterval(n)&&this.doDebouncedRequest(n)}async doRequest(e){const t=await this.getFeatures(e);t.requestId<this.lastRequestId||this.publishData(t.features)}async getFeatures(e){let t=++this.lastRequestId;const n=new AbortController,s=this.genome.continuousToDiscreteChromosomeIntervals(e),r=await Promise.all(s.map(o=>this.bbi.getFeatures(o.chrom,o.startPos,o.endPos,{signal:n.signal}).then(a=>a.map(l=>this.parser.parseLine(`${o.chrom}	${l.start}	${l.end}	${l.rest}`,{uniqueId:l.uniqueId})))));return{requestId:t,abort:()=>n.abort(),features:r.flat()}}}var bwe=Ei,Lo=null;try{Lo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ei(i,e,t){this.low=i|0,this.high=e|0,this.unsigned=!!t}Ei.prototype.__isLong__;Object.defineProperty(Ei.prototype,"__isLong__",{value:!0});function Ar(i){return(i&&i.__isLong__)===!0}Ei.isLong=Ar;var q9={},G9={};function rg(i,e){var t,n,s;return e?(i>>>=0,(s=0<=i&&i<256)&&(n=G9[i],n)?n:(t=Ii(i,(i|0)<0?-1:0,!0),s&&(G9[i]=t),t)):(i|=0,(s=-128<=i&&i<128)&&(n=q9[i],n)?n:(t=Ii(i,i<0?-1:0,!1),s&&(q9[i]=t),t))}Ei.fromInt=rg;function Ao(i,e){if(isNaN(i))return e?Md:Eo;if(e){if(i<0)return Md;if(i>=wZ)return SZ}else{if(i<=-Z9)return vr;if(i+1>=Z9)return CZ}return i<0?Ao(-i,e).neg():Ii(i%Lm|0,i/Lm|0,e)}Ei.fromNumber=Ao;function Ii(i,e,t){return new Ei(i,e,t)}Ei.fromBits=Ii;var Sx=Math.pow;function r5(i,e,t){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return Eo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return r5(i.substring(1),e,t).neg();for(var s=Ao(Sx(t,8)),r=Eo,o=0;o<i.length;o+=8){var a=Math.min(8,i.length-o),l=parseInt(i.substring(o,o+a),t);if(a<8){var c=Ao(Sx(t,a));r=r.mul(c).add(Ao(l))}else r=r.mul(s),r=r.add(Ao(l))}return r.unsigned=e,r}Ei.fromString=r5;function Ma(i,e){return typeof i=="number"?Ao(i,e):typeof i=="string"?r5(i,e):Ii(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}Ei.fromValue=Ma;var K9=1<<16,vwe=1<<24,Lm=K9*K9,wZ=Lm*Lm,Z9=wZ/2,Y9=rg(vwe),Eo=rg(0);Ei.ZERO=Eo;var Md=rg(0,!0);Ei.UZERO=Md;var bp=rg(1);Ei.ONE=bp;var yZ=rg(1,!0);Ei.UONE=yZ;var _N=rg(-1);Ei.NEG_ONE=_N;var CZ=Ii(-1,2147483647,!1);Ei.MAX_VALUE=CZ;var SZ=Ii(-1,-1,!0);Ei.MAX_UNSIGNED_VALUE=SZ;var vr=Ii(0,-2147483648,!1);Ei.MIN_VALUE=vr;var ke=Ei.prototype;ke.toInt=function(){return this.unsigned?this.low>>>0:this.low};ke.toNumber=function(){return this.unsigned?(this.high>>>0)*Lm+(this.low>>>0):this.high*Lm+(this.low>>>0)};ke.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(vr)){var e=Ao(i),t=this.div(e),n=t.mul(e).sub(this);return t.toString(i)+n.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=Ao(Sx(i,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=r.sub(a.mul(s)).toInt()>>>0,c=l.toString(i);if(r=a,r.isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}};ke.getHighBits=function(){return this.high};ke.getHighBitsUnsigned=function(){return this.high>>>0};ke.getLowBits=function(){return this.low};ke.getLowBitsUnsigned=function(){return this.low>>>0};ke.getNumBitsAbs=function(){if(this.isNegative())return this.eq(vr)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;e>0&&!(i&1<<e);e--);return this.high!=0?e+33:e+1};ke.isZero=function(){return this.high===0&&this.low===0};ke.eqz=ke.isZero;ke.isNegative=function(){return!this.unsigned&&this.high<0};ke.isPositive=function(){return this.unsigned||this.high>=0};ke.isOdd=function(){return(this.low&1)===1};ke.isEven=function(){return(this.low&1)===0};ke.equals=function(i){return Ar(i)||(i=Ma(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};ke.eq=ke.equals;ke.notEquals=function(i){return!this.eq(i)};ke.neq=ke.notEquals;ke.ne=ke.notEquals;ke.lessThan=function(i){return this.comp(i)<0};ke.lt=ke.lessThan;ke.lessThanOrEqual=function(i){return this.comp(i)<=0};ke.lte=ke.lessThanOrEqual;ke.le=ke.lessThanOrEqual;ke.greaterThan=function(i){return this.comp(i)>0};ke.gt=ke.greaterThan;ke.greaterThanOrEqual=function(i){return this.comp(i)>=0};ke.gte=ke.greaterThanOrEqual;ke.ge=ke.greaterThanOrEqual;ke.compare=function(i){if(Ar(i)||(i=Ma(i)),this.eq(i))return 0;var e=this.isNegative(),t=i.isNegative();return e&&!t?-1:!e&&t?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};ke.comp=ke.compare;ke.negate=function(){return!this.unsigned&&this.eq(vr)?vr:this.not().add(bp)};ke.neg=ke.negate;ke.add=function(i){Ar(i)||(i=Ma(i));var e=this.high>>>16,t=this.high&65535,n=this.low>>>16,s=this.low&65535,r=i.high>>>16,o=i.high&65535,a=i.low>>>16,l=i.low&65535,c=0,h=0,u=0,d=0;return d+=s+l,u+=d>>>16,d&=65535,u+=n+a,h+=u>>>16,u&=65535,h+=t+o,c+=h>>>16,h&=65535,c+=e+r,c&=65535,Ii(u<<16|d,c<<16|h,this.unsigned)};ke.subtract=function(i){return Ar(i)||(i=Ma(i)),this.add(i.neg())};ke.sub=ke.subtract;ke.multiply=function(i){if(this.isZero())return Eo;if(Ar(i)||(i=Ma(i)),Lo){var e=Lo.mul(this.low,this.high,i.low,i.high);return Ii(e,Lo.get_high(),this.unsigned)}if(i.isZero())return Eo;if(this.eq(vr))return i.isOdd()?vr:Eo;if(i.eq(vr))return this.isOdd()?vr:Eo;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(Y9)&&i.lt(Y9))return Ao(this.toNumber()*i.toNumber(),this.unsigned);var t=this.high>>>16,n=this.high&65535,s=this.low>>>16,r=this.low&65535,o=i.high>>>16,a=i.high&65535,l=i.low>>>16,c=i.low&65535,h=0,u=0,d=0,f=0;return f+=r*c,d+=f>>>16,f&=65535,d+=s*c,u+=d>>>16,d&=65535,d+=r*l,u+=d>>>16,d&=65535,u+=n*c,h+=u>>>16,u&=65535,u+=s*l,h+=u>>>16,u&=65535,u+=r*a,h+=u>>>16,u&=65535,h+=t*c+n*l+s*a+r*o,h&=65535,Ii(d<<16|f,h<<16|u,this.unsigned)};ke.mul=ke.multiply;ke.divide=function(i){if(Ar(i)||(i=Ma(i)),i.isZero())throw Error("division by zero");if(Lo){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var e=(this.unsigned?Lo.div_u:Lo.div_s)(this.low,this.high,i.low,i.high);return Ii(e,Lo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Md:Eo;var t,n,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Md;if(i.gt(this.shru(1)))return yZ;s=Md}else{if(this.eq(vr)){if(i.eq(bp)||i.eq(_N))return vr;if(i.eq(vr))return bp;var r=this.shr(1);return t=r.div(i).shl(1),t.eq(Eo)?i.isNegative()?bp:_N:(n=this.sub(i.mul(t)),s=t.add(n.div(i)),s)}else if(i.eq(vr))return this.unsigned?Md:Eo;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=Eo}for(n=this;n.gte(i);){t=Math.max(1,Math.floor(n.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),a=o<=48?1:Sx(2,o-48),l=Ao(t),c=l.mul(i);c.isNegative()||c.gt(n);)t-=a,l=Ao(t,this.unsigned),c=l.mul(i);l.isZero()&&(l=bp),s=s.add(l),n=n.sub(c)}return s};ke.div=ke.divide;ke.modulo=function(i){if(Ar(i)||(i=Ma(i)),Lo){var e=(this.unsigned?Lo.rem_u:Lo.rem_s)(this.low,this.high,i.low,i.high);return Ii(e,Lo.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};ke.mod=ke.modulo;ke.rem=ke.modulo;ke.not=function(){return Ii(~this.low,~this.high,this.unsigned)};ke.and=function(i){return Ar(i)||(i=Ma(i)),Ii(this.low&i.low,this.high&i.high,this.unsigned)};ke.or=function(i){return Ar(i)||(i=Ma(i)),Ii(this.low|i.low,this.high|i.high,this.unsigned)};ke.xor=function(i){return Ar(i)||(i=Ma(i)),Ii(this.low^i.low,this.high^i.high,this.unsigned)};ke.shiftLeft=function(i){return Ar(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Ii(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):Ii(0,this.low<<i-32,this.unsigned)};ke.shl=ke.shiftLeft;ke.shiftRight=function(i){return Ar(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?Ii(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):Ii(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};ke.shr=ke.shiftRight;ke.shiftRightUnsigned=function(i){if(Ar(i)&&(i=i.toInt()),i&=63,i===0)return this;var e=this.high;if(i<32){var t=this.low;return Ii(t>>>i|e<<32-i,e>>>i,this.unsigned)}else return i===32?Ii(e,0,this.unsigned):Ii(e>>>i-32,0,this.unsigned)};ke.shru=ke.shiftRightUnsigned;ke.shr_u=ke.shiftRightUnsigned;ke.toSigned=function(){return this.unsigned?Ii(this.low,this.high,!1):this};ke.toUnsigned=function(){return this.unsigned?this:Ii(this.low,this.high,!0)};ke.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};ke.toBytesLE=function(){var i=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};ke.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};Ei.fromBytes=function(i,e,t){return t?Ei.fromBytesLE(i,e):Ei.fromBytesBE(i,e)};Ei.fromBytesLE=function(i,e){return new Ei(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)};Ei.fromBytesBE=function(i,e){return new Ei(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};const xZ=y0(bwe);class DZ{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function zp(i,e=0,t=!1){if(t)throw new Error("big-endian virtual file offsets not implemented");return new DZ(i[e+7]*1099511627776+i[e+6]*4294967296+i[e+5]*16777216+i[e+4]*65536+i[e+3]*256+i[e+2],i[e+1]<<8|i[e])}class xx{constructor(e,t,n,s=void 0){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=s}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return this._fetchedSize!==void 0?this._fetchedSize:this.maxv.blockPosition+(1<<16)-this.minv.blockPosition}}class kZ{constructor({filehandle:e,renameRefSeq:t=n=>n}){this.filehandle=e,this.renameRefSeq=t}_findFirstData(e,t){const n=e.firstDataLine;n?e.firstDataLine=n.compareTo(t)>0?t:n:e.firstDataLine=t}async parse(e={}){return this.setupP||(this.setupP=this._parse(e).catch(t=>{throw this.setupP=void 0,t})),this.setupP}async hasRefSeq(e,t={}){return!!((await this.parse(t)).indices[e]||{}).binIndex}}function wwe(i){return new Promise(e=>setTimeout(e,i))}function LZ(i){if(i.greaterThan(Number.MAX_SAFE_INTEGER)||i.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return i.toNumber()}function AZ(i){if(i&&i.aborted){if(typeof DOMException<"u")throw new DOMException("aborted","AbortError");{const e=new Error("aborted");throw e.code="ERR_ABORTED",e}}}async function EZ(i){await Promise.resolve(),AZ(i)}function ywe(i,e){return e.minv.blockPosition-i.maxv.blockPosition<65e3&&e.maxv.blockPosition-i.minv.blockPosition<5e6}function Cwe(i={}){return"aborted"in i?{signal:i}:i}function IZ(i,e){const t=[];let n=null;return i.length===0?i:(i.sort((s,r)=>{const o=s.minv.blockPosition-r.minv.blockPosition;return o!==0?o:s.minv.dataPosition-r.minv.dataPosition}),i.forEach(s=>{(!e||s.maxv.compareTo(e)>0)&&(n===null?(t.push(s),n=s):ywe(n,s)?s.maxv.compareTo(n.maxv)>0&&(n.maxv=s.maxv):(t.push(s),n=s))}),t)}const Swe=21578050;function xwe(i,e){return i-i%e}function Dwe(i,e){return i-i%e+e}class l_ extends kZ{parsePseudoBin(e,t){return{lineCount:LZ(xZ.fromBytesLE(Array.prototype.slice.call(e,t+16,t+24),!0))}}async lineCount(e,t={}){const n=(await this.parse(t)).indices[e];if(!n)return-1;const s=n.stats||{};return s.lineCount===void 0?-1:s.lineCount}fetchBai(e={}){return this.baiP||(this.baiP=this.filehandle.readFile(e).catch(t=>{throw this.baiP=void 0,t})),this.baiP}async _parse(){const e={bai:!0,maxBlockSize:65536},t=await this.fetchBai();if(t.readUInt32LE(0)!==Swe)throw new Error("Not a BAI file");e.refCount=t.readInt32LE(4);const n=((1<<(5+1)*3)-1)/7;e.indices=new Array(e.refCount);let s=8;for(let r=0;r<e.refCount;r+=1){const o=t.readInt32LE(s);let a;s+=4;const l={};for(let u=0;u<o;u+=1){const d=t.readUInt32LE(s);if(s+=4,d===n+1)s+=4,a=this.parsePseudoBin(t,s),s+=32;else{if(d>n+1)throw new Error("bai index contains too many bins, please use CSI");{const f=t.readInt32LE(s);s+=4;const g=new Array(f);for(let p=0;p<f;p+=1){const m=zp(t,s),v=zp(t,s+8);s+=16,this._findFirstData(e,m),g[p]=new xx(m,v,d)}l[d]=g}}}const c=t.readInt32LE(s);s+=4;const h=new Array(c);for(let u=0;u<c;u+=1)h[u]=zp(t,s),s+=8,this._findFirstData(e,h[u]);e.indices[r]={binIndex:l,linearIndex:h,stats:a}}return e}async indexCov(e,t,n,s={}){const r=t!==void 0,o=(await this.parse(s)).indices[e];if(!o)return[];const{linearIndex:a=[],stats:l}=o;if(!a.length)return[];const c=n!==void 0?Dwe(n,16384):(a.length-1)*16384,h=t!==void 0?xwe(t,16384):0;let u;r?u=new Array((c-h)/16384):u=new Array(a.length-1);const d=a[a.length-1].blockPosition;if(c>(a.length-1)*16384)throw new Error("query outside of range of linear index");let f=a[h/16384].blockPosition;for(let g=h/16384,p=0;g<c/16384;g++,p++)u[p]={score:a[g+1].blockPosition-f,start:g*16384,end:g*16384+16384},f=a[g+1].blockPosition;return u.map(g=>({...g,score:g.score*l.lineCount/d}))}reg2bins(e,t){return t-=1,[[0,0],[1+(e>>26),1+(t>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s);if(!r)return[];const o=r.indices[e];if(!o)return[];const a=this.reg2bins(t,n),l=[];for(const[f,g]of a)for(let p=f;p<=g;p++)if(o.binIndex[p]){const m=o.binIndex[p];for(let v=0;v<m.length;++v)l.push(new xx(m[v].minv,m[v].maxv,p))}const c=o.linearIndex.length;let h=null;const u=Math.min(t>>14,c-1),d=Math.min(n>>14,c-1);for(let f=u;f<=d;++f){const g=o.linearIndex[f];g&&(!h||g.compareTo(h)<0)&&(h=g)}return IZ(l,h)}}const kwe=21582659,Lwe=38359875;function Awe(i,e){return i*2**e}function Q9(i,e){return Math.floor(i/2**e)}class WA extends kZ{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e){const t=await this.parse();if(!t||!t.indices[e])return-1;const{stats:n}=t.indices[e];return n?n.lineCount:-1}async indexCov(){return[]}parseAuxData(e,t,n){if(n<30)return{};const s={};if(s.formatFlags=e.readInt32LE(t),s.coordinateType=s.formatFlags&65536?"zero-based-half-open":"1-based-closed",s.format={0:"generic",1:"SAM",2:"VCF"}[s.formatFlags&15],!s.format)throw new Error(`invalid Tabix preset format flags ${s.formatFlags}`);s.columnNumbers={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},s.metaValue=e.readInt32LE(t+16),s.metaChar=s.metaValue?String.fromCharCode(s.metaValue):"",s.skipLines=e.readInt32LE(t+20);const r=e.readInt32LE(t+24);return Object.assign(s,this._parseNameBytes(e.subarray(t+28,t+28+r))),s}_parseNameBytes(e){let t=0,n=0;const s=[],r={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),s[t]=a,r[a]=t}n=o+1,t+=1}return{refNameToId:r,refIdToName:s}}async _parse(e){const t={csi:!0,maxBlockSize:65536},n=await this.filehandle.readFile(e),s=await lN(n);if(s.readUInt32LE(0)===kwe)t.csiVersion=1;else if(s.readUInt32LE(0)===Lwe)t.csiVersion=2;else throw new Error("Not a CSI file");this.minShift=s.readInt32LE(4),this.depth=s.readInt32LE(8),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;const r=s.readInt32LE(12);r&&Object.assign(t,this.parseAuxData(s,16,r)),t.refCount=s.readInt32LE(16+r),t.indices=new Array(t.refCount);let o=16+r+4;for(let a=0;a<t.refCount;a+=1){await EZ(e.signal);const l=s.readInt32LE(o);o+=4;const c={};let h;for(let u=0;u<l;u+=1){const d=s.readUInt32LE(o);if(d>this.maxBinNumber)h=this.parsePseudoBin(s,o+4),o+=4+8+4+16+16;else{const f=zp(s,o+4);this._findFirstData(t,f);const g=s.readInt32LE(o+12);o+=16;const p=new Array(g);for(let m=0;m<g;m+=1){const v=zp(s,o),b=zp(s,o+8);o+=16,p[m]=new xx(v,b,d)}c[d]=p}}t.indices[a]={binIndex:c,stats:h}}return t}parsePseudoBin(e,t){return{lineCount:LZ(xZ.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}async blocksForRange(e,t,n,s={}){t<0&&(t=0);const r=await this.parse(s),o=r==null?void 0:r.indices[e];if(!o)return[];const a=this.reg2bins(t,n),l=[];for(const[c,h]of a)for(let u=c;u<=h;u++)if(o.binIndex[u]){const d=o.binIndex[u];for(let f=0;f<d.length;++f)l.push(new xx(d[f].minv,d[f].maxv,u))}return IZ(l,new DZ(0,0))}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,s=0,r=this.minShift+this.depth*3;const o=[];for(;n<=this.depth;r-=3,s+=Awe(1,n*3),n+=1){const a=s+Q9(e,r),l=s+Q9(t,r);if(l-a+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([a,l])}return o}}var wh=zr.Buffer,bN=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(bN=new Int32Array(bN));function TZ(i){if(wh.isBuffer(i))return i;var e=typeof wh.alloc=="function"&&typeof wh.from=="function";if(typeof i=="number")return e?wh.alloc(i):new wh(i);if(typeof i=="string")return e?wh.from(i):new wh(i);throw new Error("input must be buffer, number, or string, received "+typeof i)}function Ewe(i){var e=TZ(4);return e.writeInt32BE(i,0),e}function o5(i,e){i=TZ(i),wh.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<i.length;n++)t=bN[(t^i[n])&255]^t>>>8;return t^-1}function a5(){return Ewe(o5.apply(null,arguments))}a5.signed=function(){return o5.apply(null,arguments)};a5.unsigned=function(){return o5.apply(null,arguments)>>>0};var Iwe=a5;const Twe=y0(Iwe);var zA,X9;function Nwe(){if(X9)return zA;X9=1;var i=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},e=function(n,s){return Object.prototype.propertyIsEnumerable.call(n,s)};function t(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");var s=[];for(var r in n)i(n,r)&&e(n,r)&&s.push([r,n[r]]);return s}return zA=t,zA}var Mwe=typeof Object.entries=="function"?Object.entries:Nwe();const Rwe=y0(Mwe);class Owe{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}var Pwe=Owe;const Fwe=y0(Pwe),ro={BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048},J9="=ACMGRSVTWYHKDBN".split(""),c_="MIDNSHP=X???????".split("");class Bwe{constructor(e){this.data={},this._tagList=[],this._allTagsParsed=!1;const{bytes:t,fileOffset:n}=e,{byteArray:s,start:r}=t;this.data={},this.bytes=t,this._id=n,this._refID=s.readInt32LE(r+4),this.data.start=s.readInt32LE(r+8),this.flags=(s.readInt32LE(r+16)&4294901760)>>16}get(e){return this[e]?this.data[e]?this.data[e]:(this.data[e]=this[e](),this.data[e]):this._get(e.toLowerCase())}end(){return this.get("start")+this.get("length_on_ref")}seq_id(){return this._refID}_get(e){return e in this.data?this.data[e]:(this.data[e]=this._parseTag(e),this.data[e])}_tags(){this._parseAllTags();let e=["seq"];this.isSegmentUnmapped()||e.push("start","end","strand","score","qual","MQ","CIGAR","length_on_ref","template_length"),this.isPaired()&&e.push("next_segment_position","pair_orientation"),e=e.concat(this._tagList||[]),Object.keys(this.data).forEach(n=>{n[0]!=="_"&&n!=="next_seq_id"&&e.push(n)});const t={};return e.filter(n=>{if(n in this.data&&this.data[n]===void 0||n==="CG"||n==="cg")return!1;const s=n.toLowerCase(),r=t[s];return t[s]=!0,!r})}parent(){}children(){return this.get("subfeatures")}id(){return this._id}mq(){const e=(this.get("_bin_mq_nl")&65280)>>8;return e===255?void 0:e}score(){return this.get("mq")}qual(){var e;return(e=this.qualRaw())===null||e===void 0?void 0:e.join(" ")}qualRaw(){if(this.isSegmentUnmapped())return;const{start:e,byteArray:t}=this.bytes,n=e+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes"),s=this.get("seq_length");return t.subarray(n,n+s)}strand(){return this.isReverseComplemented()?-1:1}multi_segment_next_segment_strand(){if(!this.isMateUnmapped())return this.isMateReverseComplemented()?-1:1}name(){return this.get("_read_name")}_read_name(){const e=this.get("_l_read_name"),{byteArray:t,start:n}=this.bytes;return t.toString("ascii",n+36,n+36+e-1)}_parseTag(e){if(this._allTagsParsed)return;const{byteArray:t,start:n}=this.bytes;let s=this._tagOffset||n+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4+this.get("_seq_bytes")+this.get("seq_length");const r=this.bytes.end;let o;for(;s<r&&o!==e;){const a=String.fromCharCode(t[s],t[s+1]);o=a.toLowerCase();const l=String.fromCharCode(t[s+2]);s+=3;let c;switch(l){case"A":c=String.fromCharCode(t[s]),s+=1;break;case"i":c=t.readInt32LE(s),s+=4;break;case"I":c=t.readUInt32LE(s),s+=4;break;case"c":c=t.readInt8(s),s+=1;break;case"C":c=t.readUInt8(s),s+=1;break;case"s":c=t.readInt16LE(s),s+=2;break;case"S":c=t.readUInt16LE(s),s+=2;break;case"f":c=t.readFloatLE(s),s+=4;break;case"Z":case"H":for(c="";s<=r;){const h=t[s++];if(h===0)break;c+=String.fromCharCode(h)}break;case"B":{c="";const h=t[s++],u=String.fromCharCode(h),d=t.readInt32LE(s);if(s+=4,u==="i")if(a==="CG")for(let f=0;f<d;f++){const g=t.readInt32LE(s),p=g>>4,m=c_[g&15];c+=p+m,s+=4}else for(let f=0;f<d;f++)c+=t.readInt32LE(s),f+1<d&&(c+=","),s+=4;if(u==="I")if(a==="CG")for(let f=0;f<d;f++){const g=t.readUInt32LE(s),p=g>>4,m=c_[g&15];c+=p+m,s+=4}else for(let f=0;f<d;f++)c+=t.readUInt32LE(s),f+1<d&&(c+=","),s+=4;if(u==="s")for(let f=0;f<d;f++)c+=t.readInt16LE(s),f+1<d&&(c+=","),s+=2;if(u==="S")for(let f=0;f<d;f++)c+=t.readUInt16LE(s),f+1<d&&(c+=","),s+=2;if(u==="c")for(let f=0;f<d;f++)c+=t.readInt8(s),f+1<d&&(c+=","),s+=1;if(u==="C")for(let f=0;f<d;f++)c+=t.readUInt8(s),f+1<d&&(c+=","),s+=1;if(u==="f")for(let f=0;f<d;f++)c+=t.readFloatLE(s),f+1<d&&(c+=","),s+=4;break}default:console.warn(`Unknown BAM tag type '${l}', tags may be incomplete`),c=void 0,s=r}if(this._tagOffset=s,this._tagList.push(a),o===e)return c;this.data[o]=c}this._allTagsParsed=!0}_parseAllTags(){this._parseTag("")}_parseCigar(e){return e.match(/\d+\D/g).map(t=>[t.match(/\D/)[0].toUpperCase(),parseInt(t,10)])}isPaired(){return!!(this.flags&ro.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&ro.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&ro.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&ro.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&ro.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&ro.BAM_FMREVERSE)}isRead1(){return!!(this.flags&ro.BAM_FREAD1)}isRead2(){return!!(this.flags&ro.BAM_FREAD2)}isSecondary(){return!!(this.flags&ro.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&ro.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&ro.BAM_FDUP)}isSupplementary(){return!!(this.flags&ro.BAM_FSUPPLEMENTARY)}cigar(){if(this.isSegmentUnmapped())return;const{byteArray:e,start:t}=this.bytes,n=this.get("_n_cigar_op");let s=t+36+this.get("_l_read_name");const r=this.get("seq_length");let o="",a=0,l=e.readInt32LE(s),c=l>>4,h=c_[l&15];if(h==="S"&&c===r)return s+=4,l=e.readInt32LE(s),c=l>>4,h=c_[l&15],h!=="N"&&console.warn("CG tag with no N tag"),this.data.length_on_ref=c,this.get("CG");for(let u=0;u<n;++u)l=e.readInt32LE(s),c=l>>4,h=c_[l&15],o+=c+h,h!=="H"&&h!=="S"&&h!=="I"&&(a+=c),s+=4;return this.data.length_on_ref=a,o}_flags(){}length_on_ref(){return this.data.length_on_ref?this.data.length_on_ref:(this.get("cigar"),this.data.length_on_ref)}_n_cigar_op(){return this.get("_flag_nc")&65535}_l_read_name(){return this.get("_bin_mq_nl")&255}_seq_bytes(){return this.get("seq_length")+1>>1}getReadBases(){return this.seq()}seq(){const{byteArray:e,start:t}=this.bytes,n=t+36+this.get("_l_read_name")+this.get("_n_cigar_op")*4,s=this.get("_seq_bytes"),r=this.get("seq_length");let o="",a=0;for(let l=0;l<s;++l){const c=e[n+l];o+=J9[(c&240)>>4],a++,a<r&&(o+=J9[c&15],a++)}return o}getPairOrientation(){if(!this.isSegmentUnmapped()&&!this.isMateUnmapped()&&this._refID===this._next_refid()){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let n=" ",s=" ";this.isRead1()?(n="1",s="2"):this.isRead2()&&(n="2",s="1");const r=[];return this.template_length()>0?(r[0]=e,r[1]=n,r[2]=t,r[3]=s):(r[2]=e,r[3]=n,r[0]=t,r[1]=s),r.join("")}return null}_bin_mq_nl(){return this.bytes.byteArray.readInt32LE(this.bytes.start+12)}_flag_nc(){return this.bytes.byteArray.readInt32LE(this.bytes.start+16)}seq_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+20)}_next_refid(){return this.bytes.byteArray.readInt32LE(this.bytes.start+24)}_next_pos(){return this.bytes.byteArray.readInt32LE(this.bytes.start+28)}template_length(){return this.bytes.byteArray.readInt32LE(this.bytes.start+32)}toJSON(){const e={};return Object.keys(this).forEach(t=>{t.charAt(0)==="_"||t==="bytes"||(e[t]=this[t])}),e}}function Vwe(i){const e=i.split(/\r?\n/),t=[];return e.forEach(n=>{const[s,...r]=n.split(/\t/),o=r.map(a=>{const[l,c]=a.split(":",2);return{tag:l,value:c}});s&&t.push({tag:s.substr(1),data:o})}),t}const Wwe=21840194,HA=1<<16;function UA(i){return[].concat(...i)}async function zwe(i){const e=[];for await(const t of i)e.push(t);return e}class Hwe{constructor({bamFilehandle:e,bamPath:t,bamUrl:n,baiPath:s,baiFilehandle:r,baiUrl:o,csiPath:a,csiFilehandle:l,csiUrl:c,fetchSizeLimit:h,chunkSizeLimit:u,yieldThreadTime:d=100,renameRefSeqs:f=g=>g}){if(this.featureCache=new QO({cache:new Fwe({maxSize:50}),fill:async({chunk:g,opts:p},m)=>{const{data:v,cpositions:b,dpositions:w}=await this._readChunk({chunk:g,opts:{...p,signal:m}});return await this.readBamFeatures(v,b,w,g)}}),this.renameRefSeq=f,e)this.bam=e;else if(t)this.bam=new zh(t);else if(n)this.bam=new Tc(n);else throw new Error("unable to initialize bam");if(l)this.index=new WA({filehandle:l});else if(a)this.index=new WA({filehandle:new zh(a)});else if(c)this.index=new WA({filehandle:new Tc(c)});else if(r)this.index=new l_({filehandle:r});else if(s)this.index=new l_({filehandle:new zh(s)});else if(o)this.index=new l_({filehandle:new Tc(o)});else if(t)this.index=new l_({filehandle:new zh(`${t}.bai`)});else if(n)this.index=new l_({filehandle:new Tc(`${n}.bai`)});else throw new Error("unable to infer index format");this.fetchSizeLimit=h||5e8,this.chunkSizeLimit=u||3e8,this.yieldThreadTime=d}async getHeader(e={}){const t=Cwe(e),n=await this.index.parse(t),s=n.firstDataLine?n.firstDataLine.blockPosition+65535:void 0;let r;if(s){const h=await this.bam.read(Buffer.alloc(s+HA),0,s+HA,0,t),{bytesRead:u}=h;if({buffer:r}=h,!u)throw new Error("Error reading header");u<s?r=r.subarray(0,u):r=r.subarray(0,s)}else r=await this.bam.readFile(t);const o=await lN(r);if(o.readInt32LE(0)!==Wwe)throw new Error("Not a BAM file");const a=o.readInt32LE(4);this.header=o.toString("utf8",8,8+a);const{chrToIndex:l,indexToChr:c}=await this._readRefSeqs(a+8,65535,t);return this.chrToIndex=l,this.indexToChr=c,Vwe(this.header)}async getHeaderText(e={}){return await this.getHeader(e),this.header}async _readRefSeqs(e,t,n={}){if(e>t)return this._readRefSeqs(e,t*2,n);const s=t+HA,{bytesRead:r,buffer:o}=await this.bam.read(Buffer.alloc(s),0,t,0,n);if(!r)throw new Error("Error reading refseqs from header");const a=await lN(o.subarray(0,Math.min(r,t))),l=a.readInt32LE(e);let c=e+4;const h={},u=[];for(let d=0;d<l;d+=1){const f=a.readInt32LE(c),g=this.renameRefSeq(a.toString("utf8",c+4,c+4+f-1)),p=a.readInt32LE(c+f+4);if(h[g]=d,u.push({refName:g,length:p}),c=c+8+f,c>a.length)return console.warn(`BAM header is very big.  Re-fetching ${t} bytes.`),this._readRefSeqs(e,t*2,n)}return{chrToIndex:h,indexToChr:u}}async getRecordsForRange(e,t,n,s={viewAsPairs:!1,pairAcrossChr:!1,maxInsertSize:2e5}){return UA(await zwe(this.streamRecordsForRange(e,t,n,s)))}async*streamRecordsForRange(e,t,n,s={}){const{signal:r}=s,o=this.chrToIndex&&this.chrToIndex[e];let a;if(!(o>=0))a=[];else if(a=await this.index.blocksForRange(o,t-1,n,s),!a)throw new Error("Error in index fetch");for(let c=0;c<a.length;c+=1){await EZ(r);const h=a[c].fetchedSize();if(h>this.chunkSizeLimit)throw new Error(`Too many BAM features. BAM chunk size ${h} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit}`)}const l=a.map(c=>c.fetchedSize()).reduce((c,h)=>c+h,0);if(l>this.fetchSizeLimit)throw new Error(`data size of ${l.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);yield*this._fetchChunkFeatures(a,o,t,n,s)}async*_fetchChunkFeatures(e,t,n,s,r){const{viewAsPairs:o=!1}=r,a=[];let l=!1;for(let c=0;c<e.length;c++){const h=e[c],u=await this.featureCache.get(h.toString(),{chunk:h,opts:r},r.signal),d=[];for(let f=0;f<u.length;f+=1){const g=u[f];if(g.seq_id()===t)if(g.get("start")>=s){l=!0;break}else g.get("end")>=n&&d.push(g)}if(a.push(d),yield d,l)break}AZ(r.signal),o&&(yield this.fetchPairs(t,a,r))}async fetchPairs(e,t,n){const{pairAcrossChr:s=!1,maxInsertSize:r=2e5}=n,o={},a={};t.map(d=>{const f={};for(let g=0;g<d.length;g++){const p=d[g].name(),m=d[g].id();f[p]||(f[p]=0),f[p]++,a[m]=1}Rwe(f).forEach(([g,p])=>{p===1&&(o[g]=!0)})});const l=[];t.map(d=>{for(let f=0;f<d.length;f++){const g=d[f],p=g.name(),m=g.get("start"),v=g._next_pos(),b=g._next_refid();o[p]&&(s||b===e&&Math.abs(m-v)<r)&&l.push(this.index.blocksForRange(b,v,v+1,n))}});const c=UA(await Promise.all(l)).sort().filter((d,f,g)=>!f||d.toString()!==g[f-1].toString()),h=c.map(d=>d.fetchedSize()).reduce((d,f)=>d+f,0);if(h>this.fetchSizeLimit)throw new Error(`data size of ${h.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const u=c.map(async d=>{const{data:f,cpositions:g,dpositions:p,chunk:m}=await this._readChunk({chunk:d,opts:n}),v=await this.readBamFeatures(f,g,p,m),b=[];for(let w=0;w<v.length;w+=1){const y=v[w];o[y.get("name")]&&!a[y.id()]&&b.push(y)}return b});return UA(await Promise.all(u))}async _readChunk({chunk:e,opts:t}){const n=e.fetchedSize(),{buffer:s,bytesRead:r}=await this.bam.read(Buffer.alloc(n),0,n,e.minv.blockPosition,t),{buffer:o,cpositions:a,dpositions:l}=await lbe(s.subarray(0,Math.min(r,n)),e);return{data:o,cpositions:a,dpositions:l,chunk:e}}async readBamFeatures(e,t,n,s){let r=0;const o=[];let a=0,l=+Date.now();for(;r+4<e.length;){const c=e.readInt32LE(r),h=r+4+c-1;if(n){for(;r+s.minv.dataPosition>=n[a++];);a--}if(h<e.length){const u=new Bwe({bytes:{byteArray:e,start:r,end:h},fileOffset:t?t[a]*256+(r-n[a])+s.minv.dataPosition+1:Twe.signed(e.slice(r,h))});o.push(u),this.yieldThreadTime&&+Date.now()-l>this.yieldThreadTime&&(await wwe(1),l=+Date.now())}r=h+1}return o}async hasRefSeq(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.hasRefSeq(t)}async lineCount(e){const t=this.chrToIndex&&this.chrToIndex[e];return this.index.lineCount(t)}async indexCov(e,t,n){await this.index.parse();const s=this.chrToIndex&&this.chrToIndex[e];return this.index.indexCov(s,t,n)}async blocksForRange(e,t,n,s){await this.index.parse();const r=this.chrToIndex&&this.chrToIndex[e];return this.index.blocksForRange(r,t,n,s)}}(function(){(function(i){(function(e){var t={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function n(D){return D&&DataView.prototype.isPrototypeOf(D)}if(t.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(D){return D&&s.indexOf(Object.prototype.toString.call(D))>-1};function o(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function a(D){return typeof D!="string"&&(D=String(D)),D}function l(D){var T={next:function(){var N=D.shift();return{done:N===void 0,value:N}}};return t.iterable&&(T[Symbol.iterator]=function(){return T}),T}function c(D){this.map={},D instanceof c?D.forEach(function(T,N){this.append(N,T)},this):Array.isArray(D)?D.forEach(function(T){this.append(T[0],T[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(T){this.append(T,D[T])},this)}c.prototype.append=function(D,T){D=o(D),T=a(T);var N=this.map[D];this.map[D]=N?N+", "+T:T},c.prototype.delete=function(D){delete this.map[o(D)]},c.prototype.get=function(D){return D=o(D),this.has(D)?this.map[D]:null},c.prototype.has=function(D){return this.map.hasOwnProperty(o(D))},c.prototype.set=function(D,T){this.map[o(D)]=a(T)},c.prototype.forEach=function(D,T){for(var N in this.map)this.map.hasOwnProperty(N)&&D.call(T,this.map[N],N,this)},c.prototype.keys=function(){var D=[];return this.forEach(function(T,N){D.push(N)}),l(D)},c.prototype.values=function(){var D=[];return this.forEach(function(T){D.push(T)}),l(D)},c.prototype.entries=function(){var D=[];return this.forEach(function(T,N){D.push([N,T])}),l(D)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function h(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function u(D){return new Promise(function(T,N){D.onload=function(){T(D.result)},D.onerror=function(){N(D.error)}})}function d(D){var T=new FileReader,N=u(T);return T.readAsArrayBuffer(D),N}function f(D){var T=new FileReader,N=u(T);return T.readAsText(D),N}function g(D){for(var T=new Uint8Array(D),N=new Array(T.length),$=0;$<T.length;$++)N[$]=String.fromCharCode(T[$]);return N.join("")}function p(D){if(D.slice)return D.slice(0);var T=new Uint8Array(D.byteLength);return T.set(new Uint8Array(D)),T.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:t.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:t.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():t.arrayBuffer&&t.blob&&n(D)?(this._bodyArrayBuffer=p(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||r(D))?this._bodyArrayBuffer=p(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var D=h(this);if(D)return D;if(this._bodyBlob)return f(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(D){var T=D.toUpperCase();return v.indexOf(T)>-1?T:D}function w(D,T){T=T||{};var N=T.body;if(D instanceof w){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,T.headers||(this.headers=new c(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!N&&D._bodyInit!=null&&(N=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new c(T.headers)),this.method=b(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(N)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function y(D){var T=new FormData;return D.trim().split("&").forEach(function(N){if(N){var $=N.split("="),U=$.shift().replace(/\+/g," "),ee=$.join("=").replace(/\+/g," ");T.append(decodeURIComponent(U),decodeURIComponent(ee))}}),T}function x(D){var T=new c,N=D.replace(/\r?\n[\t ]+/g," ");return N.split(/\r?\n/).forEach(function($){var U=$.split(":"),ee=U.shift().trim();if(ee){var he=U.join(":").trim();T.append(ee,he)}}),T}m.call(w.prototype);function L(D,T){T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in T?T.statusText:"OK",this.headers=new c(T.headers),this.url=T.url||"",this._initBody(D)}m.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},L.error=function(){var D=new L(null,{status:0,statusText:""});return D.type="error",D};var S=[301,302,303,307,308];L.redirect=function(D,T){if(S.indexOf(T)===-1)throw new RangeError("Invalid status code");return new L(null,{status:T,headers:{location:D}})},e.DOMException=i.DOMException;try{new e.DOMException}catch{e.DOMException=function(D,T){this.message=D,this.name=T;var N=Error(D);this.stack=N.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(D,T){return new Promise(function(N,$){var U=new w(D,T);if(U.signal&&U.signal.aborted)return $(new e.DOMException("Aborted","AbortError"));var ee=new XMLHttpRequest;function he(){ee.abort()}ee.onload=function(){var fe={status:ee.status,statusText:ee.statusText,headers:x(ee.getAllResponseHeaders()||"")};fe.url="responseURL"in ee?ee.responseURL:fe.headers.get("X-Request-URL");var Ce="response"in ee?ee.response:ee.responseText;N(new L(Ce,fe))},ee.onerror=function(){$(new TypeError("Network request failed"))},ee.ontimeout=function(){$(new TypeError("Network request failed"))},ee.onabort=function(){$(new e.DOMException("Aborted","AbortError"))},ee.open(U.method,U.url,!0),U.credentials==="include"?ee.withCredentials=!0:U.credentials==="omit"&&(ee.withCredentials=!1),"responseType"in ee&&t.blob&&(ee.responseType="blob"),U.headers.forEach(function(fe,Ce){ee.setRequestHeader(Ce,fe)}),U.signal&&(U.signal.addEventListener("abort",he),ee.onreadystatechange=function(){ee.readyState===4&&U.signal.removeEventListener("abort",he)}),ee.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return k.polyfill=!0,i.fetch||(i.fetch=k,i.Headers=c,i.Request=w,i.Response=L),e.Headers=c,e.Request=w,e.Response=L,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:wf)})();class Uwe extends eL(w0){constructor(e,t){const n={channel:"x",windowSize:2e4,...e};if(super(t,n.channel),Il(this,"lastRequestId",0),Il(this,"chrPrefixFixer",r=>r),this.params=n,!this.params.url)throw new Error("No URL provided for BamSource");const s=r=>new Tc(tL(r,this.view.getBaseUrl()));this.bam=new Hwe({bamFilehandle:s(this.params.url),baiFilehandle:s(this.params.indexUrl??this.params.url+".bai")}),this.headerPromise=this.bam.getHeader(),this.headerPromise.then(r=>{var o,a;const l=this.genome.hasChrPrefix(),c=(a=(o=this.bam.indexToChr)==null?void 0:o[0])==null?void 0:a.refName.startsWith("chr");l&&!c?this.chrPrefixFixer=h=>h.replace("chr",""):!l&&c&&(this.chrPrefixFixer=h=>"chr"+h)})}async onDomainChanged(e){const t=this.params.windowSize;if(e[1]-e[0]>t)return;await this.headerPromise;const n=this.quantizeInterval(e,t);if(this.checkAndUpdateLastInterval(n)){const s=this.genome.continuousToDiscreteChromosomeIntervals(n),r=await Promise.all(s.map(o=>this.bam.getRecordsForRange(this.chrPrefixFixer(o.chrom),o.startPos,o.endPos).then(a=>a.map(l=>({chrom:o.chrom,start:l.get("start"),end:l.get("end"),name:l.get("name"),MD:l.get("MD"),cigar:l.get("cigar"),mapq:l.get("mq"),strand:l.get("strand")===1?"+":"-"})))));this.publishData(r.flat())}}}function $we(i,e){if(MG(i))return new t0e(i,e);if(i0e(i))return new n0e(i,e);if(s0e(i))return new r0e(i,e);if(jwe(i))return Xwe(i.lazy,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function jwe(i){return"lazy"in i}function qwe(i){return(i==null?void 0:i.type)=="axisTicks"}function Gwe(i){return(i==null?void 0:i.type)=="axisGenome"}function Kwe(i){return(i==null?void 0:i.type)=="indexedFasta"}function Zwe(i){return(i==null?void 0:i.type)=="bigwig"}function Ywe(i){return(i==null?void 0:i.type)=="bigbed"}function Qwe(i){return(i==null?void 0:i.type)=="bam"}function Xwe(i,e){if(qwe(i))return new a0e(i,e);if(Gwe(i))return new l0e(i,e);if(Kwe(i))return new dbe(i,e);if(Zwe(i))return new X1e(i,e);if(Ywe(i))return new _we(i,e);if(Qwe(i))return new Uwe(i,e);throw new Error("Cannot figure out the data source type: "+JSON.stringify(i))}function Jwe(i){const e=Object.keys(i).filter(n=>typeof n=="string"),t=new Function("source","return { "+e.map(n=>JSON.stringify(n)).map(n=>`${n}: source[${n}]`).join(`,
`)+" };");return t.properties=e,t}class Dx extends An{get behavior(){return Jc}constructor(){super();const e=t=>{const n=Jwe(t);this.handle=s=>this._propagate(n(s)),this.handle(t)};this.handle=e,this.beginBatch=t=>{iG(t)&&(this.handle=e),super.beginBatch(t)}}}function eye(i){return"name"in i}var ZC;class NZ extends yw{constructor(e,t,n){super(),Ut(this,ZC,void 0),this.provider=n,this.params=e}get identifier(){return this.params.name}updateDynamicData(e){Lc(this,ZC,e),this.loadSynchronously()}loadSynchronously(){const e=Ke(this,ZC)??this.provider(this.params.name)??[];let t=n=>n;if(Array.isArray(e))e.length>0&&(t=NG(e[0]));else throw new Error(`Named data "${this.params.name}" is not an array!`);this.reset(),this.beginBatch({type:"file"});for(const n of e)this._propagate(t(n));this.complete()}async load(){this.loadSynchronously()}}ZC=new WeakMap;class MZ{constructor(){this._dataSourcesByHost=new Map,this._collectorsByHost=new Map,this._observers=new Map}get dataSources(){return[...new Set(this._dataSourcesByHost.values()).values()]}get collectors(){return[...this._collectorsByHost.values()]}addObserver(e,t){let n=this._observers.get(t);n||(n=[],this._observers.set(t,n)),n.push(e)}_relayObserverCallback(e,t){const n=this._observers.get(t);if(n)for(const s of n)s(e)}addDataSource(e,t){this._dataSourcesByHost.set(t,e)}findDataSourceByKey(e){return this._dataSourcesByHost.get(e)}findNamedDataSource(e){let t,n=[];for(const[s,r]of this._dataSourcesByHost.entries())if(r instanceof NZ&&e==r.identifier){if(t&&t!==r)throw new Error(`Found multiple instances of named data: ${e}. Data flow optimization is broken (it's a bug).`);t=r,n.push(s)}if(t)return{dataSource:t,hosts:n}}addCollector(e,t){this._collectorsByHost.set(t,e),e.observers.push(n=>this._relayObserverCallback(n,t))}findCollectorByKey(e){return this._collectorsByHost.get(e)}initialize(){for(const e of this.dataSources)e.visit(t=>t.initialize())}}function tye(i,e){const t=new Map,n=[];for(const s of i)t.set(s,{ref:s,children:[]});for(const s of t.values()){const r=t.get(e(s.ref));r?r.children.push(s):n.push(s)}return n}function RZ(i,e,t){var n,s;const r=(n=e.preOrder)==null?void 0:n.call(e,i);if(r)return r;for(const o of t(i)){const a=RZ(o,e,t);if(a==="stop")return a}return(s=e.postOrder)==null?void 0:s.call(e,i)}function iye(i,e){return RZ(i,e,t=>t.children)}function nye(i,e){const t=[];let n;const s=e??new MZ,r=[];function o(u,d=()=>{}){if(!n)throw d()||new Error("Cannot append data flow node, no parent exist!");return n.addChild(u),n=u,u}function a(u,d){return o(u,()=>new Error(`Cannot append a transform because no (inherited) data are available! ${d?JSON.stringify(d):""}`))}function l(u,d){for(const f of u){let g;try{g=Qme(f,d)}catch(p){throw console.warn(p),new Error(`Cannot initialize "${f.type}" transform: ${p}`)}g.behavior&$u&&a(new Dx),a(g)}}const c=u=>{if(t.push(n),u.spec.data){const d=eye(u.spec.data)?new NZ(u.spec.data,u,u.context.getNamedDataFromProvider):$we(u.spec.data,u);n=d,s.addDataSource(d,u)}if(u.spec.transform&&l(u.spec.transform,u),u instanceof Ys){if(!n)throw new Error(`A unit view (${u.getPathString()}) has no (inherited) data source`);const d=sye(u);if(d){r.push(d.rewrite);for(const g of d.transforms)a(g)}u.mark.isPickingParticipant()&&(a(new Dx),a(new IG({type:"identifier"})));const f=new LG({type:"collect",groupby:u.getFacetFields(),sort:rye(u,d==null?void 0:d.rewrittenEncoding)});o(f),s.addCollector(f,u)}},h=tye(i.getDescendants(),u=>u.dataParent);for(const u of h)iye(u,{preOrder:d=>c(d.ref),postOrder:()=>{n=t.pop()}});return r.forEach(u=>u()),s}function sye(i){var e;const t=[],n={},s=[];for(const[o,a]of Object.entries(i.getEncoding())){const l=o;Cv(l)&&Hj(a)&&s.push({channel:l,chromPosDef:a})}const r=bk(s,o=>vf(o.channel),o=>o.chromPosDef.chrom);for(const[o,a]of r.entries())for(const[l,c]of a.entries()){const h=[],u=[],d=[];for(const{channel:f,chromPosDef:g}of c){const p=b=>b.replace(/[^A-Za-z0-9_]/g,""),m=["_linearized_",p(g.chrom),"_",p(g.pos)].join(""),v={...((e=i.spec.encoding)==null?void 0:e[f])??i.getEncoding()[f]??{},field:m};delete v.chrom,delete v.pos,!v.type&&g.type&&(v.type=g.type),n[f]=v,h.push(g.pos),d.push(g.offset??0),u.push(m)}t.push(new Dx),t.push(new AG({type:"linearizeGenomicCoordinate",channel:o,chrom:l,pos:h,offset:d,as:u},i))}return t.length?{transforms:t,rewrittenEncoding:n,rewrite:()=>{i.spec.encoding={...i.spec.encoding,...n},Yq(i.mark,"encoding")}}:void 0}function rye(i,e){var t;const n={...i.getEncoding(),...e}.x;if(xo(n)&&(t=i.getScaleResolution("x"))!=null&&t.isZoomable()){if(gw(n))return{field:n.field};if(!pw(n))throw new Error("A zoomable x channel must be mapped to a field.")}}function OZ(i,e=void 0){if(i.parent!==e)return!1;for(const t of i.children)if(!OZ(t,i))return!1;return!0}function vN(i,e=!1){if(i.behavior&MO&&(e=!0),i instanceof Dx)if(e)e=!1;else{const t=i.children[0];i.excise(),t&&vN(t,e);return}i.behavior&Jc&&(e=!1);for(let t=0,n=i.children.length;t<n;t++)vN(i.children[t],e||n>1)}function oye(i){const e=[...i._dataSourcesByHost.entries()],t=new Map;for(const n of e){const s=n[1];s.identifier&&!t.has(s.identifier)&&t.set(s.identifier,s)}i._dataSourcesByHost.clear();for(let[n,s]of e){const r=t.get(s.identifier);r&&(r.adoptChildrenOf(s),s=r),i.addDataSource(s,n)}}function aye(i){if(vN(i),!OZ(i))throw new Error("Encountered a bug! There's a problem in the data flow structure.")}function lye(i){for(const e of i.dataSources)aye(e);oye(i)}function cye(i){i.visit(t=>{t instanceof Ys&&t.resolve("scale")});const e=new Set;i.visit(t=>{for(const n of Object.values(t.resolutions.scale)){const s=n.name;if(s&&e.has(s))throw new Error(`The same scale name "${s}" occurs in multiple scale resolutions!`);e.add(s)}}),i.visit(t=>{t instanceof Ys&&t.resolve("axis")}),i.visit(t=>t.onScalesResolved())}function hye(i){for(const e of p0){const t=i.getScaleResolution(e);t&&!t.name&&t.isZoomable()&&(t.name=`${e}_at_root`)}}async function uye(i,e,t){var n;if(!i.import.url)throw new Error("Cannot import, not an import spec: "+JSON.stringify(i));const s=yk({baseURL:e}),r=i.import.url,o=JSON.parse(await s.load(r).catch(a=>{throw new Error(`Could not load imported view spec: ${r} 
Reason: ${a.message}`)}));if(t.isViewSpec(o))return o.baseUrl=(n=r.match(/^[^?#]*\//))==null?void 0:n[0],o;throw new Error(`The imported spec "${r}" is not a view spec: ${JSON.stringify(i)}`)}async function PZ(i){const e=[];i.visit(t=>{if(t instanceof kG)return e.push(t),oG});for(const t of e){const n=t.context,s=await uye(t.spec,t.getBaseUrl(),n),r=n.createView(s,t.layoutParent,t.dataParent,t.name);t.layoutParent.replaceChild(t,r),await PZ(r)}}function dye(i){const e=i.getSize().addPadding(i.getOverhang()),t=n=>n.grow>0?void 0:n.px;return{width:t(e.width),height:t(e.height)}}function ec(i){return()=>i}const kh=class{static create(i,e,t,n){return new kh(ec(i),ec(e),ec(t),ec(n))}_offset(i,e){const t=this["_"+i];if(e===0)return t;switch(typeof e){case"number":return()=>t()+e;case"function":return()=>t()+e();default:throw new Error("Not a number of function")}}_passThrough(i){return this._offset(i,0)}constructor(i,e,t,n){this._x=i,this._y=e,this._width=t,this._height=n}get x(){return this._x()}get y(){return this._y()}get width(){return this._width()}get height(){return this._height()}get x2(){return this._x()+this._width()}get y2(){return this._y()+this._height()}equals(i){return i?this===i||this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height:!1}modify(i){if(!Object.keys(i).length)return this;const e=t=>{const n=i[t];return typeof n=="number"?ec(n):typeof n=="function"?n:this._passThrough(t)};return new kh(e("x"),e("y"),e("width"),e("height"))}translate(i,e){return i===0&&e===0?this:new kh(this._offset("x",i),this._offset("y",e),this._passThrough("width"),this._passThrough("height"))}translateBy(i){return this.translate(i.x,i.y)}expand(i,e=1){return i.left==0&&i.top==0&&i.right==0&&i.bottom==0?this:new kh(i.left?this._offset("x",-i.left*e):this._passThrough("x"),i.top?this._offset("y",-i.top*e):this._passThrough("y"),i.width?this._offset("width",i.width*e):this._passThrough("width"),i.height?this._offset("height",i.height*e):this._passThrough("height"))}shrink(i){return this.expand(i,-1)}intersect(i){return this===i?this:new kh(()=>Math.max(this.x,i.x),()=>Math.max(this.y,i.y),()=>Math.min(this.x2,i.x2)-Math.max(this.x,i.x),()=>Math.min(this.y2,i.y2)-Math.max(this.y,i.y))}isDefined(){return this.width>=0&&this.height>=0}flatten(){return new kh(ec(this.x),ec(this.y),ec(this.width),ec(this.height))}containsPoint(i,e){return i>=this.x&&i<this.x2&&e>=this.y&&e<this.y2}normalizePoint(i,e){return{x:(i-this.x)/this.width,y:(e-this.y)/this.height}}toString(){return`Rectangle: x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height}`}toRoundedString(){return`Rectangle: x: ${Math.round(this.x)}, y: ${Math.round(this.y)}, width: ${Math.round(this.width)}, height: ${Math.round(this.height)}`}};let sL=kh;Il(sL,"ZERO",kh.create(0,0,0,0));class FZ{constructor(e){this.globalOptions=e}pushView(e,t){}popView(e){}renderMark(e,t){}}class e7 extends FZ{constructor(e,t){super(e),this.webGLHelper=t,this.buffer=[],this.coords=void 0,this.views=new Set}pushView(e,t){this.views.add(e),this.coords=t}renderMark(e,t){if(this.globalOptions.picking&&!e.isPickingParticipant())return;const n=e.render(t);n&&this.buffer.push({mark:e,callback:n,coords:this.coords,clipRect:t.clipRect})}render(){if(this.batch||this._buildBatch(),this.batch.length==0)return;const e=this.webGLHelper.gl,t=this.globalOptions.picking;e.bindFramebuffer(e.FRAMEBUFFER,t?this.webGLHelper._pickingBufferInfo.framebuffer:null),this.webGLHelper.clearAll();for(const n of this.views)n.onBeforeRender();for(const n of this.batch)n();t&&e.bindFramebuffer(e.FRAMEBUFFER,null)}_buildBatch(){this.batch=[];let e=!0,t=!0;const n=o=>()=>{e&&o()},s=o=>()=>{e&&t&&o()},r=bk(this.buffer.reverse(),o=>o.mark);for(const[o,a]of[...r.entries()].reverse()){if(!o.isReady())continue;this.batch.push(()=>{e=o.unitView.getEffectiveOpacity()>0}),this.batch.push(...o.prepareRender(this.globalOptions).map(c=>n(c)));let l;for(const c of a){const h=c.coords;h.equals(l)||this.batch.push(n(()=>{t=o.setViewport(h,c.clipRect)})),this.batch.push(s(c.callback)),l=c.coords}}}}class fye extends FZ{constructor(...e){super({}),this.contexts=e}pushView(e,t){for(const n of this.contexts)n.pushView(e,t)}popView(e){for(const t of this.contexts)t.popView(e)}renderMark(e,t){for(const n of this.contexts)n.renderMark(e,t)}}class gye{constructor(e,t){this.point=e,this.uiEvent=t,this.stopped=!1,this.target=void 0}stopPropagation(){this.stopped=!0}get type(){return this.uiEvent.type}}class pye{constructor(e,t){this.x=e,this.y=t}equals(e){return e?e===this||e.x===this.x&&e.y===this.y:!1}}const mye=i=>new Promise(e=>setTimeout(e,i));function _ye(i){const e=i.requestAnimationFrame||window.requestAnimationFrame,t=i.signal,n=()=>new Promise((s,r)=>{if(t!=null&&t.aborted)return r("aborted");const o=performance.now(),a=o+(i.duration||1e3),l=typeof i.from=="number"?i.from:0,c=typeof i.to=="number"?i.to:1,h=i.easingFunction||(p=>p),u=p=>(p-o)/(a-o),d=p=>p*(c-l)+l,f=p=>Math.max(0,Math.min(1,p)),g=p=>{t!=null&&t.aborted?r("aborted"):(i.onUpdate(d(h(f(u(p))))),p<a?e(g):(i.onUpdate(d(h(1))),s()))};e(g)});return i.delay?t!=null&&t.aborted?Promise.reject("aborted"):mye(i.delay).then(n):n()}class bye{constructor(e){this._renderCallback=e,this._renderRequested=!1,this._warn=!1,this.transitions=[]}requestTransition(e){this.cancelTransition(e),this.transitions.push(e),this.requestRender()}cancelTransition(e){const t=this.transitions.indexOf(e);t>=0&&this.transitions.splice(t,1)}requestRender(){this._renderRequested?this._warn&&console.warn("Render already requested!"):(this._renderRequested=!0,window.requestAnimationFrame(e=>{this._renderRequested=!1;const t=this.transitions;this.transitions=[];let n;for(;n=t.shift();)n(e);this._renderCallback(e)}))}transition(e){return _ye({requestAnimationFrame:t=>this.requestTransition(t),...e})}}class vye{constructor(e){this.genomes=new Map,this.baseUrl=e}async initialize(e){const t=new hme(e);return this.genomes.set(t.name,t),Promise.all([...this.genomes.values()].map(n=>n.load(this.baseUrl)))}getGenome(e){if(!this.genomes.size)throw new Error("No genomes have been configured!");if(e){const t=this.genomes.get(e);if(!t)throw new Error(`No genome with the name ${e} has been configured!`);return t}else{if(this.genomes.size>1)throw new Error("Cannot pick a default genome! More than one have been configured!");return this.genomes.values().next().value}}}const wye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAIAAAB7GkOtAAEFzklEQVR4AezcRXjr2BnG8b8SQ+gJOiA5d1NmZuZVuU133Zf3++6XxW27Ku7LzIzDrMgByxQGaxwfWVFGMly088z7e76Zi5bu6nvP+Y4sKwgC2n4KP4QfgEcvAVdZGHfuM++Fj8HHwUZERO6aMTocsMGhl4C7bbrzr7C5N0REFAC30nct7qwhdH8REQXAfKf7FrjTLPpJ7EPuMhERycB36XD+hX0/DuzSlsnw3OfyilcwAA/vn/yzQQMoUHg9r59hhn7Oz/njH9ncJAiAXNj9P2qTxdhARETufgDYNs4fsH/Cv2jL53nzm1lcZH2dngKCP/Gnn/LTEiXg+Tw/Q+btvJ1+/vlPfvYz/v1vEwA26w4fs8lm4R4GgIiIAmB5GdvGnmbuh9Rq8MIXcuMGpVJ6AFhEXNwneOI//OfnSz8fL49/jI+9lJcecjjJJD15Ho8+yo9/TKUCb7J5vY1tcw+JiOgMILYJcDpNuFQKq5+neMrFbRXLnI+fu7im6KlSCS9fqXDBccLb31siIgqARBOu1SiV8DzKZbpr0nRxWxnQqs8tv51lol/2Xf63qlS6euOpKYZIREQ7ANOHTYdu1SDL/wMOlguFlxW+Hf8dujMX9ryrNx4KEREFgGXd9BQoWu97S0vLbU36T4EOD6NwGf78R0REAZBoxWaJ3qqDA9Kcx3p9YXW1sLLSCoBM5jIV+i7/gwCWl8Nbzs0xLCIiCgDbDiub7b8JMF3exT3kMOM4a3bLmuNczoX22ScpPluK33KIREQUALmc2QS0KjGqT3BxzWKf2VmKhl0sEhD0ngKZS5ZKOgAQERmVAEg05KhVBwFXnXJ62eWLRYoGrRofv8yGHsv/gwOYmwtvtryMiIgMLQCSxwCHh92mQNGg/4gjEwCTxRZMRdOhPfbSl/86/hURGbUAmJ4eaAoULf/N/OeibDsKgPhf0AOgIiLXIQASbTn+la3ICSfRSS+xru84YY2NpU+BqtXwYr4PU1PaAYiIjFoAxNpy9NKGajV5/HvMcTwApqYuf2X+govboJG+/I82GiIiMiIBsLAQdualpStfCIg/AJqc/9DWewqUfABUy38RkREKgPjpbKJtc8xxdAIc7/dXAyBlCnR8HIuSbFYHACIioxgA6e+EODqKr+tPOU0GQHwKtMmm2SvUqcdzpNmM3SCXQ0RERicAVlbCFj07C81m/CjYrP1T5z/pUyArnALFJ0k6/hURGdEASL4XyNQRR2b5n5z/9JsCRdfQA6AiIqMdAClTIM+Ljn/POEsGQHIK5BF+ZGurZpb/+/uxS09PIyIiIxgApiYnYX/fjIDcrc7x79xc6vyn27NArY/qBXAiItcjAMbGnrkJOLzo4rH3/6yvR8v/vlMgz3tKb4AQEbkWAZBo1Ftb3vb25s6mi3vOeXyRn2S+5GuqRMk9cLd2Wp9u7O5CoRBedH4eEREZzQCIdgCZDJTLZd/f8Xe2m9u95z/JKdB2dXunsuP7uzr+FRG5HgGQz8fadbPpV6t+zW9VvLv3DQDLotwol+vlet2/HvMfEREFQLxdW1Cp16v1amWx0jMArOitotHf8hu+v+c3Gj5zc+HllpcREZFRDoD4AzvVWq1Sq1zOf9bW6CkKgPLr/Uqj0njkA/HLiYjIsGQYwMxMuAlYW+Oz//8/X/4/L3lJcvlvQdBrChR896vf1QHAdSIi2gEkm/Yg85/kFOjC5KQOAERERkEGPjT4McC6w/rfYQ6KS93nPx9K3QS8ulVPgdMJE8tCRESGGgAbDGBhAcdhw4YlWIUiqcv/b8Gn2UgNgI0iWGB3MkBERIYdAJ9iMO8Je3e7iu1Klbjg9HS7+5syV3AsRERk2AGQZzB52/TudhVhjVSpF8ybT0X5kUNERIZrjMGtJpb/gyuaCiPk+hARUQAYzq0GwMzVEZCIiAybFQQBIiLyrN4BiIiIAqAK34T3wxp8CX7N0+zZAQYCQRzF4bfMAQroCKETRMfYvWRHqFt0kI4wkaaQDQQ7+33mDPPz9wBwAQAgAAAIAAALU3KeWwEu+dglp7yNATqEADT35Np+/zGNAHQOEIDWgFsyBQAbAAACAIAAACAAAAgAAAIAgAAAIAAACAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAAIAgAAAIAAAAgCAAAAgAAAIAAACAIAAACAAAAgAAH8iAAAIAAACAIAAACAAAAgAAAIAgAAAULLPD9v0CYCSKXOO6RYAJaPff40ASg75tnm+5QLACAyAAAAgAAAMtdasBAAuAADKkJcHO3eZ3Uh2wFH8GtRkZmb2kXrCWUNWHGbmxAwyW2RmtpXSyOrwfJ9X93f+ghW8K6xZSP3LRvgvf4bvw/fgl7wq8iUlSaqlYgn2P62SgWYqcjBXWSAkyQBUXMCv/ysDST73d5j7/P6csEiSAajYgcy/LzWX7Z3rZQ5WkCSFGICKJ/jrp/cBh4f7f/9xam4q9ffUe94jSQo2ABWH8BPIzM9n5uYyf9/KHGe+zbd76UWSFG4AKtLp1YWF/dLOjjiqp94AxIAkA/D8zNISi4vXCwtn1L/hTTTCJ0n+EWx1lZWVaIn9wgwz0aaYInCSZACKRdbXWVtjdXWSySmmppnuppvASZIB2NxkY4N0mkJhnPFok0wSPkkyAFtbpW1ujjASbYyxDjoInCQZgNNTdnfZ2WFvb4ihYYajIUkKPwCZTGn7+3XU9dM/wMAgg4RPkgxAPk8uRzbbQ08vvX30VVNN4CTJANzfc3BAoRCtm+7yCJ8kGYCjo9dBO+0ddHTSSfgkyQCcnXF6yslJE01ttEXzGnDxIMkAXFxwfh6tmeZoLbQgKRZkAK6uymugIVojjUiKBRmA29vSbm4+8KGOumhIkmIRgLu70u7v3/O+PCRJ4Qfg8fF1kCDhJaAlKTYBeH7m5aV0D7XU1lATDUlS+AEoFl9XQhVV0ZAkhR+AqqrSqquBIsUXXqIhSQo/ALW1pdXUAE88lYckKRYBSCR484aqqgceykOSFH4AIu/elXfL7Q030ZAkxSIAHz6UVld3xdU119E9kqRYBKC+noaGaJdcXnARDUlSLALQ1FRac/MZZ6ecnnCCJCkWAWhpobU12jXXxxxHO+ccSVL4AWhvL62jg0TigIPykCSFH4Dqarq6SuvuLlDIkcuSRZIUfgAiPT309tLXlyWbIRPNH4NKUjwC0NdHfz8DA0+Jqj32dtndYQdJUvgB+PCBwUGGhhgZ2WFnm+1oSJLCD0BkZITR0Wh58ptspknbgHiQZAD6+hgfZ2KC4eE06XXW11hDkhR+ACITE0xOMj29xdYqqyuspEkjSbEXgwAMDzMzU9rU1DLLUQCiEiBJCkItX2x2lu3tod3d5P5d63XrW94iKQ5kAJp6elKpVDKTSWbbkr9Nfo2vETxJMgDJ8j5+TGXzyVxyND/KFpKkkAPQD0lIlQPw7l3qs+8k8glylHaHJCnAANR/OvcrTzqAkQQfeQ3AHwiNJBmAmX8596NN8C8+g1xlewRCkgxAz3+98H/Hv6v7lwbk4ZEvNUlSVbFYRJLkH8FiQpL0D/buAqqtNd/7+DcUSQrBQ4TgGg6NNEyZqZ13pvJed3dZet3d71123WXZdR13OX7OSIVOE6BKC6USCMGC9oS2+z6bTUIoFkrP9Ib+P+u3Uk+C/X/7efZOycHEanzwy/Aq643CS/Cn8MPQBQWk6YU/htNg2jTrmDZJDnwV/Cn087TNwz/B14Ips9TBL8I5duwe/AUcA9Nq/o8TQshVQL3gTMaDIQF9azPKWl6IwdhywuxOIJlOstZ0MkIIkT0FkN4BLihhcO3ov8Im/DAGseVEeFK1cDBZAFksnowQQmRVAYxAL7iYck71Hy9Ln/4zbK7C6IBkHrBzFggkUyoFIIQQz+KVwL30O/v7nH19rnf1NTf3wTCbej9JHoi9SSzKGPRgcOI8ylEUE2g8JhxmYABNS9v8cQd4TwvLvp2thMPh4eHhRCJRWVnZ0dFRVVW11bMzzMOn2Lk6OISy7dOKRLhy5cHUVDw/P15XN+PzIYQQWVQAceJfevClvl41/Qf6XAV91dUPLRYyKQDF72fsc3pi00ZpBAlasfrwsYYJuHWLM2d4/XUePgRaqQpwOkAgkMmkPXPmzJtvvnn58uXFxcWampqxsbETJ05UVFRsUwBP0gF1y2H7Ahgf54031DObHh2dtlimOztZWqKri2whhJACGGDgLd46c+dMX99CzO2mtpaurkwLoLiYQIBYjLHPqhooX7TkkefE6cBhx06ahQVCIT3nzjE4VaaP/oMHCQQwm9nO1NSUGv2qA954443p6Wmv15ubm+t2uw8fPszjPsJ68+Rt3QGvwImlJZRaqCNDg4P09vLaa/H+/nh5eXxxEaeTjg727ycrCCGkAAoosGBZYCHW309dHfX1NDRQUUGGmpqW1wFjxGKTX/ximLADhxPnKU6RJhRayeAgvC9AYDk1NWRgZmZmYmLi7t27k5OTwMDAgN/vV02AYbvD9dIt1hYaXISX4FTsP15+qVqrLqGkkEIysbDAzAyjo3FNi09MxCMRxseZnpYCyBpCSAG00OLBM8jgzbmbsStXaGykuZnDh8lcIKAKwMilG5ecOI1FwAEOsOzmzdUCwOslEFhJZgoKCvbv319SUsIytftfVFRksVi2LoBtpr+G7hb0xLjwMhcufFlr76LLi7eRRjJhtVJeTk3N9NTUtM2maoDsIoSQAjBjbqf9Bjeucz129TwtLQwM0N6uT7cMmc3GRpCesbHwzMoiQKWSytnZ1el/v8xJILn5kzGHw9HS0hIMBvPy8hYWFurq6jo7OxsaGmC9byJNof7rdTRWxOP0vKRGv4pjMu8UXUGCKhYsmS59vF4WF+NtbfEy0/TgJIWF2XT4L4SQAlBaaW2hpZnmy4nLUzduoDI4mGkBGGprjY0gldgbb4QJG4uAE5xITf/he7nGWV89Nhs7cejQoZycnKampkQiYbPZVAHU19fzBDRW9fSo0W+6cKHg5t2TnDSmfzXVZKi0lBdfnKiqmpy8MW39UOLf7Nhs+m9mESGEFEAeeU00NdLYQMPUzesMDenx+cjLI2Ppi4C+K31GATivO0OhDqMAjAN/PR4PO1RaWnry5MmpqamlpSX18/z8/N1O/y9/WY1+lhPkPcb076STHamqGqgaHGLobnCUr+uipobsIoSQAlDqqVepo+7i3EVteJjbt7lzh8bGHczVffvw+03GyYBYLDwediaczj5VAI5QiCV3g7H5o6nbJBM7U1ZWxhPTSDGpektOf4/WHiRohB0aNA320nul8sr1/++hrY2mJrKOEEL+N9ASSmqoceOuppq7d/Xcu8d2ND1pnE413zW//77fHyUajoTDw+Fr13rvThfNqd9fDlbrun/+DvskaBhMKtPTqenvmMw3Rn8XXfvZzxZMjydqip7hTE9uT+jg3H2fj85OSkrIOkIIKQBFjX4VFy599I+M6HnwgHW0tKxnXORzMRD4XZ8v3BgOR8PRaPg3Dx4MGZs/DQ1b3OHTVwg/lD7Adcnpr2/9p6a/C9dOn9YII5fyLvUcuT7Y3U1XF14vQgiRjVtAyuoLuJaWiEaNnRycTnZoqCkQahxTsQyM1X506LW8Xw4H/r8jUG4PlDfzDJhYs/W/UgA9PUEOd9Gl8gIvkKKRIVepy9ftm+vOzTl8+ILqgOwlhJACsGK1YVMpoSQ+Po7KxMROC2B+nlCoIhQKhEK/0fhXFY7PePI/E1G/sh+02/PsDhxFFD2b0a8MDaWmvwdPV/K6TwwaO+CiqrvqePfxfd1VOd3dORbLebKWEEIKQKmgQqWc8vjkJFNTKlvOVY11QiEjnqGhoZPek46I93ok4vyhL4S0kB27ylGOZnp/O2dic9PTqenvnDJ3pV/1r5Hyd/DtUMmWmqFbj6PbceyQIweMnCVrCSGkAMooK6VUhfh14nFmZnY0bwcGCIW4eFG/7aCj09tZH/E6IhFGRsKmsAOHscXUQgtfecnpbx6MBJNX/bs0F2neC9/BdrzQnUwnVXAMcpL5EtlJCCEFUEyxFasK8/PMzel59IicHDKgyiIUWknR2xV+/P58f8DrNc4nJyKR0P2VRYADhxUrOxePx43XAeTm5rITxta/8cqvIEf06a8F07f+Tej+H9v1XXdaGjFUru2AL5CFhBBSAIUUGkFZWFhJURHbW53+d+5wAr9f8/vxO+rr8XqJRFTunDsXYqUDjnGMnZidne3p6RkcHEwkElVVVZ2dnW1tbWRoaCg1/TvoCGorV/6wI4Vrp7+DdOXrOuARWUUIIQVgwaJixozy9ttGMimAq1dXC+AABwIE/Ph9+ACjAIyE765uBLXSSsbOnj376quv9vb2Liws1NfXT05OWiyW2tpatjU9TU+PMf2dk2Zj9KuYMe/s9WhzbK0UvlZPdhJCSAHkkptPvooJk7a0hJHtTE6ubv1XPLD78RvBUFi40gEjI0sjnwk9XN0IKqaYDESj0YGBgQsXLrz00kuapjU1NVmt1paWlkwKwBj9Kub/iATPnlw+99vq5DYqm47+JqgkpRshxN4nBaDsY5+KaoKlhw9RefQo882fkYjpNH7j8N+GjZSWFqMA1O3dixfDhI0OOM5xMnD//v25ubmpqSk1/YGRkZGZmRm1FGBbly+nLvwPvv9IF21BbndsNfqVpuUgBfDcEUIKwIRJBUXTkrdbuXRptQACyWP/tPOrST6fUQAqoWjIWAGoZLIRVFRUVFZW5nK5SkpK4vF4c3OzzWZTP89k7cCtW/T1AV3vvxNEBRNbaIQmHvPHPBeEEFIAj3ikoqGRk4PJpOdxx0mKxVZ2fhZDHIdmmo0CYL3S0pWNoGj0wcJCiFl78oRwCSVsqaKioqOjY3x8vLi4eHFx0e12BwKB1tZWtnhmBk3T35q2Jdq4yO2L8EdwfOsCeG4JIaQAHvDACPv2Gdniu26FQkyHOKQSXbmKNEiwjDI21NHB+DgWCw8f3oMw2BmzE3qRF9nO4cOHLRZLe3t7IpGorKz0eDxqEZDRN4Ts1COE2IaQAkiQMIKSn29kszEbDeMN6aEPgxnzNofzx4/j8RjnFUJgB4eeaBt2thNYpmmayWTCsG0BvKBHCLE9IQWwwMIiiyooZvNKHmdHGcUeAiM7kjxyf2h0QDKlZGSL6a/YN/+1EEKIHDY3x5zKPPPk5LB/vx6LhfUewcXk9J/giUUgvJwQz5QQQsgKYIYZI1itKpu+BCyUzGV2Z3UR4IB2nhEhhJACmGRyiikVSkspKdGzoYPL+VUypPGsvG85f48QQmxNtoDGGZ9gYpJJystXIoTY84QUwDjjY4ypLLCAzaanogIhxJ4npABGGBllVIWiIhwOqqqorEQIsecJKYC73L3HvQgRqqtxOnG5EELseUIKYJTR29y+w50YMWpqVPQaEELseUIKYIihW9xSwWajvp66OimAvU8IIQUQJ36Tm4MMqhqgqYmGBr0DhBB7npACuMa161wfYOB+qZnmZhW9BoQQe5uQAhhn/CpXjQ6gvZ22NlpbsVgQQuxtQgpgmGFVAFe4Mu+w0tGBx6PXgBBCiD0nd92vc61Y22lf6rRffeEFvQPMZoQQe56QAvDhS5BwdDjc3v6aAwf6PZ4RhBB7nZACMLyr7F01vhq3113j9dZAH/TDIkKIvU5IAeDD4XU4fI4aOzXghhroh+sIIfYwIQXQBl7wgZd2cCcLwGiCfhhDCLH3CCmAYvAlk4NSBO82pn/aUqAPEggh9hIhBeBLHv67SFe9nJq0JugnuwkhhDBpmoYQQgh5IVgaIYQQUgCmjXIY/gzukrke+C3wg2mzZPK4Rk7BX8Ntnoj6Z38C74Zq+Bn4ArtzAX4FmsCUWerhF+EcG/hx+Ev4LAyzVlR/ezme8WPkwnfDh8lEDP4W3gsm6ITfhStsYhT+Kvk0fPAHG1wcZnraqYDvYnMP4b/gW1P/4ImfzPNg03eWKS1e+H24yjv1kX0P/N7az/8p+Hf4Xih9Sg+RbgD+GI7tfuyY4TvhP2CerX0GfhSsO3zOJ+EfYIrtDcMfwaHN7+o74P1PswA0NpCHkcw1QSN69rE7juQd1bIXzKx+NXwCPZ9Ev30ZvV7FQT3iK8eMkXeEGw5Ap367qgw6wKPfPn31yVif1h0V7uHLQDOXb4TNGIe6Q2s/zKkOGGAXjLtoIOvNw1W4podDxtpEzw0Y0G/1tOnB9RxP/6CejGmIXb6zLO9kAaSmv4U1OvRZwS39llGepjxoSKaXXUjdC89hAWjrVkp5WxWACQrAt9HoblLZTQFYocHoALLY4iLXrnHNz7VkB/wuKUMqRg3oMWog2gZ27DxP6iG4ixWACfGEKwCLyjs5/Vt4XAF0ZFYAuzh230UBOJN34XwuCyC9A85zfphhLV8jj2/Me6wCvj31hefTk/L+1BWljZ+lcQZ3an+juJiuLioq2FyceA89k0ymHf43UNCVesiNvX/TMwBnSeOCI2zo28egiqcskdBHv8rVWq6BUQCzrHdjNUYNfLKNNpVKKslIxu+XGLzOWp3gSXtHvD91CuCt9S8cpzX1gcjU6CiRCBMTzM+ztERODmYzJSU4HNTVkZcHFCdHfxDKSDmzflf7/OrEN9VR58CBMjvL8DDRqPqJ/hC5uRQVYbfrnzlWK7szPj5+7969iYmJ2dnZJXXnUFBQYLVabTab2+0uUW/IU6Ge/L17q++lffvYv5/yclwu3G629b/sfQdYFGnW9SmBJgoNKJIzggKCIKLojDppZ76dmY3On3POOeecc845rRu+71t3djbNrI6ZIAgiUTI0OTTdQHdD/ef1LmUrdFMdGNedPs996oEOVV1vOOfe+4Zqxs6yaoNAFTnPwfIg1FWGh9WFNjZgscQdOhRXWhrH9wLCzAzGxiC/1uN5+muzspCXByBV2F/Z7qgAhrzMgDotG8ziIpxOSGtJTMShQ8jPR0aGmaaeDhR+jMJ5FBija/x6Y6P6hb4xh7lWtK5gxUtDqoEKo7X7JpmPADuCxBtP2/tlX5cYAe5hb1ze8WeIKSAdE9rEXdz9FJ9SAC5b2FrghW8Y7J8niwp2I53iYhT/KorvbgsAa5Ed/rXX4Bud6PwxfjyIQRwQAfglnmWvW8P3LuOLAD7wqwHZu39f3cm/Um+FE5ub29Tfg94F9OYr6l+Cf/Q+jQOc/bjaj/4KVFAGUpEaugD40IBKoMq7LOQru2nACW+Vv2yS1B4+RH8/ezV5VLGzIQCpqYraSkpw7BjNSP6U7PXjh7e57gAOnMGZ9/T3LO0PtUePMDiIqSksL4sA0NVQ5y8rQ02N2uY2KJD0u7q6BgYGRkdHZ2dnKQAbGxuaplEAyPtHjhwpKCg4evRoVVVVIkkqaHiX0uwsVldFAIT4yKfqLqqqeDuB1vPgtgbwZPX1eP99WDqacf8+r6Uuur7OO4nLzIyraow98XVZELo3WInt7WzVSnEpA/y1IgD8tXTs+GtZp5WVVfn5wv5+/BcjCOBRB9SvYn8ZGnrOXRAtJwnwtLwNEsieRVBYiMIOFN7eFoCKCvXzTp+Gb3Sg44f44RjGkMDvR6PwS+osgG8BCF0DXofArwAYrd4E+4dXAACn7lzRVvpi+o7HtHsVu+4ddEcbS8p8CQCtC12/ioUF4L33VIcnF7Bl7wYq8BCGBjDwK/gVd3EBit5X36dnYRLkL82HBvhgfx3hh/C+lwA0YR4msQU8gsQBN1kONEMGkpEctAD40IBKmt+vGBpwQllA4I03N6OjA2RnupxknJWVGDegwZ1ggZDF0aPkkRNzc/VnztTFxNTtqE5fveEeUKqXFtmLlu9cO9zaigcP0NeH8XFtYUEXAbBaVXhByiCV8BXKQGAgHfU3Nzd3dHT09PQMDQ1NT08vLy9vbm7qum6xWKxWa1ZWVnFx8fHjxycnJxsbG7MNgg6xlPhrLRZsbdGHIPGRhlSXobadOcOYMMB6Fg2g36Xn5GDp/t2M69e1O3fQ2cmyYmYyPi4hvvhy/Hg8pgAbVA3n7CGJuHED9+6hq0u1TZstcWXD4rFsRm3akzQ9I4NlTrYtHh+vbmiorq2thj8UAMdEAFZXH7ISqSvd3eq0/G2GEFIARMt57xQGvnjhAjVgbwGgkdR/BUvuRH5eyVVtrSrY3TCPeeY52NG+i++i8Liw/y574/8AvnAA30/GajDs77seTWvA5f0aBHbB5dJdriSXxcJGv3vK1WD/UuwCegZ0CEQGlABQ3mmPH/sSAHk8PT/khlu+pqJ4c/itUKXn0APPB18Mn/svXgzN0ICZeAQON9ClZEAFATSRAWoAlSDxpZiXwBu/fh23bqGlhe5tNrKLUJGBjAQkQIfT4Zx2TA+PDk0ODuZOT9fZ7XVud/3581HP989x+ADfyF7NdnzqcNz8acadO8XD9/PyFtOaVE93uehgeAYH56Za58hQ6v/4eOoNkyABsf/169dv3brV0tLCIIDkTk//0KFD8fHxFACn0zkzM/P48eNHjx6NjY0tLCwwMrhw4QIlIWD2v3ZNlRLpj8THSOWVV+jukHoU+y8vq5iABcjj0pJytC0Wn91hGH6YIzOTxdC30dys8VrXr6csbCYiFUhdX1+P646Lm4qDDZiCshPAKewOXVdaRQH49FP+4DJPUSkaWaexiKUuUh0nlice93cuDg1Vzc5WOzerPalRpwpA+A8C5ueHbt0aunvX2dZGIU+YWGS3z0R9EpKiEOXcck4tTfUs9ayTGFggBAMCaqE/UDVYTmIMeByK/fl1HhlL+aYdagAA45vmmVYLH3/gLeyKVL7zmY0BkKolCnOvrrqI/+qy/OiqxZKIjjS6JGxNBsFmP91NzifI4aIBdBrWhf15rK7e9dmTpH4xJhNZB/wa/cRABwN1UxrgFchcQOjgfXnzPs06tUbKPoqjWcgKzHmXaPrEifXY2I6+voHR74kA8EiTsYF4xOPnFnTfSFu3b5NrWJn1qD+Jk/zNLAf2agCrWJ3EJO+ly9Z16JPoeldaPXIOw4Lz4MEkHLcdzptLjuvX34y/efw9nS2FTkVsLBMbpH02NvIqo4IJUpX40eYFgEl/+v5k/2vXrg0ODp4+ffrkyZNlZWWZmZkJKo9MN3SVXj8jg9bW1rt3766trR04cIBZoLfeeovZoQCGRuhK81dSA1ZW8MYbOHkSpaXMdLNrUADYAdmo+LPVZ27eVPfGvBm5nO8GiA2Fzo3u9uzm5qqFU3nIk4pgwE1/Im4xToWDU9t2yreoM3Rgzd69ywo9h3NVqMpBDpuiB54FLIxilK20d7C32lFa7a4u2CzAJtAIP8iYxfEbg0M3W4ZvfdzS3Hzcc7QK58pQlotcdhkKAJsKeZlXue68bmfskpLCaIC0sNd4gKpwMQZXW6R+mg8B2MSmvE0NYGnL13Y//+V9Zn8fSew0efmzEAC2ue5u+j8Shbnsdhex6YqJuxLznSSyEkufvMwoj7Ge5sX+KfAFCrZoAI2+oAOGBtDf2cH+IsVsTCg+JxFAqHPeNB/vhHHuCBvPs9SfMm4n7wtT8w/x3GEeLLJz59jbmSHh2Ry9vW2UgbEBkQGaIQMWWBB+6CGWC6uZ3Y7My1omU1zAhbM4ewIn8pEfhzgA61gnWXSjm/08ai2q7kYd7wUC0xpAAXDcufPXs2+91aAzwcPiIDdaLCQ7XlY1VZdLJVSWWWCDg6qOFhdVkZoAXf729nb6/mT/hoYGuvZnz56trq7mkG8cfXPA4XCMjIzk5+dTD9g/Hjx4IGPCOTk5dXV1MAlqFJMe5FP2tbfeUpmNs2dVrt9qNWYQqM5IyqMYfPQRi1Qy7EGks1yufper19Xd/frEa6dwqhSlVlh16MtY1qDxXxC92wLwF3yFXeMsWTbIdKSzWl/BK01oYg0CkDpl/+1BTzWq82x5VderFPuLNfleaXgTx24eG7o5NHJvJAUJbCQ1qOGgEDmY414UAP5CthM2G2rVp85PeXWVEBsd3UsAWIqGBpBvxiUI2DX5TMIR4yVQeALynV3xBV+v/SdlAePfmdGYVHntsxCAvj42R0ZhJDJJR7pWVtxs4B6PJf7Kr0lOth06pFEhqaJsB7W1NQ0NNVFRNdib20jjYmQGcfF3FQBJ/tCY9fOd/zEXBPhgMx1hxfi4wftiySOLivFxwVsAVN4jUOTn0ygALG0aq2alt7e5t7d/QrE/zVsG2E/CxvyhY2aGIsWMNr1FzmStRe1pnKYGHMZhbIP9mcXCO6RXAKByvRI3QASkARv/em3sUuWFV/7q2bOv0HXeBsc1lX+ytqa6PPmTHMsEOhszO78ZAWBuh/kfevednZ3M/NTW1jK/f/HixVSv79LZZ+o/OTmZKRQODnOImJpRWFjINFFlZaWpIGBignXKUuJPZKjH3qSmqZw/D29Qzfi6283fxG7Bz1PJ2DEDFwCK4sDG6OBf6c95A+dexatkWJ+rFG/AJ5aW6CCyJA+hjMEcG56wv1GnPC21ZA5zVJf4uXhc3xYAD3Bux4rQSbK/soM3D9a01Gxgg84+2wMFIBOZRlOkDHCof1abZYNnSn+F5Sa1aQJeAqC8NNGAnQJguP9qwpjxHdP4CG9fAb4B2AMhqNcVrf+eD7BjdkcyfLyw3wIgSVuG7a2t5Gm2cSZh3IWF7vj4xNH45ssrhy8vHaqf4lsSHxyZnz+xulpz7twJEwEp1drgcw6nSRBAGSfHeY/DCPurmiiuheR/LJYwerR6GKeOsxU+O9KbNDSr6BjnvKk/xHy9lJoIAI/Ug6Xe3juUgcmnMmAMEePnBOPK21I1CfDX84fRJfRmf2/K4FsQrD9LPa9hT5wBzh7G+WqcOLlLZdNXZkCgOrsw18qKMhNgTp/ePfP7zPUXFRXJJB/F/jvAgIAywDlC/Fh3dzcHivlFfr20tNTMZVQpsRdI0plKz/Hq3cCmRJ3gxdgxlWzYbIYbax4D9q/8OLHh3W+/W/9KPWk6mC6g6zIuzSNzJh541rCGHYhBDLUBgkVANMADdbzk3Ugg7K8q/T7YgDlKRA1gO9nphdC/ydKzOB86TUtbWR6G1KbHo4b6/aKgQJL5KhyclzEAGQr2+iJpR9x/hqQorBb29znR6Ns+JADOYOnk0lMJ+OoLXAdAF6O5mXlGagB5mblIOlFkZ1damivhkeVfnHvNsgLLwoQ+MaANPHr8aGbmxyfsjhpX/Ak9K+18JeLNUhmNzCApIB55iZ2BGAeOTbj/Wz5e8IFNIA9be330gNef/srK4H2h/gHbUdWDG71zPirHGi6QUGjbMkCb7+u7SRmYUuzvPVOIn8MLx/S0TPzXoDF1SzefdQkzEA0wLQBnoeyED8GnM8d0vTgnWF+nDwyXy1wAM2Oz2Tjxn2l9RgBkefK7b4op4Ac49ksB4KgAv8iv7xSAsV1bEUuJhH74MD0t5OQg3Qk4oe24lWQoArNalU+2sMBEFhnQWwDysDeYpqdzzZZJ9g8y26dpqjSTkmgTqxN96LuN29QAnpZxwAFf/WVFNOBZARjdpn4eOyBI1pPhG3SkeAtxehw0sCrFyOMmgwBW4HyLHYYGlJTsdP99DP+anKLzPcCJgHERghcuAHQxjKQtLl1CUxPDUlKw6/CUK7HD8u9+v8Uy8K5ljiXVp/cVaoXdq90112tObJ2oRCUkZo/fuyaMoeDp7SwQryJTPN1wG8O/Qv08+gjYfUwQ/D5g3z0LJMiGfGdM2W56/ZrXOjAfO5LNAz0Y68WHvXikNODUXzloTS/MPHymOK/46CHF+7SDOLgfGRfyvmHrfX3D5eVkqbn5+T+8cLV/QGTAXY7S8he7aNrtJj2RpGhpirfS6dNJ3t+8BpjEnwZ0v3x14IAy8V7FTPx899LSEmf18JiWlkbHPz09nZM+fYe2GfwAPymLBhYXF/nFvRur0wkpJYeD7K/IPe0B8ACaj2xmLC1WuaX8PL9LPfPCn8DeSEbeYeTnoIBMGvyIT2amLEpYu3//Jm4y6c9Z8+RLOu80iv3uSuCA0gCPd3oTyn7dnmkSFXKsremkes2jHdg8oG1pJmrT51CwW1JAXgKwhS1j/g/FXD7qb5nqd+EbVxMD04BLPzcrgdkW6YzTm2R6p7paLZfgeNSZM8yIufAtl+aKOeWKiclJseS8hxMckOEUguM4XugurLlRA4E5DTCmA01P60YQIAJgDP/aYUdx047hX3Na/JE/DTjD7/hlf4FvAXACo4Yld43GPx79+jffsXJuYEZGQVHB0fLC5PJCHDqI/cRGwdG+jbLejb4B9+NJi23u4MJU0p+MH4hPQGY8QEuAsswXuOkFGYo8BXDkg3RjREL7oQFSxWEE53c6ngAAB3iZ60+iz+sbMvmHnyQ4NYhf5BmwA38Sz6Bxfd0oJeXXJ32CPwDcAzQfYekPobC8rMKFzU1aoAIA5AnvhjTqL+vRGLt4PDOdnd/H9xkHMMIzBIB/k0F3yXyuKw0wB413abNRTRUtra6ynLSNDd0jSaQtBAjvrD4ZblQiAAZSQjtC/TwuYxmFtXtn/y/DF74ugvJSbgUh0ej4OEWV96+82Lo6lhwbGtnfBZfFsmWxaDExugaNLn+BXsAxGTp3ye5k3IBpDRBWl7lAWPGaD0rvxhj+lTleyhgU+8PH2A2Wj2AxOqCRXfuHUNzvxOX/9vF/+29YAmCFNy7ADBKAk0ApUFaF0hiU0hX/X9/u+ST9WlpWlsa+QQXt62PpMRskEXrYN5Xg6Xt7edR6e8v7+spHR+3Rs9Vvud6qiFJjABVIKQdywjkcrAUTAdBcLkkHW2ChIVCsA3gxGuB5AtnvIWYb8AvjY6R+fpHgpPgopjF94y4ZXAycHnvg8oOCywUoK4BP/Aco8ENEfHxQA2M/Af6wtI7gNcBqpXfIMlK0mpvL/jo4OjroHGRyRtx/SfeRIupQ93zez7P3Nk7kA5rsBDE7qwTAbldCycXXbverm5uXgiJYbwGAsSDAEADRAJkzFLQAfA0GXkYBYDFTdhmQxsWxIEheEgSR+tmbeVSdWJn0NdCno0HgftZfexO+QZ5/OhLQ3m43pgPZKqzy1wQmUHxe8j9BTJeN3fmqDoxKtNBx9YMx4N2rwLmQRn8P1uNUCRT7M+FO+93zvT3zPb29VzfZvkj9chQZYDHukfzRTJKqUL/3MX4+t0KR/rsyx5RHdr+ft/mgenDkXB3CpK/wIbjH52maUWKm8lOeDzybqN7EMbNlLVQVzKStvDDUNvsmQ5bMTNX2SaNk68nJtampgcnJgZWBFKTQ/WcvZhyvQWN2yOTGfeT6tjaVHGbvGR3lKemUpi5a0u3JybwceanroOVK1P1vRCEIUKoksX/kCKaNuUC1tQvaorj/PBruv1SKT/wSduJtAC+1AIgzQmH3Tq6JAIgGbAuAj7birQFvmh0KZmV7toOA4YpUkWKkpJie/Xl5J/tf9pli71ACQO7/b/HUgNCJzQprIxpLvWSgzN3b09XT23cVO2UgLS0Eh3QX6o+Zy6reJn05eve0F6wBMTE0aStsOeJABLyXYwOAF6MB4stL0l9CAddeQ8fubTAdxC/y6+L+7+EKiQEbX9tgMn0NJUCtmbLWQ9psWzdf23nAmK8pfa+/ruZwk6qZNpiaImGr0ezBweXu7ubF5iUsUdzSkEaPhBN49mT/hQW1Eu7uXTqFaixyNKFCdf+abHqiMvStx8U9ZI1EDyGqH98JKQiYvrtkzAcdLloU9n9m3fAvNKL9d1rGWqo2pqdZo0zFiADQkrwFwLcGmEFqqqEBpLMpsr/z8eOh8bShXBn+PSbuv/o9e+CNPf7XvfcB6gAxKR+KB86FrgEEk2BNaHpGBly9PZ09A5QByQXJUZSAdx4IOPzV0/M8+2uzGce2SZ/2WU37uQ2chUnExzN3zk4ry33pCa5gJaAyxWllLwoJCir1L6u9Vp8AvsFsj5H657IAGQ8wtdKbUTQTKZpm1+wr+gpz0Lum3nSEF5qc1YzCXISq+AH4QFYWjRkhcgU1gGLABkrS4DTC/ul+WSUwjvECFGAvtLbiyf4UuNdu4UoITkFkl6HfTqWhAOgsKGYmLBNQAuBz6Nj8UPD6kxTQFmfsPhEAmvE2L/e5FAA2xJQUcVQp43TOqb2sWlcO1EZAmuuJOtD0sHgjJSWGAKi03+jw8MiofTh3eD3a81Qcwg1t356ykoEMmrcM9Gz09Hb2DvVffRoKUN0uXlQdxjQ+/lgFxQb1b86kG/6+8QeCAt1TmkS6koqmnw6faAfuBBYBWK1UOx4XlxbnMT+DGQccptZDWKCov0HZi0J0dDRn/qQ9wcITcFsI7vTALYB8zRnlB/gxADIdKNWM0rP009QkKQ7qzs3MzWgzNt3GiY0MCkLh/fDGSxcAC5R1+89l5eQoq6lBZ6di6sVFepCzmGUcQPk3s2iEzfvBA7UpBk7XUgCUVVczy/RsOUxgFbgWtK4/JfmeXuX+c+3eiH1h5OCIkt7CeiP7/7kUAJY1q7CgQA3Okm+Yd9N1hgKuo0ddhS7XATUGwBFgskZYIHsA06jxrP+Jyclx2xrnkxnsr9QorNB8tHwJAsICujw0QwZ47Fnv6X3QOyoy4HZTGkwLAGlF1cMPfqAqZGPaupP6Q1n6y04qbjrBLsoOwL66a/ksoFuxv7IMmAcFUVrU0hJ9wFGMcmyvGtV+NhyUgWJhf3WswwsEN3nmvH5u6kBa59R+LuziCq/jPjaUZiJhfHx8ii4wwK9wsyBODDV5Gdno3z0zwyIa0ob60FetV/tpxMwUyYRaHAdeAy5BHa2h9glfDt1FIBbKLEC7GeGvq5N1tpS3LQLKTGy7BBYeUzKQxXsVFZyDLhGk/ty8gJvALQQLLwHo0cEVG1NTk9Pz4wfHKcPyBgnw8yoADLJIUlVVsNnUPn/NzbINoaukxFVgdV1xWX75lsUyAk8OHaRwTHAXnteoAWvj67bZ2anZ9cm5SRS/bW74N7Dra+aD4JCRi1zaMzKw1tO7NDjBvhDIiKKu06gaB/Omn6d+cmXIWQ7lo7PZM/Cbtk9zyI7JN47dZSLTKB+P7ulARzOa7+HmCG4DM0Cm+UE3WYJJ+RrEYA96mAfgMk4KJJ4FL92GNuaIuDqprqZO2J/HEN3a0GSdLJTH5V3c55k7fXIvoN7eXi4EI61zuu9O9n/48CH3jeCyYfr+/Bi/yK+b3OpDlsaQkPqd/d3opiOdoqXsOpI/hakudNlgY0m+mv8qJEvWCFj3MUFUAli2LdZ4okZ3N5xOVjE1fud2EzS2WjJ/EpISkGBmv0KXS31pfV1FpkpFYmOF/Z8Bs3B3pnBLD0UAZG9JGmWXHhY38JiZnZsunUZhuZH9/7wKAMEIjlrMqmU1tLfLriPuoiJ3Xp4rlxHAty2DOfhODiueDVc5dyFBBEDnMa9L+3Nzc7Y5B2pz8CX1KusnLOyvmWvqEgSEF+ylNC8Z6JWnQNoCYWmgPNeb+sO6/WdmJouZNUmK9pCgKVqyOY8VVgAMCEa0EVLSfdy3nX/72IXZ0b88ij8RgAvNcEe5ckND8w8ftqOdp+Wo4AmcYLGQGljqvARVpxOdLWiZxvRq8WpKQ0rJ6RLF/vF4sSDRc/sHuvzMEty/f5/PA2BWhwO83OSHi36Z5dd1fWVlhe/yLXlgAHfa5H5Bx44d446hatqoGaSk0OuSodS5u3db0cqSoctchSpqQApSGOTR5WcuRbbYfIiHAxg4n34+qTGp7nSdEoCcfU8Q5QEWL7vd2uphanJ+XlXuiRP8/cp3NNj//n15losExMyLcpAMMDUczqhUtr9WLDQ+Tp4x+ijPqTNDRK+Uu9TcHADCEASsPJgTrFo28KUiefXzLQCshHPnFPvLbqsDA2yXGwMDroGB2fh4S/Z3LP0q00fvSJEb57xXVobC1AcOiAYsFhf/1z/Z/N2i+9/iNujhcf8dgRD69rrCiwg/JJ9FAVCG3jJAZGB2rx4BlAMVPH5xm/pJDQgrWNKsQ5LPxAQeLj20wEJGpo8pa5jpkk9isj+6X2/sPNf0tYGmRJxFYGDzGB+Xx0V1jnRq0Oywc7SNvMDBANIcx4eZ9GPSg/KwlrVG9reetvJ4KONQOPgrVHDjT2Z1uLKX2f+2tjZN07jZPff8YXaIY7wUAA788gMMDvguX6+vrz916lRNTQ13DYJ58MOTk+J4dXd2slgWsch0mWweTsmkR72ABabR+CJ1eiZlJq4xThVUY0pJeQk+ExwxckHT07GdndQAB+lYJoAyGmC+i9Th8VAV6DWSpulTVKKSzgSd6jSkmZkVInthMOdJ2lGjtPHxJBmlCS4XE9G8Fh/3VtHefqb81x7+V55Hv/t66AKQ3bH6V+cVjJcYDn++BUBckjfeYI2SHmQ9hnt83DU1FT81ZXn82DI4yIqhAMhe0HwXDQ3sKFAIeih4oLh4kE/cG4q1hmf497/62TzP9xsp+Oky/hX2BdtBAI8rpYAhA7sh2qB+2mko6qcniH0AuxwduNlZtW63pYV+/n2yM1NAZGcdugMOe870iROL9fX66cbvTjUlxiXFrZ9AYMMAbB5OJ9WVF3jw6AGTGAwp6BUyjiHT8RI22MhrK8dycLKp5cwJ6+mKlJJDb6hSePHg0764CzTZn9TPlcDc6ZNbAzG9w2Fe7wfCcGyAue5XXnmF7N/U1MSvqAmg5iEPKWT6Q9P4N3cfnXBMSCmxIigALriWsUwxZu1sHS1F9aWWU3XWM8dT6kqsQPpnVhoyINzZZekaT+hce/BobXjiQ5AQGEJyKNtiUQKwtESXkfNHKu353LyTm0VTBswl3FSnP3ZM+SJMpvFsbJcMUakrsq2IZWKiZrn/1KlHjY3fXDybihDAUxqE/6c4K/wq8OabL4P7XwD8Kdo+C4BMEJE5WFR4sv/EhKttyn1lyvKVSVaDzPSiMfdJ547dm548fb0gZxkkOg6UDB4oHogqHkTsUWF/hDzQ/Dt9LdarUvZCoEFT8zXhKQNKlaFsl/IqN9ifxxglAGnYT9TXK+aJiaEYUO7Z6RbX1xddioiQq7ZuVfFBbS08pxKSEpNOBzExk16CrtOPk0G22ZGR2dkhOLrU0KDFQodLXTj/ouwu0F5fb62uTgGswBl4owg+UASz7xQFGSQVkf3p73OXf+7zzEmD8gQYeSYwnwpAkaioqOBQATM/3DKaD43hJxEoGFW/+qo8sIxur314+IHNxgwc1PY3miq95GRVUDnV8vDkoZqaloYGKSiKZZTZZV55CA0JPbjQeSG+Mz6tO40JQ675Gm0enWu+tmr1eGJiojc3E+1ahjujEOfZ1OtQdxZnj+CIyS3m6IswCiLbMxrgqMriL/d5Dh1iJi3F48k6tFJSsnq8kbQUH9eQlpqfmufvXl41HwSkPwQytv9nxunzgWiTjgl7P8314yXXnank5C9ZvvqBZaxBqQIlurOT0RpDe8kXMeG7+7YH2h6jwmrzsuKBgZKB1X4X3i8OPf/zwy/6WB9MVNP8fxl/AJh5a1+LPrpS2F8dvVEmpO91PJyGzwLM+dGBY/tnOMdQWzzRhATWpzysV6cnMIhCOnRsDQgC9OusVsVx5eX0J3gNiQmU7CQlkfL4lrh/bEUtgPAaj8f2WnpfSjO1QlB0NUiQ9zm0y0Hd8vJyzgWSh8LLujB5KDxHhvlMGNkv2kj9B6MBZD4eWdysCbpWKyvgVQgKAJWSBcUUCeuJH8jOvr9dULTGPZbGC4qUhYJVoBPRndFNnU1MT9FTY+jGAXympxxLjk1scriCQ77M+JOdGe9Wo9ok+xubNlME2SL4B1Niy8tuj2eKxclbJ7vwRTZF5hoGkrM4WUDGFYJ+NK4kON4uUpqIbCmbInxuEK0YptfsHBiXy+pypVomK2O+HBMz9j6GRiTrx5lC7M/yfCLZ9ybQBShuuAcxOHB4YPB3DqJcUb8yOjshwCd75yszgwzsO2KBE8+Q1zvPUn8mPluQe+VR24zgxemkM0pVYMcTlKDksHZ4DWvBz72gMdk9NYXFRaacRADoZPAyjPR5NEimZVsAeMzyzWplynZHK1Dv9ZUKZSGBa7vOnDnD4V+6/0wZM/VvCIDxCDBGA6EvP2PGTMZk6Awr74pX0TQJlaQ+vOdGS0FJWVX4Z7/Q2Z/oVIYuYAqyXpZZKRtsi1h0wikCwMweM/4yGTq4hDC/ydY4PQ27HR6POAmKWuidUwEJBhZxWpwd9lAEgKguVAZaNo+0g58nATgHbAGaqRmbbrfGdmjhJKBEi6XCgop3lJ/C5u5wsD8zccD2yhoLYnxOsT8GeKQTgeJGw/3/nCABBt7dZv8cvCAwjcc+RvMVsiUjmRbqrCPaXpgAjDjgPQjq8Syi5CXfMN63qL/CA3I9gwDsNyiKdKdo/rFDLKVk0YgdiFKvhogxEQBlBmT7z3CvwaafoMwP9opETYUdRwoBbwFIwOdPADaBxwD8rzon+1MDYOFWQJrFoltAMF23vEzqp+/PdB1jVXor6kMBxr9kfzFFPOL+0wH4POJd7/AkgofeAuAbEYx7ieW72Ddsebn/63hB0MPOgt4CEA68rQz/6aUSAB6HfY7cCvuLbe8EaoG+PYPEaqVTZOwip4b1AgETiOL+M4pE8asiAPic4ueT/XW8OIhvG8Ge6PoMBKBrWwAG8AsFQwA+Z25nNMq9BIDHMZ8U4HKJBuzY1d1rx1CRhiDcf0kBqeRm8TPDvxFE4FIaEMGLF0vM70z+vFBfREPYkA78dnwOEQ3imJcAfApMQBblk+0LtIID+gFjD3ojAlAaoFsgWFxUmR+7HSkpNIYCu+ygXeUndB2X5M8okpGYJe6/OkMoiGBzP915/ecpWIgCfq2yvWEBfgPtcxtSGUUVLNL3qQD1F1WIEURDUOUVB1xX64Bu47YTTo7B1KP+MA4DpH6dg8CUgURYRANAzM4az+xRxM3JCbvOff7Av/s/P4AmGX9Ugz6lpXi5UK8Mf3ef11/+QWURRBBBBOEWAOKECACmNqfaP22/PnPdBhttXpvnloQVqHC5LNQAJoIsUCPAPKrZgi0taqegnh7qg5q6VVDA0WDz07FmMDOIzAFcHjQmoGRnIzFx//Psf0JZBBFEEEFEAAQ4CX1L79js6Njq6LjZ0TPTs4CFaUyPYrQPfTmunCfrAOos/RbLA4s2+zGGhtDZqfbtfvAAdXVqDXBFxe7T+yp8uf8ZyiLBXAQRRBDBC18J3FGvdWyld6Cgx1KDVk/nQCcHAx5rj7lT5xH3kWRXssv16yxXHlrW2jA/rzI/8nSS6mo0NlID1KxQ01gCBoEBdYwggggiiOCFCoAN6KA1NDx4suxaVt0t9PXdmrzVoXUcKjh08DcddLkSYq64Y9buqKWiNpvK+F+4gNpaJQBnzwb0mEOD/TfwWSOCCCKIIAJN13Vs4wfb1g1gdJTpHZXcHxigp69PTzcvLn7D6fxva2uXLZYP4uIuyLY/+flqpSIjALr/TP68dIgggggiiEQAD8T9F/YnyOwczi0r05non5jAzIyLezI5HJb1b1ssX46JjZVdCRkiyK6EkYmbLyUiiCCCiADMKOoXDfCCpumyFQmzPXNzrrFl1xWn5TtXLd9MtMR+RXYljHj9LzciiCCCiAB0bNv8rsssrFaa+zF+thPcBYsFCUAlXlpEEEEEEURwAEDnNvt3+Vxkp9FcLo0LwX62ExwseJkRQQQRRBBB9JyR/d+d/eugcBKAy6UsweW1E9xLiwgiiCCCCKKN5M/sLuz/d409HLa2FPvX0DZRjvJMZELDS68BEUQQQQQRAeh8nv0Hn9vAgezf4FZGkP0TkADgZdeACCKIIIKIAOz0/UvwLOJcKHEBNC+8vBoQQQQRRBDBgQ5g2szWqm5gVwEgNLyUiCCCCCKICADMOPEuwK0MiGhABBFEEMEvzFYQn09EEEEEEUTWAUQQQQQRRBARALQAfwYoAjRT5oUfAX8cOBbo12DuC9nA7wC+CTiggFd3ntIkaoC/CfTBBLR9ts/gGsHDiWBxD/gHwLvAwTD91uvAHwKOBHX/2cAfAW7ue+2+ppoVbiMofAj8diB5r2sUAX8aaMY+oVj1fbSGu1v4Pksc8JuAXzX7iNP/C3zN92lfCOSXHAX+AtARdGF9AFx50ZvBhY4qYAwYV4ZVhBtV25ZorE+bB7r3ZzpSBMPAgirkoHDaa8rANXX8hUc90CCGwOEBVoBlwI4XiG7sByLQTYrVyy8AWUC1Yn8lA3cQVhxTp1ZWAcBbAGjTCAQTiMAMepQAoARIQVA4C7i8NOAXGmWK93GKx+C607IyrOAFYgpoRQT7pwGE9osuAEYQYMQB4UGS4f4/53MtKAHAjwCPySBgALiLCPbEgJcANAadWRQNkFDgNn5RccTL909DUFgRQwgIKQZeV+yPFoQf+xib6y+Bf/9ShALRz6efWoAheScaiYlqx/+CAqT5bdvGKeKB6n6Mt3sLQApS6lB3CIdgDhsbuHsX09PYRjWtCNWnkOn9fPnK7Qhg4VlW14BvYDd0deHOIyM0qQGOwg8uwxw2NzE6CpsNS0tYW+O/UmyqwLKykJOD8ICnHhtThbK8rApI1+H1yDajdsxUkRn0XEXvmirbEmWXTNXd5R3XiKMGrMB1Da51uMTDhAYtDWlsD1ZYzf/U68A0QkQ2cM5E7ZrA48fo78fKirR3of5TKC/ECVPFshPL7VjuxzJMopBX9NlcDYr5Bkyj5QZaprwjgGKgPpRuMYKRKUwtYnENa5vYjEZ0EpLYinKRexiHYQLNuw8CtG17FwfykS+nwvo6hoZUD2SNuFyIikJSEjIyFGulpiJ0sLqnprC4qC5ExMXxtKpjFxYC6EGPHXYIYFG8so2GvTRgZgbNzXA6jbINgYbAJtk/MDCwurqanJx89OjRoqKiYAXA0AAyGSkmMxMlJaiuxsmTptilrExR1dj3MTaChyDykMdG8A7egTm0tuKTT/BQfZfItaLqHVRVoWpnqRhZINoAnuKDnQXHkr5zB8rcSMIJqaiQBeDRI/T0qObHFrKwoOpSBIAtkMzMRsKSq6xEXh6Ch8eDzk709WF4mJcRnVECYLEgOdl4IpsqoZSUsAgA70jZPREA3kHWeZwPRgAI/sKzZ6kBytw2PABRhCK2hzfxpumfGroGZLFRmKtdE3Tw8cdoa8PcHIT9UdWA108I+wcnAGSulU+xYjPF/jRTzfUDk/fKjsYe13pTCUCW1A+Kg+4WpP4udA1gYAIT85h3wsm6jkFMkpaU8aOMAhQUohyoAp6l5je8//RTYoOiAVGIakDDe3gvpmeQjp3S48lJxdEiAGx1ZK3SUtUpyFpBY2REdT2enITG7s1+R8THIz1dqcvx49212T849ANKHRRinmtjDXvFAb29bEo8t8+C/YYdOGiyz/Z88sknHR0dCwsLhw4dqquru3TpUgn7bpACACT3osIVPTObskAHs6KCaqUczzNnTHVZqsX4OJR9nx7rJVzKQhYVuxKV2AsTE6pFdnTgww95QYpG9SuoJvvHIQ47kPSsBizu+ntcLqF+GiMLNpQTqrOGCDkrew6bnzwxE/PzcDiUAIhuigtSXq7u6PRpVSTBgCxz7x7a29HdjcFBnktdRgQgNlYxPqOM4mIcO0Zt4GUoBiEKAOWG7M+m2fMp5mzRJXiXGkBjDSK4KINKqDTAJTLAs7+BN47gCJ3BYzgW0E+9BswEyf6XERZQfVnldCZ+/GMqQS1qSf1kolM4FVLwxahO2fcAZ1DsH/zFSZuK/Wk3sD4l7E8LEg/x8DZu38d9+g9Ugtn42fjk+KioKJfLpS/qWVeyilGcicfAGPAbYOCLAEwJgKEBRXoR3cql2y2HWRfsHXTESNbkaFIGBcBqpc+lWMtmU07ZuXMIAqR+9vD793ly+l4kQPY7ht009m1xc+cWGh6ff3xVv4qjMTvb2N/fKxe0uqoa1Ecfwf72Lp/Af5ZTmhWAlpaWH//4x6Ojo8XFxZubm5mZmeYFwBuq9PjFy5dZmJ7x8fn29vn2H40x/GHsozozdXVPMGtE7SUp0m7eZLOg8lMAeGQkuKc/QiOrsirJ+2JlKIMPFHhpwE927VrC+yIA9BHCAdLvjRv49FOeWLUQNrNsZJch6yAOMjhd96zPL86PLo729q4NDZHDWXhslvQYAmf/69dZgGhpwYMHMQ4Hw7oj9fWJiYmapq2trc3Ozo4MDq5SG0ZHeWuqyC5eDDHrRPYXy/lb9X/wO1n/82qPbwEwjexs0QCxrsddZH8xlhhM48gRmvn0cBvwCa1ztRsWi5LlkCFkSSP7k8tI/WKxiEXQYK2trNBIVdXVZIKvK/ORH2Oqj6KfkBC2tKLcDdtX4p8r/X3fzP7o+lgI08aGb+HWNVy7i7vzqfNVVVVnC85arVYRgLm5ucetjz8c/DAJo8A//rcH0n4v86S0HdL57+Rsfi+VgQzHDYfjxrXDt28rsmBTYj2QmlmYlAH2OqoCO4XdDk1TV6mtRUAg6bN7s5PT/aLjxfOfOqXYj+7/1hZPq/r8T35iX1+3H7DPvjbrQLbZwZa4pxpAf1Fsl+b7TgDsz7TP4uLi1NQU2R9g23w8OTnJUGB9fT2OpB2oAJDh2cKoTtROeoIsPYdjoZ8xL51NvkczA/L2+LjYzIiKCikAtDM44599WJsUAEZdzBFXo1oEAH7hHQS0wws2m0H9tIzkf13/3pXvf/f7YeEBnlg0IHYj+RLqK1BBlyQFKQxOGfbOYGYQg+1oZ2KO3Yzkw6iUfgObEMyPLdC7uXWLGsAOSuqvvXSprKwsOzv74MGDFACn02mz2Zj1Y9z3iD9IREZyTwwOggLPIe4/j2eys7Kys28fvvsbZ3+mAaw+BA0mTN1uEQCb61rX+M80oAlNMAEWHeWTR9PsPwDc68TdT/7y9/DaaxRFJR0hoq3NEACmsw32598IBcL+y8tRfz3qOFIqkQLabgOGQmUM9uh9hgXkfbHpq2lvXqmvdwx8hODBPt6GNkYAi6mLzD+cPn2azTU9PT0mJoZMxLb68OHD5NvJzFSc/g2nexNrf5KUVEdXhpoWeNWstq067jhWb7SoJvveeygqUmkZEYDpadWCeVdMI7DjS8cj9/BC5h0vo4fThSX119erWD4zk8xIAWBl8XXPo0f227ft8QWORAfM43+olQ+E06k7HBppluczoBvjOG/DNNjdY+Pj4w8+gd1uT01N5TBAQkICXw8mAhCPzQjfGaRQAvs/GqOiMmLkzSsnZE9YLEYQQHu49VAEgEGAL1+SekPqFyOE+qkBZkaNZEaQ2CgUGLV5Z34KCuYbG6/Mn3HhzwK/D6FgdpbRIR1/xc9k/4u4SFWrQQ1dwnSkUwAo6kyA8j6oB1vYGhwfpDsi4wHmBYBKSC9GOig70quvvsoeVVlZWVBQkJKScuDAAdb0+Pg4O1VaWhqdrC5+nvUiQwLMe4bm/sfMZeXm5ubk51qLinrCIgAyOORyiQx0XruWM9MpGmDmtIzmyX1Op8l5IesP8eD7aL2He3P/LkcNkPDSVKAQwOZksL8FFoP9WekIDZL/oQakfMD6SzmDlHzfk0bogDK3oWmhzzNh+zJuCK866uscR+ucDxAsRjFKj6cXvY/x+NVq1VZfe+01ZqLZMrdlboW5aYYCVILey73lieXDiV+oSyzVk5O1wKvG0exw3Ot20LF64w3U1Sl2Zsu3WKgHinDYOfm3w8HkrGIT5kj5BxOkJsGQWno4T8XQ4ZVXVBKppoY9i6eVmyEnOnJyVuPjV7/1U/wDIGBJFt9faUDoc5ooscz21NTUuN3u+fn5jIwM/s1X6CaGOg2UHZSyR3GllmwsLFANePOmBABguRtxwFpHh5EI8iUABvszm12IQiP/AxNIezYOcDCCM9j/wYOKCr2xcfrUGfeVM27UIkRQDvv6VCNht72Ak2R/0QAN2vaPSWM0wCiV7D+HOYbGvb2bpLCREeVJmFJll4tBEONQ/niKeX19fVNTEzWg1Cv8YiIo8wmio6MdDsf09PQsy45ETReRoxzseAGCzojh/lehpLC4sKCkgNQ52Nvbs6w0QAyhoLJSgoCN6OgutzsXP9MA5s2wB0h8ZqcEPkDfIzxiUxrRRnDpEgWAFipHG2S5uNiAc8L+tSE3JmETseSK5BRdaUB5SBMHJ4FsMyNtxg1VrtfVNdfVr6+fZKwKDUFhHvOMeun30BXNz8/nLBQ2Wrop2AabMVlpaGgoLy/v0ZcfTelTs5idxwX6TEFMkl//I7aN1x0uVi7ZubERBuihUwyokyxSMg95n92V4i2OPH/PniDL8Vu9vYqJSHzsSlSOV19VaW2vm1E+1sGDKky3j2PxMQLC+8CvigDQVBXroe6qyZs75fF4cnJy6BfSQSwvLz9p2guM3ktelFFrN9h1xYMzDRkNliCgd6GX7C9WjnI8i5kZSf2rI51o8f1pvLhZ/9IQgLa2T7cdf1I1y+HMGTaSraUzm5vlm9AQyBDwBVmjuX10M17jDZHKORmEGWneCEeUG9FosL8B+obsD2QiEtyIa4SBKUOH+XmJrkx0UF5jaIh0U1pXd+zYsdraWrL/bgqdy7fGWLy9vbO8ZX6Lv29yknwZtPtvWcrgfZUnlJeWF1CH2B967oZJAAhpl/n5g5ubXUAunJQBxk/hmhC+hjX6oX1aH4/IUe6/RABhSf2TTdgmDfcfut8NcXWz6iLGAf1kJNN8n8UMSaRiLzCQMlL/cbbCerolm/V1ntuax1OEGAQFFrsTThJaUlISuZ5ZCLL/jpHBwxwSYJoCgENzOHXnOtaDXCtVb8WpEkX9tJ0gx7CzMLBgA2BXokdpsymKoTO7J4SvqBns6nRh2XjotZD9d6L0MFY0LELZiMlSWnduM79z1el4AgC3Ibi9c1XVQXjjLHyAzv7Zs2c57sLMMKuA3mHYFoJR5MToVNJMqaj3oJUxGHDtmvdo8HOzeoT6afRDa7Z9/6IAJyTUbW7O37mj7O7d7jt3DkyMnWkS9lfH7+QjcHz9WQFYmZtbnplZmZ5ejltbyUQmyZ3Bii8HlgpBBycVqSMYsdtVtbPvmQKFgnLBhgvQxyfLc2QfPsC36FVlcYSG4Lfm5ujFBCoADO0M9/8kysmatOiKIrI/bbS/v2fhZxrA0Y4waAAN6ARyty09TGuByPu9Wi+PC1jA0XC4/+3thgCw3f6M/fWGeMT7/jnBRAApqEjRUhgEhLYIKg64CrwL3xDqp032JL+J+jrmUPTcVIQEdgExfRvYAe+31Ie1A5quBVmE9cpwyu+8AyaFSNwycW5xkU3clABQJ6gWdKEI9qncXH/JwzpgEfgz/lJAbYBDGZzyBz50YMapOTmG8QTOPwZc8cH+NJgTAIEMA4R5JfD6uhpZoanAKi5OGRBcEDD5+LExGuw9c25wUNhf5VXImHSyxBAYVi1Rd+qK784P3pmPvTPvmqu6JOyv8+gRCddCFQBieXm5bmmlBMvUQ7J/tu+I2wILLRrRMr1SdNRsOsZu59XoRrFGGdPRdYIPMOjmB/gx/rHGb/G7DkfQ7n/i6hFhfxWlxUepgFqCgFtPgwAJy0LHgpcGXAyZ+sWvJPWLkQJCd/8ZURnsn6pbhfp5pLSHbSKORADr6ylQ7M8jQoUVIKv8E1+TG0n9ck9NivrrGAGUwGOu1H2664lI5IQu/vgZ+8zS0hLn/OycgsLsP6emsPvI4lB+PlFLDFI1/wXUYF68nzKwsjhVQEWwU0i/MOkKUS3oQiUl0X9Vo3b+KfUN+MeVZ9hf/r7mwLDj1zucX1BBgLC/2kbzA//sT/xjhIIgBEDKjabrSl9YoDwGpNhUehkNljjgoetpECCju0wpGVM/CSP1T8cZAWAOuEPLyrpTX39nYcHBtkflFvefVTmF4JBJ8ybmhNWVL68ur6yusNfSi2Gex8/vdMHlhtsDjwyKSzLN5BQgKgaNAkCokTS/iNoGXC75YqDTTQ33v2Gb/SlvACgAEgRM9fcbo8FKm8MEEYAcdURpaOwPDX3oE1vCEo7Whur+2+0G+0fNLzXoaso/zc+kZA2BRQUy/EvjRNJkPZm0mIAEeltSg5o0moADjFTA6iu9YWSzKlwnSP00RgDAPVNF7vvFDC1D1vp0bXQNDw9zWjojV6ahmY7Ydqxn7t+/z0lxnKqYgxwOkvHzvN/gd4nIhj8Y3qq3D2smO+ZwKL5jB+RwAhMp8vtN1rcPATDYf1PTyIf8bfpXy64D35jGlQMY/+q3L2+evnwaNM1LAD4zRJsITxWBiaKyUAJukQUFRhxgb2szggAuEAOM1D/fBMklKPdfNp8Tu1tZyWUQnDVI/WamQX9KnhpCRlL2Ki0b5pyJRSySiVh+AAuP0um7Oe1gdI660Diws7GxwSn/HN+P8aEejKnpR/AzhLqANLKg3P+UdTWqQSNxGlPMngYBs4+MIEDxVDigP5sIiguW+gk6Kjvdf1roqX/ee4N+RrH/akP9ag7cY6wgEgTdTA2mUA7YgGU/+Z/+lJR7KclL8bB/i2GBRreI9WixGGvK2Yk0s7piVRqAV4Hrz007MVL/MdO5Qv00UXottF13jugqcKTfZtNsnJfMMQB2Qg5NceaPTAPlLPXu7u579+6N94+z43MNIGeUB7dTkKlvsfuIBRJ9GzOVjcFPWijsTww+O2GTxKTzV0mK7AYUvv1t/J8o4Ks+Bv1ftABIhKoITEwB84Hue2VMCWUQMPN0Sqh1odiY/GOBxXD/tQDKoc+gfmOrEA7d0/YFq2Im2pLiibEpTE1jmqKZlRXIOgB+QeKt2VlGzQyoGT4z0e8jSzHC3kUPa1Pclvj4gNYB2GxP3f+m7ey/kILACALmGATYfhYEkDgQJox5aUBDoOyvwYDB/mywOHoyVPZ/8MAQgOOu4w0PGxpGGhpmRmDvIk1oFADWUXq6oubi4j3rlZ3btm1TPO4cAf5WSspCUsriNxl2aPRDDQFgG2Aim92FiazKSmOlt18xSBUN8JX6H+2NfxOK+uv1ekbh4dpzjSP5c5hb19ctvZbrvddn/sYM5yhTCThLjU4MFy0ODg4udi/KlDle3XcgFSYN0HVlhKbJ0dQKT29oGi28e7vpHP2qqVEXuolt/DpcBiAaAPy8CYAk0LwF4N8icPCLxv4QH38so8G0tEdFDx9qZH+m3eq3ff9A5pt3bFM/j492lvYLFAC61GTNIQw54DhRwnwUO69p15zMwm7PMavBQbpRnDzHmJpDwTsn9nLWV2dnJ6cAcfkfiNRUyX4G4f4f8mQa2f/nnSkJApQAtBtBAFsDwgIfAmDS8RewkTLzIwJAsQ0x+0/dRUeHmgne1pY1kHHqw1OnurMahr6XNDWlka9dLtnvSaiZF2KzJaOaEQDF/t62suKUCOCbhSkL30xZXNRWVrTNLRLPFrZkXqNqBkVFqKjgyKRsKrIXDcZva0Ai4DDkzEj9N6rMjzJWdLjYX2Y/n184H9Mck9aZlt+XP544/iDzgeN/OjajNmNcMcn2ZOZ8mtB0HMd56bM4G4YOqvtdX00RpREWi2RgzUTeYt5p2DDu76kbWfHnGnEU5PIvJAiIlov6z4khN4ktnm7p6yHMATfWhXFWCedHliyUHOo/2ttbzrHfDGQEMvFfYFA/bRj+oYWJ/e3qiC34B12hTnR2o5t8RDY+dowsYXYNtczuVMxC1/LRI/pNpHiG0vSkOM2Lc+mwDSZb+dadO3eYXeXfIEgWDDT4GXOgHBvu/6vb7L9zUpORBVpmImjiZ0FAIxrDqKqiAc9CN1+bQv3UACoBjtaJAJhy+nytkurspAZYZmfrfvjFuvbEUw++Vz84yJH2Y9HRTMdxJJMuLYMARc1s2NPTqp9wTroPnNqOm23P2fIyberI8szQzJX5wz9G8ZeRRLqiALjgojJMOaco7etU95ER2eyMRKbEgNg7C0RzAKrPGdmsMvdxet9iXsXpn17N7UnmdGbdaH7rxq1/3tKSmvrb33t7xl497/zTzs18tRkch3wZbTD1z4qp0Cv2fTtocpYxG0Jyr2ZmRjJ09h45oDGt6h+fAq+E/HvDt132FvDNbdPNXT1aPrBrYxARdbmUiqrSoYUAIwigsa/2P+5fHuReBuW8hPj+ZH81D9osfrrN/tPh3i9cD8X9Z9dlqM0tsR7gAZXg4knmo6hsAaxFZ2mTc+n+s6C4M+rdu3c5wMsJSBQDLvPjIu+trS36/hMTE319fWT/27dvy9Q3zv6kePjYBbfKl/s/3KPe88r+74CmkXQoACoISJ0pwc80QO2CECb0PCMAekBazhyKCIDh/ivfn8egIKooY1Mu4Hu/53vDlZU/LSv7Wm0tZ1sxo+1yubj1CpdhM/Dqp1RMTKhIeWuLxKEGiX0jXRkqgTVh/9VVm7YydX7FVvrlFVv2EduRNFvaQdvB2LFYCgBHLTmAxK7Cm2JbeszCp1dL9pf13juq2EcWaJw0aKT+tZkj5H1x/2P1WHM94D8BH5hUTY2XuXHjfNTtxsarr702E1235Dzg3NK3mIxPRCJbi+kdpUzMAuqFvwBGFt0sLMhkdImMzfQ7cXNVHtVul+wcQwGfyyq7gJZQqF/bVQN04B0EA2re8tracmLickKCHkwKaIcSyORe3j7bN41lEYoqM2EqgwHa2NiU3jw8Nrw+yvyGTQ0f2auqkqoqURmII/+JYn+s7P1DtCDYP3gB4HYo3ISgGc0d6GDGj72N7lZNTeBiabOp9ufx2FtafvSjH5FxuA8EN1fhdE8KgKz+/TcTEx81NFh/rfWjP/zhFlmPtFxUZHInX8YMJLq0XlweAJGJTHH/dy8DyUGvrzvd7h6gBCOUAdkmOoyJoODCOIP96fXhaH2o7j91l2zb1yeL7M+dO8dllsePH2fhc9cNvsKMNhfcMy/HDZr4CuWZWzYxV8PEHTXYzGZ88UARLWkFX1mx2ZZttt+wYsvJtGWm29IpABabBf8PHnjmMc8UIjOl9Ip06ENjQwxKlMCXqDVQewkAzeqd+h/qi3lTpv3odSRi35kM79p/2+SeZJoEGiy3jo64JpJtQmpqYY5LaeK+oBVIA1KBDB8L6RkwUZjZgyiZ9AlkTYAJUCpk9idvhyrCM/A8u2+yO25HK5Rlhsz+OzTg+8B/DnR/SnqB/f3LDsdycvLysWOs6hDHAHRATXOQOQh0eTAzQ85gaVIeg/a3ZV3YL4+PX8kZv/9nx91jY5vnS6ovv2M2+aM/FwG49oP9QxEAbohIAaDdxd3jx9U8VKZtT50KfGsGTeOXqbiyCetWf//DJzv/kP25x5Ou68709Jmioh++9VZHnaOjoWOLQyqs9fJyn4nvHX7ceg/e6AFoCmCQngO/5MWtRgsL6QcoARDDVNh8OmA6qAwe3WRj9iczYOL7KwsODocsBIUaUyHNNnIHDu7DwRmNjL3gBeoxX6EecPLVA6bYmTJiFfDqAezGukzLzFzJzPwKEIcVr4GCs4j+o9FHcETWEpL9F7HI5KmHMsdaJrvV1flNalslAqBeGKn/U4r6VeaHHc1fNltHENA9HtKuGr52Oll+bW0aNzkg5SYm8mey8fNIY1vmK4xhyMb8W/N1MrMCYLXjgmNnbocixNwp1Yj+E3sE64WRsVktYpGzFVHIx9TuZ2wG9JIoukbi3qh+pfr37qNlFDbgIAKEFuZcECv4pz9Fc/MScfgwE5SKpUlAIQ4CFxbqLMDaWjhuakNs4snJmJpSgRJeB9KCebhGUpIxI6j/j/yIWfLT75yWjR+EfczDBPsHQ/2hCAA3oLiJmzTKQP7R9aYm7oJMGieBB3VFlvalS3RJ2HzloTNs0Gsu11pUlP5kBPIn+fltR6faT9ycKJrBF77AgqWT7tvzrYA3BlDRA/QCwwEkpoRY3YChAeGi/6A123D/HXAY7j+7a7AqNK3KeXKSOldYWMhtNrivGTWAurtzEw4qMeMwTsFias7R3886Ug3bIZRk/lGQHRAkK8NRwA3YgD8KAWfL2GDjEDxDgcG1Qf429SPn5pQr5hMJQOroqLW1NaG11UlyKHKXGckf+EDu801SA74Ac5ANb/Un06K03glmzru7NbbcHQJAAqAAkGPJLWyt/BKCQec0rO2IT2Y18SxKdBUpgcVCT4A8SAmiJJMEZfyNMVMAw28UjOJieQIHT6LESuZBMDJgu1pZUcLA12Wz3vz30POPgT8SrsZtaMBvD3TFYlcXd6hettuXjxxZYrHyrkMXADIXm8z6+nJS0t3h4anpD/+OanYxbyOUpysxm9w7hoxxxIxnux9VIb0KBaSufaFsLXynMgRg0if7f4pPb+AGBeBI2Qo3EKRRA/LzQ5Ao9hgKCJsv29zMDBuf7nbjyRzE1vT0lpwbrYWtbVobowyqNNNMbLhmb7dHDMHBEABaPl4YFrBgCAB9tzDM/ZdVoOQRgBke7sPKHVgN9t+5uQ13PeP0ds7Q5TQtGPs9mRWAZWU7EQPkefvkyEUuE3TMoQ9iEEtLsnzMrwDAbif7pz4x59b/S6//RFF/Curuwfht2i6t8RPRJXzy3BD2QQguwSfYShdPnhzc2PjWo0e/t7W1RYtf+3SNzCkCwD8sFhKyKht5oiKDJWrZ+fNBbdT9r4/gWjZ9XlUU9PQZnPHUHo8qHHmMF/NyLCIOy7Nf0DFiWZkEU3n8ZbJ3I/md5+GvZ6vgmBCFS9Mo8HQRZD9ItUlc3xmAFlbXJtDQiCrIeyczkP2BZe5Us7jIv2X0ItStIJIrx6wJtw/ldjomRvS/P++JSeI3QkY1MA6MVeER/6IlvshHNush64dif1K/WHrpIps1jQJA6g49OiHTMJw2appuyGD0SAt+rCJ7rZWulOyuw7Zu3m2GuP/jwU9L6HnxAgAj+bOGNRw9Far7T6ytydQ3LsAmv3OHpXwKuG9wvSs/xpEAmTQd4D4cZp8Er3ZNQKJafGesa3W54BcjrakdLVbOx+nrm3jrSn0q6lqUyb1ou9b0e8BHV2AHrsCAseXO3gLQ5aloT/H0FqaOaGVfP3TIUXbEWep0lbrc75KZlK1jnVHaHOa6YYuN5SCXKiry9i/9EgJGE+DKwKceXL0KVhAjD7pK5DvqAVWFLYJqc+ECA3DlGzHvFeiiJXkIMMuZ0dMPf8iUIJNCssqSzYMyz8sp9q9pQl8jkBoK+4cONnh5NvhabS23KlvOyWGSAGIhRgCsMI5nXiu6dqfoTt9Zy+q7775OuolByMgEqoDf/kPgTwHlCDOuARfMaoAOA8NAIYKAsL+4/9biBfH9KQD0JIKmft1XTVss85jnqF4r6GS1LCa6hPppZtcZu0N1/wWDz8QBLwAsh/C6/yKxYvT6OduKOxlQCfyu2EuMfwKZM+dz5vhvAW4D/XgGunr4l8mt1jRoNACm1jS1I5VTMVtTLa1WAG1X6toUkdcCmg9iOiSPKcEVYf+3gTlhf5o3/jV2x/376uFI9+5VPXz4/mD1+V95553V48VrpWuuIpdH97g1twsuCgAf5DJzbab/p/3N15pbWpbYYEknDG7J4YGhBvAAUReZQmK6n346+VqVv8ySYlKIfY8KU1/PGDzguYskd8oGJZYqQsdrcFDFdszvaZo8I50np0goXZlvBLIBDSjbd+ov2GuS/dzcUmLikt2+lNmOx2rjgTAsBHuMx91aN+mmLWca77/PYUB126q5hyUIUHgT0BF+/AHgX+2tAToM/IMgHxzLwV7D908pWiDvi5GITNxZwOKwiU1x/FkpQxhC7Tlx/5n8Cdj9tyEkvGgBMNifzIKjDcL+yusJAWQQMf0JONsKfqFvQ/LgPt2uC4AFiAG6fdCC7o80GN9wVihN6InEpMwXRoBWWFutFICszay38Bbm2gDa3wP/3rX93QauPMQV9B/HZbR/wNECYxagppnYQFOjAHDs6/r1WNu5d9n6L7EDcM8D6OR9SiLdf5euBGAFK5OuyXZXO5zgxDby6sKC8tqDQT2QVCN0rLz+lRVKrzyPm96ALJ1TXhFfCQI8gwy/FRQwFyQP4pZHsjHdRNVSJ6+qwZWkz8jxLwWa4A8shzfftJWVzTl/ZeH3L+LLauJTaAKggZjF7BSmhjGMjBwORaoRFR7Dg3jsMzKAGX8aoMPA6eDZXxx/HpMLDfbniJGZtFIw0ifUL+sMFN8Z7r9JrIXH/ReMemlABT5TsGUaAsA+GR73HzC2AHOOj3OAl09b5XZM0b5JhHMuuCCDHwMgq414Bp8CINYeMEvwZhewsIQlQNbk+/bvVoBWZYmtidVz1bIqxZz30f3X0B1zGUAtUAbpMaS80lJey/8vJv3SP2aS3Barxnb1qioZftSgxSKW5t3OqxqrNmY2+AA77hW6ubnOtI0e9EZA5UD+F+WJ7bDbKQBUX1mhTZpSpRQKmNZ77TXVoiYmVHixvi77uDHdxJOrSyyHzu/mUAE0KfOP5bSo3rS+x7GPx75YSv0zH1VF+2mLlG6J3YxR/HDO8/A9GrX/4wHmr2bK9z9YIJkfnceKihBcAc2fS8hkN6lfDFYreV/cf/aygN3/OYQBL04AjOw/2yd7qXn33+w0cIBrfbkFE6d7cjoQfIB7W/IB3NyISYZqyA67L9Eq2Wb/GHXEPZgHb5AemOwrBYuFvh4v5GtimbA/WoB+sGWwUOiAm2F/JQAw3KCTsjerTgVITt6zKTscpF9FkohTo73+W6PL5eJCCq6mprKyCVNcKJrBQ+b50PYJubnK9gfGVkMSJDHCo1hKaKtDr5AuVbXN/uf81QOzlkwMPMCD7lM9y8e/QA+UTTFAAdB2fS9ajOoqA82hRzqhf18PyFHYc0xYAxqCZH9x/xPy5kn94vvT9Qn4xjRTL85gxmB/O+w4eUnc/wAaqD2c7r9gSjQAnylYFPvi/gMyB5xFSmbhLnuc38lJPhwK3vX52pz5w3e5xbHah4NeIX2unByfjmeelwDQbgFbaEYz74V7JBzH8SQk+aD01i50UeoYBKD0uOwqtXsK6L6ifmWtT7fpN9+LxoEiq/F6ivlZFLJLAKkY8wuw2bhzeHpGhmW3VAFXs7e3t7PcuMNVXJyHt8KSllxFcEHAi4YWinLJnChpzyMY4VCiFdZpTLO6xfmurq1+yv6F/q7JhsSvt5S1tDNFLxOfTCPaz10kIIHGZrQgWwLZ7T8BLuNlh47QwIFxw/ePz517Qv1uWlElnL6bRxzifD/81tT2EmJ0BtWYj+H+AwG7/0sIG16EABjsz05isL+5bK8JMiMtlZTQhxpub+fOxlx6zdVefJ6t90IwPniP+0C0trY2NzerVWCAqfnmR4CLT0OBttttH69//AiPClBAH78c5YUo9N5izwYb32WNy6pyJCfTv+AP83mV1m3bCrgHaL6I1YQGsGBkU9TBwSW0t38rMTF9eTmdq9YPH+YgOXcx4VAKd4Q29s9guVEGTp0iTakyS0oKjX71l4z6jQwTyy0rSy0160Qn652JPpKtLGzMRGbWqay8pjxrk1Wxfy78YxnLk2WTM03ZW41qrz82lfDsBkqvhFPQaFhZpHwrA37vz4sG3AziHePtWdrz9Zhj6Ow5v+wvjj8tLuf2+fM3z59fSDlvb61yt/ptHixMEnYxihE4DPZnW2HDMeZ9BrDhwWL43X/BnDrlZwe6SEb+h8kQ8xt/mgUZlp1yfBxzc9zmgQMATPEz1ZOdnc3N4DgpiEt/mfPhHm1MZHODezqzaGhgdZDP9l5wlCrjARixjLRZ2qgBP1r5UQlKKADUszzkMRqgo6BDd8BBARjEIGucTW7V4sLpV9VVTpygz+xPAOYDY3/NBLHqfjmvoEAJ0+SkPG244w85HF8bHk7PyUlLT+dMKkMAuIMeU2qPFbpOn3adOcNi894i5SWSAQ0hg1EcGwsdOaYP+/tXPsJHD/GQKaBVrDqtk1VVJztP5+Y25b5y7hVkYk8crz2+2Lh4oNF5oKnpflFR2LaDpi6JYXlYtkYytrXS8cLxDfiCB/i2D4fmDwM//cbsLl/OFV3zLwDMshm+f0zW3z937ttZ56bvnpu3V9tdcPlvGFnI4hyRIASgG92GAAAg74v7TyIIxv1fRdjR8yLcfw88hvuvBqjCBRlcWVjA2trGnTsff/wxaYtZiyNHjtCfFQHgQxooCXRmlxgZNzbKfHOzu68kYfWCq80y3GaZa0v0LN63tgy1kOiLUMR8cypSRQCccNIlHMUogwCVz62/yKvwWv5mtbcAAwGwv2aeWPfiWFL5+joTQapJcn/HT+4MaFo6n2PKCbJUUAoA8/7M/2xtzeTnb3LiP7WSpcUbslh8FZLA9HsHATv2Hwd3/oKkYKebUfyWljhuRTGgs7Hlco2wNHLSmE1ki+6src091piHQ7mAX0KPAhqR25j7SuMrBxpdBwoLDwCt4RKAZCSLUdyNh5dyKPiFhl8GrsAPPMB3nmnJ/xQCzB6+csUv+xP/zPe8WAbjZP85zL079duHzjfcPT8zVzPn0BzYC1/BV9awRtpSYyqmMYlJg/35dfH9xd8MlKTF9gPL+Iwwhann5/7L5j/hBfM5Gxtq1gej366u7icjAdwKlP4sh0XJZcxmbLEH0/WtqFDzzZnOaGpSymEObRZL24ULbfHxA/wKswA9PYt8WMr4gzZPG9OtFlhk6uc61tWQclEdfw/ZglchZfpb5tZqlv21cPvXdBI5ZYY6xfzZ8LCKBrhf3urqPEtxa4s/mZwhz7aRZBFviJGMv1u57PNKvt/77cB/xn7it++8dk4I6RCWA9mfZcI4wFjGwBaRnc23PJWVnTExuQAtzydLH1TsL5bdmP1KBg5ADM1hEQAmf5i4oD19fJ3dLgKww79+DwHibYSIGvhFvQeYhYGPgIPqojU4DLOohcAYaudIvVrNCFUxV8EG58Z/VjsvohbBw/d36QYK9beicwpHYMlTvC/uf6AQ938dLwF8N6Xtp77oW/giGyZpUVEw+03YwUKWSd8MqIeGwE07l5a4167iM4uFwiBzDSWMN78Kj3gItIkxaOD55Wlfwppzc5x56nC5ZMYhyYAiZzwObO90iW7q3fd9FfBJZbvjfSj86h4TaClP1OKxMZaWiqAYHRkCEBuryuzQIeodRWLvmT8fYDdYfb3h1cnfxv7go53XzpWXQkBBAU22/RUBoEyyzkUah4EuQDTg5O5DSo1eloRM4BUYGoC7oQsAUxYJSIhHfCxiN1ifTidtD802hy8geJi5Yr2ykPFByOcO/ipG6v9hK7K65UN0GEg69ARTU4MRANpLgcs+g6FejPahhiZLosiMKv28T+DJc3MVpclGTBL+6jq7KeleNn/+/+y9B1wU2bru/S8FGhAkJ4liAAOimJ0czz5p9rlnNt64z3dzzjnnnHPO+Y4n3JmTdpysM86YYVRMgAhKjgJNqu9Zs37UbYWWohsanKlnv7umraaraq1a63ned721akkezNY3uj32h2kQF1qfWacwNNDfL9a060GqdPa1mboGOYQihhV57uG/QeNy2d/C/vjbS69lJwMV4nEBUJ0lJcXhHW5cHXKP9YqyVu5yiouNRV8rr9xsKSASWx9l/w1YFD6qAZ/EKQDek6BSAvskaPQlAU7GXpcrLQANshXJ5TTGz/6xl+MKt86x5TyN57DARowxPjbRAjM8HTgZrQR5LZxsAdcbRhW1rCrS0uxCpTb29QTAvtJsudMOZiLY/wERsDKgniW32S4I7PnMHu+vBPuH4aS/DhM/7GhGfAgwFLFe6ks+n2HMh28as4hbAOy7UVxcOyUgeqMP4RshVgSZPr+IHdt5FBsW7Fr5s1jchXNst3N6pp62RK1/+G8f96CFUAvcYC1gc2HxwWP/L1gAT91XHK6PfhdivSJA83wEINvBKmAD0THIYD/9QwxNMGEnoHvu51OPGtYtRuAcWPbvIYDBDaw9rbgdIQABAiwHTdBsbHWQxALYVOc441e5ep3r7bTz5VIPFBWZD6uMAN58fst3ATqgBWM3n9pI3lL/eRgjgXDX/3H9YyP8OmPrBFnw22U+6mp9w3FxH0u1neb0AAOTTHbQcZ7zH2z8yH3hBb1tjh//cerq/JRv/SNAgAABAiRFe/B8mmmzFl3pOHtesfNc7LPnXxUECBAgQCAAz7MQd5hpS04hcw9btrB9O/X1Zhai4/DVQYAAAQIEAnCSBagwtnGjyfraBRB27OCrhgABAgQIBKBxMfYX7OoKoRBfTQQIECBAIACFPIpCAgQIECDA1wAbCBAgQIAAgQAECBAgQICvDxzXdQkQIECAAEEEECBAgAABvt4CMAz/Hn4EnEetBv48XMEvRuE/wjfAgTT4/+CXiAbHh5XDt+E/wG3fJ145i/N00dEB/xCOgQOvwL+GfnxhAv4L/AQ4UA9/HW7gIeYaSjTG4H/AX/XfrtZhGR1/9jr8G+/ufg5/CrYtp8W0w9+HIz7OtB/+BtyIcnGvwb+DIXyiCf4i1IIDu+EvQTP+8Dn8SagCBw7A34q+atl78Idhawxd0fFnb2CIo48n4R78IzgOIfhN8A4eVoluDsPfhTaWQBj+O7wRB3mFDHPyzlMdARTA8XnbRoCvyote2ozRru3TW0bXn7OVDTnGDBiEIWMGAaqssTqomD96PgGeSgHYDMfhmDF2E+Crwv7MU7+1u1/hV6R57L8BmIUhGJQlpMTrH1vnKTonwfKy/hEIQMo89R+HBlYHAX6RNcA96/5726eujP6Z1rJ/NkIE+7sE8DTA2kojK6oABEg6FTUJ8D2ioAb2LVjUKspxRuE7RCANfgJY8HOHR9HWRksLIyMYeCM/Bcd58dHfwSkfZ10MGzaQnExaGllZ5OVRUkJ6OkvAx+mSkqiuXnQBVwfcKAfogE95BC9DnlfKaCeeWCSlUg87gWi/9V9FDk4yyWmkbWZzHnkllGSQ4b96/KL9NG1dHvvLXq83d8Q//De/hdjAhhRSVMYssmwZ9TluDXCIgJrwxYv09GDZnwM5bKeRU4O3GLzIkJ1yrxazf7+vSm2Hz+K/LA+vQfaSvalpwXpCu2AvPvH5AlU/ANu9k0aetWqYqu9RBZdh1lsv8ciRGN5H0ELLda5PMRUhLNvZeGCpst6DT/BACN7w05tsQ4sDh6FqkTrxEIZ3iBcLSkSjJwC+NWAn1PjrgQvrJg0a/SyKePcuH3zA2bP09WF9f6qP8eIxji34XYxd3xMAkb5de7W01HTD2tonLGXn63QpKRw/rharQ/k9wAINeBnw1exgHH4ZD/ug3tdvF1bRz0QVAJFjAQWllG5lay21IsoVE4CxMaP07W/TBrNou7eNmnb27cM//Dc/fmZxAUgn3StjNdUqo/7pK+/rLk2258/z/e9z6xaQzSs55OS8BUgABhk6z+AdTCt87rnHVoZ1o1aqpwHx4zX/vSlSA3YZs4hBAw4Yg0XJTj2xqoiqt6nq4DYG7NmjvmQ0YDnoo+8MZz7iozHGcKzv/2NUVfkrq6cBKXDSR2+KXwMOweFodbKiGhCyR/clAJ4G7Nv3a+EkvOkJwPJ7/gh8NxVO+omau7v55BM+/ZT33+f69f3sF/Uf57gslVS/J/bOSlQ4jiHrTZsM4xcWUlHBjh20t3P4sFECixhOV1amHq2mrMPaHu3/AHfhLLy8zBN7GrBPtrzfelWUGjUCEDlmk11IYQUV29neSmsDDbvZvTICIPa3Nv05kNdOZrv5l38B8N/8SI0aAWxiU2QZdUEHOagPvjRAcKNqQDhMVxfXrvH22477LcP+8/7FqaEhpAGDP4TaExw6xPR0xI+XKlwbfE58eHW59XgFWmJhf4vPoB32w4Enn1Usbewyt3+I8c6Skti1SwH1soIA3cE73DnHuSaaqNpK1Td1UFW+77J2wAVojI0ClolDMr9nmYxjDNPTM/9rAv816yebeM9r0yLKlV+71MFTnGFRvzWx/y52ifetWacsBrySmsrJZ2jEPi7pYdadnQxPDoWHHgw8uHNn6NIldu826jMxYYLyykpiw717nDuHFYBXX0Unf8xptPW4rvAKqfDMwuWgw4SHGe6h5zM+u8hFucaddGrPNNP11BM/pLeytraa/1jz5s9t/5u//MtWDu7eVTNb2QLCYmWcYWaSySGGHvDgNrcvcUlNTp+N5whWA+IIBQzFW3Nz5tlfbQvm5rD7JQN4X0U9zAFfu1w4D6fgraGL2a1Q/zTO8tF9txqQn09f37htHsZqavAH3VO1KutZeJJiLFE4Ia062AiyN+Lo6yf87Y0CF8bg+/A9bbvP3L6t0Daf/M1s9i0AkXqxG08DcnJWUABcIjE5aXx/a5cuacBBYz7W5J0RKxoRSuHEY9H5LLMTTKgb3uNeCy0XJi9cuDA1NkZSkumMW7YYRz42NDdbATD27LOsf0RWUaQAWHK8z/1b3LrCFflTAwyI/eU1q3CVVBIPJJW2b/f2FhTUFBQU3N28+cW2EdvlV1AA/jUWi5RRbWCccbUBCdtNbkoALnBBCufiKiwooCCLrFg1wAXHY3lL8dq6WGFwBwcd7Z8LpZGbq/1kZrpPvj8R+DVP6knD8JayDvxN4M2nUQO2brUmAcC2EMmAfwGw1C8NGGVUdZt4AWgEquEgXjOI8TAL8PKyOPUiXOjn4ve5ffsG+Qrc5bTtZKdfAXB5FDvjLE/UMzjMw/P9z57dwhbP96+gIm52W0QDbOfvp1/N5TKX00l/l3dv3JC8qbUo7jRNLga8/o3Xf9j4w3O/d9YKgJSgrs5HRi4B8F1FkQIgxu+g4ypX88jToKqI8nM+zyW3lNI4BcBz7hzXKTpbVFhYWFBY2N46Yrt8vU0Fr1TpomiA2sBDHqoNiC+aadYde5/3FQrIUVILlNN0hCNAzBoglrcaQMGX7D8/CmFVQVvttOYyj/8D34KNUUvwU0uw/yngz3o/ego1wGPsy5eZ6uqy7cTE5kVF+ECk+++JSeJ7k38N8CkALy3Lnb42woXvIUfgwoUyeJ2GAxyQBqhV+xIAd+nzOCv7wJx1/K2Jayz1y/ffwQ7iQx7eyXIXErBYTFF/JpkiArGbQgG1Hfmm9+/HKADT4UOHwsNn7509t9cKgNmWlz/KE2ukAf6ryEMZZfvYV0JJMsnSy1/hV8SPqqVaaiUM5ZQTE2z61/ZtNcqSYv2vJHXLltlbt+xu2b59Kx1jLlZGuflim73stVGm6FpN8AY3lOdQAQ9z2MGJWQPk6Q8NGQ1gZ2QCAMv+ngB4wsBvW8j+wnbmUblECc8v9qPtC3loPSMjA08D5JB5iSI/AtBHn3X/de9ISkq8+y+ULvgUU92XEoEQlPpv5b294n3L/s70dMM8+6sj+5oH4OIH7gr2Sl2r5/5vmkr2Rn7qqEvAE9tppO1hj/wEebVgAk/roMWGsBGAQzXhGrksSgZYGx31X4PrEWo9ysaL9LexDVDv6qKrm258I3r6d7qCirLSstLSUsrKSE/3Rn0TOQEqREhcL9JXARULyhtQ6cQmAwzEms5ichLL8qNjjijeNUNAXgRgtQHL/makQqiALNkKZdQcnlo8ytueRxAOsxQWH/3fvBmf2LhRJuWwps+x139iuru74MCua9nfEfvfv6/OZdlfWxZDUvyPPMfbWK9e9Xz/pJHx4/PP/BziECsEJ/qTGp4bmEuuHfANh03XnZrCdWNYBVk/PFQ5PXxoemjIHWpxur1kwEsvrU4NrmoVRUACqWigmGJFAJYZRWLxp39TSVUbrUyqrKyooLJS1n/tWuyp4Dg6nDSghJJ88tUSFOuMMSYZ0Ic88lgOJp1JPV8AjAxaT38sN6fioWX/jZMIc3hDQGO5uQ9NEJCN85A9sBljbAKDTbGzz9ON0lJL3cbp7+4eV2vwkwqeYca6/7IY079paY/bSvamyH3Oajk4ov4vfX+amuTKeOyvRuZLANwETzK/fdvz/RW5HOc5z/1PJMElkyzplwGOYz5pK4sBc3Pls7OHDs2qgw/9kB+eOzfpJQMaGha5FvvJWfcaYAUyk0zAMuMEE/GnfyupEevLUrWxZgSAOFPBLrFAPV4ykEKKTQ/I5phjOfiYj1Wwaaaxw0nGdPez3zIs3wlv2f3Thv1FL5u+3D9LutlPlrVXPeb/Lcssp7PUHXXBecpSwRKAiCBAAuDD/R9hxKbyjJWXJ14ABMfPQPpncAT4uyvVxJ27d637bww89n/CQHpSwgclXDx0dhret+5/hxlvFe9b919cvBpnjdZdRhn1GC03V2Rto8aYsfcQEgBjp+dOawjISwZUV/vIq6xLDUgiydNI0aK1ONO/gHH/qdSW4mJsEFBU1N7ebb/fv183InEuyRRT8iJlgFUCeQb4xk1uypE5zemwE8aFIasBSi/knMppIrsJwYFb2P3P52h/D7mnsNgse9MW2BMA/3B83NGnNBU80dWl1rBkKthz/2NP/4ZChvTT08nI0DYeAXCffJMqoRFjBn8y/qM7wPi4N/Qv7qmhxhv9JzqS1oz9+/ocO+FLduuWEhTeYz+KXBL8Mqw73Omks4ceMBxdVhZ9VqY/Fi3hkNEAd2jYGW4eaPZmBsgkMLBOZcAlKqSOYcIywDKjLJ70ryyffOv22+yLPloNmO3utn/if1KYywqgjz4xs/EfQffKRjxEwwJu0W/VhC5zuRWoNt//BFyaYWCAb/3bgT/xb+eH0l7jt8HPwrXkpG+9ff3n3qbVHi3riFqJLIa75fhQ9acrCEhL8zRAMWHE86BRBKCffhsB3OWueDz29O+WLeYRwLw864usLPvHDh9hn8f+otM88jz2DxEiOpLWhv3FApb6pQHNzRIrb+Qnh5xEsv8009e4pkcbr3JVo9tqMHV11NaybVuctZKqHMYQQ8MMa3vnzj1PAF55RY607ZRrLwP+K+o+93vpteP+YqnNbM4gIy73f2rKsr/3mK/+ZU3tuL192v6VBCAxuM51NQDRh+5XCSU24SEB8P+gtpRjBGeERluZb4vluxj6Oer/wJVs9g1CNgafaj+zg/xsLrk5vParUAMO2Pno8bC/fw14jacAkQLgJY28WcHRHv9/5JebNrFcyHOTb/PwISUlsvXM/g4RuH7dsr/Zgsf+1rVaQgAShe97/2V01Dl/3rD/+fOVbqU38qMqX/E8V/OiHx1D/WOMPeCB3P8rXJEcFe0a0N0/etQ9cMCEgHFC9CENsAIgu3hxbD4ZoFOsmEvrOAv/sfLsP8poCy2ttHbQAeg2FVJYQAExYN6338AGkb01LDZt8oKA/lu34kwF+8ccc3ICNNv5Epf0AdjN7u1sl7MO+BeAYbKHaRyen4Y52MzQVWYmTmQ3vpnDkez5Yg7SK/ZXk9jGNu3UV1jHXC1jxw784LMovcG3Bnwf/h3rHcXFlsaNU97V9dALAti5k0cxy+yKzf4V+4sF4sCZhR+dqOR7xP9s398ki3K8vj6P/QmHRf2W/f1M109K4POIpxDeATtcdedO+tmzO365ft+Vfcdrjh8PHdcdW41o/xQWn8se8/2VzJRXe3fz3f4t/31nVW5t7WYNOh854qMb+utttdQOu8NDjhEAzTCKTAbU1BA/NmywtuAfK+37K6l0jnPNNPfQk056NdVibfnI8aV/t1r3P3J6uqjfaoDCWPV0/6ngW/jHLSwcptwpue0qoHx/OQFnOdtJp2RbnaeOuhpqeAIOEYkRGDZ6z4xl+Q6GPsZkgMnOOWRSvXDIphks+8szMF+hr+oheRmDM3/cB/v70IDfAUNPTSpYAoDnOkgAorn/upuP6MYawCOc95Zk/0b/L4EIPfFgHvt3dpZT7uV+8YEkN5E18w7eM9L1k5OlP/ZrS//vjoqKmrIDDcXP1pC1SmddhP1d3Jn8mfGS8f6S/l9X8sef3/Kz5eV527eW7K2sLDHNayMrBDsQZDv8xdGLX2qANaeoyCU+JCVZW/CPZaJ1wUdvprQEUo6/xsc0SiYfGdjP/j3sETmKuONJ/1rfX/EfEXDLyx2rATk5bW2D/lPBp/CJJpnXk6Y+nRrdPdqzuUfccZ3rYcLP8Zx9GGG5TyEPz5v7yFQvJ8fOASPHyxOoMWibRZbdn0zyMp4TrPTB/r41IPupSgWPRU8FP+7+W9FYI7yF8C6/B2NdLIpkaCQa/tGyBj489lcdpZHmsX8uSyQbEz4E1DAJDVjMzl7u77/8K/8nP/9sbe2OsbEcBV4vv2zpa4WxyW4Woo/M0czNPZu/0/7vfzG7qrSgYItchm3bTAqooYHSUlYCG9loNcBaa0dr5KviQqH4Dr4R1VtKCo6Dq//oH7IYm6zwhSxyYGSCiX7673HvBjfEj4DI8ShHrYMcT/pX9Gfcf7dCWx6F++UQkGRg9tKg/1TwW/jBFVlkZ5o+Pj32v8b6d/dn7c7amrRVYzIa/FHnOcIR23/8o3yIP/Kz/JHfjoVlf20rsM/5W7LFsr8sx9sfU1jmxBedPi1Qo/Y0oLkZr/1ECoCaqHX/Tfo3Pd1Qv/3BGqF/G40XshuzeQOcKLe3cqXmdnR0eLlfwGP/nez02aqSEvuOjO1wwAoAnZ189lnf6aMff+yKtTT8K3vmmWXViYsPnPTeZrcAM+GZ8e7x/u7+v0qHCO5W0ecmulSdDg+7L7xgnyCOv5/luXmHnP+XEG5qGvQSwipv/D1EJiGZtJ9ky8epBezvCYB9UyZQTrnIUe6/BEAOsnyNuNK/bq2NAJyFzdsGBtKAS5fsL/wIwCWWQGolJ89OnD0Lf5yWGnBdw8O9va//yut5bXn57flbDm+pKq6qoWYve2N5wGnMGM/A6ci5vk69a1g+MgKwQUAO3v5lt2oHi6+FBkQKgNeEIlPB9tHPx0f/U1PX9NVaDbDN/7BejHd5YsJjfzUrkb6X+/VB/WsjAPMaMDPjNjc7GzYwOcl5R93SCoD0+8CBlT/twlWM7J2ZYcamAZQHrqAio/vMpe6PGBiQPjm6moICrxm5xAW5lp4A/IAfnDvn2lGgrCx3717igS7Q2qT3afm4YTdR3pWv9lRCiXrVDnbI8dc/de3xpH8JUzlVaWcATC2kpU05Ng8crqgI3b1rf7QCqeCTwNG/T+VP2JPNzXH/PmfPnv+VN3e35RU+yKuZKX711YrMzHT84QqP4mELY2EeggOjdq4vMxPJ2VcMy98l++6jQ0AapND+MDlXsPfRmR/ZdnxNX/naaEDkjK6OjsdTwbPMLv78D6ypAMSrAQ4+4LH/zZsKWD32Fwv4jyWT1uolSeJ7KZi18atXpQFif5l2686uIKoiP0aBgkeRmvSgn/6OL74wQ85lZSYXLHpeof5ykIPeE0GfT34emRAuww+qowlAWhq5xtKQ6d+xcSO/BpKJgIPjLZZSRFE55ZIxWfyzf8veKhP7h6j8VfLsqRbQUqXVgP929+5fnvf5tGMluuURqARcabxu9Oxs//f/ykcfdYbDZGSQm4sCP584tXCAa+z/MmZpHoYwGeA/n625XpeQWUyBYX+1BLH/fXJOWSnFyczkxRc5ciSBb3pwYpv678ZxQie+VLAEAFF/ZCrYc/9VpY+8QWINsSfi0+rNvWhpWfS5zzLKolH/H4WTcGxtBGAhiebnu8eOORKAyUlZ7507VgNsHCD6FRLm64iPppnuoquFlg46uHXL+JxdXVYA4j+zbQKRCeEbD254yYDsg2T4Y+mFMKqZxsk0MJZGcnLs3MhPQXJkd/WWSyykMN75GV6/hcpTlR0YW8Bp3j+noZKcCrFyW9uYj1SwD9Qt+CSxHBigX6KfeuFCODfXlQDI6upiFoBBxn6A8Br8WhhE7P8uOfB7oQUL/gUMAl+Q8wV/BX4DBpw4sfR5nQT0yuiTwLW179tRT5HhD/aP9St7HGvxpIKHOzuxDaKnh8LChe6/hGK9zadfeQ3o7/fYX+SpgVnL/voQbbJYWZS0c9JaVo1o/tgxFcDGAe3t9z/7zAqA2ebkkLCXwdmHUoopzicf742gw8OsKDazOXJ22PXrPVlZTna2GQ560T9LLxCAxnTwLCb8yIKPK4yxMS9yT0/fdGnTJf7XJfgr0d94lo19q/0tZq/iIxUcSyNwa2sddSTZwMDMmTN6eWJeHlYDSkvdJd3mFh7F7Cxzc+wtc/dyEX72ND87Q1L5/W9x9k3K6ikDOrWfn/+56Q19yXkv0vYtyl6lzIEi7HsHEsH7MYQCqaTKD1AsaF8DJaEbYQR/GGXUvlYPML4KabIYHnaI1ACvQQwUJln3X1syM22YYMd/vuIa4LH/vXty+R957tNdXvtJWuOq2bHDCoC2WgT46tVBbyBIr88MhRLn6CSRFCJk3wpn3uY4NcXMjGxln0yqoMJqwHwyYMpmg7M2cIAno4HFsCstgv3T1uuAcET6t6L6Nx6vhE/haPS26UI3vA2VD7j6q+/4TAXHUM6GBgmAtZ6WlvPnDfvn5cmcZY+lVVYqp+/W1wODsssMNf3FHX90RzY/nkO6Pe0XMPiAgZ8lZ7I9548fzsZSFZnGbHyzHpFFlswmflRTffT10CO/Xp1lSfbXX+rv1doB+/yz3KA4nwf1mlPb/qS2lAWj/zYIXp8asPh8vr8JjbADn7h0ybK/PkibPfbXwyYxeA9JrCGsKtbVWQHQVhqg12d6CeHnn1+5E/mIVSeZnGJqllk7IdB7rH4FR4GEfezzgoAzs2e+TAYkZR3fmJ2UtDW2FMcfN2Zwfr0mBT0fnl8RTx4xT4BGd4pcDIqgUvYOxcX/6cGDWFLBPsrppqU5ERpw/XqfBMDash/Q2rbNLSmx76wffNc+BfS7c04eMY978k0MGGhm8Jr215U0lZhHgHgVcrHsb7brFKqPQgqLKMokU5zeQYc49za3a6ld8hVb+stOOu0b13UEbWOIACBybUe1o4e2Rd29m9K+fcHzP+sE7tJh1xGE/dC4vFzawuc+3QM11MQWOyatC208ciQyDohMCB88iB/E/3YO+zI40QAgSjb+WEYGq4PIV0Rc7XfOnevLygplp6RkQw5x4OC6fDCks9NL/xYW/tiXT3jyoyU+AuOKa9hJYQ8etPtIBcc+DulpwPe/f+GC6w0E7dq1vAZmW62dAqZt0nRado55BCgDbx0Ya527c3fnuHYSQA6W/Y2tX5RSWkGF+LWJJlH/da7rswj9CZmhbrqbaW6h5Ra3AP29jqDjxD8rWM1APNjd2Xm/M6Nze6e6UuRa8uub/Z0oO2U+IHr02H9gYAc7Gtyoz306+ELSmj8PZhlAyQArALLJTz+NfDBU/XDl4RAJ9f7LXL7JTRtO2teBUli4OnKHeCIyIXz7dkpWVkp2YSgbXoENy3lMo6+v78aNG8PDw+np6dXV1eXl5YnXAN/uv/eiB389R39q7dKltrawj1RwrKiv94KAyfOCHQgy26KiZfd0bwpYNiU5To6IHgMePsR+NTm+IXISgAs/aYMA1i+2YmbJ7WSn2Pw+9y9xSRJpl1ErppgFuMc9zRs/xzl1KzvrTb/VEXSc+CcE6L7Q1dVz/37Pg5zume715/4vl/1907XH/jduqF15T/6kkRb9NOsuAojCbSkpkQnhgcuXI+OAePy+URjDYizy7PaRhjHG1KBF/Re5eJ7zIhn7ICrV1fasK6kBEd5uCSURCeGSCxceZr/8zWzIgiO+b+GDBw/ef//9ixcv9vb2bt68ua6u7vnnn9+xY8eKNFJ3pdO/yckepUfJjrkLEtxmSrBRjNmbNyUiPlLBMY7MRSYDutrarAbIXnuNpKTlOXmieBsE5Ni5vk42Lp4wDAxg2V/asMG1Wm/Zn3TWL/LJ381u3QF1ljOcUU8R+08zrfoSs8uvzyIriSTtUZO2a2tLJM5yVhGDfX3IXvbWUmszyfFrABdm+nt7+76Eide96GA9oA/6wW580bKDkIdFHlFw44aX+6WPhv4Gy/7lpEP/cqg/L/Jj0jqaFJKVFRkHdLS0RMYBMcd2p7DotR9x8OBNBBNFXeWqmixiqcOHjZ+5Zw8FBauaEtrFLu8VER/wwbvvvv0uy8O1a9c+++yzd99999atWyUlJWNjWmEwd9u2bRs2bFh5jY4//bvNuv9ORobvJyTm14nk5k17GCsAK39DRCIRGtDcPOoNBB096l80I8d52GmJfj4CGBhw7H7r+8u8Kv6f8APWO5S76qZbbVUOmrwlyYA+y9NXx7HvzZYAqEPZl+tp9P8LvrjBDeAoRxUoiK10hJWaFZx0mf/TLxhQtRu7V81+HcDSTBec8s/+rzseLf9uFsPAgMf+Ysj6U/WG/ck6wFmM4eAT+z0BsCdLSkQO0L9nXFQUGQe0tNy17C97+eUY1+c5FYX9rQCMM25fdzPGGMXFZjTgyBHT6UUHq4/Ip0IVLLNMyP25d+/elStXXNeVBlRWVnZ3dw8NDUkGVly44hr/keG5/8tZ4q6sDPubvDx1dT+p4NjLtm2bupk1JaIiB4J27PAf0WPdfxsBWHtMGEofewuQg/CqyzpHGmmi8jBh+1nekl1Co4IKxQcZZFgBGGVUHpVuuT5vZrN9sdIJTmi7gQ3xu4ieBnzrSv/rL/ZP1U3zzXU2/nPKY39/zCz29xBNAK5f59Ilw/4dHaUvlx44ldfAhQNcWOaATz3sBxYKwNprQKTKe3GAthcu9NpRIJmmSsaAX9Vx/uuv8l+jv1J582YKSigtNRQgx//AASMAycmrUtRHXd1kkiMTwuo2y3x1eXIoFNLgj3IAjuOkpaWlpKQkRRuzSHwoEDFnJyfHSwAss615QUB/f+ypYH+IDALGmpqsBngy4Ace+yfNpFpPX8z42Fd7yLZfPXXvZiii6HmeTyVVF7+FLXLwdTc0fCrjUaiAGpGxL1ZqoEHKoZ+s7Auib9/u/N4/7fRe/WZUdX0g/G74Xf47Mj846PhayUPtpqvLyAB0vtv5n5EtF2VQv4o5gJ8kOlLs175RW2sjAEDbs7Dpoo0D5J2v6InF/qmpZGSYAaaSEtOMamp09kSVE/t4nI0DJplcboxcUVGxe/duufxdXV3y+pUD2Lp1q/TA/0X7v+I34J3lNgPrsae2aa9q2mZV/BOe46WCdV/27pVCt80fcmREqh3/bbGlihDljRutBugEOulduNBD7nmbDPDVFCzFpwzyDTZKtXRzI5ebzcrScZxULwLwU8UxNKm9slXUgFd5tZBCla6W2g46euiRB6PuOstsEklppKlo+oMKKrazXeOc9dRrPx7iK2J5OZbwf7IAeqGKhLv//nuTDzgyx+85XmXFkRSnF+L9phFiePW1wX+Dby8YBJYbPjtLWRnh8DSchXTY1GLiAPnoHuI6sRUA9Uv7Fhi7KHl0xHu66OPd6ifqP3nkSQPwC1tJB8bHx/Py8gYHBzdt2lRTU3No8cWMGuO7Yu9GGXzbZ/XY9G+drN26OKpd0bhPOJFhv7Iy0unJyVlohzZsJmBFb4uHwkITgKpJSAPgIuRC3gPJwMInkhsXFYDiQRqH2MCGUkojlmRS2VUCRkdzwLD/Rjb6rOJGloM9skSMBanRyv3vpLOX3hFG1HTnmFOhFB9kkSXlU/GrqdZn/Hcq35mA56tANgdbZVmJFQD/vckvFmpAY0LYX0iKfczX8fGqmhT7RUwQl8kdm54GhsDEAZAuC7M1tEInlgD4GOpZuXKGIcRiqKNuD3ummV5ms3GeffZZ8f7o6GhqaqrWM/B70bHfGVsGH9WT3M63LF1PeS6wz7bmLIwId+60LaFt3vaxas1v2zaZndIlnIdcKwNhqkJLnHPPoDEGsW9SIgJlZdafycE+/u+7ik8m3vf3AfkrMvuKw1FGIwUgk8xlTvdd3k3aUSWbFwD7IUFY+d6EI/NxjldZJSTFmPdzoqxZ5muvb1gPHYMuLw7AWGHsJ44Jq386+YyhmI5T8CWWe9Gh1a6ekCXqdl/xo++W0D9/0LtQ4eu2xBSVRejVEFyA3Hnb/ORaHYQhGCQaQiHL/jK/COEboTV7UUT8rcY/QhmQAAFIWG9yfNBpKHEC4KNfOqwJbs4LgLYvQQYB1i06wQpAzwq/Cd0bBYIKEoTbNgLAbF8iOgbnbeYJxbLsn008CLBVNi8Am3mK4bC2SCIKBqLs0MQW+aqrNiV4CVyeFwBtXybAukWbJWr/SST/3cGLLEYS1/cjBoJgH1GwlPsPDmRjLId4EGALVMGs2T71cGRreHLXZSGGhzl16l+fOsUPfkBjIydf4qcxcNjClhd44ZExPpenDgECBAgQIIno+N1YL7sX3vLcs+d4roqqOup4mhEgQIAAAZKe50mYeXaO++/yTzD2PLBzhhkXl6ccAQIECBAg6STR8QZfVQQIECBAgKTGryX7BwgQIECApEIWQxZfbQQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fF0RIECAAEEEECBAgAABAgE4DX8YtoDzqL0J/wfmeBxOAi0Z3lit06bAT8N/hB6w6IP/Dr8R8lboFPHDWV2Liln43/AmOFAMfxA+Wt8FibR9ROAm/At4A0IxVIfjw47An4cPeTJGMU3tG6vTSiC+s0cv62H4u9DG0rgH/wiOQwh+E7yDQQf8Q8zOVPi2dsZ0wcv7rcV34LdBJjjwCvxr6E/EiRfiV+G3RlzIv4GBZV9HGvx/8EtfxwhgH9SxSqiZt0KwyIc675xPJwKUwAEisAP2z9vKo3L+0AeIDS5rCZcAwasg1isKoc7YaiAUIQCRqIPOebtFvAjgJJZkUqBBtnBZ7G6M9UAbK4e0eeqXZQbsHyAQgJV3/2Wr6v7nL4iPIjVggqcJwVtvGxYVgE3zGtCj7QreVEv9+2EbMeBt1hJv8/VEgKRTiyQBuoiCN2EDHhpZPsYYe8CDAQZGGBlnfJrpOebsWijppGeRlU9+CSUppBCJXfPsv4dlYHCQe/fo62N0lKkpu4w6GRnk5FBczPz6Wamwc94WojxCA84yj+lp7t7lwQOGhpicZG6OlBQ2b6aoiIoKc4plYmJi4sqVK52dnYAW9tLqvlrikZhhr03FHx9nZoaNG0lPJztbpfa3eN6CRjELP8+jKIbniIbGlWZ/3cTubgYGzK1Uhc/O4jimzlVLKldBAaWlppgR2A4HrAAsLFU17P+Ennt0wydYqAXuY18VVfjDZ5/R3h55tv2k7OdHDpD6SB2cijqo+x0fqulsZGMaaZlk5pJbRJG2+ISPs8f2cvbDRNZRY5Sz3INPHo2x34AO+HTBzhiqy/vlApxqXDQDMMqjeBnyHm2qp3ycdeF5G72f+k8CjBGBVyA38nD+L4U0+AmWi8ZoAuBDA96MbyXPDjpuc1vb+9zvo2+YYQnAFFMurhWATWzKJruAgi1sUT/czvY8e5cyoQ5rfiGaaGri5k3TR0UcIyN4ApCZSV6eYX+7BPy2bZ77nxc99uict3tgjnzjBq2t3L8vShJ5GwGwa36XlFBdze7d1NezHHz00UenT5++desW6Iq2aY3fV199NVlXu1zcvs21a9y5Q1cX/f08fIgnALbU9vK2b/fJG1E0oPhJd/+tFaV+1YkKZSXNarkq3BMAK+fS3fJyVZy5oampQM489R+ATYuWav9+0zC6v0d3H3cQcsiROyL/I4Ol9fv6dT75hNOnwWAz7Of1AzKd3UdvXtCnfxPRYJdZ38xm9YUSSsopr6ZaXQN/8H92nzgEh4GlBMDTgAULJnoaELK/XX512V9GgXl3PUtowMsLCuBPebzz+hIAHxrwChYxiGCa/eNVEgAoaKEA4T/DKfjlK1d+mtghum+i6RrXbnGrjbYuunrpHWLoIQ8jBUAdT52wkEK18q1sraFmL3v3s3/Dvg1Y9i/BF+T1nz3LpUtcvWqoUDQtPz0cRhBNSwDkMJaViQTFLOn792sl9Zq0tBqiIt3TgIGBznPnXHtkEZNOZEnWdc2Rc3ONH7pzp9k/PMxzz+H4IUDp1E25/9KATz/91HXdI0eOpKWlVVZW7hZTLwuffsr581jl6+igt5exMSsAxlNWqcWSujx9NTjI4cPL5A1PA4qiLoDqrqjjL8a/fNnomYrT1kZnpxEAVWykAOhuqtqlu5WV7NhhpKKuTh88378yWqnS0owG9PTQ/V16vqeKOsIRudgi2ROcWDKwVBOQffyxaVy8YKjfHK2iwndVWozAdwkBTxIALzKWY1RJ5Q527GJXHXX6J9Hh/+z+cUi2vLN0wAVoXLDzIjTGdsGGhWMos8e7Ly/nV95ZLfv7/6kPDXgZYrwUUuHkquUA5EyJd/LzXRi31/IpXGmEv0BMuMGNc5xTf2mmWZ/vcMfFBeOPlmSaLrxhg7rz3OTkxMjIxI3hXv2NWrx8HIULnXT2VvYeqTuSU5fDPvxAPVLutOman3/OlSviffXqPLbJjXJwJsOTg+HBzj6J0TV5cfIra/r6tKR6zTPP5GRlER07oPP+/c4zZzrPnr1y/ryOnE+fOCevxjCJAoCRkXBn5/1b5+4byRkYMLSrL0SyPjA0NNTT09Pa2qqBIEBxwIMHDxQEsCycOcOHHxoNuHhR5ZKOKsYRcYhBwrPhgZGBeyP3RsSPMgnD5KRRhYYGVhDuijr+ukG6gypLc7PulDTVjtLkkptOUTLJc+5cOBweDY8O9KnJ3CAnx7j/7e1qAPUDAw1Hj1oBeBKqqmwcIJMzf5nLYn9r8j+IDsv+0ibD/rt26SDGDhwgJjxDCA4RBdNMjzE2wMBFLsrkG+1kp7yoBzw4xKE97CE+nCAEB7EIECSBjV+cnu7Kc7T4xBu1Owk1LBMi/dOcPsvZ85y/whUwbmh1tXGU9UHemyJmx5EAIOobHjbU1NlJa+v4lcEr7bT3JPUM7Rsarxs/UXeiKKWIJaEDXbggEpQGyBEupliO0ja2iQ0lKg7OBBN99N3l7k1uXuu4ltE9WDOSWTO1s2YOnoEcoqOjLuVM5+SZzq4znZfPydeUSm7dKrlUbRkBEF23tYkXxMMDYXGxPG59J4koLGQJqBJSNeKfm5vbpkMYaczLyMgIhUL4x9WrGpMWi6ngqcPhgzwjJ7GCCtGlBGCSSZW6lVZxXHNHs6nrpCSys20iZB2yv+6dkXDdx3PnTNFAZREpl1KaR56GCo0AMBcmPMyw+Fs39NbgrTH9fWdnaV9fw+how9TUgRMnjMg9GZ4A9PSEb96M1IBUUqPVtGV/bXWrLPXLvHP5xz/Bw1Y4zAK4uBKAUUb76e+kU87Tda530KHP2iNh0LcSH2LCP8JDNYEGBALgwfVIYdx3YiiK7y/2/5APz3BGPktKiukme/YYiamoMMSYlRUpAIZD1RM7OuQCq5uJBIaH976XVPcwvy5cVD0Nx6F86aHZ5mZ1Tf1YZKGlKw9zuJZafbYDu+OMq7urIykE0M7BqcGaj2pqZmuyZrOYhWcgn8XQCmfy8s7U1Z3u7Lw8OmoKsm+fGU2RkonqJQCSLvmsKtH0tLhrxFxJTY08cT8CUFFRUVtbK69fvA/oswZ/quSf+sTDh7bUosvk4fHneUmDGOIFKV8BBeJKyZ4cRnGHTSE29zWb2Ki8HOlY/AKwssM+IHdeKmrDOLWGTDIbaJCru4Md8n9VIt1KFcrFlbANMthFl1pXCy3yNm533G4YmW0IZzTMFubPbOQZSOFJSEmxGiAB0LZtpM3TgKMcZQH6+w31W/Z3XSz16wj6RdzjsVWLaoBETgLQQ494X15LFVUXuKBbqZ1TTDk4IUIS+xjP/lXTAJc4EQiAG/fK7d64v0Z+5Ptb9hczyiE7dIj6ehGcfGc5zosOhhg/uqXFKERZmXFS6+o+27dvCqZB2xNQzRPQ3m6GOES+IAY8znFpwGOrV4pKdrNbHUnxgcRAnWfnmZ3MgbVnoJBHcRPOYOx0Xd0XAwPY/PHBg6Sl4UF0KqqfnDQCJvUa6Ow0nCLC8IGsrKzjx4+npKTs0ngCKnjZgQMH8vPz8QkNOok0pT8PHhw4ceToTx194adeOL7juKjBo2SpnUjNxdV90e0Yk8aqru7dIxwmFFqp7uYQN/r7JWNK4UgDVJWie4mZRufrqded0l3bwAYehTRAA1vVVG9hyxd80TDccODDAxJ1ZmAWTkA60WDv3HwyoFtjaIpTvSCgggoegaV+mWoauQB28EdteoW4qoToGGBAXovKmE32x3wsJ0Y9S2GKzQ8rxo377KU83XBjcFMDJPlh/xg0oIkm9RSN/IhuRJTPPMPzz3P8uOHN6M83GsZXh6quFglqa/0z8eOleQHQVlYT9ckf9eGuLnXmMsrk/4rrDfsvgKhfpr40wog6uboQn8LsvD0LxczjmqV+zLbFcXjxRaamzIUthIjUDm3l5DBw9yHj4yau8QcFAaWlpcoEgI5QkJSUxGJ4CUZgeH4bBgOJzd27koHMUGZNeU1ded3h8sOW/SNvl8pbQ41IRJVzffa6odrBQYaHJVzrhf3t4I9Y9sIF6ZN8f7G/JFxbjXdvZCOLIYccfVtOeRFFknZJXcPDBj7ACoDZPrPExCxPAGQPW1psEKAWoq1CDebxxRd4o/9qQd7gT2I8VUVvz/CMtrqzs8w+5OE97ikakEbqOl/hlZU8e/xMunGjMTVja/oM9nOkrZbX7y6zUQYC4LKSuMtdEY1Ccjvu39DA0aNGA559Fj/YvNn88d69aiGeWnyxtACMjRkNEKNBFlnqKk92i0QWROJzmLPm5dibItj/duSwQTRs2IDjGLP/MeYT32PjWxtL/n0Jws9AI/wkC/GtRwVgRDY+PtzTM9LdPez25VVu31KxpaqialPq4hqrChFdGsETJiclZbJ1NM9LEYniGBGtRqhA5KoRPIVxZjRmKYj9v8E3pOi2dIThw3kB0PbHiQpLTPX1XjLg9uBtbyBI0uLNQ7DsLzO32Rv8yc9P5DiFwiCx/yijffR9l++qi0nOlR3ZwQ65MutolCQt7TGzyS5jkTvjQ/wDFgGS/LcJ//Wq+FTjlS202Ai7rs70lMOHn3D/fgFOYWwmYmBk4VCMjQN+Z9QMsDVwcKyxLJy3QYAnAB/Os387/jAwYARISmRELCMjSrDzWdRdWRD2zn6ECBzxBOAxDRgZGdb/a4eGS5iby922I3dLZV40bvZcL+ujichk8fa7/n6nt9dIr33eVKUuLIyBFu1Ylsn/tLTguqIz+xCwpWCfMOzvYQY+8CcAQmkpXjLgvfciB4JKKY188kffc9BQv7HduxM/Sq1qkVLZWTW3uHWDG9qqx/kRADdmVX8WTsJ/jUsA7AerAVYMVpf9Aw3wUVtJ7krXvtwTRQBttLXSap8qqqkxud9QKP6O0AZTRENyMtZgmOF++u9z33Pz/eISzDGPD+AMdPqfgyXuam/HDBAfKKe4WDzo8znfIfg+kXgeWCgAhRjzMA4jjA2/NjYyMibhkQBUVOSWluZg8TcfP9VDHk4wMckkQmam0af09Lie07961RFr68PICNPTRlykfKLNbdsk+8uTgYcPuXvXVF9rK6ARvJ3slMNr5Sp2nIZZ/MAKgLWRq1cjNeCLpg2W/U1kUl6+cPAnwaihRnlgOf6ifvUydTfpgW7uJjatrtf/i1CML4RCYnm1LjkE2noRgD6o1cnszkTkewMNcBP7LqAHPBDzdtHl4ooNKiqU8hUhxNwgre/RuHTTE6PpfNnZdtaxeogdw62nPoss/OMK4EUA3X6lqQ37CH5zM/aZdCN9VVX+J3oMwg+isL/w91gE6bLiseLiMZAJOZBrtsLNxSdj6+700WcnT8lVV3XFMjRsa+nCdxw7KdpOfJuask+XGopUNrunxwzklZUtQ07u36ezk9lZOfLyZ6uoqqaa+PEpvuA4kU8EtfS3lDglJW5JSU9J8+X9Nv0rXrPUb3NTa/WQShllqp9SSlVRI4yor+m2SrgWVpfL2mHLFtMM8vKorKSoyIu07E51De1cXfYPNMBdi5fByfUWxfTQY2eViWfUEhKB9HQ53WIfaY58ybOcVR5qjDGxntzJcsptLO8f/tlfjuH580YAPvmE9r5NPHfUPvFq6XUB2omCQRghxPIwNm9CrrHFIMdfLu0lLt3ghhxG9j7Pjh3qhDFyxFn45LxmHqRdvFg6c116l7LF8H9/P61X2l2RpSTh4UPpgVhSwuz3+Z++PpGvzVXYHGyCu4ZN7To2IfzDHyoTYC6jqaTpUvGlS8W9vXDMUL8r9lftRYGTkMH3IopUS/nkSwDU3dTpBhjwBGBdZHUOHTLhuJqBjaMsDh60O0UK2rmK7B9ogLtGbwNVixxmeIghQNQgXzM/P1FOiR1vamsTjwxPDv+AH8gzUpgsX1JOkwRAW9kKMsvEBGfPcu6c8f21vTFSzIsHOXaMo0YDSATGYHReAP4F/PNODFzuubgzzIj6Bxm8x70WWi5w4Vz6Ofaf4MgRt77eDGHHgHNwGj76YN/tM2/U91RWmvubkkI4bGjz+nVTIf3yltXP8/JMfasq/GBkhKEhmX2wJ5dcsdsadIr6evdLAQh3d6c2N1/pvVJyu6TlWklzc8mt6uptPgZ/7Cmc1WR/W0VZZMnsgKc63SijLMAo/jHqh/0zl9wROSQrDVg48UI748JF778B/Df0xAnAOOMPeSgDM9aXkWFdwISguhp10cFBpqfFx9MDZgL9da7beNnTgEoqNX66ne0ppBAHdBJNVzp92lCeIoC+gl28etD4OGrix4+TIERGAO4/ARdrEy7vzDI7yaRoVYNyrQWtP1c2VbLtxQ0KTXSFUqnYnsM7Lev8S8Mff+MbfV++d8fEeaEQdg6Ejfa+8x3mmpt1OxTvi1J9pfvGx42p4YAGiTPIkK1Jp7ADQZe7u/9qT89fLLxa8hdLejpKfmdGxuUDB4oPHNikb30kTtxVdnnSSZelkWZ7nGRexgK8hU/0wltLsv+PL8L3v41E4xTCp8Z8IGD/d+CNhArAFFOyaaZtKsja45iN9q/o2Bj53+gQr83MGMYpKKClBb1gp79fzq8sk0wJgMRAAqBguZZa+6IIYsXlyxoFwWrAVN1Bkb6I1ZgYNtHsPwfuc+A+YuFZfkECIPew5yd7/njJz/y85hpUVW2tqdm1b19qrCm4wT/J9RdKX3zx548de66hwYZ3jqe/jiPytPnwCSMI9++bf1dWsiTUaqyBhFmWSiprAbWc9v37L3V3X+rpyfje9y53Xu5r+mH6c0eL9+8p3r/3RFXVepicmkyyNUBxnrVY31PWC6c86o/O/hZrLgBv8QkyHwjY/9vQmNAIYI45F1fmPRdv7ckN8x0I80S8CMVY/DqeCHWKl14yA09lZXY4yNBQZyddXaNDQ4oGZEUUyf1vpbWbbgXOMb9NRQfW4T7/nKmtNXaqm5Gf0lISgctQHyEA7lEWgZM8s7G+OTROxif5P//fPy7cUlheXr4j27wy7TCHJYcsH8dzOFGrV51qVocq+/FhD2X7y80DUEZysXPNhoZ8CYDrMjdntmBbjYPDWiAc5vKdvZfvdF++3eP+i9Pf+M7xX5P8nd+4/3LxgWKZ96q49QM3usp8lyUQCocb//t3//t/58l4lnWDvfdgLzGgJRvOf53YPxUaEz0EZLuubMGj+UuEpu/AJFHwEhZ+BMAbyZU7KvffvvBAAiBXVBpgXzXXPWae9eukc5hhXV0aaTXUsHzI6ZLDOjaGEZvaWk6coKSEBGEL/Bv4hfk+7pzF/Qc8ihBzjeYKHz5kYKCv85/33bx59WJL1m52q/gT7sSLvBhDOuS4tSSx/yJZtpwcOwXCG9XxOx1arcZOTZAM6KZYYw3gTfjaf/v2qzv37Szt2l3a1TX5z85f/lOXi5OL7SRhtZm1XQXT8/ptNOBN71g2fiQEL74Nb4DD04BGYNeyNeAGtADnvzbs70BobXIAdtRH8fskk+Ewk5PGRAqP4BcWf8h4ZgV9j8xM9u0z9uCBqN+anHa7ZIr6dxtt6j/ppBdQUEGF/y4dmdCyNmWfdxb5JQ4FsAVKIAuGMXD+GO5dIlevEJdiJaq3l7t3uXqVz/OHT5/+ZIyxjc7GLLI8AfDPUn8b/jSkRp9Ua83qv67AmP/aDIUkGGHCajUyVhjOkkVtb7eve3O0VTOu3Vdb1VVV1rXP7epyytrM5ADXCMAxjvk/z2poQOS4v5quupuMGHDStqWXIuO4dS8Ay9SAG8YEtdwg67vqApBBhjV14NFRZCMjFBYuETeo9/+4HWZ0oRVOyTqVyH076hgo0/hDcbGxhgbDgurfN25QXi550OD9Pe5d5aodDlpsyliKTwFAAiBTH0woSqwGWAGwqFj4KWKhhJISQ83DwzQ1N+WRJ9nbyU4V3xc3RiCLlYd9YEBb0ZpajWyEEd25RK5PPDnpuf8mbDrqmvm++/btK+2alPegGjQPhjpqTMaqqFrD1fCHGLIP/9j5zzL1uDj4NB9eejqelqyO/OQPN75uz/w4aykA2WTbx/j66BscpL/fEO/27U96JreGmh/jx6aZjihJJ5wCGqOsWPcMfAhzy0zu2eUIjKvuugwN0dRk50b10rt45/AhAN80ApBiBCDRsOyv7XU/PCP2V4air4+bN2luxi7PqbDICoDFWg5rZGXJdGt0iQMM9NOvmyJ9In5ULSOrb+3OHSqprKfeWG09nRM2ghxvarKTA+w0hRChtaq0HnpUP6olQFqu7iYjBmz2LitzfT8xH389OgH7J0IA8sm3E3lucMOb3Tk9TXJyVA2opVZdfdadBYt7kWnik4u54idgBj5m+VBPOXIEXdm1axIAuVFyNhVQxyYAP5oCsnSsAKxRBJAO4376R34+RUXk5RmPsXfE0IccSSzWXAN0WZLnwkIJlCRZdKv4bJLJeJ8FKoJj+IFdz8eamN2yv2wTm9i3zyaQtL3Tf8dqgATgCEdYC6h+rHgPMgjoSuy8MOLG060B65/9Xdda5IsjEzrykwAB2MKWUkrLKVdMOjY+Zl/ucusWu3YtuHsRg44bXJs69tscn4FZjH0SG9fYZGVy8ty0GaWOkm/8Jk/EcyH4fwKwJv2gZGpqS2trSXv77YkJtmzh8OEl+od0yr6Ja2RkMkxYtvID6rFBXnVJCaWl0tXwVLiNNvtKwTrqiBmb4Rgc9TWhz77tRzY+zlHM4I9dVMfGjlYDjL3/vicA2lZQkXjVbKFFAZx915Z9rFndbTObE8CnT6cGOKwTqMPJ7LPOKdZWlv2dtReAJJKqqLIzreROacDh+nW2bjVdW5Tr3T2fIjYFISBKBGDt8zik2N6FZJKJASkQkq2RAPTJaS35vLWktVUacHt0VP6qhtDt9F4n2sCn5M6ag2ONdQKJUkUFlZWmrbS03OLWda5XU11GWQ45xIBkOGaNJeGt8+UN/lhjHlYArD28ccNbM0Cm9pNIsrVrn13jmiJsQKGzVMp7MjXQgPXL/mNjcrtQR52edhzvnXgJ8P0TKwCCqL+GGjkp8uO6u4euXDEdJTtbD8pbxfN7967DNTywCRqwINsGAfMacBED+xIICgt58mwd+8oB3YyZmSyyMsmUEQP2G+NvkGi0GqONLa1b5lq3XGjd8lFbaHY2LNd+505qa+3Ei532Eh+ba9Xba5eBQfGZWmA66awfVFfbl3koYOyb7WuiSSQr9n+e5/0MBPXTr5S+4kh57iqapX6OLi0Ara3e254XDP54cJxIDbg9dttLBhzmcMLIVn3KrrCts0vHxf672V1LrZRyxfnUBeep1wCH9YPOTrq76euzg7G5uYYSHWcF2d9ZLwKgTruHPTa/+h7vXbhAVpao3ziehw6p5N7lRi3NHbgG1+GPY0EFNBjzQN58HDBrjCti/+9/nxs32LaNhgYOHoy6TndLi6RC3diOn9qXasU0D2Cmvb19YmIiMzOzsrKSBOCKx/5mm9KaUt5aXjlWeYkqOYYqukom7RN7zePSYwua377N3btyQaiiWKW2mcP1gpISM1Bo5+5dvHiRi9lki/pd3EMcyiPvyWsQfc7nIkf54+OMP3/o+dCxkB/2n5gQ70cZ/Fm4ZoCnAWfORGaDFaastgY85KG8fumUyvgJn6hzqd0e5KCEai97iRMLeuS6hP9rdlhvUNtS51SAqe4HW7ao6chTTQj7J14ABLXLHnrkaavhfjb32enTYn9VgjxQ9XGRlGRgkcHkcNgubsiNeQGwOAAN8xaJIm8sSGhuviov7ld/1fRf+2rJ3bt1pse7+xdfmBc4NDXpfsgLVuxcSeVyOzDoDP1nzpy5fv366OhoXl7e3r17n3322VAoxKribY/9zVbQ9cv7U8glAVDJxFE5OSQlLfI2CsVhZ8+K5kzyW9CvVHDfk4ETFWvX1YleTSsZHlY7OM1pF1eE3kef/Nwqqh6TAX1rV/mX73+BC9IABXPJe5KTjiW9cOyFDcc2kOZz2pfigCiDP7DoQNBoW1tkMmC587AG/e3zFoWXwikj0kyziqk4wFstWRqwYjdxQY90wXn6RoQc1haTk6YBp6YaP99xTNz94IGhnXPnaG5Wy0lONrFuZSXl5cSCe95//XW9soiPCRMAReJqnRNMzDCzkY2fT37+3nszAwPcu4eyAhUVFBWZCCg9XWwlbRD1O6Oj9PS4nZ3GBTSZgx7uQi40RNgOHkepHQtqbp5tapprarqufizq15lU6XJ3y8p0G8zNcF3pj9l565a6u7hQ/6znmV3s2sGOGEZC5KF++OGHn376aV9fn96vMDQ0lJGRcfTo0UQIwAAexD52tE0E0dTf9OmnJuwZGzM+dEmJqV7XNf/s7JTeoVBMfzA4iHxGhWj6YTnlsJ5Gj9UmFCSqKagXue5Ua+v7vD/AwD3u3eCGdFrEJ4oX284xN8WUyLGXXpVd317hijIHodra5OP3ko51JR+9/2xu6ZKDP9b3jzL4swChUKQG3Jy66QmAiJjlIBf+DZF4AKcWvuNhmmm7AGQnndI55UX0T4m3TneMY9IAXe2qOteu+zRqwNphZoYf/AAF4xrgz8lRbxS1iZGMV2tpB7UwOcEarZUTHPvb8G7K/LD/tkdY/48kTADsQNCzPCslSCMtm+wmmi5fvqcuJ/UrLTXhT1YWaWlWACST6vWqKOf+fdrb70gnHM6bVd0p89z/aNVV0c+J5s2zzVs2NO9OY+zS6CX3gw90FJ1JsZa5DVYA5P7buWDygUdG1IU0enuAAzFE0PL6Ozo6rl279vHHH4OilrsKAvbs2bPqAnCehVAtiY366Zfc3mq9pVJK5kT3BQWmeq3wdXerBcr/MBUgV1rc0UDDPvatL/ffYts202dcl5QUNm8WN4vZW2lVrLOFLXnkKW7zBGCMMRVc5CgJnNK+/YfChw+fOXYs6fjx5NLSJDj2xKDcc/9VaQsGf6Jg61ZPA+TTRWaDl+uJ/y54BYv70V7cKQFQGSWB97kfJiz9s2M+dsFkbRPAqq7Lc0RFgHrohh6YA3Uw09N+4RfkfKn1SgAMtQ0MyCPTfhviHjnCgQPs3UuMOLUc9pexRgJg5wS8zMtZZBVSKGezhZY7I3cuXepQl7Prd4mhVEWua99YoIoyYrCJut1UbuMnRFViN7X4/RTzBDRR3VS9oWlD2qBRGnVIOUp32u7Q1mZOIKcyFDLnmJw0J5ieLqJoNwfFgHbB8RieNJ/9EtPT0xigNICGoLRnbm5uw4YNJBYiBXHBJJPS2s1svvbg2g8eTFy5Iv/CEz4bFBlJPsEucZxKLQ3QTWF9QmN3ipMzMkz0VlYmNRttbb0yqzJdCRGSe+4JwEMezjJLUpIR+9pa9Sr1rbEjR85UVCRDEiQT1TP3nvtsa/Mx+BNlIGikq8sOBFlTsMty8EOEsP1vNKSQoh4kr1/6V0WVAlaFrRJvfSZR+Aj+GYsjwE9Dj9UAWTjcHQ4PhsMY1xD7bivvOeeaGuNiyEuUZWURGyY/mfyE/4rsyQjBNpZE0mqHW/LXXuAF23ZrqGmjrZPOHnoGRwdHBcLqwA6OunQW6eVslounjiS1kMdnV4VdgqduQ7OxquYqT2nUSXQiOU0DEwMPJx5OM6ZTiOizqNHB1dt1JepCCgJiSv9KU7KLioqqq6vl9ff29ioDXFVVpT3+2L8i6mGNxQKVV+wvZlTp9Pkud/t6+oZ7xvqYBlTwYjbXU1RBhb6V/yjxe+LgT3L0L/x+k0x82LHDrltJVZX6jYIs7t+XiIVHR8MmPpgzXSs1m4wy+2dUVuondvkBeRZDcMYKgNl6pP6TkevP2+c+Cy6ZvdIV6aId/PH7mikJgER1drYFimktxoQCC11yHTw6Usz34SUeqk4jTbquhmqnHUgJ1Hp9phx+cqmT+8Ib8A4JgI8Ljv0YL63Sia0AeBowOSnr3TI59IIJMaen5REaLzQnh9JSBbcmOdfQIDGI4VLsdawwkuKcz+OfoZSotEPV4uVeeocYGmMsHCEAtqHLS5WHXkqpBEMfeDLC0GSMZnDRb1/kRSmHfc9BN92DDI4zPs20TqFOruNbhVCYv5vd8WUr6zTuLyWwSeD6+vq9foO6kyyGHPtFrFCJxBGqNI0U2xEhece24HIhLYOUUWYXQlBVxHCFaXDS308y4OSKzA1+8UW2bxdbm9xRdzeDg4yN2QEiEzmGQnak1SSUysrUvSJXH+2FM48LQKO3/ryoP+MSb16GSWzKSq6G/8UhpEm6GAUo1r+7DMVQQrNNCfibTZ7sfcl/X/zvbL+QfmeSmUuuuoMcKZaDRh8n94X/xh+AB98mBiT2gv/bon/34mqe2Hb7KasBU1M9h6b6qqZGRowAzMzgOEYAsrIM6VdWmoazlJfY6P864kdSTNM6HZYPB0caIJtgoo++YYbFUJ4AJJNsG7pIvIACfKJ53u7ioZJK2QgjVmZ0Ok8AdHzrSRE35PKnp6fX1taOj49v3rx5+/btehg05kaevRJ3N4ssBZeKbB7wwD5/ZV8XLAFQwfPIEzc5OLFdYVr0K3wbvhnxZcbKtlQxu2xykp4ehoYMeU9NiXaNAKSkGAHIzqagYNE38d2fjwN+z6MqlXSZH78MsjYsrEyyLBw7Znw51wWG4DKUQLEx18FZQktJ8SmREgA7rBQbTvo/uQ8UhyGEHyTggv0f4KWEnDgFymT7ptg3NTFhBGBiQgJg6D4UUlCKX3rgpP/riB9Jyx/XcYgP8vTlg8uIE90RArAA9hWJrCYKvwTLxhEfu+Kq3rhXLPkmj2Kjdvn7SYo+rd48YdkycRfO4CGEcJvQJZBdJk5ETuS/7gkA7MdDNMIMLVJ/LiuOkP+9sWNdXXAoyq6E1dSULC1Nhn/4KkICBMCHBjisHzTPj/+MEA0BAtwhAg/h8rxNsrKwA0GexZ5WC/AUY8oaTwmSWICwE37oPmQR5LF+cGPe979KgAB+cWne2llxDDyqAQQa8HXE9NMtABo+/piP+53+9d4Qm+YtQAD/eMYYf5UY4LJyyITfaiwGrMPTu+v8gr9hjP+QmLO+Zox/t77umH8BaKX1Ez65xCUceMg83k3szfeBN419dfC6Mf49FuuutjfCr5P5y4X9Rtk6LUckAgQIkMTzRMK+HP8aM/eBH8WC55/nq4YAAQIECATgJAuww9hXHAECBAgQCEBjwP5fTwQIECAQgEIeRSFfAwQIECBAgA18fRAgQIAAAQIBCBAgQIAAjuu6fE0QIECAAAGCCCBAgAABAmxwwL+9CP8Cenkczhrb47gOfwdOrNyRnZWwZ+DvQktMa8CdhN8G3yGR8FHyDfC6KRUXWZ9wlml74C/DVVYUw/Dv4UfAgZ3w5+AyfjAL/xveBAeK4Q/CR8SJhHVFZ40sOn4Rvg2pkAW/A74Hq3oTnAUWRAAJQ5UxKiGN9YJ0qJq3SHTzNOPgvB1gfcJleUgyxsaoHTpAAB9wWEsEApAKlZZt15Mm2UsK8Qh+BT6DMZ5CVEcIwFcFSdae6p4dIECQA6iytv6CEhYIgOxX4QtixzRcIrHIiWD/bNYz3PgFIAgFnnYE7n/sawLfvUtnJwMDTE7OL3D8IhRg0UjsePCAnh4GBzFrA4fNwe06fxkZ5ORQWEhx8XIHyz0UQyXfqWS0BO4nJVFezqFDJB7nztHRsWVmxggAWUW8jodGhFR4B9qhzWzZEykS34fXTj1arkz4BkLjp3AMA27BF3AV9rM0bt682dnZqcUstaJ9SkqKlrQsLS3Vcmb4QB99t7k9zTR47J/O1gYi8CyxYGBg4MGDB9pqfc3JyUmtsO84ji5Pa65lZWXl5+eXlJSkpqYSK9xovfLhQ9ra6O5mZITpaTW/jZmZSYWFSWVl5OX56OXuo60vGoYXDDnvhPqIhhDlALPw8zyKYniOaGhkRTDOeAcdPfQMMxwmPMdcCikZZOSRV0ppAQWsHFTrugNigqEhwwGCt4JuZSWx4tSiKYBJIpFFRGdsXKk74BA/1P7b29vVI9RP1R1c11Vf0LKDBQUF5eXl+pAoAdA9uXCBq1dpb6evj/FxXBdeiLfNSUhu3aK1lXv3zJ2XtEgAtNMKgPq5BCA31y70SlUVO3aoUcRw36vMj9+u4vz9lBTsgr0J1oDPPuOHP6S5uWp6upJDlXxzYdX9GFTCF/Ar0D6vAbshv8Xs5bVGODlftEz7G97CfEflfUos9dvtn+EJkNT2nD9//urVq2pbotqpqSm1Kq1mrBXtd+/effDgQTWvJ7UFht7n/c/5fJLJL6k/jYOv0mAJ//+n7jzAokizd38KUERUGhHMNJKlQR1QEAzj5GfdnHdvjk+8Oeecc8453/vf8E8zOzlgwKwgTZLUKCCSJEuy7s86Q03ZQFNd3Yzs2e9hR+jqrq4633ve857zfeU9AHR2dnZ0dPT09PT39w8NDY2Pj4cFAEIUj10jSvEMTgIVwUDiZc3N0tCAK0pfn4yN8aRJ3C9px46kvWVJB78vB0SHpLndv19vlYsYUGAFAIkUAFZGoD0R5hteEbuxEWSDNLRKa7d0szO8PlHVFFOfKgr081Q2nupaKqW7JA43orVVgkHp6IBhwgPBAA0Awk0G/QsLecI/JDA+AQCDac3a6O+8kvxjo9wBvLK5paWFedHX18c8nZmZefr0aXJyMkxoz549zNbCwkIeSM7UWOcAACeqrZXLl3l+NpPkwMCsb8onZobEaC0t3HPuPFOf3EL6+3cNDe3YOr5ly5OEhKeLiwmzsymTMztGMjIWuPPQdp70zXOUAwE5fNhDAGD4+QI7fmNmcZF/8T4aS74EI17i2nx46i9+kTPxdT0ZWWZfEcm2RpCxFAO6nzwJBIOBxgDPSV76VtvkV37guDnBYDC7qVoDAEKeVEkkA1tra2svX758584dkgC8B0KNb4G2oCo5weTk5Llz5yLA6025eUNufCQf9R0akYo3pOK0VKyg/f9TcWnQ7oGGhgYCEufT3d2Nuw8ODo6NjXFWdgBITU1NT0/fvXs3xCc3N7eoqCgQCBw7diyJlC7GJACvvnRJrl+H3+CHwE/ynJFIAEivStx/LOlAEtAvB4Wf8jvFfSoABBhrxIACRjSwZSPQbuLLum6uDd+/Ile40UEJkur1Su+IjCxsXkhgZj55mkb+Krt52mixFPdJX6VUEgkkBuPaX73KfQASuAMyPMzDuzeJyNbN83A/5j2TdXBQamokNzcuAcCOATu4kvG8A/ZNMGIl/nV1dbC0u3fvMinu37/PtJ2amiIDYLYyEfbt28csgK6RHFRVVREP1jMAcGe4P599tvVKQ7VUl0gJMZ/nU/NgcbiAeDDSbe45b3v3LmFud+e9nJyh/YWSeYpH5gPLPD1ZiHVPnkxNTEwND/c/fNjY82lGV1M+MEqugC9IZaVEowOAnn7xP0Pe8f3N5Jk6CCRfjunHhUL+iYN6GjyVfsXHwZ+CzC8NAP1TYkBjYyj4i1AwFDACRaap4o96GYGs6a4RDL7Z9DA7mOEfLCwkXQgwJIKRyN26cuXKZ599hj+dPXsWHkEM4HH2ZAP8CdgFcEkt33zzzRXVzFtyC1x4NnwdEH+gn0GiHgP1a71+/frt27fxdf6bDEBEoDl4OXx/06ZNeMLs7CyKUIdlTICCggL+48GDB8QJvH8nOaLnGMDH4YoXLsjFi5BP+GyOnPCJL3ExMXEocfPQ5qT6JGa7HAgLAK5SAXP9deD1QH+YPk+CuiAXrspVHgeSsDMBZlCxt2Lbtm0EAIgCYNTV1fWb3b8ZkhCBAWkINPD89GkwgPjLHQBjeoeShVl59IBY4sbU48edXV2dHzSTmIEZhoEigB7s8rEp62/e0D9N1jKc8eKFCxeYp0xJIJ6s9/DhwxB/rj/TFsIEeyM/YAogDZHBv/zyy0yWdQkAoC1zlLvEPDkhp8/JuSqpOiAHuOV7ZA/AKlEa8Z1kAkkETdxXX1+a11/8dYI8FJ9bC5IQAMi/QTcepQ+9hbGSG6ASDbe1DTd+GLqPUkSKCKc+fVpwB9cG7Opo7r6tcPwlBwBGjlRYiUgkRVOhxq9jcBB6/04wSABgsvEWX8B7p7wThLOSRDU2JWcX+/1fyc4ObNnCn/Miyiz4TX19PV711ltv4Tfw6O3btwOvfBDY+v777+NbBw4cYM5DMZY/Iwjo1yHgvg5e5tGQxBrxdRz9xo0bnICQAGVnHzp0CIKDJAXiEABgPYAOihDKFVQI6CdUEK6YBiqMnj59Gs3KcxqK+IMrgv5n5MxJOQmrhd8kSVKCJODhsF0ZEGHcjK725wwDxi8P+mOAPvreJblEGMANKisrcRJVnAEg0jKcp62tDWyCpRItgIIdsoOcYKtErUUgLdfXC5efGDDwJE1ePy0vvYRHKaVg8nODkIGCFy5ACgkKe/fKq6+uhvgcwvDpzw3aZZAqsLzIBh9iRmgMIBMlHQf9mRdQIv7JVCVF5vrDmbj++D+MLSUlBcZGohz/AIA0z9wAvHYtphdK4TE59oq8wvQQbwZ2K9uqq8t/dK3i7ALSXkmJoO2DzWhZy66ksbAA6Yf6kyrIvn0Pr1//qAEywG/xCHzBtQLAZFbw3fvwTj9wCiITWHCo9TbYi/Vx+wYSNQIxVWQtK1Y5qDuYbQaDBxuDp0c0BgSMHsM4b9QZ7e/A/Y2mpoL0YMlbhVkB/0wguzVQcTTy5YAywN1IKiHRpaWlJ0+eREsRy+AXo6Oj+ld+ArUEgDBZwEb/0fJDXwQAr8YHoUTh5ZcuXQLQOYGXXnqJrBbQAW7AdCKTHQDAenCHl5ElEACQjEhiSFwWFxeZFa+++irRIuokAHzp7sa3GIgYfBn4DYKGd1E7ciqw4aFfy/vN0oz6j8pHvb2mpgaWQFmIm4IKJyJccHyD688/4Z7IFOmSTkE4T/IAB4m68IMbCKGf6ru8dlzOnJFTp4Qqnc+n4iAlYOY4pcG7d+5kZwveWlYmVrjfYcO9/kfYPzci+m+x0L9GIhgaLPwMPnSVhEi4HmdOnTrFvNCiF65Ojs4sYAowX5gChAFuBEkwKtBx6prxDwBjY4RpaDu3mYnBnfaO/tTWrlyB/hMAApNXa15ByAFAuKPc4tUuoMmflLpnZxsZGQSJOaP2Yn1dIpkCoCVVVeLaVH5h9NsqEAHgy9J/NPzw0/V6sc4TJxr9/qA1JOjvv3U21P+X+jMzz2292PXhxe2Tt1871oM6GggEA4HsgC/bxzeMjF1oJvBoGER1dTUg6+z5ISTAMpjzgDKvIc1fLv3r6MhZjBn9cahh9XI+DofGfcGaEydOHDlypLiYfMaPry8rRY2TwRCWeDFsFIoEV6IGoA1C4FS08o85NGTQewYPQOSXg0BYmVlmo39cY0A4QBgb9Qm89Pzgr+3SToWfG0GVBVc57MiVuS8U4bngpAKU64nibeNtyMI90uMhAEAvoXfMD2ailnrJ7MU2KgAnT9IbwivkGSlJ7+/3DQ6mZ2auiPvOX255YehvrI6vNToiZ6QtpMLgO0AP9KNwotMyNezpwJVnnhIMIP7IQcxTAobdGUGjRLwDwPw8wM1IkjQaABji1ZCfSfaQ+ooeX0VLIthT1Tl0yKUjg1AmJC8hwZidfTr2/vXuWz40I5ICxKNoVaA73XdmFJePHVvXUrA2FzJSux849R8XtqDF4Kyst/mWfj+jhdH36wPTTxaebBrxf/X/+n/f+UBJIJAbQJET7E9bWcM5Wc2YsXgMKSSUAXKNr4SBLL7F7/krr6EUDL+2Gwxuy+3PA0DavS+kf8R3r4aLozXBH6n6cibKNMEayCY6g6xkgD54hDxFLky2CxUlBSYGaHHYdQ+rFmh/oHfHnJw00BlF0P13mjtJEx3z+KvWy2j1SIlXDFghw91I6I8NyzBNn/3Sj6qgsKLoH2Zcc03UYAyt460DMkDqMC7jaEHisMj5DzIv1x56yZD9VrPf8rmMFoT3M2u/970Jn28qMX16ekX0T97o60sU+k8xInVDoHASU1F4uLDa5oAEt5wMcVPgQ7we8sQkIi0mlYcelZeXxzkAgLg69BHBDPFmPT2ofcSAPW03Kt+Q6moivbb3msvlU9jHpExqmzkhJ1VSt2zeIt+Vvf9LTpwwR0eNhw8n79+9u0hOiEyB07guBX9Ow5/kNGsZYJ1LwfoRDP+sJh9a/nV3O65/Xd75OgvDHlx9cM8M3ssO3ssP9gz2VL5X/WQurfGdb83l7kkOFSQHJDlgZGa+LH/3vNVJVCarGIi5YBn+lGSZPG/oLfp7fRmvF81hjG6b/ps296du49VQoihFwHRQEkQEr8XLiQFucli4D3kxp0eIgv4wW4glIBGVA9cBAAPWfwUhEX5jzs8niLHJ3MSt2SSbvMOy2xgQIRK8eEPTp/ef2bctdZuyBFnFiAGEZFXeOIQDmbZ2AHATBvAvBjdBnY9B9V+WG4rQkyfcqbn09GfDp4i/WTaGmW5Wfp1aGjWRThxtDUBHgBUR/DkvL48kjIYIWckQS9vb20mImUQcwoE0UMQ/AECQGSgv3F0dnptaKflB/I4cmabMw0wPR39DpmRKe86gIRMyYQcAeo12Ze06mHUwtzY39+yWQMDs6jLa2tpbkA8RcJGQ4A5RqkDNodtfRi/QUpjJkeN8NEPcW0Aehx4He56VgIMI/v7g5pJgxZF/Har+Sdr75w//mZ82/u7Gnh4qAyjjhwKWpaSUyuoGs060zI4E8rwp6GMaBpR3QOts9B95yR8m/nirc0Jz8F1oC/o+Hkw1AqbjXsEEmHB0rQnDevgJY+INmQZMm5WE1edOtW8liDZ6DX1huO38IgHYL25tclIXNGk/Ow1rRnq6SbKa4plFRng1H4OQtbR+jc4INHKG12Bl6PB2rOvzNpyYz+dR5yFFJSeT5Qbiv/66ICFbA1DY+EZKhGwialVK/yWtRnZoRi0rc1YkNeRZ6BGzj0wXqYcMLMIs4AW8jESNNJqjOJY6meeW0KQVUzU+h9ybn1PSDy8Alz0S4bY2uokKEjoQrUFsfoah/1252yRNbdKGmDgog+AOVxCXIgBAK3Zn7vZn+r+dlVcsufn5eUxz0LQlFCJoUjchAHgpBWsAoEjL1FwH0+I5Y/+jTW7Lv04BaKsESx8Ge64GQ7Wjhcj87SUl5u7Ar3T+67kn21/5+mxGdnd20PDXhogBmaHp0tCuQCDHKJZVDT0HeQfKhrYDfSaFBH9REp0iO79HJlIhiNc7pf92//wX6G8dZXrCLz4CqoLLgt0iAs1hPcvhKMMwfk/OSwghfpAEKAMiEhAA1uzpvqQxQAyRK87X3BfGMvT/vtj2R9xpfvCc9nayHF0yrySK1cRGdrZZXCxHJX7GB+jqKcoYhAENAExYIIDMOBBAWI92VTSdPCTcrPWdmp7iTiEGyiqGSM1f8RYR4fUcCFWMKoLhe2A7Gg+1PZI5YibTmTJAhG1OGHPisP9o3aAdsqGM7imq6MqVBabE8oUaefmUtraq/bEVr6eW6JiGdMGhagLlSv9XM2QiXkMDKLOJAzmcy+g9AKyYqnHWDOThcWkFlBkeAwB5Db0WRVR64NzPIcYT40md1AExXLUWaenKGRwCkSnwJm27PD//s8eP/8Hwx29l7a7IOpSZmQdi7N2by9/5mtuu9U3SJwD9wTyXgjk33m49uz/5xKjKvx2gv47iYoJcoKenem8T05l2qZu5It9AmuaEzfNaGkj0Nx2a/kUg0JOT0yPCCKzOVdFPcBd8C6YAZYCJ27KJUmllEJg2VtIReNOwAsCOVlv6Z76a4t34CJgO3Q40+CMjoN5Q8oXLSJQG1nMghxMAlP7wtiQxsKdIAcAZA2yrlvsEgLA0Pl0rBe4DAKCv61so5XHbATVIrYZe4XLm5xvd3Y+HMqSa38QuOrQRnN8TNDQ+DNykv479E/juTBw6Z2iXgX/QIkHMwVwrUOzxkCVZ+2Rf/XQ9EjMXlsjKdV7WzzFHFOdWgjs7ZSfMhqSDMBAlIzD37OFkCY0ydGsIfBC+C58FQ1zJ5nTYJ/yWhf7GxtJ/gDI6aGullhUSRPsTFvTT2UScwyIEAPrcaMNjxa/KazT20Am9phzKy3ixdlVwLO8QHwnIJgf4kw74OI2ABACEGjhCVPs94Iv46O4pPIl5yy13UF1jQVedsPLw1q5bQ8hDh6sFsrRzJ/nhr8/OPhqt3TbcmPlgIDNzICMDVCQG5LJMlb/7UkcnuV58Z9QMXN9DKVg1ekgHczTu5V/rzVO7e9F/XJZ/BwB9xyBfOI+y87inpCQUCISoxdw0ZGmWQfZNf5rfH/DnBJpJEOzFw4zfvzpx1m4BBBN68PEw6AZ8n5+I8vwGMIVZK7bSdWrT/6dL3N8kYMRmeKoyHREhGhFsIDISvZH5cqwuFmM7I6U/vDnhTcLs8nMyBRUtqkHJ8sp01R+ePjXNZjfm5Yq5r3XIw78j8nfkxnFR+2rU7b50OOuaYpbNzDxNFrxs7y4EIJY1dkxOttUOwHGnquWpyMsxathBglgzPXUU1ZhfTE/YIAGAi0sCQlSAb+m8QGFhyrlFMkPohmJJFw3frPlQJ+EKQ9WdERpvofsQ6ZkMDNAB33Ill50holeyuEKkgGZhIeBvjHHmUDFQDxWLc47QZrNR9+Jj/cRluUwAYBwIjCn019S4EuQ038JEhDSdWUlThkS0HZbxSr0p2rsRtxrAbatb4m9zMzQGbN48MTdBAEAFii4AsJQMnv6MWi5yfy30N+1bSLsx0E8MuLi/de7Uq0Jn6JEjoAzXbHTT/ODszwZHBjPOTWZ9V1cATgisVBo5KZqSGeAsi8IYXIyoS8GzVilYB+x6nVb/zrkt/15zQL8pUinCOQUOHAicZ60WqP5z3RsIW/q/QMrj4PG/eZwY4GcnH+vA+ogBAOhHbIHpM2/pv6S/nrYz+j0QhSB0zGpmO3I8QScjJ+MD+UDp//Cxg6Loz8+Ybcwy+I6IUGOEvyjTidZAJaU/vAnozxvqO2sAiGCH5TDlpcfm4+mr09P/r29afuXvyPdJm8/8QW358QIrYC8NbnV1wp4poD/4xYImGtdIVBGACABM0JHe3k9bvv/00g8Sk4Ra81nPG/C2WyGNTwIxAwGcC8YIWyISkA3TV09UgEqjCIH+/InYQBBySWih8/R0UocbM8bqOuvo0+U6E1khBPZCMDIt3IYuXtaC0fqJZ9A+ywI6idqYtegBTJSnrG2qre2Q63+YWQ3UoGXBAiNXWTdWDDCETjnQX8fe4jGFfoZLejNjGTNR8MElk4jG7dCXsYSTA9XiXATOx9+IMBbiTs0Bt89GtIu/ECvhJhl7yVnA8eeajuulHoi5uv36XNUbdIbSG2TSmqmBQ9oeJT8aTBvMOhFW1lrAQ7SCpC2q+LonFYgAcGtdA4CWf13qP+9YCP5QRHFef+I8sp3/DMlfsfXoEoazVpxZSg+Q+HWs9RAryqeQBeQXujA//vhj6APeQyTAddDiWXLC6jBew01R9L+XPSsVZwX0p0hLDhKz8UEIx0pVtCahFMaDcSCH8yYEAN4TczMBAmaAln94zIx0Tsv/mxZoPy20nc9igPclzfS4ccmW0P/cORrYkTLIuZg7NLuQ4dO6MHbw4K/UvfMrn17/K7GUgq8wpkiphe06mCzwZ+YGkwG9iVQb+s8nfvwxpJrfA6OEfUiVuDYAnWofp0LzRfNo83sn3qPEgiptbwXB1UYwHPrNoZo9NUeMI2wNcEJOeG4QTz3SWtrfMjTUPjrKGu82vghuRngHDVZr8FuQBZPzM0THJlnRNn2Z+k+jNIL7Sv/T84cV+okBLlsUVVWbtUzIDi2LXADA7Fdi3BfeAVMVNJ57AcEj+BwGWAt1YkTntiQ1DKSGQq0miG2UfFl2SPm3sqzsW+Xl36qqylb01wBA7mAM0pVcmknYYIQRQIZ9AtFlnloKZuwduNOvZQAtBa9b+ZfTdxMAitB8lqA/37l7SNOPVY9ettlPkwRKmHr2c2YYkUMNBJmOe0ATCcXeDRRXQ09E+YH704nfk97zufizvRnp31yS/kVEsZvqMbxDU9RoDbmGT+Sn033FkzkPZ+bwnpibWUsWyAD0nTUFwTE89fwDvNBubXPjjeH+oD8xAGi2PxPuAxCr93MR5YP3xbP99gE51SosfKOTmozZmT/Rmwvl5yJQf/jgAzovCAP4YVQBAInsZXl5W8e2PR17Cu4X9Pyenv/15/8X9xqf0QCA0Py1P/u1Uz87lbsvt+RQyUtFL2WmeGk6IswgANxJuhM8Hmwba6v678H5U8Utl4Kic1tjABH0eaNVhGIhHaTK/b+9agD4rfJlGZVLcF8DQErOgEI/g5nv3uwePF1tZ7fhRTZ9GeZ8h3gHAM7JNBls+oFzMKLq/GBqkpySOjI1UlKIJnqYjBqjqMyd0jmSPnKm8Iyf/S6cDQCGAP3EgNHtg0A/VMaJNni4DoEv6IjS7HW5ui0EgwAQ9+5PO9UQF/amzf2X34ySZf9lW8FzCXGprP1hSOfnz59n6S8lPvt5AMgpugUQXVg2/V9ckv5RM1CEKRpT90NqJADQI0ShWHeQ3uT6+j+1jMPtHFZNPJkeq41MvKe+ebQrdgxHt763ttaeHu42VXRIDjcgn7orgOtAf4dVFslkg4yKjKCFiUcL7JYT5SylAR+Xb4dF2gH/APpJBZBeKUxDbqBSTCH35asENv5qaPC3tnaGQjQGfLJ3LzIdd5yrTaAl8frWz+5l75nwHxjLy5+QrinySoq3UT0UhRopoMl+c9r9kXUs6/T583I42fzjZut3Gp0xwNi/33webd+Rd9CiwaHvWKmCvIgAYJ8Sq6YvG58rP3LggUI/MSDaYpm5ZCpvqrkRQtXC3iF+AaC/H3/Cgchh90g5TQI+0yfRGPGDkchIFIZt4Dv7jLOdLNklvRzsAQajc65IBP15TVbWDK4bRv/RD1T8FxRD6rcMzJMKVN9dP60BgPDDu8VunJyu/g31sbWk+/4fuH9JPDYx2eYOOossExHdTscmZTb6Dx3dr7o/FeDLFy8i+KL8EjPQ2XEy+CCBRKMIC9Zd7s4fhviLSyaeTI8F9O135otEpa0YEeb319xvZy1gLLNE6+xAIUx81Y+tgPtQW9PI7cmO8yb8TAP9V6v1IzyT63FmpAKor2iwLgMA6Yzu/Y4LkNH4ExJICr9dVUVxyM4AyBrfffCACvCdW7eIdiYQQeg7exbty/1yM7plaP2g+Hct8dri6dO9lZUdZE6BObPYFBH2e3LGAJuczZgzU8YU3Si/Lr/+HVQJa7zA5h/muco+/Jzd2312SfeHA0RrSmWcbMYNlOvLMOc7eA4AvxK2K6DcE2p26JqJLS3lc0dLTehNPmpGtNU6hpmQwEk6+Rl3kUXgAP3BnQeBj7DandJ/hqJ/mPfyB7x6dMJqIdYKWJSmpWAGa3Sb7X7QkpJ4qv9zOfoRLuXRGnkx5gRNG/3bDs6w0T/oz5q9Omv7aPZdYNcR7U7jEPptWINOCAEOQOHXXnst1V34TF6y2SUDU7w924gDbdmUSgbvSSrjHf01CYjatMIl+CQnoWWuSGibBnzH4/n7Ebq9mRQ+n6bMzF8EWEiJyy1Muf80F7H3OxXt4vx8tqOhIERxiGAP8dcisG4H/awsfOUKz5YwqOcTwiFhfHfKOS4uIvVSbZghDMjJU7oHXB5y1s5RU6z/GWYbGYwjBmgtFcRgAB18mnaC4Lxfvn0kanMDoL/xDP1HM26cq0lT9C8t9fJkSHQbXYqvYo6aG+FITd9BLU4BQDuB6qequ7r2/OPiouwiSj0vyUsSpalEs7Bpk9ZriQHK/9hGHCLAYN4iKIc916b3am9/VT8L6o4sLRVxCuwMaMeEMh2vCx/s9vzm7puq2BAA4rn9Qxj93/DWYDR8Lv1vC9rSf6fV88f+tHQNsQfD0aNH6drUAEDnKFGBvTxVDmInH3FhduEX4NbWN4rS3nYz51i79Y33xFwGIcxYc9uG3xT5b66anLXIRRiSXds4DyGYRZZID0lM9ofWgFjNidFb9fx0uLoCtKk2NenzP3b5fOzNp7tRhu2xQTxgiwJ4gPZ0QQv41kxDMgB90J4R8euT9wclqN0fQqoE8a+qAuLxjDzZKXqsdXQb7+yIAXwEgAApZN8hPpxGcJDhhdj/UwATOgimWSuzWPCdc0feq64u51JRxPS234dWfeExWhDGlNlENl6jLwb3ORxjbnoOAIOyzHa2TX83UJj1s8yc/J1l/T7f6e3RVvt1JwmGtmsi3cAS7I5sfurOBM7yHbWBdl9799/s7vvzfZVb9A2cG+bpcyQTpSQXDHcW2j2Wgh8trQomsNCmGoMhuWoysX9ws7P8u/HtvnHf7vpfWJL+mevt778P0NP0TXsoWAAiAAd4GwuvSNq4a2+//bZuxEYxwE1Z2GcZ7ZsQSbIHAgn/weESpeH6HGgvftF+UE7AO/ovjwG/A9FhzeYNLXKJTmISHIbnz459eyElkzqUIqoG69J7cV0q2nwrvaHQ/xVvDYkg2zfRDkQqwKPc5ltbaeekMcnNk1aZaez4gpRPXEIp50BKJrb6SoMW9N8OA/eIRgZmmFYM6N3d22/2PzQe5u6xE60XYD+VBX5oP9JY0tgf2pFc5hs45puoyOCa53jb72Prktmdctia/RS8EmMuaJVeD/ccAL6//OEk35bxhl9rvrD7g86yTvg6SS5JTrTNegxokb3zH/+yF53zNyYwnkRzuq4+vT90/3rf9YbdDQNpA3/23LmG+U+ZY0wwEgncGHxCeKTd4t7WUpQ2ipPiUJ+9l4KXdJtYA4C+ibP8u+FNd2Gy0X/wyF5t+uQn/A6JnyUC+CJ7NoAINs0HcFFg6CNiTzdWonP7CAlu8NdejcyiM9aa6v4nWoeIdkc5jqUorRVp3hP/WbMUYUSLrylrirCi2qZz50SJ0WKPAZwTA7MZtDsxCyWLPEA7BWgK4KbLKkYMQAUiHeSycwe13sD0JsJLRCMDIIen1wBMEMR9GlUZDkNntpMA7N7t2/oVeBRG15n+UFZoNGGY5J+ZytEvxJLkB99RCJb5toW2f3az9v7Y2AEQSpU3T4nJdst0Bo1bxuxzs6SGV+pWvjssiyUA/CAM/fk3Wny6pD8eeGyMf8A5QrdNdJJodp3mcuAszPuhXl0TZvAeglBpZmQZzxad3+m6A4gAKExpJvPDRw/v9t29+qevHk87Xu579IFFqalLkWVC9ZqbrYeJtefKuQrKtmF6W6ylYOgPKRxkJMbyb7ej/LthzVhhr//WA1NSUaP0HwpJjxAUm/BMvg/C7nt+wlG6100jgHKIvMtl6EAG7wO4oPsRV4guNJXTYqQVaffGUQQeDtczIQvhbb2jv9d6gAK+Bi8YCqGAEe0OPHHeg1hXxjAwe8mMC9MMHTfWhzCDJpEZJS+wZTftyoAjRgYHJF8aeOCByAGybR9vsSJcEgM0AOjPe5A+w2gxjHvG044z7F/CXkcm8xZAekH2/STIsfV1PjM/mzamD7bf4IubwDfn9NprK5YmjIi3Trd/wEREM2PmnUQ0XsDLMBFhhuq6yFgCgJM98Q/9uYtGHWA6Y2brMJMN/Obz+Kri1kjVaEiAUfTfSOnrmyHLpGeMOcOic1aQs4Cwd6yXh3sQyoAYitrDI8NdfV1Vf7mqMquyfN+tu3dyttdCMBGCUFpBV6kfKR07e5w2OPJNz1vSh5eC5/zNdj9oIBDr3p/zzvLvi4f4yMY6jM8DQOpde8Mfsmvn6kQt0oQ9dcveM05XYPFKl837MEfd7VY3n9A93UBw90/14hCUBzYB1QDA4bwh2xV4vQzeYwAAqyNcD4pg9SJH1w39nVgs0bXJaS7DMJKStKXEbQ+iHquHRzTUKGQTRqTsxBSsgP+J2GHAMG7+E8NoNtJ7ftj5la88IvMnOYk1fHu3VxQxq2WUSEYNiKjWduOGQTzT3TNZCBKlMZU0MyaLBdl1yyzYfQRSr/tfkUZrxsaxsLH4PxRe90ln4NzKLCJHs+Ucib40SNr4Pn93dwsLU1DwaZKGObGCfMgYwuOa+5oB/fYt7alm6r7ZfW/JWywxr86vzi2bnx0b+6R5562PR5INYzotbRLFn2ZquD89A3iBw8zYVCBKwbEHAI0BlH9/WfSfB/LApv/z9oY/kHFH274uLUmwbMWeTu3FxMSdIStrIREWjwezoT/uC3mhwOCmh4GN5NiHgNoj8UNrkmQPvKdmAPEzV26OJgrGErk4cZ5RoBXhSCh0n4RLYrV+MqmISo6KrZp/qy7hLjjzfRizU8+M6jricoT1qLp3rAZ+LX6s2ZVJaQIkIWLaCQeXa7VrRQz4PAB0mfJfpel33mgy9h858kdLSy+WlJzZv39XnKK9d3KAOsIzRLnlOvqvX9cAwPDQUaKZMeksxS19NgAThNqbrGTspmVLr0QODtQnacc/AAD5OogCWlyKaopggCEkjXl/71ZLayuh22C3NzyNbafQfNKN9CIpGpXRxSeLcBWqpvyeDUkO5B6Q0wvMLbR+hC6YAhcXBUG3ujVJLOJhbGSoYL3vUX1fLKVgkhTrcMq/GlQ2fvkX8mKj/6Oy3WI1ffLT+YgYDM4+bxnNBmGL19W0/9L9cjA4DuUE/BvfpbmIdlJoDu9ALwBVx8hOTMbAU8D0WWBEAqRPniLJEwV0Q+n1sciNLaArGEsuypycpSGU/1t14dWEhf43iFq8WQxdQLzJG6s/BUub5DgNjOSbM3GHC6pfc3vAZXilPkGaOC0rGeRUNwSFrsIF+P5uIg3hhZ3FfOKj+DeBZsh5hkLUc+CIK8aAQv7XLmadKRflo2Kzt69j/1uXZo8aw2XGsJxhWVKM0B97DKCCUWlWThjPAsBHEx9NEgNAfx0Q32hMHwBAOoskzqJLElz6L4gHK84I2A95MNqp7qmuGziuwzOB24XFQRQJAQvtLWNIlEZ+Ak8Dx/s6O4PBJi4LOwzW1Jgiggp00Dz4wHhADkUqgH/ohrT2w4BIHUh1IBsEAIKBGdmbvSYBCtl9SxoOAcBz9ydv9ctC/230b9k/IRVvKP136sVoMkAz3TUwEa0HhEmQ6P4AAeKj1qDEtYHaYAdvSB8nGQC9pKQRMEpwBzrPTNBNKJ0t/+QKnAZTgl2Mrl27xgQgZtCLwt4VNKeiIMkLMtU4YSZArjbSkOQCu+FxA8J75Zpc75KbY9IWw0KwW1RgIZ+rPFywrY0gSZMctwdEEa2WutTW+A68GBwJhQAg1v3BK5EmwKDlGzqRhIFTxGNuDQjEPOVwN+uy9speHmLKBEF7RMujeZQryIH8DGOTBBnaUgtpBgVV6669XzXzgwu5/+8/XTP+lGH4cA7jjJxh97oXvh9cQAKaAQBin/R9Is4YwHBtTDQSWfyfi4+Ta2bMtGJ7LmcMgCdx8TUJRgjlNQRplmRybLwDwN8WWrX4VgzKHdrPo84UtUHQQiG4yZ33B3btGuay8Jik8nJutJASHjJXbY2mriKMNTL0vZaqesz6+SPPCwLqQ45VwdF8Te6+ij+p3f1+qdz47f+6fdXnAWBrvS39MwmdLAxJEWGR1BK6TbKJX0I0gFqFAAgILB4ajgijj7AQ10a/M23mIL5mFfg6O9NRzoJUKu6QJRB+yCrIEYEYSkTEBv4KLQL6ORmAiYnBgySJAfo0sRdl+lxqfIilSybgSys9lwi2FAhoumzofhH8+erVgrq6vKPp8kdF/qLnuD0uvi6ehiEJSc4GSkV/lnHRyM85aMc+0Ox+SxqwGFlVGzofdnVx07lNKDxAEveXkg8hWTeDwxNAH/YKBaf4phA1QTbks1wYnA9er3uOjnC50tO5SswgzpZACr8E4QwIH+GUi9bWBtel889vmmdPs9I2+c+IlBdf1eqBxgB0GHkh5hCuWCOlOyUzbrTcsNGfgnCUMHlY55Q+7Z0pwDWHe5EW6AJMTbwIvXAgbhAcCI2orKyMlJpEPH4BwPhiva4O6toAsQ7xYNxaxKzBwenHj69e/TQ5ecZq5TaIAVGeNmcD0hpEItyVE7WhX3/GWgq2+0HxaQ+rfxec5d+Na8w9m/7P2crPsmQfRZ6cVFvClWvoQwVwRBy0wTJcEIAgCY2Wg9MOxMIC/BvHJYGot4yUlk/kT7g7EK8BACUavwd3ECXQPTVZZuNScJ+2VGKAvEgjIwX6AEBoN5HM2hgafRMIA7yYLIbBf5PFsoDl4O3bVYf+4EzVr0iVeLbUf7d36wc7t9bW8rZ8JOm1gqagqPBP+DIxABWorIyBEs3Jud+OALenDZQ5xhsSlbnyJGpkXSRkCkb8hjhNAOaX7A6yyOytrsZ5CEUuV+SQ4h+RIyzpAjHZRGGcrj5yI65PMIj6JLwhzVTUBhDTSKc6OhKbm8tmisrN8sqWypOSeNRqb73SecUZA9CUXmwMSDQTK40vigGtziTgxIloWibTcWwyYwgWrTFkxvoEPZIw8gPmHf8kFSbxYrJwL5QAIZwyQ2PtbQ1H/7AAYH8fzwat5p1mZgYWFmprL8/OTo2PE+YNzpzchaUeLjaWNjo7mVZMJWBIvvY1gMLGfYaqwDGWgm8ol/cWAKD/G1//IZmz0X+gNJPZq2M1SoL/Ab64IyQd5yMtoPALK0GQoRKFC+KyAU+Vc1RL0B9qCd8nfsDuec+gZfg6/UV2ALD3edZFZ+S8iEh8LmkEUUpesAGzkGboDcBFf+oD+fBDwItzJWPGswE4HD2vs6OqqqOm5jevVKVuzdk67bl1rXzLlpFDWz6+I2+/ja8BmsQb8JrJBe4zN/gp3A4aUYjrTLqoLDeXA4FgggqxpK21lTIA4ZYbRCeYbgbHrad4g/pHaGGa8CnEgKhgjg0FEJbpCIJ7sSS4E47PxOZyUUhAC+LTuWIjI0n9/bnzh4rkdTSWo3K0oriiQBZ1fQM/67rqnDEAZvpiYwBB6IuCsDnR54wB0bQ449t4Oy0VUCsVgki1ycDQggjA/IlJx8UnJED88X8mIJtxScyWtGIhhSitA0mEEWPnLY7C3YVoDGzZ8uGNm0NDffgqfUFweYpAJAmkg3yIrf2aJvECx4YNwEt0mS0KJ06e+MYbZd3dxxwBID0+peDB+j5V863ClNvyr3XI/qHkjVX+Pb6G9N8sqSCFov9q6i28D4qBUIMaoNDM/Mc7QW1SgTfffBP2gRSDO4onI6vgTYjkEH94jVaGSS/QfBAfKAzg9KQCYBAMCJWJD0WGQnSC8uS547ZrTb6t+pIYDK0MAMRXyZPxYUoAQ2MXL5JAoc/gzZmbZgoKZo9YRZa8k6l3A6mpRup8pBrApgh/SClJSZlISZk7LXBn+D5ArKAJ8hB/EKTYiRo+zgkx3ZhUURrH6pNk8H/QaJ5Hh6L5MFFnZ5mQlIj4UihFZHDMW16gnyVRhmEgmywZ9YZ6AAuDe6eRg0ZmpEMfA47WnCEH91p0ijUBPMOHdIYXS7HYAYAzvPx02pBLdgwAa11dyfj/jbkzRxQ4aBzUGABgfjT20awzBnC5XBtzCvQnLQb3cXUSX2YE3AsyBGFirjElEYUgZ+g/xADmZjwCgLEyW6T8SxFYtmy3K8DeDe85exb3IpBM79p1ubEx9DZ9QRPop4R/ZpHPp08EIkbQg0ifCZOK+AMbYAUCzAZV0Oicyp8rKio0SkOho8eOHU1JORz/UrAOJkA03Z8brvz7fVluQQla6J96U76pHTnAUmSYwOFeffVVNBkAF3TW7aABZeCY30BDQGSJwfB1Crm8lf1cYkQGNB/kZupdBADyAD6O+UDyQQZA3kAS4H7Xwx9EFFT07zEbJA+n1dYP+4HAnPwYhIYaJ27BM/0RQYdytrO25k1508Mppyz9YUfVjq1JlcwWtDD4BxSJqQIEM610Tx4+DMWVYOD9ywBYxFe+CeIM/Au5yQ4AiP6EB3xGnzbjNfZXSRUFYfZ+YP70Sz+Nq1QcNQBANvVRw6wW4gWsQ3LmpNp1ynfkfC6JGAxp0BhA5HB587/n0WlSIjsMtQ3QH8mEMzHvm3J9XnZc12JAVCtMaWxDdoMVkYEB/VB+uL8GACYCUw9K5L3w674LiCUbOrQBlNsf++aTgmhLroeH+f29bQW9XV07Pr6/ZyvawmJaGt4VFgDwPQIAOXTWwD5aFLLxSwhIN32EZWWhlPRiiY8p+tOBGuoOTSmmM4WWlYLTlnXDaQDY1j2z8QMAa/puytab8o2bIrP2Rh0u9tLA4eDp6Dykn/YDYfR5AArEsRsEv9wybS4izDgDAHIQfq+V4XjEQbWt+sd4mT4Ckp9kj3gs3TG4Mf5MkQCQpMaJY2dJyaQxSc4V7Smn2L81hMa5PRXlzCCQWnQ3ZuYoM4uLo08B4yRivC8qXrNTG6k3X4ZJyGzUAAALJPbwQbwmNqOHksHmbloSmLW8kgDAJjHwfTJpNCLBzHBdkgvNWWk2cFHE0CEDZ8QgeKx587/n0WlS3DgMBWF+UucwOe8gV5JhEgbIzKLrLrMMjk/7A2k304HMWyVTpp69f+L6BgD28GeA/eAxg0xT4mFkjjAlBEeyZdBzvLd3fGCgDaIxOA7k85Bvg++akLCgK1MAqcJ0OZWp/RZgLLwjdOBAt0hIJF4BgHUsLEeAlfjmfXPdczD6FUvB31+5+zN988I3WdXMO2yg8u/zvPwJ4o/sA/oZD8WL7bdM1tkyLZP4WZmHv3g1XJWF7gzEGBgzIAxa4sI2hrHS5ZysCQTfDJ+G/GrF9iMGsxLxRwMAHBOAjqPB+ZinjPU0UiKGRGWkIAw1RwxgnCGtW/1KYl8XzP0diHwTVsbMk3JSbLtOAFga5RKtxbTDT+wBgEQGBYsCy0Pdy406V7wMtoL4EAgg65BmwvAJ6bgyAYA1R8R26BPezOzhlTAOnET7lPXG94O91hiAn0p8jOXHzM9SKV0ILQjhpbtv7QBA8hqqku4qYiTpqq5f35h2c2k0/X/2zjOuqXTb/98tVQIiIFEIwtBU0BksyH/G+Yin934O8++99zf/3st9dc+r++b23u89vdw+fYQpeKyoY4NANIAh5BAgkFD2/V122CcaxBDAwjzfWbMNO/t5kuDH9XvWWjvPYtMxyBXLHgX6Z6LA+YONnaYBRY/rfVjpWZR7NSCrnM1jEwA1Y1eeTq7t2vDL9Pdz+TKlpdTVablBeTnrR/5dsbFMsUUkokhTAkC6AJSWpi9tBsEJAnazYeityAiBf8kCsJdUPkEKQ+D/BH4I84RzJUUAth4Gw+K9GvAJniTG79UA79MjADXUNNHUSmuQ4JWzZykqkptWlC4BoLGRj32MjUITao0vy5jBZQ04DPlsNP5ledn7kGtkTzgjKd5/FsOjx2bzMSzA6SdTAIQ/RQM+yxOIZWOzEnL9r/LqaU6f5ez1kusTjfXJL+996Ut0dbl7ntiPY0OOF+GL8CVo3vA9ofI09bKVsAJR+B58d+m48Ij8wzeWrAS64FMYDAbDZkYAoprqk5wspLCKqtbJ1tD5UIzY4qkEtv0kyKoTBDSz0cylLPCfXTVEWOCR0YXsUWEwGIwAiDrqlJ1ppDFAIEx4hhkbmyeAO8uJoBBUPuKY+7kl+59sZQwGgxEA4cFzhCPOd7hXEQCbrYXBYDAYAXAppljGVsFgMBgM2/jgYDAYDAYjAAaDwWDIxSZDDAaDwWAiAIPBYDAYAbAet63CJPwqfCq7eTIZ8+mlF5jkoSzA78NXV3659b6P1cf/BfwrqMrw6lvw09Cx2kUrzlMN/xpezuqtr8o34SXIgb8J3yYD3oP/CM9k/OqF8HfhBxgMRgAMW26PgOqkZUb5sqViZf0q62cxy9+WwWAwAmDwyTJ3zWVQDhWQv5kyk6m+2EkzGAybKgAG60l8YYt1sxOqwQeVWQQBmeFdfomdbCyLj14ADAbzRTD1Zb148eKdO3cANahUJ271ZmIjGGd8lFEdo0RnmZ1n3sLKI6+IolJKnW2oCylkjXzjgUWAP035qLkNNLTRth6nfP48AwPMz+PCp6AEhy4E75DOAvQuT23VUbeHPcCtW9y+rYYLJBLk51Nejnpt1dbauCwu6iKGh3UR8bjT/cNp/7T6FqrfIYXqS1TfxAchnDbWxzi2gx0P+IDlt26VLy6Ww0hNjfrLprTATmGe+Xd59y53wfH+OjbDIZb4chYi+IekYzNv851FXHLgK7h0YTAYNl4A3nrrre7u7ps3bwLqP6nOZB//+Mdz5H3WQT/9t7g1xNAww2HCEoAZZlwB8OCRY5IA+PCpvWIzzbvYtS4BSNOAfPJPcUrT6iXICgliby+vv87cXIr3536P9I3VdoZlG9vUOehD4c+fPZt/+bIlOQmHkwLg9dLczLFjdHQgGBriwgWuXSMQIBJhdjbZ/2/PHhobefZZXcoD+MP7e0i9S/UrnE92wZQWnuQkaYRC+oDlr71WPj9fAXobUhm9pZWbDL/GazqC4/0/plcBMheAG9y4w50o0UUWt7O94hsVPnyS/7TWpLOL/GAbWORadAFGAAyGTRSAGzduaPkvDXjnnXcAtaLX8l9tYNWNnqzQOvEiF69w5QY3/PjvcCdEaIIJVwDcdqC72V1Djdbp+9l/kIOHOSxtWJ8AiCj8mdP1RQJTT33WAnD1KleucOYM16+73n9155uuAe812831wfpXuyd6e73nzqGpRketeFx9n/H5aGsjFiMvjyMlNzl9GglOXx9SiVDIEYBkA/KWFp2RbmiJ/vBfSEXFkgYUU/GdnPDkl/myNHieeckA9xIMSuTKL18uv3ixvLZWg3RmZQHQDAECL/NyZBdUf1mXpnYK+j1WQ33A3+O9S1waZDBCRAKg+M/7DW8NNbXUSp9kHjzAEEMhQhFGPFws4mvSCQwGw6YKgNb7agKutvRKBAGKA0ZGRtSwm6y4zvVees9x7hKXrnFtkEEgPz+/vLzc6/Hm5ubatp1IJKLR6K3xWwoRCilsokkPbnM7RKiDjvRQIOt3Is8iAdBRL8Ea6e+XAMgc778at1d9sjpUHeuOvfnmdE9PZcHZpiN4CyiYZXYkPvJ+//tvTkTz8uSxQzV573rfeiuvu/tA/rWaQ5SUOM3TFvz+SP+liDJHytORn09ZGQcOkMZCWmNfmdz0QvjSCCOOyeGuJABF0oB/8A/Kf/u3S4LBSZ2Jx5E4pSLx1nBpwBhjVD+nadHkmREn3k33m7x5hjP6G9EMkqJiip0OdHXU6W/HSZFZWH78ffT106+VwS52lVPOClxK/yErnk19ZDB8QAWgsLDQ4/HIQfv9fpAzqtCPOsnaUYqgm+53eEca0EcfsHfv3vr6ejUZ17TFxcV5eXkSAHW+lwCEQqFAIHDr1q2+SJ90YpRRLRUVJShZ4cXL+vha19e++cffvDp91REAHXPIIWNsW2v/pABA0ec+99kf/vAbZMV07/TwO9Pd3Z89dO5TinLkmLWwjRHTR9bjN8JvXL5MY+OVlvkLpb29JxquHTlCfT07dyIBCIXQG3j7bc6di6BIxOtFy+X9+7EsVkc+2nHTly45vlt2nwCEw/L+0gCKi8tFzRsVwf80qet0Rm8gFXcGhDOtjpnRR99ZzvbQc5rTcvTHOa6PP820ZnuFVyqo0N+O4gBH9RU7at0wyugn+aTO6w0/NNqZgR+SBccxAmAwAiBqa2sPHDigVb8cNKDMT2tr6zNyNGvkJjd76NFaTxrgx68m90eOHDl48KCKCpKBysrKkpISVwAUdoyOjkpyrl+/funSpQsXLmig3OICC7nkfoSPlFDCOoi1xn7Nf/wf9vYqEyXvL3uWZ9eU/HFsaIhfbG/9RryFbIm9F/uL3m+d/JkPPX/y+SMcabQaHQ8oscwnP0Kk1z8eCPQHJ6+3e/s6OzlxgoMHJcNIALTu372b+XkpgR4Po5BpcFCPpKusTmWlowGKGIYjw04EkLb8dyIAypcJBv06ky4ActaO6VLH+2fY1HOe+X76FQhe4EIrrZL2AxzQ8n+SSQV8fvwyXaDgoIwyIEJEz77Ii/pF6Xp9gExSbjPwg7V6f1kK/w+D4YMqAKWlpS+88IKyNHL9zppdjlvugLUQIfIjfqQbRd7mbT/+3bt3nzhxor29va2tTeoiOUkvKU9OTmr5f+XKlT179kgtVIU+s3hG63TnBqEP8SHWwUzrzMxAixJbrWM/CQLkXDIaO5P0/goCRsrLv9HSEh9chwD8vP2Rlzrk1DrprKEGG+GxPB10yCm/z/vnphtGRv79v7/m/+IXbS3/pQFu++S6OubmCATQO5HbR054dJSxMUcAMgkCZNHIZUcAxhhLTa/J9TsRQFtbuagor7gcTKqCJCc3FzeH43h/zUB1S3LazAgR0ij5eun6czynX4KsggqFegqAZH78AQJ6IzojtSiiSLO30NJOu4yVaVvpVFYYDEYAnCBAWRpVAgAt1ZWpZ40ocj/PeQX7/fRLUeT9Ozs7dTx27Fi663dQQHD48GHpTVlZmeRnYWGhp6fHWQx68frwNdOcvQC0SABaZwcGxt56yw0C5HPXtPzX7yPxYktcAnC9hexpL6J9Lx33JDRssFCmW95Qn/fllwfb2/0+Hw0N3EdNDQoCFBAgJiaIRqWcZIBbBuDyZdeDuwIQiSR9vdSuqqpyz56qam91QXxHMBh1ztfW3r/8lxN3RYUVOcx9TDE1yeQEE/vw6uM306yCPyCBr6MuSlQaIAEYOT+ix5q/kEIvXl0jtXjw7QBd3MtfQ5YtBoMRAP6cnD/MqfrlKsTfgy74PJmjFZwcZh99ivQBBRC6lUjeX0cehmoDJ0+enJ+fn5qaCofD165dk5YoKSwv0ESThUVWJFoTcwPMDbTaAwOe21fcIKCSSlZDJfHk2l9Hu6qqv6VlzmqZm2sle9rhODSRRhFFcnkFFMBveDxSREpL0ys0FBWxfTuS0YXZWRIJZJkg3XDy9Tt2jESTdeBDHEpZ/sv0vGNJ1+4IwPDw/QKgsXpzzoSaOTPPjHw6zHcxDwVQqM9LCjvYobycbOL8hHRikcUCCqSIueSyGl8jhQ5kmWIwGAF4jzSSp0ohDi8h0v9Zdax6y/8Nblzn+iKLyvYcOnRImZ/jx4+TGao9KFBQ/BFQLry//87cHU2lisIAA5IBsiMHu9W2B1oYGIjd/nMFAY4AnOJUhsv/iQk41mK3tJBose08sue/gM1KSN62sc0RuW3bkpaOZaHzOmLbSXPJrBQ8Gr3qFHKnmfbgcQsAsoMHlwRA4NPV7wbfd867aJQzluo6t/yboQDkuOdW3QqutKu0dF8pBoNh8wXgG6TxY/gLUukEMhSAGLEhhpxqHtDY2Lhv3z6VEyzLgsw9VbVKBSoINzQ0KAiQ69eEmjZ7ARBN0NoqAZBduZHMAskUXnA/NljAyEjKzT8qg8v7yy7sZ71YYPPIcTM2+jyOH5c10ihtc8q/09P3RAD605ouDganHA3QKTf/EyOW9P6yB9G8yglrybZhMBieNAEQEXj5wd5ffJ2VcZaH8hjzzCv7r3KCvkSWxU1EultUA1USkAAECGhCTZsgkU9+9i63pYGBv9IAWxow7wQBjgCsjFv7jceXxEPef58EALCeSg1wb9ksLh6ZGnEFwC3/6knHRDVuFui6KwDu8p+SkuTzVVVkw2oRgCvBBoNhswVgkAcQgSgFrJEw4RAhZ5cYr9er+3+0nGftaJRuB9IMBQUF8Xhcc44xpsmrqCJrapATl/fXDgz9ly5dJXlH0AEOkIbfnxSA99+HAwdsZ/lPipI9zRowcn3IWcsvshgMbnMiAGmcKwD607Gzw0kBSK0Au9kkssRZ/uvIBmtAx5J9HYPB8Bh2A51gQhYhAuzcuVO39Di3kGaBBmq4JnH2D9C0UaKsE2chr2NxsSoBMjn5OHHScGu/5OdrSNKeclzHPcusEwGoIOxEAFNTK0cAcxNFjgDcvTvuLP8jRFwhITsc7y8zGAxbSQBixKaZlgEej0cVXd3fSVYUL6FJAE2omWWsk4oKeX/H5Mvk/R0Z4F6uXUsu/wcGwPX+VVVbRABkRUXJL/QGhx3/nur9nU3rnBNLWSCWbPkLwB5PWgFgo1NADjYGg+FpEoAECceA/CWUwyErNNCZ4b5ps8RKCwIqK90gQBEGyyQSKbXfkpK05b/F08u2ba4GOAn90eDovTeA4uJcp3P3C4CrIpZFFpgisMGwVQXAxl5kUUc0+xJWtm4idbjmdKddL0VF9rIGyO9LABxLr/3K2zlqYevisjK2BO43wvTZwzPh8HB4eHgmGl1BAJzlvyw2XjgysjAyMjb247EQodQCwPojABMEGAxbRwCUOsghR0dgYYlFue6sSB2uOd1pNwAnAtCxttbNAjm7m0WjSQGQKUTY5Oy/9RjLABQWRu5GQqPahenH6d7f+Z27peDR0XHVAMKh8EJhXnoBIPsisMFg2EoCUECBY0B8Ce31RlbMLqEZUqfdqEyIqwFx4k4WSMfU2m8kkpL9LyraOg0pc3PdHM7E6MTdu9HR0eiD9nRwS8FjY5Oh0MREaMINIJAiw/qLwCYIMBi2jgB48BRT7Gzeqe0ctMVbNBolKzR2aglAc2pm2Yb52cbGpAbs23eNa04Q0B/qd5f/Tt8V55rUKbZMECCbvDs5Oqo9nydXjACEGwEEQy1jY1OTY5OkasX6U0AGw1bCCEAppTvZmdzONxIJh8NjY2Osnbm5OQ0cHx/XJEA55ZpTk7NB2KnV4Lw8JwjQl86WvL8Vi+Eu/22FC1sLdxXf/5XAr/961OdzBGCFmm4eeclS8LTvN8d+6lrXwIYKwDbABAGPC4Mhl42mkkov3t3s1rJaW/yrr4Cay8uba+t/1sLt27eDwaCGqwywne2aUzPvYtfGLoTdzSGGLly4Gb3ZP9B/69bta9eW4wNZUxNrpD6LJ+szncNlL6txglXJz0/m8Y9Xw88VFPycz2frp3TcUrCOVX9cxTM4AzWDiQDux2AwAlBFlfxFDTUePNOx6cHBQXWXVF/JtbYUVm8A9YcZGhoC9rLXcUPWRrsMVwBk/iG/f9Cv/+cXt+l81rXfLh5EkyyDMV/gYdRoRJbvIUX8amU+GLQspcGsmpqVV9o11Oxn/1f5KqIafKxj+X8A/heyLLB50jEYjADkkltHXT31jTRe5KJcv/Iq2tOtpqYm82+EqTH91atXtRmc/DHQQIPTKXDj918oK8MNAgLnA0u4yR/27s0iX/8SK9KMbEV+pDFr8P57ZVm8h3QBeKkaZDmwsHt36ge078sCfZyPH+UouY73l5VjMBiMAKyIXH8zzVo29tOvHM7Fixe1I5B2dFBPmEwSQcr8nDlz5vz58319fYAzlY4+fGwoNlggR+8IQPwf+odG/+Du9u/T+VlHALJbdx4jnRydzmDAoezmT6eah7FdebWkO4fAQ+/sqkb/kbRCVsZgMBgBqKCildYhhoIEu+k+e/astgXV13qVzT969OiuVfvHKmKQ91cvsN7eXpUBSilto+0QhzThJqUF5ApdDQjMz1NXl/T+Xi9bGjehA4FML3dGGAyGLUHuJm28qx5+o4yGCU8yeXHh4unTp+X9dUOn2ryoPYD2edY2n5Zlpd7yPzw8rGqBMj9a+7/33ntqDZ9Pfgcdxzh2mMM+fNibtgtnayuDg0Qit51b/g8dQg/Sh201XI+ewb6kVopeGAxbCBMBbLwGFFDQTvsUUwkSFtaF2QuvvfaabglVUVctYlQPUBygkoAyQrZty/tPTExIG1QxVvZfmR9d5ol6ni95/gQnpAGaig3E1YDUT67+5BUVTE+Tn09TEzt2APZW9v7CA39HZuquH3AMJgVkw5twio1jD3te5EVHDHaw4wIXVAxQhkedXqqqqrTVs3b6dAQgHo9Ho9FQKKScj1P1rf2vtUd6jrSfan+h8AVpAGlsfBwgj9/RsVnf1cqBv4FsdQ4t2f/lYXxpyX4Hg8GwUZgaQBz+KfwSG8de9n6YD5dQsotdPnzXuDYQG7i8hHZ50z7PrgDEYjHE59gTLhmdOlDfc7gtr+1E3tHOzo7c3Bw2Exsss/z9YGMwGAFIINtodrP7E3xC0UAddfvZP8hgkGCIUHQxOjM5M8+8s3uEpKKsu8z7htc3F/e98cb/7TmvL+fm5TXl5tLZufqq3AY+z4PJf/DTX4Dv8zC+kD6+BpnBYNhqGAHIhXk2lDzyVMhtoqmf/iGGRhgJE44SnWVWAmBh6QKP7Sm1SysTldUJv29u7n+88UZPT1NeHhIAHV944SHZmK4HvzZd2QQB9oPn9jmnDAbDVsEIwOKyAMyzOZRSeoQjsjHGxhmfZPInAmDnFVFUapVWnKgomXuHuTkSidhpq6dH3j9p7e1r/95Tvp7IJhFkP3juGudng8GwhTAC4Hj/OEvYNkksi41G9QDZyrn2fDhxQgLg2MS770oDnCBA1tbGgyjI9GwWFKT/YDAYthJGAOJLlgAWF5meJhZjdhaKCikspKCAR4bHo4yPqwFjZ8+6cYCU4ODBTa8G23zAMBgMJgK4eTMxNZUAxse5cYNgkEQCnvFSXs7OnZvodNMpK5MG6OUdG+nrkwa49YB9+9gwzJ0/BoPBCMDwcOLllxOBQAKYnOTmTS5cgPx8mpupq8Pn4xHj9bq5IHn9QDicmguqryczSuAfIdtAGuG/IDMYDFsEIwCz44noaOLPv5GYgOlpgkGorKSzjWPHlHbZLAGwH9a0RBpgWehBNNoPebK+pAbU1LAeDAaDwZDLKzBEYiiRCCTiTZU3pjsRh4upqmL/fo4epaODR4vFMs88Q1kZgQCxGLZ9DXIdGbhDZy579mAwGAyGrMnloxAhPhSPBw4n7lYjV2tZFBWhCKC+Xsv/x5xuLy1FtsxlRwAgF05BBevBYDAYTAqojETZc4m25xLRKDMzSAC2b6ekhCeS88sCoOMp/rKdO+BQIIgCOP5mupRGYQpQxSEFEZAAhPvcg44OKAClQGkXxoJb2BubAw539txp+v889OYL/GVqpCMVAAB3APltOh0J8wcKqeLtMwBhXgQAUD0A8v+UfMvrbwUAAAjAezk/VtzlL/EBAKooCnk8AAAtAIBoEAAAAAEAABAAAAABAAA8yVeyLNvtdpfLRSnV7/dns1mj0ZC4AQAByPPcObderw+HQ61WG4/H3vvVaiVxAwACsN/vt9utc26z2dTr9cVi0W63n0sCIGIgAN77JEmOx2NeOp1OYQ2HAiBu4BK42WwaY6y1tzV8CGs4FABxA98AhsPhZDK5Xq+9Xk9rPZ1OwzoajQRA3EAArLXL5dIYcz6flVKDwWA+n7daLQHwCMBjcOE8TVOtdbfbFQAAr4ECAPgnMACAAAAA7s0HoDFhsamH/bcAAAAASUVORK5CYII=",yye={thin:100,light:300,regular:400,normal:400,medium:500,bold:700,black:900};class Cye{constructor(e){this._webGLHelper=e,this.fontRepository="https://raw.githubusercontent.com/etiennepinchon/aframe-fonts/master/fonts/",this._fonts=new ff([],JSON.stringify),this._metadataPromises=new Map,this._fontPromises=new Map,this._promises=[],this._defaultFontEntry={metrics:zT(EG),texture:e?this._createTextureNow(wye):void 0}}async waitUntilReady(){await Promise.all(this._promises)}getFont(e,t="normal",n="regular"){if(en(n)&&(n=yye[n.toLowerCase()],!n))throw new Error("Unknown font weight: "+n);const s={family:e,style:t,weight:n};let r=this._fonts.get(s);return r||(r={metrics:void 0,texture:void 0},this._fonts.set(s,r),this._promises.push(this._loadFontEntry(r,s))),r}async _loadFontEntry(e,t){try{const n=await this._loadMetadata(t.family),s=xye(n,t),r=this.fontRepository+t7(t.family)+"/"+s.replace(/\.\w+/,""),o=this._createTexture(r+".png"),a=this._loadFont(r+".json");e.texture=await o,e.metrics=await a}catch(n){console.log("Cannot load font. Using default.",n),e.metrics=this._defaultFontEntry.metrics,e.texture=this._defaultFontEntry.texture}}_loadFont(e){let t=this._fontPromises.get(e);return t||(t=fetch(e).then(n=>{if(!n.ok)throw new Error("Could not load font: "+n.status);return n}).then(n=>n.json()).then(n=>zT(n)),this._fontPromises.set(e,t)),t}_loadMetadata(e){const t=t7(e);let n=this._metadataPromises.get(t);return n||(n=fetch(this.fontRepository+t+"/METADATA.pb").then(s=>{if(!s.ok)throw new Error("Could not load font metadata: "+s.status);return s}).then(s=>s.text()).then(s=>Sye(s)).catch(s=>{console.warn(s)}),this._metadataPromises.set(t,n)),n}getDefaultFont(){return this._defaultFontEntry}_createTexture(e){const t=this._webGLHelper.gl;return new Promise((n,s)=>{xv(t,{src:e,min:t.LINEAR},(r,o,a)=>{r?s(r):n(o)})})}_createTextureNow(e){const t=this._webGLHelper.gl;let n;const s=new Promise((r,o)=>{n=xv(t,{src:e,min:t.LINEAR},(a,l,c)=>{a?o(a):r(l)})});return this._promises.push(s),n}}function t7(i){return i.toLowerCase().replaceAll(/[^\w]/g,"")}function Sye(i){const e=i.split(`
`),t=[];let n;for(const s of e)if(s.startsWith("fonts {")&&(n={name:void 0,style:void 0,weight:void 0,filename:void 0,post_script_name:void 0,full_name:void 0,copyright:void 0}),s.startsWith("}")&&(t.push(n),n=void 0),n){let r=s.match(/^\s*([A-Za-z_]+):[ ]?"(.*)"$/);if(r){const o=r[1];n[o]=r[2]}if(r=s.match(/^\s*([A-Za-z_]+):[ ]?(\d+)$/),r){const o=r[1];n[o]=+r[2]}}return t}function xye(i,e){let t,n=Number.POSITIVE_INFINITY;for(const s of i)if(e.family.localeCompare(s.name,void 0,{sensitivity:"accent"})==0&&e.style==s.style){const r=Math.abs(e.weight-s.weight);r<n&&(n=r,t=s)}return t==null?void 0:t.filename}function Dye(i,e){const t=[];let n;for(const s of i.split(`
`))if(s.startsWith(">"))n={identifier:s.match(/>(\S+)/)[1],sequence:""},t.push(n);else if(n)n.sequence+=s.trim();else throw new Error("Invalid fasta file!");return t}class kye{constructor(e,t){this.animator=e,this.disabled=!!t,this.damping=.015,this.acceleration=.3,this.accelerationThreshold=100,this.lowerLimit=.5,this.loop=!1,this.momentum=0,this.timestamp=0,this.callback=null,this._transitionCallback=this.animate.bind(this),this.clear()}clear(){this.momentum=0,this.timestamp=null,this.loop=null,this.callback=null}cancel(){this.loop&&(this.animator.cancelTransition(this._transitionCallback),this.clear())}setMomentum(e,t){if(this.disabled){t(e);return}e*this.momentum<0?this.momentum=0:Math.abs(e)>this.accelerationThreshold?this.momentum=yre([this.momentum,e],this.acceleration):this.momentum=e,this.callback=t,this.loop||this.animate()}animate(e){this.callback(this.momentum);const t=e-this.timestamp||0;this.timestamp=e;const n=Math.abs(this.momentum);this.momentum=Math.sign(this.momentum)*Math.max(0,n-((n*this.damping)**1.5+.04)*t),Math.abs(this.momentum)>this.lowerLimit?(this.loop=!0,this.animator.requestTransition(this._transitionCallback)):this.clear()}}function Lye(i){const e={},t=["string","number","boolean"],n=["wheelDelta","wheelDeltaX","wheelDeltaY"];for(const s in i){const r=s;!n.includes(s)&&t.includes(typeof i[r])&&(e[r]=i[r])}return e}const i7=new Map;async function Aye(i,e,t){const n=i.symbol;let s=i7.get(n)??await Tye(i.symbol);return s?(i7.set(n,s),Th`<div class="title"><strong>${s.name}</strong> ${s.description}</div><p class="summary">${s.summary}</p><p class="source">Source: NCBI RefSeq Gene</p>`):null}async function Eye(i){console.log("Searching: "+i);const e={mode:"cors"},t=(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=gene&term=${i}[GENE]&sort=relevance&retmode=json`,e).then(n=>n.json())).esearchresult.idlist[0];return t?(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=gene&id=${t}&retmode=json`,e).then(n=>n.json())).result[t]:null}const Iye=s5(Eye,500);function Tye(i){return Iye(i)}const Nye=ds(".4~r"),Mye=ds(".4~e");function Rye(i){return i===null?Th`<span class="na">NA</span>`:en(i)?i.substring(0,30):Number.isInteger(i)?""+i:xr(i)?Math.abs(i)>Math.pow(10,8)||Math.abs(i)<Math.pow(10,-8)?Mye(i):Nye(i):pk(i)?i?"True":"False":"?"+typeof i+" "+i}async function Oye(i,e,t){const n=(l,c)=>{var h;for(const[u,d]of Object.entries(e.encoders))if((h=d==null?void 0:d.accessor)!=null&&h.fields.includes(l))switch(u){case"color":case"fill":case"stroke":return Th`<span class="color-legend" style="${`background-color: ${d(c)}`}"></span>`}return""},s=Object.entries(i).filter(([l,c])=>!l.startsWith("_"));if(s.length===0)return;const r=Th`<table class="attributes">${s.map(([l,c])=>Th`<tr><th>${l}</th><td>${Rye(c)} ${n(l,i)}</td></tr>`)}</table>`,o=e.unitView.getTitleText(),a=o?Th`<div class="title"><strong>${o}</strong></div>`:"";return Th`${a}${r}`}class Aw extends Sm{constructor(e,t,n,s,r){super(e,t,n,s,r),this.spec=e,this.children=(e.layer||[]).map((o,a)=>{if(KZ(o)||GZ(o))return t.createView(o,this,this,"layer"+a);throw new Error("LayerView accepts only unit or layer specs as children!")}),this.needsAxes={x:!0,y:!0}}*[Symbol.iterator](){for(const e of this.children)yield e}render(e,t,n={}){if(this.isConfiguredVisible()){e.pushView(this,t);for(const s of this.children)s.render(e,t,n);e.popView(this)}}propagateInteractionEvent(e){this.handleInteractionEvent(void 0,e,!0);for(let t=this.children.length-1;t>=0;t--)if(this.children[t].propagateInteractionEvent(e),e.stopped)return;this.handleInteractionEvent(void 0,e,!1)}}class BZ{constructor(e,t){this.n=e,this.maxCols=t??1/0}get nRows(){return this.maxCols==1/0?1:Math.ceil(this.n/this.maxCols)}get nCols(){return Math.min(this.n,this.maxCols)}get rowIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<n;s++){const r=[];e.push(r);for(let o=0;o<t;o++){const a=s*t+o;a<this.n&&r.push(a)}}return e}get colIndices(){const e=[],t=this.nCols,n=this.nRows;for(let s=0;s<t;s++){const r=[];e.push(r);for(let o=0;o<n;o++){const a=o*t+s;a<this.n&&r.push(a)}}return e}getCellIndex(e,t){let n=0;if(this.maxCols==1/0)n=t==0?e:void 0;else{if(e>=this.maxCols)return;n=t*this.nCols+e}return n<this.n?n:void 0}getCellCoords(e){if(!(e<0||e>=this.n))return[e%this.nCols,Math.floor(e/this.nCols)]}}const Pye="chromosome_ticks_and_labels",Fye={x:"width",y:"height"};function wN(i){return i=="x"?"y":"x"}const kx={x:["bottom","top"],y:["left","right"]},l5=Object.fromEntries(Object.entries(kx).map(([i,e])=>e.map(t=>[t,i])).flat(1));function bu(i){return l5[i]}class VZ extends Aw{constructor(e,t,n,s,r){const o=t=="locus",a={...o?Vye:WZ,...Bye(t,e),...e};super(o?Wye(a,t):zZ(a,t),n,s,r,`axis_${e.orient}`),this.axisProps=a,this.blockEncodingInheritance=!0,this.contributesToScaleDomain=!1}getSize(){const e={px:this.getPerpendicularSize()},t={grow:1};return l5[this.axisProps.orient]=="x"?new kv(t,e):new kv(e,t)}getPerpendicularSize(){return c5(this.axisProps)}isPickingSupported(){return!1}}function c5(i){const e=bu(i.orient);let t=i.ticks&&i.tickSize||0;return i.labels&&(t+=i.labelPadding,e=="x"?t+=i.labelFontSize:t+=30),i.title&&(t+=i.titlePadding+i.titleFontSize),t=Math.min(i.maxExtent||1/0,Math.max(i.minExtent||0,t)),t}const WZ={values:null,minExtent:20,maxExtent:1/0,offset:0,domain:!0,domainWidth:1,domainColor:"gray",domainDash:null,domainDashOffset:0,domainCap:"square",ticks:!0,tickSize:5,tickWidth:1,tickColor:"gray",tickDash:null,tickDashOffset:0,tickCap:"square",tickCount:null,tickMinStep:null,labels:!0,labelAlign:"center",labelBaseline:"middle",labelPadding:4,labelFontSize:10,labelLimit:180,labelColor:"black",format:null,titleColor:"black",titleFont:"sans-serif",titleFontSize:10,titlePadding:3};function Bye(i,e){const t=e.orient,n=i=="nominal"||i=="ordinal";let s="center",r="middle",o=e.labelAngle??((t=="top"||t=="bottom")&&n?-90:0);switch(t){case"left":s="right";break;case"right":s="left";break;case"top":case"bottom":Math.abs(o)>30?(s=o>0==(t=="bottom")?"left":"right",r="middle"):r=t=="top"?"alphabetic":"top";break}return{labelAlign:s,labelAngle:o,labelBaseline:r}}function zZ(i,e){const t={...i,extent:c5(i)},n=bu(t.orient),s=wN(n),r=t.orient=="bottom"||t.orient=="right"?1:-1,o=t.orient=="bottom"||t.orient=="left"?1:0,a=()=>({name:"domain",data:{values:[0]},mark:{type:"rule",clip:!1,strokeDash:t.domainDash,strokeCap:t.domainCap,color:t.domainColor,[s]:o,size:t.domainWidth}}),l=()=>({name:"labels",mark:{type:"text",clip:!1,align:t.labelAlign,angle:t.labelAngle,baseline:t.labelBaseline,[s+"Offset"]:(t.tickSize+t.labelPadding)*r,[s]:o,size:t.labelFontSize,color:t.labelColor,minBufferSize:1500},encoding:{[n]:{field:"value",type:e},text:{field:"label"}}}),c=()=>({name:"ticks",mark:{type:"rule",clip:!1,strokeDash:t.tickDash,strokeCap:t.tickCap,color:t.tickColor,size:t.tickWidth,minBufferSize:300},encoding:{[s]:{value:o},[s+"2"]:{value:o-t.tickSize/t.extent*(o?1:-1)}}}),h=()=>({name:"title",data:{values:[0]},mark:{type:"text",clip:!1,align:"center",baseline:t.orient=="bottom"?"bottom":"top",angle:[0,90,0,-90][["top","right","bottom","left"].indexOf(t.orient)],text:t.title,color:t.titleColor,[n]:.5,[s]:1-o}}),u=()=>{const f={name:"ticks_and_labels",encoding:{[n]:{field:"value",type:e}},layer:[]};return t.ticks&&f.layer.push(c()),t.labels&&f.layer.push(l()),f},d={resolve:{scale:{[n]:"forced"}},[Fye[wN(n)]]:t.extent,data:{lazy:{type:"axisTicks",channel:n,axis:i}},layer:[]};return t.domain&&d.layer.push(a()),(t.ticks||t.labels)&&d.layer.push(u()),t.title&&d.layer.push(h()),d}const Vye={...WZ,chromTicks:!0,chromTickSize:18,chromTickWidth:1,chromTickColor:"#989898",chromTickDash:[4,2],chromTickDashOffset:1,chromLabels:!0,chromLabelFontSize:13,chromLabelFontWeight:"normal",chromLabelFontStyle:"normal",chromLabelColor:"black",chromLabelAlign:"left",chromLabelPadding:7};function Wye(i,e){const t={...i,extent:c5(i)},n=bu(t.orient),s=wN(n),r=t.orient=="bottom"||t.orient=="left"?1:0,o=()=>({name:"chromosome_ticks",mark:{type:"rule",strokeDash:i.chromTickDash,strokeDashOffset:i.chromTickDashOffset,[s]:r,[s+"2"]:r-t.chromTickSize/t.extent*(r?1:-1),color:i.chromTickColor,size:t.chromTickWidth}}),a=()=>{let h;switch(t.orient){case"top":h={y:0,angle:0,paddingX:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"bottom":h={y:1,angle:0,paddingX:4,dy:t.chromLabelPadding+t.chromLabelFontSize*.73,viewportEdgeFadeWidthLeft:20,viewportEdgeFadeWidthRight:20,viewportEdgeFadeDistanceRight:-10,viewportEdgeFadeDistanceLeft:-20};break;case"left":h={x:1,angle:-90,paddingY:4,dy:-t.chromLabelPadding,viewportEdgeFadeWidthBottom:20,viewportEdgeFadeWidthTop:20,viewportEdgeFadeDistanceBottom:-20,viewportEdgeFadeDistanceTop:-10};break;case"right":h={x:0,angle:90,align:"right",paddingY:4,dy:-t.chromLabelPadding};break;default:h={}}return{name:"chromosome_labels",mark:{type:"text",size:t.chromLabelFontSize,font:t.chromLabelFont,fontWeight:t.chromLabelFontWeight,fontStyle:t.chromLabelFontStyle,color:t.chromLabelColor,align:i.chromLabelAlign,baseline:"alphabetic",clip:!1,...h},encoding:{[n+"2"]:{field:"continuousEnd",type:e},text:{field:"name"}}}};let l;switch(t.orient){case"bottom":case"top":l={};break;case"left":l={labelAngle:-90,labelAlign:"center",labelPadding:6};break;case"right":l={labelAngle:90,labelAlign:"center",labelPadding:6};break;default:l={}}const c=zZ({...i,...l},e);if(i.chromTicks||i.chromLabels){const h={name:Pye,data:{lazy:{type:"axisGenome",channel:bu(t.orient)}},encoding:{[n]:{field:"continuousStart",type:e,band:0}},layer:[]};if(i.chromTicks&&h.layer.push(o()),i.chromLabels){h.layer.push(a());let u;c.layer.filter(d=>d.name=="ticks_and_labels").forEach(d=>d.layer.filter(f=>f.name=="labels").forEach(f=>{u=f.mark})),u&&(t.orient=="top"||t.orient=="bottom"?(u.viewportEdgeFadeWidthLeft=30,u.viewportEdgeFadeDistanceLeft=40):(u.viewportEdgeFadeWidthBottom=30,u.viewportEdgeFadeDistanceBottom=40))}c.layer.push(h)}return c}class zye extends Aw{constructor(e,t,n,s,r){const o={...t=="locus"?Hye:HZ,...e};super(qye(o,t),n,s,r,`axisGrid_${e.orient}`),this.axisProps=o,this.blockEncodingInheritance=!0,this.contributesToScaleDomain=!1}getOrient(){return this.axisProps.orient}isPickingSupported(){return!1}}const HZ={values:null,grid:!1,gridCap:"butt",gridColor:"lightgray",gridDash:null,gridOpacity:1,gridWidth:1,tickCount:null,tickMinStep:null},Hye={...HZ,chromGrid:!1,chromGridCap:"butt",chromGridColor:"gray",chromGridDash:[1,5],chromGridOpacity:1,chromGridWidth:1};function Uye(i,e){const t=i,n=bu(t.orient);return{name:"grid_lines",data:{lazy:{type:"axisTicks",channel:n,axis:i}},mark:{type:"rule",strokeDash:t.gridDash,strokeCap:t.gridCap,color:t.gridColor,size:t.gridWidth,opacity:t.gridOpacity,minBufferSize:300},encoding:{[n]:{field:"value",type:e}}}}function $ye(i,e){const t=i,n=bu(t.orient);return{name:"chromosome_lines",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rule",strokeDash:t.chromGridDash,strokeCap:t.chromGridCap,color:t.chromGridColor,size:t.chromGridWidth,opacity:t.chromGridOpacity},encoding:{[n]:{field:"continuousStart",type:e,band:0}}}}function jye(i,e){const t=i,n=bu(t.orient);return{name:"chromosome_fill",data:{lazy:{type:"axisGenome",channel:n}},mark:{type:"rect"},encoding:{[n]:{field:"continuousStart",type:e,band:0},[n+"2"]:{field:"continuousEnd",band:0},fill:{field:"odd",type:"nominal",scale:{domain:[!1,!0],range:[t.chromGridFillEven??"white",t.chromGridFillOdd??"white"]}},opacity:{field:"odd",type:"nominal",scale:{type:"ordinal",domain:[!1,!0],range:[t.chromGridFillEven?1:0,t.chromGridFillOdd?1:0]}}}}}function qye(i,e){const t={...i},n=[];return t.chromGrid&&(t.chromGridFillOdd||t.chromGridFillEven)&&n.push(jye(t,e)),t.chromGrid&&t.chromGridOpacity>0&&n.push($ye(t,e)),t.grid&&t.gridOpacity>0&&n.push(Uye(t,e)),{name:"grid_layers",configurableVisibility:!1,resolve:{scale:{[bu(i.orient)]:"forced",fill:"independent",opacity:"independent"}},layer:n}}const n7={anchor:"middle",frame:"group",offset:10,orient:"top",align:void 0,angle:0,baseline:"alphabetic",dx:0,dy:0,color:void 0,font:void 0,fontSize:12,fontStyle:"normal",fontWeight:"normal"},Gye={orient:"left",anchor:"middle",align:"right",baseline:"middle",angle:0,fontSize:12},Kye={orient:"top",anchor:"start",align:"left",baseline:"top",offset:-10,dx:10,fontSize:12},Zye={start:0,middle:.5,end:1},Yye={start:"left",middle:"center",end:"right"};function Qye(i){if(!i)return;const e=en(i)?{text:i}:i;if(!e.text||e.orient=="none")return;const t={"track-title":Gye,overlay:Kye}[e.style]??{},n={...n7,...t,...e};let s={},r={x:0,y:0};const o=Zye[n.anchor??"middle"];switch(n.orient){case"top":r={x:o,y:1},s={baseline:"alphabetic",angle:0};break;case"right":r={x:1,y:1-o},s={baseline:"alphabetic",angle:90};break;case"bottom":r={x:o,y:0},s={baseline:"top",angle:0};break;case"left":r={x:0,y:o},s={baseline:"alphabetic",angle:-90};break}const a={...n7,...s,...t,...e},l={xOffset:0,yOffset:0};switch(n.orient){case"top":l.yOffset=-a.offset;break;case"right":l.xOffset=a.offset;break;case"bottom":l.yOffset=a.offset;break;case"left":l.xOffset=-a.offset;break}return{configurableVisibility:!1,data:{values:[{}]},mark:{type:"text",tooltip:null,clip:!1,...r,...l,text:a.text,align:a.align??Yye[a.anchor],angle:a.angle,baseline:a.baseline,dx:a.dx,dy:a.dy,color:a.color,font:a.font,size:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight}}}function Xye(i,e,t,n){if(i.type=="wheel"){i.uiEvent.preventDefault();const s=i.uiEvent,r=s.deltaMode?120:1;let{x:o,y:a}=i.point;if(n){const l=n.mark.encoders;l.x&&!l.x2&&!l.x.constantValue&&(o=+l.x(n.datum)*e.width+e.x),l.y&&!l.y2&&!l.y.constantValue&&(a=(1-+l.y(n.datum))*e.height+e.y)}Math.abs(s.deltaX)<Math.abs(s.deltaY)?t({x:o,y:a,xDelta:0,yDelta:0,zDelta:s.deltaY*r/300}):t({x:o,y:a,xDelta:-s.deltaX*r,yDelta:0,zDelta:0})}else if(i.type=="mousedown"&&i.uiEvent.button===0){const s=i.uiEvent;s.preventDefault();let r=s;const o=l=>{t({x:r.clientX,y:r.clientY,xDelta:l.clientX-r.clientX,yDelta:l.clientY-r.clientY,zDelta:0}),r=l},a=l=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};document.addEventListener("mouseup",a,!1),document.addEventListener("mousemove",o,!1)}}var _b,bb,ho,Hp,W_,$h,Rd,yN,s7,CN,UZ,op,h_,YC,SN,QC,xN,XC,DN,kN,$Z,z_,JC,LN,jZ;class qZ extends Sm{constructor(e,t,n,s,r,o){super(e,t,n,s,r),Ut(this,$h),Ut(this,yN),Ut(this,CN),Ut(this,op),Ut(this,YC),Ut(this,QC),Ut(this,XC),Ut(this,kN),Ut(this,z_),Ut(this,LN),Ut(this,_b,1/0),Ut(this,bb,10),Ut(this,ho,[]),Ut(this,Hp,{}),Ut(this,W_,0),this.spec=e,Lc(this,bb,e.spacing??10),Lc(this,_b,o),Lc(this,ho,[]),this.wrappingFacet=!1,this._createChildren()}_createChildren(){}appendChild(e){e.layoutParent??(e.layoutParent=this),Ke(this,ho).push(new o7(e,this,Ke(this,W_))),ere(this,W_)._++}setChildren(e){Lc(this,ho,[]);for(const t of e)this.appendChild(t)}replaceChild(e,t){const n=Ke(this,ho).findIndex(s=>s.view==e);if(n>=0)Ke(this,ho)[n]=new o7(t,this,Ke(this,W_));else throw new Error("Not my child view!")}get children(){return Ke(this,ho).map(e=>e.view)}get childCount(){return Ke(this,ho).length}onScalesResolved(){super.onScalesResolved(),_t(this,CN,UZ).call(this)}*[Symbol.iterator](){for(const e of Ke(this,ho))yield*e.getChildren();for(const e of Object.values(Ke(this,Hp)))yield e}getOverhang(){return _t(this,kN,$Z).call(this).union(_t(this,z_,JC).call(this))}getSize(){return this._cache("size",()=>new kv(_t(this,QC,xN).call(this,"column"),_t(this,QC,xN).call(this,"row")).addPadding(_t(this,z_,JC).call(this)))}render(e,t,n={}){if(!this.isConfiguredVisible())return;this.layoutParent||(t=t.shrink(this.getPadding())),t=t.shrink(_t(this,z_,JC).call(this)),e.pushView(this,t);const s={devicePixelRatio:this.context.devicePixelRatio},r=i8(_t(this,YC,SN).call(this,"column"),t.width,s),o=i8(_t(this,YC,SN).call(this,"row"),t.height,s),a=new BZ(Ke(this,$h,Rd).length,Ke(this,_b)??1/0);for(const[l,c]of Ke(this,$h,Rd).entries()){const{view:h,axes:u,gridLines:d,background:f,backgroundStroke:g,title:p}=c,[m,v]=a.getCellCoords(l),b=r[_t(this,XC,DN).call(this,"column",m)],w=o[_t(this,XC,DN).call(this,"row",v)],y=h.getSize(),x=h.getOverhang(),L=b.location-x.left,S=w.location-x.top,k=(y.width.grow?b.size:y.width.px)+x.width,D=(y.height.grow?w.size:y.height.px)+x.height,T=new sL(()=>t.x+L,()=>t.y+S,()=>k,()=>D);c.coords=T;const N=n.clipRect?T.intersect(n.clipRect):T;f==null||f.render(e,N,{...n,clipRect:void 0});for(const U of Object.values(d))U.render(e,T,n);const $=iCe(h);$&&h.render(e,T,n),g==null||g.render(e,N,{...n,clipRect:void 0});for(const[U,ee]of Object.entries(u))ee.render(e,r7(T,U,ee),n);for(const U of Object.values(Ke(this,Hp))){const ee=U.axisProps.orient;(ee=="left"&&m==0||ee=="right"&&m==a.nCols-1||ee=="top"&&v==0||ee=="bottom"&&v==a.nRows-1)&&U.render(e,r7(T.shrink(c.view.getOverhang()),ee,U),n)}$||h.render(e,T,n),p==null||p.render(e,T,n)}e.popView(this)}propagateInteractionEvent(e){if(this.handleInteractionEvent(void 0,e,!0),e.stopped)return;const t=Ke(this,$h,Rd).find(s=>s.coords.containsPoint(e.point.x,e.point.y)),n=t==null?void 0:t.view;n&&(n.propagateInteractionEvent(e),(n instanceof Ys||n instanceof Aw)&&Xye(e,t.coords,s=>_t(this,LN,jZ).call(this,t.coords,t.view,s),this.context.getCurrentHover())),!e.stopped&&this.handleInteractionEvent(void 0,e,!1)}getDefaultResolution(e,t){return"independent"}}_b=new WeakMap,bb=new WeakMap,ho=new WeakMap,Hp=new WeakMap,W_=new WeakMap,$h=new WeakSet,Rd=function(){return Ke(this,ho).filter(i=>i.view.isConfiguredVisible())},yN=new WeakSet,s7=function(){return new BZ(Ke(this,$h,Rd).length,Ke(this,_b)??1/0)},CN=new WeakSet,UZ=function(){for(const i of p0){const e=this.resolutions.axis[i];if(e){const t=e.getAxisProps();if(t){const n={title:e.getTitle(),orient:kx[i][0],...t},s=new VZ(n,e.scaleResolution.type,this.context,this,this);Ke(this,Hp)[i]=s,s.visit(r=>{r instanceof Ys&&r.resolve("scale")})}}}for(const i of Ke(this,ho))i.createAxes()},op=new WeakSet,h_=function(i){const e=i=="column"?"width":"height",t=(n,s)=>n.map(r=>{const o=Ke(this,$h,Rd)[r].getOverhangAndPadding();return i=="column"?s?o.right:o.left:s?o.bottom:o.top}).reduce((r,o)=>Math.max(r,o),0);return this._cache(`size/directionSizes/${i}`,()=>Ke(this,yN,s7)[i=="column"?"colIndices":"rowIndices"].map(n=>({axisBefore:t(n,0),axisAfter:t(n,1),view:Tpe(n.map(s=>Ke(this,$h,Rd)[s].view.getSize()[e]))})))},YC=new WeakSet,SN=function(i){const e=_t(this,op,h_).call(this,i),t=[];t.push(lb);for(const[n,s]of e.entries())n>0&&t.push({px:Ke(this,bb),grow:0}),(n==0||this.wrappingFacet)&&t.push(lb),t.push({px:s.axisBefore,grow:0}),t.push(s.view),t.push({px:s.axisAfter,grow:0}),(n==e.length-1||this.wrappingFacet)&&t.push(lb);return t},QC=new WeakSet,xN=function(i){let e=0,t=0;const n=(i=="row"&&this.spec.height)??(i=="column"&&this.spec.width);if(n||n===0)return rG(n);const s=_t(this,op,h_).call(this,i);for(const[r,o]of s.entries())r>0&&(t+=Ke(this,bb)),(r==0||this.wrappingFacet)&&(t+=0),t+=o.axisBefore,t+=o.view.px??0,e+=o.view.grow??0,t+=o.axisAfter,(r==s.length-1||this.wrappingFacet)&&(t+=0);return{px:t,grow:e}},XC=new WeakSet,DN=function(i,e){return i=="row"&&this.wrappingFacet?1+6*e+2:2+4*e+1},kN=new WeakSet,$Z=function(){const i=_t(this,op,h_).call(this,"column"),e=_t(this,op,h_).call(this,"row");return!i.length||!e.length?Cs.zero():new Cs(e.at(0).axisBefore,i.at(-1).axisAfter,e.at(-1).axisAfter,i.at(0).axisBefore)},z_=new WeakSet,JC=function(){const i=e=>{const t=l5[e],n=Ke(this,Hp)[t];return(n==null?void 0:n.axisProps.orient)!==e?0:Math.max(n.getPerpendicularSize()+n.axisProps.offset,0)};return new Cs(i("top"),i("right"),i("bottom"),i("left"))},LN=new WeakSet,jZ=function(i,e,t){for(const[n,s]of Object.entries(tCe(e))){if(s.size<=0)continue;const r=i.normalizePoint(t.x,t.y),o=i.normalizePoint(t.x+t.xDelta,t.y+t.yDelta),a={x:o.x-r.x,y:o.y-r.y};for(const l of s)l.zoom(2**t.zDelta,n=="y"?1-r[n]:r[n],n=="x"?a.x:-a.y)}this.context.animator.requestRender()};function Jye(i){if(!(!i||!i.fill||i.fillOpacity===0))return{configurableVisibility:!1,data:{values:[{}]},mark:{color:i.fill,opacity:i.fillOpacity??1,type:"rect",clip:!1,tooltip:null,minHeight:1,minOpacity:0}}}function eCe(i){if(!(!i||!i.stroke||i.strokeWidth===0||i.strokeOpacity===0))return{configurableVisibility:!1,resolve:{scale:{x:"excluded",y:"excluded"},axis:{x:"excluded",y:"excluded"}},data:{values:[{x:0,y:0,x2:1,y2:0},{x:1,y:0,x2:1,y2:1},{x:1,y:1,x2:0,y2:1},{x:0,y:1,x2:0,y2:0}]},mark:{size:i.strokeWidth??1,color:i.stroke??"lightgray",strokeCap:"square",strokeOpacity:i.strokeOpacity??1,type:"rule",clip:!1,tooltip:null},encoding:{x:{field:"x",type:"quantitative",scale:null},y:{field:"y",type:"quantitative",scale:null},x2:{field:"x2"},y2:{field:"y2"}}}}function tCe(i){const e={x:new Set,y:new Set};return i.visit(t=>{for(const[n,s]of Object.entries(e)){const r=t.getScaleResolution(n);r&&r.isZoomable()&&s.add(r)}}),e}function iCe(i){let e=!0;return i.visit(t=>{t instanceof Ys&&e&&(e=t.mark.properties.clip===!0)}),e}function r7(i,e,t){const n=t.axisProps,s=t.getPerpendicularSize();if(e=="bottom")return i.translate(0,i.height+n.offset).modify({height:s});if(e=="top")return i.translate(0,-s-n.offset).modify({height:s});if(e=="left")return i.translate(-s-n.offset,0).modify({width:s});if(e=="right")return i.translate(i.width+n.offset,0).modify({width:s})}class o7{constructor(e,t,n){if(this.layoutParent=t,this.view=e,this.serial=n,this.background=void 0,this.backgroundStroke=void 0,this.axes={},this.gridLines={},this.title=void 0,this.coords=sL.ZERO,e.needsAxes.x||e.needsAxes.y){const s=e.spec,r="view"in s?s==null?void 0:s.view:void 0,o=Jye(r);o&&(this.background=new Ys(o,t.context,t,e,"background"+n),this.background.blockEncodingInheritance=!0);const a=eCe(r);a&&(this.backgroundStroke=new Ys(a,t.context,t,e,"backgroundStroke"+n),this.backgroundStroke.blockEncodingInheritance=!0);const l=Qye(e.spec.title);if(l){const c=new Ys(l,t.context,t,e,"title"+n);c.blockEncodingInheritance=!0,this.title=c}}}*getChildren(){this.background&&(yield this.background),this.backgroundStroke&&(yield this.backgroundStroke),this.title&&(yield this.title),yield*Object.values(this.axes),yield*Object.values(this.gridLines),yield this.view}createAxes(){const{view:e,axes:t,gridLines:n}=this,s=(a,l)=>{const c=a.getAxisProps();if(c===null)return;const h=c?{...c}:{};if(!h.orient){for(const u of kx[l])if(!t[u]){h.orient=u;break}if(!h.orient)throw new Error("No slots available for an axis! Perhaps a LayerView has more than two children?")}if(h.title??(h.title=a.getTitle()),!kx[l].includes(h.orient))throw new Error(`Invalid axis orientation "${h.orient}" on channel "${l}"!`);return h},r=(a,l,c)=>{const h=s(a,l);if(h){if(t[h.orient])throw new Error(`An axis with the orient "${h.orient}" already exists!`);t[h.orient]=new VZ(h,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c)}},o=(a,l,c)=>{const h=s(a,l);h&&(h.grid||h.chromGrid)&&(n[h.orient]=new zye(h,a.scaleResolution.type,this.layoutParent.context,this.layoutParent,c))};for(const a of["x","y"])if(e.needsAxes[a]){const l=e.resolutions.axis[a];if(!l)continue;r(l,a,e)}for(const a of["x","y"])if(e.needsAxes[a]){const l=e.getAxisResolution(a);if(!l)continue;o(l,a,e)}if(e instanceof Aw){for(const a of e.children)for(const[l,c]of Object.entries(a.resolutions.axis)){const h=c.getAxisProps();h&&h.orient&&r(c,l,a)}for(const a of e.children)for(const[l,c]of Object.entries(a.resolutions.axis)){const h=c.getAxisProps();h&&!h.orient&&r(c,l,a)}}[...Object.values(t),...Object.values(n)].forEach(a=>a.visit(l=>{l instanceof Ys&&l.resolve("scale")}))}getOverhang(){const e=t=>{const n=this.axes[t];return n?Math.max(n.getPerpendicularSize()+n.axisProps.offset,0):0};return new Cs(e("top"),e("right"),e("bottom"),e("left")).add(this.view.getOverhang())}getOverhangAndPadding(){return this.getOverhang().add(this.view.getPadding())}}class $A extends qZ{constructor(e,t,n,s,r){super(e,t,n,s,r,AN(e)?e.columns:eS(e)?1:1/0),this.spec=e}_createChildren(){const e=this.spec,t=AN(e)?e.concat:eS(e)?e.vconcat:e.hconcat;this.setChildren(t.map((n,s)=>this.context.createView(n,this,this,"grid"+s)))}getDefaultResolution(e,t){if(t=="axis")return"independent";if(eS(this.spec)&&e==="x"||ZZ(this.spec)&&e==="y"){const n=new Set(this.children.map(s=>s.getEncoding()[e]).filter(s=>s).map(s=>"type"in s&&s.type).filter(s=>s));return n.size===1&&(n.has("index")||n.has("locus"))?"shared":"independent"}else return"independent"}}class nCe{constructor(){this.types=[];const e=t=>(n,s,r,o,a)=>new t(n,s,r,o,n.name??a);this.addViewType(sCe,e(kG)),this.addViewType(KZ,e(Aw)),this.addViewType(GZ,e(Ys)),this.addViewType(eS,e($A)),this.addViewType(ZZ,e($A)),this.addViewType(AN,e($A))}addViewType(e,t){this.types.push({specGuard:e,factory:t})}createView(e,t,n,s,r){const o=this.types.find(a=>a.specGuard(e));if(o)return o.factory(e,t,n,s,r??"unnamed");throw new Error("Invalid spec, cannot figure out the view type from the properties: "+JSON.stringify([...Object.keys(e)]))}isViewSpec(e){const t=this.types.filter(n=>n.specGuard(e));if(t.length>1)throw new Error("Ambiguous spec. Cannot create a view!");return t.length==1}}function GZ(i){return"mark"in i&&(en(i.mark)||Ea(i.mark))}function KZ(i){return"layer"in i&&Ea(i.layer)}function sCe(i){return"import"in i}function eS(i){return"vconcat"in i&&Fo(i.vconcat)}function ZZ(i){return"hconcat"in i&&Fo(i.hconcat)}function AN(i){return"concat"in i&&Fo(i.concat)}class rCe extends qZ{constructor(e,t){super({vconcat:[]},e,void 0,void 0,"implicitRoot",1),t.layoutParent=this,t.dataParent=this,this.appendChild(t)}}T$("fasta",Dye);class oCe{constructor(e,t,n={}){this.container=e,this.spec=t,this.accessorFactory=new Whe,this.viewFactory=new nCe,this.namedDataProviders=[],this.animator=new bye(()=>this.renderAll()),this.genomeStore=void 0,this.viewVisibilityPredicate=s=>s.isVisibleInSpec(),this._renderingContext=void 0,this._pickingContext=void 0,this._dirtyPickingBuffer=!1,this._currentHover=void 0,this._wheelInertia=new kye(this.animator),this._keyboardListeners=new Map,this._eventListeners=new Map,this._extraBroadcastListeners=new Map,this.tooltipHandlers={default:Oye,refseqgene:Aye,...n.tooltipHandlers??{}},this.viewRoot=void 0}registerNamedDataProvider(e){this.namedDataProviders.unshift(e)}getNamedDataFromProvider(e){for(const t of this.namedDataProviders){const n=t(e);if(n)return n}}updateNamedData(e,t){const n=this.viewRoot.context.dataFlow.findNamedDataSource(e);if(!n)throw new Error("No such named data source: "+e);n.dataSource.updateDynamicData(t);for(const s of n.hosts)s.visit(r=>{for(const o of Object.values(r.resolutions.scale))o.reconfigure()});this.animator.requestRender()}broadcast(e,t){var n;const s={type:e,payload:t};this.viewRoot.visit(r=>r.handleBroadcast(s)),(n=this._extraBroadcastListeners.get(e))==null||n.forEach(r=>r(s))}_prepareContainer(){this.container.classList.add("genome-spy"),this.container.classList.add("loading"),this._glHelper=new npe(this.container,()=>this.viewRoot?dye(this.viewRoot):{width:void 0,height:void 0},this.spec.background),this.loadingMessageElement=document.createElement("div"),this.loadingMessageElement.className="loading-message",this.loadingMessageElement.innerHTML='<div class="message">Loading<span class="ellipsis">...</span></div>',this.container.appendChild(this.loadingMessageElement),this.tooltip=new ile(this.container),this.loadingMessageElement.querySelector(".message").addEventListener("transitionend",()=>{this.loadingMessageElement.style.display="none"})}destroy(){this.container.classList.remove("genome-spy"),this.container.classList.remove("loading");for(const[e,t]of this._keyboardListeners)for(const n of t)document.removeEventListener(e,n);for(this._glHelper.finalize();this.container.firstChild;)this.container.firstChild.remove()}async _prepareViewsAndData(){this.spec.genome&&(this.genomeStore=new vye(this.spec.baseUrl),await this.genomeStore.initialize(this.spec.genome));const e=this,t={dataFlow:new MZ,accessorFactory:this.accessorFactory,glHelper:this._glHelper,animator:this.animator,genomeStore:this.genomeStore,fontManager:new Cye(this._glHelper),get devicePixelRatio(){return e._glHelper.dpr},requestLayoutReflow:()=>{},updateTooltip:this.updateTooltip.bind(this),getNamedDataFromProvider:this.getNamedDataFromProvider.bind(this),getCurrentHover:()=>this._currentHover,addKeyboardListener:(a,l)=>{document.addEventListener(a,l);let c=this._keyboardListeners.get(a);c||(c=[],this._keyboardListeners.set(a,c)),c.push(l)},addBroadcastListener(a,l){const c=e._extraBroadcastListeners;let h=c.get(a);h||(h=new Set,c.set(a,h)),h.add(l)},removeBroadcastListener(a,l){var c;(c=e._extraBroadcastListeners.get(a))==null||c.delete(l)},isViewConfiguredVisible:e.viewVisibilityPredicate,isViewSpec:a=>e.viewFactory.isViewSpec(a),createView:function(a,l,c,h){return e.viewFactory.createView(a,t,l,c,h)}},n=this.spec;n.datasets&&this.registerNamedDataProvider(a=>n.datasets[a]),this.viewRoot=t.createView(n,null,null,"viewRoot"),await PZ(this.viewRoot),(this.viewRoot.needsAxes.x||this.viewRoot.needsAxes.y)&&(this.viewRoot=new rCe(t,this.viewRoot)),cye(this.viewRoot),hye(this.viewRoot),this._glHelper.invalidateSize();const s=[];this.viewRoot.visit(a=>{a instanceof Ys&&s.push(a)});const r=nye(this.viewRoot,t.dataFlow);lye(r),this.broadcast("dataFlowBuilt",r),s.forEach(a=>a.mark.initializeEncoders());const o=Promise.all(s.map(a=>a.mark.initializeGraphics()));for(const a of s)r.addObserver(l=>{a.mark.initializeData(),a.mark.updateGraphicsData()},a);await t.fontManager.waitUntilReady(),r.initialize(),await Promise.all(r.dataSources.map(a=>a.load())),DG(this.viewRoot),this.broadcast("dataLoaded"),await o,this.viewRoot.visit(a=>{for(const l of Object.values(a.resolutions.scale))this._glHelper.createRangeTexture(l)});for(const a of s)a.mark.finalizeGraphicsInitialization();t.requestLayoutReflow=this.computeLayout.bind(this),this.viewRoot.visit(a=>OC(a,"size")),this._glHelper.invalidateSize()}async launch(){try{return this._prepareContainer(),await this._prepareViewsAndData(),this.registerMouseEvents(),this.computeLayout(),this.animator.requestRender(),this._glHelper.addEventListener("resize",()=>{this.computeLayout(),this.renderAll()}),!0}catch(e){const t=`${e.view?`At "${e.view.getPathString()}": `:""}${e.toString()}`;return console.error(e.stack),aCe(this.container,t),!1}finally{this.container.classList.remove("loading"),window.setTimeout(()=>{this.loadingMessageElement.style.display="none"},2e3)}}registerMouseEvents(){const e=this._glHelper.canvas,t=n=>{var s;if(n instanceof MouseEvent){n.type=="mousemove"&&(this.tooltip.handleMouseMove(n),this._tooltipUpdateRequested=!1,n.buttons==0&&this.renderPickingFramebuffer());const r=e.getBoundingClientRect(),o=new pye(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop),a=l=>{this.viewRoot.propagateInteractionEvent(new gye(o,l)),this._tooltipUpdateRequested||this.tooltip.clear()};if(n.type!="wheel"&&this._wheelInertia.cancel(),n.type=="mousemove")this._handlePicking(o.x,o.y);else if(n.type=="mousedown"||n.type=="mouseup")this.renderPickingFramebuffer();else if(n.type=="wheel"){this._tooltipUpdateRequested=!1;const l=n;if(Math.abs(l.deltaX)>Math.abs(l.deltaY))this._currentHover=null,this._wheelInertia.cancel();else{const c=Lye(l);this._wheelInertia.setMomentum(l.deltaY*(l.deltaMode?80:1),h=>{const u=new WheelEvent("wheel",{...c,deltaMode:0,deltaX:0,deltaY:h});a(u)}),l.preventDefault();return}}if(n.type=="click"){const l=this._currentHover?{type:n.type,viewPath:this._currentHover.mark.unitView.getLayoutAncestors().map(c=>c.name).reverse(),datum:this._currentHover.datum}:{type:n.type,viewPath:null,datum:null};(s=this._eventListeners.get("click"))==null||s.forEach(c=>c(l))}a(n)}};["mousedown","mouseup","wheel","click","mousemove","gesturechange","contextmenu"].forEach(n=>e.addEventListener(n,t)),e.addEventListener("mousedown",()=>{document.addEventListener("mouseup",()=>this.tooltip.popEnabledState(),{once:!0}),this.tooltip.pushEnabledState(!1)}),e.addEventListener("dragstart",n=>n.stopPropagation())}_handlePicking(e,t){var n;const s=this._glHelper.readPickingPixel(e,t),r=s[0]|s[1]<<8|s[2]<<16;if(r==0){this._currentHover=null;return}if(r!==((n=this._currentHover)==null?void 0:n.uniqueId)&&(this._currentHover=null),this._currentHover||this.viewRoot.visit(o=>{if(o instanceof Ys){if(o.mark.isPickingParticipant()){const a=o.mark.encoders.uniqueId.accessor;o.getCollector().visitData(l=>{a(l)==r&&(this._currentHover={mark:o.mark,datum:l,uniqueId:r})})}if(this._currentHover)return cb}}),this._currentHover){const o=this._currentHover.mark;this.updateTooltip(this._currentHover.datum,async a=>{if(!o.isPickingParticipant())return;const l=o.properties.tooltip;if(l!==null){const c=(l==null?void 0:l.handler)??"default",h=this.tooltipHandlers[c];if(!h)throw new Error("No such tooltip handler: "+c);return h(a,o,l==null?void 0:l.params)}})}}updateTooltip(e,t){if(!this._tooltipUpdateRequested||!e)this.tooltip.updateWithDatum(e,t),this._tooltipUpdateRequested=!0;else throw new Error("Tooltip has already been updated! Duplicate event handler?")}computeLayout(){const e=this.viewRoot;if(!e)return;this.broadcast("layout");const t=this._glHelper.getLogicalCanvasSize();if(isNaN(t.width)||isNaN(t.height)){console.log(`NaN in canvas size: ${t.width}x${t.height}. Skipping computeLayout().`);return}this._renderingContext=new e7({picking:!1},this._glHelper),this._pickingContext=new e7({picking:!0},this._glHelper),e.render(new fye(this._renderingContext,this._pickingContext),sL.create(0,0,t.width,t.height)),this.broadcast("layoutComputed")}renderAll(){var e;(e=this._renderingContext)==null||e.render(),this._dirtyPickingBuffer=!0}renderPickingFramebuffer(){this._dirtyPickingBuffer&&(this._pickingContext.render(),this._dirtyPickingBuffer=!1)}getSearchableViews(){const e=[];return this.viewRoot.visit(t=>{t instanceof Ys&&t.getAccessor("search")&&e.push(t)}),e}getNamedScaleResolutions(){const e=new Map;return this.viewRoot.visit(t=>{for(const n of Object.values(t.resolutions.scale))n.name&&e.set(n.name,n)}),e}}function aCe(i,e){const t=document.createElement("div");t.className="message-box";const n=document.createElement("div");n.textContent=e,t.appendChild(n),i.appendChild(t)}const lCe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNSI+PHBhdGggZD0iTTQuNyAyMS4ycy40IDIuMyAxLjMgMy42QzcgMjYgOS44IDI4IDkuOCAyOHMzLjQtMi42IDYuNC04LjVjMCAwIDEgLjEgMS45LS40LjktLjYuOC0uNCAxLTEuMiAwIDAgMi45LjUgNi42IDAgMi4xLS4zIDQuMy0xIDYuMi0yLjUgMCAwLTEuMS0xLjctMi41LTUuMS0uNS0xLjMtMi0xLjgtNC42LTQuNmwtOC4yIDguNi0xMS45IDYuOXoiIGZpbGwtb3BhY2l0eT0iLjEiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSIjN2ZiYmRkIi8+PHBhdGggZD0iTTEyLjQgMTUuNWMtLjctLjUtMi40LS44LTQuNC0uNC0yIC40LTQgMS4zLTQuOCAxLjgtLjUuMy0xLjIgMS0xLjIgMS40IDAgLjcuMyAxLjguOCAyLjQuMy4zLjcuNSAxLjQuNi44IDAgMi41LTEuNCAzLjUtMiAxLS42IDEuNi0uOCAyLjctMS4ybC0yLjkgMi40Yy0xLjMgMS4yLTIuMiAxLjUtMi40IDIuMyAwIC41IDAgMS40LjUgMS44LjQuNS42LjggMS42LjguNiAwIDEgMCAyLjYtMS41LjktLjkgMi4zLTMgMi43LTMuNy42LTEuMSAxLTIuMi43LTMtLjItMS0uNC0xLjQtLjgtMS43ek0xNy40IDE0LjJjLS4zLS41LS45LTEuMi0uMi0yLjVsMS45LTNjLjUtLjggMi0yLjMgMi42LTIuNi42LS40IDEuNS0uNiAyLS4yLjYuNCAxIDEgMS4zIDEuNS40LjYuNyAxLjMuMiAyLS43IDEtMS42LjktMi44IDEuNy0xLjIuOC0xLjkgMS4yLTIuNSAxLjlsMy44LTEuOGMxLjMtLjYgMi43LTEuMSAzLjQtLjcuOC41LjguNyAxIDEuNC4zIDEtLjIgMS45LS44IDIuNC0uNS42LTEuNS45LTIuNiAxLjItMS40LjQtNC41IDEtNS44LjUtMS4zLS41LTEuMy0xLjQtMS41LTEuOHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNyAxNC44cy00LTEuOC0xMiAyLjdjMCAwIDEgMy43IDIuNSA1LjMgMS40IDEuNSAyLjMgMy42IDQuNiA0LjYgMCAwIDQuNy0zIDYuOS05LjJsMy0yczQuNyAyLjggMTIuNi0xLjZjMCAwLS42LTMuMy0zLTYtMi42LTMtMy44LTQuNy0zLjgtNC43cy00LjEgMi4zLTcuNSA5LjNsLTMuMyAxLjZ6IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0iIzdmYmJkZCIvPjxwYXRoIGQ9Ik0xMy44IDE1LjNjLjkuOC42IDIgMS40IDEuOCAxLS4yIDEuNC0uOCAxLjMtMS41IDAtLjcgMC0uOC0uNC0xLjYtLjMtLjctMS0xLjEtMi0uNS0uNy41LTEuNCAxLjMtMS40IDEuM3MuMi0uMyAxLjEuNXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTIuNCAxNC45czIuMS0yIDMtMmMxLjEgMCAyLjMgMi43IDIuMyAzLjUgMCAuOC0yLjEgMi40LTMuMSAyLjMgMCAwIDAtMS4yLS43LTIuNi0uOC0xLjMtMS41LTEuMi0xLjUtMS4yeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41Ii8+PC9zdmc+";async function cCe(i,e,t={}){let n;if(en(i)){if(n=document.querySelector(i),!n)throw new Error(`No such element: ${i}`)}else if(i instanceof HTMLElement)n=i;else throw new Error(`Invalid element: ${i}`);let s;try{const r=Ea(e)?e:await uCe(e);if(r.baseUrl??(r.baseUrl=""),r.width??(r.width="container"),r.padding??(r.padding=10),n==document.body){const o=document.createElement("div");o.style.position="fixed",o.style.inset="0",o.style.overflow="hidden",n.appendChild(o),n=o}s=new oCe(n,r,t),hCe(s,t),await s.launch()}catch(r){n.innerText=r.toString(),console.error(r)}return{finalize(){for(s.destroy();n.firstChild;)n.firstChild.remove()},addEventListener(r,o){const a=s._eventListeners;let l=a.get(r);l||(l=new Set,a.set(r,l)),l.add(o)},removeEventListener(r,o){var a;(a=s._eventListeners.get(r))==null||a.delete(o)},getScaleResolutionByName(r){return s.getNamedScaleResolutions().get(r)},updateNamedData:s.updateNamedData.bind(s)}}function hCe(i,e){e.namedDataProvider&&i.registerNamedDataProvider(e.namedDataProvider)}async function uCe(i){let e;try{e=JSON.parse(await yk().load(i))}catch(t){throw new Error(`Could not load or parse configuration: ${i}, reason: ${t.message}`)}if(!e.baseUrl){const t=i.match(/^[^?#]*\//);e.baseUrl=t&&t[0]||"./"}return e}function dCe(i,e,t=!0){let n,s=o=>{};return function(...a){return new Promise((l,c)=>{const h=()=>{clearTimeout(n),s=u=>{},l(i(...a))};t&&s("debounced"),clearTimeout(n),s=c,n=window.setTimeout(h,e)})}}const fCe=`{
  "data": {
    "sequence": { "start": 0, "stop": 60, "as": "x" }
  },
  "transform": [
    {
      "type": "formula",
      "expr": "sin((datum.x - 30) / 4) + (datum.x - 30) / 30",
      "as": "y"
    }
  ],
  "mark": "rect",
  "encoding": {
    "x": { "field": "x", "type": "index", "scale": { "padding": 0.1 } },
    "y": { "field": "y", "type": "quantitative" },
    "y2": { "datum": 0 },
    "color": {
      "field": "y",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [0],
        "range": ["#ed553b", "#20639b"]
      }
    }
  }
}
`;function gCe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,s){const r=s[0];return typeof e[r]<"u"?e[r]:n}),t}function _(i,e,...t){return gCe(e,t)}var jA;const tS="en";let Lx=!1,Ax=!1,iS=!1,YZ=!1,QZ=!1,h5=!1,Ey,qA=tS,pCe,yh;const ni=typeof self=="object"?self:typeof global=="object"?global:{};let Kn;typeof ni.vscode<"u"&&typeof ni.vscode.process<"u"?Kn=ni.vscode.process:typeof process<"u"&&(Kn=process);const mCe=typeof((jA=Kn==null?void 0:Kn.versions)===null||jA===void 0?void 0:jA.electron)=="string"&&Kn.type==="renderer";if(typeof navigator=="object"&&!mCe)yh=navigator.userAgent,Lx=yh.indexOf("Windows")>=0,Ax=yh.indexOf("Macintosh")>=0,h5=(yh.indexOf("Macintosh")>=0||yh.indexOf("iPad")>=0||yh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,iS=yh.indexOf("Linux")>=0,QZ=!0,Ey=navigator.language,qA=Ey;else if(typeof Kn=="object"){Lx=Kn.platform==="win32",Ax=Kn.platform==="darwin",iS=Kn.platform==="linux",iS&&Kn.env.SNAP&&Kn.env.SNAP_REVISION,Ey=tS,qA=tS;const i=Kn.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];Ey=e.locale,qA=t||tS,pCe=e._translationsConfigFile}catch{}YZ=!0}else console.error("Unable to resolve platform.");const Fn=Lx,ut=Ax,Is=iS,Up=YZ,Ew=QZ,vu=h5,_Ce=yh,EN=function(){if(ni.setImmediate)return ni.setImmediate.bind(ni);if(typeof ni.postMessage=="function"&&!ni.importScripts){let t=[];ni.addEventListener("message",s=>{if(s.data&&s.data.vscodeSetImmediateId)for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.id===s.data.vscodeSetImmediateId){t.splice(r,1),a.callback();return}}});let n=0;return s=>{const r=++n;t.push({id:r,callback:s}),ni.postMessage({vscodeSetImmediateId:r},"*")}}if(typeof(Kn==null?void 0:Kn.nextTick)=="function")return Kn.nextTick.bind(Kn);const e=Promise.resolve();return t=>e.then(t)}(),bo=Ax||h5?2:Lx?1:3;let a7=!0,l7=!1;function XZ(){if(!l7){l7=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,a7=new Uint16Array(i.buffer)[0]===(2<<8)+1}return a7}const JZ="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function bCe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of JZ)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const eY=bCe();function Ex(i){let e=eY;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const vCe={maxLen:1e3,windowSize:15,timeBudget:150};function Ix(i,e,t,n,s=vCe){if(t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),Ix(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const h=o-s.windowSize*c;e.lastIndex=Math.max(0,h);const u=wCe(e,t,o,a);if(!u&&l||(l=u,h<=0))break;a=h}if(l){let c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function wCe(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}const Ch=8;class tY{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class yCe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class iY{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class fn{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}compute(e,t,n){return n}}class A0{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}validate(e){return this.defaultValue}}class og{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Te(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class it extends og{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return Te(e,this.defaultValue)}}function IN(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class Kt extends og{constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}static clampedInt(e,t,n,s){return IN(e,t,n,s)}validate(e){return Kt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class gl extends og{constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(gl.float(e,this.defaultValue))}}class qs extends og{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return qs.string(e,this.defaultValue)}}function Ss(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class Gi extends og{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return Ss(e,this.defaultValue,this._allowedValues)}}class u_ extends fn{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function CCe(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class SCe extends fn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[_("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),_("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),_("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:_("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class xCe extends fn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:_("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:_("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Te(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Te(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function DCe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var bn;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(bn||(bn={}));function kCe(i){switch(i){case"line":return bn.Line;case"block":return bn.Block;case"underline":return bn.Underline;case"line-thin":return bn.LineThin;case"block-outline":return bn.BlockOutline;case"underline-thin":return bn.UnderlineThin}}class LCe extends A0{constructor(){super(126,[65,33])}compute(e,t,n){const s=["monaco-editor"];return t.get(33)&&s.push(t.get(33)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(65)==="default"?s.push("mouse-default"):t.get(65)==="copy"&&s.push("mouse-copy"),t.get(99)&&s.push("showUnused"),t.get(124)&&s.push("showDeprecated"),s.join(" ")}}class ACe extends it{constructor(){super(32,"emptySelectionClipboard",!0,{description:_("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class ECe extends fn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:_("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[_("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),_("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),_("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:_("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[_("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),_("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),_("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:_("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:_("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ut},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:_("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:_("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Te(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ss(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ss(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Te(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Te(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Te(t.loop,this.defaultValue.loop)}}}class fr extends fn{constructor(){super(44,"fontLigatures",fr.OFF,{anyOf:[{type:"boolean",description:_("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:_("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:_("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?fr.OFF:e==="true"?fr.ON:e:e?fr.ON:fr.OFF}}fr.OFF='"liga" off, "calt" off';fr.ON='"liga" on, "calt" on';class ICe extends A0{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class TCe extends og{constructor(){super(45,"fontSize",fs.fontSize,{type:"number",minimum:6,maximum:100,default:fs.fontSize,description:_("fontSize","Controls the font size in pixels.")})}validate(e){let t=gl.float(e,this.defaultValue);return t===0?fs.fontSize:gl.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class cl extends fn{constructor(){super(46,"fontWeight",fs.fontWeight,{anyOf:[{type:"number",minimum:cl.MINIMUM_VALUE,maximum:cl.MAXIMUM_VALUE,errorMessage:_("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:cl.SUGGESTION_VALUES}],default:fs.fontWeight,description:_("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Kt.clampedInt(e,fs.fontWeight,cl.MINIMUM_VALUE,cl.MAXIMUM_VALUE))}}cl.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];cl.MINIMUM_VALUE=1;cl.MAXIMUM_VALUE=1e3;class NCe extends fn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[_("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),_("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),_("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:_("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:_("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:_("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:_("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:_("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:_("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:_("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:_("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:_("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:_("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:_("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,s,r,o;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Ss(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Ss(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Ss(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(s=a.multipleDeclarations)!==null&&s!==void 0?s:Ss(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(r=a.multipleImplementations)!==null&&r!==void 0?r:Ss(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=a.multipleReferences)!==null&&o!==void 0?o:Ss(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:qs.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:qs.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:qs.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:qs.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:qs.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class MCe extends fn{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:_("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:_("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:_("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:_("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),delay:Kt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Te(t.sticky,this.defaultValue.sticky),above:Te(t.above,this.defaultValue.above)}}}class $p extends A0{constructor(){super(129,[49,57,37,64,91,59,60,93,116,119,120,121,2])}compute(e,t,n){return $p.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,s=(e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let d=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,m=e.verticalScrollbarWidth,v=e.viewLineCount,b=e.remainingWidth,w=e.isViewportWrapping,y=u?2:3;let x=Math.floor(r*s);const L=x/r;let S=!1,k=!1,D=y*d,T=d/r,N=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:Se,extraLinesBeyondLastLine:me,desiredRatio:kt,minimapLineCount:ze}=$p.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:h,height:s,lineHeight:l,pixelRatio:r});if(v/ze>1)S=!0,k=!0,d=1,D=1,T=d/r;else{let Lt=!1,st=d+1;if(g==="fit"){const Hi=Math.ceil((v+me)*D);w&&a&&b<=t.stableFitRemainingWidth?(Lt=!0,st=t.stableFitMaxMinimapScale):Lt=Hi>x}if(g==="fill"||Lt){S=!0;const Hi=d;D=Math.min(l*r,Math.max(1,Math.floor(1/kt))),w&&a&&b<=t.stableFitRemainingWidth&&(st=t.stableFitMaxMinimapScale),d=Math.min(st,Math.max(1,Math.floor(D/y))),d>Hi&&(N=Math.min(2,d/Hi)),T=d/r/N,x=Math.ceil(Math.max(Se,v+me)*D),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=d):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const $=Math.floor(f*T),U=Math.min($,Math.max(0,Math.floor((b-m-2)*T/(c+T)))+Ch);let ee=Math.floor(r*U);const he=ee/r;ee=Math.floor(ee*N);const fe=u?1:2,Ce=p==="left"?0:n-U-m;return{renderMinimap:fe,minimapLeft:Ce,minimapWidth:U,minimapHeightIsEditorHeight:S,minimapIsSampling:k,minimapScale:d,minimapLineHeight:D,minimapCanvasInnerWidth:ee,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:he,minimapCanvasOuterHeight:L}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,u=e.get(121),d=u==="inherit"?e.get(120):u,f=d==="inherit"?e.get(116):d,g=e.get(119),p=e.get(2),m=t.isDominatedByLongLines,v=e.get(49),b=e.get(59).renderType!==0,w=e.get(60),y=e.get(93),x=e.get(64),L=e.get(91),S=L.verticalScrollbarSize,k=L.verticalHasArrows,D=L.arrowSize,T=L.horizontalScrollbarSize,N=e.get(57),$=e.get(37);let U;if(typeof N=="string"&&/^\d+(\.\d+)?ch$/.test(N)){const Ti=parseFloat(N.substr(0,N.length-2));U=Kt.clampedInt(Ti*a,0,0,1e3)}else U=Kt.clampedInt(N,0,0,1e3);$&&(U+=16);let ee=0;if(b){const Ti=Math.max(o,w);ee=Math.round(Ti*l)}let he=0;v&&(he=r);let fe=0,Ce=fe+he,Se=Ce+ee,me=Se+U;const kt=n-he-ee-U;let ze=!1,Ge=!1,Lt=-1;p!==2&&(d==="inherit"&&m?(ze=!0,Ge=!0):f==="on"||f==="bounded"?Ge=!0:f==="wordWrapColumn"&&(Lt=g));const st=$p._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,minimap:x,verticalScrollbarWidth:S,viewLineCount:h,remainingWidth:kt,isViewportWrapping:Ge},t.memory||new iY);st.renderMinimap!==0&&st.minimapLeft===0&&(fe+=st.minimapWidth,Ce+=st.minimapWidth,Se+=st.minimapWidth,me+=st.minimapWidth);const Hi=kt-st.minimapWidth,Cn=Math.max(1,Math.floor((Hi-S-2)/a)),Hn=k?D:0;return Ge&&(Lt=Math.max(1,Cn),f==="bounded"&&(Lt=Math.min(Lt,g))),{width:n,height:s,glyphMarginLeft:fe,glyphMarginWidth:he,lineNumbersLeft:Ce,lineNumbersWidth:ee,decorationsLeft:Se,decorationsWidth:U,contentLeft:me,contentWidth:Hi,minimap:st,viewportColumn:Cn,isWordWrapMinified:ze,isViewportWrapping:Ge,wrappingColumn:Lt,verticalScrollbarWidth:S,horizontalScrollbarHeight:T,overviewRuler:{top:Hn,width:S,height:s-2*Hn,right:0}}}}class RCe extends fn{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:_("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}class OCe extends fn{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(125,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:_("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:_("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:_("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),fontSize:Kt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:qs.string(t.fontFamily,this.defaultValue.fontFamily)}}}class PCe extends gl{constructor(){super(58,"lineHeight",fs.lineHeight,e=>gl.clamp(e,0,150),{markdownDescription:_("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class FCe extends fn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:_("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[_("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),_("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),_("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:_("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:_("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:_("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:_("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:_("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:_("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),size:Ss(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ss(t.side,this.defaultValue.side,["right","left"]),showSlider:Ss(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Te(t.renderCharacters,this.defaultValue.renderCharacters),scale:Kt.clampedInt(t.scale,1,1,3),maxColumn:Kt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function BCe(i){return i==="ctrlCmd"?ut?"metaKey":"ctrlKey":"altKey"}class VCe extends fn{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:_("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Kt.clampedInt(t.top,0,0,1e3),bottom:Kt.clampedInt(t.bottom,0,0,1e3)}}}class WCe extends fn{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:_("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:_("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),cycle:Te(t.cycle,this.defaultValue.cycle)}}}class zCe extends A0{constructor(){super(127)}compute(e,t,n){return e.pixelRatio}}class HCe extends fn{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:_("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:_("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:_("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:_("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Te(t.other,this.defaultValue.other),comments:Te(t.comments,this.defaultValue.comments),strings:Te(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class UCe extends fn{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[_("lineNumbers.off","Line numbers are not rendered."),_("lineNumbers.on","Line numbers are rendered as absolute number."),_("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),_("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:_("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function u5(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class $Ce extends fn{constructor(){const e=[],t={type:"number",description:_("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:_("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:_("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Kt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:Kt.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}function c7(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let jCe=class extends fn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),_("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),_("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[_("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),_("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),_("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:_("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:_("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:_("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:_("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Kt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Kt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Kt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:c7(t.vertical,this.defaultValue.vertical),horizontal:c7(t.horizontal,this.defaultValue.horizontal),useShadows:Te(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Te(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Te(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Te(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Te(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Kt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Kt.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Te(t.scrollByPage,this.defaultValue.scrollByPage)}}};class qCe extends fn{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:_("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Te(t.enabled,this.defaultValue.enabled),mode:Ss(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class GCe extends fn{constructor(){const e={enabled:Yn.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:_("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Te(e.enabled,this.defaultValue.enabled)}}}class KCe extends fn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairs.true","Enables bracket pair guides."),_("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),_("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:_("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[_("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),_("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),_("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:_("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:_("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:_("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:_("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:h7(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:h7(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Te(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Te(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Te(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function h7(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class ZCe extends fn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[_("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),_("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:_("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:_("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:_("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:_("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:_("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:_("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:_("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:_("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:_("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:_("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:_("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:_("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ss(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Te(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Te(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Te(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Te(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Te(t.showIcons,this.defaultValue.showIcons),showStatusBar:Te(t.showStatusBar,this.defaultValue.showStatusBar),preview:Te(t.preview,this.defaultValue.preview),previewMode:Ss(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Te(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Te(t.showMethods,this.defaultValue.showMethods),showFunctions:Te(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Te(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Te(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Te(t.showFields,this.defaultValue.showFields),showVariables:Te(t.showVariables,this.defaultValue.showVariables),showClasses:Te(t.showClasses,this.defaultValue.showClasses),showStructs:Te(t.showStructs,this.defaultValue.showStructs),showInterfaces:Te(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Te(t.showModules,this.defaultValue.showModules),showProperties:Te(t.showProperties,this.defaultValue.showProperties),showEvents:Te(t.showEvents,this.defaultValue.showEvents),showOperators:Te(t.showOperators,this.defaultValue.showOperators),showUnits:Te(t.showUnits,this.defaultValue.showUnits),showValues:Te(t.showValues,this.defaultValue.showValues),showConstants:Te(t.showConstants,this.defaultValue.showConstants),showEnums:Te(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Te(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Te(t.showKeywords,this.defaultValue.showKeywords),showWords:Te(t.showWords,this.defaultValue.showWords),showColors:Te(t.showColors,this.defaultValue.showColors),showFiles:Te(t.showFiles,this.defaultValue.showFiles),showReferences:Te(t.showReferences,this.defaultValue.showReferences),showFolders:Te(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Te(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Te(t.showSnippets,this.defaultValue.showSnippets),showUsers:Te(t.showUsers,this.defaultValue.showUsers),showIssues:Te(t.showIssues,this.defaultValue.showIssues)}}}class YCe extends fn{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:_("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Te(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class QCe extends A0{constructor(){super(128,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function XCe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class JCe extends A0{constructor(){super(130,[129])}compute(e,t,n){const s=t.get(129);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}const eSe="Consolas, 'Courier New', monospace",tSe="Menlo, Monaco, 'Courier New', monospace",iSe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",fs={fontFamily:ut?tSe:Is?iSe:eSe,fontWeight:"normal",fontSize:ut?12:14,lineHeight:0,letterSpacing:0},Yn={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},vp=[];function oe(i){return vp[i.id]=i,i}const ag={acceptSuggestionOnCommitCharacter:oe(new it(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:_("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:oe(new Gi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",_("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:_("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:oe(new SCe),accessibilityPageSize:oe(new Kt(3,"accessibilityPageSize",10,1,1073741824,{description:_("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:oe(new qs(4,"ariaLabel",_("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:oe(new Gi(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),_("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:_("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:oe(new Gi(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:oe(new Gi(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",_("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:_("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:oe(new Gi(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",_("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),_("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:_("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:oe(new u_(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],CCe,{enumDescriptions:[_("editor.autoIndent.none","The editor will not insert indentation automatically."),_("editor.autoIndent.keep","The editor will keep the current line's indentation."),_("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),_("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),_("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:_("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:oe(new it(10,"automaticLayout",!1)),autoSurround:oe(new Gi(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[_("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),_("editor.autoSurround.quotes","Surround with quotes but not brackets."),_("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:_("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:oe(new GCe),bracketPairGuides:oe(new KCe),stickyTabStops:oe(new it(103,"stickyTabStops",!1,{description:_("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:oe(new it(14,"codeLens",!0,{description:_("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:oe(new qs(15,"codeLensFontFamily","",{description:_("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:oe(new Kt(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:_("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, the 90% of `#editor.fontSize#` is used.")})),colorDecorators:oe(new it(17,"colorDecorators",!0,{description:_("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:oe(new it(18,"columnSelection",!1,{description:_("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:oe(new xCe),contextmenu:oe(new it(20,"contextmenu",!0)),copyWithSyntaxHighlighting:oe(new it(21,"copyWithSyntaxHighlighting",!0,{description:_("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:oe(new u_(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],DCe,{description:_("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:oe(new it(23,"cursorSmoothCaretAnimation",!1,{description:_("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:oe(new u_(24,"cursorStyle",bn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],kCe,{description:_("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:oe(new Kt(25,"cursorSurroundingLines",0,0,1073741824,{description:_("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:oe(new Gi(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[_("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),_("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:_("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:oe(new Kt(27,"cursorWidth",0,0,1073741824,{markdownDescription:_("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:oe(new it(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:oe(new it(29,"disableMonospaceOptimizations",!1)),domReadOnly:oe(new it(30,"domReadOnly",!1)),dragAndDrop:oe(new it(31,"dragAndDrop",!0,{description:_("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:oe(new ACe),extraEditorClassName:oe(new qs(33,"extraEditorClassName","")),fastScrollSensitivity:oe(new gl(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:_("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:oe(new ECe),fixedOverflowWidgets:oe(new it(36,"fixedOverflowWidgets",!1)),folding:oe(new it(37,"folding",!0,{description:_("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:oe(new Gi(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[_("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),_("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:_("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:oe(new it(39,"foldingHighlight",!0,{description:_("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:oe(new it(40,"foldingImportsByDefault",!1,{description:_("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:oe(new it(41,"unfoldOnClickAfterEndOfLine",!1,{description:_("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:oe(new qs(42,"fontFamily",fs.fontFamily,{description:_("fontFamily","Controls the font family.")})),fontInfo:oe(new ICe),fontLigatures2:oe(new fr),fontSize:oe(new TCe),fontWeight:oe(new cl),formatOnPaste:oe(new it(47,"formatOnPaste",!1,{description:_("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:oe(new it(48,"formatOnType",!1,{description:_("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:oe(new it(49,"glyphMargin",!0,{description:_("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:oe(new NCe),hideCursorInOverviewRuler:oe(new it(51,"hideCursorInOverviewRuler",!1,{description:_("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:oe(new MCe),inDiffEditor:oe(new it(53,"inDiffEditor",!1)),letterSpacing:oe(new gl(55,"letterSpacing",fs.letterSpacing,i=>gl.clamp(i,-5,20),{description:_("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:oe(new RCe),lineDecorationsWidth:oe(new og(57,"lineDecorationsWidth",10)),lineHeight:oe(new PCe),lineNumbers:oe(new UCe),lineNumbersMinChars:oe(new Kt(60,"lineNumbersMinChars",5,1,300)),linkedEditing:oe(new it(61,"linkedEditing",!1,{description:_("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:oe(new it(62,"links",!0,{description:_("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:oe(new Gi(63,"matchBrackets","always",["always","near","never"],{description:_("matchBrackets","Highlight matching brackets.")})),minimap:oe(new FCe),mouseStyle:oe(new Gi(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:oe(new gl(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:_("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:oe(new it(67,"mouseWheelZoom",!1,{markdownDescription:_("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:oe(new it(68,"multiCursorMergeOverlapping",!0,{description:_("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:oe(new u_(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],BCe,{markdownEnumDescriptions:[_("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:_({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:oe(new Gi(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[_("multiCursorPaste.spread","Each cursor pastes a single line of the text."),_("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:_("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:oe(new it(71,"occurrencesHighlight",!0,{description:_("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:oe(new it(72,"overviewRulerBorder",!0,{description:_("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:oe(new Kt(73,"overviewRulerLanes",3,0,3)),padding:oe(new VCe),parameterHints:oe(new WCe),peekWidgetDefaultFocus:oe(new Gi(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[_("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),_("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:_("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:oe(new it(77,"definitionLinkOpensInPeek",!1,{description:_("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:oe(new HCe),quickSuggestionsDelay:oe(new Kt(79,"quickSuggestionsDelay",10,0,1073741824,{description:_("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:oe(new it(80,"readOnly",!1)),renameOnType:oe(new it(81,"renameOnType",!1,{description:_("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:_("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:oe(new it(82,"renderControlCharacters",!0,{description:_("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:oe(new it(83,"renderFinalNewline",!0,{description:_("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:oe(new Gi(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",_("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:_("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:oe(new it(85,"renderLineHighlightOnlyWhenFocus",!1,{description:_("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:oe(new Gi(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:oe(new Gi(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",_("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),_("renderWhitespace.selection","Render whitespace characters only on selected text."),_("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:_("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:oe(new Kt(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:oe(new it(89,"roundedSelection",!0,{description:_("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:oe(new $Ce),scrollbar:oe(new jCe),scrollBeyondLastColumn:oe(new Kt(92,"scrollBeyondLastColumn",5,0,1073741824,{description:_("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:oe(new it(93,"scrollBeyondLastLine",!0,{description:_("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:oe(new it(94,"scrollPredominantAxis",!0,{description:_("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:oe(new it(95,"selectionClipboard",!0,{description:_("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Is})),selectionHighlight:oe(new it(96,"selectionHighlight",!0,{description:_("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:oe(new it(97,"selectOnLineNumbers",!0)),showFoldingControls:oe(new Gi(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[_("showFoldingControls.always","Always show the folding controls."),_("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:_("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:oe(new it(99,"showUnused",!0,{description:_("showUnused","Controls fading out of unused code.")})),showDeprecated:oe(new it(124,"showDeprecated",!0,{description:_("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:oe(new OCe),snippetSuggestions:oe(new Gi(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[_("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),_("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),_("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),_("snippetSuggestions.none","Do not show snippet suggestions.")],description:_("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:oe(new YCe),smoothScrolling:oe(new it(102,"smoothScrolling",!1,{description:_("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:oe(new Kt(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:oe(new ZCe),inlineSuggest:oe(new qCe),suggestFontSize:oe(new Kt(106,"suggestFontSize",0,0,1e3,{markdownDescription:_("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:oe(new Kt(107,"suggestLineHeight",0,0,1e3,{markdownDescription:_("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:oe(new it(108,"suggestOnTriggerCharacters",!0,{description:_("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:oe(new Gi(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[_("suggestSelection.first","Always select the first suggestion."),_("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),_("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:_("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:oe(new Gi(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[_("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),_("tabCompletion.off","Disable tab completions."),_("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:_("tabCompletion","Enables tab completions.")})),tabIndex:oe(new Kt(111,"tabIndex",0,-1,1073741824)),unusualLineTerminators:oe(new Gi(112,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[_("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),_("unusualLineTerminators.off","Unusual line terminators are ignored."),_("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:_("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:oe(new it(113,"useShadowDOM",!0)),useTabStops:oe(new it(114,"useTabStops",!0,{description:_("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:oe(new qs(115,"wordSeparators",JZ,{description:_("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:oe(new Gi(116,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),_({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:_({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:oe(new qs(117,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:oe(new qs(118,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:oe(new Kt(119,"wordWrapColumn",80,1,1073741824,{markdownDescription:_({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:oe(new Gi(120,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:oe(new Gi(121,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:oe(new u_(122,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],XCe,{enumDescriptions:[_("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),_("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),_("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),_("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:_("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:oe(new Gi(123,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[_("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),_("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:_("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:oe(new LCe),pixelRatio:oe(new zCe),tabFocusMode:oe(new QCe),layoutInfo:oe(new $p),wrappingInfo:oe(new JCe)};class nSe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const nY=new nSe;function Ze(i){ju(i)||nY.onUnexpectedError(i)}function Wo(i){ju(i)||nY.onUnexpectedExternalError(i)}function u7(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const TN="Canceled";function ju(i){return i instanceof Error&&i.name===TN&&i.message===TN}function E0(){const i=new Error(TN);return i.name=i.message,i}function Sl(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function sSe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class rSe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function Af(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var ht;(function(i){function e(b){return b&&typeof b=="object"&&typeof b[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(b){yield b}i.single=s;function r(b){return b||t}i.from=r;function o(b){return!b||b[Symbol.iterator]().next().done===!0}i.isEmpty=o;function a(b){return b[Symbol.iterator]().next().value}i.first=a;function l(b,w){for(const y of b)if(w(y))return!0;return!1}i.some=l;function c(b,w){for(const y of b)if(w(y))return y}i.find=c;function*h(b,w){for(const y of b)w(y)&&(yield y)}i.filter=h;function*u(b,w){let y=0;for(const x of b)yield w(x,y++)}i.map=u;function*d(...b){for(const w of b)for(const y of w)yield y}i.concat=d;function*f(b){for(const w of b)for(const y of w)yield y}i.concatNested=f;function g(b,w,y){let x=y;for(const L of b)x=w(x,L);return x}i.reduce=g;function*p(b,w,y=b.length){for(w<0&&(w+=b.length),y<0?y+=b.length:y>b.length&&(y=b.length);w<y;w++)yield b[w]}i.slice=p;function m(b,w=Number.POSITIVE_INFINITY){const y=[];if(w===0)return[y,b];const x=b[Symbol.iterator]();for(let L=0;L<w;L++){const S=x.next();if(S.done)return[y,i.empty()];y.push(S.value)}return[y,{[Symbol.iterator](){return x}}]}i.consume=m;function v(b,w,y=(x,L)=>x===L){const x=b[Symbol.iterator](),L=w[Symbol.iterator]();for(;;){const S=x.next(),k=L.next();if(S.done!==k.done)return!1;if(S.done)return!0;if(!y(S.value,k.value))return!1}}i.equals=v})(ht||(ht={}));class oSe extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function sY(i){return typeof i.dispose=="function"&&i.dispose.length===0}function lt(i){if(ht.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new oSe(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Xh(...i){return pt(()=>lt(i))}function pt(i){return{dispose:Af(()=>{i()})}}class de{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{lt(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?de.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}de.DISABLE_DISPOSED_WARNING=!1;class te{constructor(){this._store=new de,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}te.None=Object.freeze({dispose(){}});class Er{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class aSe{constructor(e){this.object=e}dispose(){}}let Ni=class NN{constructor(e){this.element=e,this.next=NN.Undefined,this.prev=NN.Undefined}};Ni.Undefined=new Ni(void 0);class wr{constructor(){this._first=Ni.Undefined,this._last=Ni.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ni.Undefined}clear(){let e=this._first;for(;e!==Ni.Undefined;){const t=e.next;e.prev=Ni.Undefined,e.next=Ni.Undefined,e=t}this._first=Ni.Undefined,this._last=Ni.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Ni(e);if(this._first===Ni.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Ni.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ni.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ni.Undefined&&e.next!==Ni.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ni.Undefined&&e.next===Ni.Undefined?(this._first=Ni.Undefined,this._last=Ni.Undefined):e.next===Ni.Undefined?(this._last=this._last.prev,this._last.next=Ni.Undefined):e.prev===Ni.Undefined&&(this._first=this._first.next,this._first.prev=Ni.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ni.Undefined;)yield e.element,e=e.next}}const lSe=ni.performance&&typeof ni.performance.now=="function";class qc{constructor(e){this._highResolution=lSe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new qc(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?ni.performance.now():Date.now()}}var Le;(function(i){i.None=()=>te.None;function e(b){return(w,y=null,x)=>{let L=!1,S;return S=b(k=>{if(!L)return S?S.dispose():L=!0,w.call(y,k)},null,x),L&&S.dispose(),S}}i.once=e;function t(b,w){return l((y,x=null,L)=>b(S=>y.call(x,w(S)),null,L))}i.map=t;function n(b,w){return l((y,x=null,L)=>b(S=>{w(S),y.call(x,S)},null,L))}i.forEach=n;function s(b,w){return l((y,x=null,L)=>b(S=>w(S)&&y.call(x,S),null,L))}i.filter=s;function r(b){return b}i.signal=r;function o(...b){return(w,y=null,x)=>Xh(...b.map(L=>L(S=>w.call(y,S),null,x)))}i.any=o;function a(b,w,y){let x=y;return t(b,L=>(x=w(x,L),x))}i.reduce=a;function l(b){let w;const y=new z({onFirstListenerAdd(){w=b(y.fire,y)},onLastListenerRemove(){w.dispose()}});return y.event}function c(b,w,y=100,x=!1,L){let S,k,D,T=0;const N=new z({leakWarningThreshold:L,onFirstListenerAdd(){S=b($=>{T++,k=w(k,$),x&&!D&&(N.fire(k),k=void 0),clearTimeout(D),D=setTimeout(()=>{const U=k;k=void 0,D=void 0,(!x||T>1)&&N.fire(U),T=0},y)})},onLastListenerRemove(){S.dispose()}});return N.event}i.debounce=c;function h(b,w=(y,x)=>y===x){let y=!0,x;return s(b,L=>{const S=y||!w(L,x);return y=!1,x=L,S})}i.latch=h;function u(b,w){return[i.filter(b,w),i.filter(b,y=>!w(y))]}i.split=u;function d(b,w=!1,y=[]){let x=y.slice(),L=b(D=>{x?x.push(D):k.fire(D)});const S=()=>{x&&x.forEach(D=>k.fire(D)),x=null},k=new z({onFirstListenerAdd(){L||(L=b(D=>k.fire(D)))},onFirstListenerDidAdd(){x&&(w?setTimeout(S):S())},onLastListenerRemove(){L&&L.dispose(),L=null}});return k.event}i.buffer=d;class f{constructor(w){this.event=w}map(w){return new f(t(this.event,w))}forEach(w){return new f(n(this.event,w))}filter(w){return new f(s(this.event,w))}reduce(w,y){return new f(a(this.event,w,y))}latch(){return new f(h(this.event))}debounce(w,y=100,x=!1,L){return new f(c(this.event,w,y,x,L))}on(w,y,x){return this.event(w,y,x)}once(w,y,x){return e(this.event)(w,y,x)}}function g(b){return new f(b)}i.chain=g;function p(b,w,y=x=>x){const x=(...D)=>k.fire(y(...D)),L=()=>b.on(w,x),S=()=>b.removeListener(w,x),k=new z({onFirstListenerAdd:L,onLastListenerRemove:S});return k.event}i.fromNodeEventEmitter=p;function m(b,w,y=x=>x){const x=(...D)=>k.fire(y(...D)),L=()=>b.addEventListener(w,x),S=()=>b.removeEventListener(w,x),k=new z({onFirstListenerAdd:L,onLastListenerRemove:S});return k.event}i.fromDOMEventEmitter=m;function v(b){return new Promise(w=>e(b)(w))}i.toPromise=v})(Le||(Le={}));class rL{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${rL._idPool++}`}start(e){this._stopWatch=new qc(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}rL._idPool=0;let z=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new rL(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var s;this._listeners||(this._listeners=new wr);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const o=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(s=this._leakageMon)===null||s===void 0?void 0:s.check(this._listeners.size),l=pt(()=>{a&&a(),this._disposed||(o(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof de?n.add(l):Array.isArray(n)&&n.push(l),l}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new wr);for(let s of this._listeners)this._deliveryQueue.push([s,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[s,r]=this._deliveryQueue.shift();try{typeof s=="function"?s.call(void 0,r):s[0].call(s[1],r)}catch(o){Ze(o)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,s,r;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(s=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||s===void 0||s.call(n),(r=this._leakageMon)===null||r===void 0||r.dispose())}};class Tx extends z{constructor(e){super(e),this._isPaused=0,this._eventQueue=new wr,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class cSe extends Tx{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class d5{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,s)=>e(r=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(n,r)):t.call(n,r)},void 0,s)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(s=>s()),n}}class d7{constructor(){this.listening=!1,this.inputEvent=Le.None,this.inputEventListener=te.None,this.emitter=new z({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const rY=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var ei;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof nS?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Le.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:rY})})(ei||(ei={}));class nS{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?rY:(this._emitter||(this._emitter=new z),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Ra{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new nS),this._token}cancel(){this._token?this._token instanceof nS&&this._token.cancel():this._token=ei.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof nS&&this._token.dispose():this._token=ei.None}}class f5{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const sS=new f5,MN=new f5,RN=new f5,oY=new Array(230),hSe=Object.create(null),uSe=Object.create(null),g5=[];for(let i=0;i<=193;i++)g5[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const s of e){const[r,o,a,l,c,h,u,d,f,g]=s;if(n[a]||(n[a]=!0,hSe[l]=a,uSe[l.toLowerCase()]=a,o&&(g5[a]=c)),!t[c]){if(t[c]=!0,!h)throw new Error(`String representation missing for key code ${c} around scan code ${l}`);sS.define(c,h),MN.define(c,f||h),RN.define(c,g||f||h)}u&&(oY[u]=c)}})();var Od;(function(i){function e(a){return sS.keyCodeToStr(a)}i.toString=e;function t(a){return sS.strToKeyCode(a)}i.fromString=t;function n(a){return MN.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return RN.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return MN.strToKeyCode(a)||RN.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return sS.keyCodeToStr(a)}i.toElectronAccelerator=o})(Od||(Od={}));function Rs(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}let jp;if(typeof ni.vscode<"u"&&typeof ni.vscode.process<"u"){const i=ni.vscode.process;jp={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()},nextTick(e){return EN(e)}}}else typeof process<"u"?jp={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()},nextTick(i){return process.nextTick(i)}}:jp={get platform(){return Fn?"win32":ut?"darwin":"linux"},get arch(){},nextTick(i){return EN(i)},get env(){return{}},cwd(){return"/"}};const ON=jp.cwd,dSe=jp.env,lg=jp.platform,fSe=65,gSe=97,pSe=90,mSe=122,Jh=46,qn=47,lr=92,ch=58,_Se=63;class aY extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function ln(i,e){if(typeof i!="string")throw new aY(e,"string",i)}function wt(i){return i===qn||i===lr}function PN(i){return i===qn}function hh(i){return i>=fSe&&i<=pSe||i>=gSe&&i<=mSe}function Nx(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=qn}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==Jh||s.charCodeAt(s.length-2)!==Jh){if(s.length>2){const h=s.lastIndexOf(t);h===-1?(s="",r=0):(s=s.slice(0,h),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,c)}`:s=i.slice(o+1,c),r=c-o-1;o=c,a=0}else l===Jh&&a!==-1?++a:a=-1}return s}function lY(i,e){if(e===null||typeof e!="object")throw new aY("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const Qs={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],ln(r,"path"),r.length===0)continue}else e.length===0?r=ON():(r=dSe[`=${e}`]||ON(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===lr)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const h=r.charCodeAt(0);if(o===1)wt(h)&&(a=1,c=!0);else if(wt(h))if(c=!0,wt(r.charCodeAt(1))){let u=2,d=u;for(;u<o&&!wt(r.charCodeAt(u));)u++;if(u<o&&u!==d){const f=r.slice(d,u);for(d=u;u<o&&wt(r.charCodeAt(u));)u++;if(u<o&&u!==d){for(d=u;u<o&&!wt(r.charCodeAt(u));)u++;(u===o||u!==d)&&(l=`\\\\${f}\\${r.slice(d,u)}`,a=u)}}}else a=1;else hh(h)&&r.charCodeAt(1)===ch&&(l=r.slice(0,2),a=2,o>2&&wt(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=Nx(t,!n,"\\",wt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){ln(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return PN(r)?"\\":i;if(wt(r))if(s=!0,wt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!wt(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&wt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!wt(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else hh(r)&&i.charCodeAt(1)===ch&&(n=i.slice(0,2),t=2,e>2&&wt(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?Nx(i.slice(t),!s,"\\",wt):"";return o.length===0&&!s&&(o="."),o.length>0&&wt(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){ln(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return wt(t)||e>2&&hh(t)&&i.charCodeAt(1)===ch&&wt(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];ln(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&wt(t.charCodeAt(0))){++s;const r=t.length;r>1&&wt(t.charCodeAt(1))&&(++s,r>2&&(wt(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&wt(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Qs.normalize(e)},relative(i,e){if(ln(i,"from"),ln(e,"to"),i===e)return"";const t=Qs.resolve(i),n=Qs.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===lr;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===lr;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===lr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===lr;)l--;const c=l-a,h=o<c?o:c;let u=-1,d=0;for(;d<h;d++){const g=i.charCodeAt(s+d);if(g!==e.charCodeAt(a+d))break;g===lr&&(u=d)}if(d!==h){if(u===-1)return n}else{if(c>h){if(e.charCodeAt(a+d)===lr)return n.slice(a+d+1);if(d===2)return n.slice(a+d)}o>h&&(i.charCodeAt(s+d)===lr?u=d:d===2&&(u=3)),u===-1&&(u=0)}let f="";for(d=s+u+1;d<=r;++d)(d===r||i.charCodeAt(d)===lr)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===lr&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=Qs.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===lr){if(e.charCodeAt(1)===lr){const t=e.charCodeAt(2);if(t!==_Se&&t!==Jh)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(hh(e.charCodeAt(0))&&e.charCodeAt(1)===ch&&e.charCodeAt(2)===lr)return`\\\\?\\${e}`;return i},dirname(i){ln(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return wt(s)?i:".";if(wt(s)){if(t=n=1,wt(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!wt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&wt(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!wt(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else hh(s)&&i.charCodeAt(1)===ch&&(t=e>2&&wt(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(wt(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&ln(e,"ext"),ln(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&hh(i.charCodeAt(0))&&i.charCodeAt(1)===ch&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(wt(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(wt(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){ln(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===ch&&hh(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(wt(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===Jh?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:lY.bind(null,"\\"),parse(i){ln(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return wt(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(wt(s)){if(n=1,wt(i.charCodeAt(1))){let u=2,d=u;for(;u<t&&!wt(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&wt(i.charCodeAt(u));)u++;if(u<t&&u!==d){for(d=u;u<t&&!wt(i.charCodeAt(u));)u++;u===t?n=u:u!==d&&(n=u+1)}}}}else if(hh(s)&&i.charCodeAt(1)===ch){if(t<=2)return e.root=e.dir=i,e;if(n=2,wt(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,c=i.length-1,h=0;for(;c>=n;--c){if(s=i.charCodeAt(c),wt(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===Jh?r===-1?r=c:h!==1&&(h=1):r!==-1&&(h=-1)}return a!==-1&&(r===-1||h===0||h===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Ji={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:ON();ln(s,"path"),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===qn)}return e=Nx(e,!t,"/",PN),t?`/${e}`:e.length>0?e:"."},normalize(i){if(ln(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===qn,t=i.charCodeAt(i.length-1)===qn;return i=Nx(i,!e,"/",PN),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return ln(i,"path"),i.length>0&&i.charCodeAt(0)===qn},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];ln(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Ji.normalize(e)},relative(i,e){if(ln(i,"from"),ln(e,"to"),i===e||(i=Ji.resolve(i),e=Ji.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=i.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===qn&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===qn)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(i.charCodeAt(t+c)===qn?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===qn)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(ln(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===qn;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===qn){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&ln(e,"ext"),ln(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===qn){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===qn){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){ln(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===qn){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===Jh?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:lY.bind(null,"/"),parse(i){ln(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===qn;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const h=i.charCodeAt(l);if(h===qn){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===Jh?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const h=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(h,o):(e.name=i.slice(h,s),e.base=i.slice(h,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Ji.win32=Qs.win32=Qs;Ji.posix=Qs.posix=Ji;const p5=lg==="win32"?Qs.normalize:Ji.normalize,bSe=lg==="win32"?Qs.resolve:Ji.resolve,vSe=lg==="win32"?Qs.relative:Ji.relative,cY=lg==="win32"?Qs.dirname:Ji.dirname,Yd=lg==="win32"?Qs.basename:Ji.basename,wSe=lg==="win32"?Qs.extname:Ji.extname,rS=lg==="win32"?Qs.sep:Ji.sep,ySe=/^\w[\w\d+.-]*$/,CSe=/^\//,SSe=/^\/\//;function f7(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!ySe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!CSe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(SSe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function xSe(i,e){return!i&&!e?"file":i}function DSe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==ea&&(e=ea+e):e=ea;break}return e}const bi="",ea="/",kSe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class We{constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||bi,this.authority=e.authority||bi,this.path=e.path||bi,this.query=e.query||bi,this.fragment=e.fragment||bi):(this.scheme=xSe(e,o),this.authority=t||bi,this.path=DSe(this.scheme,n||bi),this.query=s||bi,this.fragment=r||bi,f7(this,o))}static isUri(e){return e instanceof We?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return Mx(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=bi),n===void 0?n=this.authority:n===null&&(n=bi),s===void 0?s=this.path:s===null&&(s=bi),r===void 0?r=this.query:r===null&&(r=bi),o===void 0?o=this.fragment:o===null&&(o=bi),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new zg(t,n,s,r,o)}static parse(e,t=!1){const n=kSe.exec(e);return n?new zg(n[2]||bi,Iy(n[4]||bi),Iy(n[5]||bi),Iy(n[7]||bi),Iy(n[9]||bi),t):new zg(bi,bi,bi,bi,bi)}static file(e){let t=bi;if(Fn&&(e=e.replace(/\\/g,ea)),e[0]===ea&&e[1]===ea){const n=e.indexOf(ea,2);n===-1?(t=e.substring(2),e=ea):(t=e.substring(2,n),e=e.substring(n)||ea)}return new zg("file",t,e,bi,bi)}static from(e){const t=new zg(e.scheme,e.authority,e.path,e.query,e.fragment);return f7(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Fn&&e.scheme==="file"?n=We.file(Qs.join(Mx(e,!0),...t)).path:n=Ji.join(e.path,...t),e.with({path:n})}toString(e=!1){return FN(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof We)return e;{const t=new zg(e);return t._formatted=e.external,t._fsPath=e._sep===hY?e.fsPath:null,t}}else return e}}const hY=Fn?1:void 0;class zg extends We{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Mx(this,!1)),this._fsPath}toString(e=!1){return e?FN(this,!0):(this._formatted||(this._formatted=FN(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=hY),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const uY={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function g7(i,e){let t,n=-1;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t!==void 0&&(t+=i.charAt(s));else{t===void 0&&(t=i.substr(0,s));const o=uY[r];o!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,s)),n=-1),t+=o):n===-1&&(n=s)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function LSe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=uY[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function Mx(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Fn&&(t=t.replace(/\//g,"\\")),t}function FN(i,e){const t=e?LSe:g7;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=ea,n+=ea),r){let c=r.indexOf("@");if(c!==-1){const h=r.substr(0,c);r=r.substr(c+1),c=h.indexOf(":"),c===-1?n+=t(h,!1):(n+=t(h.substr(0,c),!1),n+=":",n+=t(h.substr(c+1),!1)),n+="@"}r=r.toLowerCase(),c=r.indexOf(":"),c===-1?n+=t(r,!1):(n+=t(r.substr(0,c),!1),n+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:g7(l,!1)),n}function dY(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+dY(i.substr(3)):i}}const p7=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Iy(i){return i.match(p7)?i.replace(p7,e=>dY(e)):i}class q{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new q(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return q.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return q.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return q.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){let r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new q(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new q(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}let F=class jn{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return jn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return jn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}containsRange(e){return jn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return jn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return jn.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new jn(n,s,r,o)}intersectRanges(e){return jn.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>c?(r=c,o=h):r===c&&(o=Math.min(o,h)),n>r||n===r&&s>o?null:new jn(n,s,r,o)}equalsRange(e){return jn.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return jn.getEndPosition(this)}static getEndPosition(e){return new q(e.endLineNumber,e.endColumn)}getStartPosition(){return jn.getStartPosition(this)}static getStartPosition(e){return new q(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new jn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new jn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return jn.collapseToStart(this)}static collapseToStart(e){return new jn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new jn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new jn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const u=e.endColumn|0,d=t.endColumn|0;return u-d}return c-h}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}};class Ve extends F{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ve.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ve(this.startLineNumber,this.startColumn,e,t):new Ve(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new q(this.positionLineNumber,this.positionColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ve(e,t,this.endLineNumber,this.endColumn):new Ve(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ve(e.lineNumber,e.column,t.lineNumber,t.column)}static liftSelection(e){return new Ve(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===0?new Ve(e,t,n,s):new Ve(n,s,e,t)}}let oL=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e|0,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class m5{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class aL{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}var BN;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(BN||(BN={}));var VN;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(VN||(VN={}));var WN;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(WN||(WN={}));var zN;(function(i){i[i.Deprecated=1]="Deprecated"})(zN||(zN={}));var HN;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(HN||(HN={}));var UN;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(UN||(UN={}));var $N;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})($N||($N={}));var jN;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(jN||(jN={}));var qN;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(qN||(qN={}));var GN;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(GN||(GN={}));var KN;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unusualLineTerminators=112]="unusualLineTerminators",i[i.useShadowDOM=113]="useShadowDOM",i[i.useTabStops=114]="useTabStops",i[i.wordSeparators=115]="wordSeparators",i[i.wordWrap=116]="wordWrap",i[i.wordWrapBreakAfterCharacters=117]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=118]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=119]="wordWrapColumn",i[i.wordWrapOverride1=120]="wordWrapOverride1",i[i.wordWrapOverride2=121]="wordWrapOverride2",i[i.wrappingIndent=122]="wrappingIndent",i[i.wrappingStrategy=123]="wrappingStrategy",i[i.showDeprecated=124]="showDeprecated",i[i.inlayHints=125]="inlayHints",i[i.editorClassName=126]="editorClassName",i[i.pixelRatio=127]="pixelRatio",i[i.tabFocusMode=128]="tabFocusMode",i[i.layoutInfo=129]="layoutInfo",i[i.wrappingInfo=130]="wrappingInfo"})(KN||(KN={}));var ZN;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(ZN||(ZN={}));var YN;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(YN||(YN={}));var QN;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(QN||(QN={}));var XN;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(XN||(XN={}));var JN;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(JN||(JN={}));var eM;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(eM||(eM={}));var tM;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(tM||(tM={}));var iM;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(iM||(iM={}));var nM;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(nM||(nM={}));var sM;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(sM||(sM={}));var rM;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(rM||(rM={}));var oM;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(oM||(oM={}));var aM;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(aM||(aM={}));var lM;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(lM||(lM={}));var cM;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(cM||(cM={}));var hM;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(hM||(hM={}));var uM;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(uM||(uM={}));var dM;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(dM||(dM={}));var fM;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(fM||(fM={}));var gM;(function(i){i[i.Deprecated=1]="Deprecated"})(gM||(gM={}));var pM;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(pM||(pM={}));var mM;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(mM||(mM={}));var _M;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(_M||(_M={}));var bM;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(bM||(bM={}));class Iw{static chord(e,t){return Rs(e,t)}}Iw.CtrlCmd=2048;Iw.Shift=1024;Iw.Alt=512;Iw.WinCtrl=256;function fY(){return{editor:void 0,languages:void 0,CancellationTokenSource:Ra,Emitter:z,KeyCode:eM,KeyMod:Iw,Position:q,Range:F,Selection:Ve,SelectionDirection:uM,MarkerSeverity:tM,MarkerTag:iM,Uri:We,Token:oL}}var oa;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(oa||(oa={}));const zt=bt("instantiationService");function gY(i,e,t,n){e[oa.DI_TARGET]===e?e[oa.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[oa.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[oa.DI_TARGET]=e)}function bt(i){if(oa.serviceIds.has(i))return oa.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");gY(e,t,s,!1)};return e.toString=()=>i,oa.serviceIds.set(i,e),e}function ASe(i){return function(e,t,n){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");gY(i,e,n,!0)}}const si=bt("codeEditorService");class Ef{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new z,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}Ef.INSTANCE=new Ef;function vM(){return Ef.INSTANCE.getZoomLevel()}function ESe(){return Ef.INSTANCE.getTimeSinceLastZoomLevelChanged()}function pY(i){return Ef.INSTANCE.onDidChangeZoomLevel(i)}function ISe(){return Ef.INSTANCE.getZoomFactor()}function Rx(){return Ef.INSTANCE.getPixelRatio()}const Tw=navigator.userAgent,Es=Tw.indexOf("Firefox")>=0,Qd=Tw.indexOf("AppleWebKit")>=0,Ox=Tw.indexOf("Chrome")>=0,Io=!Ox&&Tw.indexOf("Safari")>=0,TSe=!Ox&&!Io&&Qd,H_=Tw.indexOf("Android")>=0,mY=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,lL={clipboard:{writeText:Up||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Up||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Up||mY?0:navigator.keyboard||Io?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function wM(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new Px([GA(t,e),GA(n,e)]):new Px([GA(t,e)])}function GA(i,e){const t=!!(i&2048),n=!!(i&256),s=e===2?n:t,r=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new If(s,r,o,a,l)}class If{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new Px([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class Px{constructor(e){if(e.length===0)throw Sl("parts");this.parts=e}}class NSe{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class MSe{}function RSe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return Od.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(Es){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(ut&&e===224)return 57}else if(Qd){if(e===91)return 57;if(ut&&e===93)return 57;if(!ut&&e===92)return 57}return oY[e]||0}const OSe=ut?256:2048,PSe=512,FSe=1024,BSe=ut?2048:256;class ui{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=RSe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=OSe),this.altKey&&(t|=PSe),this.shiftKey&&(t|=FSe),this.metaKey&&(t|=BSe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new If(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let yM=!1,Hg=null;function VSe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return yM=!0,null}catch{return yM=!0,null}return i.parent}class CM{static getSameOriginWindowChain(){if(!Hg){Hg=[];let e=window,t;do t=VSe(e),t?Hg.push({window:e,iframeElement:e.frameElement||null}):Hg.push({window:e,iframeElement:null}),e=t;while(e)}return Hg.slice(0)}static hasDifferentOriginAncestor(){return Hg||this.getSameOriginWindowChain(),yM}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0,r=this.getSameOriginWindowChain();for(const o of r){if(n+=o.window.scrollY,s+=o.window.scrollX,o.window===t||!o.iframeElement)break;let a=o.iframeElement.getBoundingClientRect();n+=a.top,s+=a.left}return{top:n,left:s}}}class Ur{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=CM.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Am{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let s=e,r=e;if(typeof s.wheelDeltaY<"u")this.deltaY=s.wheelDeltaY/120;else if(typeof r.VERTICAL_AXIS<"u"&&r.axis===r.VERTICAL_AXIS)this.deltaY=-r.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Es&&!ut?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof s.wheelDeltaX<"u")Io&&Fn?this.deltaX=-(s.wheelDeltaX/120):this.deltaX=s.wheelDeltaX/120;else if(typeof r.HORIZONTAL_AXIS<"u"&&r.axis===r.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const o=e;o.deltaMode===o.DOM_DELTA_LINE?Es&&!ut?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}var m7=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function WSe(i){return!!i&&typeof i.then=="function"}function Ir(i){const e=new Ra,t=i(e.token),n=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),r(E0())});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel()}then(s,r){return n.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}function _Y(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class zSe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}}class I0{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,s)=>{this.doResolve=n,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(E0()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class HSe{constructor(e){this.delayer=new I0(e),this.throttler=new zSe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function Pv(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(E0())})}):Ir(t=>Pv(i,t))}function Em(i,e=0){const t=setTimeout(i,e);return pt(()=>clearTimeout(t))}class Os{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class Nw{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class mi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let SM;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?SM=i=>{const e=setTimeout(()=>{const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0,clearTimeout(e))}}}:SM=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class vb{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=SM(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}var xM;(function(i){function e(n){return m7(this,void 0,void 0,function*(){let s;const r=yield Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r})}i.settled=e;function t(n){return new Promise((s,r)=>m7(this,void 0,void 0,function*(){try{yield n(s,r)}catch(o){r(o)}}))}i.withAsyncBody=t})(xM||(xM={}));var nt;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp"})(nt||(nt={}));class USe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&tkn=${encodeURIComponent(r)}`),We.from({scheme:Ew?this._preferredWebSchema:nt.vscodeRemoteResource,authority:`${n}:${s}`,path:"/vscode-remote-resource",query:o})}}const bY=new USe;class Fv{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===nt.vscodeRemote?bY.rewrite(n):n.scheme===nt.file&&(Up||typeof ni.importScripts=="function"&&ni.origin===`${nt.vscodeFileResource}://${Fv.FALLBACK_AUTHORITY}`)?n.with({scheme:nt.vscodeFileResource,authority:n.authority||Fv.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return We.isUri(e)?e:We.parse(t.toUrl(e))}}Fv.FALLBACK_AUTHORITY="vscode-app";const vY=new Fv;function Pn(i){for(;i.firstChild;)i.firstChild.remove()}function _5(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class $Se{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ne(i,e,t,n){return new $Se(i,e,t,n)}function wY(i){return function(e){return i(new Ur(e))}}function jSe(i){return function(e){return i(new ui(e))}}let tn=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"?r=wY(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=jSe(n)),ne(e,t,r,s)},qSe=function(e,t,n){let s=wY(t);return b5(e,s,n)};function b5(i,e,t){return ne(i,vu&&lL.pointerEvents?Ae.POINTER_DOWN:Ae.MOUSE_DOWN,e,t)}function yY(i,e,t){return ne(i,vu&&lL.pointerEvents?Ae.POINTER_UP:Ae.MOUSE_UP,e,t)}function v5(i,e){return ne(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function GSe(i,e){return ne(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}let KA=null;function KSe(i){if(!KA){const e=t=>setTimeout(()=>t(new Date().getTime()),0);KA=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return KA.call(self,i)}let CY,Tl;class ZA{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ze(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,s=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(ZA.sort),e.shift().execute();n=!1};Tl=(r,o=0)=>{let a=new ZA(r,o);return i.push(a),t||(t=!0,KSe(s)),a},CY=(r,o)=>{if(n){let a=new ZA(r,o);return e.push(a),a}else return Tl(r,o)}})();const ZSe=8,YSe=function(i,e){return e};class QSe extends te{constructor(e,t,n,s=YSe,r=ZSe){super();let o=null,a=0,l=this._register(new Os),c=()=>{a=new Date().getTime(),n(o),o=null};this._register(ne(e,t,h=>{o=s(o,h);let u=new Date().getTime()-a;u>=r?(l.cancel(),c()):l.setIfNotSet(c,r-u)}))}}function w5(i,e,t,n,s){return new QSe(i,e,t,n,s)}function y5(i){return document.defaultView.getComputedStyle(i,null)}function cL(i){if(i!==document.body)return new Wt(i.clientWidth,i.clientHeight);if(vu&&window.visualViewport)return new Wt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Wt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Wt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Wt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class pi{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let s=y5(e),r="0";return s&&(s.getPropertyValue?r=s.getPropertyValue(t):r=s.getAttribute(n)),pi.convertToPixels(e,r)}static getBorderLeftWidth(e){return pi.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return pi.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return pi.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return pi.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return pi.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return pi.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return pi.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return pi.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return pi.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return pi.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return pi.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return pi.getDimension(e,"margin-bottom","marginBottom")}}class Wt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Wt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Wt?e:new Wt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function SY(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const s=DY(i)?null:y5(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=pi.getBorderLeftWidth(i),t+=pi.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function XSe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Rn(i){let e=i.getBoundingClientRect();return{left:e.left+Fc.scrollX,top:e.top+Fc.scrollY,width:e.width,height:e.height}}const Fc=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function uo(i){let e=pi.getMarginLeft(i)+pi.getMarginRight(i);return i.offsetWidth+e}function YA(i){let e=pi.getBorderLeftWidth(i)+pi.getBorderRightWidth(i),t=pi.getPaddingLeft(i)+pi.getPaddingRight(i);return i.offsetWidth-e-t}function JSe(i){let e=pi.getBorderTopWidth(i)+pi.getBorderBottomWidth(i),t=pi.getPaddingTop(i)+pi.getPaddingBottom(i);return i.offsetHeight-e-t}function DM(i){let e=pi.getMarginTop(i)+pi.getMarginBottom(i);return i.offsetHeight+e}function xl(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function xY(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function _7(i,e,t){return!!xY(i,e,t)}function DY(i){return i&&!!i.host&&!!i.mode}function C5(i){return!!T0(i)}function T0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return DY(i)?i:null}function qp(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function Gr(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let QA=null;function kY(){return QA||(QA=Gr()),QA}function exe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function kM(i,e,t=kY()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function Fx(i,e=kY()){if(!e)return;let t=exe(e),n=[];for(let s=0;s<t.length;s++)t[s].selectorText.indexOf(i)!==-1&&n.push(s);for(let s=n.length-1;s>=0;s--)e.sheet.deleteRule(n[s])}function LY(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ae={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Qd?"webkitAnimationStart":"animationstart",ANIMATION_END:Qd?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Qd?"webkitAnimationIteration":"animationiteration"},It={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function txe(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function ixe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class nxe extends te{constructor(e){super(),this._onDidFocus=this._register(new z),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new z),this.onDidBlur=this._onDidBlur.event;let t=xl(document.activeElement,e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{xl(document.activeElement,e)!==t&&(t?r():s())},this._register(ne(e,Ae.FOCUS,s,!0)),this._register(ne(e,Ae.BLUR,r,!0))}}function Im(i){return new nxe(i)}function se(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function sxe(i,e){return i.insertBefore(e,i.firstChild),e}function Mw(i,...e){i.innerText="",se(i,...e)}const rxe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Bv;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(Bv||(Bv={}));function AY(i,e,t,...n){let s=rxe.exec(e);if(!s)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let r=s[1]||"div",o;return i!==Bv.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function ue(i,e,...t){return AY(Bv.HTML,i,e,...t)}ue.SVG=function(i,e,...t){return AY(Bv.SVG,i,e,...t)};function gr(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function xs(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function oxe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function b7(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function EY(i){window.open(i,"_blank","noopener")}function axe(i){const e=()=>{i(),t=Tl(e)};let t=Tl(e);return pt(()=>t.dispose())}bY.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Gc(i){return i?`url('${vY.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function v7(i){return`'${i.replace(/'/g,"%27")}'`}class Pd extends z{constructor(){super(),this._subscriptions=new de,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ne(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new ui(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(ne(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(ne(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ne(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(ne(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(ne(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Pd.instance||(Pd.instance=new Pd),Pd.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function lxe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}function IY(i){return!i||typeof i!="string"?!0:i.trim().length===0}const cxe=/{(\d+)}/g;function mo(i,...e){return e.length===0?i:i.replace(cxe,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function S5(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ca(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function TY(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function hxe(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function uxe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function NY(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=Ca(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function dxe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function XA(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function Nl(i){return i.split(/\r\n|\r|\n/)}function Xs(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Zi(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==32&&s!==9)return i.substring(e,n)}return i.substring(e,t)}function N0(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Vv(i,e){return i<e?-1:i>e?1:0}function x5(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function LM(i,e){return Rw(i,e,0,i.length,0,e.length)}function Rw(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return x5(i.toLowerCase(),e.toLowerCase(),t,n,s,r);wp(l)&&(l-=32),wp(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function wp(i){return i>=97&&i<=122}function Lh(i){return i>=65&&i<=90}function U_(i,e){return i.length===e.length&&Rw(i,e)===0}function D5(i,e){const t=e.length;return e.length>i.length?!1:Rw(i,e,0,t)===0}function Wv(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function AM(i,e){let t,n=Math.min(i.length,e.length);const s=i.length-1,r=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(s-t)!==e.charCodeAt(r-t))return t;return n}function vn(i){return 55296<=i&&i<=56319}function Tm(i){return 56320<=i&&i<=57343}function k5(i,e){return(i-55296<<10)+(e-56320)+65536}function mc(i,e,t){const n=i.charCodeAt(t);if(vn(n)&&t+1<e){const s=i.charCodeAt(t+1);if(Tm(s))return k5(n,s)}return n}function Gp(i,e){const t=i.charCodeAt(e-1);if(Tm(t)&&e>1){const n=i.charCodeAt(e-2);if(vn(n))return k5(n,t)}return t}function Bx(i,e){const t=Mc.getInstance(),n=e,s=i.length,r=mc(i,s,e);e+=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e<s;){const a=mc(i,s,e),l=t.getGraphemeBreakType(a);if(yb(o,l))break;e+=a>=65536?2:1,o=l}return e-n}function fxe(i,e){const t=Mc.getInstance(),n=e,s=Gp(i,e);e-=s>=65536?2:1;let r=t.getGraphemeBreakType(s);for(;e>0;){const o=Gp(i,e),a=t.getGraphemeBreakType(o);if(yb(a,r))break;e-=o>=65536?2:1,r=a}return n-e}const gxe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function hL(i){return gxe.test(i)}const pxe=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function mxe(i){return pxe.test(i)}const _xe=/^[\t\n\r\x20-\x7E]*$/;function L5(i){return _xe.test(i)}const MY=/[\u2028\u2029]/;function RY(i){return MY.test(i)}function bxe(i){for(let e=0,t=i.length;e<t;e++)if(ha(i.charCodeAt(e)))return!0;return!1}function ha(i){return i=+i,i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function wb(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129003||i>=129280&&i<=129535||i>=129648&&i<=129750}const vxe=String.fromCharCode(65279);function A5(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function wxe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function OY(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function Ug(i){return Mc.getInstance().getGraphemeBreakType(i)}function yb(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class Mc{constructor(){this._data=yxe()}static getInstance(){return Mc._INSTANCE||(Mc._INSTANCE=new Mc),Mc._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}}Mc._INSTANCE=null;function yxe(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function Cxe(i,e){if(i===0)return 0;const t=Sxe(i,e);if(t!==void 0)return t;const n=Gp(e,i);return i-=oS(n),i}function Sxe(i,e){let t=Gp(e,i);for(i-=oS(t);xxe(t)||t===65039||t===8419;){if(i===0)return;t=Gp(e,i),i-=oS(t)}if(wb(t)){if(i>=0){const n=Gp(e,i);n===8205&&(i-=oS(n))}return i}}function oS(i){return i>=65536?2:1}function xxe(i){return 127995<=i&&i<=127999}var w7,y7;class Dxe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class kxe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?x5(e,this._value,0,e.length,this._from,this._to):Rw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Lxe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?x5(e,this._value,0,e.length,this._from,this._to):Rw(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Axe{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Lxe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return LM(e,this._value.scheme);if(this._states[this._stateIdx]===2)return LM(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Vv(e,this._value.query);if(this._states[this._stateIdx]===5)return Vv(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Ty{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class Kp{constructor(e){this._iter=e}static forUris(e=()=>!1){return new Kp(new Axe(e))}static forStrings(){return new Kp(new Dxe)}static forConfigKeys(){return new Kp(new kxe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new Ty,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new Ty,s.left.segment=n.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new Ty,s.right.segment=n.value()),r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new Ty,s.mid.segment=n.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=r[a][0],u=r[a+1][0];if(h===1&&u===1)r[a][1]=l.rotateLeft();else if(h===-1&&u===-1)r[a][1]=l.rotateRight();else if(h===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(h===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const s=this._iter.reset(e),r=[];let o=this._root;for(;o;){const a=s.cmp(o.segment);if(a>0)r.push([-1,o]),o=o.left;else if(a<0)r.push([1,o]),o=o.right;else if(s.hasNext())s.next(),r.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const a=this._min(o.right),{key:l,value:c,segment:h}=a;this._delete(a.key,!1),o.key=l,o.value=c,o.segment=h}else{const a=(n=o.left)!==null&&n!==void 0?n:o.right;if(r.length>0){const[l,c]=r[r.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=r[a+1][1]=r[a+1][1].rotateRight()),r[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=r[a+1][1]=r[a+1][1].rotateLeft()),r[a][1]=l.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class Exe{constructor(e,t){this.uri=e,this.value=t}}class as{constructor(e,t){this[w7]="ResourceMap",e instanceof as?(this.map=new Map(e.map),this.toKey=t??as.defaultToKey):(this.map=new Map,this.toKey=e??as.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new Exe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(w7=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}as.defaultToKey=i=>i.toString();class Ixe{constructor(){this[y7]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(y7=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class E5 extends Ixe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}const C7=typeof Buffer<"u";let JA;class uL{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return C7&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new uL(e)}toString(){return C7?this.buffer.toString():(JA||(JA=new TextDecoder),JA.decode(this.buffer))}}function Txe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function Nxe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function Go(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function Ko(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function S7(i,e){return i[e]}function x7(i,e,t){i[t]=e}function EM(i){let e=JSON.parse(i);return e=IM(e),e}function IM(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return We.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof uL||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=IM(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=IM(i[t],e+1))}return i}function Mxe(i){return i.replace(/[\\/]/g,Ji.sep)}function Rxe(i){return i.indexOf("/")===-1&&(i=Mxe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function Oxe(i,e,t,n=rS){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!D5(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function Pxe(i){return i>=65&&i<=90||i>=97&&i<=122}function Fxe(i){const e=p5(i);return Fn?i.length>3?!1:PY(e)&&(i.length===2||e.charCodeAt(2)===92):e===Ji.sep}function PY(i){return Fn?Pxe(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function eE(i){return Mx(i,!0)}class Bxe{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Vv(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return We.joinPath(e,...t)}basenameOrAuthority(e){return Sa(e)||e.authority}basename(e){return Ji.basename(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===nt.file?t=We.file(cY(eE(e))).path:(t=Ji.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===nt.file?t=We.file(p5(eE(e))).path:t=Ji.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===nt.file){const n=We.file(bSe(eE(e),t));return e.with({authority:n.authority,path:n.path})}return t=Rxe(t),e.with({path:Ji.resolve(e.path,t)})}}const Ts=new Bxe(()=>!1),FY=Ts.isEqual.bind(Ts),BY=Ts.basenameOrAuthority.bind(Ts),Sa=Ts.basename.bind(Ts),I5=Ts.dirname.bind(Ts);Ts.joinPath.bind(Ts);const Vxe=Ts.normalizePath.bind(Ts),D7=Ts.resolvePath.bind(Ts);var wu;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(wu||(wu={}));function VY(i){return Array.isArray(i)}function xa(i){return typeof i=="string"}function ks(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Tf(i){return typeof i=="number"&&!isNaN(i)}function WY(i){return i===!0||i===!1}function us(i){return typeof i>"u"}function Wxe(i){return!Or(i)}function Or(i){return us(i)||i===null}function Pi(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Cb(i){return typeof i=="function"}function zxe(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)Hxe(i[n],e[n])}function Hxe(i,e){if(xa(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Cb(e)){try{if(i instanceof e)return}catch{}if(!Or(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Uxe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function T5(i){const e=[];for(const t of Uxe(i))typeof i[t]=="function"&&e.push(t);return e}function $xe(i,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)};let n={};for(const s of i)n[s]=t(s);return n}function Fd(i){return i===null?void 0:i}function jxe(i,e="Unreachable"){throw new Error(e)}const yn=bt("commandService"),Nt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new z,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const o=[];for(let l of i.description.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return zxe(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new wr,this._commands.set(t,n));let s=n.unshift(i),r=pt(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return Nt.registerCommand(i,(t,...n)=>t.get(yn).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return ht.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Nt.registerCommand("noop",()=>{});var Vx;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(Vx||(Vx={}));var k7=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const yu=bt("openerService"),qxe=Object.freeze({_serviceBrand:void 0,registerOpener(){return te.None},registerValidator(){return te.None},registerExternalUriResolver(){return te.None},setDefaultExternalOpener(){},registerExternalOpener(){return te.None},open(){return k7(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return k7(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function ap(i,e){return We.isUri(i)?U_(i.scheme,e):D5(i,e+":")}var N5=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wx=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},pd=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let TM=class{constructor(e){this._commandService=e}open(e,t){return pd(this,void 0,void 0,function*(){if(!ap(e,nt.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=We.parse(e));let n=[];try{n=EM(decodeURIComponent(e.query))}catch{try{n=EM(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};TM=N5([Wx(0,yn)],TM);let NM=class{constructor(e){this._editorService=e}open(e,t){return pd(this,void 0,void 0,function*(){typeof e=="string"&&(e=We.parse(e));let n;const s=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return s&&(n={startLineNumber:parseInt(s[1]),startColumn:s[2]?parseInt(s[2]):1},e=e.with({fragment:""})),e.scheme===nt.file&&(e=Vxe(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?Vx.USER:Vx.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};NM=N5([Wx(0,si)],NM);let MM=class{constructor(e,t){this._openers=new wr,this._validators=new wr,this._resolvers=new wr,this._resolvedUriTargets=new as(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new wr,this._defaultExternalOpener={openExternal:n=>pd(this,void 0,void 0,function*(){return ap(n,nt.http)||ap(n,nt.https)?EY(n):window.location.href=n,!0})},this._openers.push({open:(n,s)=>pd(this,void 0,void 0,function*(){return s!=null&&s.openExternal||ap(n,nt.mailto)||ap(n,nt.http)||ap(n,nt.https)?(yield this._doOpenExternal(n,s),!0):!1})}),this._openers.push(new TM(t)),this._openers.push(new NM(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return pd(this,void 0,void 0,function*(){const s=typeof e=="string"?We.parse(e):e,r=(n=this._resolvedUriTargets.get(s))!==null&&n!==void 0?n:e;for(const o of this._validators)if(!(yield o.shouldOpen(r)))return!1;for(const o of this._openers)if(yield o.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return pd(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const s=yield n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return pd(this,void 0,void 0,function*(){const n=typeof e=="string"?We.parse(e):e;let s;try{s=(yield this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(r,{sourceUri:n,preferredOpenerId:o},ei.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},ei.None)})}dispose(){this._validators.clear()}};MM=N5([Wx(0,si),Wx(1,yn)],MM);function aS(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Rh(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Rh(i[t]):e[t]=i[t]}),e}function Gxe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(zY.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&e.push(s)}}return i}const zY=Object.prototype.hasOwnProperty;function Kxe(i,e){return RM(i,e,new Set)}function RM(i,e,t){if(Or(i))return i;const n=e(i);if(typeof n<"u")return n;if(VY(i)){const s=[];for(const r of i)s.push(RM(r,e,t));return s}if(ks(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(let r in i)zY.call(i,r)&&(s[r]=RM(i[r],e,t));return t.delete(i),s}return i}function Oa(i,e,t=!0){return ks(i)?(ks(e)&&Object.keys(e).forEach(n=>{n in i?t&&(ks(i[n])&&ks(e[n])?Oa(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function ua(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!ua(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!ua(s,r))return!1;for(t=0;t<s.length;t++)if(!ua(i[s[t]],e[s[t]]))return!1}return!0}function qa(i,e,t){const n=e(i);return typeof n>"u"?t:n}const Zxe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class Yxe extends te{constructor(e,t={}){super(),this._onDidUpdate=this._register(new z),this._editor=e,this._options=Oa(t,Zxe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new F(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new F(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new F(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>F.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let s=0,r=this.ranges.length;s<r&&!t;s++){let o=this.ranges[s].range;n.isBeforeOrEqual(o.getStartPosition())&&(this.nextIdx=s+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(aS(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let s=n.range.getStartPosition();this._editor.setPosition(s),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const zx=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new z,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Qxe=ut?1.5:1.35,tE=8;class Xd{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,s){const r=e.get(42),o=e.get(46),a=e.get(45),l=e.get(44),c=e.get(58),h=e.get(55);return Xd._create(r,o,a,l,c,h,t,n,s)}static _create(e,t,n,s,r,o,a,l,c){r===0?r=Qxe*n:r<tE&&(r=r*n),r=Math.round(r),r<tE&&(r=tE);const h=1+(c?0:zx.getZoomLevel()*.1);return n*=h,r*=h,new Xd({zoomLevel:a,pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,lineHeight:r,letterSpacing:o})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Xd._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Xxe=1;class OM extends Xd{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Xxe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}function Jxe(i){return i&&typeof i.id=="string"}const dL={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Ml;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Ml||(Ml={}));var Dl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Dl||(Dl={}));class lS{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&ua(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class zv{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var Jd;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(Jd||(Jd={}));class yp{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class PM{constructor(e,t){this.top=e,this.endColumn=t}}class iE{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class eDe{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function tDe(i){return M5(i,0)}function M5(i,e){switch(typeof i){case"object":return i===null?Rc(349,e):Array.isArray(i)?nDe(i,e):sDe(i,e);case"string":return R5(i,e);case"boolean":return iDe(i,e);case"number":return Rc(i,e);case"undefined":return Rc(937,e);default:return Rc(617,e)}}function Rc(i,e){return(e<<5)-e+i|0}function iDe(i,e){return Rc(i?433:863,e)}function R5(i,e){e=Rc(149417,e);for(let t=0,n=i.length;t<n;t++)e=Rc(i.charCodeAt(t),e);return e}function nDe(i,e){return e=Rc(104579,e),i.reduce((t,n)=>M5(n,t),e)}function sDe(i,e){return e=Rc(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=R5(n,t),M5(i[n],t)),e)}function nE(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function L7(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}function rDe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function d_(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):rDe((i>>>0).toString(16),e/4)}class fL{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(vn(o))if(a+1<t){const c=e.charCodeAt(a+1);Tm(c)?(a++,l=k5(o,c)):l=65533}else{r=o;break}else Tm(o)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),d_(this._h0)+d_(this._h1)+d_(this._h2)+d_(this._h3)+d_(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,L7(this._buff,this._buffLen),this._buffLen>56&&(this._step(),L7(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=fL._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,nE(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,h;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),h=nE(n,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=nE(s,30),s=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}fL._bigBlock32=new DataView(new ArrayBuffer(320));function po(i,e,t){return Math.min(Math.max(i,e),t)}const sE="**",A7="/",cS="[/\\\\]",hS="[^/\\\\]",oDe=/\//g;function E7(i){switch(i){case 0:return"";case 1:return`${hS}*?`;default:return`(?:${cS}|${hS}+${cS}|${cS}${hS}+)*?`}}function I7(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function HY(i){if(!i)return"";let e="";const t=I7(i,A7);if(t.every(n=>n===sE))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===sE){n||(e+=E7(2),n=!0);return}let o=!1,a="",l=!1,c="";for(const h of s){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let u;h==="-"?u=h:(h==="^"||h==="!")&&!c?u="^":h===A7?u="":u=Ca(h),c+=u;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":const d=`(?:${I7(a,",").map(f=>HY(f)).join("|")})`;e+=d,o=!1,a="";break;case"]":e+="["+c+"]",l=!1,c="";break;case"?":e+=hS;continue;case"*":e+=E7(1);continue;default:e+=Ca(h)}}r<t.length-1&&(t[r+1]!==sE||r+2<t.length)&&(e+=cS),n=!1})}return e}const aDe=/^\*\*\/\*\.[\w\.-]+$/,lDe=/^\*\*\/([\w\.-]+)\/?$/,cDe=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,hDe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,uDe=/^\*\*((\/[\w\.-]+)+)\/?$/,dDe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,T7=new E5(1e4),N7=function(){return!1},kl=function(){return null};function O5(i,e){if(!i)return kl;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=T7.get(n);if(s)return M7(s,i);let r;if(aDe.test(t)){const o=t.substr(4);s=function(a,l){return typeof a=="string"&&a.endsWith(o)?t:null}}else(r=lDe.exec(rE(t,e)))?s=fDe(r[1],t):(e.trimForExclusions?hDe:cDe).test(t)?s=gDe(t,e):(r=uDe.exec(rE(t,e)))?s=R7(r[1].substr(1),t,!0):(r=dDe.exec(rE(t,e)))?s=R7(r[1],t,!1):s=pDe(t);return T7.set(n,s),M7(s,i)}function M7(i,e){return typeof e=="string"?i:function(t,n){return Oxe(t,e.base)?i(vSe(e.base,t),n):null}}function rE(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function fDe(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function gDe(i,e){const t=$Y(i.slice(1,-1).split(",").map(a=>O5(a,e)).filter(a=>a!==kl),i),n=t.length;if(!n)return kl;if(n===1)return t[0];const s=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function R7(i,e,t){const n=rS===Ji.sep,s=n?i:i.replace(oDe,rS),r=rS+s,o=Ji.sep+i,a=t?function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function pDe(i){try{const e=new RegExp(`^${HY(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return kl}}function mDe(i,e,t){return!i||typeof e!="string"?!1:UY(i)(e,void 0,t)}function UY(i,e={}){if(!i)return N7;if(typeof i=="string"||_De(i)){const t=O5(i,e);if(t===kl)return N7;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return bDe(i,e)}function _De(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function bDe(i,e){const t=$Y(Object.getOwnPropertyNames(i).map(a=>vDe(a,i[a],e)).filter(a=>a!==kl)),n=t.length;if(!n)return kl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,u){for(let d=0,f=t.length;d<f;d++){const g=t[d](h,u);if(g)return g}return null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,u)=>u.allPaths?h.concat(u.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let h;for(let u=0,d=t.length;u<d;u++){const f=t[u];f.requiresSiblings&&c&&(l||(l=Yd(a)),h||(h=l.substr(0,l.length-wSe(a).length)));const g=f(a,l,h,c);if(g)return g}return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function vDe(i,e,t){if(e===!1)return kl;const n=O5(i,t);if(n===kl)return kl;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!n(o,a))return null;const h=s.replace("$(basename)",l),u=c(h);return WSe(u)?u.then(d=>d?i:null):u?i:null};return r.requiresSiblings=!0,r}}return n}function $Y(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const u=a.charCodeAt(h-1);if(u===47||u===92)break}l=a.substr(h)}const c=n.indexOf(l);return c!==-1?s[c]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}function jY(i,e,t,n){if(Array.isArray(i)){let s=0;for(const r of i){const o=jY(r,e,t,n);if(o===10)return o;o>s&&(s=o)}return s}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:s,pattern:r,scheme:o,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let l=0;if(o)if(o===e.scheme)l=10;else if(o==="*")l=5;else return 0;if(s)if(s===t)l=10;else if(s==="*")l=Math.max(l,5);else return 0;if(r){let c;if(typeof r=="string"?c=r:c=Object.assign(Object.assign({},r),{base:p5(r.base)}),c===e.fsPath||mDe(c,e.fsPath))l=10;else return 0}return l}else return 0}}const Ps=bt("modelService");function wDe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}function qY(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(qY):!!i.exclusive}class Si{constructor(){this._clock=0,this._entries=[],this._onDidChange=new z}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),pt(()=>{if(n){let s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,r=>{n&&s===r._score?n.push(r.provider):(s=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=jY(n.selector,e.uri,e.getLanguageId(),wDe(e)),qY(n.selector)&&n._score>0){for(let s of this._entries)s._score=0;n._score=1e3;break}this._entries.sort(Si._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class yDe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),pt(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,s=!1;return this._promises.set(e,t.then(r=>{this._promises.delete(e),!(s||!r)&&(n=this.register(e,r))})),pt(()=>{s=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(s=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}let CDe=class{constructor(){this._icons=new Map,this._onDidRegister=new z}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const GY=new CDe,Hx=GY;function zo(i,e){return new be(i,e)}function SDe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class be{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,GY.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}var Zs;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9\\-]+",i.iconModifierExpression="~[A-Za-z]+";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(r){if(r instanceof be)return["codicon","codicon-"+r.id];const o=e.exec(r.id);if(!o)return t(be.error);let[,a,l]=o;const c=["codicon","codicon-"+a];return l&&c.push("codicon-modifier-"+l.substr(1)),c}i.asClassNameArray=t;function n(r){return t(r).join(" ")}i.asClassName=n;function s(r){return"."+t(r).join(".")}i.asCSSSelector=s})(Zs||(Zs={}));(function(i){i.add=new i("add",{fontCharacter:"\\ea60"}),i.plus=new i("plus",i.add.definition),i.gistNew=new i("gist-new",i.add.definition),i.repoCreate=new i("repo-create",i.add.definition),i.lightbulb=new i("lightbulb",{fontCharacter:"\\ea61"}),i.lightBulb=new i("light-bulb",{fontCharacter:"\\ea61"}),i.repo=new i("repo",{fontCharacter:"\\ea62"}),i.repoDelete=new i("repo-delete",{fontCharacter:"\\ea62"}),i.gistFork=new i("gist-fork",{fontCharacter:"\\ea63"}),i.repoForked=new i("repo-forked",{fontCharacter:"\\ea63"}),i.gitPullRequest=new i("git-pull-request",{fontCharacter:"\\ea64"}),i.gitPullRequestAbandoned=new i("git-pull-request-abandoned",{fontCharacter:"\\ea64"}),i.recordKeys=new i("record-keys",{fontCharacter:"\\ea65"}),i.keyboard=new i("keyboard",{fontCharacter:"\\ea65"}),i.tag=new i("tag",{fontCharacter:"\\ea66"}),i.tagAdd=new i("tag-add",{fontCharacter:"\\ea66"}),i.tagRemove=new i("tag-remove",{fontCharacter:"\\ea66"}),i.person=new i("person",{fontCharacter:"\\ea67"}),i.personFollow=new i("person-follow",{fontCharacter:"\\ea67"}),i.personOutline=new i("person-outline",{fontCharacter:"\\ea67"}),i.personFilled=new i("person-filled",{fontCharacter:"\\ea67"}),i.gitBranch=new i("git-branch",{fontCharacter:"\\ea68"}),i.gitBranchCreate=new i("git-branch-create",{fontCharacter:"\\ea68"}),i.gitBranchDelete=new i("git-branch-delete",{fontCharacter:"\\ea68"}),i.sourceControl=new i("source-control",{fontCharacter:"\\ea68"}),i.mirror=new i("mirror",{fontCharacter:"\\ea69"}),i.mirrorPublic=new i("mirror-public",{fontCharacter:"\\ea69"}),i.star=new i("star",{fontCharacter:"\\ea6a"}),i.starAdd=new i("star-add",{fontCharacter:"\\ea6a"}),i.starDelete=new i("star-delete",{fontCharacter:"\\ea6a"}),i.starEmpty=new i("star-empty",{fontCharacter:"\\ea6a"}),i.comment=new i("comment",{fontCharacter:"\\ea6b"}),i.commentAdd=new i("comment-add",{fontCharacter:"\\ea6b"}),i.alert=new i("alert",{fontCharacter:"\\ea6c"}),i.warning=new i("warning",{fontCharacter:"\\ea6c"}),i.search=new i("search",{fontCharacter:"\\ea6d"}),i.searchSave=new i("search-save",{fontCharacter:"\\ea6d"}),i.logOut=new i("log-out",{fontCharacter:"\\ea6e"}),i.signOut=new i("sign-out",{fontCharacter:"\\ea6e"}),i.logIn=new i("log-in",{fontCharacter:"\\ea6f"}),i.signIn=new i("sign-in",{fontCharacter:"\\ea6f"}),i.eye=new i("eye",{fontCharacter:"\\ea70"}),i.eyeUnwatch=new i("eye-unwatch",{fontCharacter:"\\ea70"}),i.eyeWatch=new i("eye-watch",{fontCharacter:"\\ea70"}),i.circleFilled=new i("circle-filled",{fontCharacter:"\\ea71"}),i.primitiveDot=new i("primitive-dot",{fontCharacter:"\\ea71"}),i.closeDirty=new i("close-dirty",{fontCharacter:"\\ea71"}),i.debugBreakpoint=new i("debug-breakpoint",{fontCharacter:"\\ea71"}),i.debugBreakpointDisabled=new i("debug-breakpoint-disabled",{fontCharacter:"\\ea71"}),i.debugHint=new i("debug-hint",{fontCharacter:"\\ea71"}),i.primitiveSquare=new i("primitive-square",{fontCharacter:"\\ea72"}),i.edit=new i("edit",{fontCharacter:"\\ea73"}),i.pencil=new i("pencil",{fontCharacter:"\\ea73"}),i.info=new i("info",{fontCharacter:"\\ea74"}),i.issueOpened=new i("issue-opened",{fontCharacter:"\\ea74"}),i.gistPrivate=new i("gist-private",{fontCharacter:"\\ea75"}),i.gitForkPrivate=new i("git-fork-private",{fontCharacter:"\\ea75"}),i.lock=new i("lock",{fontCharacter:"\\ea75"}),i.mirrorPrivate=new i("mirror-private",{fontCharacter:"\\ea75"}),i.close=new i("close",{fontCharacter:"\\ea76"}),i.removeClose=new i("remove-close",{fontCharacter:"\\ea76"}),i.x=new i("x",{fontCharacter:"\\ea76"}),i.repoSync=new i("repo-sync",{fontCharacter:"\\ea77"}),i.sync=new i("sync",{fontCharacter:"\\ea77"}),i.clone=new i("clone",{fontCharacter:"\\ea78"}),i.desktopDownload=new i("desktop-download",{fontCharacter:"\\ea78"}),i.beaker=new i("beaker",{fontCharacter:"\\ea79"}),i.microscope=new i("microscope",{fontCharacter:"\\ea79"}),i.vm=new i("vm",{fontCharacter:"\\ea7a"}),i.deviceDesktop=new i("device-desktop",{fontCharacter:"\\ea7a"}),i.file=new i("file",{fontCharacter:"\\ea7b"}),i.fileText=new i("file-text",{fontCharacter:"\\ea7b"}),i.more=new i("more",{fontCharacter:"\\ea7c"}),i.ellipsis=new i("ellipsis",{fontCharacter:"\\ea7c"}),i.kebabHorizontal=new i("kebab-horizontal",{fontCharacter:"\\ea7c"}),i.mailReply=new i("mail-reply",{fontCharacter:"\\ea7d"}),i.reply=new i("reply",{fontCharacter:"\\ea7d"}),i.organization=new i("organization",{fontCharacter:"\\ea7e"}),i.organizationFilled=new i("organization-filled",{fontCharacter:"\\ea7e"}),i.organizationOutline=new i("organization-outline",{fontCharacter:"\\ea7e"}),i.newFile=new i("new-file",{fontCharacter:"\\ea7f"}),i.fileAdd=new i("file-add",{fontCharacter:"\\ea7f"}),i.newFolder=new i("new-folder",{fontCharacter:"\\ea80"}),i.fileDirectoryCreate=new i("file-directory-create",{fontCharacter:"\\ea80"}),i.trash=new i("trash",{fontCharacter:"\\ea81"}),i.trashcan=new i("trashcan",{fontCharacter:"\\ea81"}),i.history=new i("history",{fontCharacter:"\\ea82"}),i.clock=new i("clock",{fontCharacter:"\\ea82"}),i.folder=new i("folder",{fontCharacter:"\\ea83"}),i.fileDirectory=new i("file-directory",{fontCharacter:"\\ea83"}),i.symbolFolder=new i("symbol-folder",{fontCharacter:"\\ea83"}),i.logoGithub=new i("logo-github",{fontCharacter:"\\ea84"}),i.markGithub=new i("mark-github",{fontCharacter:"\\ea84"}),i.github=new i("github",{fontCharacter:"\\ea84"}),i.terminal=new i("terminal",{fontCharacter:"\\ea85"}),i.console=new i("console",{fontCharacter:"\\ea85"}),i.repl=new i("repl",{fontCharacter:"\\ea85"}),i.zap=new i("zap",{fontCharacter:"\\ea86"}),i.symbolEvent=new i("symbol-event",{fontCharacter:"\\ea86"}),i.error=new i("error",{fontCharacter:"\\ea87"}),i.stop=new i("stop",{fontCharacter:"\\ea87"}),i.variable=new i("variable",{fontCharacter:"\\ea88"}),i.symbolVariable=new i("symbol-variable",{fontCharacter:"\\ea88"}),i.array=new i("array",{fontCharacter:"\\ea8a"}),i.symbolArray=new i("symbol-array",{fontCharacter:"\\ea8a"}),i.symbolModule=new i("symbol-module",{fontCharacter:"\\ea8b"}),i.symbolPackage=new i("symbol-package",{fontCharacter:"\\ea8b"}),i.symbolNamespace=new i("symbol-namespace",{fontCharacter:"\\ea8b"}),i.symbolObject=new i("symbol-object",{fontCharacter:"\\ea8b"}),i.symbolMethod=new i("symbol-method",{fontCharacter:"\\ea8c"}),i.symbolFunction=new i("symbol-function",{fontCharacter:"\\ea8c"}),i.symbolConstructor=new i("symbol-constructor",{fontCharacter:"\\ea8c"}),i.symbolBoolean=new i("symbol-boolean",{fontCharacter:"\\ea8f"}),i.symbolNull=new i("symbol-null",{fontCharacter:"\\ea8f"}),i.symbolNumeric=new i("symbol-numeric",{fontCharacter:"\\ea90"}),i.symbolNumber=new i("symbol-number",{fontCharacter:"\\ea90"}),i.symbolStructure=new i("symbol-structure",{fontCharacter:"\\ea91"}),i.symbolStruct=new i("symbol-struct",{fontCharacter:"\\ea91"}),i.symbolParameter=new i("symbol-parameter",{fontCharacter:"\\ea92"}),i.symbolTypeParameter=new i("symbol-type-parameter",{fontCharacter:"\\ea92"}),i.symbolKey=new i("symbol-key",{fontCharacter:"\\ea93"}),i.symbolText=new i("symbol-text",{fontCharacter:"\\ea93"}),i.symbolReference=new i("symbol-reference",{fontCharacter:"\\ea94"}),i.goToFile=new i("go-to-file",{fontCharacter:"\\ea94"}),i.symbolEnum=new i("symbol-enum",{fontCharacter:"\\ea95"}),i.symbolValue=new i("symbol-value",{fontCharacter:"\\ea95"}),i.symbolRuler=new i("symbol-ruler",{fontCharacter:"\\ea96"}),i.symbolUnit=new i("symbol-unit",{fontCharacter:"\\ea96"}),i.activateBreakpoints=new i("activate-breakpoints",{fontCharacter:"\\ea97"}),i.archive=new i("archive",{fontCharacter:"\\ea98"}),i.arrowBoth=new i("arrow-both",{fontCharacter:"\\ea99"}),i.arrowDown=new i("arrow-down",{fontCharacter:"\\ea9a"}),i.arrowLeft=new i("arrow-left",{fontCharacter:"\\ea9b"}),i.arrowRight=new i("arrow-right",{fontCharacter:"\\ea9c"}),i.arrowSmallDown=new i("arrow-small-down",{fontCharacter:"\\ea9d"}),i.arrowSmallLeft=new i("arrow-small-left",{fontCharacter:"\\ea9e"}),i.arrowSmallRight=new i("arrow-small-right",{fontCharacter:"\\ea9f"}),i.arrowSmallUp=new i("arrow-small-up",{fontCharacter:"\\eaa0"}),i.arrowUp=new i("arrow-up",{fontCharacter:"\\eaa1"}),i.bell=new i("bell",{fontCharacter:"\\eaa2"}),i.bold=new i("bold",{fontCharacter:"\\eaa3"}),i.book=new i("book",{fontCharacter:"\\eaa4"}),i.bookmark=new i("bookmark",{fontCharacter:"\\eaa5"}),i.debugBreakpointConditionalUnverified=new i("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"}),i.debugBreakpointConditional=new i("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"}),i.debugBreakpointConditionalDisabled=new i("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"}),i.debugBreakpointDataUnverified=new i("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"}),i.debugBreakpointData=new i("debug-breakpoint-data",{fontCharacter:"\\eaa9"}),i.debugBreakpointDataDisabled=new i("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"}),i.debugBreakpointLogUnverified=new i("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"}),i.debugBreakpointLog=new i("debug-breakpoint-log",{fontCharacter:"\\eaab"}),i.debugBreakpointLogDisabled=new i("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"}),i.briefcase=new i("briefcase",{fontCharacter:"\\eaac"}),i.broadcast=new i("broadcast",{fontCharacter:"\\eaad"}),i.browser=new i("browser",{fontCharacter:"\\eaae"}),i.bug=new i("bug",{fontCharacter:"\\eaaf"}),i.calendar=new i("calendar",{fontCharacter:"\\eab0"}),i.caseSensitive=new i("case-sensitive",{fontCharacter:"\\eab1"}),i.check=new i("check",{fontCharacter:"\\eab2"}),i.checklist=new i("checklist",{fontCharacter:"\\eab3"}),i.chevronDown=new i("chevron-down",{fontCharacter:"\\eab4"}),i.dropDownButton=new i("drop-down-button",i.chevronDown.definition),i.chevronLeft=new i("chevron-left",{fontCharacter:"\\eab5"}),i.chevronRight=new i("chevron-right",{fontCharacter:"\\eab6"}),i.chevronUp=new i("chevron-up",{fontCharacter:"\\eab7"}),i.chromeClose=new i("chrome-close",{fontCharacter:"\\eab8"}),i.chromeMaximize=new i("chrome-maximize",{fontCharacter:"\\eab9"}),i.chromeMinimize=new i("chrome-minimize",{fontCharacter:"\\eaba"}),i.chromeRestore=new i("chrome-restore",{fontCharacter:"\\eabb"}),i.circleOutline=new i("circle-outline",{fontCharacter:"\\eabc"}),i.debugBreakpointUnverified=new i("debug-breakpoint-unverified",{fontCharacter:"\\eabc"}),i.circleSlash=new i("circle-slash",{fontCharacter:"\\eabd"}),i.circuitBoard=new i("circuit-board",{fontCharacter:"\\eabe"}),i.clearAll=new i("clear-all",{fontCharacter:"\\eabf"}),i.clippy=new i("clippy",{fontCharacter:"\\eac0"}),i.closeAll=new i("close-all",{fontCharacter:"\\eac1"}),i.cloudDownload=new i("cloud-download",{fontCharacter:"\\eac2"}),i.cloudUpload=new i("cloud-upload",{fontCharacter:"\\eac3"}),i.code=new i("code",{fontCharacter:"\\eac4"}),i.collapseAll=new i("collapse-all",{fontCharacter:"\\eac5"}),i.colorMode=new i("color-mode",{fontCharacter:"\\eac6"}),i.commentDiscussion=new i("comment-discussion",{fontCharacter:"\\eac7"}),i.compareChanges=new i("compare-changes",{fontCharacter:"\\eafd"}),i.creditCard=new i("credit-card",{fontCharacter:"\\eac9"}),i.dash=new i("dash",{fontCharacter:"\\eacc"}),i.dashboard=new i("dashboard",{fontCharacter:"\\eacd"}),i.database=new i("database",{fontCharacter:"\\eace"}),i.debugContinue=new i("debug-continue",{fontCharacter:"\\eacf"}),i.debugDisconnect=new i("debug-disconnect",{fontCharacter:"\\ead0"}),i.debugPause=new i("debug-pause",{fontCharacter:"\\ead1"}),i.debugRestart=new i("debug-restart",{fontCharacter:"\\ead2"}),i.debugStart=new i("debug-start",{fontCharacter:"\\ead3"}),i.debugStepInto=new i("debug-step-into",{fontCharacter:"\\ead4"}),i.debugStepOut=new i("debug-step-out",{fontCharacter:"\\ead5"}),i.debugStepOver=new i("debug-step-over",{fontCharacter:"\\ead6"}),i.debugStop=new i("debug-stop",{fontCharacter:"\\ead7"}),i.debug=new i("debug",{fontCharacter:"\\ead8"}),i.deviceCameraVideo=new i("device-camera-video",{fontCharacter:"\\ead9"}),i.deviceCamera=new i("device-camera",{fontCharacter:"\\eada"}),i.deviceMobile=new i("device-mobile",{fontCharacter:"\\eadb"}),i.diffAdded=new i("diff-added",{fontCharacter:"\\eadc"}),i.diffIgnored=new i("diff-ignored",{fontCharacter:"\\eadd"}),i.diffModified=new i("diff-modified",{fontCharacter:"\\eade"}),i.diffRemoved=new i("diff-removed",{fontCharacter:"\\eadf"}),i.diffRenamed=new i("diff-renamed",{fontCharacter:"\\eae0"}),i.diff=new i("diff",{fontCharacter:"\\eae1"}),i.discard=new i("discard",{fontCharacter:"\\eae2"}),i.editorLayout=new i("editor-layout",{fontCharacter:"\\eae3"}),i.emptyWindow=new i("empty-window",{fontCharacter:"\\eae4"}),i.exclude=new i("exclude",{fontCharacter:"\\eae5"}),i.extensions=new i("extensions",{fontCharacter:"\\eae6"}),i.eyeClosed=new i("eye-closed",{fontCharacter:"\\eae7"}),i.fileBinary=new i("file-binary",{fontCharacter:"\\eae8"}),i.fileCode=new i("file-code",{fontCharacter:"\\eae9"}),i.fileMedia=new i("file-media",{fontCharacter:"\\eaea"}),i.filePdf=new i("file-pdf",{fontCharacter:"\\eaeb"}),i.fileSubmodule=new i("file-submodule",{fontCharacter:"\\eaec"}),i.fileSymlinkDirectory=new i("file-symlink-directory",{fontCharacter:"\\eaed"}),i.fileSymlinkFile=new i("file-symlink-file",{fontCharacter:"\\eaee"}),i.fileZip=new i("file-zip",{fontCharacter:"\\eaef"}),i.files=new i("files",{fontCharacter:"\\eaf0"}),i.filter=new i("filter",{fontCharacter:"\\eaf1"}),i.flame=new i("flame",{fontCharacter:"\\eaf2"}),i.foldDown=new i("fold-down",{fontCharacter:"\\eaf3"}),i.foldUp=new i("fold-up",{fontCharacter:"\\eaf4"}),i.fold=new i("fold",{fontCharacter:"\\eaf5"}),i.folderActive=new i("folder-active",{fontCharacter:"\\eaf6"}),i.folderOpened=new i("folder-opened",{fontCharacter:"\\eaf7"}),i.gear=new i("gear",{fontCharacter:"\\eaf8"}),i.gift=new i("gift",{fontCharacter:"\\eaf9"}),i.gistSecret=new i("gist-secret",{fontCharacter:"\\eafa"}),i.gist=new i("gist",{fontCharacter:"\\eafb"}),i.gitCommit=new i("git-commit",{fontCharacter:"\\eafc"}),i.gitCompare=new i("git-compare",{fontCharacter:"\\eafd"}),i.gitMerge=new i("git-merge",{fontCharacter:"\\eafe"}),i.githubAction=new i("github-action",{fontCharacter:"\\eaff"}),i.githubAlt=new i("github-alt",{fontCharacter:"\\eb00"}),i.globe=new i("globe",{fontCharacter:"\\eb01"}),i.grabber=new i("grabber",{fontCharacter:"\\eb02"}),i.graph=new i("graph",{fontCharacter:"\\eb03"}),i.gripper=new i("gripper",{fontCharacter:"\\eb04"}),i.heart=new i("heart",{fontCharacter:"\\eb05"}),i.home=new i("home",{fontCharacter:"\\eb06"}),i.horizontalRule=new i("horizontal-rule",{fontCharacter:"\\eb07"}),i.hubot=new i("hubot",{fontCharacter:"\\eb08"}),i.inbox=new i("inbox",{fontCharacter:"\\eb09"}),i.issueClosed=new i("issue-closed",{fontCharacter:"\\eba4"}),i.issueReopened=new i("issue-reopened",{fontCharacter:"\\eb0b"}),i.issues=new i("issues",{fontCharacter:"\\eb0c"}),i.italic=new i("italic",{fontCharacter:"\\eb0d"}),i.jersey=new i("jersey",{fontCharacter:"\\eb0e"}),i.json=new i("json",{fontCharacter:"\\eb0f"}),i.kebabVertical=new i("kebab-vertical",{fontCharacter:"\\eb10"}),i.key=new i("key",{fontCharacter:"\\eb11"}),i.law=new i("law",{fontCharacter:"\\eb12"}),i.lightbulbAutofix=new i("lightbulb-autofix",{fontCharacter:"\\eb13"}),i.linkExternal=new i("link-external",{fontCharacter:"\\eb14"}),i.link=new i("link",{fontCharacter:"\\eb15"}),i.listOrdered=new i("list-ordered",{fontCharacter:"\\eb16"}),i.listUnordered=new i("list-unordered",{fontCharacter:"\\eb17"}),i.liveShare=new i("live-share",{fontCharacter:"\\eb18"}),i.loading=new i("loading",{fontCharacter:"\\eb19"}),i.location=new i("location",{fontCharacter:"\\eb1a"}),i.mailRead=new i("mail-read",{fontCharacter:"\\eb1b"}),i.mail=new i("mail",{fontCharacter:"\\eb1c"}),i.markdown=new i("markdown",{fontCharacter:"\\eb1d"}),i.megaphone=new i("megaphone",{fontCharacter:"\\eb1e"}),i.mention=new i("mention",{fontCharacter:"\\eb1f"}),i.milestone=new i("milestone",{fontCharacter:"\\eb20"}),i.mortarBoard=new i("mortar-board",{fontCharacter:"\\eb21"}),i.move=new i("move",{fontCharacter:"\\eb22"}),i.multipleWindows=new i("multiple-windows",{fontCharacter:"\\eb23"}),i.mute=new i("mute",{fontCharacter:"\\eb24"}),i.noNewline=new i("no-newline",{fontCharacter:"\\eb25"}),i.note=new i("note",{fontCharacter:"\\eb26"}),i.octoface=new i("octoface",{fontCharacter:"\\eb27"}),i.openPreview=new i("open-preview",{fontCharacter:"\\eb28"}),i.package_=new i("package",{fontCharacter:"\\eb29"}),i.paintcan=new i("paintcan",{fontCharacter:"\\eb2a"}),i.pin=new i("pin",{fontCharacter:"\\eb2b"}),i.play=new i("play",{fontCharacter:"\\eb2c"}),i.run=new i("run",{fontCharacter:"\\eb2c"}),i.plug=new i("plug",{fontCharacter:"\\eb2d"}),i.preserveCase=new i("preserve-case",{fontCharacter:"\\eb2e"}),i.preview=new i("preview",{fontCharacter:"\\eb2f"}),i.project=new i("project",{fontCharacter:"\\eb30"}),i.pulse=new i("pulse",{fontCharacter:"\\eb31"}),i.question=new i("question",{fontCharacter:"\\eb32"}),i.quote=new i("quote",{fontCharacter:"\\eb33"}),i.radioTower=new i("radio-tower",{fontCharacter:"\\eb34"}),i.reactions=new i("reactions",{fontCharacter:"\\eb35"}),i.references=new i("references",{fontCharacter:"\\eb36"}),i.refresh=new i("refresh",{fontCharacter:"\\eb37"}),i.regex=new i("regex",{fontCharacter:"\\eb38"}),i.remoteExplorer=new i("remote-explorer",{fontCharacter:"\\eb39"}),i.remote=new i("remote",{fontCharacter:"\\eb3a"}),i.remove=new i("remove",{fontCharacter:"\\eb3b"}),i.replaceAll=new i("replace-all",{fontCharacter:"\\eb3c"}),i.replace=new i("replace",{fontCharacter:"\\eb3d"}),i.repoClone=new i("repo-clone",{fontCharacter:"\\eb3e"}),i.repoForcePush=new i("repo-force-push",{fontCharacter:"\\eb3f"}),i.repoPull=new i("repo-pull",{fontCharacter:"\\eb40"}),i.repoPush=new i("repo-push",{fontCharacter:"\\eb41"}),i.report=new i("report",{fontCharacter:"\\eb42"}),i.requestChanges=new i("request-changes",{fontCharacter:"\\eb43"}),i.rocket=new i("rocket",{fontCharacter:"\\eb44"}),i.rootFolderOpened=new i("root-folder-opened",{fontCharacter:"\\eb45"}),i.rootFolder=new i("root-folder",{fontCharacter:"\\eb46"}),i.rss=new i("rss",{fontCharacter:"\\eb47"}),i.ruby=new i("ruby",{fontCharacter:"\\eb48"}),i.saveAll=new i("save-all",{fontCharacter:"\\eb49"}),i.saveAs=new i("save-as",{fontCharacter:"\\eb4a"}),i.save=new i("save",{fontCharacter:"\\eb4b"}),i.screenFull=new i("screen-full",{fontCharacter:"\\eb4c"}),i.screenNormal=new i("screen-normal",{fontCharacter:"\\eb4d"}),i.searchStop=new i("search-stop",{fontCharacter:"\\eb4e"}),i.server=new i("server",{fontCharacter:"\\eb50"}),i.settingsGear=new i("settings-gear",{fontCharacter:"\\eb51"}),i.settings=new i("settings",{fontCharacter:"\\eb52"}),i.shield=new i("shield",{fontCharacter:"\\eb53"}),i.smiley=new i("smiley",{fontCharacter:"\\eb54"}),i.sortPrecedence=new i("sort-precedence",{fontCharacter:"\\eb55"}),i.splitHorizontal=new i("split-horizontal",{fontCharacter:"\\eb56"}),i.splitVertical=new i("split-vertical",{fontCharacter:"\\eb57"}),i.squirrel=new i("squirrel",{fontCharacter:"\\eb58"}),i.starFull=new i("star-full",{fontCharacter:"\\eb59"}),i.starHalf=new i("star-half",{fontCharacter:"\\eb5a"}),i.symbolClass=new i("symbol-class",{fontCharacter:"\\eb5b"}),i.symbolColor=new i("symbol-color",{fontCharacter:"\\eb5c"}),i.symbolConstant=new i("symbol-constant",{fontCharacter:"\\eb5d"}),i.symbolEnumMember=new i("symbol-enum-member",{fontCharacter:"\\eb5e"}),i.symbolField=new i("symbol-field",{fontCharacter:"\\eb5f"}),i.symbolFile=new i("symbol-file",{fontCharacter:"\\eb60"}),i.symbolInterface=new i("symbol-interface",{fontCharacter:"\\eb61"}),i.symbolKeyword=new i("symbol-keyword",{fontCharacter:"\\eb62"}),i.symbolMisc=new i("symbol-misc",{fontCharacter:"\\eb63"}),i.symbolOperator=new i("symbol-operator",{fontCharacter:"\\eb64"}),i.symbolProperty=new i("symbol-property",{fontCharacter:"\\eb65"}),i.wrench=new i("wrench",{fontCharacter:"\\eb65"}),i.wrenchSubaction=new i("wrench-subaction",{fontCharacter:"\\eb65"}),i.symbolSnippet=new i("symbol-snippet",{fontCharacter:"\\eb66"}),i.tasklist=new i("tasklist",{fontCharacter:"\\eb67"}),i.telescope=new i("telescope",{fontCharacter:"\\eb68"}),i.textSize=new i("text-size",{fontCharacter:"\\eb69"}),i.threeBars=new i("three-bars",{fontCharacter:"\\eb6a"}),i.thumbsdown=new i("thumbsdown",{fontCharacter:"\\eb6b"}),i.thumbsup=new i("thumbsup",{fontCharacter:"\\eb6c"}),i.tools=new i("tools",{fontCharacter:"\\eb6d"}),i.triangleDown=new i("triangle-down",{fontCharacter:"\\eb6e"}),i.triangleLeft=new i("triangle-left",{fontCharacter:"\\eb6f"}),i.triangleRight=new i("triangle-right",{fontCharacter:"\\eb70"}),i.triangleUp=new i("triangle-up",{fontCharacter:"\\eb71"}),i.twitter=new i("twitter",{fontCharacter:"\\eb72"}),i.unfold=new i("unfold",{fontCharacter:"\\eb73"}),i.unlock=new i("unlock",{fontCharacter:"\\eb74"}),i.unmute=new i("unmute",{fontCharacter:"\\eb75"}),i.unverified=new i("unverified",{fontCharacter:"\\eb76"}),i.verified=new i("verified",{fontCharacter:"\\eb77"}),i.versions=new i("versions",{fontCharacter:"\\eb78"}),i.vmActive=new i("vm-active",{fontCharacter:"\\eb79"}),i.vmOutline=new i("vm-outline",{fontCharacter:"\\eb7a"}),i.vmRunning=new i("vm-running",{fontCharacter:"\\eb7b"}),i.watch=new i("watch",{fontCharacter:"\\eb7c"}),i.whitespace=new i("whitespace",{fontCharacter:"\\eb7d"}),i.wholeWord=new i("whole-word",{fontCharacter:"\\eb7e"}),i.window=new i("window",{fontCharacter:"\\eb7f"}),i.wordWrap=new i("word-wrap",{fontCharacter:"\\eb80"}),i.zoomIn=new i("zoom-in",{fontCharacter:"\\eb81"}),i.zoomOut=new i("zoom-out",{fontCharacter:"\\eb82"}),i.listFilter=new i("list-filter",{fontCharacter:"\\eb83"}),i.listFlat=new i("list-flat",{fontCharacter:"\\eb84"}),i.listSelection=new i("list-selection",{fontCharacter:"\\eb85"}),i.selection=new i("selection",{fontCharacter:"\\eb85"}),i.listTree=new i("list-tree",{fontCharacter:"\\eb86"}),i.debugBreakpointFunctionUnverified=new i("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"}),i.debugBreakpointFunction=new i("debug-breakpoint-function",{fontCharacter:"\\eb88"}),i.debugBreakpointFunctionDisabled=new i("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"}),i.debugStackframeActive=new i("debug-stackframe-active",{fontCharacter:"\\eb89"}),i.debugStackframeDot=new i("debug-stackframe-dot",{fontCharacter:"\\eb8a"}),i.debugStackframe=new i("debug-stackframe",{fontCharacter:"\\eb8b"}),i.debugStackframeFocused=new i("debug-stackframe-focused",{fontCharacter:"\\eb8b"}),i.debugBreakpointUnsupported=new i("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"}),i.symbolString=new i("symbol-string",{fontCharacter:"\\eb8d"}),i.debugReverseContinue=new i("debug-reverse-continue",{fontCharacter:"\\eb8e"}),i.debugStepBack=new i("debug-step-back",{fontCharacter:"\\eb8f"}),i.debugRestartFrame=new i("debug-restart-frame",{fontCharacter:"\\eb90"}),i.callIncoming=new i("call-incoming",{fontCharacter:"\\eb92"}),i.callOutgoing=new i("call-outgoing",{fontCharacter:"\\eb93"}),i.menu=new i("menu",{fontCharacter:"\\eb94"}),i.expandAll=new i("expand-all",{fontCharacter:"\\eb95"}),i.feedback=new i("feedback",{fontCharacter:"\\eb96"}),i.groupByRefType=new i("group-by-ref-type",{fontCharacter:"\\eb97"}),i.ungroupByRefType=new i("ungroup-by-ref-type",{fontCharacter:"\\eb98"}),i.account=new i("account",{fontCharacter:"\\eb99"}),i.bellDot=new i("bell-dot",{fontCharacter:"\\eb9a"}),i.debugConsole=new i("debug-console",{fontCharacter:"\\eb9b"}),i.library=new i("library",{fontCharacter:"\\eb9c"}),i.output=new i("output",{fontCharacter:"\\eb9d"}),i.runAll=new i("run-all",{fontCharacter:"\\eb9e"}),i.syncIgnored=new i("sync-ignored",{fontCharacter:"\\eb9f"}),i.pinned=new i("pinned",{fontCharacter:"\\eba0"}),i.githubInverted=new i("github-inverted",{fontCharacter:"\\eba1"}),i.debugAlt=new i("debug-alt",{fontCharacter:"\\eb91"}),i.serverProcess=new i("server-process",{fontCharacter:"\\eba2"}),i.serverEnvironment=new i("server-environment",{fontCharacter:"\\eba3"}),i.pass=new i("pass",{fontCharacter:"\\eba4"}),i.stopCircle=new i("stop-circle",{fontCharacter:"\\eba5"}),i.playCircle=new i("play-circle",{fontCharacter:"\\eba6"}),i.record=new i("record",{fontCharacter:"\\eba7"}),i.debugAltSmall=new i("debug-alt-small",{fontCharacter:"\\eba8"}),i.vmConnect=new i("vm-connect",{fontCharacter:"\\eba9"}),i.cloud=new i("cloud",{fontCharacter:"\\ebaa"}),i.merge=new i("merge",{fontCharacter:"\\ebab"}),i.exportIcon=new i("export",{fontCharacter:"\\ebac"}),i.graphLeft=new i("graph-left",{fontCharacter:"\\ebad"}),i.magnet=new i("magnet",{fontCharacter:"\\ebae"}),i.notebook=new i("notebook",{fontCharacter:"\\ebaf"}),i.redo=new i("redo",{fontCharacter:"\\ebb0"}),i.checkAll=new i("check-all",{fontCharacter:"\\ebb1"}),i.pinnedDirty=new i("pinned-dirty",{fontCharacter:"\\ebb2"}),i.passFilled=new i("pass-filled",{fontCharacter:"\\ebb3"}),i.circleLargeFilled=new i("circle-large-filled",{fontCharacter:"\\ebb4"}),i.circleLargeOutline=new i("circle-large-outline",{fontCharacter:"\\ebb5"}),i.combine=new i("combine",{fontCharacter:"\\ebb6"}),i.gather=new i("gather",{fontCharacter:"\\ebb6"}),i.table=new i("table",{fontCharacter:"\\ebb7"}),i.variableGroup=new i("variable-group",{fontCharacter:"\\ebb8"}),i.typeHierarchy=new i("type-hierarchy",{fontCharacter:"\\ebb9"}),i.typeHierarchySub=new i("type-hierarchy-sub",{fontCharacter:"\\ebba"}),i.typeHierarchySuper=new i("type-hierarchy-super",{fontCharacter:"\\ebbb"}),i.gitPullRequestCreate=new i("git-pull-request-create",{fontCharacter:"\\ebbc"}),i.runAbove=new i("run-above",{fontCharacter:"\\ebbd"}),i.runBelow=new i("run-below",{fontCharacter:"\\ebbe"}),i.notebookTemplate=new i("notebook-template",{fontCharacter:"\\ebbf"}),i.debugRerun=new i("debug-rerun",{fontCharacter:"\\ebc0"}),i.workspaceTrusted=new i("workspace-trusted",{fontCharacter:"\\ebc1"}),i.workspaceUntrusted=new i("workspace-untrusted",{fontCharacter:"\\ebc2"}),i.workspaceUnspecified=new i("workspace-unspecified",{fontCharacter:"\\ebc3"}),i.terminalCmd=new i("terminal-cmd",{fontCharacter:"\\ebc4"}),i.terminalDebian=new i("terminal-debian",{fontCharacter:"\\ebc5"}),i.terminalLinux=new i("terminal-linux",{fontCharacter:"\\ebc6"}),i.terminalPowershell=new i("terminal-powershell",{fontCharacter:"\\ebc7"}),i.terminalTmux=new i("terminal-tmux",{fontCharacter:"\\ebc8"}),i.terminalUbuntu=new i("terminal-ubuntu",{fontCharacter:"\\ebc9"}),i.terminalBash=new i("terminal-bash",{fontCharacter:"\\ebca"}),i.arrowSwap=new i("arrow-swap",{fontCharacter:"\\ebcb"}),i.copy=new i("copy",{fontCharacter:"\\ebcc"}),i.personAdd=new i("person-add",{fontCharacter:"\\ebcd"}),i.filterFilled=new i("filter-filled",{fontCharacter:"\\ebce"}),i.wand=new i("wand",{fontCharacter:"\\ebcf"}),i.debugLineByLine=new i("debug-line-by-line",{fontCharacter:"\\ebd0"}),i.inspect=new i("inspect",{fontCharacter:"\\ebd1"}),i.layers=new i("layers",{fontCharacter:"\\ebd2"}),i.layersDot=new i("layers-dot",{fontCharacter:"\\ebd3"}),i.layersActive=new i("layers-active",{fontCharacter:"\\ebd4"}),i.compass=new i("compass",{fontCharacter:"\\ebd5"}),i.compassDot=new i("compass-dot",{fontCharacter:"\\ebd6"}),i.compassActive=new i("compass-active",{fontCharacter:"\\ebd7"}),i.azure=new i("azure",{fontCharacter:"\\ebd8"}),i.issueDraft=new i("issue-draft",{fontCharacter:"\\ebd9"}),i.gitPullRequestClosed=new i("git-pull-request-closed",{fontCharacter:"\\ebda"}),i.gitPullRequestDraft=new i("git-pull-request-draft",{fontCharacter:"\\ebdb"}),i.debugAll=new i("debug-all",{fontCharacter:"\\ebdc"}),i.debugCoverage=new i("debug-coverage",{fontCharacter:"\\ebdd"}),i.runErrors=new i("run-errors",{fontCharacter:"\\ebde"}),i.folderLibrary=new i("folder-library",{fontCharacter:"\\ebdf"}),i.debugContinueSmall=new i("debug-continue-small",{fontCharacter:"\\ebe0"}),i.beakerStop=new i("beaker-stop",{fontCharacter:"\\ebe1"}),i.graphLine=new i("graph-line",{fontCharacter:"\\ebe2"}),i.graphScatter=new i("graph-scatter",{fontCharacter:"\\ebe3"}),i.pieChart=new i("pie-chart",{fontCharacter:"\\ebe4"}),i.bracket=new i("bracket",i.json.definition),i.bracketDot=new i("bracket-dot",{fontCharacter:"\\ebe5"}),i.bracketError=new i("bracket-error",{fontCharacter:"\\ebe6"}),i.lockSmall=new i("lock-small",{fontCharacter:"\\ebe7"}),i.azureDevops=new i("azure-devops",{fontCharacter:"\\ebe8"}),i.verifiedFilled=new i("verified-filled",{fontCharacter:"\\ebe9"})})(be||(be={}));class Pr{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;return s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;"),s&4&&(r+="text-decoration: underline;"),r}}const xDe=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&Hx.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=be.symbolProperty),n.classNames}}();let KY=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Fr;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Fr||(Fr={}));var O7;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(O7||(O7={}));var P7;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(P7||(P7={}));function DDe(i){return i&&We.isUri(i.uri)&&F.isIRange(i.range)&&(F.isIRange(i.originSelectionRange)||F.isIRange(i.targetSelectionRange))}var F7;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(o){return e.get(o)}i.fromString=n;function s(o){return t.get(o)}i.toString=s;function r(o,a){const l=t.get(o);let c=l&&Hx.get("symbol-"+l);return c||(console.info("No codicon found for SymbolKind "+o),c=be.symbolProperty),`${a?"inline":"block"} ${c.classNames}`}i.toCssClassName=r})(F7||(F7={}));class Da{constructor(e){this.value=e}}Da.Comment=new Da("comment");Da.Imports=new Da("imports");Da.Region=new Da("region");var B7;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(B7||(B7={}));const Ux=new Si,FM=new Si,na=new Si,P5=new Si,BM=new Si,Hv=new Si,VM=new Si,$x=new Si,kDe=new Si,Uv=new Si,jx=new Si,qx=new Si,Gx=new Si,WM=new Si,zM=new Si,Ll=new Si,Sb=new Si,Oh=new Si,ZY=new Si,YY=new Si,Nm=new Si,LDe=new Si,HM=new Si,Mm=new Si,QY=new Si,Li=new yDe;class ADe{clone(){return this}equals(e){return this===e}}const gL=new ADe,Cu="vs.editor.nullMode";function EDe(i,e,t,n){return new m5([new oL(n,"",i)],t)}function XY(i,e,t,n){let s=new Uint32Array(2);return s[0]=n,s[1]=(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0,new aL(s,t===null?gL:t)}const IDe="editorWorkerService",qu=bt(IDe),Fs=bt("modeService"),Rl=bt("textModelService"),TDe="$initialize";let V7=!1;function UM(i){Ew&&(V7||(V7=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class NDe{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.method=n,this.args=s,this.type=0}}class W7{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=1}}class MDe{constructor(e,t,n,s){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=s,this.type=2}}class RDe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class ODe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class PDe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new NDe(this._workerId,n,e,t))})}listen(e,t){let n=null;const s=new z({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,s),this._send(new MDe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new ODe(this._workerId,n)),n=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(s=>{this._send(new W7(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=u7(s.detail)),this._send(new W7(this._workerId,t,void 0,u7(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(s=>{this._send(new RDe(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class FDe extends te{constructor(e,t,n){super();let s=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",c=>{this._protocol.handleMessage(c)},c=>{s&&s(c)})),this._protocol=new PDe({sendMessage:(c,h)=>{this._worker.postMessage(c,h)},handleMessage:(c,h)=>{if(typeof n[c]!="function")return Promise.reject(new Error("Missing method "+c+" on main thread host."));try{return Promise.resolve(n[c].apply(n,h))}catch(u){return Promise.reject(u)}},handleEvent:(c,h)=>{if(eQ(c)){const u=n[c].call(n,h);if(typeof u!="function")throw new Error(`Missing dynamic event ${c} on main thread host.`);return u}if(JY(c)){const u=n[c];if(typeof u!="function")throw new Error(`Missing event ${c} on main thread host.`);return u}throw new Error(`Malformed event name ${c}`)}}),this._protocol.setWorkerId(this._worker.getId());let r=null;typeof ni.require<"u"&&typeof ni.require.getConfig=="function"?r=ni.require.getConfig():typeof ni.requirejs<"u"&&(r=ni.requirejs.s.contexts._.config);const o=T5(n);this._onModuleLoaded=this._protocol.sendMessage(TDe,[this._worker.getId(),JSON.parse(JSON.stringify(r)),t,o]);const a=(c,h)=>this._request(c,h),l=(c,h)=>this._protocol.listen(c,h);this._lazyProxy=new Promise((c,h)=>{s=h,this._onModuleLoaded.then(u=>{c(BDe(u,a,l))},u=>{h(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,s)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,s)},s)})}_onError(e,t){console.error(e),console.info(t)}}function JY(i){return i[0]==="o"&&i[1]==="n"&&Lh(i.charCodeAt(2))}function eQ(i){return/^onDynamic/.test(i)&&Lh(i.charCodeAt(9))}function BDe(i,e,t){const n=o=>function(){const a=Array.prototype.slice.call(arguments,0);return e(o,a)},s=o=>function(a){return t(o,a)};let r={};for(const o of i){if(eQ(o)){r[o]=s(o);continue}if(JY(o)){r[o]=t(o,void 0);continue}r[o]=n(o)}return r}var oE;const z7=(oE=window.trustedTypes)===null||oE===void 0?void 0:oE.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function VDe(i,e){if(ni.MonacoEnvironment){if(typeof ni.MonacoEnvironment.getWorker=="function")return ni.MonacoEnvironment.getWorker(i,e);if(typeof ni.MonacoEnvironment.getWorkerUrl=="function"){const t=ni.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(z7?z7.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function WDe(i){return typeof i.then=="function"}class zDe{constructor(e,t,n,s,r){this.id=t;const o=VDe("workerMain.js",n);WDe(o)?this.worker=o:this.worker=Promise.resolve(o),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){s(l.data)},a.onmessageerror=r,typeof a.addEventListener=="function"&&a.addEventListener("error",r)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class pL{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let s=++pL.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new zDe(e,s,this._label||"anonymous"+s,t,r=>{UM(r),this._webWorkerFailedBeforeError=r,n(r)})}}pL.LAST_WORKER_ID=0;var an;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(an||(an={}));class aE{constructor(e){if(this._standardAutoClosingPairConditionalBrand=void 0,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}}class HDe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)f_(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),f_(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),f_(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),f_(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&f_(this.autoClosingPairsCloseSingleChar,t.close,t)}}function f_(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function Ny(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n),r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new UDe(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class UDe{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Qa(i){return(i&7)!==0}class Rm{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new aE(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new aE({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=H7(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=H7(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new aE({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Rm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}static shouldAutoClosePair(e,t,n){if(t.getTokenCount()===0)return!0;const s=t.findTokenIndexAtOffset(n-2),r=t.getStandardTokenType(s);return e.isOK(r)}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}Rm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function H7(i){return i.filter(([e,t])=>e!==""&&t!=="")}let lE;function tQ(){return lE||(lE=new TextDecoder("UTF-16LE")),lE}let cE;function $De(){return cE||(cE=new TextDecoder("UTF-16BE")),cE}let hE;function iQ(){return hE||(hE=XZ()?tQ():$De()),hE}const nQ=typeof TextDecoder<"u";let Nf,$M;nQ?(Nf=i=>new qDe(i),$M=jDe):(Nf=i=>new GDe,$M=sQ);function jDe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?sQ(i,e,t):tQ().decode(n)}function sQ(i,e,t){let n=[],s=0;for(let r=0;r<t;r++){const o=Txe(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class qDe{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return iQ().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||vn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class GDe{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Kx{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=Kx._toSet(this.open),this._closeSet=Kx._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function KDe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[h,u]=a;return l===h||l===u||c===h||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,u]=i[c];a.push(h),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class ZDe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=KDe(t);this.brackets=n.map((s,r)=>new Kx(e,r,s.open,s.close,YDe(s.open,s.close,n,r),QDe(s.open,s.close,n,r))),this.forwardRegex=XDe(this.brackets),this.reversedRegex=JDe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function rQ(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function oQ(i,e){return i.length-e.length}function mL(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function YDe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)rQ(s[r],t,n,s);return s=mL(s),s.sort(oQ),s.reverse(),_L(s)}function QDe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)rQ(s[r],t,n,s);return s=mL(s),s.sort(oQ),s.reverse(),_L(s.map(F5))}function XDe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=mL(e),_L(e)}function JDe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=mL(e),_L(e.map(F5))}function eke(i){const e=/^[\w ]+$/.test(i);return i=Ca(i),e?`\\b${i}\\b`:i}function _L(i){let e=`(${i.map(eke).join(")|(")})`;return NY(e,!0)}const F5=function(){function i(n){if(nQ){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return iQ().decode(s)}else{let s=[],r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charAt(o);return s.join("")}}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class lo{static _findPrevBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=n.length-(r.index||0),a=r[0].length,l=s+o;return new F(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=F5(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){let r=n.match(e);if(!r)return null;let o=r.index||0,a=r[0].length;if(a===0)return null;let l=s+o;return new F(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class tke{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return e=e.filter((t,n,s)=>s.indexOf(t)===n),e}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(Qa(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=lo.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function My(i){return i.global&&(i.lastIndex=0),!0}class ike{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&My(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&My(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&My(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&My(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Cp{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Cp._createOpenBracketRegExp(t[0]),s=Cp._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:an.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:an.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ca(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Cp._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ca(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Cp._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ze(t),null}}}class nke{constructor(){this.data=new Map}add(e,t){aS(xa(e)),aS(ks(t)),aS(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const En=new nke,bL={JSONContribution:"base.contributions.json"};function ske(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class rke{constructor(){this._onDidChangeSchema=new z,this.schemasById={}}registerSchema(e,t){this.schemasById[ske(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const oke=new rke;En.add(bL.JSONContribution,oke);const M0={Configuration:"base.contributions.configuration"},uE="vscode://schemas/settings/resourceLanguage",U7=En.as(bL.JSONContribution);class ake{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new z,this._onDidUpdateConfiguration=new z,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:_("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},U7.registerSchema(uE,this.resourceLanguageSettingsSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);U7.registerSchema(uE,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(s=>{n.push(...this.validateAndRegisterProperties(s,t,s.extensionInfo)),this.configurationContributors.push(s),this.registerJSONConfiguration(s)}),n}validateAndRegisterProperties(e,t=!0,n,s=3){var r;s=Or(e.scope)?s:e.scope;let o=[],a=e.properties;if(a)for(let c in a){if(t&&uke(c)){delete a[c];continue}const h=a[c];if(this.updatePropertyDefaultValue(c,h),B5.test(c)?h.scope=void 0:(h.scope=Or(h.scope)?s:h.scope,h.restricted=Or(h.restricted)?!!(!((r=n==null?void 0:n.restrictedConfigurations)===null||r===void 0)&&r.includes(c)):h.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c];!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),o.push(c)}let l=e.allOf;if(l)for(let c of l)o.push(...this.validateAndRegisterProperties(c,t,n,s));return o}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);let r=n.allOf;r&&r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:_("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:_("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:uE};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.defaultValues[e];us(n)&&(n=t.default),us(n)&&(n=hke(t.type)),t.default=n}}const lke="\\[.*\\]$",B5=new RegExp(lke);function cke(i){return i.substring(1,i.length-1)}function hke(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const aQ=new ake;En.add(M0.Configuration,aQ);function uke(i){return i.trim()?B5.test(i)?_("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):aQ.getConfigurationProperties()[i]!==void 0?_("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:_("config.property.empty","Cannot register an empty property")}const Wi=bt("configurationService");function lQ(i,e){const t=Object.create(null);for(let n in i)V5(t,n,i[n],e);return t}function V5(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){let l=s[a],c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function dke(i,e){const t=e.split(".");cQ(i,t)}function cQ(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(cQ(n,e),Object.keys(n).length===0&&delete i[t])}}function fke(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function gke(){const i=En.as(M0.Configuration).getConfigurationProperties();return Object.keys(i)}function pke(){const i=Object.create(null),e=En.as(M0.Configuration).getConfigurationProperties();for(let t in e){let n=e[t].default;V5(i,t,n,s=>console.error(`Conflict in default settings: ${s}`))}return i}class Ah{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const hQ=[];function cg(i,e,t){e instanceof Ah||(e=new Ah(e,[],t)),hQ.push([i,e])}function mke(){return hQ}var _ke=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$7=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class dE{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Ow=bt("languageConfigurationService");let Zx=class extends te{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new z),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(jM));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>n.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>this.modeService.validateLanguageId(a));if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new dE(void 0));else for(const a of o)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new dE(a)))})),this._register(Mi.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new dE(s.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=bke(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};Zx=_ke([$7(0,Wi),$7(1,Fs)],Zx);function bke(i,e,t){let n=Mi.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new $v(a,{})}const s=vke(n.languageId,e),r=uQ([n.underlyingConfig,s]);return new $v(n.languageId,r)}const jM={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function vke(i,e){const t=e.getValue(jM.brackets,{overrideIdentifier:i}),n=e.getValue(jM.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:j7(t),colorizedBracketPairs:j7(n)}}function j7(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class q7{constructor(e){this.languageId=e}}class wke{constructor(){this._entries=new Map,this._onDidChange=new z,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let s=this._entries.get(e);s||(s=new yke(e),this._entries.set(e,s));const r=s.register(t,n);return this._onDidChange.fire(new q7(e)),pt(()=>{r.dispose(),this._onDidChange.fire(new q7(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let s=Ny(t,n-1),r=this._getElectricCharacterSupport(s.languageId);return r?r.onElectricCharacter(e,s,n-s.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new HDe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():Rm.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}shouldAutoClosePair(e,t,n){const s=Ny(t,n-1);return Rm.shouldAutoClosePair(e,s,n-s.firstCharOffset)}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return Ex(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let s=e.getLanguageIdAtPosition(t,0);if(t>1){let r,o=-1;for(r=t-1;r>=1;r--){if(e.getLanguageIdAtPosition(r,0)!==s)return o;let a=e.getLineContent(r);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){o=r;continue}return r}}return-1}getInheritIndentForLine(e,t,n,s=!0){if(e<4)return null;const r=this.getIndentRulesSupport(t.getLanguageId());if(!r)return null;if(n<=1)return{indentation:"",action:null};const o=this.getPrecedingValidLine(t,n,r);if(o<0)return null;if(o<1)return{indentation:"",action:null};const a=t.getLineContent(o);if(r.shouldIncrease(a)||r.shouldIndentNextLine(a))return{indentation:Zi(a),action:an.Indent,line:o};if(r.shouldDecrease(a))return{indentation:Zi(a),action:null,line:o};{if(o===1)return{indentation:Zi(t.getLineContent(o)),action:null,line:o};const l=o-1,c=r.getIndentMetadata(t.getLineContent(l));if(!(c&3)&&c&4){let h=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(t.getLineContent(u))){h=u;break}return{indentation:Zi(t.getLineContent(h+1)),action:null,line:h+1}}if(s)return{indentation:Zi(t.getLineContent(o)),action:null,line:o};for(let h=o;h>0;h--){const u=t.getLineContent(h);if(r.shouldIncrease(u))return{indentation:Zi(u),action:an.Indent,line:h};if(r.shouldIndentNextLine(u)){let d=0;for(let f=h-1;f>0;f--)if(!r.shouldIndentNextLine(t.getLineContent(h))){d=f;break}return{indentation:Zi(t.getLineContent(d+1)),action:null,line:d+1}}else if(r.shouldDecrease(u))return{indentation:Zi(u),action:null,line:h}}return{indentation:Zi(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,s,r){if(e<4)return null;const o=this.getLanguageConfiguration(n);if(!o)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,s),c=t.getLineContent(s);if(l){const h=l.line;if(h!==void 0){const u=o.onEnter(e,"",t.getLineContent(h),"");if(u){let d=Zi(t.getLineContent(h));return u.removeText&&(d=d.substring(0,d.length-u.removeText)),u.indentAction===an.Indent||u.indentAction===an.IndentOutdent?d=r.shiftIndent(d):u.indentAction===an.Outdent&&(d=r.unshiftIndent(d)),a.shouldDecrease(c)&&(d=r.unshiftIndent(d)),u.appendText&&(d+=u.appendText),Zi(d)}}return a.shouldDecrease(c)?l.action===an.Indent?l.indentation:r.unshiftIndent(l.indentation):l.action===an.Indent?r.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,s){if(e<4)return null;t.forceTokenization(n.startLineNumber);const r=t.getLineTokens(n.startLineNumber),o=Ny(r,n.startColumn-1),a=o.getLineContent();let l=!1,c;o.firstCharOffset>0&&r.getLanguageId(0)!==o.languageId?(l=!0,c=a.substr(0,n.startColumn-1-o.firstCharOffset)):c=r.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const u=this.getIndentRulesSupport(o.languageId);if(!u)return null;const d=c,f=Zi(c),g={getLineTokens:b=>t.getLineTokens(b),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(b,w)=>t.getLanguageIdAtPosition(b,w),getLineContent:b=>b===n.startLineNumber?d:t.getLineContent(b)},p=Zi(r.getLineContent()),m=this.getInheritIndentForLine(e,g,n.startLineNumber+1);if(!m){const b=l?p:f;return{beforeEnter:b,afterEnter:b}}let v=l?p:m.indentation;return m.action===an.Indent&&(v=s.shiftIndent(v)),u.shouldDecrease(h)&&(v=s.unshiftIndent(v)),{beforeEnter:l?p:f,afterEnter:v}}getIndentActionForType(e,t,n,s,r){if(e<4)return null;const o=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=this.getIndentRulesSupport(o.languageId);if(!a)return null;const l=o.getLineContent(),c=l.substr(0,n.startColumn-1-o.firstCharOffset);let h;if(n.isEmpty()?h=l.substr(n.startColumn-1-o.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset),!a.shouldDecrease(c+h)&&a.shouldDecrease(c+s+h)){const u=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!u)return null;let d=u.indentation;return u.action!==an.Indent&&(d=r.unshiftIndent(d)),d}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),r=this.getLanguageConfiguration(s.languageId);if(!r)return null;const o=s.getLineContent(),a=o.substr(0,n.startColumn-1-s.firstCharOffset);let l;n.isEmpty()?l=o.substr(n.startColumn-1-s.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);let c="";if(n.startLineNumber>1&&s.firstCharOffset===0){const p=this.getScopedLineTokens(t,n.startLineNumber-1);p.languageId===s.languageId&&(c=p.getLineContent())}const h=r.onEnter(e,c,a,l);if(!h)return null;const u=h.indentAction;let d=h.appendText;const f=h.removeText||0;d?u===an.Indent&&(d="	"+d):u===an.Indent||u===an.IndentOutdent?d="	":d="";let g=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:u,appendText:d,removeText:f,indentation:g}}getIndentationAtPosition(e,t,n){const s=e.getLineContent(t);let r=Zi(s);return r.length>n-1&&(r=r.substring(0,n-1)),r}getScopedLineTokens(e,t,n){e.forceTokenization(t);const s=e.getLineTokens(t),r=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return Ny(s,r)}}const Mi=new wke;class yke{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new G7(e,t,++this._order);return this._entries.push(n),this._resolved=null,pt(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new $v(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(G7.cmp),uQ(this._entries.map(e=>e.configuration)))}}function uQ(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class G7{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class $v{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Cp(this.underlyingConfig):null,this.comments=$v._handleComments(this.underlyingConfig),this.characterPair=new Rm(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||eY,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new ike(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return Ex(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new ZDe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new tke(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[s,r]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=r}return n}}cg(Ow,Zx);class Sh{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class K7{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function Cke(i,e,t){return new hl(new K7(i),new K7(e)).ComputeDiff(t).changes}class $g{static Assert(e,t){if(!e)throw new Error(t)}}class jg{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}class Z7{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Sh(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class hl{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=hl._getElements(e),[a,l,c]=hl._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(hl._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=R5(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=hl._getStrictElement(this._originalSequence,e),s=hl._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let u;return n<=s?($g.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Sh(e,0,n,s-n+1)]):e<=t?($g.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Sh(e,t-e+1,n,0)]):($g.Assert(e===t+1,"originalStart should only be one more than originalEnd"),$g.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),c=o[0],h=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,n,h,r);let d=[];return r[0]?d=[new Sh(c+1,t-(c+1)+1,h+1,s-(h+1)+1)]:d=this.ComputeDiffRecursive(c+1,t,h+1,s,r),this.ConcatenateChanges(u,d)}return[new Sh(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b){let w=null,y=null,x=new Z7,L=t,S=n,k=f[0]-m[0]-s,D=-1073741824,T=this.m_forwardHistory.length-1;do{const N=k+e;N===L||N<S&&c[N-1]<c[N+1]?(u=c[N+1],g=u-k-s,u<D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g),k=N+1-e):(u=c[N-1]+1,g=u-k-s,u<D&&x.MarkNextChange(),D=u-1,x.AddOriginalElement(u,g+1),k=N-1-e),T>=0&&(c=this.m_forwardHistory[T],e=c[0],L=1,S=c.length-1)}while(--T>=-1);if(w=x.getReverseChanges(),b[0]){let N=f[0]+1,$=m[0]+1;if(w!==null&&w.length>0){const U=w[w.length-1];N=Math.max(N,U.getOriginalEnd()),$=Math.max($,U.getModifiedEnd())}y=[new Sh(N,d-N+1,$,p-$+1)]}else{x=new Z7,L=o,S=a,k=f[0]-m[0]-l,D=1073741824,T=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const N=k+r;N===L||N<S&&h[N-1]>=h[N+1]?(u=h[N+1]-1,g=u-k-l,u>D&&x.MarkNextChange(),D=u+1,x.AddOriginalElement(u+1,g+1),k=N+1-r):(u=h[N-1],g=u-k-l,u>D&&x.MarkNextChange(),D=u,x.AddModifiedElement(u+1,g+1),k=N-1-r),T>=0&&(h=this.m_reverseHistory[T],r=h[0],L=1,S=h.length-1)}while(--T>=-1);y=x.getChanges()}return this.ConcatenateChanges(w,y)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,c=0,h=0,u=0,d=0,f=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-n),p=g+1,m=new Int32Array(p),v=new Int32Array(p),b=s-n,w=t-e,y=e-n,x=t-s,S=(w-b)%2===0;m[b]=e,v[w]=t,a[0]=!1;for(let k=1;k<=g/2+1;k++){let D=0,T=0;h=this.ClipDiagonalBound(b-k,k,b,p),u=this.ClipDiagonalBound(b+k,k,b,p);for(let $=h;$<=u;$+=2){$===h||$<u&&m[$-1]<m[$+1]?l=m[$+1]:l=m[$-1]+1,c=l-($-b)-y;const U=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(m[$]=l,l+c>D+T&&(D=l,T=c),!S&&Math.abs($-w)<=k-1&&l>=v[$])return r[0]=l,o[0]=c,U<=v[$]&&1447>0&&k<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):null}const N=(D-e+(T-n)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(D,N))return a[0]=!0,r[0]=D,o[0]=T,N>0&&1447>0&&k<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):(e++,n++,[new Sh(e,t-e+1,n,s-n+1)]);d=this.ClipDiagonalBound(w-k,k,w,p),f=this.ClipDiagonalBound(w+k,k,w,p);for(let $=d;$<=f;$+=2){$===d||$<f&&v[$-1]>=v[$+1]?l=v[$+1]-1:l=v[$-1],c=l-($-w)-x;const U=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[$]=l,S&&Math.abs($-b)<=k&&l<=m[$])return r[0]=l,o[0]=c,U>=m[$]&&1447>0&&k<=1447+1?this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a):null}if(k<=1447){let $=new Int32Array(u-h+2);$[0]=b-h+1,jg.Copy2(m,h,$,1,u-h+1),this.m_forwardHistory.push($),$=new Int32Array(f-d+2),$[0]=w-d+1,jg.Copy2(v,d,$,1,f-d+1),this.m_reverseHistory.push($)}}return this.WALKTRACE(b,h,u,y,w,d,f,x,m,v,l,t,r,c,s,o,S,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const d=n.originalStart-u,f=n.modifiedStart-u;if(d<s||f<r||o&&!this.OriginalElementsAreEqual(d,d+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const p=(d===s&&f===r?5:0)+this._boundaryScore(d,n.originalLength,f,n.modifiedLength);p>c&&(c=p,l=u)}n.originalStart-=l,n.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,h=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,d=u-h;if(o<5&&c<20&&d<20){const f=this._findBetterContiguousSequence(a,c,h,d,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,c=0,h=0;for(let u=e;u<o;u++)for(let d=n;d<a;d++){const f=this._contiguousSequenceScore(u,d,r);f>0&&f>l&&(l=f,c=u,h=d)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return jg.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],jg.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return jg.Copy(e,0,s,0,e.length),jg.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if($g.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),$g.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Sh(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}const Ske=3;function dQ(i,e,t,n){return new hl(i,e,t).ComputeDiff(n)}class Y7{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=qM(e[s],1),n[s]=GM(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let d=h;d<u;d++)s[a]=c.charCodeAt(d-1),r[a]=l+1,o[a]=d,a++}return new xke(s,r,o)}}class xke{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class jv{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let s,r,o,a,l,c,h,u;return e.originalLength===0?(s=0,r=0,o=0,a=0):(s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,c=0,h=0,u=0):(l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new jv(s,r,o,a,l,c,h,u)}}function Dke(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<Ske?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class xb{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,c,h,u,d;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=s.getStartLineNumber(t.modifiedStart)-1,u=0):(h=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let p=dQ(f,g,r,!0).changes;a&&(p=Dke(p)),d=[];for(let m=0,v=p.length;m<v;m++)d.push(jv.createFromDiffChange(p[m],f,g))}return new xb(l,c,h,u,d)}}class kke{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Y7(e),this.modified=new Y7(t),this.continueLineDiff=Q7(n.maxComputationTime),this.continueCharDiff=Q7(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=dQ(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(xb.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<h&&o<u;){const d=this.originalLines[r],f=this.modifiedLines[o];if(d!==f){{let g=qM(d,1),p=qM(f,1);for(;g>1&&p>1;){const m=d.charCodeAt(g-2),v=f.charCodeAt(p-2);if(m!==v)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=GM(d,1),p=GM(f,1);const m=d.length+1,v=f.length+1;for(;g<m&&p<v;){const b=d.charCodeAt(g-1),w=d.charCodeAt(p-1);if(b!==w)break;g++,p++}(g<m||p<v)&&this._pushTrimWhitespaceCharChange(s,r+1,g,m,o+1,p,v)}}r++,o++}c&&(s.push(xb.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new jv(t,n,t,s,r,o,r,a)]),e.push(new xb(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new jv(t,n,t,s,r,o,r,a)),!0):!1}}function qM(i,e){const t=Xs(i);return t===-1?e:t+1}function GM(i,e){const t=N0(i);return t===-1?e:t+2}function Q7(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}function Yx(i){return i<0?0:i>255?255:i|0}function qg(i){return i<0?0:i>4294967295?4294967295:i|0}class fQ{constructor(e,t){this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class Lke{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=qg(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}changeValue(e,t){return e=qg(e),t=qg(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=qg(e),t=qg(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;let r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=qg(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new fQ(s,e-o)}}class Ake{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new q(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new Lke(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.changeValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=Nl(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}class R0{constructor(e){let t=Yx(e);this._defaultValue=t,this._asciiMap=R0._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=Yx(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Eke{constructor(){this._actual=new R0(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class Ike{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class Tke{constructor(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;let s=new Ike(n,t,0);for(let r=0,o=e.length;r<o;r++){let[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let fE=null;function Nke(){return fE===null&&(fE=new Tke([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),fE}let g_=null;function Mke(){if(g_===null){g_=new R0(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)g_.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)g_.set(e.charCodeAt(t),2)}return g_}class Qx{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=Nke()){const n=Mke();let s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,h=0,u=0,d=1,f=!1,g=!1,p=!1,m=!1;for(;c<l;){let v=!1;const b=a.charCodeAt(c);if(d===13){let w;switch(b){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:p=!0,g=!0,w=0;break;case 93:p=!1,w=g?0:1;break;case 123:m=!0,w=0;break;case 125:w=m?0:1;break;case 39:w=u===34||u===96?0:1;break;case 34:w=u===39||u===96?0:1;break;case 96:w=u===39||u===34?0:1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=p?0:1;break;default:w=n.get(b)}w===1&&(s.push(Qx._createLink(n,a,r,h,c)),v=!0)}else if(d===12){let w;b===91?(g=!0,w=0):w=n.get(b),w===1?v=!0:d=13}else d=t.nextState(d,b),d===0&&(v=!0);v&&(d=1,f=!1,g=!1,m=!1,h=c+1,u=b),c++}d===13&&s.push(Qx._createLink(n,a,r,h,l))}return s}}function Rke(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:Qx.computeLinks(i)}class KM{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,s,r){if(e&&t){let o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){let o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),s=Number(e),r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}KM.INSTANCE=new KM;var Gg=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Oke extends Ake{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=Ix(e.column,Ex(t),this._lines[e.lineNumber-1],0);return n?new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!q.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{let r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}class Mf{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new Oke(We.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeDiff(e,t,n,s){return Gg(this,void 0,void 0,function*(){const r=this._getModel(e),o=this._getModel(t);if(!r||!o)return null;const a=r.getLinesContent(),l=o.getLinesContent(),h=new kke(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:s}).computeDiff(),u=h.changes.length>0?!1:this._modelsAreIdentical(r,o);return{quitEarly:h.quitEarly,identical:u,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Gg(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const s=[];let r;t=t.slice(0).sort((o,a)=>{if(o.range&&a.range)return F.compareRangesUsingStarts(o.range,a.range);let l=o.range?0:1,c=a.range?0:1;return l-c});for(let{range:o,text:a,eol:l}of t){if(typeof l=="number"&&(r=l),F.isEmpty(o)&&!a)continue;const c=n.getValueInRange(o);if(a=a.replace(/\r\n|\n|\r/g,n.eol),c===a)continue;if(Math.max(a.length,c.length)>Mf._diffLimit){s.push({range:o,text:a});continue}const h=Cke(c,a,!1),u=n.offsetAt(F.lift(o).getStartPosition());for(const d of h){const f=n.positionAt(u+d.originalStart),g=n.positionAt(u+d.originalStart+d.originalLength),p={text:a.substr(d.modifiedStart,d.modifiedLength),range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:g.lineNumber,endColumn:g.column}};n.getValueInRange(p.range)!==p.text&&s.push(p)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s})}computeLinks(e){return Gg(this,void 0,void 0,function*(){let t=this._getModel(e);return t?Rke(t):null})}textualSuggest(e,t,n,s){return Gg(this,void 0,void 0,function*(){const r=new qc(!0),o=new RegExp(n,s),a=new Set;e:for(let l of e){const c=this._getModel(l);if(c){for(let h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>Mf._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}})}computeWordRanges(e,t,n,s){return Gg(this,void 0,void 0,function*(){let r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){let c=r.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let u=a[h.word];u||(u=[],a[h.word]=u),u.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,s,r){return Gg(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return null;let a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;let h=o.getValueInRange(c);return KM.INSTANCE.navigateValueSet(t,l,c,h,n)})}loadForeignModule(e,t,n){let o={host:$xe(n,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(T5(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}Mf._diffLimit=1e5;Mf._suggestionsLimit=1e4;typeof importScripts=="function"&&(ni.monaco=fY());const gQ=bt("textResourceConfigurationService"),pQ=bt("textResourcePropertiesService");function Tr(i,e=0){return i[i.length-(1+e)]}function Pke(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function Al(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function W5(i,e,t){let n=0,s=i.length-1;for(;n<=s;){const r=(n+s)/2|0,o=t(i[r],e);if(o<0)n=r+1;else if(o>0)s=r-1;else return r}return-(n+1)}function mQ(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const s=Math.floor((t+n)/2);e(i[s])?n=s:t=s+1}return t}function ZM(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(let a of e){const l=t(a,n);l<0?s.push(a):l>0?r.push(a):o.push(a)}return i<s.length?ZM(i,s,t):i<s.length+o.length?o[0]:ZM(i-(s.length+o.length),r,t)}function X7(i,e){const t=[];let n;for(const s of i.slice(0).sort(e))!n||e(n[0],s)!==0?(n=[s],t.push(n)):n.push(s);return t}function vL(i){return i.filter(e=>!!e)}function _Q(i){return!Array.isArray(i)||i.length===0}function El(i){return Array.isArray(i)&&i.length>0}function Xx(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function Fke(i,e){const t=Bke(i,e);if(t!==-1)return i[t]}function Bke(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function YM(i,e){return i.length>0?i[0]:e}function z5(i){return[].concat(...i)}function os(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function qv(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function gE(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function Ry(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function bQ(i){return Array.isArray(i)?i:[i]}function Vke(i,e,t){const n=vQ(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function J7(i,e,t,n){const s=vQ(i,e),r=i.splice(s,t);return Vke(i,s,n),r}function vQ(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class Db{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}}const th=bt("logService");var aa;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(aa||(aa={}));const wQ=aa.Info;class Wke extends te{constructor(){super(...arguments),this.level=wQ,this._onDidChangeLogLevel=this._register(new z)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class zke extends Wke{constructor(e=wQ){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=aa.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=aa.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=aa.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=aa.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class Hke extends te{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}var Uke=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pE=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},QM=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const eV=60*1e3,tV=5*60*1e3;function Sp(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let XM=class extends te{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new jke(this._modelService)),this._logService=n,this._register(YY.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(s,r)=>Sp(this._modelService,s.uri)?this._workerManager.withWorker().then(o=>o.computeLinks(s.uri)).then(o=>o&&{links:o}):Promise.resolve({links:[]})})),this._register(na.register("*",new $ke(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}computeDiff(e,t,n,s){return this._workerManager.withWorker().then(r=>r.computeDiff(e,t,n,s))}computeMoreMinimalEdits(e,t){if(El(t)){if(!Sp(this._modelService,e))return Promise.resolve(t);const n=qc.create(!0),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([s,Pv(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Sp(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(s=>s.navigateValueSet(e,t,n))}canComputeWordRanges(e){return Sp(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};XM=Uke([pE(0,Ps),pE(1,gQ),pE(2,th)],XM);class $ke{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return QM(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const s=[];if(n.wordBasedSuggestionsMode==="currentDocument")Sp(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())Sp(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=Mi.getWordDefinition(e.getLanguageId()),o=e.getWordAtPosition(t),a=o?new F(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):F.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(h)return{duration:h.duration,suggestions:h.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}class jke extends te{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Nw).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(tV/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>tV&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new yQ(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}}class qke extends te{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let s=new Nw;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(eV/2)),this._register(s)}}dispose(){for(let e in this._syncedModels)lt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>eV&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let s=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new de;r.add(n.onDidChangeContent(o=>{this._proxy.acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(pt(()=>{this._proxy.acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],lt(t)}}class iV{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class mE{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class yQ extends te{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new pL(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new FDe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new mE(this)))}catch(e){UM(e),this._worker=new iV(new Mf(new mE(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(UM(e),this._worker=new iV(new Mf(new mE(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new qke(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return QM(this,void 0,void 0,function*(){return this._disposed?Promise.reject(E0()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computeDiff(e,t,n,s){return this._withSyncedResources([e,t],!0).then(r=>r.computeDiff(e.toString(),t.toString(),n,s))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return QM(this,void 0,void 0,function*(){const s=yield this._withSyncedResources(e),r=n.source,o=XA(n);return s.textualSuggest(e.map(a=>a.toString()),t,r,o)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let s=this._modelService.getModel(e);if(!s)return Promise.resolve(null);let r=Mi.getWordDefinition(s.getLanguageId()),o=r.source,a=XA(r);return n.computeWordRanges(e.toString(),t,o,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(s=>{let r=this._modelService.getModel(e);if(!r)return null;let o=Mi.getWordDefinition(r.getLanguageId()),a=o.source,l=XA(o);return s.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}function Gke(i,e){return new Kke(i,e)}class Kke extends yQ{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?T5(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)};let o={};for(const a of n)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}class wn{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=wn.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new wn(s,e,t)}equals(e){return e instanceof wn?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Pr.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Pr.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Pr.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Pr.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Pr.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return wn.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new H5(this,e,t,n)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new wn(new Uint32Array(r),s,this._languageIdCodec)}}wn.defaultTokenMetadata=(0<<11|1<<14|2<<23)>>>0;class H5{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}equals(e){return e instanceof H5?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class yr{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!yr._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,r=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new yr(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,n,s){if(e.length===0)return[];let r=[],o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(c.type===0||c.type===3))continue;const u=h.startLineNumber===t?h.startColumn:n,d=h.endLineNumber===t?h.endColumn:s;r[o++]=new yr(u,d,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=yr._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class nV{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class Jx{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new nV(t,this.stopOffsets[s],this.classNames.join(" "),Jx._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new nV(t,e-1,this.classNames.join(" "),Jx._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class Zke{static normalize(e,t){if(t.length===0)return[];let n=[];const s=new Jx;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,h=l.endColumn;const u=l.className,d=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);vn(p)&&c--}if(h>1){const p=e.charCodeAt(h-2);vn(p)&&h--}const f=c-1,g=h-2;r=s.consumeLowerThan(f,r,n),s.count===0&&(r=f),s.insert(g,u,d)}return s.consumeLowerThan(1073741824,r,n),n}}class un{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Yke{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class hg{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(yr.compare),this.tabSize=h,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=p,this.renderWhitespace=m==="all"?4:m==="boundary"?1:m==="selection"?2:m==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=b,this.selectionsOnLine=w&&w.sort((L,S)=>L.startOffset<S.startOffset?-1:1);const y=Math.abs(g-d),x=Math.abs(f-d);y<x?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&yr.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class U5{constructor(e,t){this.partIndex=e,this.charIndex=t}}class nl{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,s){const r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._absoluteOffsets[e-1]=s+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=nl.getPartIndex(t),s=nl.getCharIndex(t);return new U5(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let s=(e<<16|n<<0)>>>0,r=0,o=this.length-1;for(;r+1<o;){let p=r+o>>>1,m=this._data[p];if(m===s)return p;m>s?o=p:r=p}if(r===o)return r;let a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;let c=nl.getPartIndex(a),h=nl.getCharIndex(a),u=nl.getPartIndex(l),d;c!==u?d=t:d=nl.getCharIndex(l);let f=n-h,g=d-n;return f<=g?r:o}}class JM{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function wL(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,s=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(o.className),e.appendASCIIString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,n++));e.appendASCIIString("</span>");const r=new nl(1,t+n);return r.setColumnInfo(1,t,0,0),new JM(r,!1,s)}return e.appendASCIIString("<span><span></span></span>"),new JM(new nl(0,0),!1,0)}return rLe(Jke(i),e)}class Qke{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}}function yL(i){let e=Nf(1e4),t=wL(i,e);return new Qke(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Xke{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=h,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=p}}function Jke(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let s=eLe(i.lineTokens,i.fauxIndentLength,n);(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(s=nLe(i,e,n,s));let r=0;if(i.lineDecorations.length>0){for(let o=0,a=i.lineDecorations.length;o<a;o++){const l=i.lineDecorations[o];l.type===3||l.type===1?r|=1:l.type===2&&(r|=2)}s=sLe(e,n,s,i.lineDecorations)}return i.containsRTL||(s=tLe(e,s,!i.isBasicASCII||i.fontLigatures)),i.renderControlCharacters&&!i.isBasicASCII&&(s=iLe(e,s)),new Xke(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,s,r,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function eLe(i,e,t){let n=[],s=0;e>0&&(n[s++]=new un(e,"",0));for(let r=0,o=i.getCount();r<o;r++){const a=i.getEndOffset(r);if(a<=e)continue;const l=i.getClassName(r);if(a>=t){n[s++]=new un(t,l,0);break}n[s++]=new un(a,l,0)}return n}function tLe(i,e,t){let n=0,s=[],r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const h=l.type,u=l.metadata;let d=-1,f=n;for(let g=n;g<c;g++)i.charCodeAt(g)===32&&(d=g),d!==-1&&g-f>=50&&(s[r++]=new un(d+1,h,u),f=d+1,d=-1);f!==c&&(s[r++]=new un(c,h,u))}else s[r++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;let h=c-n;if(h>50){const u=l.type,d=l.metadata,f=Math.ceil(h/50);for(let g=1;g<f;g++){let p=n+g*50;s[r++]=new un(p,u,d)}s[r++]=new un(c,u,d)}else s[r++]=l;n=c}return s}function CQ(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function iLe(i,e){let t=[],n=new un(0,"",0),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=i.charCodeAt(s);CQ(a)&&(s>n.endIndex&&(n=new un(s,r.type,r.metadata),t.push(n)),n=new un(s+1,"mtkcontrol",r.metadata),t.push(n))}s>n.endIndex&&(n=new un(o,r.type,r.metadata),t.push(n))}return t}function nLe(i,e,t,n){const s=i.continuesWithWrappedLine,r=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,h=i.renderWhitespace===1,u=i.renderWhitespace===3,d=i.renderSpaceWidth!==i.spaceWidth;let f=[],g=0,p=0,m=n[p].type,v=n[p].endIndex;const b=n.length;let w=!1,y=Xs(e),x;y===-1?(w=!0,y=t,x=t):x=N0(e);let L=!1,S=0,k=c&&c[S],D=a%o;for(let N=r;N<t;N++){const $=e.charCodeAt(N);k&&N>=k.endOffset&&(S++,k=c&&c[S]);let U;if(N<y||N>x)U=!0;else if($===9)U=!0;else if($===32)if(h)if(L)U=!0;else{const ee=N+1<t?e.charCodeAt(N+1):0;U=ee===32||ee===9}else U=!0;else U=!1;if(U&&c&&(U=!!k&&k.startOffset<=N&&k.endOffset>N),U&&u&&(U=w||N>x),L){if(!U||!l&&D>=o){if(d){const ee=g>0?f[g-1].endIndex:r;for(let he=ee+1;he<=N;he++)f[g++]=new un(he,"mtkw",1)}else f[g++]=new un(N,"mtkw",1);D=D%o}}else(N===v||U&&N>r)&&(f[g++]=new un(N,m,0),D=D%o);for($===9?D=o:ha($)?D+=2:D++,L=U;N===v&&(p++,p<b);)m=n[p].type,v=n[p].endIndex}let T=!1;if(L)if(s&&h){let N=t>0?e.charCodeAt(t-1):0,$=t>1?e.charCodeAt(t-2):0;N===32&&$!==32&&$!==9||(T=!0)}else T=!0;if(T)if(d){const N=g>0?f[g-1].endIndex:r;for(let $=N+1;$<=t;$++)f[g++]=new un($,"mtkw",1)}else f[g++]=new un(t,"mtkw",1);else f[g++]=new un(t,m,0);return f}function sLe(i,e,t,n){n.sort(yr.compare);const s=Zke.normalize(i,n),r=s.length;let o=0,a=[],l=0,c=0;for(let u=0,d=t.length;u<d;u++){const f=t[u],g=f.endIndex,p=f.type,m=f.metadata;for(;o<r&&s[o].startOffset<g;){const v=s[o];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new un(c,p,m)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new un(c,p+" "+v.className,m|v.metadata),o++;else{c=g,a[l++]=new un(c,p+" "+v.className,m|v.metadata);break}}g>c&&(c=g,a[l++]=new un(c,p,m))}const h=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===h)for(;o<r&&s[o].startOffset===h;){const u=s[o];a[l++]=new un(c,u.className,u.metadata),o++}return a}function rLe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,r=i.lineContent,o=i.len,a=i.isOverflowing,l=i.parts,c=i.fauxIndentLength,h=i.tabSize,u=i.startVisibleColumn,d=i.containsRTL,f=i.spaceWidth,g=i.renderSpaceCharCode,p=i.renderWhitespace,m=i.renderControlCharacters,v=new nl(o+1,l.length);let b=!1,w=0,y=u,x=0,L=0,S=0,k=0;d?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let D=0,T=l.length;D<T;D++){k+=S;const N=l[D],$=N.endIndex,U=N.type,ee=p!==0&&N.isWhitespace(),he=ee&&!t&&(U==="mtkw"||!s),fe=w===$&&N.isPseudoAfter();if(x=0,e.appendASCIIString('<span class="'),e.appendASCIIString(he?"mtkz":U),e.appendASCII(34),ee){let Ce=0;{let Se=w,me=y;for(;Se<$;Se++){const ze=(r.charCodeAt(Se)===9?h-me%h:1)|0;Ce+=ze,Se>=c&&(me+=ze)}}for(he&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(f*Ce)),e.appendASCIIString('px"')),e.appendASCII(62);w<$;w++){v.setColumnInfo(w+1,D-L,x,k),L=0;const Se=r.charCodeAt(w);let me;if(Se===9){me=h-y%h|0,!n||me>1?e.write1(8594):e.write1(65515);for(let kt=2;kt<=me;kt++)e.write1(160)}else me=1,e.write1(g);x+=me,w>=c&&(y+=me)}S=Ce}else{let Ce=0;for(e.appendASCII(62);w<$;w++){v.setColumnInfo(w+1,D-L,x,k),L=0;const Se=r.charCodeAt(w);let me=1,kt=1;switch(Se){case 9:me=h-y%h,kt=me;for(let ze=1;ze<=me;ze++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:m?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:ha(Se)&&kt++,m&&Se<32?e.write1(9216+Se):m&&Se===127?e.write1(9249):m&&CQ(Se)?(e.appendASCIIString("[U+"),e.appendASCIIString(oLe(Se)),e.appendASCIIString("]"),me=8):e.write1(Se)}x+=me,Ce+=me,w>=c&&(y+=kt)}S=Ce}fe?L++:L=0,w>=o&&!b&&N.isPseudoAfter()&&(b=!0,v.setColumnInfo(w+1,D,x,k)),e.appendASCIIString("</span>")}return b||v.setColumnInfo(o+1,l.length-1,x,k),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new JM(v,d,s)}function oLe(i){return i.toString(16).toUpperCase().padStart(4,"0")}class sV{constructor(e,t,n,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class aLe{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e,t){const n=this.outputLineIndex>0?t:0;return new q(e+this.outputLineIndex,n+this.outputOffset+1)}}class kb{constructor(e,t,n,s,r){this.breakOffsets=e,this.breakOffsetsVisibleColumn=t,this.wrappedTextIndentLength=n,this.injectionOffsets=s,this.injectionOptions=r}getInputOffsetOfOutputPosition(e,t){let n=0;if(e===0?n=t:n=this.breakOffsets[e-1]+t,this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&n>this.injectionOffsets[s];s++)n<this.injectionOffsets[s]+this.injectionOptions[s].content.length?n=this.injectionOffsets[s]:n-=this.injectionOptions[s].content.length;return n}getOutputPositionOfInputOffset(e,t=2){let n=0;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return e+=n,this.getOutputPositionOfOffsetInUnwrappedLine(e,t)}getOutputPositionOfOffsetInUnwrappedLine(e,t=2){let n=0,s=this.breakOffsets.length-1,r=0,o=0;for(;n<=s;){r=n+(s-n)/2|0;const a=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>a)n=r+1;else break;else if(e<o)s=r-1;else if(e>=a)n=r+1;else break}return new aLe(r,e-o)}outputPositionToOffsetInUnwrappedLine(e,t){let n=(e>0?this.breakOffsets[e-1]:0)+t;return e>0&&(n-=this.wrappedTextIndentLength),n}normalizeOffsetAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInUnwrappedLine+n.length?n.offsetInUnwrappedLine+n.length:n.offsetInUnwrappedLine;if(t===1){let o=n.offsetInUnwrappedLine+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)o+=this.injectionOptions[a+1].content.length,a++;return o}let s=n.offsetInUnwrappedLine,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r++;return s}getInjectedText(e,t){const n=this.outputPositionToOffsetInUnwrappedLine(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=n[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInUnwrappedLine:a,length:o};s+=o}}}}class lLe{constructor(e,t){this.tabSize=e,this.data=t}}class $5{constructor(e,t,n,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Dr{constructor(e,t,n,s,r,o,a,l,c,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=Dr.isBasicASCII(n,o),this.containsRTL=Dr.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?L5(e):!0}static containsRTL(e,t,n){return!t&&n?hL(e):!1}}class Lb{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class cLe{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new Lb(new F(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class SQ{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class xQ{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}function hLe(i){return Array.isArray(i)}function uLe(i){return!hLe(i)}function DQ(i){return typeof i=="string"}function rV(i){return!DQ(i)}function lp(i){return!i}function eu(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function oV(i){return i.replace(/[&<>'"_]/g,"-")}function dLe(i,e){console.log(`${i.languageId}: ${e}`)}function Bt(i,e){return new Error(`${i.languageId}: ${e}`)}function Ph(i,e,t,n,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,h,u,d,f,g,p){return lp(c)?lp(h)?!lp(u)&&u<n.length?eu(i,n[u]):!lp(f)&&i&&typeof i[f]=="string"?i[f]:(o===null&&(o=s.split("."),o.unshift(s)),!lp(d)&&d<o.length?eu(i,o[d]):""):eu(i,t):"$"})}function Oy(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function fLe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}const kQ=5;class Gv{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Zp(e,t);let n=Zp.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let s=this._entries[n];return s||(s=new Zp(e,t),this._entries[n]=s,s)}}Gv._INSTANCE=new Gv(kQ);class Zp{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Zp._equals(this,e)}push(e){return Gv.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Gv.create(this.parent,e)}}class Ab{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Ab(this.languageId,this.state)}}class Fh{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Eb(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Eb(e,t);let n=Zp.getStackElementId(e),s=this._entries[n];return s||(s=new Eb(e,null),this._entries[n]=s,s)}}Fh._INSTANCE=new Fh(kQ);class Eb{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Fh.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof Eb)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class gLe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new oL(e,t,this._languageId)))}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Li.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize(e,t,o,s);return this._tokens=this._tokens.concat(l.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new m5(this._tokens,e)}}class eD{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let s=e!==null?e.length:0,r=t.length,o=n!==null?n.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return n;if(r===0&&o===0)return e;let a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return n!==null&&a.set(n,s+r),a}nestedModeTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=Li.get(r);if(!a)return this.enterMode(s,r),this.emit(s,""),o;let l=a.tokenize2(e,t,o,s);return this._prependTokens=eD._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new aL(eD._merge(this._prependTokens,this._tokens,null),e)}}class CL{constructor(e,t,n,s){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=Li.onDidChange(o=>{if(r)return;let a=!1;for(let l=0,c=o.changedLanguages.length;l<c;l++){let h=o.changedLanguages[l];if(this._embeddedModes[h]){a=!0;break}}a&&(r=!0,Li.fire([this._languageId]),r=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Li.get(t);if(n){if(n instanceof CL){const r=n.getLoadStatus();r.loaded===!1&&e.push(r.promise)}continue}const s=Li.getPromise(t);s&&e.push(s)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=Gv.create(null,this._lexer.start);return Fh.create(e,null)}tokenize(e,t,n,s){let r=new gLe,o=this._tokenize(e,t,n,s,r);return r.finalize(o)}tokenize2(e,t,n,s){let r=new eD(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,s,r);return r.finalize(o)}_tokenize(e,t,n,s,r){return n.embeddedModeData?this._nestedTokenize(e,t,n,s,r):this._myTokenize(e,t,n,s,r)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=Oy(this._lexer,t.stack.state),!n))throw Bt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of n){if(!rV(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.regex,l=o.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}let c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw Bt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,n,s,r){let o=this._findLeavingNestedModeOffset(e,n);if(o===-1){let c=r.nestedModeTokenize(e,t,n.embeddedModeData,s);return Fh.create(n.stack,new Ab(n.embeddedModeData.languageId,c))}let a=e.substring(0,o);a.length>0&&r.nestedModeTokenize(a,!1,n.embeddedModeData,s);let l=e.substring(o);return this._myTokenize(l,t,n,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,s,r){r.enterMode(s,this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedModeData,h=n.stack,u=0,d=null,f=!0;for(;f||u<l;){const g=u,p=h.depth,m=d?d.groups.length:0,v=h.state;let b=null,w=null,y=null,x=null,L=null;if(d){b=d.matches;const D=d.groups.shift();w=D.matched,y=D.action,x=d.rule,d.groups.length===0&&(d=null)}else{if(!f&&u>=l)break;f=!1;let D=this._lexer.tokenizer[v];if(!D&&(D=Oy(this._lexer,v),!D))throw Bt(this._lexer,"tokenizer state is not defined: "+v);let T=a.substr(u);for(const N of D)if((u===0||!N.matchOnlyAtLineStart)&&(b=T.match(N.regex),b)){w=b[0],y=N.action;break}}if(b||(b=[""],w=""),y||(u<l&&(b=[a.charAt(u)],w=b[0]),y=this._lexer.defaultToken),w===null)break;for(u+=w.length;uLe(y)&&rV(y)&&y.test;)y=y.test(w,b,v,u===l);let S=null;if(typeof y=="string"||Array.isArray(y))S=y;else if(y.group)S=y.group;else if(y.token!==null&&y.token!==void 0){if(y.tokenSubst?S=Ph(this._lexer,y.token,w,b,v):S=y.token,y.nextEmbedded)if(y.nextEmbedded==="@pop"){if(!c)throw Bt(this._lexer,"cannot pop embedded mode if not inside one");c=null}else{if(c)throw Bt(this._lexer,"cannot enter embedded mode from within an embedded mode");L=Ph(this._lexer,y.nextEmbedded,w,b,v)}if(y.goBack&&(u=Math.max(0,u-y.goBack)),y.switchTo&&typeof y.switchTo=="string"){let D=Ph(this._lexer,y.switchTo,w,b,v);if(D[0]==="@"&&(D=D.substr(1)),Oy(this._lexer,D))h=h.switchTo(D);else throw Bt(this._lexer,"trying to switch to a state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}else{if(y.transform&&typeof y.transform=="function")throw Bt(this._lexer,"action.transform not supported");if(y.next)if(y.next==="@push"){if(h.depth>=this._lexer.maxStack)throw Bt(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(v)}else if(y.next==="@pop"){if(h.depth<=1)throw Bt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));h=h.pop()}else if(y.next==="@popall")h=h.popall();else{let D=Ph(this._lexer,y.next,w,b,v);if(D[0]==="@"&&(D=D.substr(1)),Oy(this._lexer,D))h=h.push(D);else throw Bt(this._lexer,"trying to set a next state '"+D+"' that is undefined in rule: "+this._safeRuleName(x))}}y.log&&typeof y.log=="string"&&dLe(this._lexer,this._lexer.languageId+": "+Ph(this._lexer,y.log,w,b,v))}if(S===null)throw Bt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const k=D=>{let T=this._modeService.getModeIdForLanguageName(D);T&&(D=T);const N=this._getNestedEmbeddedModeData(D);if(u<l){const $=e.substr(u);return this._nestedTokenize($,t,Fh.create(h,N),s+u,r)}else return Fh.create(h,N)};if(Array.isArray(S)){if(d&&d.groups.length>0)throw Bt(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(b.length!==S.length+1)throw Bt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let D=0;for(let T=1;T<b.length;T++)D+=b[T].length;if(D!==w.length)throw Bt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));d={rule:x,matches:b,groups:[]};for(let T=0;T<S.length;T++)d.groups[T]={action:S[T],matched:b[T+1]};u-=w.length;continue}else{if(S==="@rematch"&&(u-=w.length,w="",b=null,S="",L!==null))return k(L);if(w.length===0){if(l===0||p!==h.depth||v!==h.state||(d?d.groups.length:0)!==m)continue;throw Bt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let D=null;if(DQ(S)&&S.indexOf("@brackets")===0){let T=S.substr(9),N=pLe(this._lexer,w);if(!N)throw Bt(this._lexer,"@brackets token returned but no bracket defined as: "+w);D=oV(N.token+T)}else{let T=S===""?"":S+this._lexer.tokenPostfix;D=oV(T)}g<o&&r.emit(g+s,D)}if(L!==null)return k(L)}return Fh.create(h,c)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Li.get(t);if(n)return new Ab(t,n.getInitialState())}return new Ab(t||Cu,gL)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function pLe(i,e){if(!e)return null;e=eu(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function mLe(i,e,t,n){return new CL(i,e,t,n)}var _E;const bE=(_E=window.trustedTypes)===null||_E===void 0?void 0:_E.createPolicy("standaloneColorizer",{createHTML:i=>i});class j5{static colorizeElement(e,t,n,s){s=s||{};let r=s.theme||"vs",o=s.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();e.setTheme(r);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;let l=c=>{var h;const u=(h=bE==null?void 0:bE.createHTML(c))!==null&&h!==void 0?h:c;n.innerHTML=u};return this.colorize(t,a||"",o,s).then(l,c=>console.error(c))}static colorize(e,t,n,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),A5(t)&&(t=t.substr(1));let a=Nl(t),l=e.getModeId(n);if(!l)return Promise.resolve(aV(a,o,r));e.triggerMode(l);const c=Li.get(l);if(c)return vE(a,o,c,r);const h=Li.getPromise(l);return h?new Promise((u,d)=>{h.then(f=>{vE(a,o,f,r).then(u,d)},d)}):new Promise((u,d)=>{let f=null,g=null;const p=()=>{f&&(f.dispose(),f=null),g&&(g.dispose(),g=null);const m=Li.get(l);if(m){vE(a,o,m,r).then(u,d);return}u(aV(a,o,r))};g=new Os,g.cancelAndSet(p,500),f=Li.onDidChange(m=>{m.changedLanguages.indexOf(l)>=0&&p()})})}static colorizeLine(e,t,n,s,r=4){const o=Dr.isBasicASCII(e,t),a=Dr.containsRTL(e,o,n);return yL(new hg(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let s=e.getLineContent(t);e.forceTokenization(t);let o=e.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function vE(i,e,t,n){return new Promise((s,r)=>{const o=()=>{const a=_Le(i,e,t,n);if(t instanceof CL){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function aV(i,e,t){let n=[];const r=new Uint32Array(2);r[0]=0,r[1]=16793600;for(let o=0,a=i.length;o<a;o++){let l=i[o];r[0]=l.length;const c=new wn(r,l,t),h=Dr.isBasicASCII(l,!0),u=Dr.containsRTL(l,h,!0);let d=yL(new hg(!1,!0,l,!1,h,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(d.html),n.push("<br/>")}return n.join("")}function _Le(i,e,t,n){let s=[],r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){let l=i[o],c=t.tokenize2(l,!0,r,0);wn.convertToEndOffset(c.tokens,l.length);let h=new wn(c.tokens,l,n);const u=Dr.isBasicASCII(l,!0),d=Dr.containsRTL(l,u,!0);let f=yL(new hg(!1,!0,l,!1,u,d,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var Kv;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(Kv||(Kv={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?U_(e,l)?i.Error:U_(t,l)||U_(n,l)?i.Warning:U_(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(Kv||(Kv={}));const Ci=Kv;function q5(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===dL.ICodeEditor:!1}const LQ=bt("IWorkspaceEditService");function bLe(i){return ks(i)&&(!!i.newUri||!!i.oldUri)}function vLe(i){return ks(i)&&We.isUri(i.resource)&&ks(i.edit)}class G5{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(vLe(t))return new AQ(t.resource,t.edit,t.modelVersionId,t.metadata);if(bLe(t))return new wLe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class AQ extends G5{constructor(e,t,n,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class wLe extends G5{constructor(e,t,n,s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const yLe=Object.prototype.hasOwnProperty;function CLe(i,e){for(let t in i)if(yLe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class SLe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const lV=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new z,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},EQ=Object.hasOwnProperty;class xLe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class DLe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class _c{static readOptions(e){const t=e,n=new DLe;for(const s of vp){const r=s.name==="_never_"?void 0:t[s.name];n._write(s.id,r)}return n}static validateOptions(e){const t=new yCe;for(const n of vp)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new xLe;for(const s of vp)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Al(e,t):!1;for(let n in e)if(!_c._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const r of vp){const o=!_c._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=o,o&&(s=!0)}return s?new tY(n):null}}function kLe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const r=i.renderWhitespace;r===!0?i.renderWhitespace="boundary":r===!1&&(i.renderWhitespace="none");const o=i.renderLineHighlight;o===!0?i.renderLineHighlight="line":o===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const l=i.tabCompletion;l===!1?i.tabCompletion="off":l===!0&&(i.tabCompletion="onlySnippets");const c=i.suggest;if(c&&typeof c.filteredTypes=="object"&&c.filteredTypes){const m={};m.method="showMethods",m.function="showFunctions",m.constructor="showConstructors",m.deprecated="showDeprecated",m.field="showFields",m.variable="showVariables",m.class="showClasses",m.struct="showStructs",m.interface="showInterfaces",m.module="showModules",m.property="showProperties",m.event="showEvents",m.operator="showOperators",m.unit="showUnits",m.value="showValues",m.constant="showConstants",m.enum="showEnums",m.enumMember="showEnumMembers",m.keyword="showKeywords",m.text="showWords",m.color="showColors",m.file="showFiles",m.reference="showReferences",m.folder="showFolders",m.typeParameter="showTypeParameters",m.snippet="showSnippets",CLe(m,v=>{const b=c.filteredTypes[v.key];b===!1&&(c[v.value]=b)})}const h=i.hover;h===!0?i.hover={enabled:!0}:h===!1&&(i.hover={enabled:!1});const u=i.parameterHints;u===!0?i.parameterHints={enabled:!0}:u===!1&&(i.parameterHints={enabled:!1});const d=i.autoIndent;d===!0?i.autoIndent="full":d===!1&&(i.autoIndent="advanced");const f=i.matchBrackets;f===!0?i.matchBrackets="always":f===!1&&(i.matchBrackets="never");const{renderIndentGuides:g,highlightActiveIndentGuide:p}=i;i.guides||(i.guides={}),g!==void 0&&(i.guides.indentation=!!g),p!==void 0&&(i.guides.highlightActiveIndentation=!!p)}function cV(i){const e=Rh(i);return kLe(e),e}class tD extends te{constructor(e,t){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new z),this.onDidChangeFast=this._onDidChangeFast.event,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new iY,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=cV(t),this._readOptions=_c.readOptions(this._rawOptions),this._validatedOptions=_c.validateOptions(this._readOptions),this._register(zx.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(lV.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=_c.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Xd.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:lV.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return _c.computeOptions(this._validatedOptions,n)}static _subsetEquals(e,t){for(const n in t)if(EQ.call(t,n)){const s=t[n],r=e[n];if(r===s)continue;if(Array.isArray(r)&&Array.isArray(s)){if(!Al(r,s))return!1;continue}if(r&&typeof r=="object"&&s&&typeof s=="object"){if(!this._subsetEquals(r,s))return!1;continue}return!1}return!0}updateOptions(e){if(typeof e>"u")return;const t=cV(e);tD._subsetEquals(this._rawOptions,t)||(this._rawOptions=Oa(this._rawOptions,t||{}),this._readOptions=_c.readOptions(this._rawOptions),this._validatedOptions=_c.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=tD._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}}const LLe=Object.freeze({id:"editor",order:5,type:"object",title:_("editorConfigurationTitle","Editor"),scope:5}),ALe=En.as(M0.Configuration),iD=Object.assign(Object.assign({},LLe),{properties:{"editor.tabSize":{type:"number",default:Yn.tabSize,minimum:1,markdownDescription:_("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Yn.insertSpaces,markdownDescription:_("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Yn.detectIndentation,markdownDescription:_("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Yn.trimAutoWhitespace,description:_("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Yn.largeFileOptimizations,description:_("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:_("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[_("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),_("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),_("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:_("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[_("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),_("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),_("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:_("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:_("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:_("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:_("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:_("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:_("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:_("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:_("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:_("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:_("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:_("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:_("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:_("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[_("wordWrap.off","Lines will never wrap."),_("wordWrap.on","Lines will wrap at the viewport width."),_("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function ELe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of vp){const e=i.schema;if(typeof e<"u")if(ELe(e))iD.properties[`editor.${i.name}`]=e;else for(let t in e)EQ.call(e,t)&&(iD.properties[t]=e[t])}let Py=null;function IQ(){return Py===null&&(Py=Object.create(null),Object.keys(iD.properties).forEach(i=>{Py[i]=!0})),Py}function ILe(i){return IQ()[`editor.${i}`]||!1}function TLe(i){return IQ()[`diffEditor.${i}`]||!1}ALe.registerConfiguration(iD);class Om{static insert(e,t){return{range:new F(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Rr{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?fke(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Rh(this.contents),n=Rh(this.overrides),s=[...this.keys];for(const r of e){this.mergeContents(t,r.contents);for(const o of r.overrides){const[a]=n.filter(l=>Al(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):n.push(Rh(o))}for(const o of r.keys)s.indexOf(o)===-1&&s.push(o)}return new Rr(t,s,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const s of Xx([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s],o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=Rh(r),this.mergeContents(r,o)):r=o),n[s]=r}return new Rr(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&ks(e[n])&&ks(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Rh(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Gxe(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),V5(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&dke(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class NLe extends Rr{constructor(){const e=pke(),t=gke(),n=[];for(const s of Object.keys(e))B5.test(s)&&n.push({identifiers:[cke(s).trim()],keys:Object.keys(e[s]),contents:lQ(e[s],r=>console.error(`Conflict in default settings file: ${r}`))});super(e,t,n)}}let TQ=class NQ{constructor(e,t,n=new Rr,s=new Rr,r=new as,o=new Rr,a=new as,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=s,this._folderConfigurations=r,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new as,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=new Rr,this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),s=this.parseConfigurationModel(e.workspace),r=e.folders.reduce((o,a)=>(o.set(We.revive(a[0]),this.parseConfigurationModel(a[1])),o),new as);return new NQ(t,n,new Rr,s,r,new Rr,new as,!1)}static parseConfigurationModel(e){return new Rr(e.contents,e.keys,e.overrides).freeze()}};class MLe{constructor(e,t,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this._previousConfiguration=void 0;const r=new Set;e.keys.forEach(a=>r.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>r.add(l))),this.affectedKeys=[...r.values()];const o=new Rr;this.affectedKeys.forEach(a=>o.setValue(a,{})),this.affectedKeysTree=o.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=TQ.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const s=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,r=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!ua(s,r)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=lQ({[t]:!0},()=>{}),s;for(;typeof n=="object"&&(s=Object.keys(n)[0]);){if(e=e[s],!e)return!1;n=n[s]}return!0}}const RLe=/^(cursor|delete)/;class OLe extends te{constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new z),this._currentChord=null,this._currentChordChecker=new Nw,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=xp.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Os,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Le.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[s]=n.getDispatchParts();if(s===null)return null;const r=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(r,o,s)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(_("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchParts();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=xp.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=xp.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getParts();return this._ignoreSingleModifiers=new xp(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let r=null,o=null;if(n){const[h]=e.getSingleModifierDispatchParts();r=h,o=h}else[r]=e.getDispatchParts(),o=this._currentChord?this._currentChord.keypress:null;if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);return this._logService.trace("KeybindingService#dispatch",l,c==null?void 0:c.commandId),c&&c.enterChord?(s=!0,this._enterChordMode(r,l),s):(this._currentChord&&(!c||!c.commandId)&&(this._notificationService.status(_("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),s=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(s=!0),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h)),RLe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding"})),s)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class xp{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}xp.EMPTY=new xp(null);let SL=_Ce||"";const Bn=new Map;Bn.set("false",!1);Bn.set("true",!0);Bn.set("isMac",ut);Bn.set("isLinux",Is);Bn.set("isWindows",Fn);Bn.set("isWeb",Ew);Bn.set("isMacNative",ut&&!Ew);Bn.set("isEdge",SL.indexOf("Edg/")>=0);Bn.set("isFirefox",SL.indexOf("Firefox")>=0);Bn.set("isChrome",SL.indexOf("Chrome")>=0);Bn.set("isSafari",SL.indexOf("Safari")>=0);const PLe=Object.prototype.hasOwnProperty;class xe{static has(e){return Su.create(e)}static equals(e,t){return Pm.create(e,t)}static regex(e,t){return nD.create(e,t)}static not(e){return Rf.create(e)}static and(...e){return jh.create(e,null)}static or(...e){return Oc.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Oc.create(n.map(s=>this._deserializeAndExpression(s,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return jh.create(n.map(s=>this._deserializeOne(s,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return xL.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return Pm.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return nD.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return K5.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return LL.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return kL.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return EL.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return AL.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Rf.create(e.substr(1).trim()):Su.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(IY(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),s=e.lastIndexOf("/");if(n===s||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let r=e.slice(n+1,s),o=e[s+1]==="i"?"i":"";try{return new RegExp(r,o)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function FLe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function Yp(i,e){return i.cmp(e)}class kr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Kr.INSTANCE}}kr.INSTANCE=new kr;class Kr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return kr.INSTANCE}}Kr.INSTANCE=new Kr;class Su{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Bn.get(e);return typeof n=="boolean"?n?Kr.INSTANCE:kr.INSTANCE:new Su(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:RQ(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Bn.get(this.key);return typeof e=="boolean"?e?Kr.INSTANCE:kr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Rf.create(this.key,this)),this.negated}}class Pm{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?Su.create(e,n):Rf.create(e,n);const s=Bn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Kr.INSTANCE:kr.INSTANCE:new Pm(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Bn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Kr.INSTANCE:kr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xL.create(this.key,this.value,this)),this.negated}}class K5{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new K5(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?PLe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Z5.create(this)),this.negated}}class Z5{constructor(e){this._actual=e,this.type=11}static create(e){return new Z5(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class xL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Rf.create(e,n):Su.create(e,n);const s=Bn.get(e);return typeof s=="boolean"?t===(s?"true":"false")?kr.INSTANCE:Kr.INSTANCE:new xL(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Bn.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?kr.INSTANCE:Kr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Pm.create(this.key,this.value,this)),this.negated}}class Rf{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Bn.get(e);return typeof n=="boolean"?n?kr.INSTANCE:Kr.INSTANCE:new Rf(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:RQ(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Bn.get(this.key);return typeof e=="boolean"?e?kr.INSTANCE:Kr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Su.create(this.key,this)),this.negated}}function DL(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):kr.INSTANCE}class kL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return DL(t,s=>new kL(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=EL.create(this.key,this.value,this)),this.negated}}class LL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return DL(t,s=>new LL(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=AL.create(this.key,this.value,this)),this.negated}}class AL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return DL(t,s=>new AL(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=LL.create(this.key,this.value,this)),this.negated}}class EL{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return DL(t,s=>new EL(e,s,n))}cmp(e){return e.type!==this.type?this.type-e.type:ug(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kL.create(this.key,this.value,this)),this.negated}}class nD{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new nD(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Y5.create(this)),this.negated}}class Y5{constructor(e){this._actual=e,this.type=8}static create(e){return new Y5(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function MQ(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class jh{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return jh._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=Yp(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=MQ(this.expr);return e===this.expr?this:jh.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return kr.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&s)return Kr.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(Yp);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){const r=n[n.length-1];if(r.type!==9)break;n.pop();const o=n.pop(),a=n.length===0,l=Oc.create(r.expr.map(c=>jh.create([c,o],null)),null,a);l&&(n.push(l),n.sort(Yp))}return n.length===1?n[0]:new jh(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Oc.create(e,this,!0)}return this.negated}}class Oc{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Oc._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=Yp(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=MQ(this.expr);return e===this.expr?this:Oc.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Kr.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return kr.INSTANCE;s.sort(Yp)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)OQ(s[o],s[a])&&(s.splice(a,1),a--);if(s.length===1)return s[0]}return new Oc(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const o of sD(t))for(const a of sD(n))s.push(jh.create([o,a],null));const r=e.length===0;e.unshift(Oc.create(s,null,r))}this.negated=e[0]}return this.negated}}class De extends Su{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?De._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&De._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return De._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Pm.create(this.key,e)}}De._info=[];const $e=bt("contextKeyService"),BLe="setContext";function RQ(i,e){return i<e?-1:i>e?1:0}function ug(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function OQ(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const s of e.expr)if(i.equals(s))return!0}const t=i.negate(),n=sD(t).concat(sD(e));n.sort(Yp);for(let s=0;s<n.length;s++){const o=n[s].negate();for(let a=s+1;a<n.length;a++){const l=n[a];if(o.equals(l))return!0}}return!1}function sD(i){return i.type===9?i.expr:[i]}class Qp{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s].command;o&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Qp.combine(e,t);for(let s=0,r=this._keybindings.length;s<r;s++){let o=this._keybindings[s];o.keypressParts.length!==0&&(o.when&&o.when.type===0||this._addKeyPress(o.keypressParts[0],o))}}static _isTargetedForRemoval(e,t,n,s,r){return!(e.command!==s||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||r&&(!e.when||!FLe(r,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const s of t){if(!s.command||s.command.length===0||s.command.charAt(0)!=="-"){n.push(s);continue}const r=s.command.substr(1),o=s.keypressParts[0],a=s.keypressParts[1],l=s.when;for(let c=e.length-1;c>=0;c--)this._isTargetedForRemoval(e[c],o,a,r,l)&&e.splice(c,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){let r=n[s];if(r.command===t.command)continue;const o=r.keypressParts.length>1,a=t.keypressParts.length>1;o&&a&&r.keypressParts[1]!==t.keypressParts[1]||Qp.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:OQ(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const r=n[s];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let s=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a];c.keypressParts[1]===n&&s.push(c)}}else{const o=this._map.get(n);if(typeof o>"u")return this._log("\\ No keybinding entries."),null;s=o}let r=this._findCommand(e,s);return r?t===null&&r.keypressParts.length>1&&r.keypressParts[1]!==null?(this._log(`\\ From ${s.length} keybinding entries, matched chord, when: ${hV(r.when)}, source: ${uV(r)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${s.length} keybinding entries, matched ${r.command}, when: ${hV(r.when)}, source: ${uV(r)}.`),{enterChord:!1,leaveChord:r.keypressParts.length>1,commandId:r.command,commandArgs:r.commandArgs,bubble:r.bubble}):(this._log(`\\ From ${s.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let s=t[n];if(Qp.contextMatchesRules(e,s.when))return s}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function hV(i){return i?`${i.serialize()}`:"no when condition"}function uV(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class rD{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(bo===1){if(e&&e.win)return e.win}else if(bo===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=rD.bindToCurrentPlatform(e);if(t&&t.primary){const n=wM(t.primary,bo);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const r=t.secondary[n],o=wM(r,bo);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Nt.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&rD._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,s,r,o){bo===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(WLe)),this._cachedMergedKeybindings.slice(0)}}const gs=new rD,VLe={EditorModes:"platform.keybindingsRegistry"};En.add(VLe.EditorModes,gs);function WLe(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}class dV{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?e4(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=e4(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function e4(i){let e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return e;e.push(s)}return e}class Q5{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=ULe(a,l,this.modifierLabels[e])}return s.join(" ")}}const X5=new Q5({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:_({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),zLe=new Q5({ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:_({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:_({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:_({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:_({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),HLe=new Q5({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function ULe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class $Le extends MSe{constructor(e,t){if(super(),t.length===0)throw Sl("parts");this._os=e,this._parts=t}getLabel(){return X5.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return zLe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:HLe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new NSe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class Zv extends $Le{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Od.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Od.toString(e.keyCode)}_getElectronAccelerator(e){return Od.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return Zv.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Od.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=g5[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof If)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new If(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=e4(e.map(s=>this._resolveSimpleUserBinding(s)));return n.length>0?[new Zv(new Px(n),t)]:[]}}const zn=bt("notificationService");class jLe{}const PQ=bt("contextService");class qLe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var fV;(function(i){i.noSelection=_("noSelection","No selection"),i.singleSelectionRange=_("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=_("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=_("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=_("multiSelection","{0} selections"),i.emergencyConfOn=_("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=_("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=_("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=_("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=_("readonlyEditor"," in a read-only code editor"),i.editableEditor=_("editableEditor"," in a code editor"),i.changeConfigToOnMac=_("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=_("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=_("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=_("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=_("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=_("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=_("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=_("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=_("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=_("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=_("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=_("showAccessibilityHelpAction","Show Accessibility Help")})(fV||(fV={}));var gV;(function(i){i.inspectTokensAction=_("inspectTokens","Developer: Inspect Tokens")})(gV||(gV={}));var pV;(function(i){i.gotoLineActionLabel=_("gotoLineActionLabel","Go to Line/Column...")})(pV||(pV={}));var mV;(function(i){i.helpQuickAccessActionLabel=_("helpQuickAccess","Show all Quick Access Providers")})(mV||(mV={}));var _V;(function(i){i.quickCommandActionLabel=_("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=_("quickCommandActionHelp","Show And Run Commands")})(_V||(_V={}));var bV;(function(i){i.quickOutlineActionLabel=_("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=_("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(bV||(bV={}));var oD;(function(i){i.editorViewAccessibleLabel=_("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=_("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(oD||(oD={}));var vV;(function(i){i.toggleHighContrast=_("toggleHighContrast","Toggle High Contrast Theme")})(vV||(vV={}));var t4;(function(i){i.bulkEditServiceSummary=_("bulkEditServiceSummary","Made {0} edits in {1} files")})(t4||(t4={}));var FQ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},BQ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},VQ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class GLe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new z}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function KLe(i,e,t){return q5(i)?e(i):t(i)}let i4=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=KLe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new aSe(new GLe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};i4=FQ([BQ(0,Ps)],i4);class IL{show(){return IL.NULL_PROGRESS_RUNNER}showWhile(e,t){return VQ(this,void 0,void 0,function*(){yield e})}}IL.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class ZLe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,s){return Promise.resolve({choice:0})}}class TL{info(e){return this.notify({severity:Ci.Info,message:e})}warn(e){return this.notify({severity:Ci.Warning,message:e})}error(e){return this.notify({severity:Ci.Error,message:e})}notify(e){switch(e.severity){case Ci.Error:console.error(e.message);break;case Ci.Warning:console.warn(e.message);break;default:console.log(e.message);break}return TL.NO_OP}status(e,t){return te.None}}TL.NO_OP=new jLe;class YLe{constructor(e){this._onWillExecuteCommand=new z,this._onDidExecuteCommand=new z,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Nt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}}class WQ extends OLe{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(ne(o,Ae.KEY_DOWN,a=>{const l=new ui(a);this._dispatch(l,l.target)&&(l.preventDefault(),l.stopPropagation())})),this._register(ne(window,Ae.KEY_UP,a=>{const l=new ui(a);this._singleModifierDispatch(l,l.target)&&l.preventDefault()}))}addDynamicKeybinding(e,t,n,s){const r=wM(t,bo),o=new de;return r&&(this._dynamicKeybindings.push({keybinding:r.parts,command:e,when:s,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),o.add(pt(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),o.add(Nt.registerCommand(e,n)),this.updateResolver({source:1}),o}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(gs.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Qp(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new dV(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=Zv.resolveUserBinding(a,bo);for(const c of l)n[s++]=new dV(c,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new If(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new Zv(t,bo)}}function wV(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof We)}class zQ{constructor(){this._onDidChangeConfiguration=new z,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new TQ(new NLe,new Rr)}getValue(e,t){const n=typeof e=="string"?e:void 0,s=wV(e)?e:wV(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new MLe({keys:n,overrides:[]},t,this._configuration);s.source=7,s.sourceConfig=null,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}}class QLe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new z,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,s)=>t.affectsConfiguration(s)})})}getValue(e,t,n){const r=(q.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof r>"u"?this.configurationService.getValue():this.configurationService.getValue(r)}}let n4=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Is||ut?`
`:`\r
`}};n4=FQ([BQ(0,Wi)],n4);class XLe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class NL{constructor(){const e=We.from({scheme:NL.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new qLe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}NL.SCHEME="inmemory";function aD(i,e,t){if(!e||!(i instanceof zQ))return;let n=[];Object.keys(e).forEach(s=>{ILe(s)&&n.push([`editor.${s}`,e[s]]),t&&TLe(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}class JLe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return VQ(this,void 0,void 0,function*(){const n=new Map;for(let o of e){if(!(o instanceof AQ))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(o.resource);if(!a)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&a.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(Om.replaceMove(F.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of n)o.pushStackElement(),o.pushEditOperations([],a,()=>[]),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:mo(t4.bulkEditServiceSummary,s,r)}})}}class e2e{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class t2e{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Le.None}get dimension(){return this._dimension||(this._dimension=cL(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}const yV=2e4;let md,uS,s4,dS,r4;function i2e(i){md=document.createElement("div"),md.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),md.appendChild(n),n};uS=e(),s4=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),md.appendChild(n),n};dS=t(),r4=t(),i.appendChild(md)}function dg(i){md&&(uS.textContent!==i?(Pn(s4),cD(uS,i)):(Pn(uS),cD(s4,i)))}function lD(i){md&&(ut?dg(i):dS.textContent!==i?(Pn(r4),cD(dS,i)):(Pn(dS),cD(r4,i)))}function cD(i,e){Pn(i),e.length>yV&&(e=e.substr(0,yV)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}const J5=bt("markerDecorationsService");var hD=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Mo extends te{constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return hD(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Fm extends te{constructor(){super(...arguments),this._onBeforeRun=this._register(new z),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new z),this.onDidRun=this._onDidRun.event}run(e,t){return hD(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return hD(this,void 0,void 0,function*(){yield e.run(t)})}}class da extends Mo{constructor(e){super(da.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}da.ID="vs.actions.separator";class eP{constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=!1,this.id=e,this.label=t,this.class=s,this._actions=n}get actions(){return this._actions}dispose(){}run(){return hD(this,void 0,void 0,function*(){})}}class ML extends Mo{constructor(){super(ML.ID,_("submenu.empty","(empty)"),void 0,!1)}}ML.ID="vs.actions.empty";var fa;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(fa||(fa={}));const oi=bt("themeService");var o4;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(o4||(o4={}));function pr(i){return{id:i}}var ci;(function(i){function e(a){return a&&typeof a=="object"&&typeof a.id=="string"&&(typeof a.color>"u"||o4.isThemeColor(a.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${Zs.iconNameExpression}(?:${Zs.iconModifierExpression})?)\\)$`);function n(a){const l=t.exec(a);if(!l)return;let[,c]=l;return{id:c}}i.fromString=n;function s(a,l){let c=a.id;const h=c.lastIndexOf("~");return h!==-1&&(c=c.substring(0,h)),l&&(c=`${c}~${l}`),{id:c}}i.modify=s;function r(a,l){var c,h;return a.id===l.id&&((c=a.color)===null||c===void 0?void 0:c.id)===((h=l.color)===null||h===void 0?void 0:h.id)}i.isEqual=r;function o(a,l){return{id:a.id,color:l?pr(l):void 0}}i.asThemeIcon=o,i.asClassNameArray=Zs.asClassNameArray,i.asClassName=Zs.asClassName,i.asCSSSelector=Zs.asCSSSelector})(ci||(ci={}));function uD(i){switch(i){case fa.DARK:return"vs-dark";case fa.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const HQ={ThemingContribution:"base.contributions.theming"};class n2e{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new z}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),pt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let UQ=new n2e;En.add(HQ.ThemingContribution,UQ);function ti(i){return UQ.onColorThemeChange(i)}class s2e extends te{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var r2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CV=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function $_(i){return i.command!==void 0}class Ue{constructor(e){this.id=Ue._idPool++,this._debugName=e}}Ue._idPool=0;Ue.CommandPalette=new Ue("CommandPalette");Ue.EditorContext=new Ue("EditorContext");Ue.SimpleEditorContext=new Ue("SimpleEditorContext");Ue.EditorContextCopy=new Ue("EditorContextCopy");Ue.EditorContextPeek=new Ue("EditorContextPeek");Ue.MenubarEditMenu=new Ue("MenubarEditMenu");Ue.MenubarCopy=new Ue("MenubarCopy");Ue.MenubarGoMenu=new Ue("MenubarGoMenu");Ue.MenubarSelectionMenu=new Ue("MenubarSelectionMenu");Ue.InlineCompletionsActions=new Ue("InlineCompletionsActions");const O0=bt("menuService"),ga=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new z,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Ue.CommandPalette}}addCommand(i){return this.addCommands(ht.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),pt(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(ht.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new wr;for(const{id:n,item:s}of i){let r=this._menuItems.get(n);r||(r=new wr,this._menuItems.set(n,r)),t.push(r.push(s)),e.add(n)}return this._onDidChangeMenu.fire(e),pt(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Ue.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)$_(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class $Q extends eP{constructor(e,t,n,s){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=s}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,s]of n)s.length>0&&(e.push(...s),e.push(new da));return e.length&&e.pop(),e}}let xu=class jQ{constructor(e,t,n,s,r){var o,a;if(this._commandService=r,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(o=e.tooltip)===null||o===void 0?void 0:o.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new jQ(t,void 0,n,s,r):void 0,this._options=n,ci.isThemeIcon(e.icon)&&(this.class=Zs.asClassName(e.icon))}dispose(){}run(...e){var t,n;let s=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(s=[...s,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(s=[...s,...e]),this._commandService.executeCommand(this.id,...s)}};xu=r2e([CV(3,$e),CV(4,yn)],xu);const P0=bt("telemetryService");class RL{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=xe.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};gs.registerKeybindingRule(s)}}Nt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){ga.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class tP extends RL{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===n){this._implementations.splice(s,1);return}}}}runCommand(e,t){const n=e.get(th);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){const r=s.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class qQ extends RL{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Qr extends RL{static bindToContribution(e){return class extends Qr{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){e(s)&&this._callback(e(s),r)}}}runCommand(e,t){const n=e.get(si),s=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(s)return s.invokeWithinContext(r=>{if(r.get($e).contextMatchesRules(Fd(this.precondition)))return this.runEditorCommand(r,s,t)})}}class _i extends Qr{constructor(e){super(_i.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(s){return s.menuId||(s.menuId=Ue.EditorContext),s.title||(s.title=e.label),s.when=xe.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(P0).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class GQ extends _i{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,s)=>s[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const s of this._implementations){const r=s[1](e,t,n);if(r)return typeof r=="boolean"?void 0:r}}}function F0(i,e){Nt.registerCommand(i,function(t,...n){const[s,r]=n;Pi(We.isUri(s)),Pi(q.isIPosition(r));const o=t.get(Ps).getModel(s);if(o){const a=q.lift(r);return e(o,a,...n.slice(2))}return t.get(Rl).createModelReference(s).then(a=>new Promise((l,c)=>{try{const h=e(a.object.textEditorModel,q.lift(r),n.slice(2));l(h)}catch(h){c(h)}}).finally(()=>{a.dispose()}))})}function pe(i){return Br.INSTANCE.registerEditorCommand(i),i}function ot(i){const e=new i;return Br.INSTANCE.registerEditorAction(e),e}function KQ(i){return Br.INSTANCE.registerEditorAction(i),i}function ZQ(i){Br.INSTANCE.registerEditorAction(i)}function Bs(i,e){Br.INSTANCE.registerEditorContribution(i,e)}var Xp;(function(i){function e(o){return Br.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return Br.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Br.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return Br.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return Br.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(Xp||(Xp={}));const o2e={EditorCommonContributions:"editor.contributions"};class Br{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Br.INSTANCE=new Br;En.add(o2e.EditorCommonContributions,Br.INSTANCE);function Pw(i){return i.register(),i}const iP=Pw(new tP({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Ue.MenubarEditMenu,group:"1_do",title:_({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Ue.CommandPalette,group:"",title:_("undo","Undo"),order:1}]}));Pw(new qQ(iP,{id:"default:undo",precondition:void 0}));const nP=Pw(new tP({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Ue.MenubarEditMenu,group:"1_do",title:_({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Ue.CommandPalette,group:"",title:_("redo","Redo"),order:1}]}));Pw(new qQ(nP,{id:"default:redo",precondition:void 0}));const a2e=Pw(new tP({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Ue.MenubarSelectionMenu,group:"1_basic",title:_({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Ue.CommandPalette,group:"",title:_("selectAll","Select All"),order:1}]}));var l2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},c2e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Yv=class{constructor(e,t){}dispose(){}};Yv.ID="editor.contrib.markerDecorations";Yv=l2e([c2e(1,J5)],Yv);Bs(Yv.ID,Yv);class h2e{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class sP{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(Io?fs.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const s=document.createElement("div");s.style.fontFamily=e,s.style.fontWeight="bold",s.style.fontSize=this._bareFontInfo.fontSize+"px",s.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,s.style.lineHeight=this._bareFontInfo.lineHeight+"px",s.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(s);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight=this._bareFontInfo.fontWeight,r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",r.style.fontStyle="italic",t.appendChild(r);const o=[];for(const a of this._requests){let l;a.type===0&&(l=n),a.type===2&&(l=s),a.type===1&&(l=r),l.appendChild(document.createElement("br"));const c=document.createElement("span");sP._render(c,a),l.appendChild(c),o.push(c)}this._container=t,this._testElements=o}static _render(e,t){if(t.chr===" "){let n=" ";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function u2e(i,e){new sP(i,e).read()}class YQ extends te{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,s=this.referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this.width!==n||this.height!==s)&&(this.width=n,this.height=s,e&&this.changeCallback())}}class SV{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function d2e(){Of.INSTANCE.clearCache()}class Of extends te{constructor(){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._cache=new SV,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new SV,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=Of._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new OM({zoomLevel:vM(),pixelRatio:Rx(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,s){const r=new h2e(e,t);return n.push(r),s&&s.push(r),r}static _actualReadConfiguration(e){const t=[],n=[],s=this.createRequest("n",0,t,n),r=this.createRequest("ｍ",0,t,null),o=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),l=this.createRequest("1",0,t,n),c=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),u=this.createRequest("4",0,t,n),d=this.createRequest("5",0,t,n),f=this.createRequest("6",0,t,n),g=this.createRequest("7",0,t,n),p=this.createRequest("8",0,t,n),m=this.createRequest("9",0,t,n),v=this.createRequest("→",0,t,n),b=this.createRequest("￫",0,t,null),w=this.createRequest("·",0,t,n),y=this.createRequest(String.fromCharCode(11825),0,t,null),x="|/-_ilm%";for(let N=0,$=x.length;N<$;N++)this.createRequest(x.charAt(N),0,t,n),this.createRequest(x.charAt(N),1,t,n),this.createRequest(x.charAt(N),2,t,n);u2e(e,t);const L=Math.max(a.width,l.width,c.width,h.width,u.width,d.width,f.width,g.width,p.width,m.width);let S=e.fontFeatureSettings===fr.OFF;const k=n[0].width;for(let N=1,$=n.length;S&&N<$;N++){const U=k-n[N].width;if(U<-.001||U>.001){S=!1;break}}let D=!0;S&&b.width!==k&&(D=!1),b.width>v.width&&(D=!1);const T=ESe()>2e3;return new OM({zoomLevel:vM(),pixelRatio:Rx(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:D,spaceWidth:o.width,middotWidth:w.width,wsmiddotWidth:y.width,maxDigitWidth:L},T)}}Of.INSTANCE=new Of;class Vn extends tD{constructor(e,t,n=null,s){super(e,t),this.accessibilityService=s,this._elementSizeObserver=this._register(new YQ(n,t.dimension,()=>this._recomputeOptions())),this._register(Of.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(pY(r=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(Io?fs.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(Io?fs.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!Io&&!TSe&&(e+="no-user-select "),Io&&(e+="no-minimap-shadow "),ut&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:Vn._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:Qd||Es,pixelRatio:Rx(),zoomLevel:vM(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return Of.INSTANCE.readConfiguration(e)}}class QQ{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function gt(i){return new QQ(i)}function Qi(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var f2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jt;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(jt||(jt={}));class At extends te{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(ne(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(ne(document,"touchend",e=>this.onTouchEnd(e))),this._register(ne(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return At.isTouchDevice()?(At.INSTANCE||(At.INSTANCE=new At),At.INSTANCE.targets.push(e),{dispose:()=>{At.INSTANCE.targets=At.INSTANCE.targets.filter(t=>t!==e)}}):te.None}static ignoreTarget(e){return At.isTouchDevice()?(At.INSTANCE||(At.INSTANCE=new At),At.INSTANCE.ignoreTargets.push(e),{dispose:()=>{At.INSTANCE.ignoreTargets=At.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):te.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let o=this.newGestureEvent(jt.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=e.changedTouches.length;s<r;s++){let o=e.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<At.HOLD_DELAY&&Math.abs(a.initialPageX-Tr(a.rollingPageX))<30&&Math.abs(a.initialPageY-Tr(a.rollingPageY))<30){let c=this.newGestureEvent(jt.Tap,a.initialTarget);c.pageX=Tr(a.rollingPageX),c.pageY=Tr(a.rollingPageY),this.dispatchEvent(c)}else if(l>=At.HOLD_DELAY&&Math.abs(a.initialPageX-Tr(a.rollingPageX))<30&&Math.abs(a.initialPageY-Tr(a.rollingPageY))<30){let c=this.newGestureEvent(jt.Contextmenu,a.initialTarget);c.pageX=Tr(a.rollingPageX),c.pageY=Tr(a.rollingPageY),this.dispatchEvent(c)}else if(n===1){let c=Tr(a.rollingPageX),h=Tr(a.rollingPageY),u=Tr(a.rollingTimestamps)-a.rollingTimestamps[0],d=c-a.rollingPageX[0],f=h-a.rollingPageY[0];const g=this.targets.filter(p=>a.initialTarget instanceof Node&&p.contains(a.initialTarget));this.inertia(g,t,Math.abs(d)/u,d>0?1:-1,c,Math.abs(f)/u,f>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(jt.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===jt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>At.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===jt.Change||e.type===jt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,s,r,o,a,l){this.handle=Tl(()=>{let c=Date.now(),h=c-t,u=0,d=0,f=!0;n+=At.SCROLL_FRICTION*h,o+=At.SCROLL_FRICTION*h,n>0&&(f=!1,u=s*n*h),o>0&&(f=!1,d=a*o*h);let g=this.newGestureEvent(jt.Change);g.translationX=u,g.translationY=d,e.forEach(p=>p.dispatchEvent(g)),f||this.inertia(e,c,n,s,r+u,o,a,l+d)})}onTouchMove(e){let t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let o=this.activeTouches[r.identifier],a=this.newGestureEvent(jt.Change,o.initialTarget);a.translationX=r.pageX-Tr(o.rollingPageX),a.translationY=r.pageY-Tr(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}At.SCROLL_FRICTION=-.005;At.HOLD_DELAY=700;At.CLEAR_TAP_COUNT_TIME=400;f2e([Qi],At,"isTouchDevice",null);function B0(i,e){let t=new Ur(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class fg{constructor(){this._hooks=new de,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,s,r){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=s,this._onStopCallback=r;const o=CM.getSameOriginWindowChain(),a=vu?"pointermove":"mousemove",l="mouseup",c=o.map(u=>u.window.document),h=T0(e);h&&c.unshift(h);for(const u of c)this._hooks.add(w5(u,a,d=>{if(d.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(d)},(d,f)=>this._mouseMoveEventMerger(d,f))),this._hooks.add(ne(u,l,d=>this.stopMonitoring(!0)));if(CM.hasDifferentOriginAncestor()){let u=o[o.length-1];this._hooks.add(ne(u.window.document,"mouseout",d=>{new Ur(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(ne(u.window.document,"mouseover",d=>{new Ur(d).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(ne(u.window.document.body,"mouseleave",d=>{this.stopMonitoring(!0)}))}}}class rP{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new XQ(this.x-Fc.scrollX,this.y-Fc.scrollY)}}class XQ{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new rP(this.clientX+Fc.scrollX,this.clientY+Fc.scrollY)}}class g2e{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s,this._editorPagePositionBrand=void 0}}function JQ(i){const e=Rn(i);return new g2e(e.left,e.top,e.width,e.height)}class Pf extends Ur{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new rP(this.posx,this.posy),this.editorPos=JQ(t)}}class p2e{constructor(e){this._editorViewDomNode=e}_create(e){return new Pf(e,this._editorViewDomNode)}onContextMenu(e,t){return ne(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return ne(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return ne(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return v5(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,s){return w5(e,"mousemove",t,(o,a)=>n(o,this._create(a)),s)}}class m2e{constructor(e){this._editorViewDomNode=e}_create(e){return new Pf(e,this._editorViewDomNode)}onPointerUp(e,t){return ne(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return ne(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return GSe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,s){return w5(e,"pointermove",t,(o,a)=>n(o,this._create(a)),s)}}class _2e extends te{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new fg),this._keydownListener=null}startMonitoring(e,t,n,s,r){this._keydownListener=tn(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const o=(a,l)=>n(a,new Pf(l,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,o,s,a=>{this._keydownListener.dispose(),r(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class Fw extends te{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){let r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class Xr extends Fw{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Ol{static write(e,t){e instanceof QQ,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],s=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=n[s-o-1];return r}}class b2e{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class v2e extends b2e{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class w2e{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class OL{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=new OL(r.left,r.width)}return t}toString(){return`[${this.left},${this.width}]`}}class Jp{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class y2e{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class C2e{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class wE{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Jp.compare);let t=[],n=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];n[s]=new Jp(Math.max(0,o.left-t),o.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,s,r,o,a){const c=e.children.length-1;if(0>c)return null;if(t=Math.min(c,Math.max(0,t)),s=Math.min(c,Math.max(0,s)),t===s&&n===r&&n===0&&!e.children[t].firstChild){const f=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(f,o)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let h=e.children[t].firstChild,u=e.children[s].firstChild;if((!h||!u)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!h||!u)return null;n=Math.min(h.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(h,n,u,r,a);return this._createHorizontalRangesFromClientRects(d,o)}}const S2e=function(){return Up?!0:!(Is||Es||Io)}();let em=!0;class xV{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class DV{constructor(e,t){this.themeType=t;const n=e.options,s=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class ul{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=gt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===fa.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),o=this._options,a=yr.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let l=null;if(o.themeType===fa.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const d=n.selections;for(const f of d){if(f.endLineNumber<e||f.startLineNumber>e)continue;const g=f.startLineNumber===e?f.startColumn:r.minColumn,p=f.endLineNumber===e?f.endColumn:r.maxColumn;g<p&&(o.themeType===fa.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new yr(g,p,"inline-selected-text",0)):(l||(l=[]),l.push(new Yke(g-1,p-1))))}}const c=new hg(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,a,r.tabSize,r.startVisibleColumn,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==fr.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;s.appendASCIIString('<div style="top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;height:"),s.appendASCIIString(String(this._options.lineHeight)),s.appendASCIIString('px;" class="'),s.appendASCIIString(ul.CLASS_NAME),s.appendASCIIString('">');const h=wL(c,s);s.appendASCIIString("</div>");let u=null;return em&&S2e&&r.isBasicASCII&&o.useMonospaceOptimizations&&h.containsForeignElements===0&&r.content.length<300&&c.lineTokens.getCount()<100&&(u=new Fy(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping)),u||(u=tX(this._renderedViewLine?this._renderedViewLine.domNode:null,c,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Fy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Fy?this._renderedViewLine.monospaceAssumptionsAreValid():em}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Fy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=t|0,n=n|0,t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const r=this._renderedViewLine.input.stopRenderingLineAfter|0;let o=!1;r!==-1&&t>r+1&&n>r+1&&(o=!0),r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return a&&a.length>0?new C2e(o,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}ul.CLASS_NAME="view-line";class Fy{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return em;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),em=!1),em}toSlowRenderedLine(){return tX(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,s){const r=this._getCharPosition(t),o=this._getCharPosition(n);return[new Jp(r,o-r)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new U5(r,n),s)}}class eX{constructor(e,t,n,s,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,s);return o===-1?null:[new Jp(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,r){if(n===s){const o=this._readPixelOffset(e,t,n,r);return o===-1?null:[new Jp(o,0)]}else return this._readRawVisibleRangesForRange(e,n,s,r)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const r=this._getReadingTarget(e);return r.firstChild?r.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[n];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=wE.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s.clientRectDeltaLeft,s.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const r=this._characterMapping.getDomPosition(n),o=wE.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s.clientRectDeltaLeft,s.endNode);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new Jp(0,this.getWidth())];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return wE.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s.clientRectDeltaLeft,s.endNode)}getColumnOfNodeOffset(e,t,n){const s=t.textContent.length;let r=-1;for(;t;)t=t.previousSibling,r++;return this._characterMapping.getColumn(new U5(r,n),s)}}class x2e extends eX{_readVisibleRangesForRange(e,t,n,s,r){const o=super._readVisibleRangesForRange(e,t,n,s,r);if(!o||o.length===0||n===s||n===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const tX=function(){return Qd?D2e:k2e}();function D2e(i,e,t,n,s){return new x2e(i,e,t,n,s)}function k2e(i,e,t,n,s){return new eX(i,e,t,n,s)}function By(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Sn{constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${By(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${By(this.oldText)}")`:`(replace@${this.oldPosition} "${By(this.oldText)}" with "${By(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;Ko(e,s,n),n+=4;for(let r=0;r<s;r++)Nxe(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=Go(e,t);return t+=4,$M(e,t,n)}writeSize(){return 4+4+Sn._writeStringSize(this.oldText)+Sn._writeStringSize(this.newText)}write(e,t){return Ko(e,this.oldPosition,t),t+=4,Ko(e,this.newPosition,t),t+=4,t=Sn._writeString(e,this.oldText,t),t=Sn._writeString(e,this.newText,t),t}static read(e,t,n){const s=Go(e,t);t+=4;const r=Go(e,t);t+=4;const o=Sn._readString(e,t);t+=Sn._writeStringSize(o);const a=Sn._readString(e,t);return t+=Sn._writeStringSize(a),n.push(new Sn(s,o,r,a)),t}}function L2e(i,e){return i===null||i.length===0?e:new el(i,e).compress()}class el{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,h]=el._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=h;continue}if(n.newPosition<s.oldPosition){const[c,h]=el._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=h;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,h]=el._splitPrev(n,s.oldLength);a=c,l=s,n=h,s=this._getCurr(++t)}else{const[c,h]=el._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=h}this._result[this._resultLen++]=new Sn(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=el._merge(this._result);return el._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=el._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=el._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Sn(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Sn(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new Sn(e.oldPosition,e.oldText,e.newPosition,n),new Sn(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Sn(e.oldPosition,n,e.newPosition,e.newText),new Sn(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new Sn(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function Kg(i){return i.toString()}class on{constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),s=a4(e);return new on(n,n,s,s,t,t,[])}append(e,t,n,s,r){t.length>0&&(this.changes=L2e(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Ko(e,t?t.length:0,n),n+=4,t)for(const s of t)Ko(e,s.selectionStartLineNumber,n),n+=4,Ko(e,s.selectionStartColumn,n),n+=4,Ko(e,s.positionLineNumber,n),n+=4,Ko(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=Go(e,t);t+=4;for(let r=0;r<s;r++){const o=Go(e,t);t+=4;const a=Go(e,t);t+=4;const l=Go(e,t);t+=4;const c=Go(e,t);t+=4,n.push(new Ve(o,a,l,c))}return t}serialize(){let e=10+on._writeSelectionsSize(this.beforeCursorState)+on._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;Ko(t,this.beforeVersionId,n),n+=4,Ko(t,this.afterVersionId,n),n+=4,x7(t,this.beforeEOL,n),n+=1,x7(t,this.afterEOL,n),n+=1,n=on._writeSelections(t,this.beforeCursorState,n),n=on._writeSelections(t,this.afterCursorState,n),Ko(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=Go(t,n);n+=4;const r=Go(t,n);n+=4;const o=S7(t,n);n+=1;const a=S7(t,n);n+=1;const l=[];n=on._readSelections(t,n,l);const c=[];n=on._readSelections(t,n,c);const h=Go(t,n);n+=4;const u=[];for(let d=0;d<h;d++)n=Sn.read(t,n,u);return new on(s,r,o,a,l,c,u)}}class iX{constructor(e,t){this.model=e,this._data=on.create(e,t)}get type(){return 0}get resource(){return We.isUri(this.model)?this.model:this.model.uri}get label(){return _("edit","Typing")}toString(){return(this._data instanceof on?this._data:on.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(We.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof on}append(e,t,n,s,r){this._data instanceof on&&this._data.append(e,t,n,s,r)}close(){this._data instanceof on&&(this._data=this._data.serialize())}open(){this._data instanceof on||(this._data=on.deserialize(this._data))}undo(){if(We.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof on&&(this._data=this._data.serialize());const e=on.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(We.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof on&&(this._data=this._data.serialize());const e=on.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof on&&(this._data=this._data.serialize()),this._data.byteLength+168}}class A2e{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const s=Kg(n.resource);this._editStackElementsMap.set(s,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Kg(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Kg(We.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Kg(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=Kg(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Kg(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${Sa(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function a4(i){return i.getEOL()===`
`?0:1}function bc(i){return i?i instanceof iX||i instanceof A2e:!1}class oP{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);bc(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);bc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(bc(t)&&t.canAppend(this._model))return t;const n=new iX(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],a4(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const s=this._getOrCreateEditStackElement(e),r=this._model.applyEdits(t,!0),o=oP._computeCursorState(n,r),a=r.map((l,c)=>({index:c,textChange:l.textChange}));return a.sort((l,c)=>l.textChange.oldPosition===c.textChange.oldPosition?l.index-c.index:l.textChange.oldPosition-c.textChange.oldPosition),s.append(this._model,a.map(l=>l.textChange),a4(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ze(n),null}}}class E2e{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function I2e(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let d=i.charCodeAt(r),f=t.charCodeAt(r);if(d!==f)break}let o=0,a=0;for(let d=r;d<e;d++)i.charCodeAt(d)===32?o++:a++;let l=0,c=0;for(let d=r;d<n;d++)t.charCodeAt(d)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;let h=Math.abs(a-c),u=Math.abs(o-l);if(h===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%h===0){s.spacesDiff=u/h;return}}function kV(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8;let h=[0,0,0,0,0,0,0,0,0],u=new E2e;for(let g=1;g<=n;g++){let p=i.getLineLength(g),m=i.getLineContent(g);const v=p<=65536;let b=!1,w=0,y=0,x=0;for(let S=0,k=p;S<k;S++){let D=v?m.charCodeAt(S):i.getLineCharCode(g,S);if(D===9)x++;else if(D===32)y++;else{b=!0,w=S;break}}if(!b||(x>0?s++:y>1&&r++,I2e(o,a,m,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;let L=u.spacesDiff;L<=c&&h[L]++,o=m,a=w}let d=t;s!==r&&(d=s<r);let f=e;if(d){let g=d?0:.1*n;l.forEach(p=>{let m=h[p];m>g&&(g=m,f=p)}),f===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(f=2)}return{insertSpaces:d,tabSize:f}}function vs(i){return(i.metadata&1)>>>0}function Ft(i,e){i.metadata=i.metadata&254|e<<0}function Dn(i){return(i.metadata&2)>>>1===1}function Rt(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function nX(i){return(i.metadata&4)>>>2===1}function LV(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function T2e(i){return(i.metadata&24)>>>3}function AV(i,e){i.metadata=i.metadata&231|e<<3}function N2e(i){return(i.metadata&32)>>>5===1}function EV(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class sX{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ft(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,LV(this,!1),AV(this,1),EV(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Rt(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;let t=this.options.className;LV(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),AV(this,this.options.stickiness),EV(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const je=new sX(null,0,0);je.parent=je;je.left=je;je.right=je;Ft(je,0);class yE{constructor(){this.root=je,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r){return this.root===je?[]:W2e(this,e,t,n,s,r)}search(e,t,n){return this.root===je?[]:V2e(this,e,t,n)}collectNodesFromOwner(e){return F2e(this,e)}collectNodesPostOrder(){return B2e(this)}insert(e){IV(this,e),this._normalizeDeltaIfNecessary()}delete(e){TV(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=O2e(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];TV(this,l)}this._normalizeDeltaIfNecessary(),P2e(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,R2e(l,e,e+t,n,s),l.maxEnd=l.end,IV(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,M2e(this))}}function M2e(i){let e=i.root,t=0;for(;e!==je;){if(e.left!==je&&!Dn(e.left)){e=e.left;continue}if(e.right!==je&&!Dn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Du(e),Rt(e,!0),Rt(e.left,!1),Rt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Rt(i.root,!1)}function Zg(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function R2e(i,e,t,n,s){const r=T2e(i),o=r===0||r===2,a=r===1||r===2,l=t-e,c=n,h=Math.min(l,c),u=i.start;let d=!1;const f=i.end;let g=!1;e<=u&&f<=t&&N2e(i)&&(i.start=e,d=!0,i.end=e,g=!0);{const m=s?1:l>0?2:0;!d&&Zg(u,o,e,m)&&(d=!0),!g&&Zg(f,a,e,m)&&(g=!0)}if(h>0&&!s){const m=l>c?2:0;!d&&Zg(u,o,e+h,m)&&(d=!0),!g&&Zg(f,a,e+h,m)&&(g=!0)}{const m=s?1:0;!d&&Zg(u,o,t,m)&&(i.start=e+c,d=!0),!g&&Zg(f,a,t,m)&&(i.end=e+c,g=!0)}const p=c-l;d||(i.start=Math.max(0,u+p)),g||(i.end=Math.max(0,f+p)),i.start>i.end&&(i.end=i.start)}function O2e(i,e,t){let n=i.root,s=0,r=0,o=0,a=0,l=[],c=0;for(;n!==je;){if(Dn(n)){Rt(n.left,!1),Rt(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!Dn(n.left)){if(r=s+n.maxEnd,r<e){Rt(n,!0);continue}if(n.left!==je){n=n.left;continue}}if(o=s+n.start,o>t){Rt(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),Rt(n,!0),n.right!==je&&!Dn(n.right)){s+=n.delta,n=n.right;continue}}return Rt(i.root,!1),l}function P2e(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==je;){if(Dn(s)){Rt(s.left,!1),Rt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Du(s),s=s.parent;continue}if(!Dn(s.left)){if(o=r+s.maxEnd,o<e){Rt(s,!0);continue}if(s.left!==je){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(i.requestNormalizeDelta=!0),Rt(s,!0);continue}if(Rt(s,!0),s.right!==je&&!Dn(s.right)){r+=s.delta,s=s.right;continue}}Rt(i.root,!1)}function F2e(i,e){let t=i.root,n=[],s=0;for(;t!==je;){if(Dn(t)){Rt(t.left,!1),Rt(t.right,!1),t=t.parent;continue}if(t.left!==je&&!Dn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),Rt(t,!0),t.right!==je&&!Dn(t.right)){t=t.right;continue}}return Rt(i.root,!1),n}function B2e(i){let e=i.root,t=[],n=0;for(;e!==je;){if(Dn(e)){Rt(e.left,!1),Rt(e.right,!1),e=e.parent;continue}if(e.left!==je&&!Dn(e.left)){e=e.left;continue}if(e.right!==je&&!Dn(e.right)){e=e.right;continue}t[n++]=e,Rt(e,!0)}return Rt(i.root,!1),t}function V2e(i,e,t,n){let s=i.root,r=0,o=0,a=0,l=[],c=0;for(;s!==je;){if(Dn(s)){Rt(s.left,!1),Rt(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==je&&!Dn(s.left)){s=s.left;continue}o=r+s.start,a=r+s.end,s.setCachedOffsets(o,a,n);let h=!0;if(e&&s.ownerId&&s.ownerId!==e&&(h=!1),t&&nX(s)&&(h=!1),h&&(l[c++]=s),Rt(s,!0),s.right!==je&&!Dn(s.right)){r+=s.delta,s=s.right;continue}}return Rt(i.root,!1),l}function W2e(i,e,t,n,s,r){let o=i.root,a=0,l=0,c=0,h=0,u=[],d=0;for(;o!==je;){if(Dn(o)){Rt(o.left,!1),Rt(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!Dn(o.left)){if(l=a+o.maxEnd,l<e){Rt(o,!0);continue}if(o.left!==je){o=o.left;continue}}if(c=a+o.start,c>t){Rt(o,!0);continue}if(h=a+o.end,h>=e){o.setCachedOffsets(c,h,r);let f=!0;n&&o.ownerId&&o.ownerId!==n&&(f=!1),s&&nX(o)&&(f=!1),f&&(u[d++]=o)}if(Rt(o,!0),o.right!==je&&!Dn(o.right)){a+=o.delta,o=o.right;continue}}return Rt(i.root,!1),u}function IV(i,e){if(i.root===je)return e.parent=je,e.left=je,e.right=je,Ft(e,0),i.root=e,i.root;z2e(i,e),xh(e.parent);let t=e;for(;t!==i.root&&vs(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;vs(n)===1?(Ft(t.parent,0),Ft(n,0),Ft(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Ib(i,t)),Ft(t.parent,0),Ft(t.parent.parent,1),Tb(i,t.parent.parent))}else{const n=t.parent.parent.left;vs(n)===1?(Ft(t.parent,0),Ft(n,0),Ft(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Tb(i,t)),Ft(t.parent,0),Ft(t.parent.parent,1),Ib(i,t.parent.parent))}return Ft(i.root,0),e}function z2e(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(U2e(s,r,n.start+t,n.end+t)<0)if(n.left===je){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===je){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=je,e.right=je,Ft(e,1)}function TV(i,e){let t,n;if(e.left===je?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===je?(t=e.left,n=e):(n=H2e(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,Ft(t,0),e.detach(),CE(),Du(t),i.root.parent=je;return}let s=vs(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ft(n,vs(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==je&&(n.left.parent=n),n.right!==je&&(n.right.parent=n)),e.detach(),s){xh(t.parent),n!==e&&(xh(n),xh(n.parent)),CE();return}xh(t),xh(t.parent),n!==e&&(xh(n),xh(n.parent));let r;for(;t!==i.root&&vs(t)===0;)t===t.parent.left?(r=t.parent.right,vs(r)===1&&(Ft(r,0),Ft(t.parent,1),Ib(i,t.parent),r=t.parent.right),vs(r.left)===0&&vs(r.right)===0?(Ft(r,1),t=t.parent):(vs(r.right)===0&&(Ft(r.left,0),Ft(r,1),Tb(i,r),r=t.parent.right),Ft(r,vs(t.parent)),Ft(t.parent,0),Ft(r.right,0),Ib(i,t.parent),t=i.root)):(r=t.parent.left,vs(r)===1&&(Ft(r,0),Ft(t.parent,1),Tb(i,t.parent),r=t.parent.left),vs(r.left)===0&&vs(r.right)===0?(Ft(r,1),t=t.parent):(vs(r.left)===0&&(Ft(r.right,0),Ft(r,1),Ib(i,r),r=t.parent.left),Ft(r,vs(t.parent)),Ft(t.parent,0),Ft(r.left,0),Tb(i,t.parent),t=i.root));Ft(t,0),CE()}function H2e(i){for(;i.left!==je;)i=i.left;return i}function CE(){je.parent=je,je.delta=0,je.start=0,je.end=0}function Ib(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==je&&(t.left.parent=e),t.parent=e.parent,e.parent===je?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Du(e),Du(t)}function Tb(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==je&&(t.right.parent=e),t.parent=e.parent,e.parent===je?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Du(e),Du(t)}function rX(i){let e=i.end;if(i.left!==je){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==je){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Du(i){i.maxEnd=rX(i)}function xh(i){for(;i!==je;){const e=rX(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function U2e(i,e,t,n){return i===t?e-n:i-t}class l4{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Pe)return aP(this.right);let e=this;for(;e.parent!==Pe&&e.parent.left!==e;)e=e.parent;return e.parent===Pe?Pe:e.parent}prev(){if(this.left!==Pe)return oX(this.left);let e=this;for(;e.parent!==Pe&&e.parent.right!==e;)e=e.parent;return e.parent===Pe?Pe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Pe=new l4(null,0);Pe.parent=Pe;Pe.left=Pe;Pe.right=Pe;Pe.color=0;function aP(i){for(;i.left!==Pe;)i=i.left;return i}function oX(i){for(;i.right!==Pe;)i=i.right;return i}function lP(i){return i===Pe?0:i.size_left+i.piece.length+lP(i.right)}function cP(i){return i===Pe?0:i.lf_left+i.piece.lineFeedCnt+cP(i.right)}function SE(){Pe.parent=Pe}function Nb(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Pe&&(t.left.parent=e),t.parent=e.parent,e.parent===Pe?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function Mb(i,e){let t=e.left;e.left=t.right,t.right!==Pe&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Pe?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Vy(i,e){let t,n;if(e.left===Pe?(n=e,t=n.right):e.right===Pe?(n=e,t=n.left):(n=aP(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),SE(),i.root.parent=Pe;return}let s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,j_(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,j_(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Pe&&(n.left.parent=n),n.right!==Pe&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,j_(i,n)),e.detach(),t.parent.left===t){let o=lP(t),a=cP(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){let l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,lc(i,t.parent,l,c)}}if(j_(i,t.parent),s){SE();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,Nb(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,Mb(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,Nb(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,Mb(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,Nb(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,Mb(i,t.parent),t=i.root));t.color=0,SE()}function NV(i,e){for(j_(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Nb(i,e)),e.parent.color=0,e.parent.parent.color=1,Mb(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Mb(i,e)),e.parent.color=0,e.parent.parent.color=1,Nb(i,e.parent.parent))}i.root.color=0}function lc(i,e,t,n){for(;e!==i.root&&e!==Pe;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function j_(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=lP(e.left)-e.size_left,n=cP(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}class $2e extends R0{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function j2e(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const Bm=j2e(i=>new $2e(i)),q2e=999;class dd{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=G2e(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=NY(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new K2e(t,this.wordSeparators?Bm(this.wordSeparators):null,n?this.searchString:null)}}function G2e(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===110||s===114||s===87)return!0}return!1}class K2e{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function _d(i,e,t){if(!t)return new zv(i,null);let n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new zv(i,n)}class MV{constructor(e){let t=[],n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class Wy{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new q_(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){let f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const h=e.getPositionAt(a),u=e.getPositionAt(c);return new F(h.lineNumber,h.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new MV(a):null,c=[];let h=0,u;for(n.reset(0);u=n.next(a);)if(c[h++]=_d(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),h>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=t.length;let p=-f;for(;(p=t.indexOf(d,p+f))!==-1;)if((!c||hP(c,t,g,p,f))&&(o[r++]=new zv(new F(n,p+1+s,n,p+1+f+s),null),r>=l))return r;return r}const h=new q_(e.wordSeparators,e.regex);let u;h.reset(0);do if(u=h.next(t),u&&(o[r++]=_d(new F(n,u.index+1+s,n,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new q_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new q(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new F(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new MV(l):null;n.reset(t.column-1);let h=n.next(l);return h?_d(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new q(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const h=(o+c-1)%r,u=e.getLineContent(h+1),d=this._findFirstMatchInLine(n,u,h+1,1,s);if(d)return d}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?_d(new F(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new q_(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new F(1,1,t.lineNumber,t.column),n,s,10*q2e);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new q(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const h=(r+o-c-1)%r,u=e.getLineContent(h+1),d=this._findLastMatchInLine(n,u,h+1,s);if(d)return d}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=_d(new F(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function Z2e(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function Y2e(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==0)return!0}return!1}function hP(i,e,t,n,s){return Z2e(i,e,t,n,s)&&Y2e(i,e,t,n,s)}class q_{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){mc(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||hP(this._wordSeparators,e,t,s,r))return n}while(n);return null}}const tc=65535;function aX(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class Q2e{constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function cc(i,e=!0){let t=[0],n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===13?s+1<r&&i.charCodeAt(s+1)===10?(t[n++]=s+2,s++):t[n++]=s+1:o===10&&(t[n++]=s+1)}return e?aX(t):t}function X2e(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):h===10?(s++,i[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new Q2e(aX(i),n,s,r,o);return i.length=0,a}class Hs{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class bd{constructor(e,t){this.buffer=e,this.lineStarts=t}}class J2e{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Pe&&e.iterate(e.root,n=>(n!==Pe&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class eAe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let s=0;s<n.length;s++){let r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){let s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class tAe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new bd("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Pe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=cc(e[r].buffer));let a=new Hs(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new eAe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=tc,n=t-Math.floor(t/3),s=n*2,r="",o=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),h=c.length;if(o<=n||o+h<s)return r+=c,o+=h,!0;let u=r.replace(/\r\n|\r|\n/g,e);return a.push(new bd(u,cc(u))),r=c,o=h,!0}),o>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new bd(l,cc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new J2e(this,e)}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==Pe;)if(s.left!==Pe&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;let r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,s=e;for(;t!==Pe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let o=this.getOffsetAt(n+1,1),a=s-o;return new q(n+1,a+1)}return new q(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Pe){let r=this.getOffsetAt(n+1,1),o=s-e-r;return new q(n+1,o+1)}else t=t.right;return new q(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node,s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==Pe;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){let e=[],t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===Pe)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,u=o.end.line;let d=c[h]+o.start.column;if(s&&(l.charCodeAt(d)===10&&(d++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(h===u)return!this._EOLNormalized&&l.charCodeAt(d+a-1)===13?(s=!0,n+=l.substr(d,a-1)):n+=l.substr(d,a),!0;n+=this._EOLNormalized?l.substring(d,Math.max(d,c[h+1]-this._EOLLength)):l.substring(d,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=h+1;f<u;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:n=l.substr(c[u],o.end.column-1)):n=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{let t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,s,r,o,a,l,c,h,u){let d=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o),m,v={line:0,column:0},b,w;t._wordSeparators?(b=d.buffer.substring(g,p),w=y=>y+g,t.reset(0)):(b=d.buffer,w=y=>y,t.reset(g));do if(m=t.next(b),m){if(w(m.index)>=p)return h;this.positionInBuffer(e,w(m.index)-f,v);let y=this.getLineFeedCnt(e.piece.bufferIndex,r,v),x=v.line===r.line?v.column-r.column+s:v.column+1,L=x+m[0].length;if(u[h++]=_d(new F(n+y,x,n+y,L),m,l),w(m.index)+m[0].length>=p||h>=c)return h}while(m);return h}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new q_(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder),u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,u,t,n,s,o,r),r;let d=e.startLineNumber,f=l.node;for(;f!==c.node;){let p=this.getLineFeedCnt(f.piece.bufferIndex,h,f.piece.end);if(p>=1){let v=this._buffers[f.piece.bufferIndex].lineStarts,b=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=v[h.line+p],y=d===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,d,y,h,this.positionInBuffer(f,w-b),t,n,s,o,r),o>=s)return r;d+=p}let m=d===e.startLineNumber?e.startColumn-1:0;if(d===e.endLineNumber){const v=this.getLineContent(d).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,m,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(d).substr(m),d,m,o,r,n,s),o>=s)return r;d++,l=this.nodeAt2(d,1),f=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(d===e.endLineNumber){let p=d===e.startLineNumber?e.startColumn-1:0;const m=this.getLineContent(d).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,m,e.endLineNumber,p,o,r,n,s),r}let g=d===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,d,g,h,u,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const d=e.simpleSearch,f=d.length,g=n.length;let p=-f;for(;(p=n.indexOf(d,p+f))!==-1;)if((!h||hP(h,n,g,p,f))&&(a[o++]=new zv(new F(s,p+1+r,s,p+1+f+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=_d(new F(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Pe){let{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<tc){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){let h=[],u=new Hs(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){let p={line:u.start.line+1,column:0};u=new Hs(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){let p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&h.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);let d=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<d.length;g++)f=this.rbInsertRight(f,d[g]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,s)}else{let s=this.createNewPieces(t),r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Pe)return;let n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){let d=this.positionInBuffer(r,n.remainder),f=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let g=r.next();Vy(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,d),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,d,f),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);let h=r.next();for(let d=h;d!==Pe&&d!==o;d=d.next())a.push(d);let u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let o=t.piece,a={line:o.start.line+1,column:0},l=new Hs(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,lc(this,t,-1,-1),t.piece.length===0&&n.push(t)}let s=this.createNewPieces(e),r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]),r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){let s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t,c=s.start.line,h=s.end.line,u=0,d=0,f=0;for(;c<=h&&(u=c+(h-c)/2|0,f=o[u],u!==h);)if(d=o[u+1],l<f)h=u-1;else if(l>=d)c=u+1;else break;return n?(n.line=u,n.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;let r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;let a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Vy(this,e[t])}createNewPieces(e){if(e.length>tc){let h=[];for(;e.length>tc;){const d=e.charCodeAt(tc-1);let f;d===13||d>=55296&&d<=56319?(f=e.substring(0,tc-1),e=e.substring(tc-1)):(f=e.substring(0,tc),e=e.substring(tc));let g=cc(f);h.push(new Hs(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new bd(f,g))}let u=cc(e);return h.push(new Hs(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new bd(e,u)),h}let t=this._buffers[0].buffer.length;const n=cc(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length;let o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Hs(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,s="",r=this._searchCache.get2(e);if(r){n=r.node;let o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{let c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==Pe;)if(n.left!==Pe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(u+l,u+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(h+l,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Pe;){let o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Pe;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-s,h=a-r,u=n.length+h;e.piece=new Hs(n.bufferIndex,n.start,o,l,u),lc(this,e,h,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-s,h=r-l,u=n.length+h;e.piece=new Hs(n.bufferIndex,o,n.end,a,u),lc(this,e,h,c)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,h=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Hs(s.bufferIndex,s.start,c,h,u),lc(this,e,u-a,h-l);let d=new Hs(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),f=this.rbInsertRight(e,d);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=cc(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(n){let f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),d=u-h;e.piece=new Hs(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,lc(this,e,t.length,d)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==Pe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==Pe;)if(n.left!==Pe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Pe;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Pe||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Pe||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],s=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Hs(e.piece.bufferIndex,e.piece.start,r,a,o),lc(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0};const c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Hs(t.piece.bufferIndex,l,t.piece.end,h,c),lc(this,t,-1,-1),t.piece.length===0&&n.push(t);let u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let d=0;d<n.length;d++)Vy(this,n[d])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Vy(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new Hs(s.bufferIndex,r,s.end,a,o),lc(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Pe)return t(Pe);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Pe)return"";let t=this._buffers[e.piece.bufferIndex],n,s=e.piece,r=this.offsetInBuffer(s.bufferIndex,s.start),o=this.offsetInBuffer(s.bufferIndex,s.end);return n=t.buffer.substring(r,o),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){let n=new l4(t,1);if(n.left=Pe,n.right=Pe,n.parent=Pe,n.size_left=0,n.lf_left=0,this.root===Pe)this.root=n,n.color=0;else if(e.right===Pe)e.right=n,n.parent=e;else{let r=aP(e.right);r.left=n,n.parent=r}return NV(this,n),n}rbInsertLeft(e,t){let n=new l4(t,1);if(n.left=Pe,n.right=Pe,n.parent=Pe,n.size_left=0,n.lf_left=0,this.root===Pe)this.root=n,n.color=0;else if(e.left===Pe)e.left=n,n.parent=e;else{let s=oX(e.left);s.right=n,n.parent=s}return NV(this,n),n}}function Vm(i){let e=0,t=0,n=0,s=0;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===10?(s|=2,r++):s|=3,n=r+1):a===10&&(s|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}function RV(i){return(i<<0|0<<8|0<<11|1<<14|2<<23)>>>0}const ic=new Uint32Array(0).buffer;class xE{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new iAe(e,[t]))}}class dD{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new F(0,t+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const s=t+Math.floor((n-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)n=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new OV(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new OV(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let h=0;h<o;h++){const u=4*h,d=r[u],f=r[u+1],g=r[u+2],p=r[u+3];if((d>e||d===e&&g>=t)&&(d<n||d===n&&f<=s))l=!0;else{if(a===0&&(c=d),l){const m=4*a;r[m]=d-c,r[m+1]=f,r[m+2]=g,r[m+3]=p}a++}}return this._tokenCount=a,c}split(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=[],l=[],c=a,h=0,u=0;for(let d=0;d<o;d++){const f=4*d,g=r[f],p=r[f+1],m=r[f+2],v=r[f+3];if(g>e||g===e&&m>=t){if(g<n||g===n&&p<=s)continue;c!==l&&(c=l,h=0,u=g)}c[h++]=g-u,c[h++]=p,c[h++]=m,c[h++]=v}return[new dD(new Uint32Array(a)),new dD(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,h=!1;for(let u=0;u<a;u++){const d=4*u;let f=o[d],g=o[d+1],p=o[d+2];const m=o[d+3];if(f<t||f===t&&p<=n){c++;continue}else if(f===t&&g<n)f===s&&p>r?p-=r-n:p=n;else if(f===t&&g===n)if(f===s&&p>r)p-=r-n;else{h=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&p>r)f===t?(g=n,p=g+(p-r)):(g=0,p=g+(p-r));else{h=!0;continue}else if(f>s){if(l===0&&!h){c=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,p+=e),f-=l,g-=r-n,p-=r-n;else throw new Error("Not possible!");const v=4*c;o[v]=f,o[v+1]=g,o[v+2]=p,o[v+3]=m,c++}this._tokenCount=c}acceptInsertText(e,t,n,s,r,o){const a=n===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let h=0;h<c;h++){const u=4*h;let d=l[u],f=l[u+1],g=l[u+2];if(!(d<e||d===e&&g<t)){if(d===e&&g===t)if(a)g+=1;else continue;else if(d===e&&f<t&&t<g)n===0?g+=s:g=t;else{if(d===e&&f===t&&a)continue;if(d===e)if(d+=n,n===0)f+=s,g+=s;else{const p=g-f;f=r+(f-t),g=f+p}else d+=n}l[u]=d,l[u+1]=f,l[u+2]=g}}}}class OV{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class fD{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new F(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[s,r,o]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new fD(this.startLineNumber,s),new fD(this.startLineNumber+o,r)]}applyEdit(e,t){const[n,s,r]=Vm(t);this.acceptEdit(e,n,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const r=n-t;this.startLineNumber-=r;return}const s=this.tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&n>=s+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const r=-t;this.startLineNumber-=r,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,s,r){if(t===0&&n===0)return;const o=e.lineNumber-this.startLineNumber;if(o<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();o>=a+1||this.tokens.acceptInsertText(o,e.column-1,t,n,s,r)}}class iAe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function nc(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class uP{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=qv(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const s=uP._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0,c=[],h=0,u=0;const d=(f,g)=>{f!==u&&(u=f,c[h++]=f,c[h++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),m=r.getMetadata(f),v=((m&1?2048:0)|(m&2?4096:0)|(m&4?8192:0)|(m&8?8372224:0)|(m&16?4286578688:0))>>>0,b=~v>>>0;for(;l<o&&t.getEndOffset(l)<=g;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&d(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)d(t.getEndOffset(l),t.getMetadata(l)&b|m&v),l++;if(l<o)d(p,t.getMetadata(l)&b|m&v),t.getEndOffset(l)===p&&l++;else{const w=Math.min(Math.max(0,l-1),o-1);d(p,t.getMetadata(w)&b|m&v)}}for(;l<o;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new wn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}class Nr{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==ic)return new wn(nc(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=RV(this._languageIdCodec.encodeLanguageId(e)),new wn(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?nc(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=Pr.getLanguageId(s[1])!==e),!r)return ic}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=RV(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=qv(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=Nr._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!Nr._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=nc(e),s=nc(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Nr._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Nr._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=Nr._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Nr._append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Nr._insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=Nr._deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Nr._insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===ic?e:Nr._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===ic)return e;const n=nc(e),s=n[n.length-2];return Nr._delete(e,t,s)}static _delete(e,t,n){if(e===null||e===ic||t===n)return e;const s=nc(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return ic;const o=wn.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const f=n-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,h;a!==t?(s[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const u=n-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>h&&(s[c++]=g,s[c++]=s[(f<<1)+1],h=g)}if(c===s.length)return e;let d=new Uint32Array(c);return d.set(s.subarray(0,c),0),d.buffer}static _append(e,t){if(t===ic)return e;if(e===ic)return t;if(e===null)return e;if(t===null)return null;const n=nc(e),s=nc(t),r=s.length>>>1;let o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static _insert(e,t,n){if(e===null||e===ic)return e;const s=nc(e),r=s.length>>>1;let o=wn.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}class tm extends te{constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new z),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new tAe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const s=this.getPositionAt(e),r=this.getPositionAt(n);return new F(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let h=l;h<c;h++)vn(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Xs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=N0(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){let m=e[p];a&&m._isTracked&&(a=!1);let v=m.range;if(m.text){let L=!0;o||(L=!L5(m.text),o=L),!s&&L&&(s=hL(m.text)),!r&&L&&(r=RY(m.text))}let b="",w=0,y=0,x=0;if(m.text){let L;[w,y,x,L]=Vm(m.text);const S=this.getEOL();L===0||L===(S===`\r
`?2:1)?b=m.text:b=m.text.replace(/\r\n|\r|\n/g,S)}l[p]={sortIndex:p,identifier:m.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:b,eolCount:w,firstLineLength:y,lastLineLength:x,forceMoveMarkers:!!m.forceMoveMarkers,isAutoWhitespaceEdit:m.isAutoWhitespaceEdit||!1}}l.sort(tm._sortOpsAscending);let c=!1;for(let p=0,m=l.length-1;p<m;p++){let v=l[p].range.getEndPosition(),b=l[p+1].range.getStartPosition();if(b.isBeforeOrEqual(v)){if(b.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let h=n||t?tm._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){let m=l[p],v=h[p];if(m.isAutoWhitespaceEdit&&m.range.isEmpty())for(let b=v.startLineNumber;b<=v.endLineNumber;b++){let w="";b===v.startLineNumber&&(w=this.getLineContent(m.range.startLineNumber),Xs(w)!==-1)||u.push({lineNumber:b,oldContent:w})}}let d=null;if(n){let p=0;d=[];for(let m=0;m<l.length;m++){const v=l[m],b=h[m],w=this.getValueInRange(v.range),y=v.rangeOffset+p;p+=v.text.length-w.length,d[m]={sortIndex:v.sortIndex,identifier:v.identifier,range:b,text:w,textChange:new Sn(v.rangeOffset,w,y,v.text)}}c||d.sort((m,v)=>m.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,m)=>m.lineNumber-p.lineNumber),g=[];for(let p=0,m=u.length;p<m;p++){let v=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===v)continue;let b=u[p].oldContent,w=this.getLineContent(v);w.length===0||w===b||Xs(w)!==-1||g.push(v)}}return this._onDidChangeContent.fire(),new eDe(d,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new F(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],m=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new F(o,a,m.startLineNumber,m.startColumn))),p.text.length>0&&l.push(p.text),o=m.endLineNumber,a=m.endColumn}const c=l.join(""),[h,u,d]=Vm(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:h,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(tm._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let s=e[n];const r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new F(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}static _getInverseEditRanges(e){let t=[],n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){let l=e[o],c,h;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,h=s+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let u;if(l.text.length>0){const d=l.eolCount+1;d===1?u=new F(c,h,c,h+l.firstLineLength):u=new F(c,h,c+d-1,l.lastLineLength+1)}else u=new F(c,h,c,h);n=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){let n=F.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=F.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class nAe{constructor(e,t,n,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=cc(a);n[r]=new bd(a,l)}const s=new tm(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class sAe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&A5(e)&&(this.BOM=vxe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=X2e(this._tmpLineStarts,e);this.chunks.push(new bd(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=hL(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=RY(e))}finish(e=!0){return this._finish(),new nAe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=cc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class rAe{constructor(){this.changeType=1}}class ka{constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new ka(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new ka(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}}class PV{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class oAe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class aAe{constructor(e,t,n,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class lAe{constructor(){this.changeType=5}}class ef{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new ef(n,s,r,o)}}class lX{constructor(e){this.changes=e}}class gD{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=ef.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=gD._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new gD(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:s,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}class cAe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],s=[];for(let r=0;r<t;r++)n[r]=null,s[r]=!1;this._beginState=qv(this._beginState,e,n),this._valid=qv(this._valid,e,s),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const s=this.getBeginState(t+1);if(s===null||!n.equals(s)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let r=t+1;for(;r<e&&this._isValid(r);)r++;this._invalidLineStartIndex=r}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,r=Math.min(n,t);for(let o=r;o>=0;o--)this._invalidateLine(e.startLineNumber+o-1);this._acceptDeleteRange(e),this._acceptInsertText(new q(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class hAe extends te{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isDisposed=!1,this._tokenizationStateStore=new cAe,this._tokenizationSupport=null,this._register(Li.onDidChange(n=>{const s=this._textModel.getLanguageId();n.changedLanguages.indexOf(s)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let s=0,r=n.changes.length;s<r;s++){const o=n.changes[s],[a]=Vm(o.text);this._tokenizationStateStore.applyEdits(o.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=uAe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&EN(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){const e=this._textModel.getLineCount(),t=1,n=new xE,s=qc.create(!1);let r=-1;for(;this._hasLinesToTokenize()&&!(s.elapsed()>t||(r=this._tokenizeOneInvalidLine(n),r>=e)););this._beginBackgroundTokenization(),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new xE;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new xE;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),s=this._textModel.getLineCount(),r=t-1;for(let o=this._tokenizationStateStore.invalidLineStartIndex;o<=r;o++){const a=this._textModel.getLineContent(o+1),l=this._tokenizationStateStore.getBeginState(o),c=DE(this._languageIdCodec,n,this._tokenizationSupport,a,!0,l);e.add(o+1,c.tokens),this._tokenizationStateStore.setEndState(s,o,c.endState),o=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let s=this._textModel.getLineFirstNonWhitespaceColumn(t);const r=[];let o=null;for(let c=t-1;s>1&&c>=1;c--){const h=this._textModel.getLineFirstNonWhitespaceColumn(c);if(h!==0&&h<s){if(o=this._tokenizationStateStore.getBeginState(c-1),o)break;r.push(this._textModel.getLineContent(c)),s=h}}o||(o=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let l=o;for(let c=r.length-1;c>=0;c--)l=DE(this._languageIdCodec,a,this._tokenizationSupport,r[c],!1,l).endState;for(let c=t;c<=n;c++){const h=this._textModel.getLineContent(c),u=DE(this._languageIdCodec,a,this._tokenizationSupport,h,!0,l);e.add(c,u.tokens),this._tokenizationStateStore.setFakeTokens(c-1),l=u.endState}}}function uAe(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:Li.get(e),n=null;if(t)try{n=t.getInitialState()}catch(s){Ze(s),t=null}return[t,n]}function DE(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenize2(n,s,r.clone(),0)}catch(a){Ze(a)}return o||(o=XY(i.encodeLanguageId(e),n,r,0)),wn.convertToEndOffset(o.tokens,n.length),o}function tu(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class tt{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=tu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ta{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=tu(Math.max(Math.min(1,t),0),3),this.l=tu(Math.max(Math.min(1,n),0),3),this.a=tu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(n-s)/u+(n<s?6:0);break;case n:l=(s-t)/u+2;break;case s:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new ta(l,c,h,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,h=2*s-c;o=ta._hue2rgb(h,c,t+1/3),a=ta._hue2rgb(h,c,t),l=ta._hue2rgb(h,c,t-1/3)}return new tt(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class pl{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=tu(Math.max(Math.min(1,t),0),3),this.v=tu(Math.max(Math.min(1,n),0),3),this.a=tu(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((n-s)/a%6+6)%6:r===n?c=(s-t)/a+2:c=(t-n)/a+4,new pl(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new tt(c,h,u,r)}}class Z{constructor(e){if(e)if(e instanceof tt)this.rgba=e;else if(e instanceof ta)this._hsla=e,this.rgba=ta.toRGBA(e);else if(e instanceof pl)this._hsva=e,this.rgba=pl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Z.Format.CSS.parseHex(e)||Z.red}get hsla(){return this._hsla?this._hsla:ta.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:pl.fromRGBA(this.rgba)}equals(e){return!!e&&tt.equals(this.rgba,e.rgba)&&ta.equals(this.hsla,e.hsla)&&pl.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Z._relativeLuminanceForComponent(this.rgba.r),t=Z._relativeLuminanceForComponent(this.rgba.g),n=Z._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return tu(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Z(new ta(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Z(new ta(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new Z(new tt(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Z(new tt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Z.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}}Z.white=new Z(new tt(255,255,255,1));Z.black=new Z(new tt(0,0,0,1));Z.red=new Z(new tt(255,0,0,1));Z.blue=new Z(new tt(0,0,255,1));Z.cyan=new Z(new tt(0,255,255,1));Z.lightgrey=new Z(new tt(211,211,211,1));Z.transparent=new Z(new tt(0,0,0,0));(function(i){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=n;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function h(f){return f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f)}t.format=h;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new i(new tt(p,m,v,1))}if(g===9){const p=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),m=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),b=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new i(new tt(p,m,v,b/255))}if(g===4){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),v=d(f.charCodeAt(3));return new i(new tt(16*p+p,16*m+m,16*v+v))}if(g===5){const p=d(f.charCodeAt(1)),m=d(f.charCodeAt(2)),v=d(f.charCodeAt(3)),b=d(f.charCodeAt(4));return new i(new tt(16*p+p,16*m+m,16*v+v,(16*b+b)/255))}return null}t.parseHex=u;function d(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(Z||(Z={}));const Bw=bt("undoRedoService");class cX{constructor(e,t){this.resource=e,this.elements=t}}class Wm{constructor(){this.id=Wm._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Wm._ID=0;Wm.None=new Wm;class dl{constructor(){this.id=dl._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}dl._ID=0;dl.None=new dl;class FV{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class dAe{constructor(e,t,n,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s}}class fAe extends dAe{constructor(e,t,n,s,r){super(e,t,n,s),this.minVisibleColumnIndentation=r}}class gAe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function pAe(i,e,t,n){return i!==t?yi(t-i,n):yi(0,n-e)}const Kc=0;function mAe(i){return i===0}const Cr=Math.pow(2,26);function yi(i,e){return i*Cr+e}function iu(i){const e=i,t=Math.floor(e/Cr),n=e-t*Cr;return new gAe(t,n)}function _Ae(i){return Math.floor(i/Cr)}function xn(i,e){return e<Cr?i+e:i-i%Cr+e}function bAe(i,e){const t=i,n=e;if(n-t<=0)return Kc;const r=Math.floor(t/Cr),o=Math.floor(n/Cr),a=n-o*Cr;if(r===o){const l=t-r*Cr;return yi(0,a-l)}else return yi(o-r,a)}function fS(i,e){return i<e}function Bd(i,e){return i<=e}function zy(i,e){return i>=e}function Hy(i){return yi(i.lineNumber-1,i.column-1)}function Rb(i,e){const t=i,n=Math.floor(t/Cr),s=t-n*Cr,r=e,o=Math.floor(r/Cr),a=r-o*Cr;return new F(n+1,s+1,o+1,a+1)}function vAe(i){const e=Nl(i);return yi(e.length-1,e[e.length-1].length)}class BV{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class wAe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>dP.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return bAe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?yi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):yi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=iu(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?yi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):yi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Bd(n,e)){this.nextEditIdx++;const s=iu(n),r=iu(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class dP{constructor(e,t,n){this.endOffsetBeforeObj=iu(t),this.endOffsetAfterObj=iu(xn(e,n)),this.offsetObj=iu(e)}static from(e){return new dP(e.startOffset,e.endOffset,e.newLength)}}class Et{static visibleColumnFromColumn(e,t,n){const s=e.length,r=t-1<s?t-1:s;let o=0,a=0;for(;a<r;){const l=mc(e,r,a);if(a+=l>=65536?2:1,l===9)o=Et.nextRenderTabStop(o,n);else{let c=Ug(l);for(;a<r;){const h=mc(e,r,a),u=Ug(h);if(yb(c,u))break;a+=h>=65536?2:1,c=u}ha(l)||wb(l)?o=o+2:o=o+1}}return o}static visibleColumnsByColumns(e,t){const n=e.length;let s=new Array;s.push(-1);let r=0,o=0;for(;o<n;){const a=mc(e,n,o);if(o+=a>=65536?2:1,s.push(r),a>=65536&&s.push(r),a===9)r=Et.nextRenderTabStop(r,t);else{let l=Ug(a);for(;o<n;){const c=mc(e,n,o),h=Ug(c);if(yb(l,h))break;o+=c>=65536?2:1,s.push(r),a>=65536&&s.push(r),l=h}ha(a)||wb(a)?r=r+2:r=r+1}}return s.push(r),s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length;let r=0,o=1,a=0;for(;a<s;){const l=mc(e,s,a);a+=l>=65536?2:1;let c;if(l===9)c=Et.nextRenderTabStop(r,n);else{let u=Ug(l);for(;a<s;){const d=mc(e,s,a),f=Ug(d);if(yb(u,f))break;a+=d>=65536?2:1,u=f}ha(l)||wb(l)?c=r+2:c=r+1}const h=a+1;if(c>=t){const u=t-r;return c-t<u?h:o}r=c,o=h}return s+1}static columnFromVisibleColumn2(e,t,n,s){let r=this.columnFromVisibleColumn(t.getLineContent(n),s,e.tabSize),o=t.getLineMinColumn(n);if(r<o)return o;let a=t.getLineMaxColumn(n);return r>a?a:r}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const gS=new Array;class Ri{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=Ri.cache[e];return n||(n=new Ri(e,t),Ri.cache[e]=n),n}return new Ri(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:Ri.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),Ri.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===gS&&e.additionalItems===gS)return t===this.items?this:t===e.items?e:Ri.create(t,gS);const n=new Array;for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return Ri.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Ri.cache=new Array(129);Ri.empty=Ri.create(0,gS);const VV={getKey(i){return i}};class yAe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class fP{constructor(e){this._length=e}get length(){return this._length}}class Qv extends fP{constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}static create(e,t,n){let s=e.length;return t&&(s=xn(s,t.length)),n&&(s=xn(s,n.length)),new Qv(s,e,t,n,t?t.missingOpeningBracketIds:Ri.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Qv(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(xn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Pl extends fP{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=xn(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=xn(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new CAe(r,e.listHeight+1,e,t,n,o):new Xv(r,e.listHeight+1,e,t,n,o)}static getEmpty(){return new SAe(Kc,0,[],Ri.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=xn(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=xn(s,o.length))}return this.cachedMinIndentation=n,n}}class Xv extends Pl{constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new Xv(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class CAe extends Xv{toMutable(){return new Xv(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class pD extends Pl{constructor(e,t,n,s){super(e,t,s),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new pD(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class SAe extends pD{toMutable(){return new pD(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const xAe=[];class gP extends fP{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return xAe}deepClone(){return this}}class cp extends gP{get kind(){return 0}get missingOpeningBracketIds(){return Ri.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=iu(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=_Ae(xn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=Et.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class tf extends gP{constructor(e){super(e)}static create(e){const t=e,n=tf.cacheByLength.get(t);if(n)return n;const s=new tf(e);return tf.cacheByLength.set(t,s),s}get kind(){return 1}get missingOpeningBracketIds(){return Ri.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}tf.cacheByLength=new Map;class DAe extends gP{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Bh{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}}class kAe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new LAe(this.textModel,this.bracketTokens),this._offset=Kc,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return yi(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=xn(this._offset,e);const t=iu(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=xn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class LAe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Pr.getTokenType(l)===0,h=r.getEndOffset(this.lineTokenOffset);if(c&&h!==this.lineCharOffset){const u=r.getLanguageId(this.lineTokenOffset),d=this.line.substring(this.lineCharOffset,h),f=this.bracketTokens.getSingleLanguageBracketTokens(u),g=f.regExpGlobal;if(g){g.lastIndex=0;const p=g.exec(d);p&&(a=f.getToken(p[0]),a&&(this.lineCharOffset+=p.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=pAe(e,t,this.lineIdx,this.lineCharOffset);return new Bh(s,0,-1,Ri.getEmpty(),new cp(s))}}class AAe{constructor(e,t){this.text=e,this._offset=Kc,this.idx=0;const s=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,r=[];let o,a=0,l=0,c=0,h=0;const u=new Array;for(let g=0;g<60;g++)u.push(new Bh(yi(0,g),0,-1,Ri.getEmpty(),new cp(yi(0,g))));const d=new Array;for(let g=0;g<60;g++)d.push(new Bh(yi(1,g),0,-1,Ri.getEmpty(),new cp(yi(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let m;if(h===a){const v=g-c;if(v<u.length)m=u[v];else{const b=yi(0,v);m=new Bh(b,0,-1,Ri.getEmpty(),new cp(b))}}else{const v=a-h,b=g-l;if(v===1&&b<d.length)m=d[b];else{const w=yi(v,b);m=new Bh(w,0,-1,Ri.getEmpty(),new cp(w))}}r.push(m)}r.push(t.getToken(p)),c=g+p.length,h=a}}const f=e.length;if(c!==f){const g=h===a?yi(0,f-c):yi(a-h,f-l);r.push(new Bh(g,0,-1,Ri.getEmpty(),new cp(g)))}this.length=yi(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new rSe}}class mD{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,c){return t.getKey(`${l}:::${c}`)}const s=e.characterPair.getColorizedBrackets(),r=new Map,o=new Set;for(const[l,c]of s){o.add(l);let h=r.get(c);const u=n(e.languageId,l);h||(h={openingBrackets:Ri.getEmpty(),first:u},r.set(c,h)),h.openingBrackets=h.openingBrackets.add(u,VV)}const a=new Map;for(const[l,c]of r){const h=yi(0,l.length);a.set(l,new Bh(h,2,c.first,c.openingBrackets,tf.create(h)))}for(const l of o){const c=yi(0,l.length),h=n(e.languageId,l);a.set(l,new Bh(c,1,h,Ri.getEmpty().add(h,VV),tf.create(c)))}return new mD(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>EAe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function EAe(i){const e=Ca(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class IAe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=mD.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=mD.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function TAe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?hX(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())WV(n,s)<=WV(s,o)?(n=kE(n,s),s=o):s=kE(s,o);return kE(n,s)}function hX(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Pl.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Pl.create23(i[0],i[1],t>=3?i[2]:null,e)}function WV(i,e){return Math.abs(i.listHeight-e.listHeight)}function kE(i,e){return i.listHeight===e.listHeight?Pl.create23(i,e,null,!1):i.listHeight>e.listHeight?NAe(i,e):MAe(e,i)}function NAe(i,e){i=i.toMutable();let t=i;const n=new Array;let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Pl.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Pl.create23(i,s,null,!1):i}function MAe(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Pl.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Pl.create23(s,i,null,!1):i}class RAe{constructor(e){this.lastOffset=Kc,this.nextNodes=[e],this.offsets=[Kc],this.idxs=[]}readLongestNodeAt(e,t){if(fS(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=p_(this.nextNodes);if(!n)return;const s=p_(this.offsets);if(fS(e,s))return;if(fS(s,e))if(xn(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=LE(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=LE(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=p_(this.offsets),t=p_(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=p_(this.nextNodes),s=LE(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(xn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function LE(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function p_(i){return i.length>0?i[i.length-1]:void 0}function zV(i,e,t,n){return new OAe(i,e,t,n).parseDocument()}class OAe{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new RAe(n):void 0,this.positionMapper=new wAe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ri.getEmpty());return e||(e=Pl.getEmpty()),e}parseList(e){const t=new Array;for(;;){const s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;const r=this.parseChild(e);r.kind===4&&r.childrenLength===0||t.push(r)}return this.oldNodeReader?TAe(t):hX(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!mAe(n)){const s=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),r=>fS(r.length,n)?r.canBeReused(e):!1);if(s)return this._itemsFromCache++,this.tokenizer.skip(s.length),s}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new DAe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),s=this.parseList(n),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===t.bracketId||r.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Qv.create(t.astNode,s,r.astNode)):Qv.create(t.astNode,s,null);default:throw new Error("unexpected")}}}class PAe extends te{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.cache=this._register(new Er),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.cache.clear(),this.updateCache()})),this._register(e.onDidChangeLanguage(n=>{this.cache.clear(),this.updateCache()})),this._register(this.languageConfigurationService.onDidChange(n=>{var s;(!n.languageId||!((s=this.cache.value)===null||s===void 0)&&s.object.didLanguageChange(n.languageId))&&(this.cache.clear(),this.updateCache())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateCache(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.cache.value){const e=new de;this.cache.value=FAe(e.add(new BAe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.cache.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.cache.clear(),this.onDidChangeEmitter.fire()}handleContentChanged(e){var t;(t=this.cache.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateCache(),((t=this.cache.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}}function FAe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class BAe extends te{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new z,this.denseKeyProvider=new yAe,this.brackets=new IAe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const s=n.map(r=>new BV(yi(r.fromLineNumber-1,0),yi(r.toLineNumber,0),yi(r.toLineNumber-r.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(s,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new AAe(this.textModel.getValue(),n);this.initialAstWithoutTokens=zV(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const s=F.lift(n.range);return new BV(Hy(s.getStartPosition()),Hy(s.getEndPosition()),vAe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new kAe(this.textModel,this.brackets);return zV(r,e,s,n)}getBracketsInRange(e){const t=yi(e.startLineNumber-1,e.startColumn-1),n=yi(e.endLineNumber-1,e.endColumn-1),s=new Array,r=this.initialAstWithoutTokens||this.astWithTokens;return G_(r,Kc,r.length,t,n,s),s}getBracketPairsInRange(e,t){const n=new Array,s=Hy(e.getStartPosition()),r=Hy(e.getEndPosition()),o=this.initialAstWithoutTokens||this.astWithTokens,a=new VAe(n,t,this.textModel);return uX(o,Kc,o.length,s,r,a),n}}function G_(i,e,t,n,s,r,o=0){if(i.kind===1){const a=Rb(e,t);r.push(new FV(a,o-1,!1))}else if(i.kind===3){const a=Rb(e,t);r.push(new FV(a,o-1,!0))}else if(i.kind===4)for(const a of i.children)t=xn(e,a.length),Bd(e,s)&&zy(t,n)&&G_(a,e,t,n,s,r,o),e=t;else if(i.kind===2){o++;{const a=i.openingBracket;t=xn(e,a.length),Bd(e,s)&&zy(t,n)&&G_(a,e,t,n,s,r,o),e=t}if(i.child){const a=i.child;t=xn(e,a.length),Bd(e,s)&&zy(t,n)&&G_(a,e,t,n,s,r,o),e=t}if(i.closingBracket){const a=i.closingBracket;t=xn(e,a.length),Bd(e,s)&&zy(t,n)&&G_(a,e,t,n,s,r,o),e=t}}}class VAe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function uX(i,e,t,n,s,r,o=0){var a;if(i.kind===2){const c=xn(e,i.openingBracket.length);let h=-1;r.includeMinIndentation&&(h=i.computeMinIndentation(e,r.textModel)),r.result.push(new fAe(Rb(e,t),Rb(e,c),i.closingBracket?Rb(xn(c,((a=i.child)===null||a===void 0?void 0:a.length)||Kc),t):void 0,o,h)),o++}let l=e;for(const c of i.children){const h=l;l=xn(l,c.length),Bd(h,s)&&Bd(n,l)&&uX(c,h,l,n,s,r,o)}}const dX={ColorContribution:"base.contributions.colors"};class WAe{constructor(){this._onDidChangeSchema=new z,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,s=!1,r){let o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const s=n.defaults[t.type];return hc(s,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const PL=new WAe;En.add(dX.ColorContribution,PL);function V(i,e,t,n,s){return PL.registerColor(i,e,t,n,s)}const Ie=V("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},_("foreground","Overall foreground color. This color is only used if not overridden by a component.")),zAe=V("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},_("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),AE=V("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},_("iconForeground","The default color for icons in the workbench.")),ku=V("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},_("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Vi=V("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},_("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Ns=V("contrastActiveBorder",{light:null,dark:null,hc:ku},_("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),FL=V("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},_("textLinkForeground","Foreground color for links in text.")),BL=V("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},_("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),fX=V("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:Z.black},_("textCodeBlockBackground","Background color for code blocks in text.")),zm=V("widget.shadow",{dark:qt(Z.black,.36),light:qt(Z.black,.16),hc:null},_("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),gX=V("input.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},_("inputBoxBackground","Input box background.")),pX=V("input.foreground",{dark:Ie,light:Ie,hc:Ie},_("inputBoxForeground","Input box foreground.")),mX=V("input.border",{dark:null,light:null,hc:Vi},_("inputBoxBorder","Input box border.")),c4=V("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Vi},_("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),h4=V("inputOption.activeBackground",{dark:qt(ku,.4),light:qt(ku,.2),hc:Z.transparent},_("inputOption.activeBackground","Background color of activated options in input fields.")),u4=V("inputOption.activeForeground",{dark:Z.white,light:Z.black,hc:null},_("inputOption.activeForeground","Foreground color of activated options in input fields.")),pP=V("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:Z.black},_("inputValidationInfoBackground","Input validation background color for information severity.")),mP=V("inputValidation.infoForeground",{dark:null,light:null,hc:null},_("inputValidationInfoForeground","Input validation foreground color for information severity.")),_P=V("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Vi},_("inputValidationInfoBorder","Input validation border color for information severity.")),_X=V("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:Z.black},_("inputValidationWarningBackground","Input validation background color for warning severity.")),bX=V("inputValidation.warningForeground",{dark:null,light:null,hc:null},_("inputValidationWarningForeground","Input validation foreground color for warning severity.")),vX=V("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Vi},_("inputValidationWarningBorder","Input validation border color for warning severity.")),wX=V("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:Z.black},_("inputValidationErrorBackground","Input validation background color for error severity.")),yX=V("inputValidation.errorForeground",{dark:null,light:null,hc:null},_("inputValidationErrorForeground","Input validation foreground color for error severity.")),CX=V("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Vi},_("inputValidationErrorBorder","Input validation border color for error severity.")),EE=V("dropdown.background",{dark:"#3C3C3C",light:Z.white,hc:Z.black},_("dropdownBackground","Dropdown background.")),HV=V("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:Z.white},_("dropdownForeground","Dropdown foreground.")),HAe=V("button.foreground",{dark:Z.white,light:Z.white,hc:Z.white},_("buttonForeground","Button foreground color.")),d4=V("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},_("buttonBackground","Button background color.")),UAe=V("button.hoverBackground",{dark:EX(d4,.2),light:AX(d4,.2),hc:null},_("buttonHoverBackground","Button background color when hovering.")),Ob=V("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:Z.black},_("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Pb=V("badge.foreground",{dark:Z.white,light:"#333",hc:Z.white},_("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Vw=V("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},_("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Fb=V("scrollbarSlider.background",{dark:Z.fromHex("#797979").transparent(.4),light:Z.fromHex("#646464").transparent(.4),hc:qt(Vi,.6)},_("scrollbarSliderBackground","Scrollbar slider background color.")),Bb=V("scrollbarSlider.hoverBackground",{dark:Z.fromHex("#646464").transparent(.7),light:Z.fromHex("#646464").transparent(.7),hc:qt(Vi,.8)},_("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Vb=V("scrollbarSlider.activeBackground",{dark:Z.fromHex("#BFBFBF").transparent(.4),light:Z.fromHex("#000000").transparent(.6),hc:Vi},_("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),$Ae=V("progressBar.background",{dark:Z.fromHex("#0E70C0"),light:Z.fromHex("#0E70C0"),hc:Vi},_("progressBarBackground","Background color of the progress bar that can show for long running operations.")),jAe=V("editorError.background",{dark:null,light:null,hc:null},_("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Wb=V("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},_("editorError.foreground","Foreground color of error squigglies in the editor.")),SX=V("editorError.border",{dark:null,light:null,hc:Z.fromHex("#E47777").transparent(.8)},_("errorBorder","Border color of error boxes in the editor.")),qAe=V("editorWarning.background",{dark:null,light:null,hc:null},_("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Bc=V("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},_("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),VL=V("editorWarning.border",{dark:null,light:null,hc:Z.fromHex("#FFCC00").transparent(.8)},_("warningBorder","Border color of warning boxes in the editor.")),GAe=V("editorInfo.background",{dark:null,light:null,hc:null},_("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),pa=V("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},_("editorInfo.foreground","Foreground color of info squigglies in the editor.")),bP=V("editorInfo.border",{dark:null,light:null,hc:Z.fromHex("#3794FF").transparent(.8)},_("infoBorder","Border color of info boxes in the editor.")),KAe=V("editorHint.foreground",{dark:Z.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},_("editorHint.foreground","Foreground color of hint squigglies in the editor.")),ZAe=V("editorHint.border",{dark:null,light:null,hc:Z.fromHex("#eeeeee").transparent(.8)},_("hintBorder","Border color of hint boxes in the editor.")),jr=V("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:Z.black},_("editorBackground","Editor background color.")),nu=V("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:Z.white},_("editorForeground","Editor default foreground color.")),Ro=V("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},_("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),su=V("editorWidget.foreground",{dark:Ie,light:Ie,hc:Ie},_("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),nf=V("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Vi},_("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),YAe=V("editorWidget.resizeBorder",{light:null,dark:null,hc:null},_("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),UV=V("quickInput.background",{dark:Ro,light:Ro,hc:Ro},_("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),QAe=V("quickInput.foreground",{dark:su,light:su,hc:su},_("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),XAe=V("quickInputTitle.background",{dark:new Z(new tt(255,255,255,.105)),light:new Z(new tt(0,0,0,.06)),hc:"#000000"},_("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),JAe=V("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:Z.white},_("pickerGroupForeground","Quick picker color for grouping labels.")),eEe=V("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:Z.white},_("pickerGroupBorder","Quick picker color for grouping borders.")),tEe=V("keybindingLabel.background",{dark:new Z(new tt(128,128,128,.17)),light:new Z(new tt(221,221,221,.4)),hc:Z.transparent},_("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),iEe=V("keybindingLabel.foreground",{dark:Z.fromHex("#CCCCCC"),light:Z.fromHex("#555555"),hc:Z.white},_("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),nEe=V("keybindingLabel.border",{dark:new Z(new tt(51,51,51,.6)),light:new Z(new tt(204,204,204,.4)),hc:new Z(new tt(111,195,223))},_("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),sEe=V("keybindingLabel.bottomBorder",{dark:new Z(new tt(68,68,68,.6)),light:new Z(new tt(187,187,187,.4)),hc:new Z(new tt(111,195,223))},_("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),ru=V("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},_("editorSelectionBackground","Color of the editor selection.")),rEe=V("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},_("editorSelectionForeground","Color of the selected text for high contrast.")),vP=V("editor.inactiveSelectionBackground",{light:qt(ru,.5),dark:qt(ru,.5),hc:qt(ru,.5)},_("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),xX=V("editor.selectionHighlightBackground",{light:qV(ru,jr,.3,.6),dark:qV(ru,jr,.3,.6),hc:null},_("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.selectionHighlightBorder",{light:null,dark:null,hc:Ns},_("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));const oEe=V("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},_("editorFindMatch","Color of the current search match.")),f4=V("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},_("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),aEe=V("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},_("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),lEe=V("editor.findMatchBorder",{light:null,dark:null,hc:Ns},_("editorFindMatchBorder","Border color of the current search match.")),cEe=V("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Ns},_("findMatchHighlightBorder","Border color of the other search matches.")),hEe=V("editor.findRangeHighlightBorder",{dark:null,light:null,hc:qt(Ns,.4)},_("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),uEe=V("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},_("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Jv=V("editorHoverWidget.background",{light:Ro,dark:Ro,hc:Ro},_("hoverBackground","Background color of the editor hover.")),dEe=V("editorHoverWidget.foreground",{light:su,dark:su,hc:su},_("hoverForeground","Foreground color of the editor hover.")),fEe=V("editorHoverWidget.border",{light:nf,dark:nf,hc:nf},_("hoverBorder","Border color of the editor hover.")),gEe=V("editorHoverWidget.statusBarBackground",{dark:EX(Jv,.2),light:AX(Jv,.05),hc:Ro},_("statusBarBackground","Background color of the editor hover status bar.")),pEe=V("editorLink.activeForeground",{dark:"#4E94CE",light:Z.blue,hc:Z.cyan},_("activeLinkForeground","Color of active links.")),im=V("editorInlayHint.foreground",{dark:qt(Pb,.8),light:qt(Pb,.8),hc:Pb},_("editorInlayHintForeground","Foreground color of inline hints")),nm=V("editorInlayHint.background",{dark:qt(Ob,.6),light:qt(Ob,.3),hc:Ob},_("editorInlayHintBackground","Background color of inline hints"));V("editorInlayHint.typeForeground",{dark:im,light:im,hc:im},_("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));V("editorInlayHint.typeBackground",{dark:nm,light:nm,hc:nm},_("editorInlayHintBackgroundTypes","Background color of inline hints for types"));V("editorInlayHint.parameterForeground",{dark:im,light:im,hc:im},_("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));V("editorInlayHint.parameterBackground",{dark:nm,light:nm,hc:nm},_("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const mEe=V("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},_("editorLightBulbForeground","The color used for the lightbulb actions icon.")),_Ee=V("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),g4=new Z(new tt(155,185,85,.2)),p4=new Z(new tt(255,0,0,.2)),DX=V("diffEditor.insertedTextBackground",{dark:g4,light:g4,hc:null},_("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),kX=V("diffEditor.removedTextBackground",{dark:p4,light:p4,hc:null},_("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),bEe=V("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},_("diffEditorInsertedOutline","Outline color for the text that got inserted.")),vEe=V("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},_("diffEditorRemovedOutline","Outline color for text that got removed.")),wEe=V("diffEditor.border",{dark:null,light:null,hc:Vi},_("diffEditorBorder","Border color between the two text editors.")),yEe=V("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},_("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),CEe=V("list.focusBackground",{dark:null,light:null,hc:null},_("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),SEe=V("list.focusForeground",{dark:null,light:null,hc:null},_("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xEe=V("list.focusOutline",{dark:ku,light:ku,hc:Ns},_("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ou=V("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},_("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),au=V("list.activeSelectionForeground",{dark:Z.white,light:Z.white,hc:null},_("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),pS=V("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},_("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),DEe=V("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},_("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kEe=V("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},_("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),LEe=V("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},_("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),AEe=V("list.inactiveFocusBackground",{dark:null,light:null,hc:null},_("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),EEe=V("list.inactiveFocusOutline",{dark:null,light:null,hc:null},_("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),IEe=V("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},_("listHoverBackground","List/Tree background when hovering over items using the mouse.")),TEe=V("list.hoverForeground",{dark:null,light:null,hc:null},_("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),NEe=V("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},_("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),sm=V("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:ku},_("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),IE=V("list.focusHighlightForeground",{dark:sm,light:cIe(ou,sm,"#9DDDFF"),hc:sm},_("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),MEe=V("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:Z.black},_("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),REe=V("listFilterWidget.outline",{dark:Z.transparent,light:Z.transparent,hc:"#f38518"},_("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),OEe=V("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Vi},_("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),PEe=V("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},_("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),FEe=V("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},_("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),$V=V("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,_("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),mS=V("quickInputList.focusForeground",{dark:au,light:au,hc:au},_("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),_S=V("quickInputList.focusIconForeground",{dark:pS,light:pS,hc:pS},_("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),bS=V("quickInputList.focusBackground",{dark:e1($V,ou),light:e1($V,ou),hc:null},_("quickInput.listFocusBackground","Quick picker background color for the focused item.")),BEe=V("menu.border",{dark:null,light:null,hc:Vi},_("menuBorder","Border color of menus.")),VEe=V("menu.foreground",{dark:HV,light:Ie,hc:HV},_("menuForeground","Foreground color of menu items.")),WEe=V("menu.background",{dark:EE,light:EE,hc:EE},_("menuBackground","Background color of menu items.")),zEe=V("menu.selectionForeground",{dark:au,light:au,hc:au},_("menuSelectionForeground","Foreground color of the selected menu item in menus.")),HEe=V("menu.selectionBackground",{dark:ou,light:ou,hc:ou},_("menuSelectionBackground","Background color of the selected menu item in menus.")),UEe=V("menu.selectionBorder",{dark:null,light:null,hc:Ns},_("menuSelectionBorder","Border color of the selected menu item in menus.")),$Ee=V("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Vi},_("menuSeparatorBackground","Color of a separator menu item in menus.")),jEe=V("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},_("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),qEe=V("editor.snippetTabstopHighlightBackground",{dark:new Z(new tt(124,124,124,.3)),light:new Z(new tt(10,50,100,.2)),hc:new Z(new tt(124,124,124,.3))},_("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),GEe=V("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},_("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),KEe=V("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},_("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),ZEe=V("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Z(new tt(10,50,100,.5)),hc:"#525252"},_("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),wP=V("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},_("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),YEe=V("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},_("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),LX=V("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},_("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),QEe=V("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},_("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),jV=V("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},_("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),XEe=V("minimap.errorHighlight",{dark:new Z(new tt(255,18,18,.7)),light:new Z(new tt(255,18,18,.7)),hc:new Z(new tt(255,50,50,1))},_("minimapError","Minimap marker color for errors.")),JEe=V("minimap.warningHighlight",{dark:Bc,light:Bc,hc:VL},_("overviewRuleWarning","Minimap marker color for warnings.")),eIe=V("minimap.background",{dark:null,light:null,hc:null},_("minimapBackground","Minimap background color.")),tIe=V("minimap.foregroundOpacity",{dark:Z.fromHex("#000f"),light:Z.fromHex("#000f"),hc:Z.fromHex("#000f")},_("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),iIe=V("minimapSlider.background",{light:qt(Fb,.5),dark:qt(Fb,.5),hc:qt(Fb,.5)},_("minimapSliderBackground","Minimap slider background color.")),nIe=V("minimapSlider.hoverBackground",{light:qt(Bb,.5),dark:qt(Bb,.5),hc:qt(Bb,.5)},_("minimapSliderHoverBackground","Minimap slider background color when hovering.")),sIe=V("minimapSlider.activeBackground",{light:qt(Vb,.5),dark:qt(Vb,.5),hc:qt(Vb,.5)},_("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),rIe=V("problemsErrorIcon.foreground",{dark:Wb,light:Wb,hc:Wb},_("problemsErrorIconForeground","The color used for the problems error icon.")),oIe=V("problemsWarningIcon.foreground",{dark:Bc,light:Bc,hc:Bc},_("problemsWarningIconForeground","The color used for the problems warning icon.")),aIe=V("problemsInfoIcon.foreground",{dark:pa,light:pa,hc:pa},_("problemsInfoIconForeground","The color used for the problems info icon."));function lIe(i,e){var t,n,s;switch(i.op){case 0:return(t=hc(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=hc(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(s=hc(i.value,e))===null||s===void 0?void 0:s.transparent(i.factor);case 3:for(const a of i.values){const l=hc(a,e);if(l)return l}return;case 5:return hc(e.defines(i.if)?i.then:i.else,e);case 4:const r=hc(i.value,e);if(!r)return;const o=hc(i.background,e);return o?r.isDarkerThan(o)?Z.getLighterColor(r,o,i.factor).transparent(i.transparency):Z.getDarkerColor(r,o,i.factor).transparent(i.transparency):r.transparent(i.factor*i.transparency);default:throw jxe()}}function AX(i,e){return{op:0,value:i,factor:e}}function EX(i,e){return{op:1,value:i,factor:e}}function qt(i,e){return{op:2,value:i,factor:e}}function e1(...i){return{op:3,values:i}}function cIe(i,e,t){return{op:5,if:i,then:e,else:t}}function qV(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function hc(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?Z.fromHex(i):e.getColor(i);if(i instanceof Z)return i;if(typeof i=="object")return lIe(i,e)}}const IX="vscode://schemas/workbench-colors";let TX=En.as(bL.JSONContribution);TX.registerSchema(IX,PL.getColorSchema());const GV=new mi(()=>TX.notifySchemaChanged(IX),200);PL.onDidChangeSchema(()=>{GV.isScheduled()||GV.schedule()});const hIe=V("editor.lineHighlightBackground",{dark:null,light:null,hc:null},_("lineHighlight","Background color for the highlight of line at the cursor position.")),KV=V("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},_("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),uIe=V("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},_("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),dIe=V("editor.rangeHighlightBorder",{dark:null,light:null,hc:Ns},_("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),fIe=V("editor.symbolHighlightBackground",{dark:f4,light:f4,hc:null},_("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),gIe=V("editor.symbolHighlightBorder",{dark:null,light:null,hc:Ns},_("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),NX=V("editorCursor.foreground",{dark:"#AEAFAD",light:Z.black,hc:Z.white},_("caret","Color of the editor cursor.")),pIe=V("editorCursor.background",null,_("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),sf=V("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},_("editorWhitespaces","Color of whitespace characters in the editor.")),WL=V("editorIndentGuide.background",{dark:sf,light:sf,hc:sf},_("editorIndentGuides","Color of the editor indentation guides.")),zL=V("editorIndentGuide.activeBackground",{dark:sf,light:sf,hc:sf},_("editorActiveIndentGuide","Color of the active editor indentation guides.")),MX=V("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:Z.white},_("editorLineNumbers","Color of editor line numbers.")),TE=V("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Ns},_("editorActiveLineNumber","Color of editor active line number"),!1,_("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),mIe=V("editorLineNumber.activeForeground",{dark:TE,light:TE,hc:TE},_("editorActiveLineNumber","Color of editor active line number")),_Ie=V("editorRuler.foreground",{dark:"#5A5A5A",light:Z.lightgrey,hc:Z.white},_("editorRuler","Color of the editor rulers."));V("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},_("editorCodeLensForeground","Foreground color of editor CodeLens"));const bIe=V("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},_("editorBracketMatchBackground","Background color behind matching brackets")),vIe=V("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Vi},_("editorBracketMatchBorder","Color for matching brackets boxes")),wIe=V("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},_("editorOverviewRulerBorder","Color of the overview ruler border.")),yIe=V("editorOverviewRuler.background",null,_("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),CIe=V("editorGutter.background",{dark:jr,light:jr,hc:jr},_("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),SIe=V("editorUnnecessaryCode.border",{dark:null,light:null,hc:Z.fromHex("#fff").transparent(.8)},_("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),xIe=V("editorUnnecessaryCode.opacity",{dark:Z.fromHex("#000a"),light:Z.fromHex("#0007"),hc:null},_("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),RX=V("editorGhostText.border",{dark:null,light:null,hc:Z.fromHex("#fff").transparent(.8)},_("editorGhostTextBorder","Border color of ghost text in the editor.")),OX=V("editorGhostText.foreground",{dark:Z.fromHex("#ffffff56"),light:Z.fromHex("#0007"),hc:null},_("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),NE=new Z(new tt(0,122,204,.6));V("editorOverviewRuler.rangeHighlightForeground",{dark:NE,light:NE,hc:NE},_("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const DIe=V("editorOverviewRuler.errorForeground",{dark:new Z(new tt(255,18,18,.7)),light:new Z(new tt(255,18,18,.7)),hc:new Z(new tt(255,50,50,1))},_("overviewRuleError","Overview ruler marker color for errors.")),kIe=V("editorOverviewRuler.warningForeground",{dark:Bc,light:Bc,hc:VL},_("overviewRuleWarning","Overview ruler marker color for warnings.")),LIe=V("editorOverviewRuler.infoForeground",{dark:pa,light:pa,hc:bP},_("overviewRuleInfo","Overview ruler marker color for infos.")),PX=V("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},_("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),FX=V("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},_("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),BX=V("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},_("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),VX=V("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),WX=V("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),zX=V("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),AIe=V("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Z(new tt(255,18,18,.8)),light:new Z(new tt(255,18,18,.8)),hc:new Z(new tt(255,50,50,1))},_("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),EIe=V("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),IIe=V("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),TIe=V("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),NIe=V("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),MIe=V("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),RIe=V("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),OIe=V("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),PIe=V("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),FIe=V("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),BIe=V("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),VIe=V("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),WIe=V("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},_("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));ti((i,e)=>{const t=i.getColor(jr);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(nu);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const s=i.getColor(CIe);s&&e.addRule(`.monaco-editor .margin { background-color: ${s}; }`);const r=i.getColor(uIe);r&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${r}; }`);const o=i.getColor(dIe);o&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; }`);const a=i.getColor(fIe);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=i.getColor(gIe);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${l}; }`);const c=i.getColor(sf);c&&(e.addRule(`.monaco-editor .mtkw { color: ${c} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${c} !important; }`))});class zIe extends te{constructor(e){super(),this.textModel=e,this.colorProvider=new HX,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const s=new Array,r=this.textModel.bracketPairs.getBracketsInRange(e);for(const o of r)s.push({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o)},ownerId:0,range:o.range});return s}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new F(1,1,this.textModel.getLineCount(),1),e,t):[]}}class HX{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}ti((i,e)=>{const t=[PX,FX,BX,VX,WX,zX],n=new HX;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(AIe)}; }`);let s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});var HIe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ME=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function UIe(){return new sAe}function $Ie(i){const e=UIe();return e.acceptChunk(i),e.finish()}function ZV(i,e){return(typeof i=="string"?$Ie(i):i).create(e)}let Uy=0;const jIe=999,qIe=1e4;class GIe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const m_=()=>{throw new Error("Invalid change accessor")};class vc{constructor(){this._searchCanceledBrand=void 0}}vc.INSTANCE=new vc;function $y(i){return i instanceof vc?null:i}let Zr=class Xa extends te{constructor(e,t,n,s=null,r,o,a){super(),this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onWillDispose=this._register(new z),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new QIe(d=>this.handleBeforeFireDecorationsChangedEvent(d))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new z),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new z),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new z),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new z),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new z),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new z),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new XIe),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new z),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(d=>{this._onDidChangeContentOrInjectedText.fire(d.rawContentChangedEvent)})),Uy++,this.id="$model"+Uy,this.isForSimpleWidget=t.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=We.parse("inmemory://model/"+Uy):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=ZV(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=Xa.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new F(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=u>Xa.LARGE_FILE_SIZE_THRESHOLD||h>Xa.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>Xa.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||Cu,this._languageRegistryListener=this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=OY(Uy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new YV,this._commandManager=new oP(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Nr(this._modeService.languageIdCodec),this._tokens2=new uP(this._modeService.languageIdCodec),this._tokenization=new hAe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new PAe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new zIe(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=kV(e,t.tabSize,t.insertSpaces);return new lS({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new lS({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new tm([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new gD(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=ZV(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:s}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new YV,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ef([new rAe],this._versionId,!1,!1),this._createContentChanged2(new F(1,1,r,o),0,s,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ef([new lAe],this._versionId,!1,!1),this._createContentChanged2(new F(1,1,r,o),0,s,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Du(r)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=qIe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new lS({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;let l=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();let n=kV(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let s=0;for(let o=0;o<e.length;o++)e.charAt(o)==="	"?s+=t:s++;let r="";if(!n){let o=Math.floor(s/t);s=s%t;for(let a=0;a<o;a++)r+="	"}for(let o=0;o<s;o++)r+=" ";return r}static normalizeIndentation(e,t,n){let s=Xs(e);return s===-1&&(s=e.length),Xa._normalizeIndentationFromWhitespace(e.substring(0,s),t,n)+e.substring(s)}normalizeIndentation(e){return this._assertNotDisposed(),Xa.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(MY.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new GIe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const u=this.getLineMaxColumn(c);h>=u&&(h=u)}return n===r&&s===o&&a===c&&l===h&&e instanceof F&&!(e instanceof Ve)?e:new F(r,o,c,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(vn(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new q(1,1);if(s>o)return new q(o,this.getLineMaxColumn(o));if(r<=1)return new q(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new q(s,a);if(n===1){const l=this._buffer.getLineCharCode(s,r-2);if(vn(l))return new q(s,r-1)}return new q(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof q&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=vn(a),h=vn(l);return!c&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof F&&!(e instanceof Ve)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=vn(c),d=vn(h);return!u&&!d?new F(r,o,a,l):r===a&&o===l?new F(r,o-1,a,l-1):u&&d?new F(r,o-1,a,l+1):u?new F(r,o-1,a,l):new F(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new F(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=jIe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>F.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,d)=>u.startLineNumber-d.startLineNumber||u.startColumn-d.startColumn);const c=[];c.push(l.reduce((u,d)=>F.areIntersecting(u,d)?u.plusRange(d):(c.push(u),d)));let h;if(!n&&e.indexOf(`
`)<0){const d=new dd(e,n,s,r).parseSearchRequest();if(!d)return[];h=f=>this.findMatchesLineByLine(f,d,o,a)}else h=u=>Wy.findMatches(this,new dd(e,n,s,r),u,o,a);return c.map(h).reduce((u,d)=>u.concat(d),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new dd(e,n,s,r).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let u=new F(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),d=this.findMatchesLineByLine(u,c,o,1);return Wy.findNextMatch(this,new dd(e,n,s,r),a,o),d.length>0||(u=new F(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),d=this.findMatchesLineByLine(u,c,o,1),d.length>0)?d[0]:null}return Wy.findNextMatch(this,new dd(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return Wy.findPreviousMatch(this,new dd(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof iE?e:new iE(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=t.map(o=>({range:this.validateRange(o.range),text:o.text})),r=!0;if(e)for(let o=0,a=e.length;o<a;o++){let l=e[o],c=!1;for(let h=0,u=s.length;h<u;h++){let d=s[h].range,f=d.startLineNumber>l.endLineNumber,g=l.startLineNumber>d.endLineNumber;if(!f&&!g){c=!0;break}}if(!c){r=!1;break}}if(r)for(let o=0,a=this._trimAutoWhitespaceLines.length;o<a;o++){let l=this._trimAutoWhitespaceLines[o],c=this.getLineMaxColumn(l),h=!0;for(let u=0,d=s.length;u<d;u++){let f=s[u].range,g=s[u].text;if(!(l<f.startLineNumber||l>f.endLineNumber)&&!(l===f.startLineNumber&&f.startColumn===c&&f.isEmpty()&&g&&g.length>0&&g.charAt(0)===`
`)&&!(l===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)===`
`)){h=!1;break}}if(h){const u=new F(l,1,l,c);t.push(new iE(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new F(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new F(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,h=o.length;c<h;c++){const u=o[c],[d,f,g]=Vm(u.text);this._tokens.acceptEdit(u.range,d,f),this._tokens2.acceptEdit(u.range,d,f,g,u.text.length>0?u.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}let a=[];this._increaseVersionId();let l=n;for(let c=0,h=o.length;c<h;c++){const u=o[c],[d]=Vm(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,m=d,v=Math.min(p,m),b=m-p,w=r-l-b+f,y=w,x=w+m,L=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new q(y,1)),this.getOffsetAt(new q(x,this.getLineMaxColumn(x))),0),S=ka.fromDecorations(L),k=new Db(S);for(let D=v;D>=0;D--){const T=f+D,N=w+D;k.takeFromEndWhile(U=>U.lineNumber>N);const $=k.takeFromEndWhile(U=>U.lineNumber===N);a.push(new PV(T,this.getLineContent(N),$))}if(v<p){const D=f+v;a.push(new oAe(D+1,g))}if(v<m){const D=new Db(S),T=f+v,N=m-v,$=r-l-N+T+1;let U=[],ee=[];for(let he=0;he<N;he++){let fe=$+he;ee[he]=this.getLineContent(fe),D.takeWhile(Ce=>Ce.lineNumber<fe),U[he]=D.takeWhile(Ce=>Ce.lineNumber===fe)}a.push(new aAe(T+1,f+m,ee,U))}l+=b}this._emitContentChangedEvent(new ef(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(s=>new PV(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeContentOrInjectedText.fire(new lX(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,XV(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)},s=null;try{s=t(n)}catch(r){Ze(r)}return n.addDecoration=m_,n.changeDecoration=m_,n.changeDecorationOptions=m_,n.removeDecoration=m_,n.deltaDecorations=m_,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:QV[n]}])[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(QV[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1){let r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a);const c=new F(o,1,a,l),h=this._getDecorationsInRange(c,n,s);return h.push(...this._decorationProvider.getDecorationsInRange(c,n,s)),h}getDecorationsInRange(e,t=0,n=!1){let s=this.validateRange(e);const r=this._getDecorationsInRange(s,t,n);return r.push(...this._decorationProvider.getDecorationsInRange(s,t,n)),r}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return ka.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const s=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(n.options.before||t.before){const o=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}s!==r?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const s=this.getVersionId(),r=t.length;let o=0;const a=n.length;let l=0,c=new Array(a);for(;o<r||l<a;){let h=null;if(o<r){do h=this._decorations[t[o++]];while(!h&&o<r);if(h){if(h.options.after){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(h.options.before){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(l<a){if(!h){const m=++this._lastDecorationId,v=`${this._instanceId};${m}`;h=new sX(v,0,0),this._decorations[v]=h}const u=n[l],d=this._validateRangeRelaxedNoAllocations(u.range),f=XV(u.options),g=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),p=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);h.ownerId=e,h.reset(s,g,p,d),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),c[l]=h.id,l++}else h&&delete this._decorations[h.id]}return c}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let h=0,u=o.tokens.length;h<u;h++){const d=o.startLineNumber+h;c?(this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!1),l=d):this._tokens.setTokens(this._languageId,d-1,this._buffer.getLineLength(d),o.tokens[h],!0)&&(c=!0,a=d,l=d)}c&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new q(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),s=this._getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=Xa._findLanguageBoundaries(s,r),l=Ix(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,h]=Xa._findLanguageBoundaries(s,r-1),u=Ix(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(c,h),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),s=this.validatePosition(t),r=this._getLineTokens(s.lineNumber),o=r.getLanguageId(r.findTokenIndexAtOffset(s.column-1)),a=this.getLanguageConfiguration(o).brackets;if(!a)return null;let l=a.textIsBracket[n];return l?$y(this._findMatchingBracketUp(l,s,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(Qa(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<r;c++){const h=t.getStartOffset(c);if(h>=l)break;if(Qa(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),s=this._buffer.getLineContent(t),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(o&&!Qa(n.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,n,o,r),c=null;for(;;){const h=lo.findNextBracketInRange(o.forwardRegex,t,s,a,l);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const u=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),d=this._matchFoundBracket(h,o.textIsBracket[u],o.textIsOpenBracket[u],null);if(d){if(d instanceof vc)return null;c=d}}a=h.endColumn-1}if(c)return c}if(r>0&&n.getStartOffset(r)===e.column-1){const a=r-1,l=this.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(l&&!Qa(n.getStandardTokenType(a))){let{searchStartOffset:c,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,l,a);const u=lo.findPrevBracketInRange(l.reversedRegex,t,s,c,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const d=s.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,l.textIsBracket[d],l.textIsOpenBracket[d],null);if(f)return f instanceof vc?null:f}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof vc?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,h,u,d)=>{for(;;){if(n&&++a%100===0&&!n())return vc.INSTANCE;const f=lo.findPrevBracketInRange(r,c,h,u,d);if(!f)break;const g=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;d=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this._getLineTokens(c),u=h.getCount(),d=this._buffer.getLineContent(c);let f=u-1,g=d.length,p=d.length;c===t.lineNumber&&(f=h.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let m=!0;for(;f>=0;f--){const v=h.getLanguageId(f)===s&&!Qa(h.getStandardTokenType(f));if(v)m?g=h.getStartOffset(f):(g=h.getStartOffset(f),p=h.getEndOffset(f));else if(m&&g!==p){const b=l(c,d,g,p);if(b)return b}m=v}if(m&&g!==p){const v=l(c,d,g,p);if(v)return v}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(h,u,d,f)=>{for(;;){if(n&&++a%100===0&&!n())return vc.INSTANCE;const g=lo.findNextBracketInRange(r,h,u,d,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;d=g.endColumn-1}return null},c=this.getLineCount();for(let h=t.lineNumber;h<=c;h++){const u=this._getLineTokens(h),d=u.getCount(),f=this._buffer.getLineContent(h);let g=0,p=0,m=0;h===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,m=t.column-1);let v=!0;for(;g<d;g++){const b=u.getLanguageId(g)===s&&!Qa(u.getStandardTokenType(g));if(b)v||(p=u.getStartOffset(g)),m=u.getEndOffset(g);else if(v&&p!==m){const w=l(h,f,p,m);if(w)return w}v=b}if(v&&p!==m){const b=l(h,f,p,m);if(b)return b}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=null,s=null;for(let r=t.lineNumber;r>=1;r--){const o=this._getLineTokens(r),a=o.getCount(),l=this._buffer.getLineContent(r);let c=a-1,h=l.length,u=l.length;if(r===t.lineNumber){c=o.findTokenIndexAtOffset(t.column-1),h=t.column-1,u=t.column-1;const f=o.getLanguageId(c);n!==f&&(n=f,s=this.getLanguageConfiguration(n).brackets)}let d=!0;for(;c>=0;c--){const f=o.getLanguageId(c);if(n!==f){if(s&&d&&h!==u){const p=lo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p);d=!1}n=f,s=this.getLanguageConfiguration(n).brackets}const g=!!s&&!Qa(o.getStandardTokenType(c));if(g)d?h=o.getStartOffset(c):(h=o.getStartOffset(c),u=o.getEndOffset(c));else if(s&&d&&h!==u){const p=lo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(p)return this._toFoundBracket(s,p)}d=g}if(s&&d&&h!==u){const f=lo.findPrevBracketInRange(s.reversedRegex,r,l,h,u);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let s=null,r=null;for(let o=t.lineNumber;o<=n;o++){const a=this._getLineTokens(o),l=a.getCount(),c=this._buffer.getLineContent(o);let h=0,u=0,d=0;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,d=t.column-1;const g=a.getLanguageId(h);s!==g&&(s=g,r=this.getLanguageConfiguration(s).brackets)}let f=!0;for(;h<l;h++){const g=a.getLanguageId(h);if(s!==g){if(r&&f&&u!==d){const m=lo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(m)return this._toFoundBracket(r,m);f=!1}s=g,r=this.getLanguageConfiguration(s).brackets}const p=!!r&&!Qa(a.getStandardTokenType(h));if(p)f||(u=a.getStartOffset(h)),d=a.getEndOffset(h);else if(r&&f&&u!==d){const m=lo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(m)return this._toFoundBracket(r,m)}f=p}if(r&&f&&u!==d){const g=lo.findNextBracketInRange(r.forwardRegex,o,c,u,d);if(g)return this._toFoundBracket(r,g)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const f=Date.now();n=()=>Date.now()-f<=t}const s=this.validatePosition(e),r=this.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){let p=[];for(let m=0,v=g?g.brackets.length:0;m<v;m++)p[m]=0;o.set(f,p)}a=o.get(f)};let c=0;const h=(f,g,p,m,v)=>{for(;;){if(n&&++c%100===0&&!n())return vc.INSTANCE;const b=lo.findNextBracketInRange(f.forwardRegex,g,p,m,v);if(!b)break;const w=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase(),y=f.textIsBracket[w];if(y&&(y.isOpen(w)?a[y.index]++:y.isClose(w)&&a[y.index]--,a[y.index]===-1))return this._matchFoundBracket(b,y,!1,n);m=b.endColumn-1}return null};let u=null,d=null;for(let f=s.lineNumber;f<=r;f++){const g=this._getLineTokens(f),p=g.getCount(),m=this._buffer.getLineContent(f);let v=0,b=0,w=0;if(f===s.lineNumber){v=g.findTokenIndexAtOffset(s.column-1),b=s.column-1,w=s.column-1;const x=g.getLanguageId(v);u!==x&&(u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d))}let y=!0;for(;v<p;v++){const x=g.getLanguageId(v);if(u!==x){if(d&&y&&b!==w){const S=h(d,f,m,b,w);if(S)return $y(S);y=!1}u=x,d=this.getLanguageConfiguration(u).brackets,l(u,d)}const L=!!d&&!Qa(g.getStandardTokenType(v));if(L)y||(b=g.getStartOffset(v)),w=g.getEndOffset(v);else if(d&&y&&b!==w){const S=h(d,f,m,b,w);if(S)return $y(S)}y=L}if(d&&y&&b!==w){const x=h(d,f,m,b,w);if(x)return $y(x)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let s=e.textIsBracket[n];return s?{range:t,open:s.open,close:s.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,s=0,r=e.length;for(;s<r;){let o=e.charCodeAt(s);if(o===32)n++;else if(o===9)n=n-n%t+t;else break;s++}return s===r?-1:n}_computeIndentLevel(e){return Xa.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const s=this.getLineCount();if(e<1||e>s)throw new Error("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,h=-1;const u=S=>{if(a!==-1&&(a===-2||a>S-1)){a=-1,l=-1;for(let k=S-2;k>=0;k--){let D=this._computeIndentLevel(k);if(D>=0){a=k,l=D;break}}}if(c===-2){c=-1,h=-1;for(let k=S;k<s;k++){let D=this._computeIndentLevel(k);if(D>=0){c=k,h=D;break}}}};let d=-2,f=-1,g=-2,p=-1;const m=S=>{if(d===-2){d=-1,f=-1;for(let k=S-2;k>=0;k--){let D=this._computeIndentLevel(k);if(D>=0){d=k,f=D;break}}}if(g!==-1&&(g===-2||g<S-1)){g=-1,p=-1;for(let k=S;k<s;k++){let D=this._computeIndentLevel(k);if(D>=0){g=k,p=D;break}}}};let v=0,b=!0,w=0,y=!0,x=0,L=0;for(let S=0;b||y;S++){const k=e-S,D=e+S;S>1&&(k<1||k<t)&&(b=!1),S>1&&(D>s||D>n)&&(y=!1),S>5e4&&(b=!1,y=!1);let T=-1;if(b){const $=this._computeIndentLevel(k-1);$>=0?(c=k-1,h=$,T=Math.ceil($/this._options.indentSize)):(u(k),T=this._getIndentLevelForWhitespaceLine(o,l,h))}let N=-1;if(y){const $=this._computeIndentLevel(D-1);$>=0?(d=D-1,f=$,N=Math.ceil($/this._options.indentSize)):(m(D),N=this._getIndentLevelForWhitespaceLine(o,f,p))}if(S===0){L=T;continue}if(S===1){if(D<=s&&N>=0&&L+1===N){b=!1,v=D,w=D,x=N;continue}if(k>=1&&T>=0&&T-1===L){y=!1,v=k,w=k,x=T;continue}if(v=e,w=e,x=L,x===0)return{startLineNumber:v,endLineNumber:w,indent:x}}b&&(T>=x?v=k:b=!1),y&&(N>=x?w=D:y=!1)}return{startLineNumber:v,endLineNumber:w,indent:x}}getLinesBracketGuides(e,t,n,s){var r,o,a,l,c;const h=[],u=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new F(e,1,t,this.getLineMaxColumn(t)));let d;if(n&&u.length>0){const v=e<=n.lineNumber&&n.lineNumber<=t?u.filter(b=>b.range.containsPosition(n)):this._bracketPairColorizer.getBracketPairsInRange(F.fromPositions(n));d=(r=Fke(v,b=>b.range.startLineNumber!==b.range.endLineNumber))===null||r===void 0?void 0:r.range}const f=new Db(u),g=new Array,p=new Array,m=new UX;for(let v=e;v<=t;v++){let b=new Array;p.length>0&&(b=b.concat(p),p.length=0),h.push(b);for(const y of f.takeWhile(x=>x.openingBracketRange.startLineNumber<=v)||[]){if(y.range.startLineNumber===y.range.endLineNumber)continue;const x=Math.min(this.getVisibleColumnFromPosition(y.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(o=y.closingBracketRange)===null||o===void 0?void 0:o.getStartPosition())!==null&&a!==void 0?a:y.range.getEndPosition()),y.minVisibleColumnIndentation+1);let L=!1;y.closingBracketRange&&Xs(this.getLineContent(y.closingBracketRange.startLineNumber))<y.closingBracketRange.startColumn-1&&(L=!0);const S=y.openingBracketRange.getStartPosition(),k=(c=(l=y.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&c!==void 0?c:y.range.getEndPosition();y.closingBracketRange===void 0?g[y.nestingLevel]=null:g[y.nestingLevel]={nestingLevel:y.nestingLevel,guideVisibleColumn:x,start:S,visibleStartColumn:this.getVisibleColumnFromPosition(S),end:k,visibleEndColumn:this.getVisibleColumnFromPosition(k),bracketPair:y,renderHorizontalEndLineAtTheBottom:L}}for(const y of g){if(!y)continue;const x=d&&y.bracketPair.range.equalsRange(d),L=m.getInlineClassNameOfLevel(y.nestingLevel)+(s.highlightActive&&x?" "+m.activeClassName:"");(x&&s.horizontalGuides!==Jd.Disabled||s.includeInactive&&s.horizontalGuides===Jd.Enabled)&&(y.start.lineNumber===v&&y.guideVisibleColumn<y.visibleStartColumn&&b.push(new yp(y.guideVisibleColumn,L,new PM(!1,y.start.column))),y.end.lineNumber===v+1&&y.guideVisibleColumn<y.visibleEndColumn&&p.push(new yp(y.guideVisibleColumn,L,new PM(!y.renderHorizontalEndLineAtTheBottom,y.end.column))))}let w=Number.MAX_SAFE_INTEGER;for(let y=g.length-1;y>=0;y--){const x=g[y];if(!x)continue;const L=s.highlightActive&&d&&x.bracketPair.range.equalsRange(d),S=m.getInlineClassNameOfLevel(x.nestingLevel)+(L?" "+m.activeClassName:"");(L||s.includeInactive)&&x.renderHorizontalEndLineAtTheBottom&&x.end.lineNumber===v+1&&p.push(new yp(x.guideVisibleColumn,S,null)),!(x.end.lineNumber<=v||x.start.lineNumber>=v)&&(x.guideVisibleColumn>=w&&!L||(w=x.guideVisibleColumn,(L||s.includeInactive)&&b.push(new yp(x.guideVisibleColumn,S,null))))}b.sort((y,x)=>y.visibleColumn-x.visibleColumn)}return h}getVisibleColumnFromPosition(e){return Et.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.getLanguageConfiguration(this._languageId).foldingRules,r=!!(s&&s.offSide);let o=new Array(t-e+1),a=-2,l=-1,c=-2,h=-1;for(let u=e;u<=t;u++){let d=u-e;const f=this._computeIndentLevel(u-1);if(f>=0){a=u-1,l=f,o[d]=Math.ceil(f/this._options.indentSize);continue}if(a===-2){a=-1,l=-1;for(let g=u-2;g>=0;g--){let p=this._computeIndentLevel(g);if(p>=0){a=g,l=p;break}}}if(c!==-1&&(c===-2||c<u-1)){c=-1,h=-1;for(let g=u;g<n;g++){let p=this._computeIndentLevel(g);if(p>=0){c=g,h=p;break}}}o[d]=this._getIndentLevelForWhitespaceLine(r,l,h)}return o}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return KIe(this.getLineContent(e))+1}};Zr.MODEL_SYNC_LIMIT=50*1024*1024;Zr.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Zr.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Zr.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Yn.tabSize,indentSize:Yn.indentSize,insertSpaces:Yn.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Yn.trimAutoWhitespace,largeFileOptimizations:Yn.largeFileOptimizations,bracketPairColorizationOptions:Yn.bracketPairColorizationOptions};Zr=HIe([ME(4,Bw),ME(5,Fs),ME(6,Ow)],Zr);function KIe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class UX{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function RE(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function OE(i){return!!i.options.after||!!i.options.before}class YV{constructor(){this._decorationsTree0=new yE,this._decorationsTree1=new yE,this._injectedTextDecorationsTree=new yE}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,n,s,r,o);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,s,r){const o=this._decorationsTree0.intervalSearch(e,t,n,s,r),a=this._decorationsTree1.intervalSearch(e,t,n,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,s){const r=e.getVersionId(),o=this._search(t,n,s,r);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,s){if(n)return this._decorationsTree1.search(e,t,s);{const r=this._decorationsTree0.search(e,t,s),o=this._decorationsTree1.search(e,t,s),a=this._injectedTextDecorationsTree.search(e,t,s);return r.concat(o).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){OE(e)?this._injectedTextDecorationsTree.insert(e):RE(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){OE(e)?this._injectedTextDecorationsTree.delete(e):RE(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){OE(e)?this._injectedTextDecorationsTree.resolveNode(e,t):RE(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function uh(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class $X{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class ZIe extends $X{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Ml.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class YIe extends $X{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Z.fromHex(e):t.getColor(e.id)}}class t1{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof t1?e:new t1(e)}}class ct{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?uh(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ZIe(e.overviewRuler):null,this.minimap=e.minimap?new YIe(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?uh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?uh(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?uh(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?uh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?uh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?uh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?uh(e.afterContentClassName):null,this.after=e.after?t1.from(e.after):null,this.before=e.before?t1.from(e.before):null}static register(e){return new ct(e)}static createDynamic(e){return new ct(e)}}ct.EMPTY=ct.register({description:"empty"});const QV=[ct.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ct.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ct.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ct.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function XV(i){return i instanceof ct?i:ct.createDynamic(i)}class QIe extends te{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new z),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class XIe extends te{constructor(){super(),this._fastEmitter=this._register(new z),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new z),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const JIe=()=>!0,JV=()=>!1,eTe=i=>i===" "||i==="	";class _o{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=n.options,r=s.get(129);this.readOnly=s.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(103),this.lineHeight=s.get(58),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(114),this.wordSeparators=s.get(115),this.emptySelectionClipboard=s.get(32),this.copyWithSyntaxHighlighting=s.get(21),this.multiCursorMergeOverlapping=s.get(68),this.multiCursorPaste=s.get(70),this.autoClosingBrackets=s.get(5),this.autoClosingQuotes=s.get(8),this.autoClosingDelete=s.get(6),this.autoClosingOvertype=s.get(7),this.autoSurround=s.get(11),this.autoIndent=s.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:_o._getShouldAutoClose(e,this.autoClosingQuotes),bracket:_o._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=Mi.getAutoClosingPairs(e);let o=_o._getSurroundingPairs(e);if(o)for(const a of o)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(129)||e.hasChanged(115)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(114)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=_o._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Zr.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return Mi.getElectricCharacters(e)}catch(t){return Ze(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return eTe;case"languageDefined":return _o._getLanguageDefinedShouldAutoClose(e);case"always":return JIe;case"never":return JV}}static _getLanguageDefinedShouldAutoClose(e){try{const t=Mi.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return Ze(t),JV}}static _getSurroundingPairs(e){try{return Mi.getSurroundingPairs(e)}catch(t){return Ze(t),null}}}class _n{constructor(e,t,n,s){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=s,this.selection=_n._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new _n(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new q(t,n),s):new _n(new F(t,n,t,n),s,new q(t,n),s)}static _computeSelection(e,t){let n,s,r,o;return e.isEmpty()?(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column):t.isBeforeOrEqual(e.getStartPosition())?(n=e.endLineNumber,s=e.endColumn,r=t.lineNumber,o=t.column):(n=e.startLineNumber,s=e.startColumn,r=t.lineNumber,o=t.column),new Ve(n,s,r,o)}}class eW{constructor(e,t,n,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}class tTe{constructor(e){this.modelState=e,this.viewState=null}}class iTe{constructor(e){this.modelState=null,this.viewState=e}}class Xe{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new tTe(e)}static fromViewState(e){return new iTe(e)}static fromModelSelection(e){const t=e.selectionStartLineNumber,n=e.selectionStartColumn,s=e.positionLineNumber,r=e.positionColumn,o=new _n(new F(t,n,t,n),0,new q(s,r),0);return Xe.fromModelState(o)}static fromModelSelections(e){let t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class $s{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function hp(i){return i==="'"||i==='"'||i==="`"}class i1{static whitespaceVisibleColumn(e,t,n){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%n===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=Et.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const r=e.length,[o,a,l]=i1.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let d=a;for(let f=o;f<r;++f){if(d===a+n)return o;switch(e.charCodeAt(f)){case 32:d+=1;break;case 9:d=Et.nextRenderTabStop(d,n);break;default:return-1}}return d===a+n?o:-1}const h=Et.nextRenderTabStop(l,n);let u=l;for(let d=t;d<r;d++){if(u===h)return d;switch(e.charCodeAt(d)){case 32:u+=1;break;case 9:u=Et.nextRenderTabStop(u,n);break;default:return-1}}return u===h?r:-1}}class Dh{constructor(e=null){this.hitTarget=e,this.type=0}}class m4{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var vd;(function(i){function e(t,n,s){const r=t.getPositionFromDOMInfo(n,s);return r?new m4(r,n,null):new Dh(n)}i.createFromDOMInfo=e})(vd||(vd={}));class nTe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Yo{constructor(e,t,n=0,s=null,r=null,o=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,!r&&s&&(r=new F(s.lineNumber,s.column,s.lineNumber,s.column)),this.range=r,this.detail=o}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return Yo.toString(this)}}class oo{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Hm{constructor(e,t,n){this.model=e.model;const s=e.configuration.options;this.layoutInfo=s.get(129),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(58),this.stickyTabStops=s.get(103),this.typicalHalfwidthCharacterWidth=s.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Hm.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,r=e.model.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==r&&(l=new q(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new q(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.model.getLineCount(),r=this._context.model.getLineMaxColumn(s);return{range:new F(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new F(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Hm._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class sTe{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Tn._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class yP extends sTe{constructor(e,t,n,s){super(e,t,n),this._ctx=e,s?(this.target=s,this.targetPath=Ol.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,s=null){let r=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(r=Et.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new Yo(this.target,e,r,t,n,s)}withTarget(e){return new yP(this._ctx,this.editorPos,this.pos,e)}}const tW={isAfterLines:!0};function PE(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Tn{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Ol.collect(t,this._viewHelper.viewDomNode);return!!(oo.isChildOfContentWidgets(n)||oo.isChildOfOverflowingContentWidgets(n)||oo.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,s){const r=new Hm(this._context,this._viewHelper,e),o=new yP(r,t,n,s);try{return Tn._createMouseTarget(r,o,!1)}catch{return o.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const o=Tn._doHitTest(e,t);return o.type===1?Tn.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const s=t;let r=null;return r=r||Tn._hitTestContentWidget(e,s),r=r||Tn._hitTestOverlayWidget(e,s),r=r||Tn._hitTestMinimap(e,s),r=r||Tn._hitTestScrollbarSlider(e,s),r=r||Tn._hitTestViewZone(e,s),r=r||Tn._hitTestMargin(e,s),r=r||Tn._hitTestViewCursor(e,s),r=r||Tn._hitTestTextArea(e,s),r=r||Tn._hitTestViewLines(e,s,n),r=r||Tn._hitTestScrollbar(e,s),r||t.fulfill(0)}static _hitTestContentWidget(e,t){if(oo.isChildOfContentWidgets(t.targetPath)||oo.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(oo.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of n){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfill(6,o.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?8:5;return t.fulfill(s,n.position,null,n)}return null}static _hitTestTextArea(e,t){return oo.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let r=Math.abs(t.pos.x-t.editorPos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};return r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,s,n.range,o):(r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,s,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,s,n.range,o)))}return null}static _hitTestViewLines(e,t,n){if(!oo.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new q(1,1),null,tW);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return t.fulfill(7,new q(r,o),null,tW)}if(n){if(oo.isStrictChildOfViewLines(t.targetPath)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(r)===0){const a=e.getLineWidth(r),l=PE(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new q(r,1),null,l)}const o=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>=o){const a=PE(t.mouseContentHorizontalOffset-o),l=new q(r,e.model.getLineMaxColumn(r));return t.fulfill(7,l,null,a)}}return t.fulfill(0)}const s=Tn._doHitTest(e,t);return s.type===1?Tn.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}static _hitTestMinimap(e,t){if(oo.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new q(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(oo.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(s);return t.fulfill(11,new q(s,r))}}return null}static _hitTestScrollbar(e,t){if(oo.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.model.getLineMaxColumn(n);return t.fulfill(11,new q(n,s))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,s=n.get(129),r=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-s.contentLeft;return Tn._getMouseColumn(r,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const m=PE(t.mouseContentHorizontalOffset-l);return t.fulfill(7,s,null,m)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfill(0,s);const h=c.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,s,null,{mightBeForeignElement:!!r});const u=[];if(u.push({offset:c.left,column:a}),a>1){const m=e.visibleRangeForPosition(o,a-1);m&&u.push({offset:m.left,column:a-1})}const d=e.model.getLineMaxColumn(o);if(a<d){const m=e.visibleRangeForPosition(o,a+1);m&&u.push({offset:m.left,column:a+1})}u.sort((m,v)=>m.offset-v.offset);const f=t.pos.toClientCoordinates(),g=n.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;for(let m=1;m<u.length;m++){const v=u[m-1],b=u[m];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=b.offset){const w=new F(o,v.column,o,b.column);return t.fulfill(6,s,w,{mightBeForeignElement:!p||!!r})}}return t.fulfill(6,s,null,{mightBeForeignElement:!p||!!r})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let o=t.pos.y+(r-t.mouseVerticalOffset);o<=t.editorPos.y&&(o=t.editorPos.y+1),o>=t.editorPos.y+e.layoutInfo.height&&(o=t.editorPos.y+e.layoutInfo.height-1);const a=new rP(t.pos.x,o),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=T0(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=rTe(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=document.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Dh;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ul.CLASS_NAME?vd.createFromDOMInfo(e,o,s.startOffset):new Dh(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ul.CLASS_NAME?vd.createFromDOMInfo(e,r,r.textContent.length):new Dh(r)}return new Dh}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===ul.CLASS_NAME?vd.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Dh(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===ul.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return vd.createFromDOMInfo(e,l,0)}else if(a===ul.CLASS_NAME)return vd.createFromDOMInfo(e,n.offsetNode,0)}return new Dh(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.getTextModelOptions(),r=i1.atomicPosition(n,e.column-1,s,2);return r!==-1?new q(e.lineNumber,r+1):e}static _doHitTest(e,t){let n=new Dh;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const s=e.model.getInjectedTextAt(n.position),r=e.model.normalizePosition(n.position,2);(s||!r.equals(n.position))&&(n=new m4(r,n.spanNode,s))}return n.type===1&&e.stickyTabStops&&(n=new m4(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function rTe(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=window.getComputedStyle(s,null).getPropertyValue("font"),a=s.innerText;let l=r.left,c=0,h;if(e>r.left+r.width)c=a.length;else{const u=Vd.getInstance();for(let d=0;d<a.length+1;d++){if(h=u.getCharWidth(a.charAt(d),o)/2,l+=h,e<l){c=d;break}l+=h}}n.setStart(s.firstChild,c),n.setEnd(s.firstChild,c)}return n}class Vd{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Vd._INSTANCE||(Vd._INSTANCE=new Vd),Vd._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[n]=o,o}}Vd._INSTANCE=null;function _D(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class Ff extends Fw{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Tn(this._context,n),this._mouseDownOperation=this._register(new oTe(this._context,this.viewController,this.viewHelper,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(129).height;const s=new p2e(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),_D(this.mouseTargetFactory),Ff.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)));const r=o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(67))return;const a=new Am(o);if(ut?(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey:o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey){const c=zx.getZoomLevel(),h=a.deltaY>0?1:-1;zx.setZoomLevel(c+h),a.preventDefault(),a.stopPropagation()}};this._register(ne(this.viewHelper.viewDomNode,Ae.MOUSE_WHEEL,r,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(129)){const t=this._context.configuration.options.get(129).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const s=new XQ(e,t).toPageCoordinates(),r=JQ(this.viewHelper.viewDomNode);return s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=T0(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,s=t.type===2||t.type===3||t.type===4,r=t.type===3,o=this._context.configuration.options.get(97),a=t.type===8||t.type===5,l=t.type===9;let c=e.leftButton||e.middleButton;ut&&e.leftButton&&e.ctrlKey&&(c=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(n||r&&o))h(),this._mouseDownOperation.start(t.type,e);else if(s)e.preventDefault();else if(a){const u=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}Ff.MOUSE_MOVE_MINIMUM_TIME=100;class oTe extends te{constructor(e,t,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new _2e(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Os),this._mouseState=new HL,this._currentSelection=new Ve(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(80)&&s.get(31)&&!s.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,_D(null),r=>this._onMouseDownThenMove(r),r=>{const o=this._findMousePosition(this._lastMouseEvent,!0);r&&r instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:o?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,_D(null),r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(s.getCurrentScrollTop()-(t.y-e.posy),0),l=Hm.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Yo(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Yo(null,13,r,new q(c,1))}if(e.posy>t.y+t.height){const a=s.getCurrentScrollTop()+(e.posy-t.y),l=Hm.getZoneAtCoord(this._context,a);if(l){const h=this._helpPositionJumpOverViewZone(l);if(h)return new Yo(null,13,r,h)}const c=s.getLineNumberAtVerticalOffset(a);return new Yo(null,13,r,new q(c,n.getLineMaxColumn(c)))}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new Yo(null,13,r,new q(o,1)):e.posx>t.x+t.width?new Yo(null,13,r,new q(o,n.getLineMaxColumn(o))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return new Yo(s.element,s.type,s.mouseColumn,o,null,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new q(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class HL{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>HL.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}HL.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var vo;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})(vo||(vo={}));let rf=[],CP=[],bD=[];function jy(i,e=!1){const t=aTe(i);rf.push(t),t.userConfigured?bD.push(t):CP.push(t),e&&!t.userConfigured&&rf.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function aTe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?UY(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Ji.sep)>=0:!1}}function lTe(i){i?(rf=rf.filter(e=>!e.userConfigured),bD=[]):(rf=[],CP=[],bD=[])}function cTe(i,e){let t;if(i)switch(i.scheme){case nt.file:t=i.fsPath;break;case nt.data:t=wu.parseMetaData(i).get(wu.META_DATA_LABEL);break;default:t=i.path}if(!t)return[vo.unknown];t=t.toLowerCase();const n=Yd(t),s=iW(t,n,bD);if(s)return[s,vo.text];const r=iW(t,n,CP);if(r)return[r,vo.text];if(e){const o=hTe(e);if(o)return[o,vo.text]}return[vo.unknown]}function iW(i,e,t){var n;let s=null,r=null,o=null;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const c=l.filepatternOnPath?i:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,c)&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}return s?s.mime:r?r.mime:o?o.mime:null}function hTe(i){if(A5(i)&&(i=i.substr(1)),i.length>0)for(let e=rf.length-1;e>=0;e--){const t=rf[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class cn{constructor(e,t,n,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=s,this.selectionEndPosition=r}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new cn(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new cn(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const s=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,s,-1)}if(e>=this.selectionEnd){const s=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,s,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,n*t.length,s]}static selectedText(e){return new cn(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let s=e.value,r=e.selectionStart,o=e.selectionEnd,a=t.value,l=t.selectionStart,c=t.selectionEnd;const h=s.substring(o),u=a.substring(c),d=AM(h,u);a=a.substring(0,a.length-d),s=s.substring(0,s.length-d);const f=s.substring(0,r),g=a.substring(0,l),p=Wv(f,g);if(a=a.substring(p),s=s.substring(p),l-=p,r-=p,c-=p,o-=p,n&&l===c&&s.length>0){let v=null;if(l===a.length?a.startsWith(s)&&(v=a.substring(s.length)):a.endsWith(s)&&(v=a.substring(0,a.length-s.length)),v!==null&&v.length>0&&(/\uFE0F/.test(v)||mxe(v)))return{text:v,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(l===c){if(s===a&&r===0&&o===s.length&&l===a.length&&a.indexOf(`
`)===-1&&bxe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const v=f.length-p;return{text:a,replacePrevCharCnt:v,replaceNextCharCnt:0,positionDelta:0}}const m=o-r;return{text:a,replacePrevCharCnt:m,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(Wv(e.value,t.value),e.selectionEnd),s=Math.min(AM(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-s),o=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}}cn.EMPTY=new cn("",0,0,null,null);class Dp{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,r=n+t;return new F(s,1,r+1,1)}static fromEditorSelection(e,t,n,s,r){const o=Dp._getPageOfLine(n.startLineNumber,s),a=Dp._getRangeForPage(o,s),l=Dp._getPageOfLine(n.endLineNumber,s),c=Dp._getRangeForPage(l,s),h=a.intersectRanges(new F(1,1,n.startLineNumber,n.startColumn));let u=t.getValueInRange(h,1);const d=t.getLineCount(),f=t.getLineMaxColumn(d),g=c.intersectRanges(new F(n.endLineNumber,n.endColumn,d,f));let p=t.getValueInRange(g,1),m;if(o===l||o+1===l)m=t.getValueInRange(n,1);else{const v=a.intersectRanges(n),b=c.intersectRanges(n);m=t.getValueInRange(v,1)+String.fromCharCode(8230)+t.getValueInRange(b,1)}return r&&(u.length>500&&(u=u.substring(u.length-500,u.length)),p.length>500&&(p=p.substring(0,500)),m.length>2*500&&(m=m.substring(0,500)+String.fromCharCode(8230)+m.substring(m.length-500,m.length))),new cn(u+m+p,u.length,u.length+m.length,new q(n.startLineNumber,n.startColumn),new q(n.endLineNumber,n.endColumn))}}var vD;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(vD||(vD={}));class wD{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}wD.INSTANCE=new wD;class uTe extends te{constructor(e,t){super(),this.textArea=t,this._onFocus=this._register(new z),this.onFocus=this._onFocus.event,this._onBlur=this._register(new z),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new z),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new z),this.onCut=this._onCut.event,this._onPaste=this._register(new z),this.onPaste=this._onPaste.event,this._onType=this._register(new z),this.onType=this._onType.event,this._onCompositionStart=this._register(new z),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new z),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new z),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new z),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._host=e,this._textArea=this._register(new dTe(t)),this._asyncTriggerCut=this._register(new mi(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new mi(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=cn.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._isDoingComposition=!1,this._nextCommand=0;let n=null;this._register(tn(t.domNode,"keydown",a=>{(a.keyCode===109||this._isDoingComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),n=a,this._onKeyDown.fire(a)})),this._register(tn(t.domNode,"keyup",a=>{this._onKeyUp.fire(a)})),this._register(ne(t.domNode,"compositionstart",a=>{if(!this._isDoingComposition){if(this._isDoingComposition=!0,ut&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===a.data&&(n&&n.equals(109)&&(n.code==="ArrowRight"||n.code==="ArrowLeft")||Es)){this._textAreaState=new cn(this._textAreaState.value,this._textAreaState.selectionStart-1,this._textAreaState.selectionEnd,this._textAreaState.selectionStartPosition?new q(this._textAreaState.selectionStartPosition.lineNumber,this._textAreaState.selectionStartPosition.column-1):null,this._textAreaState.selectionEndPosition),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(H_){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._setAndWriteTextAreaState("compositionstart",cn.EMPTY),this._onCompositionStart.fire({revealDeltaColumns:0})}}));const s=a=>{const l=this._textAreaState,c=cn.readFromTextArea(this._textArea);return[c,cn.deduceInput(l,c,a)]},r=()=>{const a=this._textAreaState,l=cn.readFromTextArea(this._textArea);return[l,cn.deduceAndroidCompositionInput(a,l)]},o=a=>{const l=this._textAreaState,c=cn.selectedText(a),h={text:c.value,replacePrevCharCnt:l.selectionEnd-l.selectionStart,replaceNextCharCnt:0,positionDelta:0};return[c,h]};this._register(ne(t.domNode,"compositionupdate",a=>{if(H_){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionUpdate.fire(a);return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),this._onCompositionUpdate.fire(a)})),this._register(ne(t.domNode,"compositionend",a=>{if(!this._isDoingComposition)return;if(this._isDoingComposition=!1,H_){const[h,u]=r();this._textAreaState=h,this._onType.fire(u),this._onCompositionEnd.fire();return}const[l,c]=o(a.data||"");this._textAreaState=l,this._onType.fire(c),(Ox||Es)&&(this._textAreaState=cn.readFromTextArea(this._textArea)),this._onCompositionEnd.fire()})),this._register(ne(t.domNode,"input",()=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._isDoingComposition)return;const[a,l]=s(ut);l.replacePrevCharCnt===0&&l.text.length===1&&vn(l.text.charCodeAt(0))||(this._textAreaState=a,this._nextCommand===0?(l.text!==""||l.replacePrevCharCnt!==0)&&this._onType.fire(l):((l.text!==""||l.replacePrevCharCnt!==0)&&this._firePaste(l.text,null),this._nextCommand=0))})),this._register(ne(t.domNode,"cut",a=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(a),this._asyncTriggerCut.schedule()})),this._register(ne(t.domNode,"copy",a=>{this._ensureClipboardGetsEditorSelection(a)})),this._register(ne(t.domNode,"paste",a=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),__.canUseTextData(a)){const[l,c]=__.getTextData(a);l!==""&&this._firePaste(l,c)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",cn.EMPTY),this._nextCommand=1})),this._register(ne(t.domNode,"focus",()=>{const a=this._hasFocus;this._setHasFocus(!0),Io&&!a&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(ne(t.domNode,"blur",()=>{this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(ne(t.domNode,vD.Tap,()=>{H_&&this._isDoingComposition&&(this._isDoingComposition=!1,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ne(document,"selectionchange",t=>{if(!this._hasFocus||this._isDoingComposition||!Ox)return;const n=Date.now(),s=n-e;if(e=n,s<5)return;const r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),d=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ve(h.lineNumber,h.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){const e=T0(this.textArea.domNode);e?this._setHasFocus(e.activeElement===this.textArea.domNode):_5(this.textArea.domNode)?this._setHasFocus(document.activeElement===this.textArea.domNode):this._setHasFocus(!1)}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._isDoingComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(__.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(wD.INSTANCE.set(Es?t.text.replace(/\r\n/g,`
`):t.text,n),!__.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",cn.selectedText(t.text));return}__.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=wD.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class __{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData(vo.text);let n=null;const s=e.clipboardData.getData("vscode-editor-data");if(typeof s=="string")try{n=JSON.parse(s),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,s){if(e.clipboardData){e.clipboardData.setData(vo.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(s)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class dTe extends te{constructor(e){super(),this._actual=e,this._ignoreSelectionChangeTime=0}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.domNode.value}setValue(e,t){const n=this._actual.domNode;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionEnd:this._actual.domNode.selectionStart}getSelectionEnd(){return this._actual.domNode.selectionDirection==="backward"?this._actual.domNode.selectionStart:this._actual.domNode.selectionEnd}setSelectionRange(e,t,n){const s=this._actual.domNode;let r=null;const o=T0(s);o?r=o.activeElement:r=document.activeElement;const a=r===s,l=s.selectionStart,c=s.selectionEnd;if(a&&l===t&&c===n){Es&&window.parent!==window&&s.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),Es&&window.parent!==window&&s.focus();return}try{const h=txe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),ixe(s,h)}catch{}}}class fTe extends Ff{constructor(e,t,n){super(e,t,n),this._register(At.addTarget(this.viewHelper.linesContentDomNode)),this._register(ne(this.viewHelper.linesContentDomNode,jt.Tap,r=>this.onTap(r))),this._register(ne(this.viewHelper.linesContentDomNode,jt.Change,r=>this.onChange(r))),this._register(ne(this.viewHelper.linesContentDomNode,jt.Contextmenu,r=>this._onContextMenu(new Pf(r,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ne(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new m2e(this.viewHelper.viewDomNode);this._register(s.onPointerMoveThrottled(this.viewHelper.viewDomNode,r=>this._onMouseMove(r),_D(this.mouseTargetFactory),Ff.MOUSE_MOVE_MINIMUM_TIME)),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Pf(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class gTe extends Ff{constructor(e,t,n){super(e,t,n),this._register(At.addTarget(this.viewHelper.linesContentDomNode)),this._register(ne(this.viewHelper.linesContentDomNode,jt.Tap,s=>this.onTap(s))),this._register(ne(this.viewHelper.linesContentDomNode,jt.Change,s=>this.onChange(s))),this._register(ne(this.viewHelper.linesContentDomNode,jt.Contextmenu,s=>this._onContextMenu(new Pf(s,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Pf(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(vD.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class pTe extends te{constructor(e,t,n){super(),vu&&lL.pointerEvents?this.handler=this._register(new fTe(e,t,n)):window.TouchEvent?this.handler=this._register(new gTe(e,t,n)):this.handler=this._register(new Ff(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class V0 extends Fw{}class Um extends V0{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new q(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(129);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Is?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r='<div class="'+Um.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',o=this._context.model.getLineCount(),a=[];for(let l=n;l<=s;l++){const c=l-n;if(!this._renderFinalNewline&&l===o&&this._context.model.getLineLength(l)===0){a[c]="";continue}const h=this._getLineRenderLineNumber(l);h?l===this._activeLineNumber?a[c]='<div class="active-line-number '+Um.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[c]=r+h+"</div>":a[c]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Um.CLASS_NAME="line-numbers";ti((i,e)=>{const t=i.getColor(MX);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(mIe);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Bf extends Xr{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=gt(document.createElement("div")),this._domNode.setClassName(Bf.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=gt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Bf.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Bf.CLASS_NAME="glyph-margin";Bf.OUTER_CLASS_NAME="margin";const of="monaco-mouse-cursor-text";class SP{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new SP(this.top,this.left,e)}}const b_=Es;class mTe extends Xr{constructor(e,t,n){super(e),this._primaryCursorPosition=new q(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const s=this._context.configuration.options,r=s.get(129);this._setAccessibilityOptions(s),this._contentLeft=r.contentLeft,this._contentWidth=r.contentWidth,this._contentHeight=r.height,this._fontInfo=s.get(43),this._lineHeight=s.get(58),this._emptySelectionClipboard=s.get(32),this._copyWithSyntaxHighlighting=s.get(21),this._visibleTextArea=null,this._selections=[new Ve(1,1,1,1)],this._modelSelections=[new Ve(1,1,1,1)],this._lastRenderPosition=null,this.textArea=gt(document.createElement("textarea")),Ol.write(this.textArea,6),this.textArea.setClassName(`inputarea ${of}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(s)),this.textArea.setAttribute("tabindex",String(s.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",_("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),s.get(30)&&s.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=gt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const o={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:l=>this._context.model.getLineMaxColumn(l),getValueInRange:(l,c)=>this._context.model.getValueInRange(l,c)},a={getDataToCopy:l=>{const c=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Fn),h=this._context.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),d=Array.isArray(c)?c:null,f=Array.isArray(c)?c.join(h):c;let g,p=null;if(l&&this._copyWithSyntaxHighlighting&&f.length<65536){const m=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);m&&(g=m.html,p=m.mode)}return{isFromEmptySelection:u,multicursorText:d,text:f,html:g,mode:p}},getScreenReaderContent:l=>{if(this._accessibilitySupport===1){if(ut){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition();let u=this._getWordBeforePosition(h);if(u.length===0&&(u=this._getCharacterBeforePosition(h)),u.length>0)return new cn(u,u.length,u.length,h,h)}}return cn.EMPTY}if(H_){const c=this._selections[0];if(c.isEmpty()){const h=c.getStartPosition(),[u,d]=this._getAndroidWordAtPosition(h);if(u.length>0)return new cn(u,d,d,h,h)}return cn.EMPTY}return Dp.fromEditorSelection(l,o,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(l,c,h)=>this._context.model.deduceModelPositionRelativeToViewPosition(l,c,h)};this._textAreaInput=this._register(new uTe(a,this.textArea)),this._register(this._textAreaInput.onKeyDown(l=>{this._viewController.emitKeyDown(l)})),this._register(this._textAreaInput.onKeyUp(l=>{this._viewController.emitKeyUp(l)})),this._register(this._textAreaInput.onPaste(l=>{let c=!1,h=null,u=null;l.metadata&&(c=this._emptySelectionClipboard&&!!l.metadata.isFromEmptySelection,h=typeof l.metadata.multicursorText<"u"?l.metadata.multicursorText:null,u=l.metadata.mode),this._viewController.paste(l.text,c,h,u)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(l=>{l.replacePrevCharCnt||l.replaceNextCharCnt||l.positionDelta?this._viewController.compositionType(l.text,l.replacePrevCharCnt,l.replaceNextCharCnt,l.positionDelta):this._viewController.type(l.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(l=>{this._viewController.setSelection(l)})),this._register(this._textAreaInput.onCompositionStart(l=>{const c=this._selections[0].startLineNumber,h=this._selections[0].startColumn+l.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new F(c,h,c,h),0,1);const u=this._viewHelper.visibleRangeForPositionRelativeToEditor(c,h);u&&(this._visibleTextArea=new SP(this._context.viewLayout.getVerticalOffsetForLineNumber(c),u.left,b_?0:1),this._render()),this.textArea.setClassName(`inputarea ${of} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(l=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(_Te(l.data,this._fontInfo)),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${of}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),s=Bm(t);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const h=n.charCodeAt(o-2);s.get(h)!==0?r=!1:o--}if(a&&l>n.length&&(a=!1),a){const h=n.charCodeAt(l-1);s.get(h)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=Bm(this._context.configuration.options.get(115));let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(n.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!vn(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?_("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Is?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===ag.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new q(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(ut){this._renderInsideEditor(this._primaryCursorPosition,t,e,b_?0:1,this._lineHeight);return}this._renderInsideEditor(this._primaryCursorPosition,t,e,b_?0:1,b_?0:1)}_renderInsideEditor(e,t,n,s,r){this._lastRenderPosition=e;const o=this.textArea,a=this.textAreaCover;Vn.applyFontInfo(o,this._fontInfo),o.setTop(t),o.setLeft(n),o.setWidth(s),o.setHeight(r),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Vn.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),b_){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Bf.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Um.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function _Te(i,e){const n=document.createElement("canvas").getContext("2d");n.font=bTe(e);const s=n.measureText(i);return Es?s.width+2:s.width}function bTe(i){return vTe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function vTe(i,e,t,n,s){return`${i} normal ${e} ${t}px / ${n}px ${s}`}class wd{static columnSelect(e,t,n,s,r,o){let a=Math.abs(r-n)+1,l=n>r,c=s>o,h=s<o,u=[];for(let d=0;d<a;d++){let f=n+(l?-d:d),g=Et.columnFromVisibleColumn2(e,t,f,s),p=Et.columnFromVisibleColumn2(e,t,f,o),m=Et.visibleColumnFromColumn2(e,t,new q(f,g)),v=Et.visibleColumnFromColumn2(e,t,new q(f,p));h&&(m>o||v<s)||c&&(v>s||m<o)||u.push(new _n(new F(f,g,f,g),0,new q(f,p),0))}if(u.length===0)for(let d=0;d<a;d++){const f=n+(l?-d:d),g=t.getLineMaxColumn(f);u.push(new _n(new F(f,g,f,g),0,new q(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,wd.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),h=Et.visibleColumnFromColumn2(e,t,new q(l,c));s=Math.max(s,h)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const r=s?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class ws{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.endLineNumber,s.endColumn,s.endLineNumber,s.endColumn)}}class qy{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn)}}class vS{constructor(e,t,n,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return new Ve(s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset,s.endLineNumber+this._lineNumberDeltaOffset,s.endColumn+this._columnDeltaOffset)}}class jX{constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class FE{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class St{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-fxe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new q(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=i1.atomicPosition(r,t.column-1,n,0);if(o!==-1&&o+1>=s)return new q(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?St.leftPositionAtomicSoftTabs(t,n,e.tabSize):St.leftPosition(t,n);return new FE(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(r-1)),c=t.normalizePosition(St.clipPositionColumn(l,t),0),h=St.left(e,t,c);o=h.lineNumber,a=h.column}return n.move(s,o,a,0)}static clipPositionColumn(e,t){return new q(e.lineNumber,St.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+Bx(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new q(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,r){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=i1.atomicPosition(o,n-1,s,1);if(a!==-1)return new q(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?St.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):St.rightPosition(t,n.lineNumber,n.column);return new FE(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,r-1),c=t.normalizePosition(St.clipPositionColumn(l,t),1),h=St.right(e,t,c);o=h.lineNumber,a=h.column}return n.move(s,o,a,0)}static vertical(e,t,n,s,r,o,a){const l=Et.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+r,c=t.getLineCount(),h=n===1&&s===1,u=n===c&&s===t.getLineMaxColumn(n),d=o<n?h:u;return n=o,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>c?(n=c,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=Et.columnFromVisibleColumn2(e,t,n,l),d?r=0:r=l-Et.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),new FE(n,s,r)}static down(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n+o,a)}static moveDown(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=St.down(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){let s=n.selection,r=St.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=St.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new _n(new F(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n-o,a)}static moveUp(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);let l=St.up(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let s=n.selection,r=St.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=St.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new _n(new F(r.lineNumber,r.column,r.lineNumber,r.column),r.leftoverVisibleColumns,new q(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,s){const r=t.getLineCount();let o=n.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,s){let r=n.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o,l;return n.position.column===a?l=o:l=a,n.move(s,r,l,0)}static moveToEndOfLine(e,t,n,s,r){let o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){let r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(s,r,o,0)}}class Vf{static deleteRight(e,t,n,s){let r=[],o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let h=c;if(h.isEmpty()){let u=c.getPosition(),d=St.right(t,n,u);h=new F(d.lineNumber,d.column,u.lineNumber,u.column)}if(h.isEmpty()){r[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),r[a]=new ws(h,"")}return[o,r]}static isAutoClosingPairDelete(e,t,n,s,r,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const h=o[l],u=h.getPosition();if(!h.isEmpty())return!1;const d=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=d.length+1)return!1;const f=d.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(hp(f)){if(n==="never")return!1}else if(t==="never")return!1;const p=d.charAt(u.column-1);let m=!1;for(const v of g)v.open===f&&v.close===p&&(m=!0);if(!m)return!1;if(e==="auto"){let v=!1;for(let b=0,w=a.length;b<w;b++){const y=a[b];if(u.lineNumber===y.startLineNumber&&u.column===y.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].getPosition(),l=new F(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new ws(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,r))return this._runAutoClosingPairDelete(t,n,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){let h=Vf.getDeleteRange(s[l],n,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new ws(h,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=Xs(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=Et.visibleColumnFromColumn2(n,t,s),c=Et.prevIndentTabStop(l,n.indentSize),h=Et.columnFromVisibleColumn2(n,t,s.lineNumber,c);return new F(s.lineNumber,h,s.lineNumber,s.column)}}return F.fromPositions(Vf.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=Cxe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new q(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let s=[],r=null;n.sort((o,a)=>q.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){let c=l.getPosition(),h,u,d,f;c.lineNumber<t.getLineCount()?(h=c.lineNumber,u=1,d=c.lineNumber+1,f=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(h=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(h=c.lineNumber,u=1,d=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));let g=new F(h,u,d,f);r=g,g.isEmpty()?s[o]=null:s[o]=new ws(g,"")}else s[o]=null;else s[o]=new ws(l,"")}return new $s(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class vi{static _createWord(e,t,n,s,r){return{start:s,end:r,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;for(let r=n.column-2;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===0){if(s===2)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(a===2){if(s===1)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(a===1&&s!==0)return this._createWord(e,s,a,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){let r=e.length;for(let o=s;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return o}return r}static _findNextWordOnLine(e,t,n){let s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0,r=e.length;for(let o=n.column-1;o<r;o++){let a=e.charCodeAt(o),l=t.get(a);if(l===0){if(s===2)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o);s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,this._findStartOfWord(e,t,s,o-1),o)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,n,s){for(let r=s;r>=0;r--){let o=e.charCodeAt(r),a=t.get(o);if(a===1||n===1&&a===2||n===2&&a===0)return r+1}return 0}static moveWordLeft(e,t,n,s){let r=n.lineNumber,o=n.column;o===1&&r>1&&(r=r-1,o=t.getLineMaxColumn(r));let a=vi._findPreviousWordOnLine(e,t,new q(r,o));if(s===0)return new q(r,a?a.start+1:1);if(s===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=vi._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.start+1:1);if(s===3){for(;a&&a.wordType===2;)a=vi._findPreviousWordOnLine(e,t,new q(r,a.start+1));return new q(r,a?a.start+1:1)}return a&&o<=a.end+1&&(a=vi._findPreviousWordOnLine(e,t,new q(r,a.start+1))),new q(r,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new q(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new q(n,o);if(wp(a)&&Lh(l))return new q(n,o);if(Lh(a)&&Lh(l)&&o+1<s){const c=r.charCodeAt(o);if(wp(c))return new q(n,o)}}return new q(n,1)}static moveWordRight(e,t,n,s){let r=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=vi._findNextWordOnLine(e,t,new q(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=vi._findNextWordOnLine(e,t,new q(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=vi._findNextWordOnLine(e,t,new q(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=vi._findNextWordOnLine(e,t,new q(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new q(r,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new q(n+1,1):t;const r=e.getLineContent(n);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new q(n,o);if(wp(a)&&Lh(l))return new q(n,o);if(Lh(a)&&Lh(l)&&o+1<s){const c=r.charCodeAt(o);if(wp(c))return new q(n,o)}}return new q(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,r=N0(n,s);return r+1<s?new F(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(Vf.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new F(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new q(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){let u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let h=vi._findPreviousWordOnLine(n,s,a);return t===0?h?c=h.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(h&&c<=h.end+1&&(h=vi._findPreviousWordOnLine(n,s,new q(l,h.start+1))),h?c=h.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new F(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new q(n.positionLineNumber,n.positionColumn);let r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(n,o+1);)o++;return new F(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),r=s.length;if(r===0)return n.lineNumber>1?new F(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new F(n.lineNumber,1,n.lineNumber+1,1):new F(n.lineNumber,1,n.lineNumber,1);const o=u=>u.start+1<=n.column&&n.column<=u.end+1,a=(u,d)=>(u=Math.min(u,n.column),d=Math.max(d,n.column),new F(n.lineNumber,u,n.lineNumber,d)),l=u=>{let d=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;d>1&&this._charAtIsWhitespace(s,d-2);)d--;return a(d,f)},c=vi._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const h=vi._findNextWordOnLine(e,t,n);return h&&o(h)?l(h):c&&h?a(c.end+1,h.start+1):c?a(c.start+1,c.end+1):h?a(h.start+1,h.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=vi._moveWordPartLeft(e,n);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let s=t;s<n;s++){let r=e.charAt(s);if(r!==" "&&r!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(n,s);return s+1<r?new F(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new q(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const h=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===h&&c===u)return null;if(o){let f=this._deleteWordRightWhitespace(s,a);if(f)return f}let d=vi._findNextWordOnLine(n,s,a);return t===2?d?c=d.end+1:c<u||l===h?c=u:(l++,d=vi._findNextWordOnLine(n,s,new q(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l)):(d&&c>=d.start+1&&(d=vi._findNextWordOnLine(n,s,new q(l,d.end+1))),d?c=d.start+1:c<u||l===h?c=u:(l++,d=vi._findNextWordOnLine(n,s,new q(l,1)),d?c=d.start+1:c=s.getLineMaxColumn(l))),new F(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=vi._moveWordPartRight(e,n);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new F(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n){const s=Bm(t),r=vi._findPreviousWordOnLine(s,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return vi._createWordAtPosition(e,n.lineNumber,r);const o=vi._findNextWordOnLine(s,e,n);return o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end?vi._createWordAtPosition(e,n.lineNumber,o):null}static word(e,t,n,s,r){const o=Bm(e.wordSeparators);let a=vi._findPreviousWordOnLine(o,t,r),l=vi._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new _n(new F(r.lineNumber,f,r.lineNumber,g),0,new q(r.lineNumber,g),0)}let c,h;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,h=l.end+1):(c=r.column,h=r.column);let u=r.lineNumber,d;if(n.selectionStart.containsPosition(r))d=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){d=c;let f=new q(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.endColumn)}else{d=h;let f=new q(u,d);n.selectionStart.containsPosition(f)&&(d=n.selectionStart.startColumn)}return n.move(!0,u,d,0)}}class pn{static addCursorDown(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Xe(l.modelState,l.viewState),n?s[r++]=Xe.fromModelState(St.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=Xe.fromViewState(St.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){let s=[],r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Xe(l.modelState,l.viewState),n?s[r++]=Xe.fromModelState(St.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=Xe.fromViewState(St.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Xe.fromViewState(St.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Xe.fromModelState(St.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,n,s)}return r}static _moveToLineEnd(e,t,n,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),h=o-r.column===c-l.column;return a||h?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return Xe.fromViewState(St.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return Xe.fromModelState(St.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,h;c===l?h=e.model.getLineMaxColumn(l):(c++,h=1),n[s]=Xe.fromModelState(new _n(new F(a,1,a,1),0,new q(c,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Xe.fromModelState(St.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Xe.fromModelState(St.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return Xe.fromModelState(new _n(new F(1,1,1,1),0,new q(n,s),0))}static line(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n||!t.modelState.hasSelection()){const c=e.model.getLineCount();let h=o.lineNumber+1,u=1;return h>c&&(h=c,u=e.model.getLineMaxColumn(h)),Xe.fromModelState(new _n(new F(o.lineNumber,1,h,u),0,new q(h,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Xe.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let h=a.lineNumber+1,u=1;return h>c&&(h=c,u=e.getLineMaxColumn(h)),Xe.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Xe.fromModelState(t.modelState.move(t.modelState.hasSelection(),c.lineNumber,c.column,0))}}static word(e,t,n,s){const r=e.model.validatePosition(s);return Xe.fromModelState(vi.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Xe(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return Xe.fromViewState(new _n(new F(n,s,n,s),0,new q(n,s),0))}static moveTo(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new q(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Xe.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,r,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>Xe.fromViewState(St.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Xe.fromModelState(St.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>Xe.fromViewState(St.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Xe.fromModelState(St.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{let l=[];for(let c=0,h=t.length;c<h;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){let r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new Xe(t.modelState,t.viewState);{let o;r>n.endLineNumber-1?o=n.endLineNumber-1:r<n.startLineNumber?o=n.startLineNumber:o=r;const a=St.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Xe.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(r=>Xe.fromViewState(St.moveLeft(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Xe.fromViewState(St.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveRight(e,t,n,s){return t.map(r=>Xe.fromViewState(St.moveRight(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineRight(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineContent(l).length/2);s[r]=Xe.fromViewState(St.moveRight(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveDownByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Xe.fromViewState(St.moveDown(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveDownByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Xe.fromModelState(St.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveUpByViewLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Xe.fromViewState(St.moveUp(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveUpByModelLines(e,t,n,s){let r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Xe.fromModelState(St.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveToViewPosition(e,t,n,s,r){return Xe.fromViewState(t.viewState.move(n,s,r,0))}static _moveToModelPosition(e,t,n,s,r){return Xe.fromModelState(t.modelState.move(n,s,r,0))}static _moveToViewMinColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewCenterColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewMaxColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){let s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}}var yD;(function(i){const e=function(n){if(!ks(n))return!1;let s=n;return!(!xa(s.to)||!us(s.select)&&!WY(s.select)||!us(s.by)&&!xa(s.by)||!us(s.value)&&!Tf(s.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(yD||(yD={}));const BE=Object.create(null);function id(i,e){if(e<=0)return"";BE[i]||(BE[i]=["",i]);const t=BE[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Vh{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,s,r){const o=Et.visibleColumnFromColumn(e,t,n);if(r){const a=id(" ",s),c=Et.prevIndentTabStop(o,s)/s;return id(a,c)}else{const a="	",c=Et.prevRenderTabStop(o,n)/n;return id(a,c)}}static shiftIndent(e,t,n,s,r){const o=Et.visibleColumnFromColumn(e,t,n);if(r){const a=id(" ",s),c=Et.nextIndentTabStop(o,s)/s;return id(a,c)}else{const a="	",c=Et.nextRenderTabStop(o,n)/n;return id(a,c)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&n!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=n===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,h=0;for(let u=n;u<=s;u++,c=h){h=0;let d=e.getLineContent(u),f=Xs(d);if(this._opts.isUnshift&&(d.length===0||f===0)||!l&&!this._opts.isUnshift&&d.length===0)continue;if(f===-1&&(f=d.length),u>1&&Et.visibleColumnFromColumn(d,f+1,r)%o!==0&&e.isCheapToTokenize(u-1)){let m=Mi.getEnterAction(this._opts.autoIndent,e,new F(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)));if(m){if(h=c,m.appendText)for(let v=0,b=m.appendText.length;v<b&&h<o&&m.appendText.charCodeAt(v)===32;v++)h++;m.removeText&&(h=Math.max(0,h-m.removeText));for(let v=0;v<h&&!(f===0||d.charCodeAt(f-1)!==32);v++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=Vh.unshiftIndent(d,f+1,r,o,a):g=Vh.shiftIndent(d,f+1,r,o,a),this._addEditOperation(t,new F(u,1,u,f+1),g),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?id(" ",o):"	";for(let h=n;h<=s;h++){const u=e.getLineContent(h);let d=Xs(u);if(!(this._opts.isUnshift&&(u.length===0||d===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(d===-1&&(d=u.length),!(this._opts.isUnshift&&d===0)))if(this._opts.isUnshift){d=Math.min(d,o);for(let f=0;f<d;f++)if(u.charCodeAt(f)===9){d=f+1;break}this._addEditOperation(t,new F(h,1,h,d+1),"")}else this._addEditOperation(t,new F(h,1,h,1),c),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let s=t.getInverseEditOperations()[0];return new Ve(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let s=this._selection.startColumn;return n.startColumn<=s?n:n.getDirection()===0?new Ve(n.startLineNumber,s,n.endLineNumber,n.endColumn):new Ve(n.endLineNumber,n.endColumn,n.startLineNumber,s)}return n}}class wTe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new F(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new F(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),s=n[0].range,r=n[1].range;return new Ve(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class wi{static indent(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Vh(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static outdent(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new Vh(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return s}static shiftIndent(e,t,n){return n=n||1,Vh.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Vh.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,s){let r=[];for(let o=0,a=n.length;o<a;o++)r[o]=new ws(n[o],s[o]);return new $s(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,r){let o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a];let h=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){let u=new F(h.lineNumber,1,h.lineNumber,1);o[a]=new jX(u,s,c,!0)}else o[a]=new ws(c,s)}return new $s(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let o=Nl(n);if(o.length===t.length)return o}return null}static paste(e,t,n,s,r,o){const a=this._distributePasteToCursors(e,n,s,r,o);return a?(n=n.sort(F.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,r)}static _goodIndentForLine(e,t,n){let s=null,r="";const o=Mi.getInheritIndentForLine(e.autoIndent,t,n,!1);if(o)s=o.action,r=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(N0(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Mi.getEnterAction(e.autoIndent,t,new F(a,l,a,l));c&&(r=c.indentation+c.appendText)}return s&&(s===an.Indent&&(r=wi.shiftIndent(e,r)),s===an.Outdent&&(r=wi.unshiftIndent(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,s){let r="",o=n.getStartPosition();if(e.insertSpaces){let a=Et.visibleColumnFromColumn2(e,t,o),l=e.indentSize,c=l-a%l;for(let h=0;h<c;h++)r+=" "}else r="	";return new ws(n,r,s)}static tab(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";let h=e.normalizeIndentation(c);if(!l.startsWith(h)){s[r]=new ws(new F(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Vh(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return s}static compositionType(e,t,n,s,r,o,a,l){const c=s.map(h=>this._compositionType(n,h,r,o,a,l));return new $s(4,c,{shouldPushStackElementBefore:Gy(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),h=new F(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(h)===n&&o===0?null:new vS(h,n,0,o)}static _typeCommand(e,t,n){return n?new qy(e,t,!0):new ws(e,t,!0)}static _enter(e,t,n,s){if(e.autoIndent===0)return wi._typeCommand(s,`
`,n);if(!t.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(s.startLineNumber),c=Zi(l).substring(0,s.startColumn-1);return wi._typeCommand(s,`
`+e.normalizeIndentation(c),n)}const r=Mi.getEnterAction(e.autoIndent,t,s);if(r){if(r.indentAction===an.None)return wi._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===an.Indent)return wi._typeCommand(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===an.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),h=`
`+c+`
`+l;return n?new qy(s,h,!0):new vS(s,h,-1,c.length-l.length,!0)}else if(r.indentAction===an.Outdent){const l=wi.unshiftIndent(e,r.indentation);return wi._typeCommand(s,`
`+e.normalizeIndentation(l+r.appendText),n)}}const o=t.getLineContent(s.startLineNumber),a=Zi(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=Mi.getIndentForEnter(e.autoIndent,t,s,{unshiftIndent:c=>wi.unshiftIndent(e,c),shiftIndent:c=>wi.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)});if(l){let c=Et.visibleColumnFromColumn2(e,t,s.getEndPosition());const h=s.endColumn,u=t.getLineContent(s.endLineNumber),d=Xs(u);if(d>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,d+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new qy(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return h<=d+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new vS(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return wi._typeCommand(s,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let s=0,r=n.length;s<r;s++)if(!t.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,s){const r=Mi.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),o=Mi.getIndentActionForType(e.autoIndent,t,n,s,{shiftIndent:a=>wi.shiftIndent(e,a),unshiftIndent:a=>wi.unshiftIndent(e,a)});if(o===null)return null;if(o!==e.normalizeIndentation(r)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?wi._typeCommand(new F(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+s,!1):wi._typeCommand(new F(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(o)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+s,!1)}return null}static _isAutoClosingOvertype(e,t,n,s,r){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(r))return!1;for(let o=0,a=n.length;o<a;o++){const l=n[o];if(!l.isEmpty())return!1;const c=l.getPosition(),h=t.getLineContent(c.lineNumber);if(h.charAt(c.column-1)!==r)return!1;const d=hp(r);if((c.column>2?h.charCodeAt(c.column-2):0)===92&&d)return!1;if(e.autoClosingOvertype==="auto"){let g=!1;for(let p=0,m=s.length;p<m;p++){const v=s[p];if(c.lineNumber===v.startLineNumber&&c.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const h=s[a].getPosition(),u=new F(h.lineNumber,h.column,h.lineNumber,h.column+1);o[a]=new ws(u,r)}return new $s(4,o,{shouldPushStackElementBefore:Gy(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}static _findAutoClosingPairOpen(e,t,n,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new F(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _findSubAutoClosingPairClose(e,t){if(t.open.length<=1)return"";const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r?r.close:""}static _getAutoClosingPairClose(e,t,n,s,r){const o=hp(s),a=o?e.autoClosingQuotes:e.autoClosingBrackets;if(a==="never")return null;const l=this._findAutoClosingPairOpen(e,t,n.map(d=>d.getPosition()),s);if(!l)return null;const c=this._findSubAutoClosingPairClose(e,l);let h=!0;const u=o?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;for(let d=0,f=n.length;d<f;d++){const g=n[d];if(!g.isEmpty())return null;const p=g.getPosition(),m=t.getLineContent(p.lineNumber),v=m.substring(p.column-1);if(v.startsWith(c)||(h=!1),m.length>p.column-1){const y=m.charAt(p.column-1);if(!wi._isBeforeClosingBrace(e,v)&&!u(y))return null}if(!t.isCheapToTokenize(p.lineNumber))return null;if(l.open.length===1&&(s==="'"||s==='"')&&a!=="always"){const y=Bm(e.wordSeparators);if(r&&p.column>1&&y.get(m.charCodeAt(p.column-2))===0||!r&&p.column>2&&y.get(m.charCodeAt(p.column-3))===0)return null}t.forceTokenization(p.lineNumber);const b=t.getLineTokens(p.lineNumber);let w=!1;try{w=Mi.shouldAutoClosePair(l,b,r?p.column:p.column-1)}catch(y){Ze(y)}if(!w)return null}return h?l.close.substring(0,l.close.length-c.length):l.close}static _runAutoClosingOpenCharType(e,t,n,s,r,o,a){let l=[];for(let c=0,h=s.length;c<h;c++){const u=s[c];l[c]=new qX(u,r,o,a)}return new $s(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return hp(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,s){if(!wi._shouldSurroundChar(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=hp(s);for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())return!1;let c=!0;for(let h=l.startLineNumber;h<=l.endLineNumber;h++){const u=t.getLineContent(h),d=h===l.startLineNumber?l.startColumn-1:0,f=h===l.endLineNumber?l.endColumn-1:u.length,g=u.substring(d,f);if(/[^ \t]/.test(g)){c=!1;break}}if(c)return!1;if(r&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const h=t.getValueInRange(l);if(hp(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,s,r){let o=[];for(let a=0,l=s.length;a<l;a++){const c=s[a],h=t.surroundingPairs[r];o[a]=new wTe(c,r,h)}return new $s(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;let o=s.getPosition();n.forceTokenization(o.lineNumber);let a=n.getLineTokens(o.lineNumber),l;try{l=Mi.onElectricCharacter(r,a,o.column)}catch(c){return Ze(c),null}if(!l)return null;if(l.matchOpenBracket){let c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,h=n.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c});if(h){if(h.startLineNumber===o.lineNumber)return null;let u=n.getLineContent(h.startLineNumber),d=Zi(u),f=t.normalizeIndentation(d),g=n.getLineContent(o.lineNumber),p=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,m=g.substring(p-1,o.column-1),v=f+m+r,b=new F(o.lineNumber,1,o.lineNumber,o.column);const w=new ws(b,v);return new $s(VE(v,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,s,r,o){if(!s||Ve.selectionsArrEqual(s,r))return null;let a=null;for(const c of r){if(!c.isEmpty())return null;const h=c.getPosition(),u=n.getValueInRange(new F(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=u;else if(a!==u)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,r,o,a)){const c=r.map(h=>new ws(new F(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new $s(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,r,a,!1);return l!==null?this._runAutoClosingOpenCharType(e,t,n,r,a,!1,l):null}static typeWithInterceptors(e,t,n,s,r,o,a){if(!e&&a===`
`){let h=[];for(let u=0,d=r.length;u<d;u++)h[u]=wi._enter(n,s,!1,r[u]);return new $s(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,s,r)){let h=[],u=!1;for(let d=0,f=r.length;d<f;d++)if(h[d]=this._runAutoIndentType(n,s,r[d],a),!h[d]){u=!0;break}if(!u)return new $s(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,s,r,o,a))return this._runAutoClosingOvertype(t,n,s,r,a);if(!e){const h=this._getAutoClosingPairClose(n,s,r,a,!0);if(h)return this._runAutoClosingOpenCharType(t,n,s,r,a,!0,h)}if(this._isSurroundSelectionType(n,s,r,a))return this._runSurroundSelectionType(t,n,s,r,a);if(!e&&this._isTypeInterceptorElectricChar(n,s,r)){const h=this._typeInterceptorElectricChar(t,n,s,r[0],a);if(h)return h}let l=[];for(let h=0,u=r.length;h<u;h++)l[h]=new ws(r[h],a);const c=VE(a,t);return new $s(c,l,{shouldPushStackElementBefore:Gy(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,s,r){let o=[];for(let l=0,c=s.length;l<c;l++)o[l]=new ws(s[l],r);const a=VE(r,e);return new $s(a,o,{shouldPushStackElementBefore:Gy(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){let a=n[r].positionLineNumber;if(a===1)s[r]=new qy(new F(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new F(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].positionLineNumber;let l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new F(a,l,a,l))}return s}static lineBreakInsert(e,t,n){let s=[];for(let r=0,o=n.length;r<o;r++)s[r]=this._enter(e,t,!0,n[r]);return s}}class qX extends vS{constructor(e,t,n,s){super(e,(n?t:"")+s,0,-s.length),this._openCharacter=t,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let s=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new F(s.startLineNumber,s.endColumn-this._closeCharacter.length,s.endLineNumber,s.endColumn),this.enclosingRange=new F(s.startLineNumber,s.endColumn-this._openCharacter.length-this._closeCharacter.length,s.endLineNumber,s.endColumn),super.computeCursorState(e,t)}}function VE(i,e){return i===" "?e===5||e===6?6:5:4}function Gy(i,e){return sW(i)&&!sW(e)?!0:i===5?!1:nW(i)!==nW(e)}function nW(i){return i===6||i===5?"space":i}function sW(i){return i===4||i===5||i===6}var G;(function(i){i.editorSimpleInput=new De("editorSimpleInput",!1,!0),i.editorTextFocus=new De("editorTextFocus",!1,_("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new De("editorFocus",!1,_("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new De("textInputFocus",!1,_("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new De("editorReadonly",!1,_("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new De("inDiffEditor",!1,_("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new De("editorColumnSelection",!1,_("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new De("editorHasSelection",!1,_("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new De("editorHasMultipleSelections",!1,_("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new De("editorTabMovesFocus",!1,_("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new De("isInEmbeddedEditor",!1,!0),i.canUndo=new De("canUndo",!1,!0),i.canRedo=new De("canRedo",!1,!0),i.hoverVisible=new De("editorHoverVisible",!1,_("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new De("inCompositeEditor",void 0,_("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new De("editorLangId","",_("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new De("editorHasCompletionItemProvider",!1,_("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new De("editorHasCodeActionsProvider",!1,_("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new De("editorHasCodeLensProvider",!1,_("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new De("editorHasDefinitionProvider",!1,_("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new De("editorHasDeclarationProvider",!1,_("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new De("editorHasImplementationProvider",!1,_("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new De("editorHasTypeDefinitionProvider",!1,_("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new De("editorHasHoverProvider",!1,_("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new De("editorHasDocumentHighlightProvider",!1,_("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new De("editorHasDocumentSymbolProvider",!1,_("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new De("editorHasReferenceProvider",!1,_("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new De("editorHasRenameProvider",!1,_("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new De("editorHasSignatureHelpProvider",!1,_("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new De("editorHasInlayHintsProvider",!1,_("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new De("editorHasDocumentFormattingProvider",!1,_("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new De("editorHasDocumentSelectionFormattingProvider",!1,_("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new De("editorHasMultipleDocumentFormattingProvider",!1,_("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new De("editorHasMultipleDocumentSelectionFormattingProvider",!1,_("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(G||(G={}));const ft=0;class Di extends Qr{runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var CD;(function(i){const e=function(n){if(!ks(n))return!1;const s=n;return!(!xa(s.to)||!us(s.by)&&!xa(s.by)||!us(s.value)&&!Tf(s.value)||!us(s.revealCursor)&&!WY(s.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Down:s=2;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;default:r=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(CD||(CD={}));var kp;(function(i){const e=function(t){if(!ks(t))return!1;const n=t;return!(!Tf(n.lineNumber)&&!xa(n.lineNumber)||!us(n.at)&&!xa(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(kp||(kp={}));class _4{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(si).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=document.activeElement;return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(si).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var rn;(function(i){class e extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[pn.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!0)}}i.MoveTo=pe(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=pe(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Di{runCoreEditorCommand(b,w){b.model.pushStackElement();const y=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),w);b.setCursorStates(w.source,3,y.viewStates.map(x=>Xe.fromViewState(x))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:y.fromLineNumber,fromViewVisualColumn:y.fromVisualColumn,toViewLineNumber:y.toLineNumber,toViewVisualColumn:y.toVisualColumn}),y.reversed?b.revealTopMostCursor(w.source):b.revealBottomMostCursor(w.source)}}i.ColumnSelect=pe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(v,b,w,y){const x=v.model.validatePosition(y.position),L=v.coordinatesConverter.validateViewPosition(new q(y.viewPosition.lineNumber,y.viewPosition.column),x);let S=y.doColumnSelect?w.fromViewLineNumber:L.lineNumber,k=y.doColumnSelect?w.fromViewVisualColumn:y.mouseColumn-1;return wd.columnSelect(v.cursorConfig,v,S,k,L.lineNumber,y.mouseColumn-1)}}),i.CursorColumnSelectLeft=pe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,y){return wd.columnSelectLeft(v.cursorConfig,v,w)}}),i.CursorColumnSelectRight=pe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(v,b,w,y){return wd.columnSelectRight(v.cursorConfig,v,w)}});class n extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,y,x){return wd.columnSelectUp(b.cursorConfig,b,y,this._isPaged)}}i.CursorColumnSelectUp=pe(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=pe(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,w,y,x){return wd.columnSelectDown(b.cursorConfig,b,y,this._isPaged)}}i.CursorColumnSelectDown=pe(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=pe(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Di{constructor(){super({id:"cursorMove",precondition:void 0,description:yD.description})}runCoreEditorCommand(b,w){const y=yD.parse(w);y&&this._runCursorMove(b,w.source,y)}_runCursorMove(b,w,y){b.model.pushStackElement(),b.setCursorStates(w,3,r._move(b,b.getCursorStates(),y)),b.revealPrimaryCursor(w,!0)}static _move(b,w,y){const x=y.select,L=y.value;switch(y.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return pn.simpleMove(b,w,y.direction,x,L,y.unit);case 11:case 13:case 12:case 14:return pn.viewportMove(b,w,y.direction,x,L);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=pe(new r);class o extends Di{constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,w){let y=this._staticArgs;this._staticArgs.value===-1&&(y={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(w.source,3,pn.simpleMove(b,b.getCursorStates(),y.direction,y.select,y.value,y.unit)),b.revealPrimaryCursor(w.source,!0)}}i.CursorLeft=pe(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=pe(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1039}})),i.CursorRight=pe(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=pe(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1041}})),i.CursorUp=pe(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=pe(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=pe(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:11}})),i.CursorPageUpSelect=pe(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1035}})),i.CursorDown=pe(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=pe(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=pe(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:12}})),i.CursorPageDownSelect=pe(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1036}})),i.CreateCursor=pe(new class extends Di{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(v,b){let w;b.wholeLine?w=pn.line(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition):w=pn.moveTo(v,v.getPrimaryCursorState(),!1,b.position,b.viewPosition);const y=v.getCursorStates();if(y.length>1){const x=w.modelState?w.modelState.position:null,L=w.viewState?w.viewState.position:null;for(let S=0,k=y.length;S<k;S++){const D=y[S];if(!(x&&!D.modelState.selection.containsPosition(x))&&!(L&&!D.viewState.selection.containsPosition(L))){y.splice(S,1),v.model.pushStackElement(),v.setCursorStates(b.source,3,y);return}}}y.push(w),v.model.pushStackElement(),v.setCursorStates(b.source,3,y)}}),i.LastCursorMoveToSelect=pe(new class extends Di{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),y=v.getCursorStates(),x=y.slice(0);x[w]=pn.moveTo(v,y[w],!0,b.position,b.viewPosition),v.model.pushStackElement(),v.setCursorStates(b.source,3,x)}});class a extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,pn.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorHome=pe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=pe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b){const w=[];for(let y=0,x=b.length;y<x;y++){const L=b[y],S=L.modelState.position.lineNumber;w[y]=Xe.fromModelState(L.modelState.move(this._inSelectionMode,S,1,0))}return w}}i.CursorLineStart=pe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=pe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,pn.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,w.sticky||!1)),b.revealPrimaryCursor(w.source,!0)}}i.CursorEnd=pe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ft,kbExpr:G.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=pe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ft,kbExpr:G.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:_("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,this._exec(b,b.getCursorStates())),b.revealPrimaryCursor(w.source,!0)}_exec(b,w){const y=[];for(let x=0,L=w.length;x<L;x++){const S=w[x],k=S.modelState.position.lineNumber,D=b.model.getLineMaxColumn(k);y[x]=Xe.fromModelState(S.modelState.move(this._inSelectionMode,k,D,0))}return y}}i.CursorLineEnd=pe(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=pe(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,pn.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorTop=pe(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=pe(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,pn.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealPrimaryCursor(w.source,!0)}}i.CursorBottom=pe(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=pe(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Di{constructor(){super({id:"editorScroll",precondition:void 0,description:CD.description})}runCoreEditorCommand(b,w){const y=CD.parse(w);y&&this._runEditorScroll(b,w.source,y)}_runEditorScroll(b,w,y){const x=this._computeDesiredScrollTop(b,y);if(y.revealCursor){const L=b.getCompletelyVisibleViewRangeAtScrollTop(x);b.setCursorStates(w,3,[pn.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),L,y.select)])}b.setScrollTop(x,0)}_computeDesiredScrollTop(b,w){if(w.unit===1){const L=b.getCompletelyVisibleViewRange(),S=b.coordinatesConverter.convertViewRangeToModelRange(L);let k;w.direction===1?k=Math.max(1,S.startLineNumber-w.value):k=Math.min(b.model.getLineCount(),S.startLineNumber+w.value);const D=b.coordinatesConverter.convertModelPositionToViewPosition(new q(k,1));return b.getVerticalOffsetForLineNumber(D.lineNumber)}let y;w.unit===3?y=b.cursorConfig.pageSize*w.value:w.unit===4?y=Math.round(b.cursorConfig.pageSize/2)*w.value:y=w.value;const x=(w.direction===1?-1:1)*y;return b.getScrollTop()+x*b.cursorConfig.lineHeight}}i.EditorScrollImpl=f,i.EditorScroll=pe(new f),i.ScrollLineUp=pe(new class extends Di{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=pe(new class extends Di{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=pe(new class extends Di{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=pe(new class extends Di{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(v,b){i.EditorScroll._runEditorScroll(v,b.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class g extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[pn.word(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position)]),b.revealPrimaryCursor(w.source,!0)}}i.WordSelect=pe(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=pe(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=pe(new class extends Di{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(v,b){const w=v.getLastAddedCursorIndex(),y=v.getCursorStates(),x=y.slice(0),L=y[w];x[w]=pn.word(v,L,L.modelState.hasSelection(),b.position),v.model.pushStackElement(),v.setCursorStates(b.source,3,x)}});class p extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){b.model.pushStackElement(),b.setCursorStates(w.source,3,[pn.line(b,b.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),b.revealPrimaryCursor(w.source,!1)}}i.LineSelect=pe(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=pe(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends Di{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,w){const y=b.getLastAddedCursorIndex(),x=b.getCursorStates(),L=x.slice(0);L[y]=pn.line(b,x[y],this._inSelectionMode,w.position,w.viewPosition),b.model.pushStackElement(),b.setCursorStates(w.source,3,L)}}i.LastCursorLineSelect=pe(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=pe(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.ExpandLineSelection=pe(new class extends Di{constructor(){super({id:"expandLineSelection",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:2090}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,pn.expandLineSelection(v,v.getCursorStates())),v.revealPrimaryCursor(b.source,!0)}}),i.CancelSelection=pe(new class extends Di{constructor(){super({id:"cancelSelection",precondition:G.hasNonEmptySelection,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[pn.cancelSelection(v,v.getPrimaryCursorState())]),v.revealPrimaryCursor(b.source,!0)}}),i.RemoveSecondaryCursors=pe(new class extends Di{constructor(){super({id:"removeSecondaryCursors",precondition:G.hasMultipleSelections,kbOpts:{weight:ft+1,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[v.getPrimaryCursorState()]),v.revealPrimaryCursor(b.source,!0),lD(_("removedCursor","Removed secondary cursors"))}}),i.RevealLine=pe(new class extends Di{constructor(){super({id:"revealLine",precondition:void 0,description:kp.description})}runCoreEditorCommand(v,b){const w=b,y=w.lineNumber||0;let x=typeof y=="number"?y+1:parseInt(y)+1;x<1&&(x=1);const L=v.model.getLineCount();x>L&&(x=L);const S=new F(x,1,x,v.model.getLineMaxColumn(x));let k=0;if(w.at)switch(w.at){case kp.RawAtArgument.Top:k=3;break;case kp.RawAtArgument.Center:k=1;break;case kp.RawAtArgument.Bottom:k=4;break}const D=v.coordinatesConverter.convertModelRangeToViewRange(S);v.revealRange(b.source,!1,D,k,0)}}),i.SelectAll=new class extends _4{constructor(){super(a2e)}runDOMCommand(){Es&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(v,b,w){const y=b._getViewModel();y&&this.runCoreEditorCommand(y,w)}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates("keyboard",3,[pn.selectAll(v,v.getPrimaryCursorState())])}},i.SetSelection=pe(new class extends Di{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(v,b){v.model.pushStackElement(),v.setCursorStates(b.source,3,[Xe.fromModelSelection(b.selection)])}})})(rn||(rn={}));const yTe=xe.and(G.textInputFocus,G.columnSelection);function W0(i,e){gs.registerKeybindingRule({id:i,primary:e,when:yTe,weight:ft+1})}W0(rn.CursorColumnSelectLeft.id,1039);W0(rn.CursorColumnSelectRight.id,1041);W0(rn.CursorColumnSelectUp.id,1040);W0(rn.CursorColumnSelectPageUp.id,1035);W0(rn.CursorColumnSelectDown.id,1042);W0(rn.CursorColumnSelectPageDown.id,1036);function rW(i){return i.register(),i}var zb;(function(i){class e extends Qr{runEditorCommand(n,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=pe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:G.writable,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,wi.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=pe(new class extends e{constructor(){super({id:"outdent",precondition:G.writable,kbOpts:{weight:ft,kbExpr:xe.and(G.editorTextFocus,G.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,wi.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=pe(new class extends e{constructor(){super({id:"tab",precondition:G.writable,kbOpts:{weight:ft,kbExpr:xe.and(G.editorTextFocus,G.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,wi.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=pe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Vf.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=pe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ft,kbExpr:G.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,s){const[r,o]=Vf.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends _4{constructor(){super(iP)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends _4{constructor(){super(nP)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(zb||(zb={}));class oW extends RL{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(si).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function gg(i,e){rW(new oW("default:"+i,i)),rW(new oW(i,i,e))}gg("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});gg("replacePreviousChar");gg("compositionType");gg("compositionStart");gg("compositionEnd");gg("paste");gg("cut");class CTe{constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){rn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new q(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Is&&t.get(95),s=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){rn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){rn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),rn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),rn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){rn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){rn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){rn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){rn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){rn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){rn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){rn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){rn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){rn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class UL{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return UL.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new STe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class STe{constructor(e,t,n,s,r,o){this.element=e,this.type=t,this.mouseColumn=n,this.position=s,this.range=r,this.detail=o}toString(){return Yo.toString(this)}}var WE;class GX{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=n;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=t;o++)o>=n&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<n;u++)o[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let h=l;h<=c;h++){const u=h-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class KX{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new GX(()=>this._host.createVisibleLine())}_createDomNode(){const e=gt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(129)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r&&this.domNode.domNode.removeChild(r)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new xc(this.domNode.domNode,this._host,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}class xc{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let o=t;o<=n;o++)r.lines[o-t]=this.host.createVisibleLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(n,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){const o=r.rendLineNumberStart+r.linesLength,a=n;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){const o=Math.max(0,n-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,n,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,s[c-r])}}_insertLinesBefore(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const s=e.lines[n].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[n+s].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){xc._ttPolicy&&(n=xc._ttPolicy.createHTML(n));const r=this.domNode.lastChild;t||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let o=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");xc._ttPolicy&&(t=xc._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(n[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const s=xc._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let h=0;h<r;h++){const u=o[h];l[h]=!1,!(u.getDomNode()||!u.renderLine(h+a,n[h],this.viewportData,s))&&(l[h]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const h=[];for(let u=0;u<r;u++){const d=o[u];h[u]=!1,!(l[u]||!d.renderLine(u+a,n[u],this.viewportData,s))&&(h[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),h)}}}xc._ttPolicy=(WE=window.trustedTypes)===null||WE===void 0?void 0:WE.createPolicy("editorViewLayer",{createHTML:i=>i});xc._sb=Nf(1e5);class ZX extends Xr{constructor(e){super(e),this._visibleLines=new KX(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new xTe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class xTe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=gt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,s){let r="";for(let o=0,a=this._dynamicOverlays.length;o<a;o++){const l=this._dynamicOverlays[o];r+=l.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,s.appendASCIIString('<div style="position:absolute;top:'),s.appendASCIIString(String(t)),s.appendASCIIString("px;width:100%;height:"),s.appendASCIIString(String(this._lineHeight)),s.appendASCIIString('px;">'),s.appendASCIIString(r),s.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class DTe extends ZX{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class kTe extends ZX{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Vn.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Vn.applyFontInfo(this.domNode,t.get(43));const n=t.get(129);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class v_{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class LTe extends Xr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=gt(document.createElement("div")),Ol.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=gt(document.createElement("div")),Ol.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new ATe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.parentNode.removeChild(s),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let ATe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=gt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(129);this._fixedOverflowWidgets=s.get(36),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(129)){const n=t.get(129);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,s,r){const o=e.top,a=o,l=t.top+this._lineHeight,c=r.viewportHeight-l,h=o-s,u=a>=s,d=l,f=c>=s;let g=e.left,p=t.left;return g+n>r.scrollLeft+r.viewportWidth&&(g=r.scrollLeft+r.viewportWidth-n),p+n>r.scrollLeft+r.viewportWidth&&(p=r.scrollLeft+r.viewportWidth-n),g<r.scrollLeft&&(g=r.scrollLeft),p<r.scrollLeft&&(p=r.scrollLeft),{fitsAbove:u,aboveTop:h,aboveLeft:g,fitsBelow:f,belowTop:d,belowLeft:p}}_layoutHorizontalSegmentInPage(e,t,n,s){const r=Math.max(0,t.left-s),o=Math.min(t.left+t.width+s,e.width);let a=t.left+n-Fc.scrollX;if(a+s>o){const l=a-(o-s);a-=l,n-=l}if(a<r){const l=a-r;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,s,r){const o=e.top-s,a=t.top+this._lineHeight,l=Rn(this._viewDomNode.domNode),c=l.top+o-Fc.scrollY,h=l.top+a-Fc.scrollY,u=cL(document.body),[d,f]=this._layoutHorizontalSegmentInPage(u,l,e.left-r.scrollLeft+this._contentLeft,n),[g,p]=this._layoutHorizontalSegmentInPage(u,l,t.left-r.scrollLeft+this._contentLeft,n),m=22,v=22,b=c>=m,w=h+s<=u.height-v;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(c,m),aboveLeft:f,fitsBelow:w,belowTop:h,belowLeft:p}:{fitsAbove:b,aboveTop:o,aboveLeft:d,fitsBelow:w,belowTop:a,belowLeft:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new v_(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],s=t[0];for(const u of t)u.lineNumber<n.lineNumber&&(n=u),u.lineNumber>s.lineNumber&&(s=u);let r=1073741824;for(const u of n.ranges)u.left<r&&(r=u.left);let o=1073741824;for(const u of s.ranges)u.left<o&&(o=u.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new v_(a,r),c=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop,h=new v_(c,o);return[l,h]}_prepareRenderWidget(e){const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=zE(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeClientWidth=r.width,this._cachedDomNodeClientHeight=r.height;else{const o=this.domNode.domNode;this._cachedDomNodeClientWidth=o.clientWidth,this._cachedDomNodeClientHeight=o.clientHeight}}let s;if(this.allowEditorOverflow?s=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):s=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e),this._preference)for(let r=1;r<=2;r++)for(const o of this._preference)if(o===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new v_(s.aboveTop,s.aboveLeft),position:1}}else if(o===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new v_(s.belowTop,s.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&zE(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&zE(this._actual.afterRender,this._actual,this._renderData.position)}};function zE(i,e,...t){try{return i.call(e,...t)}catch{return null}}let b4=!0;class YX extends V0{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ve(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=b4?this._selections.slice(0,1):this._selections,n=t.map(r=>r.positionLineNumber);n.sort((r,o)=>r-o),Al(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=t.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._cursorLineNumbers.length;let o=0;const a=[];for(let l=n;l<=s;l++){const c=l-n;for(;o<r&&this._cursorLineNumbers[o]<l;)o++;o<r&&this._cursorLineNumbers[o]===l?a[c]=t:a[c]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class ETe extends YX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class ITe extends YX{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}ti((i,e)=>{b4=!1;const t=i.getColor(hIe);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(KV)){const n=i.getColor(KV);n&&(b4=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class TTe extends V0{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,c=t.length;l<c;l++){const h=t[l];h.options.className&&(n[s++]=h)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const h=l.options.className,u=c.options.className;return h<u?-1:h>u?1:F.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const c=t[a];if(!c.options.isWholeLine)continue;const h='<div class="cdr '+c.options.className+'" style="left:0;width:100%;height:'+s+'px;"></div>',u=Math.max(c.range.startLineNumber,r),d=Math.min(c.range.endLineNumber,o);for(let f=u;f<=d;f++){const g=f-r;n[g]+=h}}}_renderNormalDecorations(e,t,n){const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null;for(let c=0,h=t.length;c<h;c++){const u=t[c];if(u.options.isWholeLine)continue;const d=u.options.className,f=!!u.options.showIfCollapsed;let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new F(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.model.getLineMaxColumn(g.endLineNumber-1))),o===d&&a===f&&F.areIntersectingOrTouching(l,g)){l=F.plusRange(l,g);continue}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n),o=d,a=f,l=g}o!==null&&this._renderNormalDecoration(e,l,o,a,s,r,n)}_renderNormalDecoration(e,t,n,s,r,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u.outsideRenderedLine)continue;const d=u.lineNumber-o;if(s&&u.ranges.length===1){const f=u.ranges[0];f.width===0&&(u.ranges[0]=new OL(f.left,this._typicalHalfwidthCharacterWidth))}for(let f=0,g=u.ranges.length;f<g;f++){const p=u.ranges[f],m='<div class="cdr '+n+'" style="left:'+String(p.left)+"px;width:"+String(p.width)+"px;height:"+r+'px;"></div>';a[d]+=m}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Jr extends te{onclick(e,t){this._register(ne(e,Ae.CLICK,n=>t(new Ur(n))))}onmousedown(e,t){this._register(ne(e,Ae.MOUSE_DOWN,n=>t(new Ur(n))))}onmouseover(e,t){this._register(ne(e,Ae.MOUSE_OVER,n=>t(new Ur(n))))}onnonbubblingmouseout(e,t){this._register(v5(e,n=>t(new Ur(n))))}onkeydown(e,t){this._register(ne(e,Ae.KEY_DOWN,n=>t(new ui(n))))}onkeyup(e,t){this._register(ne(e,Ae.KEY_UP,n=>t(new ui(n))))}oninput(e,t){this._register(ne(e,Ae.INPUT,t))}onblur(e,t){this._register(ne(e,Ae.BLUR,t))}onfocus(e,t){this._register(ne(e,Ae.FOCUS,t))}ignoreGesture(e){At.ignoreTarget(e)}}const $m=11;class NTe extends Jr{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=$m+"px",this.domNode.style.height=$m+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new fg),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new Nw),this._mousedownScheduleRepeatTimer=this._register(new Os)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,B0,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class MTe extends te{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Os)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const RTe=140;class QX extends Jr{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new MTe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new fg),this._shouldRender=!0,this.domNode=gt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new NTe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=gt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,r=>{r.leftButton&&(r.preventDefault(),this._sliderMouseDown(r,()=>{}))}),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderMousePosition(e);n<=r&&r<=s?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const r=Rn(this.domNode.domNode);t=e.posx-r.left,n=e.posy-r.top}const s=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),s=this._sliderOrthogonalMousePosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,B0,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-s);if(Fn&&l>RTe){this._setDesiredScrollPositionNow(r.getScrollPosition());return}const h=this._sliderMousePosition(o)-n;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const OTe=20;class n1{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new n1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(OTe,Math.floor(n*a/s))),h=(a-c)/(s-n),u=r*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=n1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}const PTe=zo("scrollbar-button-left",be.triangleLeft),FTe=zo("scrollbar-button-right",be.triangleRight);class BTe extends QX{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new n1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-$m)/2,a=(t.horizontalScrollbarSize-$m)/2;this._createArrow({className:"scra",icon:PTe,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Am(null,1,0))}),this._createArrow({className:"scra",icon:FTe,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Am(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}const VTe=zo("scrollbar-button-up",be.triangleUp),WTe=zo("scrollbar-button-down",be.triangleDown);class zTe extends QX{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new n1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-$m)/2,a=(t.verticalScrollbarSize-$m)/2;this._createArrow({className:"scra",icon:VTe,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Am(null,0,1))}),this._createArrow({className:"scra",icon:WTe,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Am(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class SD{constructor(e,t,n,s,r,o){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,this.rawScrollLeft=n,this.rawScrollTop=o,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new SD(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new SD(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class $L extends te{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new z),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new SD(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new s1(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=s1.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class aW{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function HE(i,e){const t=e-i;return function(n){return i+t*$Te(n)}}function HTe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class s1{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),HTe(HE(e,r),HE(o,t),.33)}return HE(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new aW(n,s,!1)}return new aW(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return s1.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new s1(e,t,s,n)}}function UTe(i){return Math.pow(i,3)}function $Te(i){return 1-UTe(1-i)}const jTe=500,lW=50;class qTe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class v4{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const s=new qTe(e,t,n);s.score=this._computeScore(s),this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}v4.INSTANCE=new v4;class XX extends Jr{constructor(e,t,n){super(),this._onScroll=this._register(new z),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new z),e.style.overflow="hidden",this._options=GTe(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new zTe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new BTe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=gt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=gt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=gt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onnonbubblingmouseout(this._listenOnDomNode,r=>this._onMouseOut(r)),this._hideTimeout=this._register(new Os),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=lt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ut&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=lt(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new Am(s))};this._mouseWheelToDispose.push(ne(this._listenOnDomNode,Ae.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=v4.INSTANCE;{const r=window.devicePixelRatio/ISe();Fn||Is?t.accept(Date.now(),e.deltaX/r,e.deltaY/r):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!ut&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=lW*r,u=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const h=lW*o,u=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),jTe)}}class xP extends XX{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new $L(0,s=>Tl(s));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class DP extends XX{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class jL extends xP{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function GTe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,ut&&(e.className+=" mac"),e}class KTe extends Xr{constructor(e,t,n,s){super(e);const r=this._context.configuration.options,o=r.get(91),a=r.get(66),l=r.get(34),c=r.get(94),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+uD(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new DP(t.domNode,h,this._context.viewLayout.getScrollable())),Ol.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=gt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(d,f,g)=>{const p={};if(f){const m=d.scrollTop;m&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+m,d.scrollTop=0)}if(g){const m=d.scrollLeft;m&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+m,d.scrollLeft=0)}this._context.model.setScrollPosition(p,1)};this._register(ne(n.domNode,"scroll",d=>u(n.domNode,!0,!0))),this._register(ne(t.domNode,"scroll",d=>u(t.domNode,!0,!1))),this._register(ne(s.domNode,"scroll",d=>u(s.domNode,!0,!1))),this._register(ne(this.scrollbarDomNode.domNode,"scroll",d=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(129);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),s=t.get(66),r=t.get(34),o=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(129)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+uD(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}ti((i,e)=>{const t=i.getColor(Vw);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(Fb);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const s=i.getColor(Bb);s&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${s};
			}
		`);const r=i.getColor(Vb);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${r};
			}
		`)});class xD{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class kP extends V0{_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=[]}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],h=c.className;let u=Math.max(c.startLineNumber,e)-e;const d=Math.min(c.endLineNumber,t)-e;r===h?(u=Math.max(o+1,u),o=Math.max(o,d)):(r=h,o=d);for(let f=u;f<=o;f++)s[f].push(r)}return s}}class ZTe extends kP{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.glyphMarginClassName;l&&(n[s++]=new xD(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._lineHeight.toString(),o=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+o+"px;width:"+a+"px;height:"+r+'px;"></div>',c=[];for(let h=t;h<=n;h++){const u=h-t,d=s[u];d.length===0?c[u]="":c[u]='<div class="cgmr codicon '+d.join(" ")+l}this._renderResult=c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class YTe extends V0{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(130),s=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130),s=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const s=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(s)?!1:(this._primaryPosition=s,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,s,r;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._lineHeight,h=this._primaryPosition,u=this.getGuidesByLine(o,a,h),d=[];for(let f=o;f<=a;f++){const g=f-o,p=u[g];let m="";const v=(n=(t=e.visibleRangeForPosition(new q(f,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const b of p){const w=v+(b.visibleColumn-1)*this._spaceWidth;if(w>l||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const y=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",x=b.horizontalLine?((r=(s=e.visibleRangeForPosition(new q(f,b.horizontalLine.endColumn)))===null||s===void 0?void 0:s.left)!==null&&r!==void 0?r:w+this._spaceWidth)-w:this._spaceWidth;m+=`<div class="core-guide ${b.className} ${y}" style="left:${w}px;height:${c}px;width:${x}px"></div>`}d[g]=m}this._renderResult=d}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Jd.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Jd.EnabledForActive:Jd.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const u=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.model.getTextModelOptions(),h=[];for(let u=e;u<=t;u++){const d=new Array;h.push(d);const f=s?s[u-e]:[],g=new Db(f),p=r?r[u-e]:[];for(let m=1;m<=p;m++){const v=(m-1)*c+1,b=f.length===0&&o<=u&&u<=a&&m===l;d.push(...g.takeWhile(y=>y.visibleColumn<v)||[]);const w=g.peek();(!w||w.visibleColumn!==v||w.horizontalLine)&&d.push(new yp(v,b?"core-guide-indent-active":"core-guide-indent",null))}d.push(...g.takeWhile(m=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function Ky(i){if(!(i&&i.isTransparent()))return i}ti((i,e)=>{const t=i.getColor(WL);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(zL)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const s=[{bracketColor:PX,guideColor:EIe,guideColorActive:OIe},{bracketColor:FX,guideColor:IIe,guideColorActive:PIe},{bracketColor:BX,guideColor:TIe,guideColorActive:FIe},{bracketColor:VX,guideColor:NIe,guideColorActive:BIe},{bracketColor:WX,guideColor:MIe,guideColorActive:VIe},{bracketColor:zX,guideColor:RIe,guideColorActive:WIe}],r=new UX;let o=s.map(a=>{var l,c;const h=i.getColor(a.bracketColor),u=i.getColor(a.guideColor),d=i.getColor(a.guideColorActive),f=Ky((l=Ky(u))!==null&&l!==void 0?l:h==null?void 0:h.transparent(.3)),g=Ky((c=Ky(d))!==null&&c!==void 0?c:h);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(Wxe);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${r.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${r.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${r.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class QTe{constructor(){this._currentVisibleRange=new F(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class XTe{constructor(e,t,n,s,r,o){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class JTe{constructor(e,t,n,s){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=e[0].startLineNumber,o=e[0].endLineNumber;for(let a=1,l=e.length;a<l;a++){const c=e[a];r=Math.min(r,c.startLineNumber),o=Math.max(o,c.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class qL extends Xr{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new KX(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,s=this._context.configuration.options,r=s.get(43),o=s.get(130);this._lineHeight=s.get(58),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(88),this._cursorSurroundingLines=s.get(25),this._cursorSurroundingLinesStyle=s.get(26),this._canUseLayerHinting=!s.get(28),this._viewLineOptions=new DV(n,this._context.theme.type),Ol.write(this.domNode,7),this.domNode.setClassName(`view-lines ${of}`),Vn.applyFontInfo(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new mi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new mi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new QTe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new ul(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(130)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),s=t.get(130);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Vn.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(129)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new DV(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=n;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new XTe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new JTe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(s)===1)return new q(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(s,e,t);const l=this._context.model.getLineMinColumn(s);return a<l&&(a=l),new q(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ul.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=F.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;let r=[],o=0;const a=new xV(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>h)continue;const d=u===s.startLineNumber?s.startColumn:1,f=u===s.endLineNumber?s.endColumn:this._context.model.getLineMaxColumn(u),g=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,d,f,a);if(g){if(t&&u<n){const p=l;l=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new q(u+1,1)).lineNumber,p!==l&&(g.ranges[g.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new w2e(g.outsideRenderedLine,u,OL.from(g.ranges))}}return o===0?null:r}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new xV(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new y2e(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth())}return r&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth();a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Is&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,r){const o=e.top,a=e.height,l=o+a;let c,h,u;if(s&&s.length>0){let g=s[0].startLineNumber,p=s[0].endLineNumber;for(let m=1,v=s.length;m<v;m++){const b=s[m];g=Math.min(g,b.startLineNumber),p=Math.max(p,b.endLineNumber)}c=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(g),u=this._context.viewLayout.getVerticalOffsetForLineNumber(p)+this._lineHeight}else if(n)c=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const g=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=g*this._lineHeight,u+=Math.max(0,g-1)*this._lineHeight}(r===0||r===4)&&(u+=this._lineHeight);let f;if(u-h>a){if(!c)return-1;f=h}else if(r===5||r===6)if(r===6&&o<=h&&u<=l)f=o;else{const g=Math.max(5*this._lineHeight,a*.2),p=h-g,m=u-a;f=Math.max(m,p)}else if(r===1||r===2)if(r===2&&o<=h&&u<=l)f=o;else{const g=(h+u)/2;f=Math.max(0,g-a/2)}else f=this._computeMinimumScrolling(o,l,h,u,r===3,r===4);return f}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,s=n+t.width;let r=1073741824,o=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const c of l.ranges)r=Math.min(r,Math.round(c.left)),o=Math.max(o,Math.round(c.left+c.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const c=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!c)return null;for(const h of c.ranges)r=Math.min(r,Math.round(h.left)),o=Math.max(o,Math.round(h.left+h.width))}return r=Math.max(0,r-qL.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding,e.type==="selections"&&o-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,s,r,o){e=e|0,t=t|0,n=n|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-n<a){if(r)return n;if(o)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}}qL.HORIZONTAL_EXTRA_PX=30;class eNe extends kP{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(129);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName;l&&(n[s++]=new xD(a.range.startLineNumber,a.range.endLineNumber,l));const c=a.options.firstLineDecorationClassName;c&&(n[s++]=new xD(a.range.startLineNumber,a.range.startLineNumber,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const h=c-t,u=s[h];let d="";for(let f=0,g=u.length;f<g;f++)d+='<div class="cldr '+u[f]+a;l[h]=d}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class tNe extends kP{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName;l&&(n[s++]=new xD(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=[];for(let o=t;o<=n;o++){const a=o-t,l=s[a];let c="";for(let h=0,u=l.length;h<u;h++)c+='<div class="cmdr '+l[h]+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class $r{constructor(e,t,n,s){this._rgba8Brand=void 0,this.r=$r._clamp(e),this.g=$r._clamp(t),this.b=$r._clamp(n),this.a=$r._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}$r.Empty=new $r(0,0,0,0);class Ww extends te{constructor(){super(),this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Li.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new Ww),this._INSTANCE}_updateColorMap(){const e=Li.getColorMap();if(!e){this._colors=[$r.Empty],this._backgroundIsLight=!0;return}this._colors=[$r.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new $r(s.r,s.g,s.b,Math.round(s.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}Ww._INSTANCE=null;const iNe=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),nNe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class r1{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=r1.soften(e,12/15),this.charDataLight=r1.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=Yx(e[s]*t);return n}renderChar(e,t,n,s,r,o,a,l,c,h,u){const d=1*this.scale,f=2*this.scale,g=u?1:f;if(t+d>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const p=h?this.charDataLight:this.charDataNormal,m=nNe(s,c),v=e.width*4,b=a.r,w=a.g,y=a.b,x=r.r-b,L=r.g-w,S=r.b-y,k=Math.max(o,l),D=e.data;let T=m*d*f,N=n*v+t*4;for(let $=0;$<g;$++){let U=N;for(let ee=0;ee<d;ee++){const he=p[T++]/255*(o/255);D[U++]=b+x*he,D[U++]=w+L*he,D[U++]=y+S*he,D[U++]=k}N+=v}}blockRenderChar(e,t,n,s,r,o,a,l){const c=1*this.scale,h=2*this.scale,u=l?1:h;if(t+c>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const d=e.width*4,f=.5*(r/255),g=o.r,p=o.g,m=o.b,v=s.r-g,b=s.g-p,w=s.b-m,y=g+v*f,x=p+b*f,L=m+w*f,S=Math.max(r,a),k=e.data;let D=n*d+t*4;for(let T=0;T<u;T++){let N=D;for(let $=0;$<c;$++)k[N++]=y,k[N++]=x,k[N++]=L,k[N++]=S;D+=d}}}const cW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},hW=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=cW[i[t]]<<4|cW[i[t+1]]&15;return e},uW={1:Af(()=>hW("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Af(()=>hW("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Hb{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return uW[e]?n=new r1(uW[e](),e):n=Hb.createFromSampleData(Hb.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let s=0;for(const r of iNe)n.fillText(String.fromCharCode(r),s,16/2),s+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let s=Hb._downsample(e,t);return new r1(s,t)}static _downsampleChar(e,t,n,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let h=0;h<a;h++){const u=h/a*16,d=(h+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let m=0,v=0;for(let w=u;w<d;w++){const y=t+Math.floor(w)*3840,x=1-(w-Math.floor(w));for(let L=g;L<p;L++){const S=1-(L-Math.floor(L)),k=y+Math.floor(L)*4,D=S*x;v+=D,m+=e[k]*e[k+3]/255*D}}const b=m/v;c=Math.max(c,b),n[l++]=Yx(b)}}return c}static _downsample(e,t){const n=2*t*1*t,s=n*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let h=0;h<s;h++)r[h]*=c}return r}}const sNe=140,rNe=2;class o1{constructor(e,t,n){const s=e.options,r=s.get(127),o=s.get(129),a=o.minimap,l=s.get(43),c=s.get(64);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(93),this.showSlider=c.showSlider,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Af(()=>Hb.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=o1._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=o1._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(eIe);return n?new $r(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(tIe);return t?$r._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class Ub{constructor(e,t,n,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,s,r,o,a,l,c,h,u){const d=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){const x=l*e.lineHeight+(e.scrollBeyondLastLine?r-e.lineHeight:0),L=Math.max(1,Math.floor(r*r/x)),S=Math.max(0,e.minimapHeight-L),k=S/(h-r),D=c*k,T=S>0,N=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new Ub(c,h,T,k,D,L,1,Math.min(a,N))}let m;if(o&&n!==a){const x=n-t+1;m=Math.floor(x*f/d)}else{const x=r/p;m=Math.floor(x*f/d)}let v;e.scrollBeyondLastLine?v=(a-1)*f/d:v=Math.max(0,a*f/d-m),v=Math.min(e.minimapHeight-m,v);const b=v/(h-r),w=c*b;let y=0;if(e.scrollBeyondLastLine&&(y=r/p-1),g>=a+y){const L=a,S=v>0;return new Ub(c,h,S,b,w,m,1,L)}else{let x=Math.max(1,Math.floor(t-w*d/f));u&&u.scrollHeight===h&&(u.scrollTop>c&&(x=Math.min(x,u.startLineNumber)),u.scrollTop<c&&(x=Math.max(x,u.startLineNumber)));const L=Math.min(a,x+g-1),S=(c-s)/p,k=(t-x+S)*f/d;return new Ub(c,h,!0,b,k,m,x,L)}}}class DD{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}DD.INVALID=new DD(-1);class dW{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new GX(()=>DD.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,r=n.length;s<r;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class LP{constructor(e,t,n,s){this._backgroundFillData=LP._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,r=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let h=0;h<t;h++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class a1{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const s=e.pixelRatio,r=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:a}=$p.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:r,pixelRatio:s}),l=t/a,c=l/2;if(!n||n.minimapLines.length===0){let w=[];if(w[0]=1,a>1){for(let y=0,x=a-1;y<x;y++)w[y]=Math.round(y*l+c);w[a-1]=t}return[new a1(l,w),[]]}const h=n.minimapLines,u=h.length;let d=[],f=0,g=0,p=1;const m=10;let v=[],b=null;for(let w=0;w<a;w++){const y=Math.max(p,Math.round(w*l)),x=Math.max(y,Math.round((w+1)*l));for(;f<u&&h[f]<y;){if(v.length<m){const S=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:S,deleteToLineNumber:S},v.push(b)),g--}f++}let L;if(f<u&&h[f]<=x)L=h[f],f++;else if(w===0?L=1:w+1===a?L=t:L=Math.round(w*l+c),v.length<m){const S=f+1+g;b&&b.type==="inserted"&&b._i===w-1?b.insertToLineNumber++:(b={type:"inserted",_i:w,insertFromLineNumber:S,insertToLineNumber:S},v.push(b)),g++}d[w]=L,p=L}if(v.length<m)for(;f<u;){const w=f+1+g;b&&b.type==="deleted"&&b._oldIndex===f-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:f,deleteFromLineNumber:w,deleteToLineNumber:w},v.push(b)),g--,f++}else v=[{type:"flush"}];return[new a1(l,d),v]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class oNe extends Xr{constructor(e){super(e),this.tokensColorTracker=Ww.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new o1(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=a1.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new kD(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new o1(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=a1.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let s=[];for(let r=0,o=t-e+1;r<o;r++)n[r]?s[r]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ve(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new F(r,1,o,this._context.model.getLineMaxColumn(o))}else n=new F(e,1,t,this._context.model.getLineMaxColumn(t));const s=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let r=[];for(const o of s){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new SQ(new F(l,a.startColumn,c,a.endColumn),o.options))}return r}return s}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new F(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class kD extends te{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(jV),this._domNode=gt(document.createElement("div")),Ol.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=gt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=gt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=gt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=gt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=gt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=tn(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const c=Rn(this._slider.domNode),h=c.top+c.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new fg,this._sliderMouseDownListener=tn(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=At.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ne(this._domNode.domNode,jt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=ne(this._domNode.domNode,jt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=tn(this._domNode.domNode,jt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,s,r){this._slider.toggleClassName("active",!0);const o=(a,l)=>{const c=Math.abs(l-t);if(Fn&&c>sNe){this._model.setScrollTop(r.scrollTop);return}const h=a-n;this._model.setScrollTop(r.getDesiredScrollTopFromDelta(h))};s!==n&&o(s,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,B0,a=>o(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new LP(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(jV),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Ub.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(F.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((d,f)=>(d.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const h=new fW(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,h,e,o),this._renderDecorationsLineHighlights(c,n,h,e,o);const u=new fW(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,s),this._renderDecorationsHighlights(c,n,u,e,o,l,a,s)}}_renderSelectionLineHighlights(e,t,n,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=Math.max(s.startLineNumber,l.startLineNumber),h=Math.min(s.endLineNumber,l.endLineNumber);if(c>h)continue;for(let f=c;f<=h;f++)n.set(f,!0);const u=(c-s.startLineNumber)*r,d=(h-s.startLineNumber)*r+r;a>=u||(a>o&&e.fillRect(Ch,o,e.canvas.width,a-o),o=u),a=d}a>o&&e.fillRect(Ch,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==Dl.Inline)continue;const h=Math.max(s.startLineNumber,l.range.startLineNumber),u=Math.min(s.endLineNumber,l.range.endLineNumber);if(h>u)continue;const d=c.getColor(this._theme);if(!d||d.isTransparent())continue;let f=o.get(d.toString());f||(f=d.transparent(.5).toString(),o.set(d.toString(),f)),e.fillStyle=f;for(let g=h;g<=u;g++){if(n.has(g))continue;n.set(g,!0);const p=(h-s.startLineNumber)*r;e.fillRect(Ch,p,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const h=Math.max(s.startLineNumber,c.startLineNumber),u=Math.min(s.endLineNumber,c.endLineNumber);if(!(h>u))for(let d=h;d<=u;d++)this.renderDecorationOnLine(e,n,c,this._selectionColor,s,d,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,n,s,r,o,a,l){for(const c of t){const h=c.options.minimap;if(!h)continue;const u=Math.max(s.startLineNumber,c.range.startLineNumber),d=Math.min(s.endLineNumber,c.range.endLineNumber);if(u>d)continue;const f=h.getColor(this._theme);if(!(!f||f.isTransparent()))for(let g=u;g<=d;g++)switch(h.position){case Dl.Inline:this.renderDecorationOnLine(e,n,c.range,f,s,g,r,r,o,a,l);continue;case Dl.Gutter:const p=(g-s.startLineNumber)*r,m=2;this.renderDecoration(e,f,m,p,rNe,r);continue}}}renderDecorationOnLine(e,t,n,s,r,o,a,l,c,h,u){const d=(o-r.startLineNumber)*l;if(d+a<0||d>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,p=f===o?n.startColumn:1,m=g===o?n.endColumn:this._model.getLineMaxColumn(o),v=this.getXOffsetForPosition(t,o,p,c,h,u),b=this.getXOffsetForPosition(t,o,m,c,h,u);this.renderDecoration(e,s,v,d,b-v,a)}getXOffsetForPosition(e,t,n,s,r,o){if(n===1)return Ch;if((n-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Ch];let h=Ch;for(let u=1;u<c.length+1;u++){const d=c.charCodeAt(u-1),f=d===9?s*r:ha(d)?2*r:r,g=h+f;if(g>=o){l[u]=o;break}l[u]=g,h=g}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,r,o)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const he=this._lastRenderData._get();return new dW(e,he.imageData,he.lines)}const r=this._getBuffer();if(!r)return null;let[o,a,l]=kD._renderUntouchedLines(r,t,n,s,this._lastRenderData);const c=this._model.getMinimapLinesRenderingData(t,n,l),h=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),m=this._model.options.renderMinimap,v=this._model.options.charRenderer(),b=this._model.options.fontScale,w=this._model.options.minimapCharWidth,x=(m===1?2:2+1)*b,L=s>x?Math.floor((s-x)/2):0,S=d.a/255,k=new $r(Math.round((d.r-u.r)*S+u.r),Math.round((d.g-u.g)*S+u.g),Math.round((d.b-u.b)*S+u.b),255);let D=0;const T=[];for(let he=0,fe=n-t+1;he<fe;he++)l[he]&&kD._renderLine(r,k,d.a,p,m,w,g,f,v,D,L,h,c[he],b,s),T[he]=new DD(D),D+=s;const N=o===-1?0:o,U=(a===-1?r.height:a)-N;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,N,r.width,U),new dW(e,r,T)}static _renderUntouchedLines(e,t,n,s,r){const o=[];if(!r){for(let k=0,D=n-t+1;k<D;k++)o[k]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,c=a.rendLineNumberStart,h=a.lines,u=h.length,d=e.width,f=e.data,g=(n-t+1)*s*d*4;let p=-1,m=-1,v=-1,b=-1,w=-1,y=-1,x=0;for(let k=t;k<=n;k++){const D=k-t,T=k-c,N=T>=0&&T<u?h[T].dy:-1;if(N===-1){o[D]=!0,x+=s;continue}const $=N*d*4,U=(N+s)*d*4,ee=x*d*4,he=(x+s)*d*4;b===$&&y===ee?(b=U,y=he):(v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),m===-1&&b===g&&v===w&&(m=v)),v=$,b=U,w=ee,y=he),o[D]=!1,x+=s}v!==-1&&(f.set(l.subarray(v,b),w),p===-1&&v===0&&v===w&&(p=b),m===-1&&b===g&&v===w&&(m=v));const L=p===-1?-1:p/(d*4),S=m===-1?-1:m/(d*4);return[L,S,o]}static _renderLine(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=f.content,v=f.tokens,b=e.width-o,w=p===1;let y=Ch,x=0,L=0;for(let S=0,k=v.getCount();S<k;S++){const D=v.getEndOffset(S),T=v.getForeground(S),N=a.getColor(T);for(;x<D;x++){if(y>b)return;const $=m.charCodeAt(x);if($===9){const U=d-(x+L)%d;L+=U-1,y+=U*o}else if($===32)y+=o;else{const U=ha($)?2:1;for(let ee=0;ee<U;ee++)if(r===2?c.blockRenderChar(e,y,h+u,N,l,t,n,w):c.renderChar(e,y,h+u,$,N,l,t,n,g,s,w),y+=o,y>b)return}}}}}class fW{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}ti((i,e)=>{const t=i.getColor(iIe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(nIe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const s=i.getColor(sIe);s&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${s}; }`);const r=i.getColor(Vw);r&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)});class aNe extends Xr{constructor(e){super(e);const n=this._context.configuration.options.get(129);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=gt(document.createElement("div")),Ol.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(129);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=gt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.parentNode.removeChild(s),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._renderWidget(this._widgets[r])}}}class lNe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(127),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const s=t.getColor(wIe);this.borderColor=s?s.toString():null,this.hideCursor=n.get(51);const r=t.getColor(NX);this.cursorColor=r?r.transparent(.7).toString():null,this.themeType=t.type;const o=n.get(64),a=o.enabled,l=o.side,c=a?t.getColor(yIe)||Li.getDefaultBackground():null;c===null||l==="left"?this.backgroundColor=null:this.backgroundColor=Z.Format.CSS.formatHex(c);const u=n.get(129).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[d,f]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=d,this.w=f}_initLanes(e,t,n){const s=t-e;if(n>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,h=l+r+a;return[[0,l,c,l,h,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(n===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class cNe extends Xr{constructor(e){super(e),this._domNode=gt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Li.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new lNe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(q.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,s=this._context.viewLayout,r=this._context.viewLayout.getScrollHeight(),o=t/r,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,c=l/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const u=this._settings.x,d=this._settings.w;a.sort(xQ.cmp);for(const f of a){const g=f.color,p=f.data;h.fillStyle=g;let m=0,v=0,b=0;for(let w=0,y=p.length/3;w<y;w++){const x=p[3*w],L=p[3*w+1],S=p[3*w+2];let k=s.getVerticalOffsetForLineNumber(L)*o|0,D=(s.getVerticalOffsetForLineNumber(S)+n)*o|0;if(D-k<l){let N=(k+D)/2|0;N<c?N=c:N+c>t&&(N=t-c),k=N-c,D=N+c}k>b+1||x!==m?(w!==0&&h.fillRect(u[m],v,d[m],b-v),m=x,v=k,b=D):D>b&&(b=D)}h.fillRect(u[m],v,d[m],b-v)}if(!this._settings.hideCursor&&this._settings.cursorColor){const f=2*this._settings.pixelRatio|0,g=f/2|0,p=this._settings.x[7],m=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let v=-100,b=-100;for(let w=0,y=this._cursorPositions.length;w<y;w++){const x=this._cursorPositions[w];let L=s.getVerticalOffsetForLineNumber(x.lineNumber)*o|0;L<g?L=g:L+g>t&&(L=t-g);const S=L-g,k=S+f;S>b+1?(w!==0&&h.fillRect(p,v,m,b-v),v=S,b=k):k>b&&(b=k)}h.fillRect(p,v,m,b-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class gW{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class l1{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class hNe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(l1.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=n/s,o=Math.floor(4*this._pixelRatio/2);let a=[];for(let l=0,c=this._zones.length;l<c;l++){const h=this._zones[l];if(!e){const b=h.getColorZones();if(b){a.push(b);continue}}const u=Math.floor(r*this._getVerticalOffsetForLine(h.startLineNumber)),d=Math.floor(r*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let f=Math.floor((u+d)/2),g=d-f;g<o&&(g=o),f-g<0&&(f=g),f+g>n&&(f=n-g);const p=h.color;let m=this._color2Id[p];m||(m=++this._lastAssignedId,this._color2Id[p]=m,this._id2Color[m]=p);const v=new gW(f-g,f+g,m);h.setColorZone(v),a.push(v)}return this._colorZonesInvalid=!1,a.sort(gW.compare),a}}class uNe extends Fw{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=gt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new hNe(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(127)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(127)&&(this._zoneManager.setPixelRatio(t.get(127)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,s,e),!0}_renderOneLane(e,t,n,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,h=l.from,u=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=n[r],o=h,a=u):a>=h?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=h,a=u)}e.fillRect(0,o,s,a-o)}}class dNe extends Xr{constructor(e){super(e),this.domNode=gt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.model.getTextModelOptions(),r=s;let o=t-e;for(;o>0;){const a=gt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}ti((i,e)=>{const t=i.getColor(_Ie);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class fNe extends Xr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=gt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(129);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}ti((i,e)=>{const t=i.getColor(Vw);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class gNe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class pNe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function mNe(i){return new gNe(i)}function _Ne(i){return new pNe(i.lineNumber,i.ranges.map(mNe))}class gi extends V0{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<n.length;c++)n[c].lineNumber===a&&(r=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],h=c.left,u=c.left+c.width,d={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Zy(h-g)<s?d.top=2:h>g&&(d.top=1),Zy(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else r&&(d.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Zy(h-g)<s?d.bottom=2:g<h&&h<p&&(d.bottom=1),Zy(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=d,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(_Ne);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,s,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=s[0].lineNumber,c=s[s.length-1].lineNumber;for(let h=0,u=s.length;h<u;h++){const d=s[h],f=d.lineNumber,g=f-t,p=n&&(f===c||f===l)?a:o,m=n&&f===l?1:0;let v="",b="";for(let w=0,y=d.ranges.length;w<y;w++){const x=d.ranges[w];if(r){const S=x.startStyle,k=x.endStyle;if(S.top===1||S.bottom===1){v+=this._createSelectionPiece(m,p,gi.SELECTION_CLASS_NAME,x.left-gi.ROUNDED_PIECE_WIDTH,gi.ROUNDED_PIECE_WIDTH);let D=gi.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(D+=" "+gi.SELECTION_TOP_RIGHT),S.bottom===1&&(D+=" "+gi.SELECTION_BOTTOM_RIGHT),v+=this._createSelectionPiece(m,p,D,x.left-gi.ROUNDED_PIECE_WIDTH,gi.ROUNDED_PIECE_WIDTH)}if(k.top===1||k.bottom===1){v+=this._createSelectionPiece(m,p,gi.SELECTION_CLASS_NAME,x.left+x.width,gi.ROUNDED_PIECE_WIDTH);let D=gi.EDITOR_BACKGROUND_CLASS_NAME;k.top===1&&(D+=" "+gi.SELECTION_TOP_LEFT),k.bottom===1&&(D+=" "+gi.SELECTION_BOTTOM_LEFT),v+=this._createSelectionPiece(m,p,D,x.left+x.width,gi.ROUNDED_PIECE_WIDTH)}}let L=gi.SELECTION_CLASS_NAME;if(r){const S=x.startStyle,k=x.endStyle;S.top===0&&(L+=" "+gi.SELECTION_TOP_LEFT),S.bottom===0&&(L+=" "+gi.SELECTION_BOTTOM_LEFT),k.top===0&&(L+=" "+gi.SELECTION_TOP_RIGHT),k.bottom===0&&(L+=" "+gi.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(m,p,L,x.left,x.width)}e[g][0]+=v,e[g][1]+=b}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=n;o<=s;o++){const a=o-n;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}gi.SELECTION_CLASS_NAME="selected-text";gi.SELECTION_TOP_LEFT="top-left-radius";gi.SELECTION_BOTTOM_LEFT="bottom-left-radius";gi.SELECTION_TOP_RIGHT="top-right-radius";gi.SELECTION_BOTTOM_RIGHT="bottom-right-radius";gi.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";gi.ROUNDED_PIECE_WIDTH=10;ti((i,e)=>{const t=i.getColor(ru);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(vP);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const s=i.getColor(rEe);s&&!s.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${s}; }`)});function Zy(i){return i<0?-i:i}class pW{constructor(e,t,n,s,r,o){this.top=e,this.left=t,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=o}}class mW{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=gt(document.createElement("div")),this._domNode.setClassName(`cursor ${of}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Vn.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new q(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Vn.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===bn.Line||this._cursorStyle===bn.LineThin){const d=e.visibleRangeForPosition(this._position);if(!d||d.outsideRenderedLine)return null;let f;if(this._cursorStyle===bn.Line){if(f=b7(this._lineCursorWidth>0?this._lineCursorWidth:2),f>2){const m=this._context.model.getLineContent(this._position.lineNumber),v=Bx(m,this._position.column-1);t=m.substr(this._position.column-1,v)}}else f=b7(1);let g=d.left;f>=2&&g>=1&&(g-=1);const p=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new pW(p,g,f,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),s=Bx(n,this._position.column-1),r=e.linesVisibleRangesForRange(new F(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+s),!1);if(!r||r.length===0)return null;const o=r[0];if(o.outsideRenderedLine||o.ranges.length===0)return null;const a=o.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let c="";if(this._cursorStyle===bn.Block){const d=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,s);const f=d.tokens.findTokenIndexAtOffset(this._position.column-1);c=d.tokens.getClassName(f)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===bn.Underline||this._cursorStyle===bn.UnderlineThin)&&(h+=this._lineHeight-2,u=2),new pW(h,a.left,l,u,t,c)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${of} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class c1 extends Xr{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new mW(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=gt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Os,this._cursorFlatBlinkInterval=new Nw,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let s=0;s<n;s++){const r=new mW(this._context);this._domNode.domNode.insertBefore(r.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(r)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let s=0;s<n;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},c1.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},c1.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case bn.Line:e+=" cursor-line-style";break;case bn.Block:e+=" cursor-block-style";break;case bn.Underline:e+=" cursor-underline-style";break;case bn.LineThin:e+=" cursor-line-thin-style";break;case bn.BlockOutline:e+=" cursor-block-outline-style";break;case bn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}c1.BLINK_INTERVAL=500;ti((i,e)=>{const t=i.getColor(NX);if(t){let n=i.getColor(pIe);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const UE=()=>{throw new Error("Invalid change accessor")};class bNe extends Xr{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(129);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=gt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=gt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.model.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],h=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=h.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==h.afterViewLineNumber||u.height!==h.heightInPx)&&(s.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(c.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(129);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new q(o,this._context.model.getModelLineMaxColumn(o))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),r=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const s={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};vNe(e,s),s.addZone=UE,s.removeZone=UE,s.layoutZone=UE}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:gt(t.domNode),marginDomNode:t.marginDomNode?gt(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Ze(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Ze(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let h=0,u=0,d="none";n.hasOwnProperty(l)?(h=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,d="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(h),c.domNode.setHeight(u),c.domNode.setDisplay(d),c.marginDomNode&&(c.marginDomNode.setTop(h),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(d))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function vNe(i,e){try{return i(e)}catch(t){Ze(t)}}class wNe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class yNe{constructor(e,t,n){this.configuration=e,this.theme=new wNe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class CNe{constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new F(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class SNe extends Fw{constructor(e,t,n,s,r,o){super(),this._selections=[new Ve(1,1,1,1)],this._renderAnimationFrame=null;const a=new CTe(t,s,r,e);this._context=new yNe(t,n.getColorTheme(),s),this._configPixelRatio=this._context.configuration.options.get(127),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(p=>{this._context.theme.update(p),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new mTe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=gt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=gt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=gt(document.createElement("div")),Ol.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new KTe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new qL(this._context,this._linesContent),this._viewZones=new bNe(this._context),this._viewParts.push(this._viewZones);const l=new cNe(this._context);this._viewParts.push(l);const c=new fNe(this._context);this._viewParts.push(c);const h=new DTe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new ETe(this._context)),h.addDynamicOverlay(new gi(this._context)),h.addDynamicOverlay(new YTe(this._context)),h.addDynamicOverlay(new TTe(this._context));const u=new kTe(this._context);this._viewParts.push(u),u.addDynamicOverlay(new ITe(this._context)),u.addDynamicOverlay(new ZTe(this._context)),u.addDynamicOverlay(new tNe(this._context)),u.addDynamicOverlay(new eNe(this._context)),u.addDynamicOverlay(new Um(this._context));const d=new Bf(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(d),this._contentWidgets=new LTe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new c1(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new aNe(this._context),this._viewParts.push(this._overlayWidgets);const f=new dNe(this._context);this._viewParts.push(f);const g=new oNe(this._context);if(this._viewParts.push(g),l){const p=this._scrollbar.getOverviewRulerLayoutInfo();p.parent.insertBefore(l.getDomNode(),p.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),o?o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new pTe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new nTe(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new q(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(129);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(126)+" "+uD(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(127),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=CY(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){xNe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!_5(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new CNe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const s=new v2e(this._context.viewLayout,n,this._viewLines);for(const r of e)r.prepareRender(s);for(const r of e)r.render(s),r.onDidRender();Math.abs(Rx()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),s=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new q(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?UL.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new uNe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const s=e.position?e.position.position:null;s!==null&&(t=new F(s.lineNumber,s.column,s.lineNumber,s.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function xNe(i){try{return i()}catch(e){Ze(e)}}class LD{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new _n(new F(1,1,1,1),0,new q(1,1),0),new _n(new F(1,1,1,1),0,new q(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Xe(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.getDirection()===0?new Ve(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Ve(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,s,n,o),l=this._validatePositionWithCache(e,r,s,a);return n.equals(o)&&s.equals(a)&&r.equals(l)?t:new _n(F.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=LD._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new _n(s,r,o,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new _n(s,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new _n(s,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new q(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new F(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new _n(o,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class _W{constructor(e){this.context=e,this.primaryCursor=new LD(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;s.isBefore(e)&&(e=s)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const s=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(s)&&(e=s)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Xe.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let s=n-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>n){let s=t-n;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let s=0;s<n;s++)this.secondaryCursors[s].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new LD(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,s)=>n.selection.startLineNumber===s.selection.startLineNumber?n.selection.startColumn-s.selection.startColumn:n.selection.startLineNumber-s.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?n:n+1,h=s.index<r.index?n+1:n,u=t[h].index,d=t[c].index,f=t[h].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),m=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let b;u===this.lastAddedCursorIndex?(b=m,this.lastAddedCursorIndex=d):b=v;let w;b?w=new Ve(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):w=new Ve(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=w;const y=Xe.fromModelSelection(w);e[d].setState(this.context,y.modelState,y.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(h,1),this._removeSecondaryCursor(u-1),n--}}}}class DNe{constructor(){this.type=0}}class kNe{constructor(){this.type=1}}class LNe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class ANe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class Yg{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class Yy{constructor(){this.type=5}}class ENe{constructor(e){this.type=6,this.isFocused=e}}class INe{constructor(){this.type=7}}class Qy{constructor(){this.type=8}}class JX{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class w4{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class y4{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class wS{constructor(e,t,n,s,r,o){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o}}class TNe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class NNe{constructor(){this.type=14}}class MNe{constructor(e){this.type=15,this.ranges=e}}class RNe{constructor(){this.type=16}}let ONe=class{constructor(){this.type=17}};class PNe extends te{constructor(){super(),this._onEvent=this._register(new z),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new FNe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class FNe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class AP{constructor(e,t,n,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new AP(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class EP{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new EP(this.oldHasFocus,e.hasFocus)}}class IP{constructor(e,t,n,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new IP(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class bW{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class AD{constructor(e,t,n,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return AD._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new AD(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class BNe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class $E{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class vW{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(F.compareRangesUsingStarts),e.sort(F.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class jm extends te{constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new eW(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new _W(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=lt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new eW(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let r=!1;s!==null&&s.length>jm.MAX_CURSOR_COUNT&&(s=s.slice(0,jm.MAX_CURSOR_COUNT),r=!0);const o=new $E(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,s){const r=this._cursors.getViewPositions();if(r.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,s);return}else{const o=r[0],a=new F(o.lineNumber,o.column,o.lineNumber,o.column);this._emitCursorRevealRange(e,t,a,null,0,n,s)}}_revealPrimaryCursor(e,t,n,s,r){const o=this._cursors.getViewPositions();if(o.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,s,r);else{const a=o[0],l=new F(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,l,null,n,s,r)}}_emitCursorRevealRange(e,t,n,s,r,o,a){e.emitViewEvent(new wS(t,n,s,r,o,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){let n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Xe.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof lX){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new _W(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const s=Xe.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,s)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Xe.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:Et.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:Et.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,s){this.setStates(e,t,s,Xe.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new vW(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=VNe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof qX&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),s.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,r){const o=new $E(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new ANe(l,a)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,h)=>!c.modelState.equals(s.cursorState[h].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,h=s?s.modelVersionId:0;e.emitOutgoingEvent(new AD(c,a,h,o.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,h=r.text.length-o[2].length-1,u=r.text.lastIndexOf(c,h-1);if(u===-1)return null;t.push([u,h])}return t}executeEdits(e,t,n,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);let o=[],a=[];const l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(r)for(let u=0,d=r.length;u<d;u++){const[f,g]=r[u],p=c[u],m=p.range.startLineNumber,v=p.range.startColumn-1+f,b=p.range.startColumn-1+g;o.push(new F(m,b+1,m,b+2)),a.push(new F(m,v+1,m,b+2))}const h=s(c);return h&&(this._isHandling=!0),h});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,s=0){if(this.context.cursorConfig.readOnly)return;const r=new $E(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Ze(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,r,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return vW.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(wi.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=Bx(t,r),a=t.substr(r,o);this._executeEditOperation(wi.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(wi.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,r,o){if(t.length===0&&n===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ve(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(wi.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,r))},e,o)}paste(e,t,n,s,r){this._executeEdit(()=>{this._executeEditOperation(wi.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Vf.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new $s(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new $s(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}jm.MAX_CURSOR_COUNT=1e4;class VNe{static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,n);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let o=[];for(let c=0,h=s.length;c<h;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{let h=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f]=[];for(const f of c)f.identifier&&h[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor;let d=[];for(let f=0;f<e.selectionsBefore.length;f++)h[f].length>0?(h[f].sort(u),d[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>h[f],getTrackedSelection:g=>{const p=parseInt(g,10),m=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new Ve(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):new Ve(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn)}})):d[f]=e.selectionsBefore[f];return d});a||(a=e.selectionsBefore);let l=[];for(let c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,h)=>h-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){let s=[],r=0;const o=(u,d,f=!1)=>{F.isEmpty(u)&&d===""||s.push({identifier:{major:t,minor:r++},range:u,text:d,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(u,d,f)=>{a=!0,o(u,d,f)},trackSelection:(u,d)=>{const f=Ve.liftSelection(u);let g;if(f.isEmpty())if(typeof d=="boolean")d?g=2:g=3;else{const v=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===v?g=2:g=3}else g=1;const p=e.trackedRanges.length,m=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=m,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{n.getEditOperations(e.model,h)}catch(u){return Ze(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-F.compareRangesUsingEnds(n.range,s.range));let t={};for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(F.getStartPosition(s.range).isBefore(F.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class eJ{constructor(e,t,n,s,r,o){this.id=e,this.label=t,this.alias=n,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const wW={getInitialState:()=>gL,tokenize2:(i,e,t,n)=>XY(0,i,t,n)};function tJ(i,e,t=wW){return zNe(i,e,t||wW)}function WNe(i,e,t,n,s,r,o){let a="<div>",l=n,c=0,h=!0;for(let u=0,d=e.getCount();u<d;u++){const f=e.getEndOffset(u);if(f<=n)continue;let g="";for(;l<f&&l<s;l++){const p=i.charCodeAt(l);switch(p){case 9:let m=r-(l+c)%r;for(c+=m-1;m>0;)o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0),m--;break;case 60:g+="&lt;",h=!1;break;case 62:g+="&gt;",h=!1;break;case 38:g+="&amp;",h=!1;break;case 0:g+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",h=!1;break;case 13:g+="&#8203",h=!1;break;case 32:o&&h?(g+="&#160;",h=!1):(g+=" ",h=!0);break;default:g+=String.fromCharCode(p),h=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function zNe(i,e,t){let n='<div class="monaco-tokenized-source">';const s=Nl(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const c=t.tokenize2(l,!0,r,0);wn.convertToEndOffset(c.tokens,l.length);const u=new wn(c.tokens,l,e).inflate();let d=0;for(let f=0,g=u.getCount();f<g;f++){const p=u.getClassName(f),m=u.getEndOffset(f);n+=`<span class="${p}">${S5(l.substring(d,m))}</span>`,d=m}r=c.endState}return n+="</div>",n}class HNe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class UNe{constructor(e,t,n,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=r,this.prefixSum=0}}class h1{constructor(e,t,n,s){this._instanceId=OY(++h1.INSTANCE_COUNT),this._pendingChanges=new HNe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new UNe(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of n)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{let c=[];for(const h of l)if(!s.has(h.id)){if(r.has(h.id)){const u=r.get(h.id);h.afterLineNumber=u.newAfterLineNumber,h.height=u.newHeight}c.push(h)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=h1.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const o=(s-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,h;a===-1?(a=l,h=o+1,c=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=r,d=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/n)*n,d-=g);const p=[],m=e+(t-e)/2;let v=-1;for(let x=s;x<=o;x++){if(v===-1){const L=u,S=u+n;(L<=m&&m<S||L>m)&&(v=x)}for(u+=n,p[x-s]=d,d+=n;h===x;)d+=c,u+=c,a++,a>=l?h=o+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=x;break}}v===-1&&(v=o);const b=this.getVerticalOffsetForLineNumber(o)|0;let w=s,y=o;return w<y&&r<e&&w++,w<y&&b+n>t&&y--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:v,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:y}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=s+r)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];let r=[];for(let o=n;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}h1.INSTANCE_COUNT=0;const $Ne=125;class K_{constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class jNe extends te{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new z),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new K_(0,0,0,0),this._scrollable=this._register(new $L(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new AP(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class qNe extends te{constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,r=s.get(129),o=s.get(74);this._linesLayout=new h1(t,s.get(58),o.top,o.bottom),this._scrollable=this._register(new jNe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new K_(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?$Ne:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(129)){const n=t.get(129),s=n.contentWidth,r=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new K_(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(91);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(93)?r+=Math.max(0,t-s.get(58)-s.get(74).bottom):r+=this._getHorizontalScrollbarHeight(e,n),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new K_(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new sV(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new sV(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(130),s=t.get(43);if(n.isViewportWrapping){const r=t.get(129),o=t.get(64);return e>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?e+r.verticalScrollbarWidth:e}else{const r=t.get(92)*s.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+r,o)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new K_(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class GNe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class KNe{constructor(e){this._counts=e,this._isValid=!1,this._validEndIndex=-1,this._modelToView=[],this._viewToModel=[]}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._counts.length;e<t;e++){const n=this._counts[e],s=e>0?this._modelToView[e-1]:0;this._modelToView[e]=s+n;for(let r=0;r<n;r++)this._viewToModel[s+r]=e}this._modelToView.length=this._counts.length,this._viewToModel.length=this._modelToView[this._modelToView.length-1],this._isValid=!0,this._validEndIndex=this._counts.length-1}}changeValue(e,t){this._counts[e]!==t&&(this._counts[e]=t,this._invalidate(e))}removeValues(e,t){this._counts.splice(e,t),this._invalidate(e)}insertValues(e,t){this._counts=qv(this._counts,e,t),this._invalidate(e)}getTotalValue(){return this._ensureValid(),this._viewToModel.length}getAccumulatedValue(e){return this._ensureValid(),this._modelToView[e]}getIndexOf(e){this._ensureValid();const t=this._viewToModel[e],n=t>0?this._modelToView[t-1]:0;return new fQ(t,e-n)}}class ZNe{constructor(e,t,n,s,r,o,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,[])}createCoordinatesConverter(){return new GNe(this)}_constructLines(e,t){this.lines=[],e&&(this.hiddenAreasIds=[]);const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=n.length,o=this.createLineBreaksComputer(),a=new Db(ka.fromDecorations(s));for(let p=0;p<r;p++){const m=a.takeWhile(v=>v.lineNumber===p+1);o.addRequest(n[p],m,t?t[p]:null)}const l=o.finalize();let c=[],h=this.hiddenAreasIds.map(p=>this.model.getDecorationRange(p)).sort(F.compareRangesUsingStarts),u=1,d=0,f=-1,g=f+1<h.length?d+1:r+2;for(let p=0;p<r;p++){let m=p+1;m===g&&(f++,u=h[f].startLineNumber,d=h[f].endLineNumber,g=f+1<h.length?d+1:r+2);let v=m>=u&&m<=d,b=qE(l[p],!v);c[p]=b.getViewLineCount(),this.lines[p]=b}this._validModelVersionId=this.model.getVersionId(),this.prefixSumComputer=new KNe(c)}getHiddenAreas(){return this.hiddenAreasIds.map(e=>this.model.getDecorationRange(e))}_reduceRanges(e){if(e.length===0)return[];let t=e.map(o=>this.model.validateRange(o)).sort(F.compareRangesUsingStarts),n=[],s=t[0].startLineNumber,r=t[0].endLineNumber;for(let o=1,a=t.length;o<a;o++){let l=t[o];l.startLineNumber>r+1?(n.push(new F(s,1,r,1)),s=l.startLineNumber,r=l.endLineNumber):l.endLineNumber>r&&(r=l.endLineNumber)}return n.push(new F(s,1,r,1)),n}setHiddenAreas(e){let t=this._reduceRanges(e),n=this.hiddenAreasIds.map(u=>this.model.getDecorationRange(u)).sort(F.compareRangesUsingStarts);if(t.length===n.length){let u=!1;for(let d=0;d<t.length;d++)if(!t[d].equalsRange(n[d])){u=!0;break}if(!u)return!1}let s=[];for(const u of t)s.push({range:u,options:ct.EMPTY});this.hiddenAreasIds=this.model.deltaDecorations(this.hiddenAreasIds,s);let r=t,o=1,a=0,l=-1,c=l+1<r.length?a+1:this.lines.length+2,h=!1;for(let u=0;u<this.lines.length;u++){let d=u+1;d===c&&(l++,o=r[l].startLineNumber,a=r[l].endLineNumber,c=l+1<r.length?a+1:this.lines.length+2);let f=!1;if(d>=o&&d<=a?this.lines[u].isVisible()&&(this.lines[u]=this.lines[u].setVisible(!1),f=!0):(h=!0,this.lines[u].isVisible()||(this.lines[u]=this.lines[u].setVisible(!0),f=!0)),f){let g=this.lines[u].getViewLineCount();this.prefixSumComputer.changeValue(u,g)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.lines.length?!1:this.lines[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.lines.length?1:this.lines[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===s;if(r&&o&&a&&l)return!1;const c=r&&o&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s;let h=null;if(c){h=[];for(let u=0,d=this.lines.length;u<d;u++)h[u]=this.lines[u].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let s=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,r=this.prefixSumComputer.getAccumulatedValue(n-1);return this.lines.splice(t-1,n-t+1),this.prefixSumComputer.removeValues(t-1,n-t+1),new w4(s,r)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.lines[t-2].isVisible();let o=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,a=0,l=[],c=[];for(let h=0,u=s.length;h<u;h++){let d=qE(s[h],!r);l.push(d);let f=d.getViewLineCount();a+=f,c[h]=f}return this.lines=this.lines.slice(0,t-1).concat(l).concat(this.lines.slice(t-1)),this.prefixSumComputer.insertValues(t-1,c),new y4(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let s=t-1,r=this.lines[s].getViewLineCount(),o=this.lines[s].isVisible(),a=qE(n,o);this.lines[s]=a;let l=this.lines[s].getViewLineCount(),c=!1,h=0,u=-1,d=0,f=-1,g=0,p=-1;r>l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1,g=u+1,p=g+(r-l)-1,c=!0):r<l?(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+r-1,d=u+1,f=d+(l-r)-1,c=!0):(h=t===1?1:this.prefixSumComputer.getAccumulatedValue(t-2)+1,u=h+l-1),this.prefixSumComputer.changeValue(s,l);const m=h<=u?new JX(h,u):null,v=d<=f?new y4(d,f):null,b=g<=p?new w4(g,p):null;return[c,m,v,b]}acceptVersionId(e){this._validModelVersionId=e,this.lines.length===1&&!this.lines[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.prefixSumComputer.getTotalValue()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return new yW(n+1,s)}getMinColumnOfViewLine(e){return this.lines[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.lines[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new q(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.lines[l-1];if(c.isVisible()){let h=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let d=h;d<u;d++)a.push(new yW(l,d))}if(!c.isVisible()&&o){const h=new q(l-1,this.model.getLineMaxColumn(l-1)+1),u=F.fromPositions(o,h);r.push(new CW(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new q(l,1))}if(o){const l=F.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new CW(l,a))}return r}getViewLinesBracketGuides(e,t,n,s){const r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)o.push([]);else{let u=c[h.modelLineNumber-l];u=u.map(d=>d.horizontalLine?new yp(d.visibleColumn,d.className,new PM(d.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,d.horizontalLine.endColumn).column)):d),o.push(u)}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[],o=[],a=[];const l=n.lineNumber-1,c=s.lineNumber-1;let h=null;for(let g=l;g<=c;g++){const p=this.lines[g];if(p.isVisible()){let m=p.getViewLineNumberOfModelPosition(0,g===l?n.column:1),v=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),b=v-m+1,w=0;b>1&&p.getViewLineMinColumn(this.model,g+1,v)===1&&(w=m===0?1:2),o.push(b),a.push(w),h===null&&(h=new q(g+1,0))}else h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,g)),h=null)}h!==null&&(r=r.concat(this.model.getLinesIndentGuides(h.lineNumber,s.lineNumber)),h=null);const u=t-e+1;let d=new Array(u),f=0;for(let g=0,p=r.length;g<p;g++){let m=r[g],v=Math.min(u-f,o[g]),b=a[g],w;b===2?w=0:b===1?w=1:w=v;for(let y=0;y<v;y++)y===w&&(m=0),d[f++]=m}return d}getViewLineContent(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineContent(this.model,n+1,s)}getViewLineLength(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineLength(this.model,n+1,s)}getViewLineMinColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMinColumn(this.model,n+1,s)}getViewLineMaxColumn(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineMaxColumn(this.model,n+1,s)}getViewLineData(e){e=this._toValidViewLineNumber(e);let t=this.prefixSumComputer.getIndexOf(e-1),n=t.index,s=t.remainder;return this.lines[n].getViewLineData(this.model,n+1,s)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let s=this.prefixSumComputer.getIndexOf(e-1),r=e,o=s.index,a=s.remainder,l=[];for(let c=o,h=this.model.getLineCount();c<h;c++){let u=this.lines[c];if(!u.isVisible())continue;let d=c===o?a:0,f=u.getViewLineCount()-d,g=!1;r+f>t&&(g=!0,f=t-r+1);let p=d+f;if(u.getViewLinesData(this.model,c+1,d,p,r-e,n,l),r+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let s=this.prefixSumComputer.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.lines[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);let h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new q(r+1,h)).equals(n)?new q(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new F(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){e=this._toValidViewLineNumber(e);let n=this.prefixSumComputer.getIndexOf(e-1),s=n.index,r=n.remainder,o=this.lines[s].getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new q(s+1,o))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new F(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const s=this.model.validatePosition(new q(e,t)),r=s.lineNumber,o=s.column;let a=r-1,l=!1;for(;a>0&&!this.lines[a].isVisible();)a--,l=!0;if(a===0&&!this.lines[a].isVisible())return new q(1,1);const c=1+(a===0?0:this.prefixSumComputer.getAccumulatedValue(a-1));let h;return l?h=this.lines[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),n):h=this.lines[r-1].getViewPositionOfModelPosition(c,o,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return F.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new F(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.lines[n].isVisible()){const r=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.lines[n].isVisible();)n--;if(n===0&&!this.lines[n].isVisible())return 1;const s=1+(n===0?0:this.prefixSumComputer.getAccumulatedValue(n-1));return this.lines[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new F(s.lineNumber,1,r.lineNumber,r.column),t,n);let o=[];const a=s.lineNumber-1,l=r.lineNumber-1;let c=null;for(let f=a;f<=l;f++)if(this.lines[f].isVisible())c===null&&(c=new q(f+1,f===a?s.column:1));else if(c!==null){const p=this.model.getLineMaxColumn(f);o=o.concat(this.model.getDecorationsInRange(new F(c.lineNumber,c.column,f,p),t,n)),c=null}c!==null&&(o=o.concat(this.model.getDecorationsInRange(new F(c.lineNumber,c.column,r.lineNumber,r.column),t,n)),c=null),o.sort((f,g)=>{const p=F.compareRangesUsingStarts(f.range,g.range);return p===0?f.id<g.id?-1:f.id>g.id?1:0:p});let h=[],u=0,d=null;for(const f of o){const g=f.id;d!==g&&(d=g,h[u++]=f)}return h}getInjectedTextAt(e){const t=this._toValidViewLineNumber(e.lineNumber),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index,r=n.remainder;return this.lines[s].getInjectedTextAt(r,e.column)}normalizePosition(e,t){const n=this._toValidViewLineNumber(e.lineNumber),s=this.prefixSumComputer.getIndexOf(n-1),r=s.index,o=s.remainder;return this.lines[r].normalizePosition(this.model,r+1,o,e,t)}getLineIndentColumn(e){const t=this._toValidViewLineNumber(e),n=this.prefixSumComputer.getIndexOf(t-1),s=n.index;return n.remainder===0?this.model.getLineIndentColumn(s+1):0}}class yW{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class CW{constructor(e,t){this.modelRange=e,this.viewLines=t}}class ED{constructor(){}isVisible(){return!0}setVisible(e){return e?this:ID.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let s=e.getLineTokens(t),r=s.getLineContent();return new $5(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new q(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n,s,r){return s}getInjectedTextAt(e,t){return null}}ED.INSTANCE=new ED;class ID{constructor(){}isVisible(){return!1}setVisible(e){return e?ED.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n,s,r){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}ID.INSTANCE=new ID;class YNe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.breakOffsets.length:0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.getInputOffsetOfOutputPosition(e,0)}getInputEndOffsetOfOutputLineIndex(e,t,n){return n+1===this._lineBreakData.breakOffsets.length?e.getLineMaxColumn(t)-1:this._lineBreakData.getInputOffsetOfOutputPosition(n+1,0)}getViewLineContent(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0,r=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let o;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((l,c)=>new ka(0,0,l+1,this._lineBreakData.injectionOptions[c],0));o=ka.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return n>0&&(o=SW(this._lineBreakData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=n>0?this._lineBreakData.breakOffsets[n-1]:0;let o=(n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1])-s;return n>0&&(o=this._lineBreakData.wrappedTextIndentLength+o),o}getViewLineMinColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this._getViewLineMinColumn(n)}_getViewLineMinColumn(e){return e>0?this._lineBreakData.wrappedTextIndentLength+1:1}getViewLineMaxColumn(e,t,n){if(!this._isVisible)throw new Error("Not supported");return this.getViewLineLength(e,t,n)+1}getViewLineData(e,t,n){if(!this._isVisible)throw new Error("Not supported");const s=this._lineBreakData,r=n>0?s.wrappedTextIndentLength:0,o=s.injectionOffsets,a=s.injectionOptions;let l,c,h;if(o){const p=e.getLineTokens(t).withInserted(o.map((w,y)=>({offset:w,text:a[y].content,tokenMetadata:wn.defaultTokenMetadata}))),m=n>0?s.breakOffsets[n-1]:0,v=s.breakOffsets[n];l=p.getLineContent().substring(m,v),c=p.sliceAndInflate(m,v,r),h=new Array;let b=0;for(let w=0;w<o.length;w++){const y=a[w].content.length,x=o[w]+b,L=o[w]+b+y;if(x>v)break;if(m<L){const S=a[w];if(S.inlineClassName){const k=n>0?s.wrappedTextIndentLength:0,D=k+Math.max(x-m,0),T=k+Math.min(L-m,v);D!==T&&h.push(new cLe(D,T,S.inlineClassName,S.inlineClassNameAffectsLetterSpacing))}}b+=y}}else{const p=this.getInputStartOffsetOfOutputLineIndex(n),m=this.getInputEndOffsetOfOutputLineIndex(e,t,n),v=e.getLineTokens(t);l=e.getValueInRange({startLineNumber:t,startColumn:p+1,endLineNumber:t,endColumn:m+1}),c=v.sliceAndInflate(p,m,r),h=null}n>0&&(l=SW(s.wrappedTextIndentLength)+l);const u=n>0?s.wrappedTextIndentLength+1:1,d=l.length+1,f=n+1<this.getViewLineCount(),g=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new $5(l,f,u,d,g,c,h)}getViewLinesData(e,t,n,s,r,o,a){if(!this._isVisible)throw new Error("Not supported");for(let l=n;l<s;l++){let c=r+l-n;if(!o[c]){a[c]=null;continue}a[c]=this.getViewLineData(e,t,l)}}getModelColumnOfViewPosition(e,t){if(!this._isVisible)throw new Error("Not supported");let n=t-1;return e>0&&(n<this._lineBreakData.wrappedTextIndentLength?n=0:n-=this._lineBreakData.wrappedTextIndentLength),this._lineBreakData.getInputOffsetOfOutputPosition(e,n)+1}getViewPositionOfModelPosition(e,t,n=2){if(!this._isVisible)throw new Error("Not supported");let s=this._lineBreakData.getOutputPositionOfInputOffset(t-1,n),r=s.outputLineIndex,o=s.outputOffset+1;return r>0&&(o+=this._lineBreakData.wrappedTextIndentLength),new q(e+r,o)}getViewLineNumberOfModelPosition(e,t){if(!this._isVisible)throw new Error("Not supported");const n=this._lineBreakData.getOutputPositionOfInputOffset(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n,s,r){if(this._lineBreakData.injectionOffsets!==null){const o=s.lineNumber-n,a=this._lineBreakData.outputPositionToOffsetInUnwrappedLine(n,s.column-1),l=this._lineBreakData.normalizeOffsetAroundInjections(a,r);if(l!==a)return this._lineBreakData.getOutputPositionOfOffsetInUnwrappedLine(l,r).toPosition(o,this._lineBreakData.wrappedTextIndentLength)}if(r===0){if(n>0&&s.column===this._getViewLineMinColumn(n))return new q(s.lineNumber-1,this.getViewLineMaxColumn(e,t,n-1))}else if(r===1){const o=this.getViewLineCount()-1;if(n<o&&s.column===this.getViewLineMaxColumn(e,t,n))return new q(s.lineNumber+1,this._getViewLineMinColumn(n+1))}return s}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}}let jE=[""];function SW(i){if(i>=jE.length)for(let e=1;e<=i;e++)jE[e]=QNe(e);return jE[i]}function QNe(i){return new Array(i+1).join(" ")}function qE(i,e){return i===null?e?ED.INSTANCE:ID.INSTANCE:new YNe(i,e)}class XNe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class JNe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new XNe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new w4(t,n)}onModelLinesInserted(e,t,n,s){return new y4(t,n)}onModelLineChanged(e,t,n){return[!1,new JX(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let s=new Array(n);for(let r=0;r<n;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new $5(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);let r=[];for(let o=e;o<=t;o++){let a=o-e;n[a]||(r[a]=null),r[a]=this.getViewLineData(o)}return r}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class eMe{constructor(e,t,n,s,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new q(s.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new q(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new F(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);n=new SQ(o,r),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,u5(this.configuration.options)),n=e.startLineNumber,s=e.endLineNumber;let r=[],o=0,a=[];for(let l=n;l<=s;l++)a[l-n]=[];for(let l=0,c=t.length;l<c;l++){let h=t[l],u=h.options,d=this._getOrCreateViewModelDecoration(h),f=d.range;if(r[o++]=d,u.inlineClassName){let g=new Lb(f,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),p=Math.max(n,f.startLineNumber),m=Math.min(s,f.endLineNumber);for(let v=p;v<=m;v++)a[v-n].push(g)}if(u.beforeContentClassName&&n<=f.startLineNumber&&f.startLineNumber<=s){let g=new Lb(new F(f.startLineNumber,f.startColumn,f.startLineNumber,f.startColumn),u.beforeContentClassName,1);a[f.startLineNumber-n].push(g)}if(u.afterContentClassName&&n<=f.endLineNumber&&f.endLineNumber<=s){let g=new Lb(new F(f.endLineNumber,f.endColumn,f.endLineNumber,f.endColumn),u.afterContentClassName,2);a[f.endLineNumber-n].push(g)}}return{decorations:r,inlineDecorations:a}}}const tMe={ModesRegistry:"editor.modesRegistry"};class iMe{constructor(){this._onDidChangeLanguages=new z,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const af=new iMe;En.add(tMe.ModesRegistry,af);const z0="plaintext",nMe=".txt";af.registerLanguage({id:z0,extensions:[nMe],aliases:[_("plainText.alias","Plain Text"),"text"],mimetypes:[vo.text]});Mi.register(z0,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);class sMe extends te{constructor(e,t,n,s,r,o){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new PNe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new _o(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new mi(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new mi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new JNe(this.model);else{const a=this._configuration.options,l=a.get(43),c=a.get(123),h=a.get(130),u=a.get(122);this._lines=new ZNe(this._editorId,this.model,s,r,l,this.model.getOptions().tabSize,c,h.wrappingColumn,u)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new jm(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new qNe(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new TNe(a)),this._eventDispatcher.emitOutgoingEvent(new IP(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new eMe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const l=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(l,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Ww.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new RNe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new F(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const s of n)this.model.tokenizeViewport(s.startLineNumber,s.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new ENe(e)),this._eventDispatcher.emitOutgoingEvent(new EP(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new DNe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new kNe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new NNe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new q(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let s=!1;const r=this._configuration.options,o=r.get(43),a=r.get(123),l=r.get(130),c=r.get(122);if(this._lines.setWrappingSettings(o,a,l.wrappingColumn,c)&&(e.emitViewEvent(new Yy),e.emitViewEvent(new Qy),e.emitViewEvent(new Yg(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(s=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new Yg(null))),e.emitViewEvent(new LNe(t)),this.viewLayout.onConfigurationChanged(t),s&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),u=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStartLineDelta},1)}_o.shouldRecreate(t)&&(this.cursorConfig=new _o(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const r=e.changes,o=e instanceof ef?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let u=0;u<h.detail.length;u++){const d=h.detail[u];let f=h.injectedTexts[u];f&&(f=f.filter(g=>!g.ownerId||g.ownerId===this._editorId)),a.addRequest(d,f,null)}break}case 2:{let u=null;h.injectedText&&(u=h.injectedText.filter(d=>!d.ownerId||d.ownerId===this._editorId)),a.addRequest(h.detail,u,null);break}}const l=a.finalize();let c=0;for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new Yy),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(o,h.fromLineNumber,h.toLineNumber);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),n=!0;break}case 4:{const u=l.slice(c,c+h.detail.length);c+=h.detail.length;const d=this._lines.onModelLinesInserted(o,h.fromLineNumber,h.toLineNumber,u);d!==null&&(t.emitViewEvent(d),this.viewLayout.onLinesInserted(d.fromLineNumber,d.toLineNumber)),n=!0;break}case 2:{const u=l[c];c++;const[d,f,g,p]=this._lines.onModelLineChanged(o,h.lineNumber,u);s=d,f&&t.emitViewEvent(f),g&&(t.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),p&&(t.emitViewEvent(p),this.viewLayout.onLinesDeleted(p.fromLineNumber,p.toLineNumber));break}case 5:break}o!==null&&this._lines.acceptVersionId(o),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(t.emitViewEvent(new Qy),t.emitViewEvent(new Yg(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,s=e.ranges.length;n<s;n++){const r=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new q(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new MNe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new INe),this.cursorConfig=new _o(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new _o(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Yy),t.emitViewEvent(new Qy),t.emitViewEvent(new Yg(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new _o(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Yg(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new Yy),n.emitViewEvent(new Qy),n.emitViewEvent(new Yg(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new bW)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(129),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new F(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let s=[],r=0,o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;for(let h=0,u=n.length;h<u;h++){const d=n[h].startLineNumber,f=n[h].endLineNumber;f<o||d>l||(o<d&&(s[r++]=new F(o,a,d-1,this.model.getLineMaxColumn(d-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new F(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new F(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new F(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new q(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let s=this.coordinatesConverter.convertViewPositionToModelPosition(new q(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new F(s.lineNumber,s.column,s.lineNumber,s.column),1);const r=this.viewLayout.getVerticalOffsetForLineNumber(e),o=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=o-r}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Xs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=N0(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(t),l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return o.inlineDecorations&&(l=[...l,...o.inlineDecorations.map(c=>c.toInlineDecoration(t))]),new Dr(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,s,o.tokens,l,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let s=this._lines.getViewLinesData(e,t,n);return new lLe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,u5(this._configuration.options)),n=new rMe;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,r.zIndex,c,h,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(F.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let c="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(c+=this.model.getLineContent(l[h])+s);return c}if(r&&t){let l=[],c=0;for(const h of e){const u=h.startLineNumber;h.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(h,n?2:0)),c=u}return l.length===1?l[0]:l}let a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===z0||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const h=s.startLineNumber;s=new F(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const r=this._configuration.options.get(43),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===fs.fontFamily;let c;return l?c=fs.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${fs.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=r;c++){const h=this.model.getLineTokens(c),u=h.getLineContent(),d=c===n?s-1:0,f=c===r?o-1:u.length;u===""?l+="<br>":l+=WNe(u,h.inflate(),t,d,f,a,Fn)}return l}_getColorMap(){let e=Li.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=Z.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new BNe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,s,r))}paste(e,t,n,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new F(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new wS(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new F(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new wS(e,n,null,0,!0,0)))}revealRange(e,t,n,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new wS(e,n,null,s,t,r)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new ONe),this._eventDispatcher.emitOutgoingEvent(new bW))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class rMe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=n){s>c&&(a[a.length-1]=s);return}a.push(r,n,s)}else{const a=new xQ(e,t,[r,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class u1{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const sr=bt("accessibilityService"),oMe=new De("accessibilityModeEnabled",!1);class aMe extends R0{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let C4=[],S4=[];class TP{constructor(e,t){this.classifier=new aMe(e,t)}static create(e){return new TP(e.get(118),e.get(117))}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;const r=[],o=[],a=[];return{addRequest:(l,c,h)=>{r.push(l),o.push(c),a.push(h)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let c=[];for(let h=0,u=r.length;h<u;h++){const d=o[h],f=a[h];f&&!f.injectionOptions&&!d?c[h]=lMe(this.classifier,f,r[h],t,n,l,s):c[h]=cMe(this.classifier,r[h],d,t,n,l,s)}return C4.length=0,S4.length=0,c}}}}function lMe(i,e,t,n,s,r,o){if(s===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,c=e.breakOffsetsVisibleColumn,h=iJ(t,n,s,r,o),u=s-h;let d=C4,f=S4,g=0,p=0,m=0,v=s;const b=l.length;let w=0;if(w>=0){let y=Math.abs(c[w]-v);for(;w+1<b;){const x=Math.abs(c[w+1]-v);if(x>=y)break;y=x,w++}}for(;w<b;){let y=w<0?0:l[w],x=w<0?0:c[w];p>y&&(y=p,x=m);let L=0,S=0,k=0,D=0;if(x<=v){let N=x,$=y===0?0:t.charCodeAt(y-1),U=y===0?0:i.get($),ee=!0;for(let he=y;he<a;he++){const fe=he,Ce=t.charCodeAt(he);let Se,me;if(vn(Ce)?(he++,Se=0,me=2):(Se=i.get(Ce),me=$b(Ce,N,n,r)),fe>p&&x4($,U,Ce,Se)&&(L=fe,S=N),N+=me,N>v){fe>p?(k=fe,D=N-me):(k=he+1,D=N),N-S>u&&(L=0),ee=!1;break}$=Ce,U=Se}if(ee){g>0&&(d[g]=l[l.length-1],f[g]=c[l.length-1],g++);break}}if(L===0){let N=x,$=t.charCodeAt(y),U=i.get($),ee=!1;for(let he=y-1;he>=p;he--){const fe=he+1,Ce=t.charCodeAt(he);if(Ce===9){ee=!0;break}let Se,me;if(Tm(Ce)?(he--,Se=0,me=2):(Se=i.get(Ce),me=ha(Ce)?r:1),N<=v){if(k===0&&(k=fe,D=N),N<=v-u)break;if(x4(Ce,Se,$,U)){L=fe,S=N;break}}N-=me,$=Ce,U=Se}if(L!==0){const he=u-(D-S);if(he<=n){const fe=t.charCodeAt(k);let Ce;vn(fe)?Ce=2:Ce=$b(fe,D,n,r),he-Ce<0&&(L=0)}}if(ee){w--;continue}}if(L===0&&(L=k,S=D),L<=p){const N=t.charCodeAt(p);vn(N)?(L=p+2,S=m+2):(L=p+1,S=m+$b(N,m,n,r))}for(p=L,d[g]=L,m=S,f[g]=S,g++,v=S+u;w<0||w<b&&c[w]<S;)w++;let T=Math.abs(c[w]-v);for(;w+1<b;){const N=Math.abs(c[w+1]-v);if(N>=T)break;T=N,w++}}return g===0?null:(d.length=g,f.length=g,C4=e.breakOffsets,S4=e.breakOffsetsVisibleColumn,e.breakOffsets=d,e.breakOffsetsVisibleColumn=f,e.wrappedTextIndentLength=h,e)}function cMe(i,e,t,n,s,r,o){const a=ka.applyInjectedText(e,t);let l,c;if(t&&t.length>0?(l=t.map(S=>S.options),c=t.map(S=>S.column-1)):(l=null,c=null),s===-1)return l?new kb([a.length],[],0,c,l):null;const h=a.length;if(h<=1)return l?new kb([a.length],[],0,c,l):null;const u=iJ(a,n,s,r,o),d=s-u;let f=[],g=[],p=0,m=0,v=0,b=s,w=a.charCodeAt(0),y=i.get(w),x=$b(w,0,n,r),L=1;vn(w)&&(x+=1,w=a.charCodeAt(1),y=i.get(w),L++);for(let S=L;S<h;S++){const k=S,D=a.charCodeAt(S);let T,N;vn(D)?(S++,T=0,N=2):(T=i.get(D),N=$b(D,x,n,r)),x4(w,y,D,T)&&(m=k,v=x),x+=N,x>b&&((m===0||x-v>d)&&(m=k,v=x-N),f[p]=m,g[p]=v,p++,b=v+d,m=0),w=D,y=T}return p===0&&(!t||t.length===0)?null:(f[p]=h,g[p]=x,new kb(f,g,u,c,l))}function $b(i,e,t,n){return i===9?t-e%t:ha(i)||i<32?n:1}function xW(i,e){return e-i%e}function x4(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function iJ(i,e,t,n,s){let r=0;if(s!==0){const o=Xs(i);if(o!==-1){for(let l=0;l<o;l++){const c=i.charCodeAt(l)===9?xW(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=xW(r,e);r+=c}r+n>t&&(r=0)}}return r}var GE;const KE=(GE=window.trustedTypes)===null||GE===void 0?void 0:GE.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class NP{static create(){return new NP}constructor(){}createLineBreaksComputer(e,t,n,s){t=t|0,n=+n;let r=[],o=[];return{addRequest:(a,l,c)=>{r.push(a),o.push(l)},finalize:()=>hMe(r,e,t,n,s,o)}}}function hMe(i,e,t,n,s,r){var o;function a(k){const D=r[k];if(D){const T=ka.applyInjectedText(i[k],D),N=D.map(U=>U.options),$=D.map(U=>U.column-1);return new kb([T.length],[],0,$,N)}else return null}if(n===-1){const k=[];for(let D=0,T=i.length;D<T;D++)k[D]=a(D);return k}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(s===3?2:s===2?1:0)),u=Math.ceil(e.spaceWidth*h),d=document.createElement("div");Vn.applyFontInfoSlow(d,e);const f=Nf(1e4),g=[],p=[],m=[],v=[],b=[];for(let k=0;k<i.length;k++){const D=ka.applyInjectedText(i[k],r[k]);let T=0,N=0,$=l;if(s!==0)if(T=Xs(D),T===-1)T=0;else{for(let fe=0;fe<T;fe++){const Ce=D.charCodeAt(fe)===9?t-N%t:1;N+=Ce}const he=Math.ceil(e.spaceWidth*N);he+e.typicalFullwidthCharacterWidth>l?(T=0,N=0):$=l-he}const U=D.substr(T),ee=uMe(U,N,t,$,f,u);g[k]=T,p[k]=N,m[k]=U,v[k]=ee[0],b[k]=ee[1]}const w=f.build(),y=(o=KE==null?void 0:KE.createHTML(w))!==null&&o!==void 0?o:w;d.innerHTML=y,d.style.position="absolute",d.style.top="10000",d.style.wordWrap="break-word",document.body.appendChild(d);let x=document.createRange();const L=Array.prototype.slice.call(d.children,0);let S=[];for(let k=0;k<i.length;k++){const D=L[k],T=dMe(x,D,m[k],v[k]);if(T===null){S[k]=a(k);continue}const N=g[k],$=p[k]+h,U=b[k],ee=[];for(let Se=0,me=T.length;Se<me;Se++)ee[Se]=U[T[Se]];if(N!==0)for(let Se=0,me=T.length;Se<me;Se++)T[Se]+=N;let he,fe;const Ce=r[k];Ce?(he=Ce.map(Se=>Se.options),fe=Ce.map(Se=>Se.column-1)):(he=null,fe=null),S[k]=new kb(T,ee,$,fe,he)}return document.body.removeChild(d),S}function uMe(i,e,t,n,s,r){if(r!==0){let d=String(r);s.appendASCIIString('<div style="text-indent: -'),s.appendASCIIString(d),s.appendASCIIString("px; padding-left: "),s.appendASCIIString(d),s.appendASCIIString("px; box-sizing: border-box; width:")}else s.appendASCIIString('<div style="width:');s.appendASCIIString(String(n)),s.appendASCIIString('px;">');const o=i.length;let a=e,l=0,c=[],h=[],u=0<o?i.charCodeAt(0):0;s.appendASCIIString("<span>");for(let d=0;d<o;d++){d!==0&&d%16384===0&&s.appendASCIIString("</span><span>"),c[d]=l,h[d]=a;const f=u;u=d+1<o?i.charCodeAt(d+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let m=1;m<=g;m++)m<g?s.write1(160):s.appendASCII(32);break;case 32:u===32?s.write1(160):s.appendASCII(32);break;case 60:s.appendASCIIString("&lt;");break;case 62:s.appendASCIIString("&gt;");break;case 38:s.appendASCIIString("&amp;");break;case 0:s.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.write1(65533);break;default:ha(f)&&p++,f<32?s.write1(9216+f):s.write1(f)}l+=g,a+=p}return s.appendASCIIString("</span>"),c[i.length]=l,h[i.length]=a,s.appendASCIIString("</div>"),[c,h]}function dMe(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{D4(i,s,n,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function D4(i,e,t,n,s,r,o,a){if(n===r||(s=s||ZE(i,e,t[n],t[n+1]),o=o||ZE(i,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(n+1===r){a.push(r);return}const l=n+(r-n)/2|0,c=ZE(i,e,t[l],t[l+1]);D4(i,e,t,n,s,l,c,a),D4(i,e,t,l,c,r,o,a)}function ZE(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var fMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let gMe=0,pMe=class{constructor(e,t,n,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=r}dispose(){lt(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},d1=class yS extends te{constructor(e,t,n,s,r,o,a,l,c,h){super(),this._onDidDispose=this._register(new z),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new z),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new z),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new z),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new z),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new z),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new z),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new z),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new z),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new z),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new z),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new z),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new DW),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new DW),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new z),this.onWillType=this._onWillType.event,this._onDidType=this._register(new z),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new z),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new z),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new z),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new z),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new z),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new z),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new z),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new z),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new z),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new z),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new z),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new z),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new z),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new z),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new z),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new z),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new z),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;const u=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=u.overflowWidgetsDomNode,delete u.overflowWidgetsDomNode,this._id=++gMe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(u,h)),this._register(this._configuration.onDidChange(f=>{this._onDidChangeConfiguration.fire(f);const g=this._configuration.options;if(f.hasChanged(129)){const p=g.get(129);this._onDidLayoutChange.fire(p)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new mMe(this,this._contextKeyService)),this._register(new _Me(this,this._contextKeyService)),this._instantiationService=s.createChild(new u1([$e,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new bMe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let d;Array.isArray(n.contributions)?d=n.contributions:d=Xp.getEditorContributions();for(const f of d){if(this._contributions[f.id]){Ze(new Error(`Cannot have two contributions with the same id ${f.id}`));continue}try{const g=this._instantiationService.createInstance(f.ctor,this);this._contributions[f.id]=g}catch(g){Ze(g)}}Xp.getEditorActions().forEach(f=>{if(this._actions[f.id]){Ze(new Error(`Cannot have two actions with the same id ${f.id}`));return}const g=new eJ(f.id,f.label,f.alias,Fd(f.precondition),()=>this._instantiationService.invokeFunction(p=>Promise.resolve(f.runEditorCommand(p,this,null))),this._contextKeyService);this._actions[g.id]=g}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Vn(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return dL.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const s=e[t];this._contributions[s].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?vi.getWordAtPosition(this._modelData.model,this._configuration.options.get(115),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const r={oldModelUrl:s?s.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(s)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}getTopForLineNumber(e){return this._modelData?yS._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?yS._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>F.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Et.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,s){if(!this._modelData)return;if(!F.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new F(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,s){if(!q.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new F(e.lineNumber,e.column,e.lineNumber,e.column),t,n,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=Ve.isISelection(e),n=F.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new Ve(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new F(e,1,t,1),n,!1,s)}revealRange(e,t=0,n=!1,s=!0){this._revealRange(e,n?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,s){if(!F.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(F.lift(e),t,n,s)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Ve.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const r of t){const o=this._contributions[r];typeof o.saveViewState=="function"&&(e[r]=o.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),s=this._modelData.viewModel.saveState();return{cursorState:n,viewState:s,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const s=t.contributionsState||{},r=Object.keys(this._contributions);for(let a=0,l=r.length;a<l;a++){const c=r[a],h=this._contributions[c];typeof h.restoreViewState=="function"&&h.restoreViewState(s[c])}const o=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(o)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._actions[r])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run()).then(void 0,Ze);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,s,r,e)}_paste(e,t,n,s,r){if(!this._modelData||t.length===0)return;const o=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,s,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new F(o.lineNumber,o.column,a.lineNumber,a.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const s=Xp.getEditorCommand(t);return s?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,n)).then(void 0,Ze)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let s;return n?Array.isArray(n)?s=()=>n:s=n:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,u5(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(129)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,s=n.get(129),r=yS._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Vn.applyFontInfoSlow(e,this._configuration.options.get(43))}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new sMe(this._id,this._configuration,e,NP.create(),TP.create(this._configuration.options),o=>Tl(o));t.push(e.onDidChangeDecorations(o=>this._onDidChangeModelDecorations.fire(o))),t.push(e.onDidChangeLanguage(o=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(o)})),t.push(e.onDidChangeLanguageConfiguration(o=>this._onDidChangeModelLanguageConfiguration.fire(o))),t.push(e.onDidChangeContent(o=>this._onDidChangeModelContent.fire(o))),t.push(e.onDidChangeOptions(o=>this._onDidChangeModelOptions.fire(o))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(o=>{switch(o.kind){case 0:this._onDidContentSizeChange.fire(o);break;case 1:this._editorTextFocus.setValue(o.hasFocus);break;case 2:this._onDidScrollChange.fire(o);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{o.reachedMaxCursorCount&&this._notificationService.warn(_("cursors.maximum","The number of cursors has been limited to {0}.",jm.MAX_CURSOR_COUNT));const a=[];for(let h=0,u=o.selections.length;h<u;h++)a[h]=o.selections[h].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:o.reason,source:o.source};this._onDidChangeCursorPosition.fire(l);const c={selection:o.selections[0],secondarySelections:o.selections.slice(1),modelVersionId:o.modelVersionId,oldSelections:o.oldSelections,oldModelVersionId:o.oldModelVersionId,source:o.source,reason:o.reason};this._onDidChangeCursorSelection.fire(c);break}}}));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let o=Object.keys(this._contentWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addContentWidget(this._contentWidgets[c])}o=Object.keys(this._overlayWidgets);for(let a=0,l=o.length;a<l;a++){const c=o[a];s.addOverlayWidget(this._overlayWidgets[c])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new pMe(e,n,s,r,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new UL(e.coordinatesConverter);return n.onKeyDown=r=>this._onKeyDown.fire(r),n.onKeyUp=r=>this._onKeyUp.fire(r),n.onContextMenu=r=>this._onContextMenu.fire(r),n.onMouseMove=r=>this._onMouseMove.fire(r),n.onMouseLeave=r=>this._onMouseLeave.fire(r),n.onMouseDown=r=>this._onMouseDown.fire(r),n.onMouseUp=r=>this._onMouseUp.fire(r),n.onMouseDrag=r=>this._onMouseDrag.fire(r),n.onMouseDrop=r=>this._onMouseDrop.fire(r),n.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),n.onMouseWheel=r=>this._onMouseWheel.fire(r),[new SNe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};d1=fMe([nd(3,zt),nd(4,si),nd(5,yn),nd(6,$e),nd(7,oi),nd(8,zn),nd(9,sr)],d1);class DW extends te{constructor(){super(),this._onDidChangeToTrue=this._register(new z),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new z),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class mMe extends te{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=G.editorSimpleInput.bindTo(t),this._editorFocus=G.focus.bindTo(t),this._textInputFocus=G.textInputFocus.bindTo(t),this._editorTextFocus=G.editorTextFocus.bindTo(t),this._editorTabMovesFocus=G.tabMovesFocus.bindTo(t),this._editorReadonly=G.readOnly.bindTo(t),this._inDiffEditor=G.inDiffEditor.bindTo(t),this._editorColumnSelection=G.columnSelection.bindTo(t),this._hasMultipleSelections=G.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=G.hasNonEmptySelection.bindTo(t),this._canUndo=G.canUndo.bindTo(t),this._canRedo=G.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(128)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class _Me extends te{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=G.languageId.bindTo(t),this._hasCompletionItemProvider=G.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=G.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=G.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=G.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=G.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=G.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=G.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=G.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=G.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=G.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=G.hasReferenceProvider.bindTo(t),this._hasRenameProvider=G.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=G.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=G.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=G.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=G.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=G.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=G.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=G.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(na.onDidChange(n)),this._register(Ll.onDidChange(n)),this._register(WM.onDidChange(n)),this._register(Uv.onDidChange(n)),this._register(jx.onDidChange(n)),this._register(qx.onDidChange(n)),this._register(Gx.onDidChange(n)),this._register(Hv.onDidChange(n)),this._register($x.onDidChange(n)),this._register(VM.onDidChange(n)),this._register(Ux.onDidChange(n)),this._register(FM.onDidChange(n)),this._register(Sb.onDidChange(n)),this._register(Oh.onDidChange(n)),this._register(BM.onDidChange(n)),this._register(zM.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(na.has(e)),this._hasCodeActionsProvider.set(Ll.has(e)),this._hasCodeLensProvider.set(WM.has(e)),this._hasDefinitionProvider.set(Uv.has(e)),this._hasDeclarationProvider.set(jx.has(e)),this._hasImplementationProvider.set(qx.has(e)),this._hasTypeDefinitionProvider.set(Gx.has(e)),this._hasHoverProvider.set(Hv.has(e)),this._hasDocumentHighlightProvider.set($x.has(e)),this._hasDocumentSymbolProvider.set(VM.has(e)),this._hasReferenceProvider.set(Ux.has(e)),this._hasRenameProvider.set(FM.has(e)),this._hasSignatureHelpProvider.set(BM.has(e)),this._hasInlayHintsProvider.set(zM.has(e)),this._hasDocumentFormattingProvider.set(Sb.has(e)||Oh.has(e)),this._hasDocumentSelectionFormattingProvider.set(Oh.has(e)),this._hasMultipleDocumentFormattingProvider.set(Sb.all(e).length+Oh.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Oh.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===nt.walkThroughSnippet)})}}class bMe extends te{constructor(e){super(),this._onChange=this._register(new z),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Im(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const vMe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),wMe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function YE(i){return vMe+encodeURIComponent(i.toString())+wMe}const yMe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),CMe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function SMe(i){return yMe+encodeURIComponent(i.toString())+CMe}ti((i,e)=>{const t=i.getColor(SX);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(Wb);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${YE(n)}") repeat-x bottom left; }`);const s=i.getColor(jAe);s&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${s}; }`);const r=i.getColor(VL);r&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);const o=i.getColor(Bc);o&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${YE(o)}") repeat-x bottom left; }`);const a=i.getColor(qAe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=i.getColor(bP);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const c=i.getColor(pa);c&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${YE(c)}") repeat-x bottom left; }`);const h=i.getColor(GAe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const u=i.getColor(ZAe);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const d=i.getColor(KAe);d&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${SMe(d)}") no-repeat bottom left; }`);const f=i.getColor(xIe);f&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${f.rgba.a}; }`);const g=i.getColor(SIe);g&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${g}; }`);const p=i.getColor(nu)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${p}}`)});class Vt{constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new z({onFirstListenerAdd:()=>e.addEventListener(t,s,n),onLastListenerRemove:()=>e.removeEventListener(t,s,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function kW(i){return i.preventDefault(),i.stopPropagation(),i}var H0=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let xMe=!1;var TD;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(TD||(TD={}));let DMe=4;const kMe=new z;let LMe=300;const AMe=new z;class MP{constructor(){this.disposables=new de}get onPointerMove(){return this.disposables.add(new Vt(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Vt(window,"mouseup")).event}dispose(){this.disposables.dispose()}}H0([Qi],MP.prototype,"onPointerMove",null);H0([Qi],MP.prototype,"onPointerUp",null);class RP{constructor(e){this.el=e,this.disposables=new de}get onPointerMove(){return this.disposables.add(new Vt(this.el,jt.Change)).event}get onPointerUp(){return this.disposables.add(new Vt(this.el,jt.End)).event}dispose(){this.disposables.dispose()}}H0([Qi],RP.prototype,"onPointerMove",null);H0([Qi],RP.prototype,"onPointerUp",null);class ND{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}H0([Qi],ND.prototype,"onPointerMove",null);H0([Qi],ND.prototype,"onPointerUp",null);class Mn extends te{constructor(e,t,n){super(),this.hoverDelay=LMe,this.hoverDelayer=this._register(new I0(this.hoverDelay)),this._state=3,this._onDidEnablementChange=this._register(new z),this.onDidEnablementChange=this._onDidEnablementChange.event,this._onDidStart=this._register(new z),this.onDidStart=this._onDidStart.event,this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidReset=this._register(new z),this.onDidReset=this._onDidReset.event,this._onDidEnd=this._register(new z),this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.orthogonalStartSashDisposables=this._register(new de),this.orthogonalStartDragHandleDisposables=this._register(new de),this.orthogonalEndSashDisposables=this._register(new de),this.orthogonalEndDragHandleDisposables=this._register(new de),this.el=se(e,ue(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ut&&this.el.classList.add("mac");const s=this._register(new Vt(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new MP),this));const r=this._register(new Vt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new Vt(this.el,"mouseenter")).event;this._register(o(()=>Mn.onMouseEnter(this)));const a=this._register(new Vt(this.el,"mouseleave")).event;this._register(a(()=>Mn.onMouseLeave(this))),this._register(At.addTarget(this.el));const l=Le.map(this._register(new Vt(this.el,jt.Start)).event,u=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(l(u=>this.onPointerStart(u,new RP(this.el)),this));const c=this._register(new Vt(this.el,jt.Tap)).event,h=Le.map(Le.filter(Le.debounce(c,(u,d)=>{var f;return{event:d,count:((f=u==null?void 0:u.count)!==null&&f!==void 0?f:0)+1}},250),({count:u})=>u===2),({event:u})=>{var d;return Object.assign(Object.assign({},u),{target:(d=u.initialTarget)!==null&&d!==void 0?d:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=DMe,this._register(kMe.event(u=>{this.size=u,this.layout()}))),this._register(AMe.event(u=>this.hoverDelay=u)),this.hidden=!1,this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",xMe),this.layout()}get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this._onDidEnablementChange.fire(e))}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=se(this.el,ue(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(pt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Vt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Mn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Vt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Mn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=se(this.el,ue(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(pt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Vt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Mn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Vt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Mn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){It.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new ND(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new ND(t))),!this.state)return;const s=oxe("iframe");for(const g of s)g.style.pointerEvents="none";const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Gr(this.el),h=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=ut?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=ut?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new de;h(),n||this.onDidEnablementChange(h,null,u);const d=g=>{It.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{It.stop(g,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.style.pointerEvents="auto"};t.onPointerMove(d,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Mn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Mn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Mn.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}hide(){this.hidden=!0,this.el.style.display="none",this.el.setAttribute("aria-hidden","true")}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const OP=bt("IEditorCancelService"),nJ=new De("cancellableOperation",!1,_("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));cg(OP,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(s=>{const r=nJ.bindTo(s.get($e)),o=new wr;return{key:r,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class EMe extends Ra{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(OP).add(e,this))}dispose(){this._unregister(),super.dispose()}}pe(new class extends Qr{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:nJ})}runEditorCommand(i,e){i.get(OP).cancel(e)}});let IMe=class k4{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?mo("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof k4))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new k4(e,this.flags))}};class TMe extends EMe{constructor(e,t,n,s){super(e,s),this._listener=new de,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!n||!F.containsPosition(n,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!n||!F.containsRange(n,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class NMe extends Ra{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class qm{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}}return new qm(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const sJ={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:vo.text,TERMINALS:"Terminals"};class MMe{constructor(e){this.data=e}update(){}getData(){return this.data}}const uc={CurrentDragAndDropData:void 0};class lf extends te{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Mo&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Fm)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(At.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Es&&this._register(ne(e,Ae.DRAG_START,s=>{var r;return(r=s.dataTransfer)===null||r===void 0?void 0:r.setData(sJ.TEXT,this._action.label)}))),this._register(ne(t,jt.Tap,s=>this.onClick(s,!0))),this._register(ne(t,Ae.MOUSE_DOWN,s=>{n||It.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),ut&&this._register(ne(t,Ae.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(ne(t,Ae.CLICK,s=>{It.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(ne(t,Ae.DBLCLICK,s=>{It.stop(s,!0)})),[Ae.MOUSE_UP,Ae.MOUSE_OUT].forEach(s=>{this._register(ne(t,s,r=>{It.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var n;It.stop(e,!0);const s=Or(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,s)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class PP extends lf{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=se(this.element,ue("a.action-label"))),this.label&&(this._action.id===da.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(se(this.element,ue("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=_({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var RMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Zc extends te{constructor(e,t={}){var n,s,r,o,a,l;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new z),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new z({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new z),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new z),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(s=this.options.orientation)!==null&&s!==void 0?s:0,this._triggerKeys={keyDown:(o=(r=this.options.triggerKeys)===null||r===void 0?void 0:r.keyDown)!==null&&o!==void 0?o:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Fm,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let c,h;switch(this._orientation){case 0:c=[15],h=[17];break;case 1:c=[16],h=[18],this.domNode.className+=" vertical";break}this._register(ne(this.domNode,Ae.KEY_DOWN,u=>{const d=new ui(u);let f=!0;const g=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;c&&(d.equals(c[0])||d.equals(c[1]))?f=this.focusPrevious():h&&(d.equals(h[0])||d.equals(h[1]))?f=this.focusNext():d.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():d.equals(14)?f=this.focusFirst():d.equals(13)?f=this.focusLast():d.equals(2)&&g instanceof lf&&g.trapsArrowNavigation?f=this.focusNext():this.isTriggerKeyEvent(d)?this._triggerKeys.keyDown?this.doTrigger(d):this.triggerKeyDown=!0:f=!1,f&&(d.preventDefault(),d.stopPropagation())})),this._register(ne(this.domNode,Ae.KEY_UP,u=>{const d=new ui(u);this.isTriggerKeyEvent(d)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(d)),d.preventDefault(),d.stopPropagation()):(d.equals(2)||d.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Im(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(qp()===this.domNode||!xl(qp(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(xl(qp(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=Tf(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(ne(o,Ae.CONTEXT_MENU,l=>{It.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r)),a||(a=new PP(this.context,r,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof lf&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a),this._actionIds.push(r.id)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),this._actionIds.splice(s,0,r.id),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){lt(this.viewItems),this.viewItems=[],this._actionIds=[],Pn(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus()}else n!==void 0&&(this.focusedItem=n),this.updateFocus()}focusFirst(){return this.focusedItem=this.length()>1?1:0,this.focusPrevious()}focusLast(){return this.focusedItem=this.length()<2?0:this.length()-2,this.focusNext()}focusNext(){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=e,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(),!0}focusPrevious(){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const e=this.focusedItem;let t;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(this.options.preventLoopNavigation)return this.focusedItem=e,!1;this.focusedItem=this.viewItems.length-1}t=this.viewItems[this.focusedItem]}while(this.focusedItem!==e&&this.options.focusOnlyEnabledItems&&!t.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t});for(let n=0;n<this.viewItems.length;n++){const s=this.viewItems[n],r=s;if(n===this.focusedItem){let o=!0;Cb(r.focus)||(o=!1),this.options.focusOnlyEnabledItems&&Cb(s.isEnabled)&&!s.isEnabled()&&(o=!1),o?r.focus(e):this.actionsList.focus({preventScroll:t})}else Cb(r.blur)&&r.blur()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof lf){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return RMe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){lt(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const OMe={IconContribution:"base.contributions.icons"};class PMe{constructor(){this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:_("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:_("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Zs.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;let a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;ci.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${ci.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!ci.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const Wf=new PMe;En.add(OMe.IconContribution,Wf);function is(i,e,t,n){return Wf.registerIcon(i,e,t,n)}function FMe(){return Wf}function BMe(){for(const i of Hx.all)Wf.registerIcon(i.id,i.definition,i.description);Hx.onDidRegister(i=>Wf.registerIcon(i.id,i.definition,i.description))}BMe();const rJ="vscode://schemas/icons";let oJ=En.as(bL.JSONContribution);oJ.registerSchema(rJ,Wf.getIconSchema());const LW=new mi(()=>oJ.notifySchemaChanged(rJ),200);Wf.onDidChange(()=>{LW.isScheduled()||LW.schedule()});const VMe=is("widget-close",be.close,_("widgetClose","Icon for the close action in widgets."));var WMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},HMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},QE;const Xy=3;class w_{constructor(e,t,n,s){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=s}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class XE{constructor(e){this.entries=e}}const UMe=is("diff-review-insert",be.add,_("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),$Me=is("diff-review-remove",be.remove,_("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),jMe=is("diff-review-close",be.close,_("diffReviewCloseIcon","Icon for 'Close' in diff review."));let MD=class fd extends te{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=gt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=gt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new Zc(this.actionBarContainer.domNode)),this._actionBar.push(new Mo("diffreview.close",_("label.close","Close"),"close-diff-review "+ci.asClassName(jMe),!0,()=>HMe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=gt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=gt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new jL(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(tn(this.domNode.domNode,"click",n=>{n.preventDefault();let s=xY(n.target,"diff-review-row");s&&this._goToRow(s)})),this._register(tn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let s=0,r=this._diffs.length;s<r;s++)if(this._diffs[s]===this._currentDiff){n=s;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new q(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new q(e,1)),this._diffEditor.revealPosition(new q(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:fd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let s=[],r=0;for(let c=0,h=e.length;c<h;c++){const u=e[c],d=u.originalStartLineNumber,f=u.originalEndLineNumber,g=u.modifiedStartLineNumber,p=u.modifiedEndLineNumber;let m=[],v=0;{const b=f===0?d:d-1,w=p===0?g:g-1;let y=1,x=1;if(c>0){const k=e[c-1];k.originalEndLineNumber===0?y=k.originalStartLineNumber+1:y=k.originalEndLineNumber+1,k.modifiedEndLineNumber===0?x=k.modifiedStartLineNumber+1:x=k.modifiedEndLineNumber+1}let L=b-Xy+1,S=w-Xy+1;if(L<y){const k=y-L;L=L+k,S=S+k}if(S<x){const k=x-S;L=L+k,S=S+k}m[v++]=new w_(L,b,S,w)}f!==0&&(m[v++]=new w_(d,f,0,0)),p!==0&&(m[v++]=new w_(0,0,g,p));{const b=f===0?d+1:f+1,w=p===0?g+1:p+1;let y=t,x=n;if(c+1<h){const k=e[c+1];k.originalEndLineNumber===0?y=k.originalStartLineNumber:y=k.originalStartLineNumber-1,k.modifiedEndLineNumber===0?x=k.modifiedStartLineNumber:x=k.modifiedStartLineNumber-1}let L=b+Xy-1,S=w+Xy-1;if(L>y){const k=y-L;L=L+k,S=S+k}if(S>x){const k=x-S;L=L+k,S=S+k}m[v++]=new w_(b,L,w,S)}s[r++]=new XE(m)}let o=s[0].entries,a=[],l=0;for(let c=1,h=s.length;c<h;c++){const u=s[c].entries,d=o[o.length-1],f=u[0];if(d.getType()===0&&f.getType()===0&&f.originalLineStart<=d.originalLineEnd){o[o.length-1]=new w_(d.originalLineStart,f.originalLineEnd,d.modifiedLineStart,f.modifiedLineEnd),o=o.concat(u.slice(1));continue}a[l++]=new XE(o),o=u}return a[l++]=new XE(o),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,s=this._diffs.length;n<s;n++){const r=this._diffs[n].entries,o=r[r.length-1].modifiedLineEnd;if(t<=o)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),s=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),o=s.getOptions();if(!this._isVisible||!n||!s){Pn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries;let c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Vn.applyFontInfoSlow(c,t.get(43));let h=0,u=0,d=0,f=0;for(let S=0,k=l.length;S<k;S++){const D=l[S],T=D.originalLineStart,N=D.originalLineEnd,$=D.modifiedLineStart,U=D.modifiedLineEnd;T!==0&&(h===0||T<h)&&(h=T),N!==0&&(u===0||N>u)&&(u=N),$!==0&&(d===0||$<d)&&(d=$),U!==0&&(f===0||U>f)&&(f=U)}let g=document.createElement("div");g.className="diff-review-row";let p=document.createElement("div");p.className="diff-review-cell diff-review-summary";const m=u-h+1,v=f-d+1;p.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${m} +${d},${v} @@`)),g.setAttribute("data-line",String(d));const b=S=>S===0?_("no_lines_changed","no lines changed"):S===1?_("one_line_changed","1 line changed"):_("more_lines_changed","{0} lines changed",S),w=b(m),y=b(v);g.setAttribute("aria-label",_({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,w,d,y)),g.appendChild(p),g.setAttribute("role","listitem"),c.appendChild(g);const x=t.get(58);let L=d;for(let S=0,k=l.length;S<k;S++){const D=l[S];fd._renderSection(c,D,L,x,this._width,e,n,r,t,s,o,this._modeService.languageIdCodec),D.modifiedLineStart!==0&&(L=D.modifiedLineEnd)}Pn(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,s,r,o,a,l,c,h,u,d){const f=t.getType();let g="diff-review-row",p="";const m="diff-review-spacer";let v=null;switch(f){case 1:g="diff-review-row line-insert",p=" char-insert",v=UMe;break;case 2:g="diff-review-row line-delete",p=" char-delete",v=$Me;break}const b=t.originalLineStart,w=t.originalLineEnd,y=t.modifiedLineStart,x=t.modifiedLineEnd,L=Math.max(x-y,w-b),S=o.get(129),k=S.glyphMarginWidth+S.lineNumbersWidth,D=c.get(129),T=10+D.glyphMarginWidth+D.lineNumbersWidth;for(let N=0;N<=L;N++){const $=b===0?0:b+N,U=y===0?0:y+N,ee=document.createElement("div");ee.style.minWidth=r+"px",ee.className=g,ee.setAttribute("role","listitem"),U!==0&&(n=U),ee.setAttribute("data-line",String(n));let he=document.createElement("div");he.className="diff-review-cell",he.style.height=`${s}px`,ee.appendChild(he);const fe=document.createElement("span");fe.style.width=k+"px",fe.style.minWidth=k+"px",fe.className="diff-review-line-number"+p,$!==0?fe.appendChild(document.createTextNode(String($))):fe.innerText=" ",he.appendChild(fe);const Ce=document.createElement("span");Ce.style.width=T+"px",Ce.style.minWidth=T+"px",Ce.style.paddingRight="10px",Ce.className="diff-review-line-number"+p,U!==0?Ce.appendChild(document.createTextNode(String(U))):Ce.innerText=" ",he.appendChild(Ce);const Se=document.createElement("span");if(Se.className=m,v){const ze=document.createElement("span");ze.className=ci.asClassName(v),ze.innerText="  ",Se.appendChild(ze)}else Se.innerText="  ";he.appendChild(Se);let me;if(U!==0){let ze=this._renderLine(h,c,u.tabSize,U,d);fd._ttPolicy&&(ze=fd._ttPolicy.createHTML(ze)),he.insertAdjacentHTML("beforeend",ze),me=h.getLineContent(U)}else{let ze=this._renderLine(a,o,l.tabSize,$,d);fd._ttPolicy&&(ze=fd._ttPolicy.createHTML(ze)),he.insertAdjacentHTML("beforeend",ze),me=a.getLineContent($)}me.length===0&&(me=_("blankLine","blank"));let kt="";switch(f){case 0:$===U?kt=_({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",me,$):kt=_("equalLine","{0} original line {1} modified line {2}",me,$,U);break;case 1:kt=_("insertLine","+ {0} modified line {1}",me,U);break;case 2:kt=_("deleteLine","- {0} original line {1}",me,$);break}ee.setAttribute("aria-label",kt),e.appendChild(ee)}}static _renderLine(e,t,n,s,r){const o=e.getLineContent(s),a=t.get(43),l=wn.createEmpty(o,r),c=Dr.isBasicASCII(o,e.mightContainNonBasicASCII()),h=Dr.containsRTL(o,c,e.mightContainRTL());return yL(new hg(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,o,!1,c,h,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==fr.OFF,null)).html}};MD._ttPolicy=(QE=window.trustedTypes)===null||QE===void 0?void 0:QE.createPolicy("diffReview",{createHTML:i=>i});MD=WMe([zMe(1,Fs)],MD);ti((i,e)=>{const t=i.getColor(MX);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(Vw);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class qMe extends _i{constructor(){super({id:"editor.action.diffReview.next",label:_("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:xe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=aJ(e);n&&n.diffReviewNext()}}class GMe extends _i{constructor(){super({id:"editor.action.diffReview.prev",label:_("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:xe.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=aJ(e);n&&n.diffReviewPrev()}}function aJ(i){const e=i.get(si),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let s=0,r=t.length;s<r;s++){const o=t[s];if(o.getModifiedEditor().getId()===n.getId()||o.getOriginalEditor().getId()===n.getId())return o}return null}ot(qMe);ot(GMe);const pg=bt("contextViewService"),mg=bt("contextMenuService");var JE=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class KMe extends te{constructor(e,t,n,s,r,o){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=s,this._contextMenuService=r,this._clipboardService=o,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=be.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const c=[],h=s.modifiedEndLineNumber===0;c.push(new Mo("diff.clipboard.copyDeletedContent",h?s.originalEndLineNumber>s.modifiedStartLineNumber?_("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):_("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.originalEndLineNumber>s.modifiedStartLineNumber?_("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):_("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>JE(this,void 0,void 0,function*(){const p=new F(s.originalStartLineNumber,1,s.originalEndLineNumber+1,1),m=s.originalModel.getValueInRange(p);yield this._clipboardService.writeText(m)})));let u=0,d;s.originalEndLineNumber>s.modifiedStartLineNumber&&(d=new Mo("diff.clipboard.copyDeletedLineContent",h?_("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber):_("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber),void 0,!0,()=>JE(this,void 0,void 0,function*(){const p=s.originalModel.getLineContent(s.originalStartLineNumber+u);if(p===""){const m=s.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(m===0?`
`:`\r
`)}else yield this._clipboardService.writeText(p)})),c.push(d)),n.getOption(80)||c.push(new Mo("diff.inline.revertChange",_("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>JE(this,void 0,void 0,function*(){const p=new F(s.originalStartLineNumber,1,s.originalEndLineNumber,s.originalModel.getLineMaxColumn(s.originalEndLineNumber)),m=s.originalModel.getValueInRange(p);if(s.modifiedEndLineNumber===0){const v=n.getModel().getLineMaxColumn(s.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new F(s.modifiedStartLineNumber,v,s.modifiedStartLineNumber,v),text:l+m}])}else{const v=n.getModel().getLineMaxColumn(s.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new F(s.modifiedStartLineNumber,1,s.modifiedEndLineNumber,v),text:m}])}})));const g=(p,m)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:p,y:m}),getActions:()=>(d&&(d.label=h?_("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.originalStartLineNumber+u):_("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.originalStartLineNumber+u)),c),autoSelectFirstItem:!0})};this._register(tn(this._diffActions,"mousedown",p=>{const{top:m,height:v}=Rn(this._diffActions);let b=Math.floor(a/3);p.preventDefault(),g(p.posx,m+v+b)})),this._register(n.onMouseMove(p=>{p.target.type===8||p.target.type===5?p.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.rightButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._viewZoneId&&(p.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,a),g(p.event.posx,p.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:s}=Rn(e),r=t-s,o=Math.floor(r/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let c=0;c<this.diff.viewLineCounts.length;c++)if(l+=this.diff.viewLineCounts[c],o<l)return c}return o}}const _g=bt("clipboardService");class GL{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}GL.None=Object.freeze({report(){}});const U0=bt("editorProgressService");var ZMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eI;class AW{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,s){const r=s?qm.capture(e):null;e.changeViewZones(o=>{var a;for(const l of this._zones)o.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,c=n.zones.length;l<c;l++){const h=n.zones[l];h.suppressMouseDown=!0;const u=o.addZone(h);this._zones.push(u),this._zonesMap[String(u)]=!0,n.zones[l].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new KMe(u,h.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let YMe=0;const QMe=is("diff-insert",be.add,_("diffInsertIcon","Line decoration for inserts in the diff editor.")),lJ=is("diff-remove",be.remove,_("diffRemoveIcon","Line decoration for removals in the diff editor.")),EW=(eI=window.trustedTypes)===null||eI===void 0?void 0:eI.createPolicy("diffEditorWidget",{createHTML:i=>i});let Lu=class In extends te{constructor(e,t,n,s,r,o,a,l,c,h,u,d){super(),this._editorProgressService=d,this._onDidDispose=this._register(new z),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new z),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new z),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=r,this._codeEditorService=l,this._contextKeyService=this._register(o.createScoped(e)),this._instantiationService=a.createChild(new u1([$e,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=c,this._notificationService=h,this._id=++YMe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=NW(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new mi(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=In._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=gt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(tn(this._overviewDomElement,"mousedown",g=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(g)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new AW(u,s),this._modifiedEditorState=new AW(u,s),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new YQ(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(MD,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Dc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new TW(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(c.onDidColorThemeChange(g=>{this._strategy&&this._strategy.applyColors(g)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=In._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const f=Xp.getDiffEditorContributions();for(const g of f)try{this._register(a.createInstance(g.ctor,this))}catch(p){Ze(p)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=uD(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const s=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+In.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(r=>{this._isHandlingScrollEvent||!r.scrollTopChanged&&!r.scrollLeftChanged&&!r.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(r=>{n.getModel()&&(r.hasChanged(43)&&this._updateDecorationsRunner.schedule(),r.hasChanged(130)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(r=>{r.tabSize&&this._updateDecorationsRunner.schedule()}));const s=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>s.set(!0))),this._register(n.onDidBlurEditorWidget(()=>s.set(!1))),this._register(n.onDidContentSizeChange(r=>{const o=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+In.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:o,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),n}_createInnerEditor(e,t,n,s){return e.createInstance(d1,t,n,s)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return dL.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=NW(e,this._options),n=t4e(this._options,t);this._options=t;const s=n.ignoreTrimWhitespace||n.renderIndicators,r=this._isVisible&&(n.maxComputationTime||n.maxFileSize);s?this._beginUpdateDecorations():r&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Dc(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new TW(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=In._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,s=!0){this._modifiedEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=In.ENTIRE_DIFF_OVERVIEW_WIDTH-2*In.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:In.ONE_OVERVIEW_WIDTH,right:n+In.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:In.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),In.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,s=this._options.maxFileSize*1024*1024,r=o=>{const a=o.getValueLength();return s===0||a<=s};if(!r(e)||!r(t)){(!In._equals(e.uri,this._lastOriginalWarning)||!In._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(_("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=o,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},o=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),s=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,s.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,s.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=ag.revealHorizontalRightPadding.defaultValue+In.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),s=this._strategy.layout();this._originalDomNode.style.width=s+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-s+"px",this._modifiedDomNode.style.left=s+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=In.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-In.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(In.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:s,height:t-n}),this._modifiedEditor.layout({width:e-s-(this._options.renderOverviewRuler?In.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),s=Math.max(0,e.height),r=Math.max(0,s-2*0),o=n>0?r/n:0,a=Math.max(0,Math.floor(e.height*o)),l=Math.floor(t*o);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let s=0,r=n.length-1;for(;s<r;){const o=Math.floor((s+r)/2),a=t(n[o]),l=o+1<=r?t(n[o+1]):1073741824;e<a?r=o-1:e>=l?s=o+1:(s=o,r=o)}return n[s]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=r?s+Math.min(a,o):s+o-r+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),s=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),r=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,o=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-s;return a<=o?n+Math.min(a,r):n+r-o+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};Lu.ONE_OVERVIEW_WIDTH=15;Lu.ENTIRE_DIFF_OVERVIEW_WIDTH=30;Lu.UPDATE_DIFF_DECORATIONS_DELAY=200;Lu=ZMe([sc(3,_g),sc(4,qu),sc(5,$e),sc(6,zt),sc(7,si),sc(8,oi),sc(9,zn),sc(10,mg),sc(11,U0)],Lu);class cJ extends te{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(DX)||g4).transparent(2),n=(e.getColor(kX)||p4).transparent(2),s=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,s}getEditorsDiffDecorations(e,t,n,s,r){r=r.sort((c,h)=>c.afterLineNumber-h.afterLineNumber),s=s.sort((c,h)=>c.afterLineNumber-h.afterLineNumber);const o=this._getViewZones(e,s,r,n),a=this._getOriginalEditorDecorations(e,t,n),l=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:o.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:o.modified}}}}class IW{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class Wd{constructor(e,t,n,s,r){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=s,this._modifiedEditor=r}static _getViewLineCount(e,t,n){const s=e.getModel(),r=e._getViewModel();if(s&&r){const o=f1(s,r,t,n);return o.endLineNumber-o.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(130).wrappingColumn!==-1,s=this._modifiedEditor.getOption(130).wrappingColumn!==-1,r=n||s,o=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,c={original:[],modified:[]};let h=0,u=0,d=0,f=0,g=0,p=0;const m=(L,S)=>L.afterLineNumber-S.afterLineNumber,v=(L,S)=>{if(S.domNode===null&&L.length>0){const k=L[L.length-1];if(k.afterLineNumber===S.afterLineNumber&&k.domNode===null){k.heightInLines+=S.heightInLines;return}}L.push(S)},b=new IW(this._modifiedForeignVZ),w=new IW(this._originalForeignVZ);let y=1,x=1;for(let L=0,S=this._lineChanges.length;L<=S;L++){const k=L<S?this._lineChanges[L]:null;k!==null?(d=k.originalStartLineNumber+(k.originalEndLineNumber>0?-1:0),f=k.modifiedStartLineNumber+(k.modifiedEndLineNumber>0?-1:0),u=k.originalEndLineNumber>0?Wd._getViewLineCount(this._originalEditor,k.originalStartLineNumber,k.originalEndLineNumber):0,h=k.modifiedEndLineNumber>0?Wd._getViewLineCount(this._modifiedEditor,k.modifiedStartLineNumber,k.modifiedEndLineNumber):0,g=Math.max(k.originalStartLineNumber,k.originalEndLineNumber),p=Math.max(k.modifiedStartLineNumber,k.modifiedEndLineNumber)):(d+=1e7+u,f+=1e7+h,g=d,p=f);let D=[],T=[];if(r){let U;k?k.originalEndLineNumber>0?U=k.originalStartLineNumber-y:U=k.modifiedStartLineNumber-x:U=o.getLineCount()-y;for(let ee=0;ee<U;ee++){const he=y+ee,fe=x+ee,Ce=a.getModelLineViewLineCount(he),Se=l.getModelLineViewLineCount(fe);Ce<Se?D.push({afterLineNumber:he,heightInLines:Se-Ce,domNode:null,marginDomNode:null}):Ce>Se&&T.push({afterLineNumber:fe,heightInLines:Ce-Se,domNode:null,marginDomNode:null})}k&&(y=(k.originalEndLineNumber>0?k.originalEndLineNumber:k.originalStartLineNumber)+1,x=(k.modifiedEndLineNumber>0?k.modifiedEndLineNumber:k.modifiedStartLineNumber)+1)}for(;b.current&&b.current.afterLineNumber<=p;){let U;b.current.afterLineNumber<=f?U=d-f+b.current.afterLineNumber:U=g;let ee=null;k&&k.modifiedStartLineNumber<=b.current.afterLineNumber&&b.current.afterLineNumber<=k.modifiedEndLineNumber&&(ee=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),D.push({afterLineNumber:U,heightInLines:b.current.height/t,domNode:null,marginDomNode:ee}),b.advance()}for(;w.current&&w.current.afterLineNumber<=g;){let U;w.current.afterLineNumber<=d?U=f-d+w.current.afterLineNumber:U=p,T.push({afterLineNumber:U,heightInLines:w.current.height/e,domNode:null}),w.advance()}if(k!==null&&rm(k)){const U=this._produceOriginalFromDiff(k,u,h);U&&D.push(U)}if(k!==null&&om(k)){const U=this._produceModifiedFromDiff(k,u,h);U&&T.push(U)}let N=0,$=0;for(D=D.sort(m),T=T.sort(m);N<D.length&&$<T.length;){const U=D[N],ee=T[$],he=U.afterLineNumber-d,fe=ee.afterLineNumber-f;he<fe?(v(c.original,U),N++):fe<he?(v(c.modified,ee),$++):U.shouldNotShrink?(v(c.original,U),N++):ee.shouldNotShrink?(v(c.modified,ee),$++):U.heightInLines>=ee.heightInLines?(U.heightInLines-=ee.heightInLines,$++):(ee.heightInLines-=U.heightInLines,N++)}for(;N<D.length;)v(c.original,D[N]),N++;for(;$<T.length;)v(c.modified,T[$]),$++}return{original:Wd._ensureDomNodes(c.original),modified:Wd._ensureDomNodes(c.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=hJ()),t))}}function wc(i,e,t,n,s){return{range:new F(i,e,t,n),options:s}}const ys={charDelete:ct.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:ct.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:ct.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:ct.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:ct.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:ct.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+ci.asClassName(QMe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:ct.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:ct.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+ci.asClassName(lJ),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:ct.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class Dc extends cJ{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Mn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Lu.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let s=Math.floor((e||.5)*n);const r=Math.floor(.5*n);return s=this._disableSash?r:s||r,n>Dc.MINIMUM_EDITOR_WIDTH*2?(s<Dc.MINIMUM_EDITOR_WIDTH&&(s=Dc.MINIMUM_EDITOR_WIDTH),s>n-Dc.MINIMUM_EDITOR_WIDTH&&(s=n-Dc.MINIMUM_EDITOR_WIDTH)):s=r,this._sashPosition!==s&&(this._sashPosition=s,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Lu.ENTIRE_DIFF_OVERVIEW_WIDTH:0),s=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=s/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const s=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new XMe(e,t,n,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=this._dataSource.getOriginalEditor(),r=String(this._removeColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(om(c)){o.decorations.push({range:new F(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:n?ys.lineDeleteWithSign:ys.lineDelete}),(!rm(c)||!c.charChanges)&&o.decorations.push(wc(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,ys.charDeleteWholeLine));const h=f1(a,l,c.originalStartLineNumber,c.originalEndLineNumber);if(o.overviewZones.push(new l1(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(om(u))if(t)for(let d=u.originalStartLineNumber;d<=u.originalEndLineNumber;d++){let f,g;d===u.originalStartLineNumber?f=u.originalStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.originalEndLineNumber?g=u.originalEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(wc(d,f,d,g,ys.charDelete))}else o.decorations.push(wc(u.originalStartLineNumber,u.originalStartColumn,u.originalEndLineNumber,u.originalEndColumn,ys.charDelete))}}return o}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(rm(c)){o.decorations.push({range:new F(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:n?ys.lineInsertWithSign:ys.lineInsert}),(!om(c)||!c.charChanges)&&o.decorations.push(wc(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,ys.charInsertWholeLine));const h=f1(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new l1(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(rm(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(wc(d,f,d,g,ys.charInsert))}else o.decorations.push(wc(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,ys.charInsert))}}return o}}Dc.MINIMUM_EDITOR_WIDTH=100;class XMe extends Wd{constructor(e,t,n,s,r){super(e,t,n,s,r)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class TW extends cJ{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,s){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new JMe(e,t,n,r,o,s).getViewZones()}_getOriginalEditorDecorations(e,t,n){const s=String(this._removeColor),r={decorations:[],overviewZones:[]},o=this._dataSource.getOriginalEditor(),a=o.getModel(),l=o._getViewModel();for(const c of e)if(om(c)){r.decorations.push({range:new F(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:ys.lineDeleteMargin});const h=f1(a,l,c.originalStartLineNumber,c.originalEndLineNumber);r.overviewZones.push(new l1(h.startLineNumber,h.endLineNumber,s))}return r}_getModifiedEditorDecorations(e,t,n){const s=this._dataSource.getModifiedEditor(),r=String(this._insertColor),o={decorations:[],overviewZones:[]},a=s.getModel(),l=s._getViewModel();for(const c of e)if(rm(c)){o.decorations.push({range:new F(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:n?ys.lineInsertWithSign:ys.lineInsert});const h=f1(a,l,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(o.overviewZones.push(new l1(h.startLineNumber,h.endLineNumber,r)),c.charChanges){for(const u of c.charChanges)if(rm(u))if(t)for(let d=u.modifiedStartLineNumber;d<=u.modifiedEndLineNumber;d++){let f,g;d===u.modifiedStartLineNumber?f=u.modifiedStartColumn:f=a.getLineFirstNonWhitespaceColumn(d),d===u.modifiedEndLineNumber?g=u.modifiedEndColumn:g=a.getLineLastNonWhitespaceColumn(d),o.decorations.push(wc(d,f,d,g,ys.charInsert))}else o.decorations.push(wc(u.modifiedStartLineNumber,u.modifiedStartColumn,u.modifiedEndLineNumber,u.modifiedEndColumn,ys.charInsert))}else o.decorations.push(wc(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,ys.charInsertWholeLine))}return o}layout(){return Math.max(5,this._decorationsLeft)}}class JMe extends Wd{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._originalModel=s.getModel(),this._renderIndicators=o,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const s=document.createElement("div");return s.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:s}}_produceModifiedFromDiff(e,t,n){const s=document.createElement("div");s.className=`view-lines line-delete ${of}`;const r=document.createElement("div");r.className="inline-deleted-margin-view-zone";const o={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:s,marginDomNode:r,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(o),o}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,s=t.get(43),r=t.get(29),o=s.typicalHalfwidthCharacterWidth,a=t.get(92),l=this._originalModel.mightContainNonBasicASCII(),c=this._originalModel.mightContainRTL(),h=t.get(58),d=t.get(129).decorationsWidth,f=t.get(104),g=t.get(87),p=t.get(82),m=t.get(44),v=this._lineBreaksComputer.finalize();let b=0;for(let w=0;w<this._pendingLineChange.length;w++){const y=this._pendingLineChange[w],x=this._pendingViewZones[w],L=x.domNode;Vn.applyFontInfoSlow(L,s);const S=x.marginDomNode;Vn.applyFontInfoSlow(S,s);const k=[];if(y.charChanges)for(const fe of y.charChanges)om(fe)&&k.push(new Lb(new F(fe.originalStartLineNumber,fe.originalStartColumn,fe.originalEndLineNumber,fe.originalEndColumn),"char-delete",0));const D=k.length>0,T=Nf(1e4);let N=0,$=0,U=null;for(let fe=y.originalStartLineNumber;fe<=y.originalEndLineNumber;fe++){const Ce=fe-y.originalStartLineNumber,Se=this._originalModel.getLineTokens(fe),me=Se.getLineContent(),kt=v[b++],ze=yr.filter(k,fe,1,me.length+1);if(kt){let Ge=0;for(const st of kt.breakOffsets){const Hi=Se.sliceAndInflate(Ge,st,0),Cn=me.substring(Ge,st);N=Math.max(N,this._renderOriginalLine($++,Cn,Hi,yr.extractWrapped(ze,Ge,st),D,l,c,s,r,h,d,f,g,p,m,n,T,S)),Ge=st}for(U||(U=[]);U.length<Ce;)U[U.length]=1;U[Ce]=kt.breakOffsets.length,x.heightInLines+=kt.breakOffsets.length-1;const Lt=document.createElement("div");Lt.className="line-delete",e.original.push({afterLineNumber:fe,afterColumn:0,heightInLines:kt.breakOffsets.length-1,domNode:hJ(),marginDomNode:Lt})}else N=Math.max(N,this._renderOriginalLine($++,me,Se,ze,D,l,c,s,r,h,d,f,g,p,m,n,T,S))}N+=a;const ee=T.build(),he=EW?EW.createHTML(ee):ee;if(L.innerHTML=he,x.minWidthInPx=N*o,U){const fe=y.originalEndLineNumber-y.originalStartLineNumber;for(;U.length<=fe;)U[U.length]=1}x.diff.viewLineCounts=U}e.original.sort((w,y)=>w.afterLineNumber-y.afterLineNumber)}_renderOriginalLine(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p,m,v,b){v.appendASCIIString('<div class="view-line'),r||v.appendASCIIString(" char-delete"),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*h)),v.appendASCIIString('px;width:1000000px;">');const w=Dr.isBasicASCII(t,o),y=Dr.containsRTL(t,w,a),x=wL(new hg(l.isMonospace&&!c,l.canUseHalfwidthRightwardsArrow,t,!1,w,y,0,n,s,m,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,d,f,g,p!==fr.OFF,null),v);if(v.appendASCIIString("</div>"),this._renderIndicators){const L=document.createElement("div");L.className=`delete-sign ${ci.asClassName(lJ)}`,L.setAttribute("style",`position:absolute;top:${e*h}px;width:${u}px;height:${h}px;right:0;`),b.appendChild(L)}return x.characterMapping.getAbsoluteOffset(x.characterMapping.length)}}function e4e(i,e){return Ss(i,e,["off","on","inherit"])}function rm(i){return i.modifiedEndLineNumber>0}function om(i){return i.originalEndLineNumber>0}function hJ(){const i=document.createElement("div");return i.className="diagonal-fill",i}function f1(i,e,t,n){const s=i.getLineCount();return t=Math.min(s,Math.max(1,t)),n=Math.min(s,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new F(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function NW(i,e){return{enableSplitViewResizing:Te(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Te(i.renderSideBySide,e.renderSideBySide),maxComputationTime:IN(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:IN(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Te(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Te(i.renderIndicators,e.renderIndicators),originalEditable:Te(i.originalEditable,e.originalEditable),diffCodeLens:Te(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Te(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:e4e(i.diffWordWrap,e.diffWordWrap)}}function t4e(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}ti((i,e)=>{const t=i.getColor(DX);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor(kX);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const s=i.getColor(bEe);s&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; }`);const r=i.getColor(vEe);r&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const o=i.getColor(Vw);o&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${o}; }`);const a=i.getColor(wEe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const l=i.getColor(Fb);l&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${l};
			}
		`);const c=i.getColor(Bb);c&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${c};
			}
		`);const h=i.getColor(Vb);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const u=i.getColor(yEe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${u} 12.5%,
			#0000 12.5%, #0000 50%,
			${u} 50%, ${u} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});const zw=bt("themeService"),zi=bt("keybindingService");class i4e extends te{constructor(){super(),this._onCodeEditorAdd=this._register(new z),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new z),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new z),this._onDiffEditorRemove=this._register(new z),this._onDecorationTypeRegistered=this._register(new z),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var n4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},s4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class r4e{constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){var e;this._refCount--,this._refCount===0&&((e=this._styleSheet.parentNode)===null||e===void 0||e.removeChild(this._styleSheet),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Fx(e,this._styleSheet)}}class o4e{constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){this._styleSheet.sheet.insertRule(e,t)}removeRulesContainingSelector(e){Fx(e,this._styleSheet)}}let L4=class extends i4e{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._globalStyleSheet=e||null,this._themeService=t}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=new o4e(Gr())),this._globalStyleSheet}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!C5(t))return this._getOrCreateGlobalStyleSheet();const n=e.getId();if(!this._editorStyleSheets.has(n)){const s=new r4e(this,n,Gr(t));this._editorStyleSheets.set(n,s)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,s,r){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(r),l={styleSheet:a,key:t,parentTypeKey:s,options:n||Object.create(null)};s?o=new a4e(this._themeService,a,l):o=new l4e(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}o.refCount++}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}resolveDecorationOptions(e,t){const n=this._decorationOptionProviders.get(e);if(!n)throw new Error("Unknown decoration type key: "+e);return n.getOptions(this,t)}};L4=n4e([s4e(1,oi)],L4);class a4e{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new RD(3,n,e),this._afterContentRules=new RD(4,n,e)}getOptions(e,t){const n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class l4e{constructor(e,t,n,s){this._disposables=new de,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;const r=u=>{const d=new RD(u,s,t);if(this._disposables.add(d),d.hasContent)return d.className},o=u=>{const d=new RD(u,s,t);return this._disposables.add(d),d.hasContent?{className:d.className,hasLetterSpacing:d.hasLetterSpacing}:null};this.className=r(0);const a=o(1);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=r(3),this.afterContentClassName=r(4),s.options.beforeInjectedText&&s.options.beforeInjectedText.contentText){const u=o(5);this.beforeInjectedText={content:s.options.beforeInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.beforeInjectedText.affectsLetterSpacing}}if(s.options.afterInjectedText&&s.options.afterInjectedText.contentText){const u=o(6);this.afterInjectedText={content:s.options.afterInjectedText.contentText,inlineClassName:u==null?void 0:u.className,inlineClassNameAffectsLetterSpacing:(u==null?void 0:u.hasLetterSpacing)||s.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=r(2);const l=s.options;this.isWholeLine=!!l.isWholeLine,this.stickiness=l.rangeBehavior;const c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,h=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof c<"u"||typeof h<"u")&&(this.overviewRuler={color:c||h,darkColor:h||c,position:l.overviewRulerLane||Ml.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const y_={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class RD{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let s=tI.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(s=s+" "+tI.getClassName(this._providerArgs.parentTypeKey,e)),this._className=s,this._unThemedSelector=tI.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(r=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,n,s;switch(this._ruleType){case 0:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),s=this.getCSSTextForModelDecorationClassName(e.dark);break;case 1:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),s=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case 2:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),s=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case 3:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case 4:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case 5:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case 6:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let o=!1;t.length>0&&(r.insertRule(`${this._unThemedSelector} {${t}}`,0),o=!0),n.length>0&&(r.insertRule(`.vs${this._unThemedSelector} {${n}}`,0),o=!0),s.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector} {${s}}`,0),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e<"u"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath<"u"&&t.push(mo(y_.contentIconPath,Gc(We.revive(e.contentIconPath)))),typeof e.contentText=="string"){const s=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(mo(y_.contentText,s))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath<"u"&&(t.push(mo(y_.gutterIconPath,Gc(We.revive(e.gutterIconPath)))),typeof e.gutterIconSize<"u"&&t.push(mo(y_.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(mo("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,n){const s=n.length;for(let r of t){const o=this.resolveValue(e[r]);typeof o=="string"&&n.push(mo(y_[r],o))}return n.length!==s}resolveValue(e){if(Jxe(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}class tI{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,n){let s=".monaco-editor ."+this.getClassName(e,n);return t&&(s=s+"."+this.getClassName(t,n)),n===3?s+="::before":n===4&&(s+="::after"),s}}var c4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},MW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let OD=class extends L4{constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===nt.http||r===nt.https)return EY(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};OD=c4e([MW(1,$e),MW(2,oi)],OD);var FP=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let h4e=0,RW=!1;function u4e(i){if(!i){if(RW)return;RW=!0}i2e(i||document.body)}let PD=class extends d1{constructor(e,t,n,s,r,o,a,l,c,h){const u=Object.assign({},t);u.ariaLabel=u.ariaLabel||oD.editorViewAccessibleLabel,u.ariaLabel=u.ariaLabel+";"+oD.accessibilityHelpMessage,super(e,u,{},n,s,r,o,l,c,h),a instanceof WQ?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,u4e(u.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let s="DYNAMIC_"+ ++h4e,r=xe.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),te.None;const t=e.id,n=e.label,s=xe.and(xe.equals("editorId",this.getId()),xe.deserialize(e.precondition)),r=e.keybindings,o=xe.and(s,xe.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),h=new de,u=this.getId()+":"+t;if(h.add(Nt.registerCommand(u,c)),a){let f={command:{id:u,title:n},when:s,group:a,order:l};h.add(ga.appendMenuItem(Ue.EditorContext,f))}if(Array.isArray(r))for(const f of r)h.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));let d=new eJ(u,n,n,s,c,this._contextKeyService);return this._actions[t]=d,h.add(pt(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof OD)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};PD=FP([Zt(2,zt),Zt(3,si),Zt(4,yn),Zt(5,$e),Zt(6,zi),Zt(7,oi),Zt(8,zn),Zt(9,sr)],PD);let A4=class extends PD{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=Object.assign({},t);aD(d,m,!1);const v=h.registerEditorContainer(e);typeof m.theme=="string"&&h.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!m.autoDetectHighContrast);let b=m.model;delete m.model,super(e,m,s,r,o,a,l,h,u,f),this._contextViewService=c,this._configurationService=d,this._standaloneThemeService=h,this._register(n),this._register(v);let w;if(typeof b>"u"?(w=uJ(g,p,m.value||"",m.language||vo.text,void 0),this._ownsModel=!0):(w=b,this._ownsModel=!1),this._attachModel(w),w){let y={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(y)}}dispose(){super.dispose()}updateOptions(e){aD(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};A4=FP([Zt(3,zt),Zt(4,si),Zt(5,yn),Zt(6,$e),Zt(7,zi),Zt(8,pg),Zt(9,zw),Zt(10,zn),Zt(11,Wi),Zt(12,sr),Zt(13,Ps),Zt(14,Fs)],A4);let E4=class extends Lu{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f,g,p){const m=Object.assign({},t);aD(d,m,!0);const v=h.registerEditorContainer(e);typeof m.theme=="string"&&h.setTheme(m.theme),typeof m.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!m.autoDetectHighContrast),super(e,m,{},p,l,r,s,c,h,u,f,g),this._contextViewService=a,this._configurationService=d,this._standaloneThemeService=h,this._register(n),this._register(v),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){aD(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(PD,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};E4=FP([Zt(3,zt),Zt(4,$e),Zt(5,zi),Zt(6,pg),Zt(7,qu),Zt(8,si),Zt(9,zw),Zt(10,zn),Zt(11,Wi),Zt(12,mg),Zt(13,U0),Zt(14,_g)],E4);function uJ(i,e,t,n,s){if(t=t||"",!n){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),OW(i,t,e.createByFilepathOrFirstLine(s||null,o),s)}return OW(i,t,e.create(n),s)}function OW(i,e,t,n){return i.createModel(e,t,n)}const sd=Object.prototype.hasOwnProperty;class d4e{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Cu,0),this._register(z0,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Cu}}class g1 extends te{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,g1.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new d4e,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(af.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){g1.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},lTe();const e=af.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),En.as(M0.Configuration).registerOverrideIdentifiers(af.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;sd.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)jy({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)jy({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)jy({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);dxe(l)||jy({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){Ze(l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);let o=r!==null&&r.length>0;if(!(o&&r[0]===null)){let a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return sd.call(this._mimeTypesMap,e)?!0:sd.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return sd.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>sd.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>sd.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===Cu?Cu:sd.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=cTe(e,t);return this.extractModeIds(n.join(","))}}g1.instanceCount=0;class PW{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new z({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class p1 extends te{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new z),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new z({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,p1.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new g1(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){p1.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return YM(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return YM(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new PW(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new PW(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||Cu;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||Cu;this._onDidEncounterLanguage.fire(t)}}}p1.instanceCount=0;var f4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let I4=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._modeService=n,this._logService=s,this._hashTable=new yc,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const s=this._modeService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata,this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Pr.getForeground(o)}, fontStyle ${Pr.getFontStyle(o).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;c>0&&this._logService.getLevel()===aa.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof h>"u")o=2147483647;else{if(o=0,typeof h.italic<"u"){const u=(h.italic?1:0)<<11;o|=u|1}if(typeof h.bold<"u"){const u=(h.bold?2:0)<<11;o|=u|2}if(typeof h.underline<"u"){const u=(h.underline?4:0)<<11;o|=u|4}if(h.foreground){const u=h.foreground<<14;o|=u|8}o===0&&(o=2147483647)}}else this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o),this._logService.getLevel()===aa.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Pr.getForeground(o)}, fontStyle ${Pr.getFontStyle(o).toString(2)}`)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};I4=f4e([iI(1,oi),iI(2,Fs),iI(3,th)],I4);function g4e(i,e,t){const n=i.data,s=i.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,c=0;for(;a<s;){const h=a;let u=Math.min(h+r,s);if(u<s){let w=u;for(;w-1>h&&n[5*w]===0;)w--;if(w-1===h){let y=u;for(;y+1<s&&n[5*y]===0;)y++;u=y}else u=w}let d=new Uint32Array((u-h)*4),f=0,g=0,p=0,m=0,v=0;for(;a<u;){const w=5*a,y=n[w],x=n[w+1],L=l+y|0,S=y===0?c+x|0:x,k=n[w+2],D=n[w+3],T=n[w+4],N=e.getMetadata(D,T,t);N!==2147483647&&(g===0&&(g=L),p===L&&v>S&&(e.warnOverlappingSemanticTokens(L,S+1),m<S?d[f-4+2]=S:f-=4),d[f]=L-g,d[f+1]=S,d[f+2]=S+k,d[f+3]=N,f+=4,p=L,m=S,v=S+k),l=L,c=S,a++}f!==d.length&&(d=d.subarray(0,f));const b=new fD(g,new dD(d));o.push(b)}return o}class p4e{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}class yc{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=yc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<yc._SIZES.length?2/3*this._currentLength:0),this._elements=[],yc._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=yc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<yc._SIZES.length?2/3*this._currentLength:0),this._elements=[],yc._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new p4e(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}yc._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function m4e(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],s=i[e+1],r=i[e+2],o=i[e+3];i[e+0]=o,i[e+1]=r,i[e+2]=s,i[e+3]=n}}function _4e(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return XZ()||m4e(e),uL.wrap(e)}function dJ(i){const e=new Uint32Array(b4e(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return _4e(e)}function b4e(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var Au=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function KL(i){return i&&!!i.data}function fJ(i){return i&&Array.isArray(i.edits)}class v4e{constructor(e,t){this.provider=e,this.tokens=t}}function gJ(i){return Mm.has(i)}function w4e(i){const e=Mm.orderedGroups(i);return e.length>0?e[0]:[]}function pJ(i,e,t,n){return Au(this,void 0,void 0,function*(){const s=w4e(i),r=yield Promise.all(s.map(o=>Au(this,void 0,void 0,function*(){let a;try{a=yield o.provideDocumentSemanticTokens(i,o===e?t:null,n)}catch(l){Wo(l),a=null}return(!a||!KL(a)&&!fJ(a))&&(a=null),new v4e(o,a)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}function y4e(i){const e=Mm.orderedGroups(i);return e.length>0?e[0]:null}class C4e{constructor(e,t){this.provider=e,this.tokens=t}}function mJ(i){const e=QY.orderedGroups(i);return e.length>0?e[0]:[]}function _J(i,e,t){return Au(this,void 0,void 0,function*(){const n=mJ(i),s=yield Promise.all(n.map(r=>Au(this,void 0,void 0,function*(){let o;try{o=yield r.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){Wo(a),o=null}return(!o||!KL(o))&&(o=null),new C4e(r,o)})));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null})}Nt.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>Au(void 0,void 0,void 0,function*(){const[t]=e;Pi(t instanceof We);const n=i.get(Ps).getModel(t);if(!n)return;const s=y4e(n);return s?s[0].getLegend():i.get(yn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Nt.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>Au(void 0,void 0,void 0,function*(){const[t]=e;Pi(t instanceof We);const n=i.get(Ps).getModel(t);if(!n)return;if(!gJ(n))return i.get(yn).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const s=yield pJ(n,null,null,ei.None);if(!s)return;const{provider:r,tokens:o}=s;if(!o||!KL(o))return;const a=dJ({id:0,type:"full",data:o.data});return o.resultId&&r.releaseDocumentSemanticTokens(o.resultId),a}));Nt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>Au(void 0,void 0,void 0,function*(){const[t,n]=e;Pi(t instanceof We);const s=i.get(Ps).getModel(t);if(!s)return;const r=mJ(s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!F.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const o=yield _J(s,F.lift(n),ei.None);if(o)return o.provider.getLegend()}));Nt.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>Au(void 0,void 0,void 0,function*(){const[t,n]=e;Pi(t instanceof We),Pi(F.isIRange(n));const s=i.get(Ps).getModel(t);if(!s)return;const r=yield _J(s,F.lift(n),ei.None);if(!(!r||!r.tokens))return dJ({id:0,type:"full",data:r.tokens.data})}));var S4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function dh(i){return i.toString()}function FW(i){const e=new fL,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class x4e{constructor(e,t,n){this._modelEventListeners=new de,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const D4e=Is||ut?1:2;class k4e{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let FD=class Z_ extends te{constructor(e,t,n,s,r,o,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=s,this._undoRedoService=r,this._modeService=o,this._languageConfigurationService=a,this._onModelAdded=this._register(new z),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new z),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new z),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new A4e(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new L4e(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let s=Yn.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(s=f),s<1&&(s=1)}let r=s;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(r=f),r<1&&(r=1)}let o=Yn.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=D4e;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Yn.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let h=Yn.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(h=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Yn.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Yn.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:s,indentSize:r,insertSpaces:o,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:bo===3||bo===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let s=this._modelCreationOptionsByLanguageAndResource[e+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),o=this._getEOL(t,e);s=Z_._readModelOptions({editor:r,eol:o},n),this._modelCreationOptionsByLanguageAndResource[e+t]=s}return s}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n],o=this._models[r],a=o.model.getLanguageId(),l=o.model.uri,c=e[a+l],h=this.getCreationOptions(a,l,o.model.isForSimpleWidget);Z_._setModelOptionsForModel(o.model,h,c)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&ua(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(dh(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(dh(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(dh(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=new Zr(e,r,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(dh(n))){const c=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),u=FW(o)===c.sha1;if(u||c.sharesUndoRedoStack){for(const d of h.past)bc(d)&&d.matchesResource(n)&&d.setModel(o);for(const d of h.future)bc(d)&&d.matchesResource(n)&&d.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,d=>bc(d)&&d.matchesResource(n)),u&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=dh(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new x4e(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}createModel(e,t,n,s=!1){let r;return t?(r=this._createModelData(e,t.languageId,n,s),this.setMode(r.model,t)):r=this._createModelData(e,z0,n,s),this._onModelAdded.fire(r.model),r.model}setMode(e,t){if(!t)return;const n=this._models[dh(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=dh(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===nt.file||e.scheme===nt.vscodeRemote||e.scheme===nt.userData||e.scheme===nt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=dh(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const c of l.past)bc(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri));for(const c of l.future)bc(c)&&c.matchesResource(e.uri)&&(r=!0,o+=c.heapSize(e.uri),c.setModel(e.uri))}}const a=Z_.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(r)if(!s&&o>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>bc(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new k4e(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,FW(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);Z_._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldModeId:n})}};FD.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;FD=S4e([rd(0,Wi),rd(1,pQ),rd(2,oi),rd(3,th),rd(4,Bw),rd(5,Fs),rd(6,Ow)],FD);const bJ="editor.semanticHighlighting";function BW(i,e,t){var n;const s=(n=t.getValue(bJ,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof s=="boolean"?s:e.getColorTheme().semanticHighlighting}class L4e extends te{constructor(e,t,n,s){super(),this._watchers=Object.create(null),this._semanticStyling=s;const r=l=>{this._watchers[l.uri.toString()]=new zd(l,t,this._semanticStyling)},o=(l,c)=>{c.dispose(),delete this._watchers[l.uri.toString()]},a=()=>{for(let l of e.getModels()){const c=this._watchers[l.uri.toString()];BW(l,t,n)?c||r(l):c&&o(l,c)}};this._register(e.onModelAdded(l=>{BW(l,t,n)&&r(l)})),this._register(e.onModelRemoved(l=>{const c=this._watchers[l.uri.toString()];c&&o(l,c)})),this._register(n.onDidChangeConfiguration(l=>{l.affectsConfiguration(bJ)&&a()})),this._register(t.onDidColorThemeChange(a))}}class A4e extends te{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new I4(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class E4e{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class zd extends te{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new mi(()=>this._fetchDocumentSemanticTokensNow(),zd.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const s=()=>{lt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const r of Mm.all(e))typeof r.onDidChange=="function"&&this._documentProvidersChangeListeners.push(r.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};s(),this._register(Mm.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(r=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!gJ(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Ra,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=pJ(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const r=[],o=this._model.onDidChangeContent(a=>{r.push(a)});s.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,r);else{const{provider:l,tokens:c}=a,h=this._semanticStyling.get(l);this._setDocumentSemanticTokens(l,c||null,h,r)}},a=>{a&&(ju(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||Ze(a),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),r.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}_setDocumentSemanticTokens(e,t,n,s){const r=this._currentDocumentResponse,o=()=>{s.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),o();return}if(fJ(t)){if(!r){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(const d of t.edits)a+=(d.data?d.data.length:0)-d.deleteCount;const l=r.data,c=new Uint32Array(l.length+a);let h=l.length,u=c.length;for(let d=t.edits.length-1;d>=0;d--){const f=t.edits[d],g=h-(f.start+f.deleteCount);g>0&&(zd._copy(l,h-g,c,u-g,g),u-=g),f.data&&(zd._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),h=f.start}h>0&&zd._copy(l,0,c,0,h),t={resultId:t.resultId,data:c}}}if(KL(t)){this._currentDocumentResponse=new E4e(e,t.resultId,t.data);const a=g4e(t,n,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const h of l.changes)c.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);o()}}zd.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class I4e{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function T4e(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,s=i.length;n<s;n++){let r=i[n],o=-1;if(typeof r.fontStyle=="string"){o=0;let c=r.fontStyle.split(" ");for(let h=0,u=c.length;h<u;h++)switch(c[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new I4e(r.token||"",n,o,a,l)}return e}function N4e(i,e){i.sort((h,u)=>{let d=F4e(h.token,u.token);return d!==0?d:h.index-u.index});let t=0,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){let h=i.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(s=h.background)}let r=new R4e;for(let h of e)r.getId(h);let o=r.getId(n),a=r.getId(s),l=new BP(t,o,a),c=new VP(l);for(let h=0,u=i.length;h<u;h++){let d=i[h];c.insert(d.token,d.fontStyle,r.getId(d.foreground),r.getId(d.background))}return new vJ(r,c)}const M4e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class R4e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(M4e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=Z.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class vJ{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(T4e(e),t)}static createFromParsedTokenTheme(e,t){return N4e(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let s=this._match(t),r=P4e(t);n=(s.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const O4e=/\b(comment|string|regex|regexp)\b/;function P4e(i){let e=i.match(O4e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function F4e(i,e){return i<e?-1:i>e?1:0}class BP{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new BP(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class VP{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));let r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}let r=e.indexOf("."),o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new VP(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function B4e(i){let e=[];for(let t=1,n=i.length;t<n;t++){let s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const V4e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[jr]:"#FFFFFE",[nu]:"#000000",[vP]:"#E5EBF1",[WL]:"#D3D3D3",[zL]:"#939393",[xX]:"#ADD6FF4D"}},W4e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[jr]:"#1E1E1E",[nu]:"#D4D4D4",[vP]:"#3A3D41",[WL]:"#404040",[zL]:"#707070",[xX]:"#ADD6FF26"}},z4e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[jr]:"#000000",[nu]:"#FFFFFF",[WL]:"#FFFFFF",[zL]:"#FFFFFF"}};function H4e(){const i=new z,e=FMe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=r=>{let o=r.defaults;for(;ci.isThemeIcon(o);){const l=e.getIcon(o.id);if(!l)return;o=l.defaults}const a=o.fontId;if(a){const l=e.getIconFont(a);if(l)return t[a]=l,`.codicon-${r.id}:before { content: '${o.fontCharacter}'; font-family: ${v7(a)}; }`}return`.codicon-${r.id}:before { content: '${o.fontCharacter}'; }`},s=[];for(let r of e.getIcons()){const o=n(r);o&&s.push(o)}for(let r in t){const a=t[r].definition.src.map(l=>`${Gc(l.location)} format('${l.format}')`).join(", ");s.push(`@font-face { src: ${a}; font-family: ${v7(r)}; font-display: block; }`)}return s.join(`
`)}}}const Hd="vs",BD="vs-dark",am="hc-black",U4e=En.as(dX.ColorContribution),$4e=En.as(HQ.ThemingContribution);class wJ{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(CS(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,Z.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=T4(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,Z.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=U4e.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Hd:return fa.LIGHT;case am:return fa.HIGH_CONTRAST;default:return fa.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let r=T4(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=vJ.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Pr.getForeground(r),a=Pr.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function CS(i){return i===Hd||i===BD||i===am}function T4(i){switch(i){case Hd:return V4e;case BD:return W4e;case am:return z4e}}function nI(i){let e=T4(i);return new wJ(i,e)}class j4e extends te{constructor(){super(),this._onColorThemeChange=this._register(new z),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Hd,nI(Hd)),this._knownThemes.set(BD,nI(BD)),this._knownThemes.set(am,nI(am));const e=H4e();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Hd),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),lxe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return C5(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Gr(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),te.None}_registerShadowDomContainer(e){const t=Gr(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!CS(t.base)&&!CS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new wJ(e,t)),CS(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Hd),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(am):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};$4e.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(B4e(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Li.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var q4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},G4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const jb="data-keybinding-context";let WP=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class Gm extends WP{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}Gm.INSTANCE=new Gm;class m1 extends WP{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Kp.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===6){const r=Array.from(ht.map(this._values,([o])=>o));this._values.clear(),n.fire(new WW(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...ht.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new WW(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(m1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(m1._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}m1._keyPrefix="config.";class K4e{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class VW{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class WW{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class Z4e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class yJ{constructor(e){this._onDidChangeContext=new Tx({merge:t=>new Z4e(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new K4e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Y4e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Qp.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new VW(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new VW(e))}getContext(e){return this._isDisposed?Gm.INSTANCE:this.getContextValuesContainer(Q4e(e))}}let N4=class extends yJ{constructor(e){super(0),this._contexts=new Map,this._toDispose=new de,this._lastContextId=0;const t=new m1(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Gm.INSTANCE:this._contexts.get(e)||Gm.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new WP(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};N4=q4e([G4e(0,Wi)],N4);class Y4e extends yJ{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Er,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(jb)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(jb,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(jb),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?Gm.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Q4e(i){for(;i;){if(i.hasAttribute(jb)){const e=i.getAttribute(jb);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Nt.registerCommand(BLe,function(i,e,t){i.get($e).createKey(String(e),t)});Nt.registerCommand({id:"getContextKeyInfo",handler(){return[...De.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:_("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Nt.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of De.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function zW(i){let e=i.definition;for(;e instanceof be;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Nn;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s})(Nn||(Nn={}));var qh;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(qh||(qh={}));function Lp(i,e,t){const n=t.mode===qh.ALIGN?t.offset:t.offset+t.size,s=t.mode===qh.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}class Km extends te{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=te.None,this.toDisposeOnSetContainer=te.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ue(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,xs(this.view),this.setContainer(e,t),this._register(pt(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=ue(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=X4e,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ue("slot"))}else this.container.appendChild(this.view);const s=new de;Km.BUBBLE_UP_EVENTS.forEach(r=>{s.add(tn(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),Km.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(tn(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),Pn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",gr(this.view),this.toDisposeOnClean=e.render(this.view)||te.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(vu&&lL.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(LY(e)){let u=Rn(e);t={top:u.top,left:u.left,width:u.width,height:u.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=uo(this.view),s=DM(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:r===0?0:1},d={offset:t.left,size:t.width,position:o===0?0:1,mode:qh.ALIGN};l=Lp(window.innerHeight,s,u)+window.pageYOffset,Nn.intersects({start:l,end:l+s},{start:u.offset,end:u.offset+u.size})&&(d.mode=qh.AVOID),c=Lp(window.innerWidth,n,d)}else{const u={offset:t.left,size:t.width,position:o===0?0:1},d={offset:t.top,size:t.height,position:r===0?0:1,mode:qh.ALIGN};c=Lp(window.innerWidth,n,u),Nn.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(d.mode=qh.AVOID),l=Lp(window.innerHeight,s,d)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Rn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Rn(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Rn(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),xs(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!xl(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}Km.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];Km.BUBBLE_DOWN_EVENTS=["click"];let X4e=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function CJ(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}const zP=J4e.bind(void 0,!0);function J4e(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=D5(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function e3e(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function t3e(i,e){return M4(i.toLowerCase(),e.toLowerCase(),0,0)}function M4(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=M4(i,e,t+1,n+1))?xJ({start:n,end:n+1},s):null}return M4(i,e,t,n+1)}function HP(i){return 97<=i&&i<=122}function ZL(i){return 65<=i&&i<=90}function UP(i){return 48<=i&&i<=57}function i3e(i){return i===32||i===9||i===10||i===13}const n3e=new Set;"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".split("").forEach(i=>n3e.add(i.charCodeAt(0)));function SJ(i){return HP(i)||ZL(i)||UP(i)}function xJ(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function DJ(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(ZL(n)||UP(n)||t>0&&!SJ(i.charCodeAt(t-1)))return t}return i.length}function R4(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=R4(i,e,t+1,n+1);!s&&(r=DJ(e,r))<e.length;)s=R4(i,e,t+1,r),r++;return s===null?null:xJ({start:n,end:n+1},s)}}function s3e(i){let e=0,t=0,n=0,s=0,r=0;for(let h=0;h<i.length;h++)r=i.charCodeAt(h),ZL(r)&&e++,HP(r)&&t++,SJ(r)&&n++,UP(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function r3e(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function o3e(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function a3e(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),ZL(n)&&e++,HP(n)&&t++,i3e(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function kJ(i,e){if(!e||(e=e.trim(),e.length===0)||!a3e(i)||e.length>60)return null;const t=s3e(e);if(!o3e(t)){if(!r3e(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=R4(i,e,0,s))===null;)s=DJ(e,s+1);return n}const l3e=CJ(zP,kJ,e3e),c3e=CJ(zP,kJ,t3e),HW=new E5(1e4);function UW(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=HW.get(i);n||(n=new RegExp(uxe(i),"i"),HW.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?c3e(i,e):l3e(i,e)}function h3e(i,e,t,n,s,r){const o=Math.min(13,i.length);for(;t<o;t++){const a=_1(i,e,t,n,s,r,!1);if(a)return a}return[0,r]}function $P(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const Gh=128;function jP(){const i=[],e=[];for(let t=0;t<=Gh;t++)e[t]=0;for(let t=0;t<=Gh;t++)i.push(e.slice(0));return i}function LJ(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const AJ=LJ(2*Gh),O4=LJ(2*Gh),rc=jP(),od=jP(),Jy=jP();function eC(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!wb(t)}}function $W(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function SS(i,e,t){return e[i]!==t[i]}function u3e(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(AJ[e]=s),e+=1),s+=1;return e===t}var ma;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(ma||(ma={}));function _1(i,e,t,n,s,r,o){const a=i.length>Gh?Gh:i.length,l=n.length>Gh?Gh:n.length;if(t>=a||r>=l||a-t>l-r||!u3e(e,t,a,s,r,l,!0))return;d3e(a,l,t,r,e,s);let c=1,h=1,u=t,d=r;const f=[!1];for(c=1,u=t;u<a;c++,u++){const b=AJ[u],w=O4[u],y=u+1<a?O4[u+1]:l;for(h=b-r+1,d=b;d<y;h++,d++){let x=Number.MIN_SAFE_INTEGER,L=!1;d<=w&&(x=f3e(i,e,u,t,n,s,d,l,r,rc[c-1][h-1]===0,f));let S=0;x!==Number.MAX_SAFE_INTEGER&&(L=!0,S=x+od[c-1][h-1]);const k=d>b,D=k?od[c][h-1]+(rc[c][h-1]>0?-5:0):0,T=d>b+1&&rc[c][h-1]>0,N=T?od[c][h-2]+(rc[c][h-2]>0?-5:0):0;if(T&&(!k||N>=D)&&(!L||N>=S))od[c][h]=N,Jy[c][h]=3,rc[c][h]=0;else if(k&&(!L||D>=S))od[c][h]=D,Jy[c][h]=2,rc[c][h]=0;else if(L)od[c][h]=S,Jy[c][h]=1,rc[c][h]=rc[c-1][h-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o)return;c--,h--;const g=[od[c][h],r];let p=0,m=0;for(;c>=1;){let b=h;do{const w=Jy[c][b];if(w===3)b=b-2;else if(w===2)b=b-1;else break}while(b>=1);p>1&&e[t+c-1]===s[r+h-1]&&!SS(b+r-1,n,s)&&p+1>rc[c][b]&&(b=h),b===h?p++:p=1,m||(m=b),c--,h=b-1,g.push(h)}l===a&&(g[0]+=2);const v=m-a;return g[0]-=v,g}function d3e(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(O4[o]=a,o--),a--}function f3e(i,e,t,n,s,r,o,a,l,c,h){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,d=!1;return o===t-n?u=i[t]===s[o]?7:5:SS(o,s,r)&&(o===0||!SS(o-1,s,r))?(u=i[t]===s[o]?7:5,d=!0):eC(r,o)&&(o===0||!eC(r,o-1))?u=5:(eC(r,o-1)||$W(r,o-1))&&(u=5,d=!0),u>1&&t===n&&(h[0]=!0),d||(d=SS(o,s,r)||eC(r,o-1)||$W(r,o-1)),t===n?o>l&&(u-=d?3:5):c?u+=d?2:0:u+=d?0:1,o+1===a&&(u-=d?3:5),u}function g3e(i,e,t,n,s,r,o){return p3e(i,e,t,n,s,r,!0,o)}function p3e(i,e,t,n,s,r,o,a){let l=_1(i,e,t,n,s,r,a);if(l&&!o)return l;if(i.length>=3){const c=Math.min(7,i.length-1);for(let h=t+1;h<c;h++){const u=m3e(i,h);if(u){const d=_1(u,u.toLowerCase(),t,n,s,r,a);d&&(d[0]-=3,(!l||d[0]>l[0])&&(l=d))}}}return l}function m3e(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const qb="$(",qP=new RegExp(`\\$\\(${Zs.iconNameExpression}(?:${Zs.iconModifierExpression})?\\)`,"g"),_3e=new RegExp(`(\\\\)?${qP.source}`,"g");function b3e(i){return i.replace(_3e,(e,t)=>t?e:`\\${e}`)}const v3e=new RegExp(`\\\\${qP.source}`,"g");function w3e(i){return i.replace(v3e,e=>`\\${e}`)}const y3e=new RegExp(`(\\s)?(\\\\)?${qP.source}(\\s)?`,"g");function C3e(i){return i.indexOf(qb)===-1?i:i.replace(y3e,(e,t,n,s)=>n?e:t||s||"")}function tC(i){const e=i.indexOf(qb);return e===-1?{text:i}:S3e(i,e)}function S3e(i,e){const t=[];let n="";function s(d){if(d){n+=d;for(const f of d)t.push(a)}}let r=-1,o="",a=0,l,c,h=e;const u=i.length;for(s(i.substr(0,e));h<u;){if(l=i[h],c=i[h+1],l===qb[0]&&c===qb[1])r=h,s(o),o=qb,h++;else if(l===")"&&r!==-1){const d=h-r+1;a+=d,r=-1,o=""}else r!==-1?/^[a-z0-9\-]$/i.test(l)?o+=l:(s(o),r=-1,o=""):s(l);h++}return s(o),{text:n,iconOffsets:t}}function iC(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return UW(i,n,t);const r=TY(n," "),o=n.length-r.length,a=UW(i,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}const P4=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,sI=/(&amp;)?(&amp;)([^\s&])/g,EJ=zo("menu-selection",be.check),IJ=zo("menu-submenu",be.chevronRight);var VD;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(VD||(VD={}));let TJ=class Y_ extends Zc{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ut||Is?[10]:[]],keyDown:!0}}),this.menuElement=s,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new de),this.initializeStyleSheet(e),this._register(At.addTarget(s)),ne(s,Ae.KEY_DOWN,a=>{new ui(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(ne(s,Ae.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){It.stop(a,!0);const c=this.mnemonics.get(l);if(c.length===1&&(c[0]instanceof jW&&c[0].container&&this.focusItemByElement(c[0].container),c[0].onClick(a)),c.length>1){const h=c.shift();h&&h.container&&(this.focusItemByElement(h.container),c.push(h)),this.mnemonics.set(l,c)}}})),Is&&this._register(ne(s,Ae.KEY_DOWN,a=>{const l=new ui(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),It.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),It.stop(a,!0))})),this._register(ne(this.domNode,Ae.MOUSE_OUT,a=>{let l=a.relatedTarget;xl(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(ne(this.actionsList,Ae.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!xl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}})),this._register(At.addTarget(this.actionsList)),this._register(ne(this.actionsList,jt.Tap,a=>{let l=a.initialTarget;if(!(!l||!xl(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const c=this.focusedItem;this.setFocusedItem(l),c!==this.focusedItem&&this.updateFocus()}}}));let r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new jL(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this._register(ne(s,jt.Change,a=>{It.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(ne(o,Ae.MOUSE_UP,a=>{a.preventDefault()})),s.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof rI)).forEach((a,l,c)=>{a.updatePositionInSet(l+1,c.length)})}initializeStyleSheet(e){C5(e)?(this.styleSheet=Gr(e),this.styleSheet.textContent=qW):(Y_.globalStyleSheet||(Y_.globalStyleSheet=Gr(),Y_.globalStyleSheet.textContent=qW),this.styleSheet=Y_.globalStyleSheet)}style(e){const t=this.getContainer(),n=e.foregroundColor?`${e.foregroundColor}`:"",s=e.backgroundColor?`${e.backgroundColor}`:"",r=e.borderColor?`1px solid ${e.borderColor}`:"",o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=r,this.domNode.style.color=n,this.domNode.style.backgroundColor=s,t.style.boxShadow=o,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof F4||a instanceof rI)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof da)return new rI(t.context,e,{icon:!0});if(e instanceof eP){const s=new jW(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new F4(t.context,e,s);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}};class F4 extends lf{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let s=this.getAction().label;if(s){let r=P4.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new mi(()=>{this.element&&(this._register(ne(this.element,Ae.MOUSE_UP,s=>{if(It.stop(s,!0),Es){if(new Ur(s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(ne(this.element,Ae.CONTEXT_MENU,s=>{It.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=se(this.element,ue("a.action-menu-item")),this._action.id===da.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=se(this.item,ue("span.menu-item-check"+EJ.cssSelector)),this.check.setAttribute("role","none"),this.label=se(this.item,ue("span.action-label")),this.options.label&&this.options.keybinding&&(se(this.item,ue("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){Pn(this.label);let e=C3e(this.getAction().label);if(e){const t=x3e(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=P4.exec(e);if(n){e=S5(e),sI.lastIndex=0;let s=sI.exec(e);for(;s&&s[1];)s=sI.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(TY(r(e.substr(0,s.index))," "),ue("u",{"aria-hidden":"true"},s[3]),hxe(r(e.substr(s.index+s[0].length))," ")):this.label.innerText=r(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=_({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=s)}style(e){this.menuStyle=e,this.applyStyle()}}class jW extends F4{constructor(e,t,n,s){super(e,e,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new de),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:VD.Right,this.showScheduler=new mi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new mi(()=>{this.element&&!xl(qp(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=se(this.item,ue("span.submenu-indicator"+IJ.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ne(this.element,Ae.KEY_UP,t=>{let n=new ui(t);(n.equals(17)||n.equals(3))&&(It.stop(t,!0),this.createSubmenu(!0))})),this._register(ne(this.element,Ae.KEY_DOWN,t=>{let n=new ui(t);qp()===this.item&&(n.equals(17)||n.equals(3))&&It.stop(t,!0)})),this._register(ne(this.element,Ae.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ne(this.element,Ae.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ne(this.element,Ae.FOCUS_OUT,t=>{this.element&&!xl(qp(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){It.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=Lp(e.width,t.width,{position:s===VD.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=Lp(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=se(this.element,ue("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new TJ(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new ML],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Wt(window.innerWidth,window.innerHeight),Wt.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${l-o.left}px`,this.submenuContainer.style.top=`${a-o.top}px`,this.submenuDisposables.add(ne(this.submenuContainer,Ae.KEY_UP,c=>{new ui(c).equals(15)&&(It.stop(c,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ne(this.submenuContainer,Ae.KEY_DOWN,c=>{new ui(c).equals(15)&&It.stop(c,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class rI extends PP{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function x3e(i){const e=P4,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}let qW=`
.monaco-menu {
	font-size: 13px;

}

${zW(EJ)}
${zW(IJ)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: #DDD 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: #DDD 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: #DDD 6px 6px 6px -6px inset;
}

/* ---------- Default Style ---------- */

:host-context(.vs) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(100, 100, 100, .4);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(121, 121, 121, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider {
	background: rgba(111, 195, 223, .6);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(100, 100, 100, .7);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider:hover {
	background: rgba(111, 195, 223, .8);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(0, 0, 0, .6);
}
:host-context(.vs-dark) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(191, 191, 191, .4);
}
:host-context(.hc-black) .monaco-scrollable-element > .scrollbar > .slider.active {
	background: rgba(111, 195, 223, 1);
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.left {
	box-shadow: #000 6px 0 6px -6px inset;
}

:host-context(.vs-dark) .monaco-scrollable-element .shadow.top.left {
	box-shadow: #000 6px 6px 6px -6px inset;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.left {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-scrollable-element .shadow.top.left {
	box-shadow: none;
}
`;function Qo(i,e){const t=Object.create(null);for(let n in e){const s=e[n];s&&(t[n]=hc(s,i))}return t}function GP(i,e,t){function n(){const s=Qo(i.getColorTheme(),e);typeof t=="function"?t(s):t.style(s)}return n(),i.onDidColorThemeChange(n)}function D3e(i,e,t){return GP(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||Ob,badgeForeground:(t==null?void 0:t.badgeForeground)||Pb,badgeBorder:Vi},i)}function zf(i,e,t){return GP(e,Object.assign(Object.assign({},YL),t||{}),i)}const YL={listFocusBackground:CEe,listFocusForeground:SEe,listFocusOutline:xEe,listActiveSelectionBackground:ou,listActiveSelectionForeground:au,listActiveSelectionIconForeground:pS,listFocusAndSelectionBackground:ou,listFocusAndSelectionForeground:au,listInactiveSelectionBackground:DEe,listInactiveSelectionIconForeground:LEe,listInactiveSelectionForeground:kEe,listInactiveFocusBackground:AEe,listInactiveFocusOutline:EEe,listHoverBackground:IEe,listHoverForeground:TEe,listDropBackground:NEe,listSelectionOutline:Ns,listHoverOutline:Ns,listFilterWidgetBackground:MEe,listFilterWidgetOutline:REe,listFilterWidgetNoMatchesOutline:OEe,listMatchesShadow:zm,treeIndentGuidesStroke:PEe,tableColumnsBorder:FEe},k3e={shadowColor:zm,borderColor:BEe,foregroundColor:VEe,backgroundColor:WEe,selectionForegroundColor:zEe,selectionBackgroundColor:HEe,selectionBorderColor:UEe,separatorColor:$Ee};function L3e(i,e,t){return GP(e,Object.assign(Object.assign({},k3e),t),i)}class A3e{constructor(e,t,n,s,r){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.themeService=r,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,s=LY(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{let o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(ue(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",ne(this.block,Ae.MOUSE_DOWN,c=>c.stopPropagation()));const a=new de,l=e.actionRunner||new Fm;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new TJ(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:c=>this.keybindingService.lookupKeybinding(c.id)}),a.add(L3e(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(ne(window,Ae.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(ne(window,Ae.MOUSE_DOWN,c=>{if(c.defaultPrevented)return;let h=new Ur(c),u=h.target;if(!h.rightButton){for(;u;){if(u===r)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),Xh(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide&&e.onHide(!!r),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},s,!!s)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!ju(e.error)&&this.notificationService.error(e.error)}}var E3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},C_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let B4=class extends te{constructor(e,t,n,s,r){super(),this.contextMenuHandler=new A3e(n,e,t,s,r)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),Pd.getInstance().resetKeyStatus()}};B4=E3e([C_(0,P0),C_(1,zn),C_(2,pg),C_(3,zi),C_(4,oi)],B4);const QL=bt("layoutService");var I3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},T3e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let V4=class extends te{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=te.None,this.container=e.container,this.contextView=this._register(new Km(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const s=pt(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};V4=I3e([T3e(0,QL)],V4);const NJ=bt("dialogService");let N3e=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class M3e{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),s),s.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new N3e(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(let[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}}class GW extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class WD{constructor(e=new u1,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(zt,this)}createChild(e){return new WD(e,this._strict,this)}invokeFunction(e,...t){let n=wo.traceInvocation(e),s=!1;try{return e({get:(o,a)=>{if(s)throw sSe("service accessor is only valid during the invocation of its target method");const l=this._getOrCreateServiceInstance(o,n);if(!l&&a!==ASe)throw new Error(`[invokeFunction] unknown service '${o}'`);return l}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){let n,s;return e instanceof Ah?(n=wo.traceCreation(e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=wo.traceCreation(e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){let s=oa.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){let l=this._getOrCreateServiceInstance(a.id,n);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);r.push(l)}let o=s.length>0?s[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return new e(...t,...r)}_setServiceInstance(e,t){if(this._services.get(e)instanceof Ah)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Ah?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const s=new M3e(a=>a.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const a=o.pop();if(s.lookupOrInsertNode(a),r++>1e3)throw new GW(s);for(let l of oa.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(!c&&!l.optional&&console.warn(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`),c instanceof Ah){const h={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};s.insertEdge(a,h),o.push(h)}}}for(;;){const a=s.roots();if(a.length===0){if(!s.isEmpty())throw new GW(s);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Ah){const h=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,h)}s.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof Ah)return this._createServiceInstance(t,n,s,r);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,s){if(n){const r=new vb(()=>this._createInstance(e,t,s));return new Proxy(Object.create(null),{get(o,a){if(a in o)return o[a];let l=r.value,c=l[a];return typeof c!="function"||(c=c.bind(l),o[a]=c),c},set(o,a,l){return r.value[a]=l,!0}})}else return this._createInstance(e,t,s)}}class wo{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return wo._None}static traceCreation(e){return wo._None}branch(e,t){let n=new wo(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;wo._totals+=e;let t=!1;function n(r,o){let a=[],l=new Array(r+1).join("	");for(const[c,h,u]of o._dep)if(h&&u){t=!0,a.push(`${l}CREATES -> ${c}`);let d=n(r+1,u);d&&a.push(d)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}let s=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${wo._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(s.join(`
`))}}wo._None=new class extends wo{constructor(){super(-1,null)}stop(){}branch(){return this}};wo._totals=0;const Hw=bt("labelService");class R3e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}class ad extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function KW(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=Nn.intersect(i,n.range);Nn.isEmpty(s)||t.push({range:s,size:n.size})}return t}function W4({start:i,end:e},t){return{start:i+t,end:e+t}}function O3e(i){const e=[];let t=null;for(let n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function P3e(...i){return O3e(i.reduce((e,t)=>e.concat(t),[]))}class ZW{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const s=n.length-t,r=KW({start:0,end:e},this.groups),o=KW({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:W4(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=P3e(r,a,o),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}function F3e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class B3e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=ue(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:r}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),F3e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var bg=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Ga={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Uw{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class V3e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class W3e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function z3e(i,e){return Array.isArray(i)&&Array.isArray(e)?Al(i,e):i===e}class H3e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Pa{constructor(e,t,n,s=Ga){if(this.virtualDelegate=t,this.domId=`list_id_${++Pa.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new I0(50),this.splicing=!1,this.dragOverAnimationStopDisposable=te.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=te.None,this.onDragLeaveTimeout=te.None,this.disposables=new de,this._onDidChangeContentHeight=new z,this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new ZW;for(const o of n)this.renderers.set(o.templateId,o);this.cache=this.disposables.add(new B3e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=qa(s,o=>o.horizontalScrolling,Ga.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof s.additionalScrollHeight>"u"?0:s.additionalScrollHeight,this.accessibilityProvider=new H3e(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",qa(s,o=>o.transformOptimization,Ga.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(At.addTarget(this.rowsContainer)),this.scrollable=new $L(qa(s,o=>o.smoothScrolling,!1)?125:0,o=>Tl(o)),this.scrollableElement=this.disposables.add(new DP(this.rowsContainer,{alwaysConsumeMouseWheel:qa(s,o=>o.alwaysConsumeMouseWheel,Ga.alwaysConsumeMouseWheel),horizontal:1,vertical:qa(s,o=>o.verticalScrollMode,Ga.verticalScrollMode),useShadows:qa(s,o=>o.useShadows,Ga.useShadows),mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ne(this.rowsContainer,jt.Change,o=>this.onTouchChange(o))),this.disposables.add(ne(this.scrollableElement.getDomNode(),"scroll",o=>o.target.scrollTop=0)),this.disposables.add(ne(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(ne(this.domNode,"dragend",o=>this.onDragEnd(o))),this.setRowLineHeight=qa(s,o=>o.setRowLineHeight,Ga.setRowLineHeight),this.setRowHeight=qa(s,o=>o.setRowHeight,Ga.setRowHeight),this.supportDynamicHeights=qa(s,o=>o.supportDynamicHeights,Ga.supportDynamicHeights),this.dnd=qa(s,o=>o.dnd,Ga.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:YA(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Nn.intersect(s,r),a=new Map;for(let L=o.start;L<o.end;L++){const S=this.items[L];if(S.dragStartDisposable.dispose(),S.row){let k=a.get(S.templateId);k||(k=[],a.set(S.templateId,k));const D=this.renderers.get(S.templateId);D&&D.disposeElement&&D.disposeElement(S.element,L,S.row.templateData,S.size),k.push(S.row)}S.row=null}const l={start:e+t,end:this.items.length},c=Nn.intersect(l,s),h=Nn.relativeComplement(l,s),u=n.map(L=>({id:String(this.itemId++),element:L,templateId:this.virtualDelegate.getTemplateId(L),size:this.virtualDelegate.getHeight(L),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(L),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:te.None}));let d;e===0&&t>=this.items.length?(this.rangeMap=new ZW,this.rangeMap.splice(0,0,u),d=this.items,this.items=u):(this.rangeMap.splice(e,t,u),d=this.items.splice(e,t,...u));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=W4(c,f),m=Nn.intersect(g,p);for(let L=m.start;L<m.end;L++)this.updateItemInDOM(this.items[L],L);const v=Nn.relativeComplement(p,g);for(const L of v)for(let S=L.start;S<L.end;S++)this.removeItemFromDOM(S);const b=h.map(L=>W4(L,f)),y=[{start:e,end:e+n.length},...b].map(L=>Nn.intersect(g,L)),x=this.getNextToLastElement(y);for(const L of y)for(let S=L.start;S<L.end;S++){const k=this.items[S],D=a.get(k.templateId),T=D==null?void 0:D.pop();this.insertItemInDOM(S,x,T)}for(const L of a.values())for(const S of L)this.cache.release(S);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),d.map(L=>L.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Tl(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:JSe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:YA(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=Nn.relativeComplement(a,e),c=Nn.relativeComplement(e,a),h=this.getNextToLastElement(l);if(o){const u=Nn.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}for(const u of l)for(let d=u.start;d<u.end;d++)this.insertItemInDOM(d,h);for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const s=this.items[e];s.row||(s.row=n??this.cache.alloc(s.templateId));const r=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",r);const o=this.accessibilityProvider.isChecked(s.element);typeof o<"u"&&s.row.domNode.setAttribute("aria-checked",String(!!o)),s.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(s.row.domNode,t):this.rowsContainer.appendChild(s.row.domNode)),this.updateItemInDOM(s,e);const a=this.renderers.get(s.templateId);if(!a)throw new Error(`No renderer found for template id ${s.templateId}`);a&&a.renderElement(s.element,e,s.row.templateData,s.size);const l=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!l,l&&(s.dragStartDisposable=ne(s.row.domNode,"dragstart",c=>this.onDragStart(s.element,l,c))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Es?"-moz-fit-content":"fit-content",e.width=YA(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Le.map(this.disposables.add(new Vt(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Le.map(this.disposables.add(new Vt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Le.filter(Le.map(this.disposables.add(new Vt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Le.map(this.disposables.add(new Vt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Le.any(Le.map(this.disposables.add(new Vt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Le.map(this.disposables.add(new Vt(this.domNode,jt.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Le.map(this.disposables.add(new Vt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Le.map(this.disposables.add(new Vt(this.rowsContainer,jt.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(sJ.TEXT,t),n.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(s,n)),typeof r>"u"&&(r=String(s.length));const o=ue(".monaco-drag-image");o.textContent=r,document.body.appendChild(o),n.dataTransfer.setDragImage(o,-10,-10),setTimeout(()=>document.body.removeChild(o),0)}this.currentDragData=new Uw(s),uc.CurrentDragAndDropData=new V3e(s),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),uc.CurrentDragAndDropData&&uc.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(uc.CurrentDragAndDropData)this.currentDragData=uc.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new W3e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Xx(n).filter(s=>s>=-1&&s<this.length).sort((s,r)=>s-r),n=n[0]===-1?[-1]:n,z3e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=pt(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const s of n){const r=this.items[s];r.dropTarget=!0,r.row&&r.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=pt(()=>{for(const s of n){const r=this.items[s];r.dropTarget=!1,r.row&&r.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Em(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,uc.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,uc.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=te.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=SY(this.domNode).top;this.dragOverAnimationDisposable=axe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Em(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const u=this.probeDynamicHeight(h);u!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Nn.relativeComplement(s,l);for(const d of h)for(let f=d.start;f<d.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Nn.relativeComplement(l,s);for(const d of u)for(let f=d.start;f<d.end;f++){const g=f+1,p=g<this.items.length?this.items[g].row:null,m=p?p.domNode:null;this.insertItemInDOM(f,m)}for(let d=l.start;d<l.end;d++)this.items[d].row&&this.updateItemInDOM(this.items[d],d);if(typeof r=="number"){const d=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+d;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let o=t.row.domNode.offsetHeight;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-n}const s=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);return r&&(r.renderElement(t.element,e,s.templateData,void 0),r.disposeElement&&r.disposeElement(t.element,e,s.templateData,void 0)),t.size=s.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),lt(this.disposables)}}Pa.InstanceCount=0;bg([Qi],Pa.prototype,"onMouseClick",null);bg([Qi],Pa.prototype,"onMouseDblClick",null);bg([Qi],Pa.prototype,"onMouseMiddleClick",null);bg([Qi],Pa.prototype,"onMouseDown",null);bg([Qi],Pa.prototype,"onContextMenu",null);bg([Qi],Pa.prototype,"onTouchStart",null);bg([Qi],Pa.prototype,"onTap",null);var vg=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},YW=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class U3e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let zD=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new z,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new U3e(this)}splice(e,t,n){var s;t=Math.max(0,Math.min(t,this.length-e));const r=n.length-t,o=e+t,a=[...this.sortedIndexes.filter(c=>c<e),...n.map((c,h)=>c?h+e:-1).filter(c=>c!==-1),...this.sortedIndexes.filter(c=>c>=o).map(c=>c+r)],l=this.length+r;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const c=(s=this.sortedIndexes.find(h=>h>=e))!==null&&s!==void 0?s:l-1;a.push(Math.min(c,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(XW),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=z4(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return W5(this.sortedIndexes,e,XW)>=0}dispose(){lt(this._onChange)}};vg([Qi],zD.prototype,"renderer",null);class $3e extends zD{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class oI{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const s=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),r=n.map(o=>s.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,r)}}function Eu(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function Ap(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Ap(i.parentElement)}class MJ{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new de,this.multipleSelectionDisposables=new de,this.onKeyDown.filter(s=>s.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(s=>s.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(s=>(ut?s.metaKey:s.ctrlKey)&&s.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Le.chain(this.disposables.add(new Vt(this.view.domNode,"keydown")).event).filter(e=>!Eu(e.target)).map(e=>new ui(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(ut?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(os(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}vg([Qi],MJ.prototype,"onKeyDown",null);var Ep;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(Ep||(Ep={}));const RJ=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class j3e{constructor(e,t,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=s,this.enabled=!1,this.state=Ep.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new de,this.disposables=new de,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Le.chain(this.enabledDisposables.add(new Vt(this.view.domNode,"keydown")).event).filter(s=>!Eu(s.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(s=>new ui(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>{s.stopPropagation(),s.preventDefault()}).map(s=>s.browserEvent.key).event,t=Le.debounce(e,()=>null,800);Le.reduce(Le.any(e,t),(s,r)=>r===null?null:(s||"")+r)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&dg(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Ep.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===Ep.Idle?1:0;this.state=Ep.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||zP(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class q3e{constructor(e,t){this.list=e,this.view=t,this.disposables=new de,Le.chain(this.disposables.add(new Vt(t.domNode,"keydown")).event).filter(s=>!Eu(s.target)).map(s=>new ui(s)).filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!(s instanceof HTMLElement)||s.tabIndex===-1)return;const r=window.getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function OJ(i){return ut?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function PJ(i){return i.browserEvent.shiftKey}function G3e(i){return i instanceof MouseEvent&&i.button===2}const QW={isSelectionSingleChangeEvent:OJ,isSelectionRangeChangeEvent:PJ};class FJ{constructor(e){this.list=e,this.disposables=new de,this._onPointer=new z,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||QW),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(At.addTarget(e.getHTMLElement()))),Le.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||QW))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Ap(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Ap(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Eu(e.browserEvent.target)||Ap(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),G3e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Eu(e.browserEvent.target)||Ap(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const h=this.list.getFocus()[0];n=h??t,this.list.setAnchor(n)}const s=Math.min(n,t),r=Math.max(n,t),o=os(s,r+1),a=this.list.getSelection(),l=Y3e(z4(a,[n]),n);if(l.length===0)return;const c=z4(o,Q3e(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class BJ{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):ut||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),this.styleElement.textContent=n.join(`
`)}}const K3e={listFocusBackground:Z.fromHex("#7FB0D0"),listActiveSelectionBackground:Z.fromHex("#0E639C"),listActiveSelectionForeground:Z.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Z.fromHex("#FFFFFF"),listFocusAndSelectionBackground:Z.fromHex("#094771"),listFocusAndSelectionForeground:Z.fromHex("#FFFFFF"),listInactiveSelectionBackground:Z.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Z.fromHex("#FFFFFF"),listHoverBackground:Z.fromHex("#2A2D2E"),listDropBackground:Z.fromHex("#383B3D"),treeIndentGuidesStroke:Z.fromHex("#a9a9a9"),tableColumnsBorder:Z.fromHex("#cccccc").transparent(.2)},Z3e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Y3e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function z4(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function Q3e(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const XW=(i,e)=>i-e;class X3e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){let r=0;for(const o of this.renderers)o.disposeElement&&o.disposeElement(e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class J3e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e);s?n.setAttribute("aria-label",s):n.removeAttribute("aria-label");const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.setAttribute("aria-level",`${r}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class eRe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,s){return this.dnd.onDragOver(e,t,n,s)}onDragLeave(e,t,n,s){var r,o;(o=(r=this.dnd).onDragLeave)===null||o===void 0||o.call(r,e,t,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,s){this.dnd.drop(e,t,n,s)}}class Ul{constructor(e,t,n,s,r=Z3e){var o;this.user=e,this._options=r,this.focus=new zD("focused"),this.anchor=new zD("anchor"),this.eventBufferer=new d5,this._ariaLabel="",this.disposables=new de,this._onDidDispose=new z,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new $3e(a!=="listbox"),Oa(r,K3e,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(l.push(new J3e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new X3e(h.templateId,[...l,h]));const c=Object.assign(Object.assign({},r),{dnd:r.dnd&&new eRe(this,r.dnd)});if(this.view=new Pa(t,n,s,c),this.view.domNode.setAttribute("role",a),r.styleController)this.styleController=r.styleController(this.view.domId);else{const h=Gr(this.view.domNode);this.styleController=new BJ(h,this.view.domId)}if(this.spliceable=new R3e([new oI(this.focus,this.view,r.identityProvider),new oI(this.selection,this.view,r.identityProvider),new oI(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new q3e(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new MJ(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const h=r.keyboardNavigationDelegate||RJ;this.typeLabelController=new j3e(this,this.view,r.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Le.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Le.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Le.chain(this.disposables.add(new Vt(this.view.domNode,"keydown")).event).map(r=>new ui(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(kW).filter(()=>!1).event,n=Le.chain(this.disposables.add(new Vt(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(r=>new ui(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(kW).map(({browserEvent:r})=>{const o=this.getFocus(),a=o.length?o[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,c=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:c,browserEvent:r}}).event,s=Le.chain(this.view.onContextMenu).filter(r=>!e).map(({element:r,index:o,browserEvent:a})=>({element:r,index:o,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Le.any(t,n,s)}get onKeyDown(){return this.disposables.add(new Vt(this.view.domNode,"keydown")).event}get onDidFocus(){return Le.signal(this.disposables.add(new Vt(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new FJ(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ad(this.user,`Invalid start index: ${e}`);if(t<0)throw new ad(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new ad(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ad(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return YM(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new ad(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}focusNextPage(e,t){return YW(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.view.element(n),r=this.getFocusedElements()[0];if(r!==s){const o=this.findPreviousIndex(n,!1,t);o>-1&&r!==this.view.element(o)?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==o&&(this.setFocus([]),yield Pv(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return YW(this,void 0,void 0,function*(){let n;const s=this.view.getScrollTop();s===0?n=this.view.indexAt(s):n=this.view.indexAfter(s-1);const r=this.view.element(n),o=this.getFocusedElements()[0];if(o!==r){const a=this.findNextIndex(n,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=s;this.view.setScrollTop(s-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield Pv(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new ad(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(Tf(t)){const o=r-this.view.renderHeight;this.view.setScrollTop(o*po(t,0,1)+s)}else{const o=s+r,a=n+this.view.renderHeight;s<n&&o>=a||(s<n||o>=a&&r>=this.view.renderHeight?this.view.setScrollTop(s):o>=a&&this.view.setScrollTop(o-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new ad(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<t||n+s>t+this.view.renderHeight)return null;const r=s-this.view.renderHeight;return Math.abs((t-n)/r)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}vg([Qi],Ul.prototype,"onDidChangeFocus",null);vg([Qi],Ul.prototype,"onDidChangeSelection",null);vg([Qi],Ul.prototype,"onContextMenu",null);vg([Qi],Ul.prototype,"onKeyDown",null);vg([Qi],Ul.prototype,"onDidFocus",null);class tRe{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:te.None}}renderElement(e,t,n,s){if(n.disposable&&n.disposable.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new Ra,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class iRe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function nRe(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new iRe(i,e.accessibilityProvider)})}class sRe{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new tRe(l,o));this.list=new Ul(e,t,n,a,nRe(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Le.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Le.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Le.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,os(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const rRe={separatorBorder:Z.transparent};class VJ{constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=po(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class oRe extends VJ{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class aRe extends VJ{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var dc;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(dc||(dc={}));var HD;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(HD||(HD={}));class WJ extends te{constructor(e,t={}){var n,s;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=dc.Idle,this._onDidSashChange=this._register(new z),this.onDidSashChange=this._onDidSashChange.event,this._onDidSashReset=this._register(new z),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.orientation=us(t.orientation)?0:t.orientation,this.inverseAltBehavior=!!t.inverseAltBehavior,this.proportionalLayout=us(t.proportionalLayout)?!0:!!t.proportionalLayout,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=se(this.el,ue(".sash-container")),this.viewContainer=ue(".split-view-container"),this.scrollable=new $L(125,Tl),this.scrollableElement=this._register(new DP(this.viewContainer,{vertical:this.orientation===0?(n=t.scrollbarVisibility)!==null&&n!==void 0?n:1:2,horizontal:this.orientation===1?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(r=>{this.viewContainer.scrollTop=r.scrollTop,this.viewContainer.scrollLeft=r.scrollLeft})),se(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||rRe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((r,o)=>{const a=us(r.visible)||r.visible?r.size:{type:"invisible",cachedVisibleSize:r.size},l=r.view;this.doAddView(l,a,o,!0)}),this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}get orthogonalEndSash(){return this._orthogonalEndSash}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s];r.size=po(Math.round(this.proportions[s]*e),r.minimumSize,r.maximumSize)}else{const s=os(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Xh(ne(document.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ne(document.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let h=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];h=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];h=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let d,f;if(!l){const g=os(s,-1),p=os(s+1,this.viewItems.length),m=g.reduce((k,D)=>k+(this.viewItems[D].minimumSize-c[D]),0),v=g.reduce((k,D)=>k+(this.viewItems[D].viewMaximumSize-c[D]),0),b=p.length===0?Number.POSITIVE_INFINITY:p.reduce((k,D)=>k+(c[D]-this.viewItems[D].minimumSize),0),w=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((k,D)=>k+(c[D]-this.viewItems[D].viewMaximumSize),0),y=Math.max(m,w),x=Math.min(b,v),L=this.findFirstSnapIndex(g),S=this.findFirstSnapIndex(p);if(typeof L=="number"){const k=this.viewItems[L],D=Math.floor(k.viewMinimumSize/2);d={index:L,limitDelta:k.visible?y-D:y+D,size:k.size}}if(typeof S=="number"){const k=this.viewItems[S],D=Math.floor(k.viewMinimumSize/2);f={index:S,limitDelta:k.visible?x+D:x-D,size:k.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:h,maxDelta:u,alt:l,snapBefore:d,snapAfter:f,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-n,u=this.resize(t,h,s,void 0,void 0,o,a,l,c);if(r){const d=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=d?t:t+1,p=this.viewItems[g],m=p.size-p.maximumSize,v=p.size-p.minimumSize,b=d?t-1:t+1;this.resize(b,-u,f,void 0,void 0,m,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=po(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==dc.Idle)throw new Error("Cant modify splitview");if(this.state=dc.Busy,e<0||e>=this.viewItems.length)return;const n=os(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=po(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r),this.state=dc.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=po(n,a.minimumSize,a.maximumSize);const s=os(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==dc.Idle)throw new Error("Cant modify splitview");this.state=dc.Busy;const r=ue(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(d=>this.onViewChange(h,d)),a=pt(()=>this.viewContainer.removeChild(r)),l=Xh(o,a);let c;typeof t=="number"?c=t:t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize;const h=this.orientation===0?new oRe(r,e,c,l):new aRe(r,e,c,l);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let d={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const f=this.orientation===0?new Mn(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:1})):new Mn(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},d),{orientation:0})),g=this.orientation===0?k=>({sash:f,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:f,start:k.startX,current:k.currentX,alt:k.altKey}),m=Le.map(f.onDidStart,g)(this.onSashStart,this),b=Le.map(f.onDidChange,g)(this.onSashChange,this),y=Le.map(f.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===f))(this.onSashEnd,this),x=f.onDidReset(()=>{const k=this.sashItems.findIndex(U=>U.sash===f),D=os(k,-1),T=os(k+1,this.viewItems.length),N=this.findFirstSnapIndex(D),$=this.findFirstSnapIndex(T);typeof N=="number"&&!this.viewItems[N].visible||typeof $=="number"&&!this.viewItems[$].visible||this._onDidSashReset.fire(k)}),L=Xh(m,b,y,x,f),S={sash:f,disposable:L};this.sashItems.splice(n-1,0,S)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([n],u),this.state=dc.Idle,!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=os(e,-1),u=os(e+1,this.viewItems.length);if(r)for(const S of r)gE(h,S),gE(u,S);if(s)for(const S of s)Ry(h,S),Ry(u,S);const d=h.map(S=>this.viewItems[S]),f=h.map(S=>n[S]),g=u.map(S=>this.viewItems[S]),p=u.map(S=>n[S]),m=h.reduce((S,k)=>S+(this.viewItems[k].minimumSize-n[k]),0),v=h.reduce((S,k)=>S+(this.viewItems[k].maximumSize-n[k]),0),b=u.length===0?Number.POSITIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((S,k)=>S+(n[k]-this.viewItems[k].maximumSize),0),y=Math.max(m,w,o),x=Math.min(b,v,a);let L=!1;if(l){const S=this.viewItems[l.index],k=t>=l.limitDelta;L=k!==S.visible,S.setVisible(k,l.size)}if(!L&&c){const S=this.viewItems[c.index],k=t<c.limitDelta;L=k!==S.visible,S.setVisible(k,c.size)}if(L)return this.resize(e,t,n,s,r,o,a);t=po(t,y,x);for(let S=0,k=t;S<d.length;S++){const D=d[S],T=po(f[S]+k,D.minimumSize,D.maximumSize),N=T-f[S];k-=N,D.size=T}for(let S=0,k=t;S<g.length;S++){const D=g[S],T=po(p[S]-k,D.minimumSize,D.maximumSize),N=T-p[S];k+=N,D.size=T}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=os(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)gE(s,a);for(const a of r)Ry(s,a);typeof e=="number"&&Ry(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=po(l.size+n,l.minimumSize,l.maximumSize),h=c-l.size;n-=h,l.size=c}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],h=this.viewItems[l];a+=h.size;const u=!(t[l]&&o[l+1]),d=!(n[l]&&r[l+1]);if(u&&d){const f=os(l,-1),g=os(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),m=this.findFirstSnapIndex(g),v=typeof p=="number"&&!this.viewItems[p].visible,b=typeof m=="number"&&!this.viewItems[m].visible;v&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:b&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!d?c.state=1:!u&&d?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class $w{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=$w.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=se(e,ue(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=se(t,ue(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Pn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}$w.TemplateId="row";function lRe(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return $w.TemplateId}}}class cRe{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new z,this.onDidLayout=this._onDidLayout.event,this.element=ue(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Le.None}layout(e){this._onDidLayout.fire([this.index,e])}}class XL{constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.domId=`table_id_${++XL.InstanceCount}`,this.cachedHeight=0,this.domNode=se(t,ue(`.monaco-table.${this.domId}`));const a=s.map((h,u)=>new cRe(h,u)),l={size:a.reduce((h,u)=>h+u.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=new WJ(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l}),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new $w(s,r,h=>this.splitview.getViewSize(h));this.list=new Ul(e,this.domNode,lRe(n),[c],o),this.columnLayoutDisposable=Le.any(...a.map(h=>h.onDidLayout))(([h,u])=>c.layoutColumn(h,u)),this.styleElement=Gr(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.splitview.dispose(),this.list.dispose(),this.columnLayoutDisposable.dispose()}}XL.InstanceCount=0;var Gb;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(Gb||(Gb={}));class Vr extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class KP{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function ZP(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function b1(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function aI(i){return typeof i.collapsible=="boolean"}class hRe{constructor(e,t,n,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new d5,this._onDidChangeCollapseState=new z,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new z,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new z,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=ht.empty(),s={}){if(e.length===0)throw new Vr(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s,r,o){var a;s===void 0&&(s=ht.empty()),o===void 0&&(o=(a=r.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,s,r);const c=[...s],h=t[t.length-1],u=new hl({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,h),...c,...l.children.slice(h+n)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,c,r);const d=t.slice(0,-1),f=(m,v,b)=>{if(o>0)for(let w=0;w<b;w++)m--,v--,this.spliceSmart(e,[...d,m,0],Number.MAX_SAFE_INTEGER,c[v].children,r,o-1)};let g=Math.min(l.children.length,h+n),p=c.length;for(const m of u.changes.sort((v,b)=>b.originalStart-v.originalStart))f(g,p,g-(m.originalStart+m.originalLength)),g=m.originalStart,p=m.modifiedStart-h,this.spliceSimple([...d,g],m.originalLength,ht.slice(c,p,p+m.modifiedLength),r);f(g,p,g)}spliceSimple(e,t,n=ht.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),u=[],d=ht.map(n,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,s)),f=e[e.length-1],g=a.children.length>0;let p=0;for(let S=f;S>=0&&S<a.children.length;S--){const k=a.children[S];if(k.visible){p=k.visibleChildIndex;break}}const m=[];let v=0,b=0;for(const S of d)m.push(S),b+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=p+v++);const w=J7(a.children,f,t,m);o?a.lastDiffIds?J7(a.lastDiffIds,f,t,m.map(S=>o.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>o.getId(S.element).toString()):a.lastDiffIds=void 0;let y=0;for(const S of w)S.visible&&y++;if(y!==0)for(let S=f+m.length;S<a.children.length;S++){const k=a.children[S];k.visible&&(k.visibleChildIndex-=y)}if(a.visibleChildrenCount+=v-y,c&&h){const S=w.reduce((k,D)=>k+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-S),this.list.splice(l,S,u)}if(w.length>0&&r){const S=k=>{r(k),k.children.forEach(S)};w.forEach(S)}const x=a.children.length>0;g!==x&&this.setCollapsible(e.slice(0,-1),x),this._onDidSplice.fire({insertedNodes:m,deletedNodes:w});let L=a;for(;L;){if(L.visibility===2){this.refilter();break}L=L.parent}}rerender(e){if(e.length===0)throw new Vr(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!aI(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(aI(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!aI(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const c=e.children||ht.empty(),h=s&&l!==0&&!a.collapsed,u=ht.map(c,g=>this.createTreeNode(g,a,l,h,r,o));let d=0,f=1;for(const g of u)a.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=d++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,s&&r.pop()),o&&o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):ZP(n)?(e.filterData=n.data,b1(n.visibility)):(e.filterData=void 0,b1(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Vr(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Vr(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Vr(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Pke(e)[0]}}const JW=zo("tree-item-expanded",be.chevronDown),ez=zo("tree-filter-on-type-on",be.listFilter),tz=zo("tree-filter-on-type-off",be.listSelection),uRe=zo("tree-filter-clear",be.close),UD=zo("tree-item-loading",be.loading);class dRe extends Uw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function lI(i){return i instanceof Uw?new dRe(i):i}class fRe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=te.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(lI(e),t)}onDragOver(e,t,n,s,r=!0){const o=this.dnd.onDragOver(lI(e),t&&t.element,n,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return o;if(a&&typeof o!="boolean"&&o.autoExpand&&(this.autoExpandDisposable=Em(()=>{const d=this.modelProvider(),f=d.getNodeLocation(t);d.isCollapsed(f)&&d.setCollapsed(f,!1),this.autoExpandNode=void 0},500)),typeof o=="boolean"||!o.accept||typeof o.bubble>"u"||o.feedback){if(!r){const d=typeof o=="boolean"?o:o.accept,f=typeof o=="boolean"?void 0:o.effect;return{accept:d,effect:f,feedback:[n]}}return o}if(o.bubble===1){const d=this.modelProvider(),f=d.getNodeLocation(t),g=d.getParentNodeLocation(f),p=d.getNode(g),m=g&&d.getListIndex(g);return this.onDragOver(e,p,m,s,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),h=l.getListIndex(c),u=l.getListRenderCount(c);return Object.assign(Object.assign({},o),{feedback:os(h,h+u)})}drop(e,t,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(lI(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function gRe(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new fRe(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),s=n.getNodeLocation(t),r=n.getParentNodeLocation(s);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class YP{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var v1;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(v1||(v1={}));class pRe{constructor(e,t=[]){this._elements=t,this.onDidChange=Le.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class w1{constructor(e,t,n,s,r={}){this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=w1.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new SLe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=te.None,this.disposables=new de,this.templateId=e.templateId,this.updateOptions(r),Le.map(n,o=>o.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=po(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==v1.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new de;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=se(e,ue(".monaco-tl-row")),n=se(t,ue(".monaco-tl-indent")),s=se(t,ue(".monaco-tl-twistie")),r=se(t,ue(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:te.None,templateData:o}}renderElement(e,t,n,s){typeof s=="number"&&(this.renderedNodes.set(e,{templateData:n,height:s}),this.renderedElements.set(e.element,e));const r=w1.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${r}px`,n.indent.style.width=`${r+this.indent-16}px`,this.renderTwistie(e,n),typeof s=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...JW.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...JW.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Pn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new de,s=this.modelProvider();let r=e;for(;;){const o=s.getNodeLocation(r),a=s.getParentNodeLocation(o);if(!a)break;const l=s.getNode(a),c=ue(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&c.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(c):t.indent.insertBefore(c,t.indent.firstElementChild),this.renderedIndentGuides.add(l,c),n.add(pt(()=>this.renderedIndentGuides.delete(l,c))),r=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(s=>{const r=n.getNodeLocation(s);try{const o=n.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),lt(this.disposables)}}w1.DefaultIndent=8;class mRe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new de,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const r=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return r;let o;if(typeof r=="boolean"?o=r?1:0:ZP(r)?o=b1(r.visibility):o=r,o===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:ma.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const o=r&&r.toString();if(typeof o>"u")return{data:ma.Default,visibility:!0};const a=_1(this._pattern,this._lowercasePattern,0,o,o.toLowerCase(),0,!0);if(a)return this._matchCount++,s.length===1?{data:a,visibility:!0}:{data:{label:o,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:ma.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){lt(this.disposables)}}class _Re{constructor(e,t,n,s,r){this.tree=e,this.view=n,this.filter=s,this.keyboardNavigationDelegate=r,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new z,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new z,this.enabledDisposables=new de,this.disposables=new de,this.domNode=ue(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(ne(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=se(n.getHTMLElement(),ue(".monaco-list-type-filter-message")),this.labelDomNode=se(this.domNode,ue("span.label"));const o=se(this.domNode,ue(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=se(o,ue("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(ne(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=se(o,ue("button.clear"+uRe.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=_("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Vt(this.view.getHTMLElement(),"keydown")),t=Le.chain(e.event).filter(s=>!Eu(s.target)||s.target===this.filterOnTypeDomNode).filter(s=>s.key!=="Dead"&&!/^Media/.test(s.key)).map(s=>new ui(s)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(s=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(s)&&!(s.keyCode===18||s.keyCode===16||s.keyCode===15||s.keyCode===17)||(this.pattern.length>0||this.triggered)&&(s.keyCode===9||s.keyCode===1)&&!s.altKey&&!s.ctrlKey&&!s.metaKey||s.keyCode===1&&(ut?s.altKey&&!s.metaKey:s.ctrlKey)&&!s.shiftKey).forEach(s=>{s.stopPropagation(),s.preventDefault()}).event,n=this.enabledDisposables.add(new Vt(this.clearDomNode,"click"));Le.chain(Le.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(ut?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,s=>!ma.isDefault(s.filterData));const n=this.tree.getFocus();if(n.length>0){const s=n[0];this.tree.getRelativeTop(s)===null&&this.tree.reveal(s,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Rn(e),n=e.clientWidth,s=n/2,r=this.domNode.clientWidth,o=new de;let a=this.positionClassName;const l=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-r-6}px`;break}},c=u=>{u.preventDefault();const d=u.clientX-t;u.dataTransfer&&(u.dataTransfer.dropEffect="none"),d<s?a="nw":a="ne",l()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",lt(o)};l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),o.add(pt(()=>this.domNode.classList.remove("dragging"))),o.add(ne(document,"dragover",u=>c(u))),o.add(ne(this.domNode,"dragend",()=>h())),uc.CurrentDragAndDropData=new MMe("vscode-ui"),o.add(pt(()=>uc.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(...tz.classNamesArray),this.filterOnTypeDomNode.classList.add(...ez.classNamesArray),this.filterOnTypeDomNode.title=_("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(...ez.classNamesArray),this.filterOnTypeDomNode.classList.add(...tz.classNamesArray),this.filterOnTypeDomNode.title=_("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=_("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=_("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"…"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!ma.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),lt(this.disposables)}}function iz(i){let e=Gb.Unknown;return _7(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Gb.Twistie:_7(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=Gb.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function xS(i,e){e(i),i.children.forEach(t=>xS(t,e))}class cI{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new z,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&Al(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>xS(h,c)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>xS(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>xS(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const u=r.get(c);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class bRe extends FJ{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(Eu(e.browserEvent.target)||Ap(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let r=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const o=this.tree.model,a=o.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),o.setCollapsed(a,void 0,l),r&&s)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class vRe extends Ul{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new bRe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Xx([...super.getFocus(),...s])),r.length>0&&super.setSelection(Xx([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class zJ{constructor(e,t,n,s,r={}){this._options=r,this.eventBufferer=new d5,this.disposables=new de,this._onWillRefilter=new z,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new z;const o=new YP(n),a=new d7,l=new d7,c=new pRe(l.event);this.renderers=s.map(d=>new w1(d,()=>this.model,a.event,c,r));for(let d of this.renderers)this.disposables.add(d);let h;r.keyboardNavigationLabelProvider&&(h=new mRe(this,r.keyboardNavigationLabelProvider,r.filter),r=Object.assign(Object.assign({},r),{filter:h}),this.disposables.add(h)),this.focus=new cI(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new cI(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new cI(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new vRe(e,t,o,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},gRe(()=>this.model,r)),{tree:this})),this.model=this.createModel(e,this.view,r),a.input=this.model.onDidChangeCollapseState;const u=Le.forEach(this.model.onDidSplice,d=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(d),this.selection.onDidModelSplice(d)})});if(u(()=>null,null,this.disposables),l.input=Le.chain(Le.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const d=new Set;for(const f of this.focus.getNodes())d.add(f);for(const f of this.selection.getNodes())d.add(f);return[...d.values()]}).event,r.keyboardSupport!==!1){const d=Le.chain(this.view.onKeyDown).filter(f=>!Eu(f.target)).map(f=>new ui(f));d.filter(f=>f.keyCode===15).on(this.onLeftArrow,this,this.disposables),d.filter(f=>f.keyCode===17).on(this.onRightArrow,this,this.disposables),d.filter(f=>f.keyCode===10).on(this.onSpace,this,this.disposables)}if(r.keyboardNavigationLabelProvider){const d=r.keyboardNavigationDelegate||RJ;this.typeFilterController=new _Re(this,this.model,this.view,h,d),this.focusNavigationFilter=f=>this.typeFilterController.shouldAllowFocus(f),this.disposables.add(this.typeFilterController)}this.styleElement=Gr(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===v1.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Le.map(this.view.onMouseDblClick,iz)}get onPointer(){return Le.map(this.view.onPointer,iz)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===v1.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)}focusNext(e=1,t=!1,n,s=this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){lt(this.disposables),this.view.dispose()}}class QP{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new hRe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(s,r){return n.sorter.compare(s.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=ht.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=ht.empty(),n){const s=new Set,r=new Set,o=l=>{var c;if(l.element===null)return;const h=l;if(s.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.add(u),this.nodesByIdentity.set(u,h)}(c=n.onDidCreateNode)===null||c===void 0||c.call(n,h)},a=l=>{var c;if(l.element===null)return;const h=l;if(s.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const u=this.identityProvider.getId(h.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(c=n.onDidDeleteNode)===null||c===void 0||c.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:a}))}preserveCollapseState(e=ht.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ht.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,r=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Vr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Vr(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Vr(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Vr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function DS(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:ht.map(ht.from(i.children),DS),collapsible:i.collapsible,collapsed:i.collapsed}}function kS(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=ht.consume(ht.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:ht.map(ht.concat(s,n),kS),collapsible:i.collapsible,collapsed:i.collapsed}}function H4(i,e=0){let t;return e<i.element.elements.length-1?t=[H4(i,e+1)]:t=ht.map(ht.from(i.children),n=>H4(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function nz(i){return H4(i,0)}function HJ(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:ht.map(ht.from(i.children),n=>HJ(n,e,t))})}const wRe=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class yRe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new QP(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=ht.empty(),n){const s=n.diffIdentityProvider&&wRe(n.diffIdentityProvider);if(e===null){const f=ht.map(t,this.enabled?kS:DS);this._setChildren(null,f,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=nz(o),h=HJ(c,e,t),u=(this.enabled?kS:DS)(h),d=l.children.map(f=>f===o?u:f);this._setChildren(l.element,d,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=ht.map(n,nz),r=ht.map(s,e?kS:DS);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:o}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Vr(this.user,`Tree element not found: ${e}`);return t}}const CRe=i=>i[i.length-1];class XP{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new XP(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function SRe(i,e){return{splice(t,n,s){e.splice(t,n,s.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function xRe(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class DRe{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||CRe;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new KP(r=>new XP(s,r)),this.model=new yRe(e,SRe(this.nodeMapper,t),xRe(s,n))}get onDidSplice(){return Le.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Le.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Le.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=ht.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var kRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class JP extends zJ{constructor(e,t,n,s,r={}){super(e,t,n,s,r)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=ht.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new QP(e,t,n)}}class UJ{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,s):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}kRe([Qi],UJ.prototype,"compressedTreeNodeProvider",null);function LRe(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class $J extends JP{constructor(e,t,n,s,r={}){const o=()=>this,a=s.map(l=>new UJ(o,l));super(e,t,n,a,LRe(o,r))}setChildren(e,t=ht.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new DRe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var fh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function hI(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function U4(i,e){return e.parent?e.parent===i?!0:U4(i,e.parent):!1}function ARe(i,e){return i===e||U4(i,e)||U4(e,i)}class eF{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new eF(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class ERe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...UD.classNamesArray),!0):(t.classList.remove(...UD.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function sz(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function rz(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class IRe extends Uw{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function uI(i){return i instanceof Uw?new IRe(i):i}class TRe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(uI(e),t)}onDragOver(e,t,n,s,r=!0){return this.dnd.onDragOver(uI(e),t&&t.element,n,s)}drop(e,t,n,s){this.dnd.drop(uI(e),t&&t.element,n,s)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function jJ(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new TRe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function $4(i,e){e(i),i.children.forEach(t=>$4(t,e))}class qJ{constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new z,this._onDidChangeNodeSlowState=new z,this.nodeMapper=new KP(a=>new eF(a)),this.disposables=new de,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,n,s,o),this.root=hI({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Le.map(this.tree.onDidChangeFocus,sz)}get onDidChangeSelection(){return Le.map(this.tree.onDidChangeSelection,sz)}get onMouseDblClick(){return Le.map(this.tree.onMouseDblClick,rz)}get onPointer(){return Le.map(this.tree.onPointer,rz)}get onDidFocus(){return this.tree.onDidFocus}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,s,r){const o=new YP(n),a=s.map(c=>new ERe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=jJ(r)||{};return new JP(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return fh(this,void 0,void 0,function*(){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,s,r){return fh(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Vr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Le.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return fh(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Vr(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Le.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Le.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Le.toPromise(this._onDidRender.event)),s})}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Vr(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,s){return fh(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,s)})}refreshNode(e,t,n){return fh(this,void 0,void 0,function*(){let s;return this.subTreeRefreshPromises.forEach((r,o)=>{!s&&ARe(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return fh(this,void 0,void 0,function*(){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=yield this.doRefreshNode(e,t,n);e.stale=!1,yield xM.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}})}doRefreshNode(e,t,n){return fh(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(ht.empty());else{const r=Pv(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},o=>null),s=this.doGetChildren(e).finally(()=>r.cancel())}try{const r=yield s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),ju(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=Ir(()=>fh(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ze))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)if(o.set(h.element,h),this.identityProvider){const u=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:u})}const l=[],c=r.map(h=>{const u=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const p=hI({element:h,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const d=this.identityProvider.getId(h).toString(),f=a.get(d);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(h,p),p.element=h,p.hasChildren=u,n?f.collapsed?(p.children.forEach(m=>$4(m,v=>this.nodes.delete(v.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(p.collapsedByDefault=!1,l.push(p)),p}const g=hI({element:h,parent:e,id:d,hasChildren:u});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(g),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(g):u&&this.collapseByDefault&&!this.collapseByDefault(h)&&(g.collapsedByDefault=!1,l.push(g)),g});for(const h of o.values())$4(h,u=>this.nodes.delete(u.element));for(const h of c)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].collapsedByDefault=!1,l.push(c[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}});this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?ht.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class tF{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new tF(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class NRe{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...UD.classNamesArray),!0):(t.classList.remove(...UD.classNamesArray),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=lt(this.disposables)}}function MRe(i){const e=i&&jJ(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class RRe extends qJ{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new KP(l=>new tF(l)),this.filter=a.filter}createTree(e,t,n,s,r){const o=new YP(n),a=s.map(c=>new NRe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=MRe(r)||{};return new $J(e,t,o,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=d=>this.identityProvider.getId(d).toString(),s=d=>{const f=new Set;for(const g of d){const p=this.tree.getCompressedTreeNode(g===this.root?null:g);if(p.element)for(const m of p.element.elements)f.add(n(m.element))}return f},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const c=this.getFocus();let h=!1;const u=d=>{const f=d.element;if(f)for(let g=0;g<f.elements.length;g++){const p=n(f.elements[g].element),m=f.elements[f.elements.length-1].element;r.has(p)&&a.indexOf(m)===-1&&(a.push(m),l=!0),o.has(p)&&c.indexOf(m)===-1&&(c.push(m),h=!0)}d.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),h&&this.setFocus(c)}processChildren(e){return this.filter&&(e=ht.filter(e,t=>{const n=this.filter.filter(t,1),s=ORe(n);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function ORe(i){return typeof i=="boolean"?i?1:0:ZP(i)?b1(i.visibility):b1(i)}class PRe extends zJ{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,n){return new QP(e,t,n)}}new De("isWindows",Fn,_("isWindows","Whether the operating system is Windows"));const FRe="inputFocus";var $l=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Je=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const eo=bt("listService");let j4=class{constructor(e){this._themeService=e,this.disposables=new de,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const s=new BJ(Gr(),"");this.disposables.add(zf(s,this._themeService))}if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&(this._lastFocusedWidget=e),Xh(e.onDidFocus(()=>this._lastFocusedWidget=e),pt(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&(this._lastFocusedWidget=void 0)}))}dispose(){this.disposables.dispose()}};j4=$l([Je(0,oi)],j4);const GJ=new De("listFocus",!0),JL=new De("listSupportsMultiselect",!0),KJ=xe.and(GJ,xe.not(FRe)),iF=new De("listHasSelectionOrFocus",!1),nF=new De("listDoubleSelection",!1),sF=new De("listMultiSelection",!1),e2=new De("listSelectionNavigation",!1),ZJ="listAutomaticKeyboardNavigation";function t2(i,e){const t=i.createScoped(e.getHTMLElement());return GJ.bindTo(t),t}const wg="workbench.list.multiSelectModifier",q4="workbench.list.openMode",qr="workbench.list.horizontalScrolling",$D="workbench.list.keyboardNavigation",rF="workbench.list.automaticKeyboardNavigation",y1="workbench.tree.indent",jD="workbench.tree.renderIndentGuides",La="workbench.list.smoothScrolling",Fl="workbench.list.mouseWheelScrollSensitivity",Bl="workbench.list.fastScrollSensitivity",qD="workbench.tree.expandMode";function Vl(i){return i.getValue(wg)==="alt"}class BRe extends te{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Vl(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(wg)&&(this.useAltAsMultipleSelectionModifier=Vl(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:OJ(e)}isSelectionRangeChangeEvent(e){return PJ(e)}}function i2(i,e,t){var n;const s=new de;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return t.mightProducePrintableCharacter(o)}},smoothScrolling:!!e.getValue(La),mouseWheelScrollSensitivity:e.getValue(Fl),fastScrollSensitivity:e.getValue(Bl),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:s.add(new BRe(e))}),s]}let G4=class extends Ul{constructor(e,t,n,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(qr),[d,f]=i2(r,c,h);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Qo(l.getColorTheme(),YL)),d),{horizontalScrolling:u})),this.disposables.add(f),this.contextKeyService=t2(o,this),this.themeService=l,this.listSupportsMultiSelect=JL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),e2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=iF.bindTo(this.contextKeyService),this.listDoubleSelection=nF.bindTo(this.contextKeyService),this.listMultiSelection=sF.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Vl(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||m.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||m.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(wg)&&(this._useAltAsMultipleSelectionModifier=Vl(c));let m={};if(p.affectsConfiguration(qr)&&this.horizontalScrolling===void 0){const v=!!c.getValue(qr);m=Object.assign(Object.assign({},m),{horizontalScrolling:v})}if(p.affectsConfiguration(La)){const v=!!c.getValue(La);m=Object.assign(Object.assign({},m),{smoothScrolling:v})}if(p.affectsConfiguration(Fl)){const v=c.getValue(Fl);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(Bl)){const v=c.getValue(Bl);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:v})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new YJ(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=zf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};G4=$l([Je(5,$e),Je(6,eo),Je(7,oi),Je(8,Wi),Je(9,zi)],G4);let oz=class extends sRe{constructor(e,t,n,s,r,o,a,l,c,h){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(qr),[d,f]=i2(r,c,h);super(e,t,n,s,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Qo(l.getColorTheme(),YL)),d),{horizontalScrolling:u})),this.disposables=new de,this.disposables.add(f),this.contextKeyService=t2(o,this),this.themeService=l,this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=JL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),e2.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Vl(c),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),r.overrideStyles&&this.disposables.add(zf(this,l,r.overrideStyles)),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(wg)&&(this._useAltAsMultipleSelectionModifier=Vl(c));let m={};if(p.affectsConfiguration(qr)&&this.horizontalScrolling===void 0){const v=!!c.getValue(qr);m=Object.assign(Object.assign({},m),{horizontalScrolling:v})}if(p.affectsConfiguration(La)){const v=!!c.getValue(La);m=Object.assign(Object.assign({},m),{smoothScrolling:v})}if(p.affectsConfiguration(Fl)){const v=c.getValue(Fl);m=Object.assign(Object.assign({},m),{mouseWheelScrollSensitivity:v})}if(p.affectsConfiguration(Bl)){const v=c.getValue(Bl);m=Object.assign(Object.assign({},m),{fastScrollSensitivity:v})}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new YJ(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=zf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};oz=$l([Je(5,$e),Je(6,eo),Je(7,oi),Je(8,Wi),Je(9,zi)],oz);let az=class extends XL{constructor(e,t,n,s,r,o,a,l,c,h,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!h.getValue(qr),[f,g]=i2(o,h,u);super(e,t,n,s,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Qo(c.getColorTheme(),YL)),f),{horizontalScrolling:d})),this.disposables=new de,this.disposables.add(g),this.contextKeyService=t2(a,this),this.themeService=c,this.listSupportsMultiSelect=JL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),e2.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=iF.bindTo(this.contextKeyService),this.listDoubleSelection=nF.bindTo(this.contextKeyService),this.listMultiSelection=sF.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Vl(h),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||v.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||v.length>0)})),this.disposables.add(h.onDidChangeConfiguration(m=>{m.affectsConfiguration(wg)&&(this._useAltAsMultipleSelectionModifier=Vl(h));let v={};if(m.affectsConfiguration(qr)&&this.horizontalScrolling===void 0){const b=!!h.getValue(qr);v=Object.assign(Object.assign({},v),{horizontalScrolling:b})}if(m.affectsConfiguration(La)){const b=!!h.getValue(La);v=Object.assign(Object.assign({},v),{smoothScrolling:b})}if(m.affectsConfiguration(Fl)){const b=h.getValue(Fl);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:b})}if(m.affectsConfiguration(Bl)){const b=h.getValue(Bl);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:b})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new VRe(this,Object.assign({configurationService:h},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=zf(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};az=$l([Je(6,$e),Je(7,eo),Je(8,oi),Je(9,Wi),Je(10,zi)],az);class oF extends te{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new z),this.onDidOpen=this._onDidOpen.event,this._register(Le.filter(this.widget.onDidChangeSelection,s=>s.browserEvent instanceof KeyboardEvent)(s=>this.onSelectionFromKeyboard(s))),this._register(this.widget.onPointer(s=>this.onPointer(s.element,s.browserEvent))),this._register(this.widget.onMouseDblClick(s=>this.onMouseDblClick(s.element,s.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(q4))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(q4))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n,r=!1;this._open(this.getSelectedElement(),n,s,r,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class YJ extends oF{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class VRe extends oF{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class WRe extends oF{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function zRe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const s=e.softDispatch(n,i);return s&&s.enterChord?(t=!0,!1):(t=!1,!0)}}let lz=class extends JP{constructor(e,t,n,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=jw(t,r,o,c,h,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new Hf(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};lz=$l([Je(5,$e),Je(6,eo),Je(7,oi),Je(8,Wi),Je(9,zi),Je(10,sr)],lz);let cz=class extends $J{constructor(e,t,n,s,r,o,a,l,c,h,u){const{options:d,getAutomaticKeyboardNavigation:f,disposable:g}=jw(t,r,o,c,h,u);super(e,t,n,s,d),this.disposables.add(g),this.internals=new Hf(this,r,f,r.overrideStyles,o,a,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};cz=$l([Je(5,$e),Je(6,eo),Je(7,oi),Je(8,Wi),Je(9,zi),Je(10,sr)],cz);let hz=class extends PRe{constructor(e,t,n,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=jw(t,o,a,h,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new Hf(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};hz=$l([Je(6,$e),Je(7,eo),Je(8,oi),Je(9,Wi),Je(10,zi),Je(11,sr)],hz);let K4=class extends qJ{constructor(e,t,n,s,r,o,a,l,c,h,u,d){const{options:f,getAutomaticKeyboardNavigation:g,disposable:p}=jw(t,o,a,h,u,d);super(e,t,n,s,r,f),this.disposables.add(p),this.internals=new Hf(this,o,g,o.overrideStyles,a,l,c,h,d),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};K4=$l([Je(6,$e),Je(7,eo),Je(8,oi),Je(9,Wi),Je(10,zi),Je(11,sr)],K4);let uz=class extends RRe{constructor(e,t,n,s,r,o,a,l,c,h,u,d,f){const{options:g,getAutomaticKeyboardNavigation:p,disposable:m}=jw(t,a,l,u,d,f);super(e,t,n,s,r,o,g),this.disposables.add(m),this.internals=new Hf(this,a,p,a.overrideStyles,l,c,h,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};uz=$l([Je(7,$e),Je(8,eo),Je(9,oi),Je(10,Wi),Je(11,zi),Je(12,sr)],uz);function jw(i,e,t,n,s,r){var o;const a=()=>{let g=!!t.getContextKeyValue(ZJ);return g&&(g=!!n.getValue(rF)),g},l=r.isScreenReaderOptimized(),c=e.simpleKeyboardNavigation||l?"simple":n.getValue($D),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(qr),[u,d]=i2(e,n,s),f=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:d,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof n.getValue(y1)=="number"?n.getValue(y1):void 0,renderIndentGuides:n.getValue(jD),smoothScrolling:!!n.getValue(La),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:c==="simple",filterOnType:c==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:zRe(i,s),additionalScrollHeight:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(o=e.expandOnlyOnTwistieClick)!==null&&o!==void 0?o:n.getValue(qD)==="doubleClick"})}}let Hf=class{constructor(e,t,n,s,r,o,a,l,c){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=t2(r,e),this.listSupportsMultiSelect=JL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),e2.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=iF.bindTo(this.contextKeyService),this.hasDoubleSelection=nF.bindTo(this.contextKeyService),this.hasMultiSelection=sF.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Vl(l);const u=new Set;u.add(ZJ);const d=()=>{const g=c.isScreenReaderOptimized()?"simple":l.getValue($D);e.updateOptions({simpleKeyboardNavigation:g==="simple",filterOnType:g==="filter"})};this.updateStyleOverrides(s),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0)}),l.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(wg)&&(this._useAltAsMultipleSelectionModifier=Vl(l)),f.affectsConfiguration(y1)){const p=l.getValue(y1);g=Object.assign(Object.assign({},g),{indent:p})}if(f.affectsConfiguration(jD)){const p=l.getValue(jD);g=Object.assign(Object.assign({},g),{renderIndentGuides:p})}if(f.affectsConfiguration(La)){const p=!!l.getValue(La);g=Object.assign(Object.assign({},g),{smoothScrolling:p})}if(f.affectsConfiguration($D)&&d(),f.affectsConfiguration(rF)&&(g=Object.assign(Object.assign({},g),{automaticKeyboardNavigation:n()})),f.affectsConfiguration(qr)&&t.horizontalScrolling===void 0){const p=!!l.getValue(qr);g=Object.assign(Object.assign({},g),{horizontalScrolling:p})}if(f.affectsConfiguration(qD)&&t.expandOnlyOnTwistieClick===void 0&&(g=Object.assign(Object.assign({},g),{expandOnlyOnTwistieClick:l.getValue(qD)==="doubleClick"})),f.affectsConfiguration(Fl)){const p=l.getValue(Fl);g=Object.assign(Object.assign({},g),{mouseWheelScrollSensitivity:p})}if(f.affectsConfiguration(Bl)){const p=l.getValue(Bl);g=Object.assign(Object.assign({},g),{fastScrollSensitivity:p})}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(u)&&e.updateOptions({automaticKeyboardNavigation:n()})}),c.onDidChangeScreenReaderOptimized(()=>d())),this.navigator=new WRe(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){lt(this.styler),this.styler=e?zf(this.tree,this.themeService,e):te.None}dispose(){this.disposables=lt(this.disposables),lt(this.styler),this.styler=void 0}};Hf=$l([Je(4,$e),Je(5,eo),Je(6,oi),Je(7,Wi),Je(8,sr)],Hf);const HRe=En.as(M0.Configuration);HRe.registerConfiguration({id:"workbench",order:7,title:_("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[wg]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[_("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),_("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:_({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[q4]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[qr]:{type:"boolean",default:!1,description:_("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[y1]:{type:"number",default:8,minimum:0,maximum:40,description:_("tree indent setting","Controls tree indentation in pixels.")},[jD]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:_("render tree indent guides","Controls whether the tree should render indent guides.")},[La]:{type:"boolean",default:!1,description:_("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Fl]:{type:"number",default:1,description:_("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Bl]:{type:"number",default:5,description:_("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[$D]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[_("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),_("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),_("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:_("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[rF]:{type:"boolean",default:!0,markdownDescription:_("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[qD]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:_("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var hi;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(hi||(hi={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=_("sev.error","Error"),t[i.Warning]=_("sev.warning","Warning"),t[i.Info]=_("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function s(o){switch(o){case Ci.Error:return i.Error;case Ci.Warning:return i.Warning;case Ci.Info:return i.Info;case Ci.Ignore:return i.Hint}}i.fromSeverity=s;function r(o){switch(o){case i.Error:return Ci.Error;case i.Warning:return Ci.Warning;case i.Info:return Ci.Info;case i.Hint:return Ci.Ignore}}i.toSeverity=r})(hi||(hi={}));var GD;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){let o=[e];return s.source?o.push(s.source.replace("¦","\\¦")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("¦","\\¦")):o.push(s.code.value.replace("¦","\\¦")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(hi.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("¦","\\¦")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}i.makeKeyOptionalMessage=n})(GD||(GD={}));const qw=bt("markerService");class URe{constructor(){this._byResource=new as,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new as,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,s=!1,r=this._byResource.get(e);r&&(n=r.delete(t));let o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){var t,n,s,r;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:ht.empty():We.isUri(e)?(r=(s=this._byResource.get(e))===null||s===void 0?void 0:s.values())!==null&&r!==void 0?r:ht.empty():ht.map(ht.concat(...this._byOwner.values()),o=>o[1])}}class $Re{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new as,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===nt.inMemory||e.scheme===nt.walkThrough||e.scheme===nt.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===hi.Error?t.errors+=1:n===hi.Warning?t.warnings+=1:n===hi.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class yd{constructor(){this._onMarkerChanged=new cSe({delay:0,merge:yd._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new URe,this._stats=new $Re(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(_Q(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=yd._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}=n;if(o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:d,tags:f}}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(yd._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!n){const o=[];for(let a of this._data.values())for(let l of a)if(yd._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(yd._accept(c,s)){const h=a.push(c);if(r>0&&h===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new as;for(let n of e)for(let s of n)t.set(s,!0);return Array.from(t.keys())}}var LS=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Ip;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(Ip||(Ip={}));class C1 extends te{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new z),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Ip.None,this.cache=new Map,this.flushDelayer=new HSe(C1.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((s,r)=>this.accept(r,s)),(n=e.deleted)===null||n===void 0||n.forEach(s=>this.accept(s,void 0))}accept(e,t){if(this.state===Ip.Closed)return;let n=!1;Or(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return Or(n)?t:n}getBoolean(e,t){const n=this.get(e);return Or(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Or(n)?t:parseInt(n,10)}set(e,t){return LS(this,void 0,void 0,function*(){if(this.state===Ip.Closed)return;if(Or(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}delete(e){return LS(this,void 0,void 0,function*(){if(!(this.state===Ip.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return LS(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}dispose(){this.flushDelayer.dispose(),super.dispose()}}C1.DEFAULT_FLUSH_DELAY=100;class dz{constructor(){this.onDidChangeItemsExternal=Le.None,this.items=new Map}updateItems(e){return LS(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const nC="__$__targetStorageMarker",yg=bt("storageService");var Z4;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(Z4||(Z4={}));class n2 extends te{constructor(e={flushInterval:n2.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Tx),this._onDidChangeTarget=this._register(new Tx),this._onWillSaveState=this._register(new z),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===nC?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.get(e,n)}getBoolean(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getBoolean(e,n)}getNumber(e,t,n){var s;return(s=this.getStorage(t))===null||s===void 0?void 0:s.getNumber(e,n)}store(e,t,n,s){if(Or(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,s),(r=this.getStorage(n))===null||r===void 0||r.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var s,r;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(s=this.getStorage(t))===null||s===void 0||s.set(nC,JSON.stringify(o))):typeof o[e]=="number"&&(delete o[e],(r=this.getStorage(t))===null||r===void 0||r.set(nC,JSON.stringify(o)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(nC,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}n2.DEFAULT_FLUSH_INTERVAL=60*1e3;class jRe extends n2{constructor(){super(),this.globalStorage=this._register(new C1(new dz)),this.workspaceStorage=this._register(new C1(new dz)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var QJ=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Y4=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new Q4(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};Y4=QJ([AS(0,yn)],Y4);let Q4=class up{constructor(e,t,n,s,r){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=s,this._menuService=r,this._disposables=new de,this._menuGroups=[],this._contextKeys=new Set,this._build();const o=new mi(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(o),this._disposables.add(ga.onDidChangeMenu(c=>{c.has(e)&&o.schedule()}));const a=this._disposables.add(new de),l=()=>{const c=new mi(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(c),a.add(s.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&c.schedule()}))};this._onDidChange=new z({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=ga.getMenuItems(this._id);let t;e.sort(up._compareMenuItems);for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(up._fillInKbExprKeys(e.when,this._contextKeys),$_(e)){if(e.command.precondition&&up._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;up._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&ga.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[s,r]=n,o=[];for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=$_(a)?new xu(a.command,a.alt,e,this._contextKeyService,this._commandService):new $Q(a,this._menuService,this._contextKeyService,e);o.push(l)}o.length>0&&t.push([s,o])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;let a=n.localeCompare(s);if(a!==0)return a}let r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:up._compareTitles($_(e)?e.command.title:e.title,$_(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};Q4=QJ([AS(2,yn),AS(3,$e),AS(4,O0)],Q4);var qRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class GRe extends te{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(pt(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const s=this.model.deltaDecorations(n,t);for(let r=0;r<s.length;r++)this._markersData.set(s[r],e[r]);return n.length!==0||s.length!==0}getMarker(e){return this._markersData.get(e.id)}}let X4=class extends te{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new z),this._markerDecorations=new as,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new GRe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===nt.inMemory||e.uri.scheme===nt.internal||e.uri.scheme===nt.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(s=>({range:this._createDecorationRange(e.model,s),options:this._createDecorationOption(s)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=F.lift(t);return t.severity===hi.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case hi.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case hi.Warning:t="squiggly-warning",n=pr(kIe),s=20,o={color:pr(JEe),position:Dl.Inline};break;case hi.Info:t="squiggly-info",n=pr(LIe),s=10;break;case hi.Error:default:t="squiggly-error",n=pr(DIe),s=30,o={color:pr(XEe),position:Dl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Ml.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};X4=qRe([fz(0,Ps),fz(1,qw)],X4);var KRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let J4=class extends te{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new z,this._accessibilityModeEnabledContext=oMe.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};J4=KRe([gz(0,$e),gz(1,Wi)],J4);var sC=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class ZRe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return sC(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(r){console.error(r)}const n=document.activeElement,s=document.body.appendChild(ue("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(s)})}readText(e){return sC(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return sC(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return sC(this,void 0,void 0,function*(){this.findText=e})}}var YRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},pz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rC=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function oC(i){return i.scheme===nt.file?i.fsPath:i.path}let XJ=0;class aC{constructor(e,t,n,s,r,o,a){this.id=++XJ,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class mz{constructor(e,t){this.resourceLabel=e,this.reason=t}}class _z{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);let n=[];return e.length>0&&n.push(_({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(_({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class QRe{constructor(e,t,n,s,r,o,a){this.id=++XJ,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new _z),this.removedResources.has(t)||this.removedResources.set(t,new mz(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new _z),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new mz(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class JJ{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new cX(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];n&&(s>=t||c.id!==e.elements[s])&&(n=!1,r=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class dI{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const eee=new JJ("","");eee.locked=!0;let KD=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=Wm.None,n=dl.None){if(e.type===0){const s=oC(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new aC(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=oC(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new aC(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new QRe(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new JJ(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=oC(r.resource),a=this.getUriComparisonKey(r.resource),l=new aC(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=oC(r.resource),a=this.getUriComparisonKey(r.resource),l=new aC(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new cX(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof dl){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Ze(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}_invokeWorkspacePrepare(e){return rC(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return te.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?te.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(te.None);const n=e.actual.prepareUndoRedo();return n?sY(n)?t(n):n.then(s=>t(s)):t(te.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||eee);return new dI(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new lC(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new lC}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,_({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,s){return rC(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ci.Info,_("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[_({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),_("nok","Undo this File"),_("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;s=!0}let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=_({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new dI([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof dl){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}_confirmAndContinueUndo(e,t,n){return rC(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ci.Info,_("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[_("confirmDifferentSource.yes","Yes"),_("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof dl){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new lC(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new lC}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,_({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,_({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return rC(this,void 0,void 0,function*(){let s;try{s=yield this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=_({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new dI([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof dl){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};KD=YRe([pz(0,NJ),pz(1,zn)],KD);class lC{constructor(e){this.returnValue=e}}cg(Bw,KD);const XRe=new RegExp(`(\\\\)?\\$\\((${Zs.iconNameExpression}(?:${Zs.iconModifierExpression})?)\\)`,"g");function lm(i){const e=new Array;let t,n=0,s=0;for(;(t=XRe.exec(i))!==null;){s=t.index||0,e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:JRe({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function JRe(i){const e=ue("span");return e.classList.add(...Zs.asClassNameArray(i)),e}const eOe={buttonBackground:Z.fromHex("#0E639C"),buttonHoverBackground:Z.fromHex("#006BB3"),buttonForeground:Z.white};class bz extends te{constructor(e,t){super(),this._onDidClick=this._register(new z),this.options=t||Object.create(null),Oa(this.options,eOe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(At.addTarget(this._element)),[Ae.CLICK,jt.Tap].forEach(n=>{this._register(ne(this._element,n,s=>{if(!this.enabled){It.stop(s);return}this._onDidClick.fire(s)}))}),this._register(ne(this._element,Ae.KEY_DOWN,n=>{const s=new ui(n);let r=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(n),r=!0):s.equals(9)&&(this._element.blur(),r=!0),r&&It.stop(s,!0)})),this._register(ne(this._element,Ae.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(ne(this._element,Ae.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Im(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?Mw(this._element,...lm(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const tOe={badgeBackground:Z.fromHex("#4D4D4D"),badgeForeground:Z.fromHex("#FFFFFF")};class e3{constructor(e,t){this.count=0,this.options=t||Object.create(null),Oa(this.options,tOe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=se(e,ue(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=mo(this.countFormat,this.count),this.element.title=mo(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const vz="done",wz="active",fI="infinite",yz="discrete",iOe={progressBarBackground:Z.fromHex("#0E70C0")};class nOe extends te{constructor(e,t){super(),this.options=t||Object.create(null),Oa(this.options,iOe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new mi(()=>gr(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(wz,fI,yz),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(vz),this.element.classList.contains(fI)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(yz,vz),this.element.classList.add(wz,fI),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class aF{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const tee=new aF("id#");const gI={},sOe=new aF("quick-input-button-icon-");function t3(i){if(!i)return;let e;const t=i.dark.toString();return gI[t]?e=gI[t]:(e=sOe.nextId(),kM(`.${e}`,`background-image: ${Gc(i.light||i.dark)}`),kM(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Gc(i.dark)}`),gI[t]=e),e}const rOe={ctrlCmd:!1,alt:!1};var S1;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(S1||(S1={}));var Zo;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(Zo||(Zo={}));function oOe(i,e={}){const t=lF(e);return t.textContent=i,t}function aOe(i,e={}){const t=lF(e);return iee(t,cOe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function lF(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class lOe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function iee(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");r.href="#",t.disposables.add(tn(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{iee(s,r,t,n)})}function cOe(i,e){const t={type:1,children:[]};let n=0,s=t;const r=[],o=new lOe(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&i3(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&hOe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=i3(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const h={type:c,children:[]};c===5&&(h.index=n,n++),s.children.push(h),r.push(s),s=h}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function hOe(i,e){return i3(i,e)!==0}function i3(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class uOe{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class dOe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new uOe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const S_=ue,fOe={inputBackground:Z.fromHex("#3C3C3C"),inputForeground:Z.fromHex("#CCCCCC"),inputValidationInfoBorder:Z.fromHex("#55AAFF"),inputValidationInfoBackground:Z.fromHex("#063B49"),inputValidationWarningBorder:Z.fromHex("#B89500"),inputValidationWarningBackground:Z.fromHex("#352A05"),inputValidationErrorBorder:Z.fromHex("#BE1100"),inputValidationErrorBackground:Z.fromHex("#5A1D1D")};class nee extends Jr{constructor(e,t,n){var s;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new z),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new z),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Oa(this.options,fOe,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(s=this.options.tooltip)!==null&&s!==void 0?s:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=se(e,S_(".monaco-inputbox.idle"));let r=this.options.flexibleHeight?"textarea":"input",o=se(this.element,S_(".ibwrapper"));if(this.input=se(o,S_(r+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=se(o,S_("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new xP(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),se(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Vt(document,"selectionchange")),l=Le.filter(a.event,()=>{const c=document.getSelection();return(c==null?void 0:c.anchorNode)===o});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Zc(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:DM(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return uo(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.options.flexibleHeight&&this.options.flexibleWidth?this.input.style.width=`calc(100% - ${e}px)`:this.input.style.paddingRight=e+"px",this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=uo(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=se(s,S_(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?aOe(this.message.content,r):oOe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background?a.background.toString():"",o.style.color=a.foreground?a.foreground.toString():"",o.style.border=a.border?`1px solid ${a.border}`:"",se(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=_("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=_("alertWarningMessage","Warning: {0}",this.message.content):n=_("alertInfoMessage","Info: {0}",this.message.content),dg(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=DM(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class see extends nee{constructor(e,t,n){const s=_({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),r=` or ⇅ ${s}`,o=` (⇅ ${s})`;super(e,t,n),this.history=new dOe(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(r)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?r:o,c=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=c:this.setPlaceHolder(c)}};this.observer=new MutationObserver((l,c)=>{l.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=c=>{if(this.placeholder.endsWith(c)){const h=this.placeholder.slice(0,this.placeholder.length-c.length);return n.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};l(o)||l(r)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,lD(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,lD(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const gOe=ue;class pOe extends te{constructor(e){super(),this.parent=e,this.onKeyDown=t=>ne(this.inputBox.inputElement,Ae.KEY_DOWN,n=>{t(new ui(n))}),this.onMouseDown=t=>ne(this.inputBox.inputElement,Ae.MOUSE_DOWN,n=>{t(new Ur(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=se(this.parent,gOe(".quick-input-box")),this.inputBox=this._register(new nee(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ci.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ci.Info?1:e===Ci.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ci.Info?1:e===Ci.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Iu{constructor(e,t){this.supportIcons=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.domNode=document.createElement("span"),this.domNode.className="monaco-highlighted-label",e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=Iu.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&ua(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);e.push(ue("span",void 0,...this.supportIcons?lm(o):[o])),t=n.end}const s=this.text.substring(n.start,n.end),r=ue("span.highlight",void 0,...this.supportIcons?lm(s):[s]);n.extraClasses&&r.classList.add(n.extraClasses),e.push(r),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(ue("span",void 0,...this.supportIcons?lm(n):[n]))}Mw(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,"⏎"})}}class Zm{constructor(e="",t=!1){var n,s,r;if(this.value=e,typeof this.value!="string")throw Sl("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(s=t.supportThemeIcons)!==null&&s!==void 0?s:!1,this.supportHtml=(r=t.supportHtml)!==null&&r!==void 0?r:!1)}appendText(e,t=0){return this.value+=mOe(this.supportThemeIcons?b3e(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function Kb(i){return ree(i)?!i.value:Array.isArray(i)?i.every(Kb):!0}function ree(i){return i instanceof Zm?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function mOe(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function pI(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function _Oe(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}var n3=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function bOe(i,e){xa(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class vOe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return n3(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||xa(e)||e instanceof HTMLElement)s=e;else if(!Cb(e.markdown))s=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(_("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Ra;const r=this._cancellationTokenSource.token;if(s=yield e.markdown(r),this.isDisposed||r.isCancellationRequested)return}this.show(s,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n==null||n.dispose()}hasContent(e){return e?ree(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function wOe(i,e,t){let n,s;const r=(h,u)=>{var d;h&&(s==null||s.dispose(),s=void 0),u&&(n==null||n.dispose(),n=void 0),(d=i.onDidHideHover)===null||d===void 0||d.call(i)},o=(h,u,d)=>new Os(()=>n3(this,void 0,void 0,function*(){(!s||s.isDisposed)&&(s=new vOe(i,d||e,h>0),yield s.update(t,u))}),h),a=()=>{if(n)return;const h=new de,u=g=>r(!1,g.fromElement===e);h.add(ne(e,Ae.MOUSE_LEAVE,u,!0));const d=()=>r(!0,!0);h.add(ne(e,Ae.MOUSE_DOWN,d,!0));const f={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const g=p=>f.x=p.x+10;h.add(ne(e,Ae.MOUSE_MOVE,g,!0))}h.add(o(i.delay,!1,f)),n=h},l=ne(e,Ae.MOUSE_OVER,a,!0);return{show:h=>{r(!1,!0),o(0,h)},hide:()=>{r(!0,!0)},update:h=>n3(this,void 0,void 0,function*(){t=h,yield s==null?void 0:s.update(t)}),dispose:()=>{l.dispose(),r(!0,!0)}}}class mI{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class cF extends te{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new mI(se(e,ue(".monaco-icon-label")))),this.labelContainer=se(this.domNode.element,ue(".monaco-icon-label-container"));const n=se(this.labelContainer,ue("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new mI(se(this.labelContainer,ue("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new SOe(n,!!t.supportIcons):this.nameNode=new yOe(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Iu(se(this.descriptionContainer.element,ue("span.label-description")),!!t.supportIcons):this.descriptionNodeFactory=()=>this._register(new mI(se(this.descriptionContainer.element,ue("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"];n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough")),this.domNode.className=s.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Iu?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)bOe(e,t);else{const s=wOe(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class yOe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ua(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=se(this.container,ue("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;se(this.container,ue("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&se(this.container,ue("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function COe(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>Nn.intersect(r,a)).filter(a=>!Nn.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class SOe{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ua(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Iu(se(this.container,ue("a.label-name",{id:t==null?void 0:t.domId})),this.supportIcons)),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",s=COe(e,n,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=ue("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});new Iu(se(this.container,c),this.supportIcons).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&se(c,ue("span.label-separator",void 0,n))}}}}const cC=ue;class hF{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=se(e,cC(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&hF.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(se(this.domNode,cC("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Pn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const s=X5.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(n!=null&&n.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(n!=null&&n.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(n!=null&&n.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(n!=null&&n.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,s){se(e,this.createKeyElement(t,n?".highlight":"")),s&&se(e,cC("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){se(e,this.createKeyElement(_("unbound","Unbound")))}createKeyElement(e,t=""){const n=cC("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&ua(e.firstPart,t.firstPart)&&ua(e.chordPart,t.chordPart)}}const Cz=new vb(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function xOe(i,e,t=!1){const n=i||"",s=e||"",r=Cz.value.collator.compare(n,s);return Cz.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function DOe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=kOe(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=xOe(n,s);return l!==0?l:n.localeCompare(s)}function kOe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}var oee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},LOe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const Ja=ue;class AOe{constructor(e){this.hidden=!1,this._onChecked=new z,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class Gw{get templateId(){return Gw.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=se(e,Ja(".quick-input-list-entry"));const n=se(t.entry,Ja("label.quick-input-list-label"));t.toDisposeTemplate.push(tn(n,Ae.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=se(n,Ja("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(tn(t.checkbox,Ae.CHANGE,c=>{t.element.checked=t.checkbox.checked}));const s=se(n,Ja(".quick-input-list-rows")),r=se(s,Ja(".quick-input-list-row")),o=se(s,Ja(".quick-input-list-row"));t.label=new cF(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=se(r,Ja(".quick-input-list-entry-keybinding"));t.keybinding=new hF(a,bo);const l=se(o,Ja(".quick-input-list-label-meta"));return t.detail=new Iu(l,!0),t.separator=se(t.entry,Ja(".quick-input-list-separator")),t.actionBar=new Zc(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=lt(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(c=>n.checkbox.checked=c));const{labelHighlights:s,descriptionHighlights:r,detailHighlights:o}=e,a=Object.create(null);a.matches=s||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=r||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),n.detail.set(e.saneDetail,o),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((c,h)=>{let u=c.iconClass||(c.iconPath?t3(c.iconPath):void 0);c.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const d=new Mo(`id-${h}`,"",u,!0,()=>LOe(this,void 0,void 0,function*(){e.fireButtonTriggered({button:c,item:e.item})}));return d.tooltip=c.tooltip||"",d}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=lt(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=lt(e.toDisposeElement),e.toDisposeTemplate=lt(e.toDisposeTemplate)}}Gw.ID="listelement";class EOe{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Gw.ID}}var ki;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(ki||(ki={}));class uF{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new z,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new z,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new z,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new z,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new z,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new z,this.onKeyDown=this._onKeyDown.event,this._onLeave=new z,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=se(this.parent,Ja(".quick-input-list"));const s=new EOe,r=new TOe;this.list=n.createList("QuickInput",this.container,s,[new Gw],{identityProvider:{getId:o=>o.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(o=>{const a=new ui(o);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(ut?o.metaKey:o.ctrlKey)&&this.list.setFocus(os(this.list.length));break;case 16:const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break;case 18:const c=this.list.getFocus();c.length===1&&c[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(o=>{o.browserEvent.button!==2&&o.browserEvent.preventDefault()})),this.disposables.push(ne(this.container,Ae.CLICK,o=>{(o.x||o.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(o=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(o=>{typeof o.index=="number"&&(o.browserEvent.preventDefault(),this.list.setSelection([o.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Le.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Le.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,s=t.length;n<s;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=lt(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,s,r)=>{var o,a,l;if(s.type!=="separator"){const c=r&&e[r-1],h=s.label&&s.label.replace(/\r?\n/g," "),u=s.meta&&s.meta.replace(/\r?\n/g," "),d=s.description&&s.description.replace(/\r?\n/g," "),f=s.detail&&s.detail.replace(/\r?\n/g," "),g=s.ariaLabel||[h,d,f].map(p=>SDe(p)).filter(p=>!!p).join(", ");n.push(new AOe({index:r,item:s,saneLabel:h,saneMeta:u,saneAriaLabel:g,saneDescription:d,saneDetail:f,labelHighlights:(o=s.highlights)===null||o===void 0?void 0:o.label,descriptionHighlights:(a=s.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=s.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:c&&c.type==="separator"?c:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===ki.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=ki.First),e===ki.Previous&&this.list.getFocus()[0]===0&&(e=ki.Last),e===ki.Second&&this.list.length<2&&(e=ki.First),e){case ki.First:this.list.focusFirst();break;case ki.Second:this.list.focusNth(1);break;case ki.Last:this.list.focusLast();break;case ki.Next:this.list.focusNext();break;case ki.Previous:this.list.focusPrevious();break;case ki.NextPage:this.list.focusNextPage();break;case ki.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this.inputElements[n.index-1];n.separator=s&&s.type==="separator"?s:void 0});else{let n;this.elements.forEach(s=>{const r=this.matchOnLabel?Fd(iC(e,tC(s.saneLabel))):void 0,o=this.matchOnDescription?Fd(iC(e,tC(s.saneDescription||""))):void 0,a=this.matchOnDetail?Fd(iC(e,tC(s.saneDetail||""))):void 0,l=this.matchOnMeta?Fd(iC(e,tC(s.saneMeta||""))):void 0;if(r||o||a||l?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=!s.item.alwaysShow),s.separator=void 0,!this.sortByLabel){const c=s.index&&this.inputElements[s.index-1];n=c&&c.type==="separator"?c:n,n&&!s.hidden&&(s.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((s,r)=>IOe(s,r,n))}return this.elementsToIndexes=t.reduce((n,s,r)=>(n.set(s.item,r),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=lt(this.elementDisposables),this.disposables=lt(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}oee([Qi],uF.prototype,"onDidChangeFocus",null);oee([Qi],uF.prototype,"onDidChangeSelection",null);function IOe(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:DOe(i.saneLabel,e.saneLabel,t)}class TOe{getWidgetAriaLabel(){return _("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var Sz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const ar=ue,NOe=zo("quick-input-back",be.arrowLeft),s3={iconClass:NOe.classNames,tooltip:_("quickInput.back","Back"),handle:-1};class s2 extends te{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=s2.noPromptMessage,this._severity=Ci.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new z),this.onDidHideEmitter=this._register(new z),this.onDisposeEmitter=this._register(new z),this.visibleDisposables=this._register(new de),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!vu;this._ignoreFocusOut=e&&!vu,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=S1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Os,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this.buttons.filter(o=>o===s3);this.ui.leftActionBar.push(s.map((o,a)=>{const l=new Mo(`id-${a}`,"",o.iconClass||t3(o.iconPath),!0,()=>Sz(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this.buttons.filter(o=>o!==s3);this.ui.rightActionBar.push(r.map((o,a)=>{const l=new Mo(`id-${a}`,"",o.iconClass||t3(o.iconPath),!0,()=>Sz(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(o)}));return l.tooltip=o.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Mw(this.ui.message,...lm(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?_("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ci.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}s2.noPromptMessage=_("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class x1 extends s2{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new z),this.onWillAcceptEmitter=this._register(new z),this.onDidAcceptEmitter=this._register(new z),this.onDidCustomEmitter=this._register(new z),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Zo.NONE:Zo.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new z),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new z),this.onDidTriggerItemButtonEmitter=this._register(new z),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?rOe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(ki.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(ki.Next),this.canSelectMany&&this.ui.list.domFocus(),It.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(ki.Previous):this.ui.list.focus(ki.Last),this.canSelectMany&&this.ui.list.domFocus(),It.stop(e,!0);break;case 12:this.ui.list.focus(ki.NextPage),this.canSelectMany&&this.ui.list.domFocus(),It.stop(e,!0);break;case 11:this.ui.list.focus(ki.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),It.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ki.First),It.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(ki.Last),It.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Al(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Al(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&Al(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ne(this.ui.container,Ae.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new ui(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const[a,l]=o.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const s=this.ariaLabel||this.placeholder||x1.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Zo.NONE:this._itemActivation=Zo.FIRST;break;case Zo.SECOND:this.ui.list.focus(ki.Second),this._itemActivation=Zo.FIRST;break;case Zo.LAST:this.ui.list.focus(ki.Last),this._itemActivation=Zo.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(ki.First)),this.keepScrollPosition&&(this.scrollTop=e)}}x1.DEFAULT_ARIA_LABEL=_("quickInputBox.ariaLabel","Type to narrow down results.");class r2 extends te{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new z),this.onDidCustomEmitter=this._register(new z),this.onDidTriggerButtonEmitter=this._register(new z),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new z),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new z),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(ne(window,Ae.KEY_DOWN,e,!0)),this._register(ne(window,Ae.KEY_UP,e,!0)),this._register(ne(window,Ae.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=se(this.parentElement,ar(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=Gr(e),n=se(e,ar(".quick-input-titlebar")),s=this._register(new Zc(n));s.domNode.classList.add("quick-input-left-action-bar");const r=se(n,ar(".quick-input-title")),o=this._register(new Zc(n));o.domNode.classList.add("quick-input-right-action-bar");const a=se(e,ar(".quick-input-description")),l=se(e,ar(".quick-input-header")),c=se(l,ar("input.quick-input-check-all"));c.type="checkbox",this._register(tn(c,Ae.CHANGE,T=>{const N=c.checked;S.setAllVisibleChecked(N)})),this._register(ne(c,Ae.CLICK,T=>{(T.x||T.y)&&f.setFocus()}));const h=se(l,ar(".quick-input-description")),u=se(l,ar(".quick-input-and-message")),d=se(u,ar(".quick-input-filter")),f=this._register(new pOe(d));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=se(d,ar(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new e3(g,{countFormat:_({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),m=se(d,ar(".quick-input-count"));m.setAttribute("aria-live","polite");const v=new e3(m,{countFormat:_({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),b=se(l,ar(".quick-input-action")),w=new bz(b);w.label=_("ok","OK"),this._register(w.onDidClick(T=>{this.onDidAcceptEmitter.fire()}));const y=se(l,ar(".quick-input-action")),x=new bz(y);x.label=_("custom","Custom"),this._register(x.onDidClick(T=>{this.onDidCustomEmitter.fire()}));const L=se(u,ar(`#${this.idPrefix}message.quick-input-message`)),S=this._register(new uF(e,this.idPrefix+"list",this.options));this._register(S.onChangedAllVisibleChecked(T=>{c.checked=T})),this._register(S.onChangedVisibleCount(T=>{p.setCount(T)})),this._register(S.onChangedCheckedCount(T=>{v.setCount(T)})),this._register(S.onLeave(()=>{setTimeout(()=>{f.setFocus(),this.controller instanceof x1&&this.controller.canSelectMany&&S.clearFocus()},0)})),this._register(S.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const k=new nOe(e);k.getContainer().classList.add("quick-input-progress");const D=Im(e);return this._register(D),this._register(ne(e,Ae.FOCUS,T=>{this.previousFocusElement=T.relatedTarget instanceof HTMLElement?T.relatedTarget:void 0},!0)),this._register(D.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(S1.Blur),this.previousFocusElement=void 0})),this._register(ne(e,Ae.FOCUS,T=>{f.setFocus()})),this._register(ne(e,Ae.KEY_DOWN,T=>{const N=new ui(T);switch(N.keyCode){case 3:It.stop(T,!0),this.onDidAcceptEmitter.fire();break;case 9:It.stop(T,!0),this.hide(S1.Gesture);break;case 2:if(!N.altKey&&!N.ctrlKey&&!N.metaKey){const $=[".action-label.codicon"];e.classList.contains("show-checkboxes")?$.push("input"):$.push("input[type=text]"),this.getUI().list.isDisplayed()&&$.push(".monaco-list");const U=e.querySelectorAll($.join(", "));N.shiftKey&&N.target===U[0]?(It.stop(T,!0),U[U.length-1].focus()):!N.shiftKey&&N.target===U[U.length-1]&&(It.stop(T,!0),U[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:s,titleBar:n,title:r,description1:a,description2:h,rightActionBar:o,checkAll:c,filterContainer:d,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:m,count:v,okContainer:b,ok:w,message:L,customButtonContainer:y,customButton:x,list:S,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:T=>this.show(T),hide:()=>this.hide(),setVisibilities:T=>this.setVisibilities(T),setComboboxAccessibility:T=>this.setComboboxAccessibility(T),setEnabled:T=>this.setEnabled(T),setContextKey:T=>this.options.setContextKey(T)},this.updateStyles(),this.ui}pick(e,t={},n=ei.None){return new Promise((s,r)=>{let o=h=>{o=s,t.onKeyMods&&t.onKeyMods(a.keyMods),s(h)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const u=h[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const u=h[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const u=a.items.indexOf(h.item);if(u!==-1){const d=a.items.slice(),f=d.splice(u,1),g=a.activeItems.filter(m=>m!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=d,g&&(a.activeItems=g),a.keepScrollPosition=p}}}))),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{lt(c),o(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,u])=>{l=u,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(d=>d.type!=="separator"&&d.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{r(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new x1(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ci.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Mw(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const s=this.options.backKeybindingLabel();s3.tooltip=s?_("quickInput.backWithKeybinding","Back ({0})",s):_("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const s=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",s||(this.previousFocusElement&&this.previousFocusElement.offsetParent?(this.previousFocusElement.focus(),this.previousFocusElement=void 0):this.options.returnFocus()),n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,r2.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}r2.MAX_WIDTH=600;var r3;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(r3||(r3={}));const aee={Quickaccess:"workbench.contributions.quickaccess"};class MOe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),pt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return vL([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}En.add(aee.Quickaccess,new MOe);const lee=bt("quickInputService");var ROe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let o3=class extends te{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=En.as(aee.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var s;const[r,o]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a==null?void 0:a.descriptor;if(a&&o&&l===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let g;if(a&&l&&l!==o){const p=a.value.substr(l.prefix.length);p&&(g=`${o.prefix}${p}`)}if(!g){const p=r==null?void 0:r.defaultFilterValue;p===r3.LAST?g=this.lastAcceptedPickerValues.get(o):typeof p=="string"&&(g=`${o.prefix}${p}`)}typeof g=="string"&&(e=g)}const c=new de,h=c.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,o,n),h.placeholder=o==null?void 0:o.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(s=n==null?void 0:n.itemActivation)!==null&&s!==void 0?s:Zo.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=g=>g.substring(o?o.prefix.length:0),o!=null&&o.placeholder&&(h.ariaLabel=o==null?void 0:o.placeholder);let u,d;t&&(u=new Promise(g=>d=g),c.add(Af(h.onWillAccept)(g=>{g.veto(),h.hide()}))),c.add(this.registerPickerListeners(h,r,o,e));const f=c.add(new Ra);if(r&&c.add(r.provide(h,f.token)),Af(h.onDidHide)(()=>{h.selectedItems.length===0&&f.cancel(),c.dispose(),d==null||d(h.selectedItems)}),h.show(),t)return u}adjustValueSelection(e,t,n){var s;let r;n!=null&&n.preserveValue?r=[e.value.length,e.value.length]:r=[(s=t==null?void 0:t.prefix.length)!==null&&s!==void 0?s:0,e.value.length],e.valueSelection=r}registerPickerListeners(e,t,n,s){const r=new de,o=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return r.add(pt(()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):o.value=a})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};o3=ROe([xz(0,lee),xz(1,zt)],o3);var OOe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},x_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let a3=class extends s2e{constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=s,this.layoutService=r,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(o3))),this._quickAccess}createController(e=this.layoutService,t){var n,s;const r={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,c,h,u)=>this.instantiationService.createInstance(G4,a,l,c,h,u),styles:this.computeStyles()},o=this._register(new r2(Object.assign(Object.assign({},r),t)));return o.layout(e.dimension,(s=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&s!==void 0?s:0),this._register(e.onDidLayout(a=>{var l,c;return o.layout(a,(c=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&c!==void 0?c:0)})),this._register(o.onShow(()=>this.resetContextKeys())),this._register(o.onHide(()=>this.resetContextKeys())),o}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new De(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=ei.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Qo(this.theme,{quickInputBackground:UV,quickInputForeground:QAe,quickInputTitleBackground:XAe,contrastBorder:Vi,widgetShadow:zm})),inputBox:Qo(this.theme,{inputForeground:pX,inputBackground:gX,inputBorder:mX,inputValidationInfoBackground:pP,inputValidationInfoForeground:mP,inputValidationInfoBorder:_P,inputValidationWarningBackground:_X,inputValidationWarningForeground:bX,inputValidationWarningBorder:vX,inputValidationErrorBackground:wX,inputValidationErrorForeground:yX,inputValidationErrorBorder:CX}),countBadge:Qo(this.theme,{badgeBackground:Ob,badgeForeground:Pb,badgeBorder:Vi}),button:Qo(this.theme,{buttonForeground:HAe,buttonBackground:d4,buttonHoverBackground:UAe,buttonBorder:Vi}),progressBar:Qo(this.theme,{progressBarBackground:$Ae}),keybindingLabel:Qo(this.theme,{keybindingLabelBackground:tEe,keybindingLabelForeground:iEe,keybindingLabelBorder:nEe,keybindingLabelBottomBorder:sEe,keybindingLabelShadow:zm}),list:Qo(this.theme,{listBackground:UV,listInactiveFocusForeground:mS,listInactiveSelectionIconForeground:_S,listInactiveFocusBackground:bS,listFocusOutline:Ns,listInactiveFocusOutline:Ns,pickerGroupBorder:eEe,pickerGroupForeground:JAe})}}};a3=OOe([x_(0,zt),x_(1,$e),x_(2,oi),x_(3,sr),x_(4,QL)],a3);var cee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Cd=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let l3=class extends a3{constructor(e,t,n,s,r,o){super(t,n,s,r,o),this.host=void 0;const a=Ym.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};l3=cee([Cd(1,zt),Cd(2,$e),Cd(3,oi),Cd(4,sr),Cd(5,QL)],l3);let c3=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(l3,e);this.mapEditorToService.set(e,t),Af(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=ei.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};c3=cee([Cd(0,zt),Cd(1,si)],c3);class Ym{constructor(e){this.editor=e,this.widget=new o2(this.editor)}static get(e){return e.getContribution(Ym.ID)}dispose(){this.widget.dispose()}}Ym.ID="editor.controller.quickInput";class o2{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return o2.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}o2.ID="editor.contrib.quickInputWidget";Bs(Ym.ID,Ym);var xt;(function(i){const e=new u1;class t{constructor(l,c){this._serviceId=l,this._factory=c,this._value=null}get id(){return this._serviceId}get(l){if(!this._value){if(l&&(this._value=l[this._serviceId.toString()]),this._value||(this._value=this._factory(l)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function s(a,l){let c=new t(a,l);return n.push(c),c}function r(a){let l=new u1;for(const[h,u]of mke())l.set(h,u);for(let h in a)a.hasOwnProperty(h)&&l.set(bt(h),a[h]);n.forEach(h=>l.set(h.id,h.get(a)));let c=new WD(l,!0);return l.set(zt,c),[l,c]}i.init=r,i.instantiationService=s(zt,()=>new WD(e,!0));const o=new zQ;i.configurationService=s(Wi,()=>o),i.resourceConfigurationService=s(gQ,()=>new QLe(o)),i.resourcePropertiesService=s(pQ,()=>new n4(o)),i.contextService=s(PQ,()=>new NL),i.labelService=s(Hw,()=>new e2e),i.telemetryService=s(P0,()=>new XLe),i.dialogService=s(NJ,()=>new ZLe),i.notificationService=s(zn,()=>new TL),i.markerService=s(qw,()=>new yd),i.modeService=s(Fs,a=>new p1),i.standaloneThemeService=s(zw,()=>new j4e),i.logService=s(th,()=>new Hke(new zke)),i.undoRedoService=s(Bw,a=>new KD(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=s(Ow,a=>new Zx(i.configurationService.get(a),i.modeService.get(a))),i.modelService=s(Ps,a=>new FD(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=s(J5,a=>new X4(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=s($e,a=>new N4(i.configurationService.get(a))),i.codeEditorService=s(si,a=>new OD(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=s(U0,()=>new IL),i.storageService=s(yg,()=>new jRe),i.editorWorkerService=s(qu,a=>new XM(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(xt||(xt={}));class POe extends te{constructor(e,t){super();const[n,s]=xt.init(t);this._serviceCollection=n,this._instantiationService=s;const r=this.get(Wi),o=this.get(zn),a=this.get(P0),l=this.get(oi),c=this.get(th),h=this.get($e);let u=(m,v)=>{let b=null;return t&&(b=t[m.toString()]),b||(b=v()),this._serviceCollection.set(m,b),b};u(sr,()=>new J4(h,r)),u(eo,()=>new j4(l));let d=u(yn,()=>new YLe(this._instantiationService)),f=u(zi,()=>this._register(new WQ(h,d,a,o,c,e))),g=u(QL,()=>new t2e(xt.codeEditorService.get(si),e));u(lee,()=>new c3(s,xt.codeEditorService.get(si)));let p=u(pg,()=>this._register(new V4(g)));u(_g,()=>new ZRe),u(mg,()=>{const m=new B4(a,o,p,f,l);return m.configure({blockMouse:!1}),this._register(m)}),u(O0,()=>new Y4(d)),u(LQ,()=>new JLe(xt.modelService.get(Ps)))}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}function hee(i,e,t){let n=new POe(i,e),s=null;n.has(Rl)||(s=new i4(xt.modelService.get()),n.set(Rl,s)),n.has(yu)||n.set(yu,new MM(n.get(si),n.get(yn)));let r=t(n);return s&&s.setEditor(r),r}function FOe(i,e,t){return hee(i,t||{},n=>new A4(i,e,n,n.get(zt),n.get(si),n.get(yn),n.get($e),n.get(zi),n.get(pg),n.get(zw),n.get(zn),n.get(Wi),n.get(sr),n.get(Ps),n.get(Fs)))}function BOe(i){return xt.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function VOe(i,e,t){return hee(i,t||{},n=>new E4(i,e,n,n.get(zt),n.get($e),n.get(zi),n.get(pg),n.get(qu),n.get(si),n.get(zw),n.get(zn),n.get(Wi),n.get(mg),n.get(U0),n.get(_g)))}function WOe(i,e){return new Yxe(i,e)}function zOe(i,e,t){return uJ(xt.modelService.get(),xt.modeService.get(),i,e,t)}function HOe(i,e){xt.modelService.get().setMode(i,xt.modeService.get().create(e))}function UOe(i,e,t){i&&xt.markerService.get().changeOne(e,i.uri,t)}function $Oe(i){return xt.markerService.get().read(i)}function jOe(i){return xt.markerService.get().onMarkerChanged(i)}function qOe(i){return xt.modelService.get().getModel(i)}function GOe(){return xt.modelService.get().getModels()}function KOe(i){return xt.modelService.get().onModelAdded(i)}function ZOe(i){return xt.modelService.get().onModelRemoved(i)}function YOe(i){return xt.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function QOe(i){return Gke(xt.modelService.get(),i)}function XOe(i,e){const t=xt.standaloneThemeService.get();return t.registerEditorContainer(i),j5.colorizeElement(t,xt.modeService.get(),i,e)}function JOe(i,e,t){return xt.standaloneThemeService.get().registerEditorContainer(document.body),j5.colorize(xt.modeService.get(),i,e,t)}function e5e(i,e,t=4){return xt.standaloneThemeService.get().registerEditorContainer(document.body),j5.colorizeModelLine(i,e,t)}function t5e(i){let e=Li.get(i);return e||{getInitialState:()=>gL,tokenize:(t,n,s,r)=>EDe(i,t,s,r)}}function i5e(i,e){xt.modeService.get().triggerMode(e);let n=t5e(e),s=Nl(i),r=[],o=n.getInitialState();for(let a=0,l=s.length;a<l;a++){let c=s[a],h=n.tokenize(c,!0,o,0);r[a]=h.tokens,o=h.endState}return r}function n5e(i,e){xt.standaloneThemeService.get().defineTheme(i,e)}function s5e(i){xt.standaloneThemeService.get().setTheme(i)}function r5e(){d2e()}function o5e(i,e){return Nt.registerCommand({id:i,handler:e})}function a5e(){return{create:FOe,onDidCreateEditor:BOe,createDiffEditor:VOe,createDiffNavigator:WOe,createModel:zOe,setModelLanguage:HOe,setModelMarkers:UOe,getModelMarkers:$Oe,onDidChangeMarkers:jOe,getModels:GOe,getModel:qOe,onDidCreateModel:KOe,onWillDisposeModel:ZOe,onDidChangeModelLanguage:YOe,createWebWorker:QOe,colorizeElement:XOe,colorize:JOe,colorizeModelLine:e5e,tokenize:i5e,defineTheme:n5e,setTheme:s5e,remeasureFonts:r5e,registerCommand:o5e,AccessibilitySupport:BN,ContentWidgetPositionPreference:UN,CursorChangeReason:$N,DefaultEndOfLine:jN,EditorAutoIndentStrategy:GN,EditorOption:KN,EndOfLinePreference:ZN,EndOfLineSequence:YN,MinimapPosition:nM,MouseTargetType:sM,OverlayWidgetPositionPreference:rM,OverviewRulerLane:oM,RenderLineNumbersType:aM,RenderMinimap:lM,ScrollbarVisibility:hM,ScrollType:cM,TextEditorCursorBlinkingStyle:pM,TextEditorCursorStyle:mM,TrackedRangeStickiness:_M,WrappingIndent:bM,ConfigurationChangedEvent:tY,BareFontInfo:Xd,FontInfo:OM,TextModelResolvedOptions:lS,FindMatch:zv,EditorType:dL,EditorOptions:ag}}function l5e(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function hC(i,e){return typeof i=="boolean"?i:e}function Dz(i,e){return typeof i=="string"?i:e}function c5e(i){const e={};for(const t of i)e[t]=!0;return e}function kz(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=c5e(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function h3(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,o){n=!0;let a="";if(typeof i[o]=="string")a=i[o];else if(i[o]&&i[o]instanceof RegExp)a=i[o].source;else throw i[o]===void 0?Bt(i,"language definition does not contain attribute '"+o+"', used at: "+e):Bt(i,"attribute reference '"+o+"' must be a string, used at: "+e);return lp(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let s=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,s)}function h5e(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let s=t.split(".");if(s.unshift(t),n<s.length)return s[n]}return null}function u5e(i,e,t,n){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){let h=kz(l.split("|"),i.ignoreCase);c=function(u){return a==="~"?h(u):!h(u)}}else if(a==="@"||a==="!@"){let h=i[l];if(!h)throw Bt(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!l5e(function(d){return typeof d=="string"},h))throw Bt(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);let u=kz(h,i.ignoreCase);c=function(d){return a==="@"?u(d):!u(d)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){let h=h3(i,"^"+l+"$");c=function(u){return a==="~"?h.test(u):!h.test(u)}}else c=function(h,u,d,f){return h3(i,"^"+Ph(i,l,u,d,f)+"$").test(h)};else if(l.indexOf("$")<0){let h=eu(i,l);c=function(u){return a==="=="?u===h:u!==h}}else{let h=eu(i,l);c=function(u,d,f,g,p){let m=Ph(i,h,d,f,g);return a==="=="?u===m:u!==m}}return s===-1?{name:t,value:n,test:function(h,u,d,f){return c(h,h,u,d,f)}}:{name:t,value:n,test:function(h,u,d,f){let g=h5e(h,u,d,s);return c(g||"",h,u,d,f)}}}function u3(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Bt(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Bt(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Bt(i,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!fLe(i,Ph(i,s,"",[],""))))throw Bt(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=s}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let s=0,r=t.length;s<r;s++)n[s]=u3(i,e,t[s]);return{group:n}}else if(t.cases){let n=[];for(let r in t.cases)if(t.cases.hasOwnProperty(r)){const o=u3(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:o,name:r}):r==="@eos"?n.push({test:function(a,l,c,h){return h},value:o,name:r}):n.push(u5e(i,e,r,o))}const s=i.defaultToken;return{test:function(r,o,a,l){for(const c of n)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw Bt(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class d5e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Bt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=h3(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=u3(e,this.name,t)}}function f5e(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=hC(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=hC(e.ignoreCase,!1),t.unicode=hC(e.unicode,!1),t.tokenPostfix=Dz(e.tokenPostfix,"."+t.languageId),t.defaultToken=Dz(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let h=c.include;if(h){if(typeof h!="string")throw Bt(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw Bt(t,"include target '"+h+"' is not defined at: "+o);s(o+"."+h,a,e.tokenizer[h])}else{const u=new d5e(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const d=c[1];d.next=c[2],u.setAction(n,d)}else throw Bt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(n,c[1]);else{if(!c.regex)throw Bt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=hC(c.matchOnlyAtLineStart,!1)),u.setRegex(n,c.regex),u.setAction(n,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Bt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Bt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let r=[];for(let o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Bt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:eu(t,a.open),close:eu(t,a.close)});else throw Bt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function g5e(i){af.registerLanguage(i)}function p5e(){let i=[];return i=i.concat(af.getLanguages()),i}function m5e(i){return xt.modeService.get().languageIdCodec.encodeLanguageId(i)}function _5e(i,e){let t=xt.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function b5e(i,e){const t=xt.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return Mi.register(t,e,100)}class v5e{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,s){if(typeof this._actual.tokenize=="function")return D1.adaptTokenize(this._languageId,this._actual,e,n,s);throw new Error("Not supported!")}tokenize2(e,t,n){let s=this._actual.tokenizeEncoded(e,n);return new aL(s.tokens,s.endState)}}class D1{constructor(e,t,n,s){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=s}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let s=[],r=0;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c=l.startIndex;o===0?c=0:c<r&&(c=r),s[o]=new oL(c+n,l.scopes,t),r=c}return s}static adaptTokenize(e,t,n,s,r){let o=t.tokenize(n,s),a=D1._toClassicTokens(o.tokens,e,r),l;return o.endState.equals(s)?l=s:l=o.endState,new m5(a,l)}tokenize(e,t,n,s){return D1.adaptTokenize(this._languageId,this._actual,e,n,s)}_toBinaryTokens(e,t,n){const s=e.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme;let o=[],a=0,l=0;for(let h=0,u=t.length;h<u;h++){const d=t[h],f=r.match(s,d.scopes);if(a>0&&o[a-1]===f)continue;let g=d.startIndex;h===0?g=0:g<l&&(g=l),o[a++]=g+n,o[a++]=f,l=g}let c=new Uint32Array(a);for(let h=0;h<a;h++)c[h]=o[h];return c}tokenize2(e,t,n,s){let r=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._modeService.languageIdCodec,r.tokens,s),a;return r.endState.equals(n)?a=n:a=r.endState,new aL(o,a)}}function w5e(i){return"tokenizeEncoded"in i}function uee(i){return i&&typeof i.then=="function"}function y5e(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=Z.fromHex(i[t]);xt.standaloneThemeService.get().setColorMapOverride(e)}else xt.standaloneThemeService.get().setColorMapOverride(null)}function C5e(i,e){const t=xt.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=s=>w5e(s)?new v5e(t,s):new D1(t,s,xt.modeService.get(),xt.standaloneThemeService.get());return uee(e)?Li.registerPromise(i,e.then(s=>n(s))):Li.register(i,n(e))}function S5e(i,e){const t=n=>mLe(xt.modeService.get(),xt.standaloneThemeService.get(),i,f5e(i,n));return uee(e)?Li.registerPromise(i,e.then(n=>t(n))):Li.register(i,t(e))}function x5e(i,e){return Ux.register(i,e)}function D5e(i,e){return FM.register(i,e)}function k5e(i,e){return BM.register(i,e)}function L5e(i,e){return Hv.register(i,{provideHover:(t,n,s)=>{let r=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,s)).then(o=>{if(o)return!o.range&&r&&(o.range=new F(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),o.range||(o.range=new F(n.lineNumber,n.column,n.lineNumber,n.column)),o})}})}function A5e(i,e){return VM.register(i,e)}function E5e(i,e){return $x.register(i,e)}function I5e(i,e){return kDe.register(i,e)}function T5e(i,e){return Uv.register(i,e)}function N5e(i,e){return qx.register(i,e)}function M5e(i,e){return Gx.register(i,e)}function R5e(i,e){return WM.register(i,e)}function O5e(i,e,t){return Ll.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,s,r,o)=>{let a=xt.markerService.get().read({resource:n.uri}).filter(l=>F.areIntersectingOrTouching(l,s));return e.provideCodeActions(n,s,{markers:a,only:r.only},o)},resolveCodeAction:e.resolveCodeAction})}function P5e(i,e){return Sb.register(i,e)}function F5e(i,e){return Oh.register(i,e)}function B5e(i,e){return ZY.register(i,e)}function V5e(i,e){return YY.register(i,e)}function W5e(i,e){return na.register(i,e)}function z5e(i,e){return Nm.register(i,e)}function H5e(i,e){return HM.register(i,e)}function U5e(i,e){return jx.register(i,e)}function $5e(i,e){return LDe.register(i,e)}function j5e(i,e){return Mm.register(i,e)}function q5e(i,e){return QY.register(i,e)}function G5e(i,e){return P5.register(i,e)}function K5e(i,e){return zM.register(i,e)}function Z5e(){return{register:g5e,getLanguages:p5e,onLanguage:_5e,getEncodedLanguageId:m5e,setLanguageConfiguration:b5e,setColorMap:y5e,setTokensProvider:C5e,setMonarchTokensProvider:S5e,registerReferenceProvider:x5e,registerRenameProvider:D5e,registerCompletionItemProvider:W5e,registerSignatureHelpProvider:k5e,registerHoverProvider:L5e,registerDocumentSymbolProvider:A5e,registerDocumentHighlightProvider:E5e,registerLinkedEditingRangeProvider:I5e,registerDefinitionProvider:T5e,registerImplementationProvider:N5e,registerTypeDefinitionProvider:M5e,registerCodeLensProvider:R5e,registerCodeActionProvider:O5e,registerDocumentFormattingEditProvider:P5e,registerDocumentRangeFormattingEditProvider:F5e,registerOnTypeFormattingEditProvider:B5e,registerLinkProvider:V5e,registerColorProvider:z5e,registerFoldingRangeProvider:H5e,registerDeclarationProvider:U5e,registerSelectionRangeProvider:$5e,registerDocumentSemanticTokensProvider:j5e,registerDocumentRangeSemanticTokensProvider:q5e,registerInlineCompletionsProvider:G5e,registerInlayHintsProvider:K5e,DocumentHighlightKind:qN,CompletionItemKind:WN,CompletionItemTag:zN,CompletionItemInsertTextRule:VN,SymbolKind:fM,SymbolTag:gM,IndentAction:QN,CompletionTriggerKind:HN,SignatureHelpTriggerKind:dM,InlayHintKind:XN,InlineCompletionTriggerKind:JN,FoldingRangeKind:Da}}class _I{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var $0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Y5e(i){const e=[],t=new Set,n=Sb.ordered(i);for(const r of n)e.push(r),r.extensionId&&t.add(_I.toKey(r.extensionId));const s=Oh.ordered(i);for(const r of s){if(r.extensionId){if(t.has(_I.toKey(r.extensionId)))continue;t.add(_I.toKey(r.extensionId))}e.push({displayName:r.displayName,extensionId:r.extensionId,provideDocumentFormattingEdits(o,a,l){return r.provideDocumentRangeFormattingEdits(o,o.getFullModelRange(),a,l)}})}return e}class k1{static setFormatterSelector(e){return{dispose:k1._selectors.unshift(e)}}static select(e,t,n){return $0(this,void 0,void 0,function*(){if(e.length===0)return;const s=ht.first(k1._selectors);if(s)return yield s(e,t,n)})}}k1._selectors=new wr;function Q5e(i,e,t,n,s){return $0(this,void 0,void 0,function*(){const r=Oh.ordered(e);for(const o of r){let a=yield Promise.resolve(o.provideDocumentRangeFormattingEdits(e,t,n,s)).catch(Wo);if(El(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function X5e(i,e,t,n){return $0(this,void 0,void 0,function*(){const s=Y5e(e);for(const r of s){let o=yield Promise.resolve(r.provideDocumentFormattingEdits(e,t,n)).catch(Wo);if(El(o))return yield i.computeMoreMinimalEdits(e.uri,o)}})}function J5e(i,e,t,n,s){const r=ZY.ordered(e);return r.length===0||r[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(r[0].provideOnTypeFormattingEdits(e,t,n,s,ei.None)).catch(Wo).then(o=>i.computeMoreMinimalEdits(e.uri,o))}Nt.registerCommand("_executeFormatRangeProvider",function(i,...e){return $0(this,void 0,void 0,function*(){const[t,n,s]=e;Pi(We.isUri(t)),Pi(F.isIRange(n));const r=i.get(Rl),o=i.get(qu),a=yield r.createModelReference(t);try{return Q5e(o,a.object.textEditorModel,F.lift(n),s,ei.None)}finally{a.dispose()}})});Nt.registerCommand("_executeFormatDocumentProvider",function(i,...e){return $0(this,void 0,void 0,function*(){const[t,n]=e;Pi(We.isUri(t));const s=i.get(Rl),r=i.get(qu),o=yield s.createModelReference(t);try{return X5e(r,o.object.textEditorModel,n,ei.None)}finally{o.dispose()}})});Nt.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return $0(this,void 0,void 0,function*(){const[t,n,s,r]=e;Pi(We.isUri(t)),Pi(q.isIPosition(n)),Pi(typeof s=="string");const o=i.get(Rl),a=i.get(qu),l=yield o.createModelReference(t);try{return J5e(a,l.object.textEditorModel,q.lift(n),s,r)}finally{l.dispose()}})});var bI;ag.wrappingIndent.defaultValue=0;ag.glyphMargin.defaultValue=!1;ag.autoIndent.defaultValue=3;ag.overviewRulerLanes.defaultValue=2;k1.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const ps=fY();ps.editor=a5e();ps.languages=Z5e();ps.CancellationTokenSource;const ePe=ps.Emitter;ps.KeyCode;ps.KeyMod;ps.Position;const LHe=ps.Range;ps.Selection;ps.SelectionDirection;const AHe=ps.MarkerSeverity;ps.MarkerTag;ps.Uri;ps.Token;const tPe=ps.editor,a2=ps.languages;(!((bI=ni.MonacoEnvironment)===null||bI===void 0)&&bI.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=ps);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const iPe="#/definitions/RootSpec",nPe="http://json-schema.org/draft-07/schema#",sPe={AggregateParams:{additionalProperties:!1,properties:{groupby:{description:"Which fields to use for grouping. Missing `groupby` results in a single group that includes all the data items.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"aggregate",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},Align:{enum:["left","center","right"],type:"string"},Axis:{additionalProperties:!1,properties:{domain:{description:"A boolean flag indicating if the domain (the axis baseline) should be included as part of the axis.\n\n__Default value:__ `true`",type:"boolean"},domainCap:{description:'The stroke cap for the domain line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},domainColor:{description:'Color of axis domain line.\n\n__Default value:__ `"gray"`.',type:"string"},domainDash:{description:"An array of alternating [stroke, space] lengths for dashed domain lines.",items:{type:"number"},type:"array"},domainDashOffset:{description:"The pixel offset at which to start drawing with the domain dash array.",type:"number"},domainWidth:{description:"Stroke width of axis domain line\n\n__Default value:__ `1`",type:"number"},format:{description:"The format specifier pattern for axis labels. Must be a legal [d3-format](https://github.com/d3/d3-format#locale_format) specifier.",type:"string"},grid:{description:"A boolean flag indicating if grid lines should be included as part of the axis.\n\n__Default value:__ `false`",type:"boolean"},gridCap:{description:'The stroke cap for the grid line\'s ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},gridColor:{description:"Color of grid lines.\n\n__Default value:__ `lightgray`",type:"string"},gridDash:{description:"An array of alternating [stroke, space] lengths for dashed grid mark lines.",items:{type:"number"},type:"array"},gridDashOffset:{description:"The pixel offset at which to start drawing with the grid mark dash array.",type:"number"},gridOpacity:{description:"The opacity of the grid lines.\n\n__Default value:__ `1`",type:"number"},gridWidth:{description:"Width of the grid lines.\n\n__Default value:__ `1`",type:"number"},labelAlign:{$ref:"#/definitions/Align",description:"Horizontal text alignment of axis tick labels, overriding the default setting for the current axis orientation."},labelAngle:{description:"The rotation angle of the axis labels.\n\n__Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.",maximum:360,minimum:-360,type:"number"},labelBaseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline of axis tick labels, overriding the default setting for the current axis orientation. One of `"alphabetic"` (default), `"top"`, `"middle"`, `"bottom"`.'},labelColor:{description:"The color of the tick label, can be in hex color code or regular color name.",type:"string"},labelFont:{description:"The font of the tick label.",type:"string"},labelFontSize:{description:"The font size of the label, in pixels.",minimum:0,type:"number"},labelFontStyle:{description:"Font style of the title.",type:"string"},labelFontWeight:{description:"Font weight of axis tick labels.",type:"string"},labelLimit:{description:"Maximum allowed pixel width of axis tick labels.\n\n__Default value:__ `180`",type:"number"},labelPadding:{description:"The padding, in pixels, between axis and text labels.\n\n__Default value:__ `2`",type:"number"},labels:{description:"A boolean flag indicating if labels should be included as part of the axis.\n\n__Default value:__ `true`.",type:"boolean"},maxExtent:{description:"The maximum extent in pixels that axis ticks and labels should use. This determines a maximum offset value for axis titles.\n\n__Default value:__ `undefined`.",type:"number"},minExtent:{description:"The minimum extent in pixels that axis ticks and labels should use. This determines a minimum offset value for axis titles.\n\n__Default value:__ `30` for y-axis; `undefined` for x-axis.",type:"number"},offset:{description:"The orthogonal offset in pixels by which to displace the axis from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/AxisOrient",description:'The orientation of the axis. One of `"top"`, `"bottom"`, `"left"` or `"right"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n\n__Default value:__ `"bottom"` for x-axes and `"left"` for y-axes.'},tickCap:{description:'The stroke cap for the tick lines\' ending style. One of `"butt"`, `"round"` or `"square"`.\n\n__Default value:__ `"butt"`',enum:["butt","round","square"],type:"string"},tickColor:{description:`The color of the axis's tick.

__Default value:__ \`"gray"\``,type:"string"},tickCount:{description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of `2`, `5`, `10`) and lie within the underlying scale\'s range.',minimum:0,type:"number"},tickDash:{description:"An array of alternating [stroke, space] lengths for dashed tick mark lines.",items:{type:"number"},type:"array"},tickDashOffset:{description:"The pixel offset at which to start drawing with the tick mark dash array.",type:"number"},tickMinStep:{description:"The minimum desired step between axis ticks, in terms of scale domain values. For example, a value of `1` indicates that ticks should not be less than 1 unit apart. If `tickMinStep` is specified, the `tickCount` value will be adjusted, if necessary, to enforce the minimum step value.",type:"number"},tickSize:{description:"The size in pixels of axis ticks.\n\n__Default value:__ `5`",minimum:0,type:"number"},tickWidth:{description:"The width, in pixels, of ticks.\n\n__Default value:__ `1`",minimum:0,type:"number"},ticks:{description:"Boolean value that determines whether the axis should include ticks.\n\n__Default value:__ `true`",type:"boolean"},title:{description:"A title for the axis (none by default).",type:"string"},titleColor:{description:"Color of the title, can be in hex color code or regular color name.",type:"string"},titleFont:{description:'Font of the title. (e.g., `"Helvetica Neue"`).',type:"string"},titleFontSize:{description:"Font size of the title.",minimum:0,type:"number"},titleFontStyle:{description:"Font style of the title.",type:"string"},titleFontWeight:{description:'Font weight of the title. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).',type:"string"},titleOpacity:{description:"Opacity of the axis title.",type:"number"},titlePadding:{description:"The padding, in pixels, between title and axis.",type:"number"},values:{description:"Explicitly set the visible axis tick and label values.",items:{},type:"array"}},type:"object"},AxisGenomeData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to use"},type:{const:"axisGenome",type:"string"}},required:["type","channel"],type:"object"},AxisOrient:{enum:["top","bottom","left","right"],type:"string"},AxisTicksData:{additionalProperties:!1,properties:{axis:{$ref:"#/definitions/Axis",description:"Optional axis properties"},channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:"Which channel's scale domain to listen to"},type:{const:"axisTicks",type:"string"}},required:["type","channel"],type:"object"},BamData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".bai"`.',type:"string"},type:{const:"bam",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `10000`",type:"number"}},required:["type","url"],type:"object"},Baseline:{enum:["top","middle","bottom","alphabetic"],type:"string"},BigBedData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},type:{const:"bigbed",type:"string"},url:{description:"URL of the BigBed file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the BigBed file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `1000000`",type:"number"}},required:["type","url"],type:"object"},BigWigData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},pixelsPerBin:{description:"The approximate minimum width of each data bin, in pixels.\n\n__Default value:__ `2`",type:"number"},type:{const:"bigwig",type:"string"},url:{description:"URL of the BigWig file.",type:"string"}},required:["type","url"],type:"object"},ChannelWithScale:{anyOf:[{$ref:"#/definitions/PositionalChannel"},{const:"color",type:"string"},{const:"fill",type:"string"},{const:"stroke",type:"string"},{const:"opacity",type:"string"},{const:"fillOpacity",type:"string"},{const:"strokeOpacity",type:"string"},{const:"strokeWidth",type:"string"},{const:"size",type:"string"},{const:"shape",type:"string"},{const:"angle",type:"string"},{const:"dx",type:"string"},{const:"dy",type:"string"},{const:"sample",type:"string"}]},ChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{const:"locus",type:"string"}},required:["chrom","type"],type:"object"},ChromosomalLocus:{additionalProperties:!1,properties:{chrom:{description:'The name of the chromosome. For example: `"chr1"`, `"CHR1"`, or `"1"`.',type:"string"},pos:{description:"The zero-based position inside the chromosome or contig.",type:"number"}},required:["chrom"],type:"object"},CollectParams:{additionalProperties:!1,properties:{groupby:{description:"Arranges the data into consecutive batches based on the groups. This is mainly intended for internal use so that faceted data can be handled as batches.",items:{$ref:"#/definitions/Field"},type:"array"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order."},type:{const:"collect",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},"ColorDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%3E"},CompareParams:{additionalProperties:!1,properties:{field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to sort by"},order:{anyOf:[{items:{$ref:"#/definitions/SortOrder"},type:"array"},{$ref:"#/definitions/SortOrder"}],description:'The order(s) to use: `"ascending"` (default), `"descending"`.'}},required:["field"],type:"object"},ComplexDomain:{description:"A complex domain that needs to be converted into a scalar domain before it is assigned to a scale.",items:{$ref:"#/definitions/ChromosomalLocus"},type:"array"},ConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["concat","columns"],type:"object"},Contig:{additionalProperties:!1,properties:{name:{type:"string"},size:{type:"number"}},required:["name","size"],type:"object"},CoverageParams:{additionalProperties:!1,properties:{as:{description:"The output field for the computed coverage.",type:"string"},asChrom:{description:"The output field for the chromosome.\n\n**Default:** Same as `chrom`",type:"string"},asEnd:{description:"The output field for the end coordinate.\n\n**Default:** Same as `end`",type:"string"},asStart:{description:"The output field for the start coordinate.\n\n**Default:** Same as `start`",type:"string"},chrom:{$ref:"#/definitions/Field",description:"An optional chromosome field that is passed through. TODO: groupby"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"coverage",description:"The type of the transform to be applied",type:"string"},weight:{$ref:"#/definitions/Field",description:"A field representing an optional weight for the segment. Can be used with copy ratios, for example."}},required:["end","start","type"],type:"object"},CsvDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',enum:["csv","tsv"],type:"string"}},type:"object"},Data:{anyOf:[{$ref:"#/definitions/DataSource"},{$ref:"#/definitions/Generator"}]},DataFormat:{anyOf:[{$ref:"#/definitions/CsvDataFormat"},{$ref:"#/definitions/DsvDataFormat"},{$ref:"#/definitions/JsonDataFormat"},{$ref:"#/definitions/OtherDataFormat"}]},DataSource:{anyOf:[{$ref:"#/definitions/UrlData"},{$ref:"#/definitions/InlineData"},{$ref:"#/definitions/NamedData"},{$ref:"#/definitions/DynamicCallbackData"},{$ref:"#/definitions/LazyData"}]},DsvDataFormat:{additionalProperties:!1,properties:{delimiter:{description:"The delimiter between records. The delimiter must be a single character (i.e., a single 16-bit code unit); so, ASCII delimiters are fine, but emoji delimiters are not.",maxLength:1,minLength:1,type:"string"},parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},type:{const:"dsv",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},required:["delimiter"],type:"object"},DynamicCallbackData:{additionalProperties:!1,properties:{dynamicCallbackSource:{description:"The View class has `getDynamicData()` methods that provides the data. This is intended for internal use.",type:"boolean"},format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["dynamicCallbackSource"],type:"object"},DynamicOpacity:{additionalProperties:!1,description:"DynamicOpacity specifies a zoom-dependent behavior for view opacity. The opacity is interpolated between the specified stops.",properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel"},unitsPerPixel:{description:"Stops expressed as units (base pairs, for example) per pixel.",items:{type:"number"},type:"array"},values:{description:"Opacity values that match the given stops.",items:{type:"number"},type:"array"}},required:["unitsPerPixel","values"],type:"object"},Encoding:{additionalProperties:!1,properties:{angle:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Rotation angle of point and text marks."},color:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Color of the marks – either fill or stroke color based on  the `filled` property of mark definition.\n\n_Note:_ 1) For fine-grained control over both fill and stroke colors of the marks, please use the `fill` and `stroke` channels. The `fill` or `stroke` encodings have higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified. 2) See the scale documentation for more information about customizing [color scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme)."},dx:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},dy:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E"},facetIndex:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},fill:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Fill color of the marks.\n\n_Note:_ The `fill` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},fillOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Fill opacity of the marks."},opacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Opacity of the marks."},sample:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"Facet identifier for interactive filtering, sorting, and grouping in the App."},search:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},semanticScore:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E"},shape:{$ref:"#/definitions/ShapeDef%3Cstring%3E",description:'Shape of the mark.\n\nFor `point` marks the supported values include:\n- plotting shapes: `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n- centered directional shape `"triangle"`'},size:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:'Size of the mark.\n- For `"point"` – the symbol size, or pixel area of the mark.\n- For `"text"` – the text\'s font size.'},stroke:{$ref:"#/definitions/ColorDef%3Cstring%3E",description:"Stroke color of the marks.\n\n_Note:_ The `stroke` encoding has higher precedence than `color`, thus may override the `color` encoding if conflicting encodings are specified."},strokeOpacity:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke opacity of the marks."},strokeWidth:{$ref:"#/definitions/NumericMarkPropDef%3Cstring%3E",description:"Stroke width of the marks."},text:{$ref:"#/definitions/TextDef%3Cstring%3E",description:"Text of the `text` mark."},uniqueId:{$ref:"#/definitions/FieldDefWithoutScale%3Cstring%3E",description:"For internal use"},x:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"X coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},x2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"X2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y:{$ref:"#/definitions/PositionDef%3Cstring%3E",description:"Y coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."},y2:{$ref:"#/definitions/Position2Def%3Cstring%3E",description:"Y2 coordinates of the marks.\n\nThe `value` of this channel can be a number between zero and one."}},type:"object"},ExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},Field:{description:"The name of the field or a JavaScript expression for accessing nested properties. Dots and brackets in the field name must be escaped.",type:"string"},"FieldDefWithoutScale<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},FieldName:{type:"string"},FilterParams:{additionalProperties:!1,properties:{expr:{description:"An expression string. The data object is removed if the expression evaluates to false.",type:"string"},type:{const:"filter",description:"The type of the transform to be applied",type:"string"}},required:["expr","type"],type:"object"},FilterScoredLabelsParams:{additionalProperties:!1,properties:{channel:{description:'**Default:** `"x"`',enum:["x","y"],type:"string"},lane:{$ref:"#/definitions/Field",description:"An optional field representing element's lane, e.g., if transcripts are shown using a piled up layout."},padding:{description:"Padding (in pixels) around the element.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/Field",description:"The field representing element's position on the domain."},score:{$ref:"#/definitions/Field",description:"The field representing the score used for prioritization."},type:{const:"filterScoredLabels",description:"The type of the transform to be applied",type:"string"},width:{$ref:"#/definitions/Field",description:"The field representing element's width in pixels"}},required:["pos","score","type","width"],type:"object"},FlattenCompressedExonsParams:{additionalProperties:!1,properties:{as:{description:'Field names for the flattened exons.\n\n**Default:** `["exonStart", "exonEnd"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},exons:{$ref:"#/definitions/Field",description:'The field containing the exons.\n\n**Default:** `"exons"`'},start:{$ref:"#/definitions/Field",description:'Start coordinate of the gene body.\n\n**Default:** `"start"`'},type:{const:"flattenCompressedExons",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FlattenDelimitedParams:{additionalProperties:!1,properties:{as:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:`The output field name(s) for the flattened field.

**Default:** the input fields.`},field:{anyOf:[{items:{$ref:"#/definitions/Field"},type:"array"},{$ref:"#/definitions/Field"}],description:"The field(s) to split and flatten"},separator:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"Separator(s) used on the field(s) TODO: Rename to delimiter"},type:{const:"flattenDelimited",description:"The type of the transform to be applied",type:"string"}},required:["field","separator","type"],type:"object"},FlattenSequenceParams:{additionalProperties:!1,properties:{as:{description:'Name of the fields where the zero-based index number and flattened sequence letter are written to.\n\n**Default:** `["pos", "sequence"]`',items:{type:"string"},maxItems:2,minItems:2,type:"array"},field:{$ref:"#/definitions/Field",description:'The field to flatten.\n\n**Default:** `"sequence"`'},type:{const:"flattenSequence",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},FontStyle:{enum:["normal","italic"],type:"string"},FontWeight:{anyOf:[{type:"number"},{const:"thin",type:"string"},{const:"light",type:"string"},{const:"regular",type:"string"},{const:"normal",type:"string"},{const:"medium",type:"string"},{const:"bold",type:"string"},{const:"black",type:"string"}]},FormulaParams:{additionalProperties:!1,properties:{as:{description:"The (new) field where the computed value is written to",type:"string"},expr:{description:"An expression string",type:"string"},type:{const:"formula",description:"The type of the transform to be applied",type:"string"}},required:["as","expr","type"],type:"object"},Generator:{$ref:"#/definitions/SequenceGenerator"},GenomeConfig:{additionalProperties:!1,properties:{baseUrl:{description:'Base url of data files: chromsizes, cytobands, and gene annotations.\n\n**Default:** `"https://genomespy.app/data/genomes/"`',type:"string"},contigs:{description:"As an alternative for chromSizes, the contigs can be provided inline.",items:{$ref:"#/definitions/Contig"},type:"array"},name:{description:"Name of the genome assembly, e.g., `hg19` or `hg38`.",type:"string"}},required:["name"],type:"object"},HConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},HandledTooltip:{additionalProperties:!1,properties:{handler:{type:"string"},params:{type:"object"}},required:["handler"],type:"object"},IdentifierParams:{additionalProperties:!1,properties:{as:{description:'**Default:** `"_uniqueId"`',type:"string"},type:{const:"identifier",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},ImportConfig:{additionalProperties:!1,properties:{name:{type:"string"},params:{type:"object"},url:{type:"string"}},type:"object"},ImportSpec:{additionalProperties:!1,properties:{import:{$ref:"#/definitions/ImportConfig"}},required:["import"],type:"object"},IndexedFastaData:{additionalProperties:!1,properties:{channel:{$ref:"#/definitions/PrimaryPositionalChannel",description:`Which channel's scale domain to monitor.

__Default value:__ \`"x"\``},indexUrl:{description:'URL of the index file.\n\n__Default value:__ `url` + `".fai"`.',type:"string"},type:{const:"indexedFasta",type:"string"},url:{description:"URL of the fasta file.",type:"string"},windowSize:{description:"Size of each chunk when fetching the fasta file. Data is only fetched when the length of the visible domain smaller than the window size.\n\n__Default value:__ `7000`",type:"number"}},required:["type","url"],type:"object"},InlineData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},values:{$ref:"#/definitions/InlineDataset",description:"The full data set, included inline. This can be an array of objects or primitive values, an object, or a string. Arrays of primitive values are ingested as objects with a `data` property. Strings are parsed according to the specified format type."}},required:["values"],type:"object"},InlineDataset:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"},{items:{type:"object"},type:"array"},{type:"string"},{type:"object"}]},JsonDataFormat:{additionalProperties:!1,properties:{parse:{anyOf:[{$ref:"#/definitions/Parse"},{type:"null"}],description:'If set to `null`, disable type inference based on the spec and only use type inference based on the data. Alternatively, a parsing directive object can be provided for explicit data types. Each property of the object corresponds to a field name, and the value to the desired data type (one of `"number"`, `"boolean"`, `"date"`, or null (do not parse the field)). For example, `"parse": {"modified_on": "date"}` parses the `modified_on` field in each input record a Date value.\n\nFor `"date"`, we parse data based using Javascript\'s [`Date.parse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse). For Specific date formats can be provided (e.g., `{foo: "date:\'%m%d%Y\'"}`), using the [d3-time-format syntax](https://github.com/d3/d3-time-format#locale_format). UTC date format parsing is supported similarly (e.g., `{foo: "utc:\'%m%d%Y\'"}`). See more about [UTC time](https://vega.github.io/vega-lite/docs/timeunit.html#utc)'},property:{description:'The JSON property containing the desired data. This parameter can be used when the loaded JSON file may have surrounding structure or meta-data. For example `"property": "values.features"` is equivalent to retrieving `json.values.features` from the loaded JSON object.',type:"string"},type:{const:"json",description:'Type of input data: `"json"`, `"csv"`, `"tsv"`, `"dsv"`.\n\n__Default value:__  The default format type is determined by the extension of the file URL. If no extension is detected, `"json"` will be used by default.',type:"string"}},type:"object"},LayerSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},LazyData:{additionalProperties:!1,properties:{lazy:{$ref:"#/definitions/LazyDataParams"}},required:["lazy"],type:"object"},LazyDataParams:{anyOf:[{$ref:"#/definitions/AxisTicksData"},{$ref:"#/definitions/AxisGenomeData"},{$ref:"#/definitions/IndexedFastaData"},{$ref:"#/definitions/BigWigData"},{$ref:"#/definitions/BigBedData"},{$ref:"#/definitions/BamData"}]},LinearizeGenomicCoordinateParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The output field or fields for linearized coordinates."},channel:{description:'Get the genome assembly from the scale of the channel.\n\n**Default:** `"x"`',enum:["x","y"],type:"string"},chrom:{$ref:"#/definitions/Field",description:"The chromosome/contig field"},offset:{anyOf:[{type:"number"},{items:{type:"number"},type:"array"}],description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`"},pos:{anyOf:[{$ref:"#/definitions/Field"},{items:{$ref:"#/definitions/Field"},type:"array"}],description:"The field or fields that contain intra-chromosomal positions"},type:{const:"linearizeGenomicCoordinate",description:"The type of the transform to be applied",type:"string"}},required:["as","chrom","pos","type"],type:"object"},MarkConfigAndType:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},angle:{description:"The rotation angle in degrees.\n\n**Default value:** `0`",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'The vertical alignment of the text.  One of `"top"`, `"middle"`, `"bottom"`.\n\n**Default value:** `"bottom"`'},buildIndex:{description:`Builds and index for efficient rendering of subsets of the data. The data must be sorted by the x coordinate.

TODO: This should be enabled automatically if the data are sorted.`,type:"boolean"},clip:{anyOf:[{type:"boolean"},{const:"never",type:"string"}],description:"If true, the mark is clipped to the UnitView's rectangle. By default, clipping is enabled for marks that have zoomable positional scales."},color:{type:"string"},color2:{description:"TODO",type:"string"},cornerRadius:{description:"Radius of the rounded corners.\n\n**Default value:** `0`",type:"number"},cornerRadiusBottomLeft:{description:"Radius of the bottom left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusBottomRight:{description:"Radius of the bottom right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopLeft:{description:"Radius of the top left rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},cornerRadiusTopRight:{description:"Radius of the top right rounded corner. Has higher precedence than `cornerRadius`.\n\n**Default value:** (None)",type:"number"},dx:{description:"The horizontal offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},dy:{description:"The vertical offset between the text and its anchor point, in pixels. Applied after the rotation by `angle`.",type:"number"},fill:{description:"The fill color",type:"string"},fillGradientStrength:{description:"Gradient strength controls the amount of the gradient eye-candy effect in the fill color. Valid values are between 0 and 1.\n\n**Default value:** `0`",type:"number"},fillOpacity:{description:"The fill opacity. Value between [0, 1].",type:"number"},filled:{description:"Whether the `color` represents the `fill` color (`true`) or the `stroke` color (`false`).",type:"boolean"},fitToBand:{description:'If true, sets the secondary positional channel that allows the text to be squeezed (see the `squeeze` property). Can be used when: 1) `"band"`, `"index"`, or `"locus"` scale is being used and 2) only the primary positional channel is specified.\n\n**Default value:** `false`',type:"boolean"},flushX:{description:"If true, the text is kept inside the viewport when the range of `x` and `x2` intersect the viewport.",type:"boolean"},flushY:{description:"If true, the text is kept inside the viewport when the range of `y` and `y2` intersect the viewport.",type:"boolean"},font:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},fontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},fontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},geometricZoomBound:{description:"Enables geometric zooming. The value is the base two logarithmic zoom level where the maximum point size is reached.\n\n**Default value:** `0`",type:"number"},inwardStroke:{description:"Should the stroke only grow inwards, e.g, the diameter/outline is not affected by the stroke width. Thus, a point that has a zero size has no visible stroke. This allows strokes to be used with geometric zoom, etc.\n\n**Default value:** `false`",type:"boolean"},logoLetters:{description:"Stretch letters so that they can be used with [sequence logos](https://en.wikipedia.org/wiki/Sequence_logo), etc...",type:"boolean"},minBufferSize:{description:"Minimum size for WebGL buffers (number of data items). Allows for using `bufferSubData()` to update graphics.\n\nThis property is intended for internal use.",type:"number"},minHeight:{description:"The minimum height of a rectangle in pixels. The property clamps rectangles' heights.\n\n**Default value:** `0`",type:"number"},minLength:{description:"The minimum length of the rule in pixels. Use this property to ensure that very short ranged rules remain visible even when the user zooms out.\n\n**Default value:** `0`",type:"number"},minOpacity:{description:"Clamps the minimum size-dependent opacity. The property does not affect the `opacity` channel. Valid values are between `0` and `1`.\n\nWhen a rectangle would be smaller than what is specified in `minHeight` and `minWidth`, it is faded out proportionally. Example: a rectangle would be rendered as one pixel wide, but `minWidth` clamps it to five pixels. The rectangle is actually rendered as five pixels wide, but its opacity is multiplied by 0.2. With this setting, you can limit the factor to, for example, 0.5 to keep the rectangles more clearly visible.\n\n**Default value:** `0`",type:"number"},minSagittaLength:{description:"Minimum length of the arc's sagitta. Makes very short links more clearly visible.\n\n**Default value:** `1.5`",type:"number"},minWidth:{description:`The minimum width of a rectangle in pixels. The property clamps rectangles' widths when the viewport is zoomed out.

This property also reduces flickering of very narrow rectangles when zooming. The value should generally be at least one.

**Default value:** \`1\``,type:"number"},opacity:{type:"number"},paddingX:{description:"The horizontal padding, in pixels, when the `x2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},paddingY:{description:"The vertical padding, in pixels, when the `y2` channel is used for ranged text.\n\n**Default value:** `0`",type:"number"},sagittaScaleFactor:{description:"Scaling factor of the arc's sagitta. The default value `1.0` produces roughly circular arcs.\n\n**Default value:** `1.0`",type:"number"},sampleFacetPadding:{description:"Padding between sample facet's upper/lower edge and the maximum point size. This property controls how tightly points are squeezed when facet's height is smaller than the maximum point size. The unit is a proportion of facet's height. The value must be between `0` and `0.5`. This property has no effect when sample faceting is not used.\n\n**Default value:** `0.1`",type:"number"},segments:{description:"The number of segments in the bézier curve. Affects the rendering quality and performance. Use a higher value for a smoother curve.\n\n**Default value:* `101`",type:"number"},semanticZoomFraction:{description:"TODO\n\n**Default value:** `0.02`",type:"number"},shape:{description:'One of `"circle"`, `"square"`, `"cross"`, `"diamond"`, `"triangle-up"`, `"triangle-down"`, `"triangle-right"`, or `"triangle-left"`.\n\n**Default value:** `"circle"`',type:"string"},size:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},size2:{description:"TODO",type:"number"},squeeze:{description:"If the `squeeze` property is true and secondary positional channels (`x2` and/or `y2`) are used, the text is scaled to fit mark's width and/or height.\n\n**Default value:** `true`",type:"boolean"},stroke:{description:"The stroke color",type:"string"},strokeCap:{description:'The style of stroke ends. Available choices: `"butt"`, `"round`", and `"square"`.\n\n**Default value:** `"butt"`',enum:["butt","square","round"],type:"string"},strokeDash:{description:"An array of of alternating stroke and gap lengths or `null` for solid strokes.\n\n**Default value:** `null`",items:{type:"number"},type:"array"},strokeDashOffset:{description:"An offset for the stroke dash pattern.\n\n**Default value:** `0`",type:"number"},strokeOpacity:{description:"The stroke opacity. Value between [0, 1].",type:"number"},strokeWidth:{description:"The stroke width in pixels.",type:"number"},text:{$ref:"#/definitions/Scalar",description:'The text to display. The format of numeric data can be customized by setting a [format specifier](https://github.com/d3/d3-format#locale_format) to channel definition\'s `format` property.\n\n**Default value:** `""`'},tooltip:{$ref:"#/definitions/Tooltip",description:"TODO"},type:{$ref:"#/definitions/MarkType"},viewportEdgeFadeDistanceBottom:{type:"number"},viewportEdgeFadeDistanceLeft:{type:"number"},viewportEdgeFadeDistanceRight:{type:"number"},viewportEdgeFadeDistanceTop:{type:"number"},viewportEdgeFadeWidthBottom:{type:"number"},viewportEdgeFadeWidthLeft:{type:"number"},viewportEdgeFadeWidthRight:{type:"number"},viewportEdgeFadeWidthTop:{type:"number"},x:{type:"number"},x2:{type:"number"},xOffset:{description:"Offsets of the `x` and `x2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"},y:{type:"number"},y2:{type:"number"},yOffset:{description:"Offsets of the `y` and `y2` coordinates in pixels. The offset is applied after the viewport scaling and translation.\n\n**Default value:** `0`",type:"number"}},required:["type"],type:"object"},"MarkPropDatumDef<Type>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropDatumDef<TypeForShape>":{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropDef<string,(string|null),TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,(string|null)>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3C(string%7Cnull)%3E"}]},"MarkPropDef<string,number>":{anyOf:[{$ref:"#/definitions/MarkPropFieldOrDatumOrExprDef%3Cstring%2CType%3E"},{$ref:"#/definitions/ValueDef%3Cnumber%3E"}]},MarkPropExprDef:{additionalProperties:!1,properties:{expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"MarkPropFieldDef<string,Type>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"MarkPropFieldDef<string,TypeForShape>":{additionalProperties:!1,description:"Field definition of a mark property, which can contain a legend.",properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/TypeForShape"}},required:["type"],type:"object"},"MarkPropFieldOrDatumOrExprDef<string,Type>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CType%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CType%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},"MarkPropFieldOrDatumOrExprDef<string,TypeForShape>":{anyOf:[{$ref:"#/definitions/MarkPropFieldDef%3Cstring%2CTypeForShape%3E"},{$ref:"#/definitions/MarkPropDatumDef%3CTypeForShape%3E"},{$ref:"#/definitions/MarkPropExprDef"}]},MarkType:{enum:["rect","point","rule","text","link"],type:"string"},MeasureTextParams:{additionalProperties:!1,properties:{as:{type:"string"},field:{$ref:"#/definitions/Field"},fontSize:{type:"number"},type:{const:"measureText",description:"The type of the transform to be applied",type:"string"}},required:["as","field","fontSize","type"],type:"object"},MergeFacetsParams:{additionalProperties:!1,properties:{type:{const:"mergeFacets",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},NamedData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"}},required:["name"],type:"object"},NumericDomain:{items:{type:"number"},type:"array"},"NumericMarkPropDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2Cnumber%3E"},NumericValueDef:{$ref:"#/definitions/ValueDef%3Cnumber%3E"},OtherDataFormat:{additionalProperties:!1,description:'Other data format, such as `"fasta"`',properties:{type:{type:"string"}},required:["type"],type:"object"},PaddingConfig:{anyOf:[{$ref:"#/definitions/Paddings"},{type:"number"}]},Paddings:{additionalProperties:!1,properties:{bottom:{type:"number"},left:{type:"number"},right:{type:"number"},top:{type:"number"}},type:"object"},Parse:{additionalProperties:{$ref:"#/definitions/ParseValue"},type:"object"},ParseValue:{anyOf:[{type:"null"},{type:"string"},{const:"string",type:"string"},{const:"boolean",type:"string"},{const:"date",type:"string"},{const:"number",type:"string"}]},PileupParams:{additionalProperties:!1,properties:{as:{description:'The output field name for the computed lane.\n\n**Default:** `"lane"`.',type:"string"},end:{$ref:"#/definitions/Field",description:"The field representing the end coordinate of the segment (exclusive)."},preference:{$ref:"#/definitions/Field",description:"An optional field indicating the preferred lane. Use together with the `preferredOrder` property."},preferredOrder:{anyOf:[{items:{type:"string"},type:"array"},{items:{type:"number"},type:"array"},{items:{type:"boolean"},type:"array"}],description:"The order of the lane preferences. The first element contains the value that should place the segment on the first lane and so forth. If the preferred lane is occupied, the first available lane is taken."},spacing:{description:"The spacing between adjacent segments on the same lane in coordinate units.\n\n**Default:** `1`.",type:"number"},start:{$ref:"#/definitions/Field",description:"The field representing the start coordinate of the segment (inclusive)."},type:{const:"pileup",description:"The type of the transform to be applied",type:"string"}},required:["end","start","type"],type:"object"},"Position2Def<string>":{anyOf:[{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{$ref:"#/definitions/SecondaryChromPosDef"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},{additionalProperties:!1,properties:{band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"}},required:["expr"],type:"object"},{$ref:"#/definitions/PositionValueDef"}]},PositionDatumDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},"PositionDef<string>":{anyOf:[{$ref:"#/definitions/PositionFieldDef%3Cstring%3E"},{$ref:"#/definitions/ChromPosDef"},{$ref:"#/definitions/PositionDatumDef"},{$ref:"#/definitions/PositionExprDef"},{$ref:"#/definitions/PositionValueDef"}]},PositionExprDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},expr:{description:"An expression. Properties of the data can be accessed through the `datum` object.",type:"string"},type:{$ref:"#/definitions/Type"}},required:["expr","type"],type:"object"},"PositionFieldDef<string>":{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},resolutionChannel:{$ref:"#/definitions/ChannelWithScale",description:"An alternative channel for scale resolution.\n\nThis is mainly for internal use and allows using `color` channel to resolve `fill` and `stroke` channels under certain circumstances."},scale:{anyOf:[{$ref:"#/definitions/Scale"},{type:"null"}],description:`An object defining properties of the channel's scale, which is the function that transforms values in the data domain (numbers, dates, strings, etc) to visual values (pixels, colors, sizes) of the encoding channels.

If \`null\`, the scale will be [disabled and the data value will be directly encoded](https://vega.github.io/vega-lite/docs/scale.html#disable).

__Default value:__ If undefined, default [scale properties](https://vega.github.io/vega-lite/docs/scale.html) are applied.

__See also:__ [\`scale\`](https://vega.github.io/vega-lite/docs/scale.html) documentation.`},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},type:{$ref:"#/definitions/Type"}},required:["type"],type:"object"},PositionValueDef:{$ref:"#/definitions/NumericValueDef"},PositionalChannel:{anyOf:[{$ref:"#/definitions/PrimaryPositionalChannel"},{$ref:"#/definitions/SecondaryPositionalChannel"}]},PrimaryPositionalChannel:{enum:["x","y"],type:"string"},ProjectParams:{additionalProperties:!1,properties:{as:{description:"New names for the projected fields. If omitted, the names of the source fields are used.",items:{type:"string"},type:"array"},fields:{description:"The fields to be projected.",items:{$ref:"#/definitions/Field"},type:"array"},type:{const:"project",description:"The type of the transform to be applied",type:"string"}},required:["fields","type"],type:"object"},RegexExtractParams:{additionalProperties:!1,properties:{as:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"The new field or an array of fields where the extracted values are written."},field:{$ref:"#/definitions/Field",description:"The source field"},regex:{description:'A valid JavaScript regular expression with at least one group. For example: `"^Sample(\\\\d+)$"`.\n\nRead more at: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions',type:"string"},skipInvalidInput:{description:"Do not complain about invalid input. Just skip it and leave the new fields undefined on the affected datum.\n\n**Default:** `false`",type:"boolean"},type:{const:"regexExtract",description:"The type of the transform to be applied",type:"string"}},required:["as","field","regex","type"],type:"object"},RegexFoldParams:{additionalProperties:!1,properties:{asKey:{description:'**Default:** `"sample"`',type:"string"},asValue:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A new column name for the extracted values."},columnRegex:{anyOf:[{items:{type:"string"},type:"array"},{type:"string"}],description:"A regular expression that matches to column names. The regex must have one capturing group that is used for extracting the key (e.g., a sample id) from the column name."},skipRegex:{description:"An optional regex that matches to fields that should not be included in the new folded data objects.",type:"string"},type:{const:"regexFold",description:"The type of the transform to be applied",type:"string"}},required:["asValue","columnRegex","type"],type:"object"},ResolutionBehavior:{description:'`"independent"` and `"shared"` behave similarly to Vega-Lite. `"excluded"` behaves like `"shared"`, but is not pulled towards the root. `"forced"` behaves like `"shared"`, but is forced towards the root even if the parent has `"independent"` behavior.',enum:["independent","shared","excluded","forced"],type:"string"},RootSpec:{anyOf:[{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},layer:{items:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}]},type:"array"},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["layer"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:"An object defining the view background and outline. The background is repeated for each group."},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},hconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["hconcat"],type:"object"},{additionalProperties:!1,properties:{$schema:{type:"string"},background:{description:"Background color of the canvas.",type:"string"},baseUrl:{type:"string"},columns:{type:"number"},concat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},datasets:{additionalProperties:{items:{},type:"array"},description:"https://vega.github.io/vega-lite/docs/data.html#datasets",type:"object"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},genome:{$ref:"#/definitions/GenomeConfig"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["columns","concat"],type:"object"}]},SampleAttributeDef:{additionalProperties:!1,properties:{barScale:{$ref:"#/definitions/Scale",description:"An optional scale definition for mapping the attribute to the width of a metadata rectangle."},scale:{$ref:"#/definitions/Scale",description:"Scale definition for the (default) color channel"},type:{$ref:"#/definitions/Type",description:'The attribute type. One of `"nominal"`, `"ordinal"`, or `"quantitative"`.'},visible:{description:"Whether the attribute is visible by default.",type:"boolean"},width:{description:"Width of the column in pixels.",type:"number"}},required:["type"],type:"object"},SampleDef:{additionalProperties:!1,properties:{attributeLabelAngle:{description:"Angle to be added to the default label angle (-90).\n\n**Default value:** `0`",type:"number"},attributeLabelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},attributeLabelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},attributeLabelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},attributeLabelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},attributeSize:{description:"Default size (width) of the metadata attribute columns. Can be configured per attribute using the `attributes` property.\n\n**Default value:** `10`",type:"number"},attributeSpacing:{description:"Spacing between attribute columns in pixels.\n\n**Default value:** `1`",type:"number"},attributes:{additionalProperties:{$ref:"#/definitions/SampleAttributeDef"},description:"Explicitly specify the sample attributes.",type:"object"},data:{$ref:"#/definitions/Data",description:"Optional metadata about the samples."},labelAlign:{$ref:"#/definitions/Align",description:'The horizontal alignment of the text. One of `"left"`, `"center"`, or `"right"`.\n\n**Default value:** `"left"`'},labelFont:{description:'The font typeface. GenomeSpy uses [SDF](https://github.com/Chlumsky/msdfgen) versions of [Google Fonts](https://fonts.google.com/). Check their availability at the [A-Frame Fonts](https://github.com/etiennepinchon/aframe-fonts/tree/master/fonts) repository. System fonts are **not** supported.\n\n**Default value:** `"Lato"`',type:"string"},labelFontSize:{description:"The font size in pixels.\n\n**Default value:** `11`",type:"number"},labelFontStyle:{$ref:"#/definitions/FontStyle",description:'The font style. Valid values: `"normal"` and `"italic"`.\n\n**Default value:** `"normal"`'},labelFontWeight:{$ref:"#/definitions/FontWeight",description:'The font weight. The following strings and numbers are valid values: `"thin"` (`100`), `"light"` (`300`), `"regular"` (`400`), `"normal"` (`400`), `"medium"` (`500`), `"bold"` (`700`), `"black"` (`900`)\n\n**Default value:** `"regular"`'},labelLength:{description:"How much space in pixels to reserve for the labels.\n\n**Default:** `140`",type:"number"},labelTitleText:{description:'Text in the label title\n\n**Default:** `"Sample name"`',type:"string"}},type:"object"},SampleParams:{additionalProperties:!1,properties:{size:{description:"The maximum sample size.\n\n**Default:** `500`",type:"number"},type:{const:"sample",description:"The type of the transform to be applied",type:"string"}},required:["type"],type:"object"},SampleSpec:{additionalProperties:!1,description:"A view specification for a SampleView. This is only functional in the GenomeSpy app.",properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},samples:{$ref:"#/definitions/SampleDef",description:"Sample metadata definition. If the object is empty, the sample identifiers will be inferred from the data."},spec:{anyOf:[{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/UnitSpec"}],description:"The view specification to be repeated for each sample."},stickySummaries:{type:"boolean"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground",description:"An object defining the view background and outline. The background is repeated for each group."},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["samples","spec"],type:"object"},Scalar:{type:["string","number","boolean"]},ScalarDomain:{anyOf:[{$ref:"#/definitions/NumericDomain"},{items:{type:"string"},type:"array"},{items:{type:"boolean"},type:"array"}]},Scale:{additionalProperties:!1,properties:{align:{description:"The alignment of the steps within the scale range.\n\nThis value must lie in the range `[0,1]`. A value of `0.5` indicates that the steps should be centered within the range. A value of `0` or `1` may be used to shift the bands to one side, say to position them adjacent to an axis.\n\n__Default value:__ `0.5`",type:"number"},base:{description:"The logarithm base of the `log` scale (default `10`).",type:"number"},bins:{description:"An array of bin boundaries over the scale domain. If provided, axes and legends will use the bin boundaries to inform the choice of tick marks and text labels.",items:{type:"number"},type:"array"},clamp:{description:"If `true`, values that exceed the data domain are clamped to either the minimum or maximum range value\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/config.html#scale-config)'s `clamp` (`true` by default).",type:"boolean"},constant:{description:"A constant determining the slope of the symlog function around zero. Only used for `symlog` scales.\n\n__Default value:__ `1`",type:"number"},domain:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"Customized domain values.\n\nFor _quantitative_ fields, `domain` can take the form of a two-element array with minimum and maximum values.  [Piecewise scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise) can be created by providing a `domain` with more than two entries.\n\nFor _temporal_ fields, `domain` can be a two-element array minimum and maximum values, in the form of either timestamps or the [DateTime definition objects](https://vega.github.io/vega-lite/docs/types.html#datetime).\n\nFor _ordinal_ and _nominal_ fields, `domain` can be an array that lists valid input values."},domainMax:{description:"Sets the maximum value in the scale domain, overriding the `domain` property. This property is only intended for use with scales having continuous domains.",type:"number"},domainMid:{description:"Inserts a single mid-point value into a two-element domain. The mid-point value must lie between the domain minimum and maximum values. This property can be useful for setting a midpoint for [diverging color scales](https://vega.github.io/vega-lite/docs/scale.html#piecewise). The domainMid property is only intended for use with scales supporting continuous, piecewise domains.",type:"number"},domainMin:{description:"Sets the minimum value in the scale domain, overriding the domain property. This property is only intended for use with scales having continuous domains.",type:"number"},exponent:{description:"The exponent of the `pow` scale.",type:"number"},interpolate:{anyOf:[{$ref:"#/definitions/ScaleInterpolate"},{$ref:"#/definitions/ScaleInterpolateParams"}],description:"The interpolation method for range values. By default, a general interpolator for numbers, dates, strings and colors (in HCL space) is used. For color ranges, this property allows interpolation in alternative color spaces. Legal values include `rgb`, `hsl`, `hsl-long`, `lab`, `hcl`, `hcl-long`, `cubehelix` and `cubehelix-long` ('-long' variants use longer paths in polar coordinate spaces). If object-valued, this property accepts an object with a string-valued _type_ property and an optional numeric _gamma_ property applicable to rgb and cubehelix interpolators. For more, see the [d3-interpolate documentation](https://github.com/d3/d3-interpolate).\n\n__Default value:__ `hcl`"},name:{description:"The name of the scale. Names are optional but allow the scales to be referenced and found with the API.",type:"string"},nice:{anyOf:[{type:"boolean"},{type:"number"},{additionalProperties:!1,properties:{interval:{type:"string"},step:{type:"number"}},required:["interval","step"],type:"object"}],description:"Extending the domain so that it starts and ends on nice round values. This method typically modifies the scale’s domain, and may only extend the bounds to the nearest round value. Nicing is useful if the domain is computed from data and may be irregular. For example, for a domain of _[0.201479…, 0.996679…]_, a nice domain might be _[0.2, 1.0]_.\n\nFor quantitative scales such as linear, `nice` can be either a boolean flag or a number. If `nice` is a number, it will represent a desired tick count. This allows greater control over the step size used to extend the bounds, guaranteeing that the returned ticks will exactly cover the domain.\n\n__Default value:__ `true` for unbinned _quantitative_ fields; `false` otherwise."},padding:{description:"For _[continuous](https://vega.github.io/vega-lite/docs/scale.html#continuous)_ scales, expands the scale domain to accommodate the specified number of pixels on each of the scale range. The scale range must represent pixels for this parameter to function as intended. Padding adjustment is performed prior to all other adjustments, including the effects of the `zero`, `nice`, `domainMin`, and `domainMax` properties.\n\nFor _[band](https://vega.github.io/vega-lite/docs/scale.html#band)_ scales, shortcut for setting `paddingInner` and `paddingOuter` to the same value.\n\nFor _[point](https://vega.github.io/vega-lite/docs/scale.html#point)_ scales, alias for `paddingOuter`.\n\n__Default value:__ For _continuous_ scales, derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `continuousPadding`. For _band and point_ scales, see `paddingInner` and `paddingOuter`.  By default, Vega-Lite sets padding such that _width/height = number of unique values * step_.",minimum:0,type:"number"},paddingInner:{description:`The inner padding (spacing) within each band step of band scales, as a fraction of the step size. This value must lie in the range [0,1].

For point scale, this property is invalid as point scales do not have internal band widths (only step sizes between bands).

__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s \`bandPaddingInner\`.`,maximum:1,minimum:0,type:"number"},paddingOuter:{description:"The outer padding (spacing) at the ends of the range of band and point scales, as a fraction of the step size. This value must lie in the range [0,1].\n\n__Default value:__ derived from the [scale config](https://vega.github.io/vega-lite/docs/scale.html#config)'s `bandPaddingOuter` for band scales and `pointPadding` for point scales. By default, Vega-Lite sets outer padding such that _width/height = number of unique values * step_.",maximum:1,minimum:0,type:"number"},range:{anyOf:[{items:{type:"number"},type:"array"},{items:{type:"string"},type:"array"},{type:"string"}],description:'The range of the scale. One of:\n\n- A string indicating a [pre-defined named scale range](https://vega.github.io/vega-lite/docs/scale.html#range-config) (e.g., example, `"symbol"`, or `"diverging"`).\n\n- For [continuous scales](https://vega.github.io/vega-lite/docs/scale.html#continuous), two-element array indicating  minimum and maximum values, or an array with more than two entries for specifying a [piecewise scale](https://vega.github.io/vega-lite/docs/scale.html#piecewise).\n\n- For [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) and [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales, an array of desired output values.\n\n__Notes:__\n\n1) For color scales you can also specify a color [`scheme`](https://vega.github.io/vega-lite/docs/scale.html#scheme) instead of `range`.\n\n2) Any directly specified `range` for `x` and `y` channels will be ignored. Range can be customized via the view\'s corresponding [size](https://vega.github.io/vega-lite/docs/size.html) (`width` and `height`).'},reverse:{description:"If true, reverses the order of the scale range.\n\n__Default value:__ `false`.",type:"boolean"},round:{description:"If `true`, rounds numeric output values to integers. This can be helpful for snapping to the pixel grid.\n\n__Default value:__ `false`.",type:"boolean"},scheme:{anyOf:[{type:"string"},{$ref:"#/definitions/SchemeParams"}],description:'A string indicating a color [scheme](https://vega.github.io/vega-lite/docs/scale.html#scheme) name (e.g., `"category10"` or `"blues"`) or a [scheme parameter object](https://vega.github.io/vega-lite/docs/scale.html#scheme-params).\n\nDiscrete color schemes may be used with [discrete](https://vega.github.io/vega-lite/docs/scale.html#discrete) or [discretizing](https://vega.github.io/vega-lite/docs/scale.html#discretizing) scales. Continuous color schemes are intended for use with color scales.\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.'},type:{$ref:"#/definitions/ScaleType",description:'The type of scale.  Vega-Lite supports the following categories of scale types:\n\n1) [**Continuous Scales**](https://vega.github.io/vega-lite/docs/scale.html#continuous) -- mapping continuous domains to continuous output ranges ([`"linear"`](https://vega.github.io/vega-lite/docs/scale.html#linear), [`"pow"`](https://vega.github.io/vega-lite/docs/scale.html#pow), [`"sqrt"`](https://vega.github.io/vega-lite/docs/scale.html#sqrt), [`"symlog"`](https://vega.github.io/vega-lite/docs/scale.html#symlog), [`"log"`](https://vega.github.io/vega-lite/docs/scale.html#log), [`"time"`](https://vega.github.io/vega-lite/docs/scale.html#time), [`"utc"`](https://vega.github.io/vega-lite/docs/scale.html#utc).\n\n2) [**Discrete Scales**](https://vega.github.io/vega-lite/docs/scale.html#discrete) -- mapping discrete domains to discrete ([`"ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#ordinal)) or continuous ([`"band"`](https://vega.github.io/vega-lite/docs/scale.html#band) and [`"point"`](https://vega.github.io/vega-lite/docs/scale.html#point)) output ranges.\n\n3) [**Discretizing Scales**](https://vega.github.io/vega-lite/docs/scale.html#discretizing) -- mapping continuous domains to discrete output ranges [`"bin-ordinal"`](https://vega.github.io/vega-lite/docs/scale.html#bin-ordinal), [`"quantile"`](https://vega.github.io/vega-lite/docs/scale.html#quantile), [`"quantize"`](https://vega.github.io/vega-lite/docs/scale.html#quantize) and [`"threshold"`](https://vega.github.io/vega-lite/docs/scale.html#threshold).\n\n__Default value:__ please see the [scale type table](https://vega.github.io/vega-lite/docs/scale.html#type).'},zero:{description:"If `true`, ensures that a zero baseline value is included in the scale domain.\n\n__Default value:__ `true` for x and y channels if the quantitative field is not binned and no custom `domain` is provided; `false` otherwise.\n\n__Note:__ Log, time, and utc scales do not support `zero`.",type:"boolean"},zoom:{anyOf:[{type:"boolean"},{$ref:"#/definitions/ZoomParams"}],description:"If `true` and the scale is used on a positional channel, it can bee zoomed and translated interactively."}},type:"object"},ScaleInterpolate:{enum:["rgb","lab","hcl","hsl","hsl-long","hcl-long","cubehelix","cubehelix-long"],type:"string"},ScaleInterpolateParams:{additionalProperties:!1,properties:{gamma:{type:"number"},type:{enum:["rgb","cubehelix","cubehelix-long"],type:"string"}},required:["type"],type:"object"},ScaleType:{enum:["null","linear","log","pow","sqrt","symlog","identity","sequential","quantize","threshold","ordinal","point","band","index","locus"],type:"string"},SchemeParams:{additionalProperties:!1,properties:{count:{description:'The number of colors to use in the scheme. This can be useful for scale types such as `"quantize"`, which use the length of the scale range to determine the number of discrete bins for the scale domain.',type:"number"},extent:{description:"The extent of the color range to use. For example `[0.2, 1]` will rescale the color scheme such that color values in the range _[0, 0.2)_ are excluded from the scheme.",items:{type:"number"},type:"array"},name:{description:'A color scheme name for ordinal scales (e.g., `"category10"` or `"blues"`).\n\nFor the full list of supported schemes, please refer to the [Vega Scheme](https://vega.github.io/vega/docs/schemes/#reference) reference.',type:"string"}},required:["name"],type:"object"},SecondaryChromPosDef:{additionalProperties:!1,properties:{axis:{anyOf:[{$ref:"#/definitions/Axis"},{type:"null"}],description:"An object defining properties of axis's gridlines, ticks and labels. If `null`, the axis for the encoding channel will be removed.\n\n__Default value:__ If undefined, default [axis properties](https://vega.github.io/vega-lite/docs/axis.html) are applied.\n\n__See also:__ [`axis`](https://vega.github.io/vega-lite/docs/axis.html) documentation."},band:{description:"Relative position on band scale. For example, the marks will be positioned at the beginning of the band if set to `0`, and at the middle of the band if set to `0.5`.",maximum:1,minimum:0,type:"number"},chrom:{$ref:"#/definitions/FieldName",description:"The field having the chromosome or contig."},offset:{description:"An offset or offsets that allow for adjusting the numbering base. The offset is subtracted from the positions.\n\nGenomeSpy uses internally zero-based indexing with half-open intervals. UCSC-based formats (BED, etc.) generally use this scheme. However, for example, VCF files use one-based indexing and must be adjusted by setting the offset to `1`.\n\n**Default:** `0`",type:"number"},pos:{$ref:"#/definitions/FieldName",description:"The field having an intra-chromosomal position."},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},required:["chrom"],type:"object"},SecondaryPositionalChannel:{enum:["x2","y2"],type:"string"},SequenceGenerator:{additionalProperties:!1,properties:{name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},sequence:{$ref:"#/definitions/SequenceParams",description:"Generate a sequence of numbers."}},required:["sequence"],type:"object"},SequenceParams:{additionalProperties:!1,properties:{as:{$ref:"#/definitions/FieldName",description:'The name of the generated sequence field.\n\n__Default value:__ `"data"`'},start:{description:"The starting value of the sequence (inclusive).",type:"number"},step:{description:"The step value between sequence entries.\n\n__Default value:__ `1`",type:"number"},stop:{description:"The ending value of the sequence (exclusive).",type:"number"}},required:["start","stop"],type:"object"},"ShapeDef<string>":{$ref:"#/definitions/MarkPropDef%3Cstring%2C(string%7Cnull)%2CTypeForShape%3E"},SizeDef:{additionalProperties:!1,properties:{grow:{description:"Share of the remaining space",type:"number"},px:{description:"Size in pixels",type:"number"}},type:"object"},SortOrder:{enum:["ascending","descending"],type:"string"},StackParams:{additionalProperties:!1,properties:{as:{description:'Fields to write the stacked values.\n\n**Default:** `["y0", "y1"]`',items:{type:"string"},type:"array"},baseField:{$ref:"#/definitions/Field",description:'The field that contains the base or amino acid. Used for information content calculation when the offset is `"information"`. The data objects that have `null` in the baseField are considered gaps and they are taken into account when scaling the the locus\' information content.'},cardinality:{description:'Cardinality, e.g., the number if distinct bases or amino acids. Used for information content calculation when the offset is `"information"`.\n\n**Default:** `4`',type:"number"},field:{$ref:"#/definitions/Field",description:"The field to stack. If no field is defined, a constant value of one is assumed."},groupby:{description:"The fields to be used for forming groups for different stacks.",items:{$ref:"#/definitions/Field"},type:"array"},offset:{description:'How to offset the values in a stack. `"zero"` (default) starts stacking at 0. `"center"` centers the values around zero. `"normalize"` computes intra-stack percentages and normalizes the values to the range of `[0, 1]`. `"information"` computes a layout for a sequence logo. The total height of the stack reflects the group\'s information content.',enum:["zero","center","normalize","information"],type:"string"},sort:{$ref:"#/definitions/CompareParams",description:"The sort order of data in each stack."},type:{const:"stack",description:"The type of the transform to be applied",type:"string"}},required:["as","groupby","type"],type:"object"},Step:{additionalProperties:!1,properties:{step:{type:"number"}},required:["step"],type:"object"},StringDatumDef:{additionalProperties:!1,properties:{datum:{$ref:"#/definitions/Scalar",description:"A constant value in data domain."},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"StringFieldDef<string>":{additionalProperties:!1,properties:{field:{description:'__Required.__ A string defining the name of the field from which to pull a data value or an object defining iterated values from the [`repeat`](https://vega.github.io/vega-lite/docs/repeat.html) operator.\n\n__See also:__ [`field`](https://vega.github.io/vega-lite/docs/field.html) documentation.\n\n__Notes:__ 1)  Dots (`.`) and brackets (`[` and `]`) can be used to access nested objects (e.g., `"field": "foo.bar"` and `"field": "foo[\'bar\']"`). If field names contain dots or brackets but are not nested, you can use `\\\\` to escape dots and brackets (e.g., `"a\\\\.b"` and `"a\\\\[0\\\\]"`). See more details about escaping in the [field documentation](https://vega.github.io/vega-lite/docs/field.html). 2) `field` is not required if `aggregate` is `count`.',type:"string"},format:{description:`When used with the default \`"number"\` format type, the text formatting pattern for labels of guides (axes, legends, headers) and text marks.

- If the format type is \`"number"\` (e.g., for quantitative fields), this is D3's [number format pattern](https://github.com/d3/d3-format#locale_format).

See the [format documentation](https://vega.github.io/vega-lite/docs/format.html) for more examples.`,type:"string"},title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]}},type:"object"},"TextDef<string>":{anyOf:[{$ref:"#/definitions/StringFieldDef%3Cstring%3E"},{$ref:"#/definitions/StringDatumDef"},{$ref:"#/definitions/ExprDef"}]},Title:{additionalProperties:!1,properties:{align:{$ref:"#/definitions/Align",description:'Horizontal text alignment for title text. One of `"left"`, `"center"`, or `"right"`.'},anchor:{$ref:"#/definitions/TitleAnchor",description:'The anchor position for placing the title and subtitle text. One of `"start"`, `"middle"`, or `"end"`. For example, with an orientation of top these anchor positions map to a left-, center-, or right-aligned title.'},angle:{description:"Angle in degrees of title and subtitle text.",type:"number"},baseline:{$ref:"#/definitions/Baseline",description:'Vertical text baseline for title and subtitle text. One of `"alphabetic"` (default), `"top"`, `"middle"`, or `"bottom"`.'},color:{description:"Text color for title text.",type:"string"},dx:{description:"Delta offset for title and subtitle text x-coordinate.",type:"number"},dy:{description:"Delta offset for title and subtitle text y-coordinate.",type:"number"},font:{description:"Font name for title text.",type:"string"},fontSize:{description:"Font size in pixels for title text.",minimum:0,type:"number"},fontStyle:{$ref:"#/definitions/FontStyle",description:"Font style for title text."},fontWeight:{$ref:"#/definitions/FontWeight",description:'Font weight for title text. This can be either a string (e.g `"bold"`, `"normal"`) or a number (`100`, `200`, `300`, ..., `900` where `"normal"` = `400` and `"bold"` = `700`).'},frame:{$ref:"#/definitions/TitleFrame",description:'The reference frame for the anchor position, one of `"bounds"` (to anchor relative to the full bounding box) or `"group"` (to anchor relative to the group width or height).'},offset:{description:"The orthogonal offset in pixels by which to displace the title group from its position along the edge of the chart.",type:"number"},orient:{$ref:"#/definitions/TitleOrient",description:'Default title orientation (`"top"`, `"bottom"`, `"left"`, or `"right"`)'},style:{description:'A mark style property to apply to the title text mark. If not specified, a default style of `"group-title"` is applied.',type:"string"},text:{description:"The title text.",type:"string"}},required:["text"],type:"object"},TitleAnchor:{enum:[null,"start","middle","end"],type:["null","string"]},TitleFrame:{enum:["bounds","group"],type:"string"},TitleOrient:{enum:["none","left","right","top","bottom"],type:"string"},Tooltip:{anyOf:[{$ref:"#/definitions/HandledTooltip"},{type:"null"}]},TransformParams:{anyOf:[{$ref:"#/definitions/AggregateParams"},{$ref:"#/definitions/CollectParams"},{$ref:"#/definitions/CoverageParams"},{$ref:"#/definitions/FlattenDelimitedParams"},{$ref:"#/definitions/FormulaParams"},{$ref:"#/definitions/FilterParams"},{$ref:"#/definitions/FilterScoredLabelsParams"},{$ref:"#/definitions/FlattenCompressedExonsParams"},{$ref:"#/definitions/FlattenSequenceParams"},{$ref:"#/definitions/IdentifierParams"},{$ref:"#/definitions/LinearizeGenomicCoordinateParams"},{$ref:"#/definitions/MeasureTextParams"},{$ref:"#/definitions/MergeFacetsParams"},{$ref:"#/definitions/PileupParams"},{$ref:"#/definitions/ProjectParams"},{$ref:"#/definitions/RegexExtractParams"},{$ref:"#/definitions/RegexFoldParams"},{$ref:"#/definitions/SampleParams"},{$ref:"#/definitions/StackParams"}]},Type:{enum:["quantitative","ordinal","nominal","index","locus"],type:"string"},TypeForShape:{enum:["ordinal","nominal"],type:"string"},UnitSpec:{additionalProperties:!1,properties:{aggregateSamples:{items:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"}]},type:"array"},baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},mark:{anyOf:[{$ref:"#/definitions/MarkType"},{$ref:"#/definitions/MarkConfigAndType"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},view:{$ref:"#/definitions/ViewBackground"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["mark"],type:"object"},UrlData:{additionalProperties:!1,properties:{format:{$ref:"#/definitions/DataFormat",description:"An object that specifies the format for parsing the data."},name:{description:"Provide a placeholder name and bind data at runtime.",type:"string"},url:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"An URL or an array of URLs from which to load the data set. Use the `format.type` property to ensure the loaded data is correctly parsed."}},required:["url"],type:"object"},VConcatSpec:{additionalProperties:!1,properties:{baseUrl:{type:"string"},configurableVisibility:{description:"Is the visibility configurable interactively from the App. Configurability requires that the view has an explicitly specified name that is *unique* in within the view specification.\n\n**Default:** `false` for children of `layer`, `true` for others.",type:"boolean"},data:{$ref:"#/definitions/Data"},description:{anyOf:[{type:"string"},{items:{type:"string"},type:"array"}],description:"A description of the view. Multiple lines can be provided as an array."},encoding:{$ref:"#/definitions/Encoding"},height:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]},name:{type:"string"},opacity:{$ref:"#/definitions/ViewOpacityDef",description:"Opacity of the view and all its children.\n\n**Default:* `1.0`"},padding:{$ref:"#/definitions/PaddingConfig",description:"Padding in pixels.\n\n**Default:* `0`"},resolve:{additionalProperties:!1,properties:{axis:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"},scale:{additionalProperties:{$ref:"#/definitions/ResolutionBehavior"},properties:{default:{$ref:"#/definitions/ResolutionBehavior"}},type:"object"}},type:"object"},spacing:{type:"number"},title:{anyOf:[{type:"string"},{$ref:"#/definitions/Title"}]},transform:{items:{$ref:"#/definitions/TransformParams"},type:"array"},vconcat:{items:{anyOf:[{$ref:"#/definitions/ViewSpec"},{$ref:"#/definitions/ImportSpec"}]},type:"array"},visible:{description:"Visibility of the view. An invisible view is removed from the layout and not rendered.\n\n**Default:** `true`",type:"boolean"},width:{anyOf:[{$ref:"#/definitions/SizeDef"},{type:"number"},{$ref:"#/definitions/Step"},{const:"container",type:"string"}]}},required:["vconcat"],type:"object"},"ValueDef<(string|null)>":{additionalProperties:!1,properties:{title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:["string","null"]}},required:["value"],type:"object"},"ValueDef<number>":{additionalProperties:!1,properties:{title:{description:"A title for the field. If `null`, the title will be removed.",type:["string","null"]},value:{description:'A constant value in visual domain (e.g., `"red"` / `"#0099ff"`, values between `0` to `1` for opacity).',type:"number"}},required:["value"],type:"object"},ViewBackground:{additionalProperties:!1,properties:{fill:{description:"The fill color",type:"string"},fillOpacity:{description:"The fill opacity. Value between [0, 1].",type:"number"},stroke:{description:"The stroke color",type:"string"},strokeOpacity:{description:"The stroke opacity. Value between [0, 1].",type:"number"},strokeWidth:{type:"number"}},type:"object"},ViewOpacityDef:{anyOf:[{type:"number"},{$ref:"#/definitions/DynamicOpacity"}]},ViewSpec:{anyOf:[{$ref:"#/definitions/UnitSpec"},{$ref:"#/definitions/LayerSpec"},{$ref:"#/definitions/SampleSpec"},{$ref:"#/definitions/VConcatSpec"},{$ref:"#/definitions/HConcatSpec"},{$ref:"#/definitions/ConcatSpec"}]},ZoomParams:{additionalProperties:!1,properties:{extent:{anyOf:[{$ref:"#/definitions/ScalarDomain"},{$ref:"#/definitions/ComplexDomain"}],description:"The boundaries that limit the zoom and pan interactions."}},type:"object"}},Lz={$ref:iPe,$schema:nPe,definitions:sPe},rPe="@genome-spy/playground",oPe="0.34.0",aPe="A playground for testing GenomeSpy visualizations",lPe={dev:"vite",build:"vite build",serve:"vite preview"},cPe="Kari Lavikka",hPe="MIT",uPe={"@fortawesome/fontawesome-free":"^6.1.1","@fortawesome/fontawesome-svg-core":"^6.1.1","@fortawesome/free-solid-svg-icons":"^6.1.1","@genome-spy/core":"^0.34.0",lit:"^2.0.2","lit-html":"^2.4.0","monaco-editor":"^0.30.1","vega-loader":"^4.4.0"},Az={name:rPe,private:!0,version:oPe,description:aPe,scripts:lPe,author:cPe,license:hPe,dependencies:uPe},dPe="modulepreload",fPe=function(i,e){return new URL(i,e).href},Ez={},gPe=function(e,t,n){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=fPe(r,n),r in Ez)return;Ez[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const u=s[h];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":dPe,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};var pPe=function(){function i(e,t,n){this._onDidChange=new ePe,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}return Object.defineProperty(i.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),i.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},i.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},i}(),mPe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},_Pe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},dee=new pPe("json",mPe,_Pe);a2.json={jsonDefaults:dee};function bPe(){return gPe(()=>import("./jsonMode-31070ad1.js"),[],import.meta.url)}a2.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});a2.onLanguage("json",function(){bPe().then(function(i){return i.setupMode(dee)})});const Iz=65535,kc=16777215,Tz=4278190080;class L1{constructor(e,t,n){if(e.length!==t.length||e.length>Iz)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,s)=>{let r=e[e.length-1];return this.getStartLineNumber(r)<=n&&this.getEndLineNumber(r)>=s};for(let n=0,s=this._startIndexes.length;n<s;n++){let r=this._startIndexes[n],o=this._endIndexes[n];if(r>kc||o>kc)throw new Error("startLineNumber or endLineNumber must not exceed "+kc);for(;e.length>0&&!t(r,o);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=r+((a&255)<<24),this._endIndexes[n]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&kc}getEndLineNumber(e){return this._endIndexes[e]&kc}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,s=e%32,r=this._collapseStates[n];t?this._collapseStates[n]=r|1<<s:this._collapseStates[n]=r&~(1<<s)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),n=!0);return n}toRegion(e){return new vPe(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Tz)>>>24)+((this._endIndexes[e]&Tz)>>>16);return t===Iz?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let s=Math.floor((t+n)/2);e<this.getStartLineNumber(s)?n=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class vPe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class wPe{constructor(e,t){this._updateEventEmitter=new z,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new L1(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,s)=>n.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),h=this._regions.isCollapsed(s);c<=r&&n.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(h,c<=o)),h&&c>o&&(o=c),s++}};for(let l of e){let c=l.regionIndex,h=this._editorDecorationIds[c];if(h&&!t[h]){t[h]=!0,a(c);let u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],s=(u,d)=>{for(let f of t)if(u<f&&f<=d)return!0;return!1},r=-1,o=(u,d)=>{const f=e.getStartLineNumber(u),g=e.getEndLineNumber(u);d||(d=e.isCollapsed(u)),d&&s(f,g)&&(d=!1),e.setCollapsed(u,d);const p=this._textModel.getLineMaxColumn(f),m={startLineNumber:f,startColumn:Math.max(p-1,1),endLineNumber:f,endColumn:p};n.push({range:m,options:this._decorationProvider.getDecorationOption(d,g<=r)}),d&&g>r&&(r=g)},a=0,l=()=>{for(;a<this._regions.length;){let u=this._regions.isCollapsed(a);if(a++,u)return a-1}return-1},c=0,h=l();for(;h!==-1&&c<e.length;){let u=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(u){let d=u.startLineNumber;if(u.startColumn===Math.max(u.endColumn-1,1)&&this._textModel.getLineMaxColumn(d)===u.endColumn)for(;c<e.length;){let f=e.getStartLineNumber(c);if(d>=f)o(c,d===f),c++;else break}}h=l()}for(;c<e.length;)o(c,!1),c++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let s=n.startLineNumber,r=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:s,endLineNumber:r})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let s=this.getRegionAtLine(n.startLineNumber);s&&!s.isCollapsed&&t.push(s)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){let o=this._regions.toRegion(s);(!t||t(o,r))&&n.push(o),r++,s=o.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){let c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&n.push(c)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){let l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&n.push(l);else break}return n}}function yPe(i,e,t){let n=[];for(let s of t){let r=i.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(n.push(r),e>1){let a=i.getRegionsInside(r,(l,c)=>l.isCollapsed!==o&&c<e);n.push(...a)}}}i.toggleCollapseState(n)}function j0(i,e,t=Number.MAX_VALUE,n){let s=[];if(n&&n.length>0)for(let r of n){let o=i.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){let a=i.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{let r=i.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}i.toggleCollapseState(s)}function fee(i,e,t,n){let s=[];for(let r of n){let o=i.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}i.toggleCollapseState(s)}function CPe(i,e,t){let n=[];for(let s of t){let r=i.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&n.push(r[0])}i.toggleCollapseState(n)}function SPe(i,e,t,n){let s=(o,a)=>a===e&&o.isCollapsed!==t&&!n.some(l=>o.containsLine(l)),r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function gee(i,e,t){let n=[];for(let o of t)n.push(i.getAllRegionsAtLine(o,void 0)[0]);let s=o=>n.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=i.getRegionsInside(null,s);i.toggleCollapseState(r)}function dF(i,e,t){let n=i.textModel,s=i.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){let a=s.getStartLineNumber(o);e.test(n.getLineContent(a))&&r.push(s.toRegion(o))}i.toggleCollapseState(r)}function fF(i,e,t){let n=i.regions,s=[];for(let r=n.length-1;r>=0;r--)t!==n.isCollapsed(r)&&e===n.getType(r)&&s.push(n.toRegion(r));i.toggleCollapseState(s)}function xPe(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let s=n.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function DPe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,s=0;for(n!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function kPe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,s=0;if(n!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class LPe{constructor(e){this._updateEventEmitter=new z,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],n=0,s=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);r<=l&&c<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new F(l,1,c,1))),r=l,o=c)}(e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new F(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Nz(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,s=null,r=o=>((!s||!APe(o,s))&&(s=Nz(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o],c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);let h=r(l.endLineNumber);h&&(l=l.setEndPosition(h,n.getLineMaxColumn(h)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function APe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function Nz(i,e){let t=mQ(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const EPe=5e3,IPe="indent";class TPe{constructor(e){this.editorModel=e,this.id=IPe}dispose(){}compute(e){let t=Mi.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(MPe(this.editorModel,n,s))}}let NPe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>kc||t>kc)return;let s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)t[r]=this._startIndexes[s],n[r]=this._endIndexes[s];return new L1(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const s=e.getOptions().tabSize;let r=new Uint32Array(this._foldingRangesLimit),o=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let c=this._startIndexes[a],h=e.getLineContent(c),u=Zr.computeIndentLevel(h,s);(u<n||u===n&&t++<this._foldingRangesLimit)&&(r[l]=c,o[l]=this._endIndexes[a],l++)}return new L1(r,o)}}};function MPe(i,e,t,n=EPe){const s=i.getOptions().tabSize;let r=new NPe(n),o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],l=i.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=i.getLineCount();c>0;c--){let h=i.getLineContent(c),u=Zr.computeIndentLevel(h,s),d=a[a.length-1];if(u===-1){e&&(d.endAbove=c);continue}let f;if(o&&(f=h.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,d=a[g],r.insertFirst(c,d.line,u),d.line=c,d.indent=u,d.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(d.indent>u){do a.pop(),d=a[a.length-1];while(d.indent>u);let g=d.endAbove-1;g-c>=1&&r.insertFirst(c,g,u)}d.indent===u?d.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return r.toIndentRanges(i)}const RPe=5e3,OPe={},pee="syntax";class PPe{constructor(e,t,n,s=RPe){this.editorModel=e,this.providers=t,this.limit=s,this.id=pee;for(const r of t)typeof r.onDidChange=="function"&&(this.disposables||(this.disposables=new de),this.disposables.add(r.onDidChange(n)))}compute(e){return FPe(this.providers,this.editorModel,e).then(t=>t?mee(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function FPe(i,e,t){let n=null,s=i.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,OPe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},Wo));return Promise.all(s).then(r=>n)}class BPe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,s){if(e>kc||t>kc)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=n,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new L1(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let o=0;o<this._nestingLevelCounts.length;o++){let a=this._nestingLevelCounts[o];if(a){if(a+e>this._foldingRangesLimit){t=o;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit),r=[];for(let o=0,a=0;o<this._length;o++){let l=this._nestingLevels[o];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[o],s[a]=this._endIndexes[o],r[a]=this._types[o],a++)}return new L1(n,s,r)}}}function mee(i,e){let t=i.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),n=new BPe(e),s,r=[];for(let o of t)if(!s)s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,n.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}n.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return n.toIndentRanges()}const _ee="init";class VPe{constructor(e,t,n,s){if(this.editorModel=e,this.id=_ee,t.length){let r=o=>({range:{startLineNumber:o.startLineNumber,startColumn:0,endLineNumber:o.endLineNumber,endColumn:e.getLineLength(o.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(r)),this.timeout=setTimeout(n,s)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let s=this.editorModel.getDecorationRange(n);s&&t.push({start:s.startLineNumber,end:s.endLineNumber,rank:1})}return Promise.resolve(mee(t,Number.MAX_VALUE))}}const gF=is("folding-expanded",be.chevronDown,_("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),pF=is("folding-collapsed",be.chevronRight,_("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class yo{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?yo.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?yo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:yo.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?yo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:yo.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}yo.COLLAPSED_VISUAL_DECORATION=ct.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:ci.asClassName(pF)});yo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ct.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:ci.asClassName(pF)});yo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ct.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:ci.asClassName(gF)});yo.EXPANDED_VISUAL_DECORATION=ct.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ci.asClassName(gF)});yo.HIDDEN_RANGE_DECORATION=ct.register({description:"folding-hidden-range-decoration",stickiness:1});var WPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zPe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ms=new De("foldingEnabled",!1);let Qm=class bee extends te{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new de),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new yo(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=ms.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(s=>{if(s.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),s.hasChanged(98)||s.hasChanged(39)){const r=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=r.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=r.get(39),this.onModelContentChanged()}s.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),s.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),s.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(bee.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===pee||e.provider===_ee)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const s=this.getFoldingModel();s&&s.then(r=>{if(r){this._restoringViewState=!0;try{r.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,Ze)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new wPe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new LPe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new I0(200),this.cursorChangedScheduler=new mi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(HM.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(()=>this.onModelContentChanged())),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new TPe(e),this._useFoldingProviders&&this.foldingModel){let t=HM.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new VPe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new PPe(e,t,()=>this.onModelContentChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=Ir(s=>t.compute(s));return n.then(s=>{if(s&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const l=s.setCollapsedAllOfType(Da.Imports.value,!0);l&&(r=qm.capture(this.editor),this._currentModelHasFoldedImports=l)}let o=this.editor.getSelections(),a=o?o.map(l=>l.startLineNumber):[];e.update(s,a),r&&r.restore(this.editor)}return e})}).then(void 0,e=>(Ze(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let s=[];for(let r of n){let o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(n[0].getPosition()))}}}).then(void 0,Ze)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!(!r||r.startLineNumber!==n)){if(s){if(e.target.type!==4)return}else{let o=this.editor.getModel();if(!o||r.startColumn!==o.getLineMaxColumn(n))return}t.then(o=>{if(o){let a=o.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(s||l){let c=e.event.altKey,h=[];if(c){let u=f=>!f.containedBy(a)&&!a.containedBy(f),d=o.getRegionsInside(null,u);for(const f of d)f.isCollapsed&&h.push(f);h.length===0&&(h=d)}else{let u=e.event.middleButton||e.event.shiftKey;if(u)for(const d of o.getRegionsInside(a))d.isCollapsed===l&&h.push(d);(l||!u||h.length===0)&&h.push(a)}o.toggleCollapseState(h),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,Ze)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Qm.ID="editor.contrib.folding";Qm=WPe([zPe(1,$e)],Qm);class Vs extends _i{runEditorCommand(e,t,n){let s=Qm.get(t);if(!s)return;let r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(o=>{if(o){this.invoke(s,o,t,n);const a=t.getSelection();a&&s.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function vee(i){if(!us(i)){if(!ks(i))return!1;const e=i;if(!us(e.levels)&&!Tf(e.levels)||!us(e.direction)&&!xa(e.direction)||!us(e.selectionLines)&&(!VY(e.selectionLines)||!e.selectionLines.every(Tf)))return!1}return!0}class HPe extends Vs{constructor(){super({id:"editor.unfold",label:_("unfoldAction.label","Unfold"),alias:"Unfold",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:vee,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=s&&s.levels||1,o=this.getLineNumbers(s,n);s&&s.direction==="up"?fee(t,!1,r,o):j0(t,!1,r,o)}}class UPe extends Vs{constructor(){super({id:"editor.unfoldRecursively",label:_("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2137),weight:100}})}invoke(e,t,n,s){j0(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class $Pe extends Vs{constructor(){super({id:"editor.fold",label:_("foldAction.label","Fold"),alias:"Fold",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:vee,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,s){let r=this.getLineNumbers(s,n);const o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?CPe(t,!0,r):a==="up"?fee(t,!0,o||1,r):j0(t,!0,o||1,r)}}class jPe extends Vs{constructor(){super({id:"editor.toggleFold",label:_("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2090),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);yPe(t,1,s)}}class qPe extends Vs{constructor(){super({id:"editor.foldRecursively",label:_("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2135),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);j0(t,!0,Number.MAX_VALUE,s)}}class GPe extends Vs{constructor(){super({id:"editor.foldAllBlockComments",label:_("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())fF(t,Da.Comment.value,!0);else{const s=n.getModel();if(!s)return;const r=Mi.getComments(s.getLanguageId());if(r&&r.blockCommentStartToken){let o=new RegExp("^\\s*"+Ca(r.blockCommentStartToken));dF(t,o,!0)}}}}class KPe extends Vs{constructor(){super({id:"editor.foldAllMarkerRegions",label:_("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())fF(t,Da.Region.value,!0);else{const s=n.getModel();if(!s)return;const r=Mi.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);dF(t,o,!0)}}}}class ZPe extends Vs{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:_("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())fF(t,Da.Region.value,!1);else{const s=n.getModel();if(!s)return;const r=Mi.getFoldingRules(s.getLanguageId());if(r&&r.markers&&r.markers.start){let o=new RegExp(r.markers.start);dF(t,o,!1)}}}}class YPe extends Vs{constructor(){super({id:"editor.foldAllExcept",label:_("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2131),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);gee(t,!0,s)}}class QPe extends Vs{constructor(){super({id:"editor.unfoldAllExcept",label:_("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2129),weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);gee(t,!1,s)}}class XPe extends Vs{constructor(){super({id:"editor.foldAll",label:_("foldAllAction.label","Fold All"),alias:"Fold All",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2069),weight:100}})}invoke(e,t,n){j0(t,!0)}}class JPe extends Vs{constructor(){super({id:"editor.unfoldAll",label:_("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2088),weight:100}})}invoke(e,t,n){j0(t,!1)}}class Uf extends Vs{getFoldingLevel(){return parseInt(this.id.substr(Uf.ID_PREFIX.length))}invoke(e,t,n){SPe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Uf.ID_PREFIX="editor.foldLevel";Uf.ID=i=>Uf.ID_PREFIX+i;class eFe extends Vs{constructor(){super({id:"editor.gotoParentFold",label:_("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=xPe(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class tFe extends Vs{constructor(){super({id:"editor.gotoPreviousFold",label:_("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=DPe(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class iFe extends Vs{constructor(){super({id:"editor.gotoNextFold",label:_("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,weight:100}})}invoke(e,t,n){let s=this.getSelectedLines(n);if(s.length>0){let r=kPe(s[0],t);r!==null&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}Bs(Qm.ID,Qm);ot(HPe);ot(UPe);ot($Pe);ot(qPe);ot(XPe);ot(JPe);ot(GPe);ot(KPe);ot(ZPe);ot(YPe);ot(QPe);ot(jPe);ot(eFe);ot(tFe);ot(iFe);for(let i=1;i<=7;i++)ZQ(new Uf({id:Uf.ID(i),label:_("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:ms,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2048|21+i),weight:100}}));const nFe=V("editor.foldBackground",{light:qt(ru,.3),dark:qt(ru,.3),hc:null},_("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),sFe=V("editorGutter.foldingControlForeground",{dark:AE,light:AE,hc:AE},_("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));ti((i,e)=>{const t=i.getColor(nFe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(sFe);n&&e.addRule(`
		.monaco-editor .cldr${ci.asCSSSelector(gF)},
		.monaco-editor .cldr${ci.asCSSSelector(pF)} {
			color: ${n} !important;
		}
		`)});class Gn{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const s=n.options;if(s===Gn._FIND_MATCH_DECORATION||s===Gn._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){let o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],n=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,Gn._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,Gn._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){let o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new F(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,Gn._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let s=Gn._FIND_MATCH_DECORATION,r=[];if(e.length>1e3){s=Gn._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,d=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;d+h>=p.startLineNumber?p.endLineNumber>d&&(d=p.endLineNumber):(r.push({range:new F(u,1,d,1),options:Gn._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,d=p.endLineNumber)}r.push({range:new F(u,1,d,1),options:Gn._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=n.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Gn._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Gn._CURRENT_FIND_MATCH_DECORATION=ct.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:pr(wP),position:Ml.Center},minimap:{color:pr(LX),position:Dl.Inline}});Gn._FIND_MATCH_DECORATION=ct.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:pr(wP),position:Ml.Center},minimap:{color:pr(LX),position:Dl.Inline}});Gn._FIND_MATCH_NO_OVERVIEW_DECORATION=ct.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Gn._FIND_MATCH_ONLY_OVERVIEW_DECORATION=ct.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:pr(wP),position:Ml.Center}});Gn._RANGE_HIGHLIGHT_DECORATION=ct.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Gn._FIND_SCOPE_DECORATION=ct.register({description:"find-scope",className:"findScope",isWholeLine:!0});class rFe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let o=0;o<this._ranges.length;o++)n.push({range:this._ranges[o],text:this._replaceStrings[o]});n.sort((o,a)=>F.compareRangesUsingStarts(o.range,a.range));let s=[],r=n[0];for(let o=1;o<n.length;o++)r.range.endLineNumber===n[o].range.startLineNumber&&r.range.endColumn===n[o].range.startColumn?(r.range=r.range.plusRange(n[o].range),r.text=r.text+n[o].text):(s.push(r),r=n[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function wee(i,e){if(i&&i[0]!==""){const t=Mz(i,e,"-"),n=Mz(i,e,"_");return t&&!n?Rz(i,e,"-"):!t&&n?Rz(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():wxe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Mz(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function Rz(i,e,t){const n=e.split(t),s=i[0].split(t);let r="";return n.forEach((o,a)=>{r+=wee([s[a]],o)+t}),r.slice(0,-1)}class Oz{constructor(e){this.staticValue=e,this.kind=0}}class oFe{constructor(e){this.pieces=e,this.kind=1}}class Xm{constructor(e){!e||e.length===0?this._state=new Oz(""):e.length===1&&e[0].staticValue!==null?this._state=new Oz(e[0].staticValue):this._state=new oFe(e)}static fromStaticValue(e){return new Xm([cf.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?wee(e,this._state.staticValue):this._state.staticValue;let n="";for(let s=0,r=this._state.pieces.length;s<r;s++){let o=this._state.pieces[s];if(o.staticValue!==null){n+=o.staticValue;continue}let a=Xm._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){let l=[],c=o.caseOps.length,h=0;for(let u=0,d=a.length;u<d;u++){if(h>=c){l.push(a.slice(u));break}switch(o.caseOps[h]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),h++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),h++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class cf{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new cf(e,-1,null)}static caseOps(e,t){return new cf(null,e,t)}}class aFe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=cf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=cf.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=cf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Xm(this._result)}}function lFe(i){if(!i||i.length===0)return new Xm(null);let e=[],t=new aFe(i);for(let n=0,s=i.length;n<s;n++){let r=i.charCodeAt(n);if(r===92){if(n++,n>=s)break;let o=i.charCodeAt(n);switch(o){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(n++,n>=s)break;let o=i.charCodeAt(n);if(o===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(o===48||o===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(n+1<s){let l=i.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const Cg=new De("findWidgetVisible",!1),l2=new De("findInputFocussed",!1),mF=new De("replaceInputFocussed",!1),uC={primary:545,mac:{primary:2593}},dC={primary:565,mac:{primary:2613}},fC={primary:560,mac:{primary:2608}},gC={primary:554,mac:{primary:2602}},pC={primary:558,mac:{primary:2606}},$t={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Kh=19999,cFe=240;class Zb{constructor(e,t){this._toDispose=new de,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Os,this._decorations=new Gn(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new mi(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,lt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},cFe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new F(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let s=this._findMatches(n,!1,Kh);this._decorations.set(s,n);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=mQ(s.map(l=>l.range),l=>F.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===1?(n===1?n=r.getLineCount():n--,s=r.getLineMaxColumn(n)):s--,new q(n,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<Kh){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),s=Zb._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());let{lineNumber:r,column:o}=e,a=this._editor.getModel(),l=new q(r,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:s}=e,r=this._editor.getModel();return t||s===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,s=1):s++,new q(n,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Kh){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,s=!1){if(this._cannotFind())return null;let r=this._decorations.getFindScope(),o=Zb._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());let{lineNumber:a,column:l}=e,c=this._editor.getModel(),h=new q(a,l),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),u=c.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?lFe(this._state.replaceString):Xm.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let s=e.buildReplaceString(n.matches,this._state.preserveCase),r=new ws(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new q(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const s=(e||[null]).map(r=>Zb._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Kh?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new dd(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(115):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=r.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=r.replace(n,a.buildReplaceString(null,c));let h=new jX(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=n.length;o<a;o++)s[o]=t.buildReplaceString(n[o].matches,this._state.preserveCase);let r=new rFe(this._editor.getSelection(),n.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(r=>new Ve(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)),s=this._editor.getSelection();for(let r=0,o=n.length;r<o;r++)if(n[r].equalsRange(s)){n=[s].concat(n.slice(0,r)).concat(n.slice(r+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const hFe={inputActiveOptionBorder:Z.fromHex("#007ACC00"),inputActiveOptionForeground:Z.fromHex("#FFFFFF"),inputActiveOptionBackground:Z.fromHex("#0E639C50")};class Kw extends Jr{constructor(e){super(),this._onChange=this._register(new z),this.onChange=this._onChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},hFe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...Zs.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const uFe=_("caseDescription","Match Case"),dFe=_("wordsDescription","Match Whole Word"),fFe=_("regexDescription","Use Regular Expression");class yee extends Kw{constructor(e){super({icon:be.caseSensitive,title:uFe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Cee extends Kw{constructor(e){super({icon:be.wholeWord,title:dFe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class See extends Kw{constructor(e){super({icon:be.regex,title:fFe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class c2 extends Jr{constructor(e,t,n,s){super(),this._hideSoon=this._register(new mi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const r=s.getColorTheme().getColor(c4),o=s.getColorTheme().getColor(u4),a=s.getColorTheme().getColor(h4);this.caseSensitive=this._register(new yee({appendTitle:this._keybindingLabelFor($t.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Cee({appendTitle:this._keybindingLabelFor($t.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new See({appendTitle:this._keybindingLabelFor($t.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:r,inputActiveOptionForeground:o,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let c=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(v5(this._domNode,l=>this._onMouseOut())),this._register(ne(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(s.getColorTheme()),this._register(s.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return c2.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(c4),inputActiveOptionForeground:e.getColor(u4),inputActiveOptionBackground:e.getColor(h4)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}c2.ID="editor.contrib.findOptionsWidget";ti((i,e)=>{const t=i.getColor(Ro);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(su);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const s=i.getColor(zm);s&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(Vi);r&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)});function mC(i,e){return i===1?!0:i===2?!1:e}class gFe extends te{constructor(){super(),this._onFindReplaceStateChange=this._register(new z),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return mC(this._isRegexOverride,this._isRegex)}get wholeWord(){return mC(this._wholeWordOverride,this._wholeWord)}get matchCase(){return mC(this._matchCaseOverride,this._matchCase)}get preserveCase(){return mC(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof n<"u"&&(F.equalsRange(this._currentMatch,n)||(this._currentMatch=n,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,n=!0){var s;let r={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,h=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((s=e.searchScope)===null||s===void 0)&&s.every(u=>{var d;return(d=this._searchScope)===null||d===void 0?void 0:d.some(f=>!F.equalsRange(f,u))})||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(o=!0,r.isRegex=!0),l!==this.wholeWord&&(o=!0,r.wholeWord=!0),c!==this.matchCase&&(o=!0,r.matchCase=!0),h!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Kh}}const pFe=_("defaultLabel","input");class mFe extends Jr{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new z),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new z),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new z),this._onKeyUp=this._register(new z),this._onCaseSensitiveKeyDown=this._register(new z),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new z),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||pFe,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendCaseSensitiveLabel||"",o=s.appendWholeWordsLabel||"",a=s.appendRegexLabel||"",l=s.history||[],c=!!s.flexibleHeight,h=!!s.flexibleWidth,u=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new see(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:s.showHistoryHint,flexibleHeight:c,flexibleWidth:h,flexibleMaxHeight:u})),this.regex=this._register(new See({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new Cee({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new yee({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let p=d.indexOf(document.activeElement);if(p>=0){let m=-1;g.equals(17)?m=(p+1)%d.length:g.equals(15)&&(p===0?m=d.length-1:m=p-1),g.equals(9)?(d[p].blur(),this.inputBox.focus()):m>=0&&d[m].focus(),It.stop(g,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.caseSensitive.domNode),f.appendChild(this.wholeWords.domNode),f.appendChild(this.regex.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this._register(ne(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(ne(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const _Fe=_("defaultLabel","input"),bFe=_("label.preserveCaseCheckbox","Preserve Case");class vFe extends Kw{constructor(e){super({icon:be.preserveCase,title:bFe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class wFe extends Jr{constructor(e,t,n,s){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new z),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new z),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new z),this._onInput=this._register(new z),this._onKeyUp=this._register(new z),this._onPreserveCaseKeyDown=this._register(new z),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||_Fe,this.inputActiveOptionBorder=s.inputActiveOptionBorder,this.inputActiveOptionForeground=s.inputActiveOptionForeground,this.inputActiveOptionBackground=s.inputActiveOptionBackground,this.inputBackground=s.inputBackground,this.inputForeground=s.inputForeground,this.inputBorder=s.inputBorder,this.inputValidationInfoBorder=s.inputValidationInfoBorder,this.inputValidationInfoBackground=s.inputValidationInfoBackground,this.inputValidationInfoForeground=s.inputValidationInfoForeground,this.inputValidationWarningBorder=s.inputValidationWarningBorder,this.inputValidationWarningBackground=s.inputValidationWarningBackground,this.inputValidationWarningForeground=s.inputValidationWarningForeground,this.inputValidationErrorBorder=s.inputValidationErrorBorder,this.inputValidationErrorBackground=s.inputValidationErrorBackground,this.inputValidationErrorForeground=s.inputValidationErrorForeground;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new see(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c})),this.preserveCase=this._register(new vFe({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(d=>{this._onDidOptionChange.fire(d),!d&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(d=>{this._onPreserveCaseKeyDown.fire(d)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,d=>{if(d.equals(15)||d.equals(17)||d.equals(9)){let f=h.indexOf(document.activeElement);if(f>=0){let g=-1;d.equals(17)?g=(f+1)%h.length:d.equals(15)&&(f===0?g=h.length-1:g=f-1),d.equals(9)?(h[f].blur(),this.inputBox.focus()):g>=0&&h[g].focus(),It.stop(d,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}class fo{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),s;if(s=fo._table[n],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(fo.isDigitCharacter(n)){s=8;do t+=1,n=this.value.charCodeAt(e+t);while(fo.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}if(fo.isVariableCharacter(n)){s=9;do n=this.value.charCodeAt(e+ ++t);while(fo.isVariableCharacter(n)||fo.isDigitCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof fo._table[n]>"u"&&!fo.isDigitCharacter(n)&&!fo.isVariableCharacter(n));return this.pos+=t,{type:s,pos:e,len:t}}}fo._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class q0{constructor(){this._children=[]}appendChild(e){return e instanceof Ks&&this._children[this._children.length-1]instanceof Ks?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,s=n.children.indexOf(e),r=n.children.slice(0);r.splice(s,1,...t),n._children=r,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof h2)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Ks extends q0{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Ks(this.value)}}class xee extends q0{}class Co extends xee{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Zw?this._children[0]:void 0}clone(){let e=new Co(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Zw extends q0{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Ks&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Zw;return this.options.forEach(e.appendChild,e),e}}class _F extends q0{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,s=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(r=>r instanceof Xo&&!!r.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const n of this._children)if(n instanceof Xo){let s=e[n.index]||"";s=n.resolve(s),t+=s}else t+=n.toString();return t}toString(){return""}clone(){let e=new _F;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Xo extends q0{constructor(e,t,n,s){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,s)=>s===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new Xo(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class A1 extends xee{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Ks(t)],!0):!1}clone(){const e=new A1(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function Pz(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class h2 extends q0{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Co&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(s=>s===e?(n=!0,!1):(t+=s.len(),!0)),n?t:-1}fullLen(e){let t=0;return Pz([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Co&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof A1&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new h2;return this._children=this.children.map(t=>t.clone()),e}walk(e){Pz(this.children,e)}}class u2{constructor(){this._scanner=new fo,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const s=new h2;for(;this._parse(s););const r=new Map,o=[];let a=0;s.walk(l=>(l instanceof Co&&(a+=1,l.isFinalTabstop?r.set(0,void 0):!r.has(l.index)&&l.children.length>0?r.set(l.index,l.children):o.push(l)),!0));for(const l of o){const c=r.get(l.index);if(c){const h=new Co(l.index);h.transform=l.transform;for(const u of c)h.appendChild(u.clone());s.replace(l,[h])}}return n||(n=a>0&&t),!r.has(0)&&n&&s.appendChild(new Co(0)),s}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Ks(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Co(Number(t)):new A1(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const r=new Co(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ks("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new Zw;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;n.push(s)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new Ks(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const r=new A1(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ks("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n)}_parseTransform(e){let t=new _F,n="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,n+=r;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new Ks(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let s=this._accept(8,!0);if(s)if(n){if(this._accept(4))return e.appendChild(new Xo(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Xo(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){let r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Xo(Number(s),r)),!0)}else if(this._accept(11)){let r=this._until(4);if(r)return e.appendChild(new Xo(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){let r=this._until(4);if(r)return e.appendChild(new Xo(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){let r=this._until(1);if(r){let o=this._until(4);if(o)return e.appendChild(new Xo(Number(s),void 0,r,o)),!0}}else{let r=this._until(4);if(r)return e.appendChild(new Xo(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Ks(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}var Yb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const et={Visible:new De("suggestWidgetVisible",!1,_("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new De("suggestWidgetDetailsVisible",!1,_("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new De("suggestWidgetMultipleSuggestions",!1,_("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new De("suggestionMakesTextEdit",!0,_("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new De("acceptSuggestionOnEnter",!0,_("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new De("suggestionHasInsertAndReplaceRange",!1,_("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new De("suggestionInsertMode",void 0,{type:"string",description:_("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new De("suggestionCanResolve",!1,_("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Tu=new Ue("suggestWidgetStatusBar");class yFe{constructor(e,t,n,s){this.position=e,this.completion=t,this.container=n,this.provider=s,this.isInvalid=!1,this.score=ma.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),F.isIRange(t.range)?(this.editStart=new q(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new q(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new q(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||F.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new q(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new q(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new q(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||F.spansMultipleLines(t.range.insert)||F.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Yb(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{ju(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class ZD{constructor(e=2,t=new Set,n=new Set,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=s}}ZD.default=new ZD;let CFe;function SFe(){return CFe}class xFe{constructor(e,t,n,s){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=s}}function Dee(i,e,t=ZD.default,n={triggerKind:0},s=ei.None){return Yb(this,void 0,void 0,function*(){const r=new qc(!0);e=e.clone();const o=i.getWordAtPosition(e),a=o?new F(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):F.fromPositions(e),l={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},c=[],h=new de,u=[];let d=!1;const f=(p,m,v)=>{var b,w,y;if(m){for(let x of m.suggestions)if(!t.kindFilter.has(x.kind)){if(!t.showDeprecated&&(!((b=x==null?void 0:x.tags)===null||b===void 0)&&b.includes(1)))continue;x.range||(x.range=l),x.sortText||(x.sortText=typeof x.label=="string"?x.label:x.label.label),!d&&x.insertTextRules&&x.insertTextRules&4&&(d=u2.guessNeedsClipboard(x.insertText)),c.push(new yFe(e,x,m,p))}sY(m)&&h.add(m),u.push({providerName:(w=p._debugDisplayName)!==null&&w!==void 0?w:"unkown_provider",elapsedProvider:(y=m.duration)!==null&&y!==void 0?y:-1,elapsedOverall:v.elapsed()})}},g=(()=>Yb(this,void 0,void 0,function*(){}))();for(let p of na.orderedGroups(i)){let m=c.length;if(yield Promise.all(p.map(v=>Yb(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(v)))try{const b=new qc(!0),w=yield v.provideCompletionItems(i,e,n,s);f(v,w,b)}catch(b){Wo(b)}}))),m!==c.length||s.isCancellationRequested)break}return yield g,s.isCancellationRequested?(h.dispose(),Promise.reject(E0())):new xFe(c.sort(kee(t.snippetSortOrder)),d,{entries:u,elapsed:r.elapsed()},h)})}function bF(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function DFe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return bF(i,e)}function kFe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return bF(i,e)}const d2=new Map;d2.set(0,DFe);d2.set(2,kFe);d2.set(1,bF);function kee(i){return d2.get(i)}Nt.registerCommand("_executeCompletionItemProvider",(i,...e)=>Yb(void 0,void 0,void 0,function*(){const[t,n,s,r]=e;Pi(We.isUri(t)),Pi(q.isIPosition(n)),Pi(typeof s=="string"||!s),Pi(typeof r=="number"||!r);const o=yield i.get(Rl).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},l=[],c=yield Dee(o.object.textEditorModel,q.lift(n),void 0,{triggerCharacter:s,triggerKind:s?1:0});for(const h of c.items)l.length<(r??0)&&l.push(h.resolve(ei.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(l),a}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{o.dispose()}}));const d3=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};na.register("*",d3);function LFe(i,e){setTimeout(()=>{d3.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(d3))},0)}var Lee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Aee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const E1="historyNavigationWidget",Eee="historyNavigationForwardsEnabled",Iee="historyNavigationBackwardsEnabled";function AFe(i,e,t){new De(t,e).bindTo(i)}function EFe(i,e){return i.createScoped(e.target)}function Tee(i,e){return i.getContext(document.activeElement).getValue(e)}function Nee(i,e){const t=EFe(i,e);AFe(t,e,E1);const n=new De(Eee,!0).bindTo(t),s=new De(Iee,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:s}}let f3=class extends mFe{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(Nee(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};f3=Lee([Aee(3,$e)],f3);let g3=class extends wFe{constructor(e,t,n,s,r=!1){super(e,t,r,n),this._register(Nee(s,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};g3=Lee([Aee(3,$e)],g3);gs.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:xe.and(xe.has(E1),xe.equals(Iee,!0),et.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=Tee(i.get($e),E1);e&&e.historyNavigator.showPreviousValue()}});gs.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:xe.and(xe.has(E1),xe.equals(Eee,!0),et.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=Tee(i.get($e),E1);e&&e.historyNavigator.showNextValue()}});function Fz(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var IFe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const TFe=is("find-selection",be.selection,_("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Bz=is("find-collapsed",be.chevronRight,_("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Vz=is("find-expanded",be.chevronDown,_("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),NFe=is("find-replace",be.replace,_("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),MFe=is("find-replace-all",be.replaceAll,_("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),RFe=is("find-previous-match",be.arrowUp,_("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),OFe=is("find-next-match",be.arrowDown,_("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),PFe=_("label.find","Find"),FFe=_("placeholder.find","Find"),BFe=_("label.previousMatchButton","Previous Match"),VFe=_("label.nextMatchButton","Next Match"),WFe=_("label.toggleSelectionFind","Find in Selection"),zFe=_("label.closeButton","Close"),HFe=_("label.replace","Replace"),UFe=_("placeholder.replace","Replace"),$Fe=_("label.replaceButton","Replace"),jFe=_("label.replaceAllButton","Replace All"),qFe=_("label.toggleReplaceButton","Toggle Replace"),GFe=_("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Kh),KFe=_("label.matchesLocation","{0} of {1}"),Wz=_("label.noResults","No results"),Ka=419,ZFe=275,YFe=ZFe-54;let D_=69;const QFe=33,zz="ctrlEnterReplaceAll.windows.donotask",Hz=ut?256:2048;class vI{constructor(e){this.afterLineNumber=e,this.heightInPx=QFe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Uz(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function $z(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class f2 extends Jr{constructor(e,t,n,s,r,o,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(zz,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new I0(500),this._register(pt(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(129)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const u=this._codeEditor.getOption(35).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new vI(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>IFe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=l2.bindTo(o),this._findFocusTracker=this._register(Im(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=mF.bindTo(o),this._replaceFocusTracker=this._register(Im(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new vI(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return f2.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=uo(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ze)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=D_+"px",this._state.matchesCount>=Kh?this._matchesCount.title=GFe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Kh&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=mo(KFe,n,t)}else e=Wz;this._matchesCount.appendChild(document.createTextNode(e)),dg(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),D_=Math.max(D_,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Wz)return n===""?_("ariaSearchNoResultEmpty","{0} found",e):_("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const s=_("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return _("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const s=Rn(n),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=SY(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(s=>{n.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new vI(0));const n=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===n.heightInPx)return;let o=r-n.heightInPx;n.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(74).top,r<=0)return;n.heightInPx=r,this._viewZoneId=s.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(c4),inputActiveOptionBackground:e.getColor(h4),inputActiveOptionForeground:e.getColor(u4),inputBackground:e.getColor(gX),inputForeground:e.getColor(pX),inputBorder:e.getColor(mX),inputValidationInfoBackground:e.getColor(pP),inputValidationInfoForeground:e.getColor(mP),inputValidationInfoBorder:e.getColor(_P),inputValidationWarningBackground:e.getColor(_X),inputValidationWarningForeground:e.getColor(bX),inputValidationWarningBorder:e.getColor(vX),inputValidationErrorBackground:e.getColor(wX),inputValidationErrorForeground:e.getColor(yX),inputValidationErrorBorder:e.getColor(CX)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!_5(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&uo(this._domNode)>Ka){this._domNode.style.maxWidth=`${n-28-s-15}px`,this._replaceInput.width=uo(this._findInput.domNode);return}if(Ka+28+s>=n&&(o=!0),Ka+28+s-D_>=n&&(a=!0),Ka+28+s-D_>=n+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${n-28-s-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=uo(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!F.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Hz|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Uz(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return $z(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Hz|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Fn&&Up&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(_("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(zz,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Uz(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return $z(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new f3(null,this._contextViewProvider,{width:YFe,label:PFe,placeholder:FFe,appendCaseSensitiveLabel:this._keybindingLabelFor($t.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor($t.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor($t.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(c){return{content:c.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Fz(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),Is&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new Qg({label:BFe+this._keybindingLabelFor($t.PreviousMatchFindAction),icon:RFe,onTrigger:()=>{this._codeEditor.getAction($t.PreviousMatchFindAction).run().then(void 0,Ze)}})),this._nextBtn=this._register(new Qg({label:VFe+this._keybindingLabelFor($t.NextMatchFindAction),icon:OFe,onTrigger:()=>{this._codeEditor.getAction($t.NextMatchFindAction).run().then(void 0,Ze)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Kw({icon:TFe,title:WFe+this._keybindingLabelFor($t.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(c=>(c.endColumn===1&&c.endLineNumber>c.startLineNumber&&(c=c.setEndPosition(c.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(c.endLineNumber-1))),c.isEmpty()?null:c)).filter(c=>!!c),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Qg({label:zFe+this._keybindingLabelFor($t.CloseFindWidgetCommand),icon:VMe,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),s.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new g3(null,void 0,{label:HFe,placeholder:UFe,appendPreserveCaseLabel:this._keybindingLabelFor($t.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Fz(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new Qg({label:$Fe+this._keybindingLabelFor($t.ReplaceOneAction),icon:NFe,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new Qg({label:jFe+this._keybindingLabelFor($t.ReplaceAllAction),icon:MFe,onTrigger:()=>{this._controller.replaceAll()}}));let r=document.createElement("div");r.className="replace-part",r.appendChild(this._replaceInput.domNode);const o=document.createElement("div");o.className="replace-actions",r.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Qg({label:qFe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=uo(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${Ka}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(r),this._resizeSash=new Mn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=Ka;this._register(this._resizeSash.onDidStart(()=>{a=uo(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let c=a+l.startX-l.currentX;if(c<Ka)return;const h=parseFloat(y5(this._domNode).maxWidth)||0;c>h||(this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=uo(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=uo(this._domNode);if(l<Ka)return;let c=Ka;if(!this._resized||l===Ka){const h=this._codeEditor.getLayoutInfo();c=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${c}px`,this._isReplaceVisible&&(this._replaceInput.width=uo(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}f2.ID="editor.contrib.findWidget";class Qg extends Jr{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+ci.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...ci.asClassNameArray(Bz)),this._domNode.classList.add(...ci.asClassNameArray(Vz))):(this._domNode.classList.remove(...ci.asClassNameArray(Vz)),this._domNode.classList.add(...ci.asClassNameArray(Bz)))}}ti((i,e)=>{const t=(g,p)=>{p&&e.addRule(`.monaco-editor ${g} { background-color: ${p}; }`)};t(".findMatch",i.getColor(f4)),t(".currentFindMatch",i.getColor(oEe)),t(".findScope",i.getColor(aEe));const n=i.getColor(Ro);t(".find-widget",n);const s=i.getColor(zm);s&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${s}; }`);const r=i.getColor(cEe);r&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const o=i.getColor(lEe);o&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${o}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(hEe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const l=i.getColor(Vi);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const c=i.getColor(su);c&&e.addRule(`.monaco-editor .find-widget { color: ${c}; }`);const h=i.getColor(zAe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const u=i.getColor(YAe);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const g=i.getColor(nf);g&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${g}; }`)}const d=i.getColor(jEe);d&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${d} !important;
		}
	`);const f=i.getColor(ku);f&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${f}; }`)});var Mee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Jm=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const XFe=524288;function p3(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const s=i.getConfiguredWordAtPosition(n.getStartPosition());if(s&&t===!1)return s.word}else if(i.getModel().getValueLengthInRange(n)<XFe)return i.getModel().getValueInRange(n)}return null}let Lr=class Ree extends te{constructor(e,t,n,s){super(),this._editor=e,this._findWidgetVisible=Cg.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=s,this._updateHistoryDelayer=new I0(500),this._state=this._register(new gFe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(Ree.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!l2.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Ca(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return Jm(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){let n=p3(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?t.searchString=Ca(n):t.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let n=p3(this._editor,e.seedSearchStringFromSelection);n&&(t.searchString=n)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let n=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(t.searchString=n)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let n=this._editor.getSelections();n.some(s=>!s.isEmpty())&&(t.searchScope=n)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new Zb(this._editor,this._state))})}start(e){return this._start(e)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Jm(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Lr.ID="editor.contrib.findController";Lr=Mee([tl(1,$e),tl(2,yg),tl(3,_g)],Lr);let m3=class extends Lr{constructor(e,t,n,s,r,o,a,l){super(e,n,a,l),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._notificationService=o,this._widget=null,this._findOptionsWidget=null}_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return Jm(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const n=this._editor.getSelection();let s=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":s=!!n&&n.startLineNumber!==n.endLineNumber;break}e.updateSearchScope=s,yield t._start.call(this,e),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new f2(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new c2(this._editor,this._state,this._keybindingService,this._themeService))}};m3=Mee([tl(1,pg),tl(2,$e),tl(3,zi),tl(4,oi),tl(5,zn),tl(6,yg),tl(7,_g)],m3);const JFe=KQ(new GQ({id:$t.StartFindAction,label:_("startFindAction","Find"),alias:"Find",precondition:xe.or(G.focus,xe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Ue.MenubarEditMenu,group:"3_find",title:_({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));JFe.addImplementation(0,(i,e,t)=>{const n=Lr.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});class eBe extends _i{constructor(){super({id:$t.StartFindWithSelection,label:_("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Jm(this,void 0,void 0,function*(){let n=Lr.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class Oee extends _i{run(e,t){return Jm(this,void 0,void 0,function*(){let n=Lr.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class tBe extends Oee{constructor(){super({id:$t.NextMatchFindAction,label:_("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:G.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:xe.and(G.focus,l2),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class iBe extends Oee{constructor(){super({id:$t.PreviousMatchFindAction,label:_("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:G.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:xe.and(G.focus,l2),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class Pee extends _i{run(e,t){return Jm(this,void 0,void 0,function*(){let n=Lr.get(t);if(!n)return;const s=t.getOption(35).seedSearchStringFromSelection==="selection";let r=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(r=p3(t,"single",s)),r&&n.setSearchString(r),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:s,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class nBe extends Pee{constructor(){super({id:$t.NextSelectionMatchFindAction,label:_("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class sBe extends Pee{constructor(){super({id:$t.PreviousSelectionMatchFindAction,label:_("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const rBe=KQ(new GQ({id:$t.StartFindReplaceAction,label:_("startReplace","Replace"),alias:"Replace",precondition:xe.or(G.focus,xe.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Ue.MenubarEditMenu,group:"3_find",title:_({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));rBe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Lr.get(e);if(!n)return!1;const s=e.getSelection(),r=n.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});Bs(Lr.ID,m3);ot(eBe);ot(tBe);ot(iBe);ot(nBe);ot(sBe);const Fa=Qr.bindToContribution(Lr.get);pe(new Fa({id:$t.CloseFindWidgetCommand,precondition:Cg,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,xe.not("isComposing")),primary:9,secondary:[1033]}}));pe(new Fa({id:$t.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:uC.primary,mac:uC.mac,win:uC.win,linux:uC.linux}}));pe(new Fa({id:$t.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:dC.primary,mac:dC.mac,win:dC.win,linux:dC.linux}}));pe(new Fa({id:$t.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:fC.primary,mac:fC.mac,win:fC.win,linux:fC.linux}}));pe(new Fa({id:$t.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:gC.primary,mac:gC.mac,win:gC.win,linux:gC.linux}}));pe(new Fa({id:$t.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:pC.primary,mac:pC.mac,win:pC.win,linux:pC.linux}}));pe(new Fa({id:$t.ReplaceOneAction,precondition:Cg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:3094}}));pe(new Fa({id:$t.ReplaceOneAction,precondition:Cg,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,mF),primary:3}}));pe(new Fa({id:$t.ReplaceAllAction,precondition:Cg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:2563}}));pe(new Fa({id:$t.ReplaceAllAction,precondition:Cg,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:xe.and(G.focus,mF),primary:void 0,mac:{primary:2051}}}));pe(new Fa({id:$t.SelectAllMatchesAction,precondition:Cg,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:G.focus,primary:515}}));function G0(i,e){const t=e.filter(n=>!i.find(s=>s.equals(n)));if(t.length>=1){const n=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),s=t.length===1?_("cursorAdded","Cursor added: {0}",n):_("cursorsAdded","Cursors added: {0}",n);lD(s)}}class oBe extends _i{constructor(){super({id:"editor.action.insertCursorAbove",label:_("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,pn.addCursorUp(r,o,s)),r.revealTopMostCursor(n.source),G0(o,r.getCursorStates())}}class aBe extends _i{constructor(){super({id:"editor.action.insertCursorBelow",label:_("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let s=!0;n&&n.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.pushStackElement();const o=r.getCursorStates();r.setCursorStates(n.source,3,pn.addCursorDown(r,o,s)),r.revealBottomMostCursor(n.source),G0(o,r.getCursorStates())}}class lBe extends _i{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:_("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){let r=t.getLineMaxColumn(s);n.push(new Ve(s,r,s,r))}e.endColumn>1&&n.push(new Ve(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),s=t.getSelections(),r=t._getViewModel(),o=r.getCursorStates();let a=[];s.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),G0(o,r.getCursorStates())}}class cBe extends _i{constructor(){super({id:"editor.action.addCursorsToBottom",label:_("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),s=t.getModel().getLineCount();let r=[];for(let l=n[0].startLineNumber;l<=s;l++)r.push(new Ve(l,n[0].startColumn,l,n[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();r.length>0&&t.setSelections(r),G0(a,o.getCursorStates())}}class hBe extends _i{constructor(){super({id:"editor.action.addCursorsToTop",label:_("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let s=[];for(let a=n[0].startLineNumber;a>=1;a--)s.push(new Ve(a,n[0].startColumn,a,n[0].endColumn));const r=t._getViewModel(),o=r.getCursorStates();s.length>0&&t.setSelections(s),G0(o,r.getCursorStates())}}class _C{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class I1{constructor(e,t,n,s,r,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=s,this.wholeWord=r,this.matchCase=o,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new I1(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let s=!1,r,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,r=!0,o=!0):(r=n.wholeWord,o=n.matchCase);const l=e.getSelection();let c,h=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,h=new Ve(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new I1(e,t,s,c,r,o,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new _C(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new _C(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ve(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new _C(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new _C(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1);return n?new Ve(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(115):null,!1,1073741824)):[]}}class $f extends te{constructor(e){super(),this._sessionDispose=this._register(new de),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution($f.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=I1.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new Ve(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!Fee(this._editor.getModel(),t,s)){const o=this._editor.getModel();let a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(115):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const s=n.searchScope;let r=[];t.forEach(o=>{s.forEach(a=>{o.range.endLineNumber<=a.endLineNumber&&o.range.startLineNumber>=a.startLineNumber&&r.push(o)})}),t=r}if(t.length>0){const s=this._editor.getSelection();for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.range.intersectRanges(s)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new Ve(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}}$f.ID="editor.contrib.multiCursorController";class K0 extends _i{run(e,t){const n=$f.get(t);if(!n)return;const s=Lr.get(t);if(!s)return;const r=t._getViewModel();if(r){const o=r.getCursorStates();this._run(n,s),G0(o,r.getCursorStates())}}}class uBe extends K0{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:_("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:2082,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class dBe extends K0{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:_("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class fBe extends K0{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:_("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:Rs(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class gBe extends K0{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:_("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class pBe extends K0{constructor(){super({id:"editor.action.selectHighlights",label:_("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:3114,weight:100},menuOpts:{menuId:Ue.MenubarSelectionMenu,group:"3_multi",title:_({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class mBe extends K0{constructor(){super({id:"editor.action.changeAll",label:_("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:xe.and(G.writable,G.editorTextFocus),kbOpts:{kbExpr:G.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class jz{constructor(e,t,n,s){this.searchText=e,this.matchCase=t,this.wordSeparators=n,this.modelVersionId=s}static softEquals(e,t){return!e&&!t?!0:!e||!t?!1:e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId}}class Vc extends te{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new mi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Lr.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Vc._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e||!t.hasModel())return null;const n=t.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=$f.get(t);if(!s)return null;const r=Lr.get(t);if(!r)return null;let o=s.getSession(r);if(!o){const c=t.getSelections();if(c.length>1){const u=r.getState().matchCase;if(!Fee(t.getModel(),c,u))return null}o=I1.create(t,r)}if(!o||o.currentMatch||/^[ \t]+$/.test(o.searchText)||o.searchText.length>200)return null;const a=r.getState(),l=a.matchCase;if(a.isRevealed){let c=a.searchString;l||(c=c.toLowerCase());let h=o.searchText;if(l||(h=h.toLowerCase()),c===h&&o.matchCase===a.matchCase&&o.wholeWord===a.wholeWord&&!a.isRegex)return null}return new jz(o.searchText,o.matchCase,o.wholeWord?t.getOption(115):null,t.getModel().getVersionId())}_setState(e){if(jz.softEquals(this.state,e)){this.state=e;return}if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=$x.has(t)&&this.editor.getOption(71);let s=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map(l=>l.range);s.sort(F.compareRangesUsingStarts);let r=this.editor.getSelections();r.sort(F.compareRangesUsingStarts);let o=[];for(let l=0,c=0,h=s.length,u=r.length;l<h;){const d=s[l];if(c>=u)o.push(d),l++;else{const f=F.compareRangesUsingStarts(d,r[c]);f<0?((r[c].isEmpty()||!F.areIntersecting(d,r[c]))&&o.push(d),l++):(f>0||l++,c++)}}const a=o.map(l=>({range:l,options:n?Vc._SELECTION_HIGHLIGHT:Vc._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Vc.ID="editor.contrib.selectionHighlighter";Vc._SELECTION_HIGHLIGHT_OVERVIEW=ct.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:pr(QEe),position:Dl.Inline},overviewRuler:{color:pr(YEe),position:Ml.Center}});Vc._SELECTION_HIGHLIGHT=ct.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function Fee(i,e,t){const n=qz(i,e[0],!t);for(let s=1,r=e.length;s<r;s++){const o=e[s];if(o.isEmpty())return!1;const a=qz(i,o,!t);if(n!==a)return!1}return!0}function qz(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}Bs($f.ID,$f);Bs(Vc.ID,Vc);ot(oBe);ot(aBe);ot(lBe);ot(uBe);ot(dBe);ot(fBe);ot(gBe);ot(pBe);ot(mBe);ot(cBe);ot(hBe);const _Be=V("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},_("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class bBe extends _i{constructor(){super({id:"editor.action.jumpToBracket",label:_("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=_a.get(t);n&&n.jumpToBracket()}}class vBe extends _i{constructor(){super({id:"editor.action.selectToBracket",label:_("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const s=_a.get(t);if(!s)return;let r=!0;n&&n.selectBrackets===!1&&(r=!1),s.selectToBracket(r)}}class wBe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class _a extends te{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new mi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(_a.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const s=n.getStartPosition(),r=e.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.findEnclosingBrackets(s);if(a)o=a[0].getStartPosition();else{const l=e.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new Ve(o.lineNumber,o.column,o.lineNumber,o.column):new Ve(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.matchBracket(r);if(!o&&(o=t.findEnclosingBrackets(r),!o)){const c=t.findNextBracket(r);c&&c.range&&(o=t.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(F.compareRangesUsingStarts);const[c,h]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&n.push(new Ve(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let s=n.brackets;s&&(e[t++]={range:s[0],options:n.options},e[t++]={range:s[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let s=[];this._lastVersionId===n&&(s=this._lastBracketsData);let r=[],o=0;for(let u=0,d=e.length;u<d;u++){let f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(q.compare);let a=[],l=0,c=0,h=s.length;for(let u=0,d=r.length;u<d;u++){let f=r[u];for(;c<h&&s[c].position.isBefore(f);)c++;if(c<h&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.matchBracket(f),p=_a._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.findEnclosingBrackets(f,20),p=_a._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new wBe(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=n}}_a.ID="editor.contrib.bracketMatchingController";_a._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=ct.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:pr(_Be),position:Ml.Center}});_a._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=ct.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Bs(_a.ID,_a);ot(vBe);ot(bBe);ti((i,e)=>{const t=i.getColor(bIe);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(vIe);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});ga.appendMenuItem(Ue.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:_({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});function _3(i,e){return!!i[e]}class wI{constructor(e,t){this.target=e.target,this.hasTriggerModifier=_3(e.event,t.triggerModifier),this.hasSideBySideModifier=_3(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Gz{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=_3(e,t.triggerModifier)}}class bC{constructor(e,t,n,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Kz(i){return i==="altKey"?ut?new bC(57,"metaKey",6,"altKey"):new bC(5,"ctrlKey",6,"altKey"):ut?new bC(6,"altKey",57,"metaKey"):new bC(6,"altKey",5,"ctrlKey")}class yBe extends te{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new z),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new z),this.onExecute=this._onExecute.event,this._onCancel=this._register(new z),this.onCancel=this._onCancel.event,this._editor=e,this._opts=Kz(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=Kz(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new wI(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new wI(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new wI(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new Gz(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new Gz(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var CBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ld=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let jf=class extends d1{constructor(e,t,n,s,r,o,a,l,c,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},s,r,o,a,l,c,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(u=>this._onParentConfigurationChanged(u)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Oa(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};jf=CBe([ld(3,zt),ld(4,si),ld(5,yn),ld(6,$e),ld(7,oi),ld(8,zn),ld(9,sr)],jf);const Zz=new Z(new tt(0,122,204)),SBe={showArrow:!0,showFrame:!0,className:"",frameColor:Zz,arrowColor:Zz,keepEditorSelection:!1},xBe="vs.editor.contrib.zoneWidget";class DBe{constructor(e,t,n,s,r,o){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=s,this._onDomNodeTop=r,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class kBe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class g2{constructor(e){this._editor=e,this._ruleName=g2._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),Fx(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Fx(this._ruleName),kM(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:F.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}g2._IdGenerator=new aF(".arrow-decoration-");class LBe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new de,this.container=null,this._isShowing=!1,this.editor=e,this.options=Rh(t),Oa(this.options,SBe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const s=this._getWidth(n);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new g2(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=F.isIRange(e)?F.lift(e):F.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:ct.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),s=this.editor.getLayoutInfo(),r=this._getWidth(s);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let c=0,h=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(n)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new DBe(o,n.lineNumber,n.column,t,g=>this._onViewZoneTop(g),g=>this._onViewZoneHeight(g)),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new kBe(xBe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const f=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}let u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,r),this.options.keepEditorSelection||this.editor.setSelection(e);const d=this.editor.getModel();if(d){const f=e.endLineNumber+1;f<=d.getLineCount()?this.revealLine(f,!1):this.revealLine(d.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Mn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),s=n<0?Math.ceil(n):Math.floor(n),r=e.heightInLines+s;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class ABe extends Fm{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new z),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=se(e,ue(".monaco-dropdown")),this._label=se(this._element,ue(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[Ae.CLICK,Ae.MOUSE_DOWN,jt.Tap])this._register(ne(this.element,r,o=>It.stop(o,!0)));for(const r of[Ae.MOUSE_DOWN,jt.Tap])this._register(ne(this._label,r,o=>{o instanceof MouseEvent&&o.detail>1||(this.visible?this.hide():this.show())}));this._register(ne(this._label,Ae.KEY_UP,r=>{const o=new ui(r);(o.equals(3)||o.equals(10))&&(It.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(At.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class EBe extends ABe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Bee extends lf{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new z),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=se(r,ue("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new EBe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)===null||o===void 0||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var vF=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sl=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Vee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function IBe(i,e,t,n,s,r,o){const a=i.getActions(e);return NBe(a,t,!1,typeof n=="string"?c=>c===n:n,s,r,o),TBe(a)}function TBe(i){const e=new de;for(const[,t]of i)for(const n of t)e.add(n);return e}function NBe(i,e,t,n=a=>a==="navigation",s=Number.MAX_SAFE_INTEGER,r=()=>!1,o=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const c=new Set;for(const[h,u]of i){let d;n(h)?(d=a,d.length>0&&o&&d.push(new da)):(d=l,d.length>0&&d.push(new da));for(let f of u){t&&(f=f instanceof xu&&f.alt?f.alt:f);const g=d.push(f);f instanceof eP&&c.add({group:h,action:f,index:g-1})}}for(const{group:h,action:u,index:d}of c){const f=n(h)?a:l,g=u.actions;(g.length<=1||f.length+g.length-2<=s)&&r(u,h,f.length)&&f.splice(d,1,...g)}if(a!==l&&a.length>s){const h=a.splice(s,a.length-s);l.unshift(...h,new da)}}let e0=class extends PP{constructor(e,t,n,s,r){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Er),this._altKey=Pd.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return Vee(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(Fn||Is)&&this._altKey.keyStatus.shiftKey;const s=()=>{const r=t&&n;r!==this._wantsAltCommand&&(this._wantsAltCommand=r,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(r=>{n=r.altKey||(Fn||Is)&&r.shiftKey,s()})),this._register(ne(e,"mouseleave",r=>{t=!1,s()})),this._register(ne(e,"mouseenter",r=>{t=!0,s()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?_("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?_("titleAndKb","{0} ({1})",r,a):r;s+=`
[${X5.modifierLabels[bo].altKey}] ${l}`}this.label.title=s}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:s}=this;if(!n||!s)return;const r=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(r)if(ci.isThemeIcon(r)){const o=ci.asClassNameArray(r);s.classList.add(...o),this._itemClassDispose.value=pt(()=>{s.classList.remove(...o)})}else r.light&&s.style.setProperty("--menu-entry-icon-light",Gc(r.light)),r.dark&&s.style.setProperty("--menu-entry-icon-dark",Gc(r.dark)),s.classList.add("icon"),this._itemClassDispose.value=pt(()=>{s.classList.remove("icon"),s.style.removeProperty("--menu-entry-icon-light"),s.style.removeProperty("--menu-entry-icon-dark")})}};e0=vF([sl(2,zi),sl(3,zn),sl(4,$e)],e0);let b3=class extends Bee{constructor(e,t,n){var s,r;const o=Object.assign({},t??Object.create(null),{menuAsChild:(s=t==null?void 0:t.menuAsChild)!==null&&s!==void 0?s:!1,classNames:(r=t==null?void 0:t.classNames)!==null&&r!==void 0?r:ci.isThemeIcon(e.item.icon)?ci.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,o)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!ci.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",Gc(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",Gc(t.dark)))}}};b3=vF([sl(2,mg)],b3);let v3=class extends lf{constructor(e,t,n,s,r,o,a,l){var c,h,u;super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let d,f=l.get(this._storageKey,1);f&&(d=e.actions.find(p=>f===p.id)),d||(d=e.actions[0]),this._defaultAction=this._instaService.createInstance(e0,d,void 0);const g=Object.assign({},t??Object.create(null),{menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(u=t==null?void 0:t.actionRunner)!==null&&u!==void 0?u:new Fm});this._dropdown=new Bee(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun(p=>{p.action instanceof xu&&this.update(p.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(e0,e,void 0),this._defaultAction.actionRunner=new class extends Fm{runAction(t,n){return Vee(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(sxe(this._container,ue(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ue(".action-container");this._defaultAction.render(se(this._container,t)),this._register(ne(t,Ae.KEY_DOWN,s=>{const r=new ui(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=ue(".dropdown-action-container");this._dropdown.render(se(this._container,n)),this._register(ne(n,Ae.KEY_DOWN,s=>{var r;const o=new ui(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)===null||r===void 0||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};v3=vF([sl(2,zi),sl(3,zn),sl(4,mg),sl(5,O0),sl(6,zt),sl(7,yg)],v3);function MBe(i,e,t){return e instanceof xu?i.createInstance(e0,e,void 0):e instanceof $Q?e.item.rememberDefaultAction?i.createInstance(v3,e,t):i.createInstance(b3,e,t):void 0}var Wee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Hee=bt("IPeekViewService");cg(Hee,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const s=this._widgets.get(i);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var er;(function(i){i.inPeekEditor=new De("inReferenceSearchEditor",!0,_("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(er||(er={}));let T1=class{constructor(e,t){e instanceof jf&&er.inPeekEditor.bindTo(t)}dispose(){}};T1.ID="editor.contrib.referenceController";T1=Wee([zee(1,$e)],T1);Bs(T1.ID,T1);function RBe(i){let e=i.get(si).getFocusedCodeEditor();return e instanceof jf?e.getParentEditor():e}const OBe={headerBackgroundColor:Z.white,primaryHeadingColor:Z.fromHex("#333333"),secondaryHeadingColor:Z.fromHex("#6c6c6cb3")};let YD=class extends LBe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new z,this.onDidClose=this._onDidClose.event,Oa(this.options,OBe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ue(".head"),this._bodyElement=ue(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=ue(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),tn(n,"click",o=>this._onTitleClick(o))),se(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=ue("span.filename"),this._secondaryHeading=ue("span.dirname"),this._metaHeading=ue("span.meta"),se(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const s=ue(".peekview-actions");se(this._headElement,s);const r=this._getActionBarOptions();this._actionbarWidget=new Zc(s,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Mo("peekview.close",_("label.close","Close"),be.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:MBe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Pn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,gr(this._metaHeading)):xs(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),s=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};YD=Wee([zee(2,zt)],YD);const PBe=V("peekViewTitle.background",{dark:qt(pa,.1),light:qt(pa,.1),hc:null},_("peekViewTitleBackground","Background color of the peek view title area.")),Uee=V("peekViewTitleLabel.foreground",{dark:Z.white,light:Z.black,hc:Z.white},_("peekViewTitleForeground","Color of the peek view title.")),$ee=V("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},_("peekViewTitleInfoForeground","Color of the peek view title info.")),FBe=V("peekView.border",{dark:pa,light:pa,hc:Vi},_("peekViewBorder","Color of the peek view borders and arrow.")),jee=V("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:Z.black},_("peekViewResultsBackground","Background color of the peek view result list.")),BBe=V("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:Z.white},_("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),VBe=V("peekViewResult.fileForeground",{dark:Z.white,light:"#1E1E1E",hc:Z.white},_("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),WBe=V("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},_("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),zBe=V("peekViewResult.selectionForeground",{dark:Z.white,light:"#6C6C6C",hc:Z.white},_("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),ES=V("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:Z.black},_("peekViewEditorBackground","Background color of the peek view editor.")),HBe=V("peekViewEditorGutter.background",{dark:ES,light:ES,hc:ES},_("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),UBe=V("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},_("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),$Be=V("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},_("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),jBe=V("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:Ns},_("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var qBe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Nu{constructor(e,t,n,s){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=s,this.id=tee.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?_({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",Sa(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):_("aria.oneReference","symbol in {0} on line {1} at column {2}",Sa(this.uri),this.range.startLineNumber,this.range.startColumn)}}class GBe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:s,startColumn:r,endLineNumber:o,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:s,column:r-t}),c=new F(s,l.startColumn,s,r),h=new F(o,a,o,1073741824),u=n.getValueInRange(c).replace(/^\s+/,""),d=n.getValueInRange(e),f=n.getValueInRange(h).replace(/\s+$/,"");return{value:u+d+f,highlight:{start:u.length,end:u.length+d.length}}}}class N1{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new as}dispose(){lt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?_("aria.fileReferences.1","1 symbol in {0}, full path {1}",Sa(this.uri),this.uri.fsPath):_("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Sa(this.uri),this.uri.fsPath)}resolve(e){return qBe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new GBe(n))}catch(n){Ze(n)}return this})}}class Js{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new z,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Js._compareReferences);let s;for(let r of e)if((!s||!Ts.isEqual(s.uri,r.uri,!0))&&(s=new N1(this,r.uri),this.groups.push(s)),s.children.length===0||Js._compareReferences(r,s.children[s.children.length-1])!==0){const o=new Nu(n===r,s,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),s.children.push(o)}}dispose(){lt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Js(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?_("aria.result.0","No results found"):this.references.length===1?_("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?_("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):_("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,s=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return o===1||t&&s+1<r||!t&&s>0?(t?s=(s+1)%r:s=(s+r-1)%r,n.children[s]):(s=n.parent.groups.indexOf(n),t?(s=(s+1)%o,n.parent.groups[s].children[0]):(s=(s+o-1)%o,n.parent.groups[s].children[n.parent.groups[s].children.length-1]))}nearestReference(e,t){const n=this.references.map((s,r)=>({idx:r,prefixLen:Wv(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,r)=>s.prefixLen>r.prefixLen?-1:s.prefixLen<r.prefixLen?1:s.offsetDist<r.offsetDist?-1:s.offsetDist>r.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&F.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ts.compare(e.uri,t.uri)||F.compareRangesUsingStarts(e.range,t.range)}}function qee(i){if(!i)return;typeof i=="string"&&(i=We.file(i));const e=Sa(i)||(i.scheme===nt.file?i.fsPath:i.path);return Fn&&Fxe(e)?w3(e):e}function w3(i){return PY(i)?i.charAt(0).toUpperCase()+i.slice(1):i}var p2=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},M1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let y3=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Js||e instanceof N1}getChildren(e){if(e instanceof Js)return e.groups;if(e instanceof N1)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};y3=p2([M1(0,Rl)],y3);class KBe{getHeight(){return 23}getTemplateId(e){return e instanceof N1?R1.id:Yw.id}}let C3=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Nu){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return Sa(e.uri)}};C3=p2([M1(0,zi)],C3);class ZBe{getId(e){return e instanceof Nu?e.id:e.uri}}let S3=class extends te{constructor(e,t,n){super(),this._uriLabel=t;const s=document.createElement("div");s.classList.add("reference-file"),this.file=this._register(new cF(s,{supportHighlights:!0})),this.badge=new e3(se(s,ue(".count"))),this._register(D3e(this.badge,n)),e.appendChild(s)}set(e,t){let n=I5(e.uri);this.file.setLabel(qee(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(_("referencesCount","{0} references",s)):this.badge.setTitleFormat(_("referenceCount","{0} reference",s))}};S3=p2([M1(1,Hw),M1(2,oi)],S3);let R1=class Gee{constructor(e){this._instantiationService=e,this.templateId=Gee.id}renderTemplate(e){return this._instantiationService.createInstance(S3,e)}renderElement(e,t,n){n.set(e.element,$P(e.filterData))}disposeTemplate(e){e.dispose()}};R1.id="FileReferencesRenderer";R1=p2([M1(0,zt)],R1);class YBe{constructor(e){this.label=new Iu(e,!1)}set(e,t){var n;const s=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!s||!s.value)this.label.set(`${Sa(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:r,highlight:o}=s;t&&!ma.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,$P(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}}}class Yw{constructor(){this.templateId=Yw.id}renderTemplate(e){return new YBe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}Yw.id="OneReferenceRenderer";class QBe{getWidgetAriaLabel(){return _("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var XBe=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oc=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Yz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class m2{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new de,this._callOnModelChange=new de,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let r=0,o=e.children.length;r<o;r++){let a=e.children[r];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:m2.DecorationOptions}),n.push(r))}const s=this._editor.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[n[r]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,s]of this._decorations){const r=t.getDecorationRange(n);if(!r)continue;let o=!1;if(!F.equalsRange(r,s.range)){if(F.spansMultipleLines(r))o=!0;else{const a=s.range.endColumn-s.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(s.id),e.push(n)):s.range=r}}for(let n=0,s=e.length;n<s;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}m2.DecorationOptions=ct.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class JBe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const s=JSON.parse(e);t=s.ratio,n=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class e6e extends K4{}let x3=class extends YD{constructor(e,t,n,s,r,o,a,l,c,h,u,d){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=r,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=h,this._modeService=u,this._languageConfigurationService=d,this._disposeOnNewModel=new de,this._callOnDispose=new de,this._onDidSelectReference=new z,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Wt(0,0),this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),lt(this._preview),lt(this._previewNotAvailableMessage),lt(this._tree),lt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(FBe)||Z.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(PBe)||Z.transparent,primaryHeadingColor:e.getColor(Uee),secondaryHeadingColor:e.getColor($ee)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=se(e,ue("div.messages")),xs(this._messageContainer),this._splitView=new WJ(e,{orientation:1}),this._previewContainer=se(e,ue("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(jf,this._previewContainer,t,this.editor),xs(this._previewContainer),this._previewNotAvailableMessage=new Zr(_("missingPreviewMessage","no preview available"),Zr.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=se(e,ue("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new QBe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(C3),identityProvider:new ZBe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:jee}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(tn(this._treeContainer,"keydown",r=>{r.equals(9)&&(this._keybindingService.dispatchEvent(r,r.target),r.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(e6e,"ReferencesWidget",this._treeContainer,new KBe,[this._instantiationService.createInstance(R1),this._instantiationService.createInstance(Yw)],this._instantiationService.createInstance(y3),n),this._splitView.addView({onDidChange:Le.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:r=>{this._preview.layout({height:this._dim.height,width:r})}},HD.Distribute),this._splitView.addView({onDidChange:Le.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:r=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${r}px`,this._tree.layout(this._dim.height,r)}},HD.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let s=(r,o)=>{r instanceof Nu&&(o==="show"&&this._revealReference(r,!1),this._onDidSelectReference.fire({element:r,kind:o,source:"tree"}))};this._tree.onDidOpen(r=>{r.sideBySide?s(r.element,"side"):r.editorOptions.pinned?s(r.element,"goto"):s(r.element,"show")}),xs(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Wt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=_("noResults","No results"),gr(this._messageContainer),Promise.resolve(void 0)):(xs(this._messageContainer),this._decorationsManager=new m2(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),gr(this._treeContainer),gr(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Nu)return e;if(e instanceof N1&&e.children.length>0)return e.children[0]}revealReference(e){return Yz(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return Yz(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==nt.inMemory?this.setTitle(BY(e.uri),this._uriLabel.getUriLabel(I5(e.uri))):this.setTitle(_("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const s=yield n;if(!this._model){s.dispose();return}lt(this._previewModelReference);const r=s.object;if(r){const o=this._preview.getModel()===r.textEditorModel?0:1,a=F.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(r.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()})}};x3=XBe([oc(3,oi),oc(4,Rl),oc(5,zt),oc(6,Hee),oc(7,Hw),oc(8,Bw),oc(9,zi),oc(10,Fs),oc(11,Ow)],x3);ti((i,e)=>{const t=i.getColor(UBe);t&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${t}; }`);const n=i.getColor($Be);n&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const s=i.getColor(jBe);s&&e.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${s}; box-sizing: border-box; }`);const r=i.getColor(Ns);r&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const o=i.getColor(jee);o&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${o}; }`);const a=i.getColor(BBe);a&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=i.getColor(VBe);l&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const c=i.getColor(WBe);c&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);const h=i.getColor(zBe);h&&e.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${h} !important; }`);const u=i.getColor(ES);u&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {	background-color: ${u};}`);const d=i.getColor(HBe);d&&e.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {	background-color: ${d};}`)});var t6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Qz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const Sg=new De("referenceSearchVisible",!1,_("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let t0=class D3{constructor(e,t,n,s,r,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=r,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new de,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Sg.bindTo(n)}static get(e){return e.getContribution(D3.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const r="peekViewLayout",o=JBe.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(x3,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(_("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:c,kind:h}=l;if(c)switch(h){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(_("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,u=new q(e.startLineNumber,e.startColumn),d=this._model.nearestReference(h,u);if(d)return this._widget.setSelection(d).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return Qz(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const s=this._model.nextOrPreviousReference(n,e),r=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(s),yield this._gotoReference(s),r?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()})}revealReference(e){return Qz(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=F.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var s;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const r=D3.get(n),o=this._model.clone();this.closeWidget(),n.focus(),r.toggleWidget(t,Ir(a=>Promise.resolve(o)),(s=this._peekMode)!==null&&s!==void 0?s:!1)}},n=>{this._ignoreModelChangeEvent=!1,Ze(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:s,range:r}=e;this._editorService.openCodeEditor({resource:s,options:{selection:r,pinned:n}},this._editor,t)}};t0.ID="editor.contrib.referencesController";t0=t6e([Xg(2,$e),Xg(3,si),Xg(4,zn),Xg(5,zt),Xg(6,yg),Xg(7,Wi)],t0);function xg(i,e){const t=RBe(i);if(!t)return;let n=t0.get(t);n&&e(n)}gs.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Rs(2089,60),when:xe.or(Sg,er.inPeekEditor),handler(i){xg(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});gs.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:xe.or(Sg,er.inPeekEditor),handler(i){xg(i,e=>{e.goToNextOrPreviousReference(!0)})}});gs.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:xe.or(Sg,er.inPeekEditor),handler(i){xg(i,e=>{e.goToNextOrPreviousReference(!1)})}});Nt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Nt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Nt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Nt.registerCommand("closeReferenceSearch",i=>xg(i,e=>e.closeWidget()));gs.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:xe.and(er.inPeekEditor,xe.not("config.editor.stablePeek"))});gs.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:xe.and(Sg,xe.not("config.editor.stablePeek"))});gs.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:xe.and(Sg,KJ),handler(i){var e;const n=(e=i.get(eo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Nu&&xg(i,s=>s.revealReference(n[0]))}});gs.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:xe.and(Sg,KJ),handler(i){var e;const n=(e=i.get(eo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Nu&&xg(i,s=>s.openReference(n[0],!0,!0))}});Nt.registerCommand("openReference",i=>{var e;const n=(e=i.get(eo).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Nu&&xg(i,s=>s.openReference(n[0],!1,!0))});var Kee=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Q_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const wF=new De("hasSymbols",!1,_("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),_2=bt("ISymbolNavigationService");let k3=class{constructor(e,t,n,s){this._editorService=t,this._notificationService=n,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=wF.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new L3(this._editorService),s=n.onDidChange(r=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,h=!1;for(const u of t.references)if(FY(u.uri,a.uri))c=!0,h=h||F.containsPosition(u.range,l);else if(c)break;(!c||!h)&&this.reset()});this._currentState=Xh(n,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:F.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?_("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):_("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};k3=Kee([Q_(0,$e),Q_(1,si),Q_(2,zn),Q_(3,zi)],k3);cg(_2,k3,!0);pe(new class extends Qr{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:wF,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(_2).revealNext(e)}});gs.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:wF,primary:9,handler(i){i.get(_2).reset()}});let L3=class{constructor(e){this._listener=new Map,this._disposables=new de,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),lt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Xh(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};L3=Kee([Q_(0,si)],L3);var i6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},n6e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Po=class A3{constructor(e,t){this._messageWidget=new Er,this._messageListeners=new de,this._editor=e,this._visible=A3.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(A3.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){dg(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new Xz(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Os(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(n?n.containsPosition(s.target.position)||this.closeMessage():n=new F(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Xz.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(_("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Po.ID="editor.contrib.messageController";Po.MESSAGE_VISIBLE=new De("messageVisible",!1,_("messageVisible","Whether the editor is currently showing an inline message"));Po=i6e([n6e(1,$e)],Po);const s6e=Qr.bindToContribution(Po.get);pe(new s6e({id:"leaveEditorMessage",precondition:Po.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let Xz=class{constructor(e,{lineNumber:t,column:n},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");o.classList.add("message"),o.textContent=s,this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Bs(Po.ID,Po);ti((i,e)=>{const t=i.getColor(_P);if(t){let r=i.type===fa.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${t}; }`),e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${r}px solid ${t}; }`)}const n=i.getColor(pP);n&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${n}; }`);const s=i.getColor(mP);s&&e.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${s}; }`)});var Zee=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function Qw(i,e,t,n){const r=t.ordered(i).map(o=>Promise.resolve(n(o,i,e)).then(void 0,a=>{Wo(a)}));return Promise.all(r).then(o=>{const a=[];for(let l of o)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}function yF(i,e,t){return Qw(i,e,Uv,(n,s,r)=>n.provideDefinition(s,r,t))}function Yee(i,e,t){return Qw(i,e,jx,(n,s,r)=>n.provideDeclaration(s,r,t))}function Qee(i,e,t){return Qw(i,e,qx,(n,s,r)=>n.provideImplementation(s,r,t))}function Xee(i,e,t){return Qw(i,e,Gx,(n,s,r)=>n.provideTypeDefinition(s,r,t))}function b2(i,e,t,n){return Qw(i,e,Ux,(s,r,o)=>Zee(this,void 0,void 0,function*(){const a=yield s.provideReferences(r,o,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const l=yield s.provideReferences(r,o,{includeDeclaration:!1},n);return l&&l.length===1?l:a}))}function Xw(i){return Zee(this,void 0,void 0,function*(){const e=yield i(),t=new Js(e,""),n=t.references.map(s=>s.link);return t.dispose(),n})}F0("_executeDefinitionProvider",(i,e)=>Xw(()=>yF(i,e,ei.None)));F0("_executeDeclarationProvider",(i,e)=>Xw(()=>Yee(i,e,ei.None)));F0("_executeImplementationProvider",(i,e)=>Xw(()=>Qee(i,e,ei.None)));F0("_executeTypeDefinitionProvider",(i,e)=>Xw(()=>Xee(i,e,ei.None)));F0("_executeReferenceProvider",(i,e)=>Xw(()=>b2(i,e,!1,ei.None)));var Oo=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},yI,CI,SI,xI,DI,kI,LI,AI;ga.appendMenuItem(Ue.EditorContext,{submenu:Ue.EditorContextPeek,title:_("peek.submenu","Peek"),group:"navigation",order:100});const Jee=new Set;function Ba(i){const e=new i;return ZQ(e),Jee.add(e.id),e}class Z0 extends _i{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(zn),s=e.get(si),r=e.get(U0),o=e.get(_2),a=t.getModel(),l=t.getPosition(),c=new TMe(t,5),h=_Y(this._getLocationModel(a,l,c.token),c.token).then(u=>Oo(this,void 0,void 0,function*(){if(!u||c.token.isCancellationRequested)return;dg(u.ariaMessage);let d;if(u.referenceAt(a.uri,l)){const g=this._getAlternativeCommand(t);g!==this.id&&Jee.has(g)&&(d=t.getAction(g))}const f=u.references.length;if(f===0){if(!this._configuration.muteMessage){const g=a.getWordAtPosition(l);Po.get(t).showMessage(this._getNoResultFoundMessage(g),l)}}else if(f===1&&d)d.run();else return this._onResult(s,o,t,u)}),u=>{n.error(u)}).finally(()=>{c.dispose()});return r.showWhile(h,250),h}_onResult(e,t,n,s){return Oo(this,void 0,void 0,function*(){const r=this._getGoToPreference(n);if(!(n instanceof jf)&&(this._configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(n,s);else{const o=s.firstReference(),a=s.references.length>1&&r==="gotoAndPeek",l=yield this._openReference(n,e,o,this._configuration.openToSide,!a);a&&l?this._openInPeek(l,s):s.dispose(),r==="goto"&&t.put(o)}})}_openReference(e,t,n,s,r){return Oo(this,void 0,void 0,function*(){let o;if(DDe(n)&&(o=n.targetSelectionRange),o||(o=n.range),!o)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:F.collapseToStart(o),selectionRevealType:3}},e,s);if(a){if(r){const l=a.getModel(),c=a.deltaDecorations([],[{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(c,[])},350)}return a}})}_openInPeek(e,t){let n=t0.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),Ir(s=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class v2 extends Z0{_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield yF(e,t,n),_("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?_("noResultWord","No definition found for '{0}'",e.word):_("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const ete=Ew&&!mY?2118:70;Ba((yI=class E3 extends v2{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:E3.id,label:_("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:xe.and(G.hasDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:ete,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Nt.registerCommandAlias("editor.action.goToDeclaration",E3.id)}},yI.id="editor.action.revealDefinition",yI));Ba((CI=class I3 extends v2{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:I3.id,label:_("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:xe.and(G.hasDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,ete),weight:100}}),Nt.registerCommandAlias("editor.action.openDeclarationToTheSide",I3.id)}},CI.id="editor.action.revealDefinitionAside",CI));Ba((SI=class T3 extends v2{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:T3.id,label:_("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:xe.and(G.hasDefinitionProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:2}}),Nt.registerCommandAlias("editor.action.previewDeclaration",T3.id)}},SI.id="editor.action.peekDefinition",SI));class tte extends Z0{_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield Yee(e,t,n),_("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}Ba((xI=class ite extends tte{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ite.id,label:_("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:xe.and(G.hasDeclarationProvider,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?_("decl.noResultWord","No declaration found for '{0}'",e.word):_("decl.generic.noResults","No declaration found")}},xI.id="editor.action.revealDeclaration",xI));Ba(class extends tte{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:_("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:xe.and(G.hasDeclarationProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:3}})}});class nte extends Z0{_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield Xee(e,t,n),_("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?_("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):_("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}Ba((DI=class ste extends nte{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ste.ID,label:_("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:xe.and(G.hasTypeDefinitionProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},DI.ID="editor.action.goToTypeDefinition",DI));Ba((kI=class rte extends nte{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:rte.ID,label:_("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:xe.and(G.hasTypeDefinitionProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:4}})}},kI.ID="editor.action.peekTypeDefinition",kI));class ote extends Z0{_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield Qee(e,t,n),_("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?_("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):_("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}Ba((LI=class ate extends ote{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ate.ID,label:_("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:xe.and(G.hasImplementationProvider,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},LI.ID="editor.action.goToImplementation",LI));Ba((AI=class lte extends ote{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:lte.ID,label:_("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:xe.and(G.hasImplementationProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:5}})}},AI.ID="editor.action.peekImplementation",AI));class cte extends Z0{_getNoResultFoundMessage(e){return e?_("references.no","No references found for '{0}'",e.word):_("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}Ba(class extends cte{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:_("goToReferences.label","Go to References"),alias:"Go to References",precondition:xe.and(G.hasReferenceProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:G.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield b2(e,t,!0,n),_("ref.title","References"))})}});Ba(class extends cte{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:_("references.action.label","Peek References"),alias:"Peek References",precondition:xe.and(G.hasReferenceProvider,er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Ue.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(yield b2(e,t,!1,n),_("ref.title","References"))})}});class r6e extends Z0{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:_("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:xe.and(er.notInPeekEditor,G.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return Oo(this,void 0,void 0,function*(){return new Js(this._references,_("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&_("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Nt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,s,r,o)=>Oo(void 0,void 0,void 0,function*(){Pi(We.isUri(e)),Pi(q.isIPosition(t)),Pi(Array.isArray(n)),Pi(typeof s>"u"||typeof s=="string"),Pi(typeof o>"u"||typeof o=="boolean");const a=i.get(si),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(q5(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const h=new class extends r6e{_getNoResultFoundMessage(u){return r||super._getNoResultFoundMessage(u)}}({muteMessage:!r,openInPeek:!!o,openToSide:!1},n,s);c.get(zt).invokeFunction(h.run.bind(h),l)})})});Nt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:q.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,s)=>Oo(void 0,void 0,void 0,function*(){i.get(yn).executeCommand("editor.action.goToLocations",e,t,n,s,void 0,!0)})});Nt.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{Pi(We.isUri(e)),Pi(q.isIPosition(t));const n=i.get(si);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(s=>{if(!q5(s)||!s.hasModel())return;const r=t0.get(s);if(!r)return;const o=Ir(l=>b2(s.getModel(),q.lift(t),!1,l).then(c=>new Js(c,_("ref.title","References")))),a=new F(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(a,o,!1))})}});Nt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");ga.appendMenuItems([{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:_({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:_({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:_({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:_({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Ue.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:_({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var o6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Jz=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let qf=class X_{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new de,this.toUnhookForKeyboard=new de,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let s=new yBe(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,o])=>{this.startFindDefinitionFromMouse(r,Fd(o))})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},o=>{this.removeLinkDecorations(),Ze(o)})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(X_.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let s=new IMe(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Ir(r=>this.findDefinition(e,r)),this.previousPromise.then(r=>{if(!r||!r.length||!s.validate(this.editor)){this.removeLinkDecorations();return}if(r.length>1)this.addDecoration(new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Zm().appendText(_("multipleResults","Click to show {0} definitions.",r.length)));else{let o=r[0];if(!o.uri)return;this.textModelResolverService.createModelReference(o.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:c}=o.range;if(c<1||c>l.getLineCount()){a.dispose();return}const h=this.getPreviewValue(l,c,o);let u;o.originSelectionRange?u=F.lift(o.originSelectionRange):u=new F(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const d=this.modeService.getModeIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new Zm().appendCodeblock(d||"",h)),a.dispose()})}}).then(void 0,Ze)}getPreviewValue(e,t,n){let s=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return s.endLineNumber-s.startLineNumber>=X_.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,n){let r=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);r=Math.min(r,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${r-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+X_.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<s;r++){let o=e.getLineFirstNonWhitespaceColumn(r);if(n===o)break}return new F(t,1,r+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+X_.MAX_SOURCE_PREVIEW_LINES),s=[];let r=!0,o=e.findNextBracket(new q(t,1));for(;o!==null;){if(s.length===0)s.push(o);else{const h=s[s.length-1];if(h.open[0]===o.open[0]&&h.isOpen&&!o.isOpen?s.pop():s.push(o),s.length===0)if(r)r=!1;else return new F(t,1,o.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=o.range.endLineNumber,c=o.range.endColumn;if(a===o.range.endColumn&&(l++,c=1),l>n)return new F(t,1,n+1,1);o=e.findNextBracket(new q(l,c))}return new F(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&Uv.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?yF(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const s=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new v2({openToSide:t,openInPeek:s,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get($e);return er.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};qf.ID="editor.contrib.gotodefinitionatposition";qf.MAX_SOURCE_PREVIEW_LINES=8;qf=o6e([Jz(1,Rl),Jz(2,Fs)],qf);Bs(qf.ID,qf);ti((i,e)=>{const t=i.getColor(pEe);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const vC=ue;class hte extends te{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new jL(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class CF extends te{constructor(e,t,n){super(),this.actionContainer=se(e,vC("div.action-container")),this.action=se(this.actionContainer,vC("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&se(this.action,vC(`span.icon.${t.iconClass}`));const s=se(this.action,vC("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._register(ne(this.actionContainer,Ae.MOUSE_DOWN,r=>{r.stopPropagation(),r.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new CF(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function a6e(i,e){const t=[],s=Nm.ordered(i).reverse().map(r=>Promise.resolve(r.provideDocumentColors(i,e)).then(o=>{if(Array.isArray(o))for(let a of o)t.push({colorInfo:a,provider:r})}));return Promise.all(s).then(()=>t)}function eH(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Nt.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof We))throw Sl();const n=i.get(Ps).getModel(t);if(!n)throw Sl();const s=[],o=Nm.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,ei.None)).then(l=>{if(Array.isArray(l))for(let c of l)s.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(o).then(()=>s)});Nt.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:s,range:r}=n;if(!(s instanceof We)||!Array.isArray(t)||t.length!==4||!F.isIRange(r))throw Sl();const[o,a,l,c]=t,h=i.get(Ps).getModel(s);if(!h)throw Sl();const u={range:r,color:{red:o,green:a,blue:l,alpha:c}},d=[],g=Nm.ordered(h).reverse().map(p=>Promise.resolve(p.provideColorPresentations(h,u,ei.None)).then(m=>{Array.isArray(m)&&d.push(...m)}));return Promise.all(g).then(()=>d)});var l6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const c6e=500;let Gf=class ute extends te{constructor(e,t,n){super(),this._editor=e,this._codeEditorService=t,this._configurationService=n,this._localToDispose=this._register(new de),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(Nm.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let s=this._isEnabled;this._isEnabled=this.isEnabled(),s!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const s=n.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!Nm.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Os,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},ute.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=Ir(e=>{const t=this._editor.getModel();return t?a6e(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ze)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:ct.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,s)=>this._colorDatas.set(n,e[s]))}updateColorDecorators(e){let t=[],n={};for(let s=0;s<e.length&&t.length<c6e;s++){const{red:r,green:o,blue:a,alpha:l}=e[s].colorInfo.color,c=new tt(Math.round(r*255),Math.round(o*255),Math.round(a*255),l);let h=tDe(`rgba(${c.r},${c.g},${c.b},${c.a})`).toString(16),u=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,d="colorBox-"+h;!this._decorationsTypes.has(d)&&!n[d]&&this._codeEditorService.registerDecorationType("color-detector-color",d,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:u},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),n[d]=!0,t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(d,!0)})}this._decorationsTypes.forEach(s=>{n[s]||this._codeEditorService.removeDecorationType(s)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(e=>{this._codeEditorService.removeDecorationType(e)})}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(F.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return n.length===0?null:this._colorDatas.get(n[0].id)}};Gf.ID="editor.contrib.colorDetector";Gf.RECOMPUTE_TIME=1e3;Gf=l6e([tH(1,si),tH(2,Wi)],Gf);Bs(Gf.ID,Gf);class h6e{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new z,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new z,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const la=ue;class u6e extends te{constructor(e,t,n){super(),this.model=t,this.domNode=la(".colorpicker-header"),se(e,this.domNode),this.pickedColorNode=se(this.domNode,la(".picked-color"));const s=_("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",s);const r=se(this.domNode,la(".original-color"));r.style.backgroundColor=Z.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(Jv)||Z.white,this._register(ti((o,a)=>{this.backgroundColor=o.getColor(Jv)||Z.white})),this._register(ne(this.pickedColorNode,Ae.CLICK,()=>this.model.selectNextColorPresentation())),this._register(ne(r,Ae.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=Z.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(la(".codicon.codicon-color-mode"))}}class d6e extends te{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=la(".colorpicker-body"),se(e,this.domNode),this.saturationBox=new f6e(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new g6e(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new p6e(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new Z(new pl(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new Z(new pl(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new Z(new pl(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class f6e extends te{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this.domNode=la(".saturation-wrap"),se(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",se(this.domNode,this.canvas),this.selection=la(".saturation-selection"),se(this.domNode,this.selection),this.layout(),this._register(b5(this.domNode,s=>this.onMouseDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new fg);const t=Rn(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,B0,s=>this.onDidChangePosition(s.posx-t.left,s.posy-t.top),()=>null);const n=yY(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,s),this._onDidChange.fire({s:n,v:s})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new Z(new pl(e.h,1,1,1)),n=this.canvas.getContext("2d"),s=n.createLinearGradient(0,0,this.canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const r=n.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=Z.Format.CSS.format(t),n.fill(),n.fillStyle=s,n.fill(),n.fillStyle=r,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class dte extends te{constructor(e,t){super(),this.model=t,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new z,this.onColorFlushed=this._onColorFlushed.event,this.domNode=se(e,la(".strip")),this.overlay=se(this.domNode,la(".overlay")),this.slider=se(this.domNode,la(".slider")),this.slider.style.top="0px",this._register(b5(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new fg),n=Rn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,B0,r=>this.onDidChangeTop(r.posy-n.top),()=>null);const s=yY(document,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class g6e extends dte{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:s}=e.rgba,r=new Z(new tt(t,n,s,1)),o=new Z(new tt(t,n,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class p6e extends dte{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class m6e extends Jr{constructor(e,t,n,s){super(),this.model=t,this.pixelRatio=n,this._register(pY(()=>this.layout()));const r=la(".colorpicker-widget");e.appendChild(r);const o=new u6e(r,this.model,s);this.body=new d6e(r,this.model,this.pixelRatio),this._register(o),this._register(this.body)}layout(){this.body.layout()}}var _6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},b6e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},iH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class v6e{constructor(e,t,n,s){this.owner=e,this.range=t,this.model=n,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let N3=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return iH(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const s=Gf.get(this._editor);for(const r of t){if(r.options.description!=="color-detector-color")continue;const o=s.getColorData(r.range.getStartPosition());if(o)return[yield this._createColorHover(this._editor.getModel(),o.colorInfo,o.provider)]}return[]})}_createColorHover(e,t,n){return iH(this,void 0,void 0,function*(){const s=e.getValueInRange(t.range),{red:r,green:o,blue:a,alpha:l}=t.color,c=new tt(Math.round(r*255),Math.round(o*255),Math.round(a*255),l),h=new Z(c),u=yield eH(e,t,n,ei.None),d=new h6e(h,[],0);return d.colorPresentations=u||[],d.guessColorPresentation(h,s),new v6e(this,F.lift(t.range),d,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return te.None;const s=new de,r=e[0],o=this._editor.getModel(),a=r.model,l=s.add(new m6e(t,a,this._editor.getOption(127),this._themeService));let c=new F(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);const h=()=>{let d,f;if(a.presentation.textEdit){d=[a.presentation.textEdit],f=new F(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const g=this._editor.getModel()._setTrackedRange(null,f,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d),f=this._editor.getModel()._getTrackedRange(g)||f}else d=[{identifier:null,range:c,text:a.presentation.label,forceMoveMarkers:!1}],f=c.setEndPosition(c.endLineNumber,c.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",d);a.presentation.additionalTextEdits&&(d=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",d),this._hover.hide()),this._editor.pushUndoStop(),c=f},u=d=>eH(o,{range:c,color:{red:d.rgba.r/255,green:d.rgba.g/255,blue:d.rgba.b/255,alpha:d.rgba.a}},r.provider,ei.None).then(f=>{a.colorPresentations=f||[]});return s.add(a.onColorFlushed(d=>{u(d).then(h)})),s.add(a.onDidChangeColor(u)),this._hover.setColorPicker(l),s}};N3=_6e([b6e(2,oi)],N3);class fte{constructor(e,t,n,s,r){this._computer=e,this._state=0,this._hoverTime=r,this._firstWaitScheduler=new mi(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new mi(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new mi(()=>this._showLoadingMessage(),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=s}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=Ir(e=>this._computer.computeAsync(e)),this._asyncComputationPromise.then(e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)},e=>this._onError(e))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){this._state===3&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),this._state===3&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):Ze(e)}_onProgress(e){this._progressCallback(e)}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._loadingMessageScheduler.cancel(),this._state===1&&this._firstWaitScheduler.cancel(),this._state===2&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),this._state===3&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}class nH{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class EI{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function w6e(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var y6e=Object.hasOwnProperty,sH=Object.setPrototypeOf,C6e=Object.isFrozen,S6e=Object.getPrototypeOf,x6e=Object.getOwnPropertyDescriptor,tr=Object.freeze,Yc=Object.seal,D6e=Object.create,gte=typeof Reflect<"u"&&Reflect,QD=gte.apply,M3=gte.construct;QD||(QD=function(e,t,n){return e.apply(t,n)});tr||(tr=function(e){return e});Yc||(Yc=function(e){return e});M3||(M3=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(w6e(t))))});var k6e=Aa(Array.prototype.forEach),rH=Aa(Array.prototype.pop),k_=Aa(Array.prototype.push),gd=Aa(String.prototype.toLowerCase),oH=Aa(String.prototype.match),gh=Aa(String.prototype.replace),L6e=Aa(String.prototype.indexOf),A6e=Aa(String.prototype.trim),ac=Aa(RegExp.prototype.test),aH=E6e(TypeError);function Aa(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return QD(i,e,n)}}function E6e(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return M3(i,t)}}function Dt(i,e){sH&&sH(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var s=gd(n);s!==n&&(C6e(e)||(e[t]=s),n=s)}i[n]=!0}return i}function cd(i){var e=D6e(null),t=void 0;for(t in i)QD(y6e,i,[t])&&(e[t]=i[t]);return e}function wC(i,e){for(;i!==null;){var t=x6e(i,e);if(t){if(t.get)return Aa(t.get);if(typeof t.value=="function")return Aa(t.value)}i=S6e(i)}function n(s){return console.warn("fallback value for",s),null}return n}var lH=tr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),II=tr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),TI=tr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I6e=tr(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),NI=tr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),T6e=tr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cH=tr(["#text"]),hH=tr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),MI=tr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uH=tr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yC=tr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N6e=Yc(/\{\{[\s\S]*|[\s\S]*\}\}/gm),M6e=Yc(/<%[\s\S]*|[\s\S]*%>/gm),R6e=Yc(/^data-[\-\w.\u00B7-\uFFFF]/),O6e=Yc(/^aria-[\-\w]+$/),P6e=Yc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F6e=Yc(/^(?:\w+script|data):/i),B6e=Yc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function Za(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var V6e=function(){return typeof window>"u"?null:window},W6e=function(e,t){if((typeof e>"u"?"undefined":J_(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,s="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(s)&&(n=t.currentScript.getAttribute(s));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function pte(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V6e(),e=function(E){return pte(E)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,s=i.DocumentFragment,r=i.HTMLTemplateElement,o=i.Node,a=i.Element,l=i.NodeFilter,c=i.NamedNodeMap,h=c===void 0?i.NamedNodeMap||i.MozNamedAttrMap:c,u=i.Text,d=i.Comment,f=i.DOMParser,g=i.trustedTypes,p=a.prototype,m=wC(p,"cloneNode"),v=wC(p,"nextSibling"),b=wC(p,"childNodes"),w=wC(p,"parentNode");if(typeof r=="function"){var y=n.createElement("template");y.content&&y.content.ownerDocument&&(n=y.content.ownerDocument)}var x=W6e(g,t),L=x&&Un?x.createHTML(""):"",S=n,k=S.implementation,D=S.createNodeIterator,T=S.createDocumentFragment,N=S.getElementsByTagName,$=t.importNode,U={};try{U=cd(n).documentMode?n.documentMode:{}}catch{}var ee={};e.isSupported=typeof w=="function"&&k&&typeof k.createHTMLDocument<"u"&&U!==9;var he=N6e,fe=M6e,Ce=R6e,Se=O6e,me=F6e,kt=B6e,ze=P6e,Ge=null,Lt=Dt({},[].concat(Za(lH),Za(II),Za(TI),Za(NI),Za(cH))),st=null,Hi=Dt({},[].concat(Za(hH),Za(MI),Za(uH),Za(yC))),Cn=null,Hn=null,Ti=!0,J=!0,ye=!1,ce=!1,W=!1,at=!1,Me=!1,yt=!1,mt=!1,ii=!0,Un=!1,ih=!0,io=!0,or=!1,nn={},Ws=null,no=Dt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),_s=null,Va=Dt({},["audio","video","img","source","image","track"]),C=null,A=Dt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),I="http://www.w3.org/1998/Math/MathML",j="http://www.w3.org/2000/svg",Y="http://www.w3.org/1999/xhtml",ae=Y,_e=!1,vt=null,di=n.createElement("form"),Ot=function(E){vt&&vt===E||((!E||(typeof E>"u"?"undefined":J_(E))!=="object")&&(E={}),E=cd(E),Ge="ALLOWED_TAGS"in E?Dt({},E.ALLOWED_TAGS):Lt,st="ALLOWED_ATTR"in E?Dt({},E.ALLOWED_ATTR):Hi,C="ADD_URI_SAFE_ATTR"in E?Dt(cd(A),E.ADD_URI_SAFE_ATTR):A,_s="ADD_DATA_URI_TAGS"in E?Dt(cd(Va),E.ADD_DATA_URI_TAGS):Va,Ws="FORBID_CONTENTS"in E?Dt({},E.FORBID_CONTENTS):no,Cn="FORBID_TAGS"in E?Dt({},E.FORBID_TAGS):{},Hn="FORBID_ATTR"in E?Dt({},E.FORBID_ATTR):{},nn="USE_PROFILES"in E?E.USE_PROFILES:!1,Ti=E.ALLOW_ARIA_ATTR!==!1,J=E.ALLOW_DATA_ATTR!==!1,ye=E.ALLOW_UNKNOWN_PROTOCOLS||!1,ce=E.SAFE_FOR_TEMPLATES||!1,W=E.WHOLE_DOCUMENT||!1,yt=E.RETURN_DOM||!1,mt=E.RETURN_DOM_FRAGMENT||!1,ii=E.RETURN_DOM_IMPORT!==!1,Un=E.RETURN_TRUSTED_TYPE||!1,Me=E.FORCE_BODY||!1,ih=E.SANITIZE_DOM!==!1,io=E.KEEP_CONTENT!==!1,or=E.IN_PLACE||!1,ze=E.ALLOWED_URI_REGEXP||ze,ae=E.NAMESPACE||Y,ce&&(J=!1),mt&&(yt=!0),nn&&(Ge=Dt({},[].concat(Za(cH))),st=[],nn.html===!0&&(Dt(Ge,lH),Dt(st,hH)),nn.svg===!0&&(Dt(Ge,II),Dt(st,MI),Dt(st,yC)),nn.svgFilters===!0&&(Dt(Ge,TI),Dt(st,MI),Dt(st,yC)),nn.mathMl===!0&&(Dt(Ge,NI),Dt(st,uH),Dt(st,yC))),E.ADD_TAGS&&(Ge===Lt&&(Ge=cd(Ge)),Dt(Ge,E.ADD_TAGS)),E.ADD_ATTR&&(st===Hi&&(st=cd(st)),Dt(st,E.ADD_ATTR)),E.ADD_URI_SAFE_ATTR&&Dt(C,E.ADD_URI_SAFE_ATTR),E.FORBID_CONTENTS&&(Ws===no&&(Ws=cd(Ws)),Dt(Ws,E.FORBID_CONTENTS)),io&&(Ge["#text"]=!0),W&&Dt(Ge,["html","head","body"]),Ge.table&&(Dt(Ge,["tbody"]),delete Cn.tbody),tr&&tr(E),vt=E)},Pt=Dt({},["mi","mo","mn","ms","mtext"]),fi=Dt({},["foreignobject","desc","title","annotation-xml"]),Gl=Dt({},II);Dt(Gl,TI),Dt(Gl,I6e);var Wa=Dt({},NI);Dt(Wa,T6e);var Lg=function(E){var H=w(E);(!H||!H.tagName)&&(H={namespaceURI:Y,tagName:"template"});var X=gd(E.tagName),ie=gd(H.tagName);if(E.namespaceURI===j)return H.namespaceURI===Y?X==="svg":H.namespaceURI===I?X==="svg"&&(ie==="annotation-xml"||Pt[ie]):!!Gl[X];if(E.namespaceURI===I)return H.namespaceURI===Y?X==="math":H.namespaceURI===j?X==="math"&&fi[ie]:!!Wa[X];if(E.namespaceURI===Y){if(H.namespaceURI===j&&!fi[ie]||H.namespaceURI===I&&!Pt[ie])return!1;var we=Dt({},["title","style","font","a","script"]);return!Wa[X]&&(we[X]||!Gl[X])}return!1},zs=function(E){k_(e.removed,{element:E});try{E.parentNode.removeChild(E)}catch{try{E.outerHTML=L}catch{E.remove()}}},Gu=function(E,H){try{k_(e.removed,{attribute:H.getAttributeNode(E),from:H})}catch{k_(e.removed,{attribute:null,from:H})}if(H.removeAttribute(E),E==="is"&&!st[E])if(yt||mt)try{zs(H)}catch{}else try{H.setAttribute(E,"")}catch{}},Ag=function(E){var H=void 0,X=void 0;if(Me)E="<remove></remove>"+E;else{var ie=oH(E,/^[\r\n\t ]+/);X=ie&&ie[0]}var we=x?x.createHTML(E):E;if(ae===Y)try{H=new f().parseFromString(we,"text/html")}catch{}if(!H||!H.documentElement){H=k.createDocument(ae,"template",null);try{H.documentElement.innerHTML=_e?"":we}catch{}}var Fe=H.body||H.documentElement;return E&&X&&Fe.insertBefore(n.createTextNode(X),Fe.childNodes[0]||null),ae===Y?N.call(H,W?"html":"body")[0]:W?H.documentElement:Fe},Eg=function(E){return D.call(E.ownerDocument||E,E,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},rt=function(E){return E instanceof u||E instanceof d?!1:typeof E.nodeName!="string"||typeof E.textContent!="string"||typeof E.removeChild!="function"||!(E.attributes instanceof h)||typeof E.removeAttribute!="function"||typeof E.setAttribute!="function"||typeof E.namespaceURI!="string"||typeof E.insertBefore!="function"},za=function(E){return(typeof o>"u"?"undefined":J_(o))==="object"?E instanceof o:E&&(typeof E>"u"?"undefined":J_(E))==="object"&&typeof E.nodeType=="number"&&typeof E.nodeName=="string"},M=function(E,H,X){ee[E]&&k6e(ee[E],function(ie){ie.call(e,H,X,vt)})},K=function(E){var H=void 0;if(M("beforeSanitizeElements",E,null),rt(E)||oH(E.nodeName,/[\u0080-\uFFFF]/))return zs(E),!0;var X=gd(E.nodeName);if(M("uponSanitizeElement",E,{tagName:X,allowedTags:Ge}),!za(E.firstElementChild)&&(!za(E.content)||!za(E.content.firstElementChild))&&ac(/<[/\w]/g,E.innerHTML)&&ac(/<[/\w]/g,E.textContent)||X==="select"&&ac(/<template/i,E.innerHTML))return zs(E),!0;if(!Ge[X]||Cn[X]){if(io&&!Ws[X]){var ie=w(E)||E.parentNode,we=b(E)||E.childNodes;if(we&&ie)for(var Fe=we.length,He=Fe-1;He>=0;--He)ie.insertBefore(m(we[He],!0),v(E))}return zs(E),!0}return E instanceof a&&!Lg(E)||(X==="noscript"||X==="noembed")&&ac(/<\/no(script|embed)/i,E.innerHTML)?(zs(E),!0):(ce&&E.nodeType===3&&(H=E.textContent,H=gh(H,he," "),H=gh(H,fe," "),E.textContent!==H&&(k_(e.removed,{element:E.cloneNode()}),E.textContent=H)),M("afterSanitizeElements",E,null),!1)},Q=function(E,H,X){if(ih&&(H==="id"||H==="name")&&(X in n||X in di))return!1;if(!(J&&!Hn[H]&&ac(Ce,H))){if(!(Ti&&ac(Se,H))){if(!st[H]||Hn[H])return!1;if(!C[H]){if(!ac(ze,gh(X,kt,""))){if(!((H==="src"||H==="xlink:href"||H==="href")&&E!=="script"&&L6e(X,"data:")===0&&_s[E])){if(!(ye&&!ac(me,gh(X,kt,"")))){if(X)return!1}}}}}}return!0},R=function(E){var H=void 0,X=void 0,ie=void 0,we=void 0;M("beforeSanitizeAttributes",E,null);var Fe=E.attributes;if(Fe){var He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st};for(we=Fe.length;we--;){H=Fe[we];var qe=H,ge=qe.name,Re=qe.namespaceURI;if(X=A6e(H.value),ie=gd(ge),He.attrName=ie,He.attrValue=X,He.keepAttr=!0,He.forceKeepAttr=void 0,M("uponSanitizeAttribute",E,He),X=He.attrValue,!He.forceKeepAttr&&(Gu(ge,E),!!He.keepAttr)){if(ac(/\/>/i,X)){Gu(ge,E);continue}ce&&(X=gh(X,he," "),X=gh(X,fe," "));var Ui=E.nodeName.toLowerCase();if(Q(Ui,ie,X))try{Re?E.setAttributeNS(Re,ge,X):E.setAttribute(ge,X),rH(e.removed)}catch{}}}M("afterSanitizeAttributes",E,null)}},B=function O(E){var H=void 0,X=Eg(E);for(M("beforeSanitizeShadowDOM",E,null);H=X.nextNode();)M("uponSanitizeShadowNode",H,null),!K(H)&&(H.content instanceof s&&O(H.content),R(H));M("afterSanitizeShadowDOM",E,null)};return e.sanitize=function(O,E){var H=void 0,X=void 0,ie=void 0,we=void 0,Fe=void 0;if(_e=!O,_e&&(O="<!-->"),typeof O!="string"&&!za(O)){if(typeof O.toString!="function")throw aH("toString is not a function");if(O=O.toString(),typeof O!="string")throw aH("dirty is not a string, aborting")}if(!e.isSupported){if(J_(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof O=="string")return i.toStaticHTML(O);if(za(O))return i.toStaticHTML(O.outerHTML)}return O}if(at||Ot(E),e.removed=[],typeof O=="string"&&(or=!1),!or)if(O instanceof o)H=Ag("<!---->"),X=H.ownerDocument.importNode(O,!0),X.nodeType===1&&X.nodeName==="BODY"||X.nodeName==="HTML"?H=X:H.appendChild(X);else{if(!yt&&!ce&&!W&&O.indexOf("<")===-1)return x&&Un?x.createHTML(O):O;if(H=Ag(O),!H)return yt?null:L}H&&Me&&zs(H.firstChild);for(var He=Eg(or?O:H);ie=He.nextNode();)ie.nodeType===3&&ie===we||K(ie)||(ie.content instanceof s&&B(ie.content),R(ie),we=ie);if(we=null,or)return O;if(yt){if(mt)for(Fe=T.call(H.ownerDocument);H.firstChild;)Fe.appendChild(H.firstChild);else Fe=H;return ii&&(Fe=$.call(t,Fe,!0)),Fe}var qe=W?H.outerHTML:H.innerHTML;return ce&&(qe=gh(qe,he," "),qe=gh(qe,fe," ")),x&&Un?x.createHTML(qe):qe},e.setConfig=function(O){Ot(O),at=!0},e.clearConfig=function(){vt=null,at=!1},e.isValidAttribute=function(O,E,H){vt||Ot({});var X=gd(O),ie=gd(E);return Q(X,ie,H)},e.addHook=function(O,E){typeof E=="function"&&(ee[O]=ee[O]||[],k_(ee[O],E))},e.removeHook=function(O){ee[O]&&rH(ee[O])},e.removeHooks=function(O){ee[O]&&(ee[O]=[])},e.removeAllHooks=function(){ee={}},e}var jl=pte();jl.version;jl.isSupported;const z6e=jl.sanitize;jl.setConfig;jl.clearConfig;jl.isValidAttribute;const dH=jl.addHook,fH=jl.removeHook;jl.removeHooks;jl.removeAllHooks;let ql;(function(){function i(e){ql=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(M,K){for(var Q=0;Q<K.length;Q++){var R=K[Q];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,R.key,R)}}function t(M,K,Q){return K&&e(M.prototype,K),Q&&e(M,Q),M}function n(M,K){if(M){if(typeof M=="string")return s(M,K);var Q=Object.prototype.toString.call(M).slice(8,-1);if(Q==="Object"&&M.constructor&&(Q=M.constructor.name),Q==="Map"||Q==="Set")return Array.from(M);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return s(M,K)}}function s(M,K){(K==null||K>M.length)&&(K=M.length);for(var Q=0,R=new Array(K);Q<K;Q++)R[Q]=M[Q];return R}function r(M,K){var Q=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(Q)return(Q=Q.call(M)).next.bind(Q);if(Array.isArray(M)||(Q=n(M))||K&&M&&typeof M.length=="number"){Q&&(M=Q);var R=0;return function(){return R>=M.length?{done:!0}:{done:!1,value:M[R++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function l(M){o.exports.defaults=M}o.exports={defaults:a(),getDefaults:a,changeDefaults:l};var c=/[&<>"']/,h=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(K){return f[K]};function p(M,K){if(K){if(c.test(M))return M.replace(h,g)}else if(u.test(M))return M.replace(d,g);return M}var m=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function v(M){return M.replace(m,function(K,Q){return Q=Q.toLowerCase(),Q==="colon"?":":Q.charAt(0)==="#"?Q.charAt(1)==="x"?String.fromCharCode(parseInt(Q.substring(2),16)):String.fromCharCode(+Q.substring(1)):""})}var b=/(^|[^\[])\^/g;function w(M,K){M=M.source||M,K=K||"";var Q={replace:function(B,O){return O=O.source||O,O=O.replace(b,"$1"),M=M.replace(B,O),Q},getRegex:function(){return new RegExp(M,K)}};return Q}var y=/[^\w:]/g,x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function L(M,K,Q){if(M){var R;try{R=decodeURIComponent(v(Q)).replace(y,"").toLowerCase()}catch{return null}if(R.indexOf("javascript:")===0||R.indexOf("vbscript:")===0||R.indexOf("data:")===0)return null}K&&!x.test(Q)&&(Q=N(K,Q));try{Q=encodeURI(Q).replace(/%25/g,"%")}catch{return null}return Q}var S={},k=/^[^:]+:\/*[^/]*$/,D=/^([^:]+:)[\s\S]*$/,T=/^([^:]+:\/*[^/]*)[\s\S]*$/;function N(M,K){S[" "+M]||(k.test(M)?S[" "+M]=M+"/":S[" "+M]=he(M,"/",!0)),M=S[" "+M];var Q=M.indexOf(":")===-1;return K.substring(0,2)==="//"?Q?K:M.replace(D,"$1")+K:K.charAt(0)==="/"?Q?K:M.replace(T,"$1")+K:M+K}var $={exec:function(){}};function U(M){for(var K=1,Q,R;K<arguments.length;K++){Q=arguments[K];for(R in Q)Object.prototype.hasOwnProperty.call(Q,R)&&(M[R]=Q[R])}return M}function ee(M,K){var Q=M.replace(/\|/g,function(O,E,H){for(var X=!1,ie=E;--ie>=0&&H[ie]==="\\";)X=!X;return X?"|":" |"}),R=Q.split(/ \|/),B=0;if(R[0].trim()||R.shift(),R[R.length-1].trim()||R.pop(),R.length>K)R.splice(K);else for(;R.length<K;)R.push("");for(;B<R.length;B++)R[B]=R[B].trim().replace(/\\\|/g,"|");return R}function he(M,K,Q){var R=M.length;if(R===0)return"";for(var B=0;B<R;){var O=M.charAt(R-B-1);if(O===K&&!Q)B++;else if(O!==K&&Q)B++;else break}return M.substr(0,R-B)}function fe(M,K){if(M.indexOf(K[1])===-1)return-1;for(var Q=M.length,R=0,B=0;B<Q;B++)if(M[B]==="\\")B++;else if(M[B]===K[0])R++;else if(M[B]===K[1]&&(R--,R<0))return B;return-1}function Ce(M){M&&M.sanitize&&!M.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Se(M,K){if(K<1)return"";for(var Q="";K>1;)K&1&&(Q+=M),K>>=1,M+=M;return Q+M}var me={escape:p,unescape:v,edit:w,cleanUrl:L,resolveUrl:N,noopTest:$,merge:U,splitCells:ee,rtrim:he,findClosingBracket:fe,checkSanitizeDeprecation:Ce,repeatString:Se},kt=o.exports.defaults,ze=me.rtrim,Ge=me.splitCells,Lt=me.escape,st=me.findClosingBracket;function Hi(M,K,Q,R){var B=K.href,O=K.title?Lt(K.title):null,E=M[1].replace(/\\([\[\]])/g,"$1");if(M[0].charAt(0)!=="!"){R.state.inLink=!0;var H={type:"link",raw:Q,href:B,title:O,text:E,tokens:R.inlineTokens(E,[])};return R.state.inLink=!1,H}else return{type:"image",raw:Q,href:B,title:O,text:Lt(E)}}function Cn(M,K){var Q=M.match(/^(\s+)(?:```)/);if(Q===null)return K;var R=Q[1];return K.split(`
`).map(function(B){var O=B.match(/^\s+/);if(O===null)return B;var E=O[0];return E.length>=R.length?B.slice(R.length):B}).join(`
`)}var Hn=function(){function M(Q){this.options=Q||kt}var K=M.prototype;return K.space=function(R){var B=this.rules.block.newline.exec(R);if(B)return B[0].length>1?{type:"space",raw:B[0]}:{raw:`
`}},K.code=function(R){var B=this.rules.block.code.exec(R);if(B){var O=B[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:B[0],codeBlockStyle:"indented",text:this.options.pedantic?O:ze(O,`
`)}}},K.fences=function(R){var B=this.rules.block.fences.exec(R);if(B){var O=B[0],E=Cn(O,B[3]||"");return{type:"code",raw:O,lang:B[2]?B[2].trim():B[2],text:E}}},K.heading=function(R){var B=this.rules.block.heading.exec(R);if(B){var O=B[2].trim();if(/#$/.test(O)){var E=ze(O,"#");(this.options.pedantic||!E||/ $/.test(E))&&(O=E.trim())}var H={type:"heading",raw:B[0],depth:B[1].length,text:O,tokens:[]};return this.lexer.inline(H.text,H.tokens),H}},K.hr=function(R){var B=this.rules.block.hr.exec(R);if(B)return{type:"hr",raw:B[0]}},K.blockquote=function(R){var B=this.rules.block.blockquote.exec(R);if(B){var O=B[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:B[0],tokens:this.lexer.blockTokens(O,[]),text:O}}},K.list=function(R){var B=this.rules.block.list.exec(R);if(B){var O,E,H,X,ie,we,Fe,He,qe,ge,Re=B[1].trim(),Ui=Re.length>1,Ct={type:"list",raw:"",ordered:Ui,start:Ui?+Re.slice(0,-1):"",loose:!1,items:[]};Re=Ui?"\\d{1,9}\\"+Re.slice(-1):"\\"+Re,this.options.pedantic&&(Re=Ui?Re:"[*+-]");for(var $n=new RegExp("^( {0,3}"+Re+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");R&&!(this.rules.block.hr.test(R)||!(B=$n.exec(R)));){qe=B[2].split(`
`),this.options.pedantic?(X=2,ge=qe[0].trimLeft()):(X=B[2].search(/[^ ]/),X=B[1].length+(X>4?1:X),ge=qe[0].slice(X-B[1].length)),we=!1,O=B[0],!qe[0]&&/^ *$/.test(qe[1])&&(O=B[1]+qe.slice(0,2).join(`
`)+`
`,Ct.loose=!0,qe=[]);var Kl=new RegExp("^ {0,"+Math.min(3,X-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(ie=1;ie<qe.length;ie++){if(He=qe[ie],this.options.pedantic&&(He=He.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Kl.test(He)){O=B[1]+qe.slice(0,ie).join(`
`)+`
`;break}if(!we){He.trim()||(we=!0),He.search(/[^ ]/)>=X?ge+=`
`+He.slice(X):ge+=`
`+He;continue}if(He.search(/[^ ]/)>=X||!He.trim()){ge+=`
`+He.slice(X);continue}else{O=B[1]+qe.slice(0,ie).join(`
`)+`
`;break}}Ct.loose||(Fe?Ct.loose=!0:/\n *\n *$/.test(O)&&(Fe=!0)),this.options.gfm&&(E=/^\[[ xX]\] /.exec(ge),E&&(H=E[0]!=="[ ] ",ge=ge.replace(/^\[[ xX]\] +/,""))),Ct.items.push({type:"list_item",raw:O,task:!!E,checked:H,loose:!1,text:ge}),Ct.raw+=O,R=R.slice(O.length)}Ct.items[Ct.items.length-1].raw=O.trimRight(),Ct.items[Ct.items.length-1].text=ge.trimRight(),Ct.raw=Ct.raw.trimRight();var sn=Ct.items.length;for(ie=0;ie<sn;ie++)this.lexer.state.top=!1,Ct.items[ie].tokens=this.lexer.blockTokens(Ct.items[ie].text,[]),Ct.items[ie].tokens.some(function(Ku){return Ku.type==="space"})&&(Ct.loose=!0,Ct.items[ie].loose=!0);return Ct}},K.html=function(R){var B=this.rules.block.html.exec(R);if(B){var O={type:"html",raw:B[0],pre:!this.options.sanitizer&&(B[1]==="pre"||B[1]==="script"||B[1]==="style"),text:B[0]};return this.options.sanitize&&(O.type="paragraph",O.text=this.options.sanitizer?this.options.sanitizer(B[0]):Lt(B[0]),O.tokens=[],this.lexer.inline(O.text,O.tokens)),O}},K.def=function(R){var B=this.rules.block.def.exec(R);if(B){B[3]&&(B[3]=B[3].substring(1,B[3].length-1));var O=B[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:O,raw:B[0],href:B[2],title:B[3]}}},K.table=function(R){var B=this.rules.block.table.exec(R);if(B){var O={type:"table",header:Ge(B[1]).map(function(Fe){return{text:Fe}}),align:B[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:B[3]?B[3].replace(/\n$/,"").split(`
`):[]};if(O.header.length===O.align.length){O.raw=B[0];var E=O.align.length,H,X,ie,we;for(H=0;H<E;H++)/^ *-+: *$/.test(O.align[H])?O.align[H]="right":/^ *:-+: *$/.test(O.align[H])?O.align[H]="center":/^ *:-+ *$/.test(O.align[H])?O.align[H]="left":O.align[H]=null;for(E=O.rows.length,H=0;H<E;H++)O.rows[H]=Ge(O.rows[H],O.header.length).map(function(Fe){return{text:Fe}});for(E=O.header.length,X=0;X<E;X++)O.header[X].tokens=[],this.lexer.inlineTokens(O.header[X].text,O.header[X].tokens);for(E=O.rows.length,X=0;X<E;X++)for(we=O.rows[X],ie=0;ie<we.length;ie++)we[ie].tokens=[],this.lexer.inlineTokens(we[ie].text,we[ie].tokens);return O}}},K.lheading=function(R){var B=this.rules.block.lheading.exec(R);if(B){var O={type:"heading",raw:B[0],depth:B[2].charAt(0)==="="?1:2,text:B[1],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.paragraph=function(R){var B=this.rules.block.paragraph.exec(R);if(B){var O={type:"paragraph",raw:B[0],text:B[1].charAt(B[1].length-1)===`
`?B[1].slice(0,-1):B[1],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.text=function(R){var B=this.rules.block.text.exec(R);if(B){var O={type:"text",raw:B[0],text:B[0],tokens:[]};return this.lexer.inline(O.text,O.tokens),O}},K.escape=function(R){var B=this.rules.inline.escape.exec(R);if(B)return{type:"escape",raw:B[0],text:Lt(B[1])}},K.tag=function(R){var B=this.rules.inline.tag.exec(R);if(B)return!this.lexer.state.inLink&&/^<a /i.test(B[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(B[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(B[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(B[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:B[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(B[0]):Lt(B[0]):B[0]}},K.link=function(R){var B=this.rules.inline.link.exec(R);if(B){var O=B[2].trim();if(!this.options.pedantic&&/^</.test(O)){if(!/>$/.test(O))return;var E=ze(O.slice(0,-1),"\\");if((O.length-E.length)%2===0)return}else{var H=st(B[2],"()");if(H>-1){var X=B[0].indexOf("!")===0?5:4,ie=X+B[1].length+H;B[2]=B[2].substring(0,H),B[0]=B[0].substring(0,ie).trim(),B[3]=""}}var we=B[2],Fe="";if(this.options.pedantic){var He=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(we);He&&(we=He[1],Fe=He[3])}else Fe=B[3]?B[3].slice(1,-1):"";return we=we.trim(),/^</.test(we)&&(this.options.pedantic&&!/>$/.test(O)?we=we.slice(1):we=we.slice(1,-1)),Hi(B,{href:we&&we.replace(this.rules.inline._escapes,"$1"),title:Fe&&Fe.replace(this.rules.inline._escapes,"$1")},B[0],this.lexer)}},K.reflink=function(R,B){var O;if((O=this.rules.inline.reflink.exec(R))||(O=this.rules.inline.nolink.exec(R))){var E=(O[2]||O[1]).replace(/\s+/g," ");if(E=B[E.toLowerCase()],!E||!E.href){var H=O[0].charAt(0);return{type:"text",raw:H,text:H}}return Hi(O,E,O[0],this.lexer)}},K.emStrong=function(R,B,O){O===void 0&&(O="");var E=this.rules.inline.emStrong.lDelim.exec(R);if(E&&!(E[3]&&O.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=E[1]||E[2]||"";if(!H||H&&(O===""||this.rules.inline.punctuation.exec(O))){var X=E[0].length-1,ie,we,Fe=X,He=0,qe=E[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(qe.lastIndex=0,B=B.slice(-1*R.length+X);(E=qe.exec(B))!=null;)if(ie=E[1]||E[2]||E[3]||E[4]||E[5]||E[6],!!ie){if(we=ie.length,E[3]||E[4]){Fe+=we;continue}else if((E[5]||E[6])&&X%3&&!((X+we)%3)){He+=we;continue}if(Fe-=we,!(Fe>0)){if(we=Math.min(we,we+Fe+He),Math.min(X,we)%2){var ge=R.slice(1,X+E.index+we);return{type:"em",raw:R.slice(0,X+E.index+we+1),text:ge,tokens:this.lexer.inlineTokens(ge,[])}}var Re=R.slice(2,X+E.index+we-1);return{type:"strong",raw:R.slice(0,X+E.index+we+1),text:Re,tokens:this.lexer.inlineTokens(Re,[])}}}}}},K.codespan=function(R){var B=this.rules.inline.code.exec(R);if(B){var O=B[2].replace(/\n/g," "),E=/[^ ]/.test(O),H=/^ /.test(O)&&/ $/.test(O);return E&&H&&(O=O.substring(1,O.length-1)),O=Lt(O,!0),{type:"codespan",raw:B[0],text:O}}},K.br=function(R){var B=this.rules.inline.br.exec(R);if(B)return{type:"br",raw:B[0]}},K.del=function(R){var B=this.rules.inline.del.exec(R);if(B)return{type:"del",raw:B[0],text:B[2],tokens:this.lexer.inlineTokens(B[2],[])}},K.autolink=function(R,B){var O=this.rules.inline.autolink.exec(R);if(O){var E,H;return O[2]==="@"?(E=Lt(this.options.mangle?B(O[1]):O[1]),H="mailto:"+E):(E=Lt(O[1]),H=E),{type:"link",raw:O[0],text:E,href:H,tokens:[{type:"text",raw:E,text:E}]}}},K.url=function(R,B){var O;if(O=this.rules.inline.url.exec(R)){var E,H;if(O[2]==="@")E=Lt(this.options.mangle?B(O[0]):O[0]),H="mailto:"+E;else{var X;do X=O[0],O[0]=this.rules.inline._backpedal.exec(O[0])[0];while(X!==O[0]);E=Lt(O[0]),O[1]==="www."?H="http://"+E:H=E}return{type:"link",raw:O[0],text:E,href:H,tokens:[{type:"text",raw:E,text:E}]}}},K.inlineText=function(R,B){var O=this.rules.inline.text.exec(R);if(O){var E;return this.lexer.state.inRawBlock?E=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(O[0]):Lt(O[0]):O[0]:E=Lt(this.options.smartypants?B(O[0]):O[0]),{type:"text",raw:O[0],text:E}}},M}(),Ti=me.noopTest,J=me.edit,ye=me.merge,ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Ti,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};ce._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ce.def=J(ce.def).replace("label",ce._label).replace("title",ce._title).getRegex(),ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,ce.listItemStart=J(/^( *)(bull) */).replace("bull",ce.bullet).getRegex(),ce.list=J(ce.list).replace(/bull/g,ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ce.def.source+")").getRegex(),ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ce.html=J(ce.html,"i").replace("comment",ce._comment).replace("tag",ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ce.paragraph=J(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.blockquote=J(ce.blockquote).replace("paragraph",ce.paragraph).getRegex(),ce.normal=ye({},ce),ce.gfm=ye({},ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ce.gfm.table=J(ce.gfm.table).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex(),ce.pedantic=ye({},ce.normal,{html:J(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ti,paragraph:J(ce.normal._paragraph).replace("hr",ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ti,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ti,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};W._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",W.punctuation=J(W.punctuation).replace(/punctuation/g,W._punctuation).getRegex(),W.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,W.escapedEmSt=/\\\*|\\_/g,W._comment=J(ce._comment).replace("(?:-->|$)","-->").getRegex(),W.emStrong.lDelim=J(W.emStrong.lDelim).replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimAst=J(W.emStrong.rDelimAst,"g").replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimUnd=J(W.emStrong.rDelimUnd,"g").replace(/punct/g,W._punctuation).getRegex(),W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,W.autolink=J(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex(),W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,W.tag=J(W.tag).replace("comment",W._comment).replace("attribute",W._attribute).getRegex(),W._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,W._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,W.link=J(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex(),W.reflink=J(W.reflink).replace("label",W._label).getRegex(),W.reflinkSearch=J(W.reflinkSearch,"g").replace("reflink",W.reflink).replace("nolink",W.nolink).getRegex(),W.normal=ye({},W),W.pedantic=ye({},W.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:J(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:J(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()}),W.gfm=ye({},W.normal,{escape:J(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),W.gfm.url=J(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex(),W.breaks=ye({},W.gfm,{br:J(W.br).replace("{2,}","*").getRegex(),text:J(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var at={block:ce,inline:W},Me=Hn,yt=o.exports.defaults,mt=at.block,ii=at.inline,Un=me.repeatString;function ih(M){return M.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function io(M){var K="",Q,R,B=M.length;for(Q=0;Q<B;Q++)R=M.charCodeAt(Q),Math.random()>.5&&(R="x"+R.toString(16)),K+="&#"+R+";";return K}var or=function(){function M(Q){this.tokens=[],this.tokens.links=Object.create(null),this.options=Q||yt,this.options.tokenizer=this.options.tokenizer||new Me,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var R={block:mt.normal,inline:ii.normal};this.options.pedantic?(R.block=mt.pedantic,R.inline=ii.pedantic):this.options.gfm&&(R.block=mt.gfm,this.options.breaks?R.inline=ii.breaks:R.inline=ii.gfm),this.tokenizer.rules=R}M.lex=function(R,B){var O=new M(B);return O.lex(R)},M.lexInline=function(R,B){var O=new M(B);return O.inlineTokens(R)};var K=M.prototype;return K.lex=function(R){R=R.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(R,this.tokens);for(var B;B=this.inlineQueue.shift();)this.inlineTokens(B.src,B.tokens);return this.tokens},K.blockTokens=function(R,B){var O=this;B===void 0&&(B=[]),this.options.pedantic&&(R=R.replace(/^ +$/gm,""));for(var E,H,X,ie;R;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Fe){return(E=Fe.call({lexer:O},R,B))?(R=R.substring(E.raw.length),B.push(E),!0):!1}))){if(E=this.tokenizer.space(R)){R=R.substring(E.raw.length),E.type&&B.push(E);continue}if(E=this.tokenizer.code(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&(H.type==="paragraph"||H.type==="text")?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E);continue}if(E=this.tokenizer.fences(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.heading(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.hr(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.blockquote(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.list(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.html(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.def(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&(H.type==="paragraph"||H.type==="text")?(H.raw+=`
`+E.raw,H.text+=`
`+E.raw,this.inlineQueue[this.inlineQueue.length-1].src=H.text):this.tokens.links[E.tag]||(this.tokens.links[E.tag]={href:E.href,title:E.title});continue}if(E=this.tokenizer.table(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.lheading(R)){R=R.substring(E.raw.length),B.push(E);continue}if(X=R,this.options.extensions&&this.options.extensions.startBlock&&function(){var Fe=1/0,He=R.slice(1),qe=void 0;O.options.extensions.startBlock.forEach(function(ge){qe=ge.call({lexer:this},He),typeof qe=="number"&&qe>=0&&(Fe=Math.min(Fe,qe))}),Fe<1/0&&Fe>=0&&(X=R.substring(0,Fe+1))}(),this.state.top&&(E=this.tokenizer.paragraph(X))){H=B[B.length-1],ie&&H.type==="paragraph"?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E),ie=X.length!==R.length,R=R.substring(E.raw.length);continue}if(E=this.tokenizer.text(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&H.type==="text"?(H.raw+=`
`+E.raw,H.text+=`
`+E.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=H.text):B.push(E);continue}if(R){var we="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(we);break}else throw new Error(we)}}return this.state.top=!0,B},K.inline=function(R,B){this.inlineQueue.push({src:R,tokens:B})},K.inlineTokens=function(R,B){var O=this;B===void 0&&(B=[]);var E,H,X,ie=R,we,Fe,He;if(this.tokens.links){var qe=Object.keys(this.tokens.links);if(qe.length>0)for(;(we=this.tokenizer.rules.inline.reflinkSearch.exec(ie))!=null;)qe.includes(we[0].slice(we[0].lastIndexOf("[")+1,-1))&&(ie=ie.slice(0,we.index)+"["+Un("a",we[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(we=this.tokenizer.rules.inline.blockSkip.exec(ie))!=null;)ie=ie.slice(0,we.index)+"["+Un("a",we[0].length-2)+"]"+ie.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(we=this.tokenizer.rules.inline.escapedEmSt.exec(ie))!=null;)ie=ie.slice(0,we.index)+"++"+ie.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;R;)if(Fe||(He=""),Fe=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Re){return(E=Re.call({lexer:O},R,B))?(R=R.substring(E.raw.length),B.push(E),!0):!1}))){if(E=this.tokenizer.escape(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.tag(R)){R=R.substring(E.raw.length),H=B[B.length-1],H&&E.type==="text"&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(E=this.tokenizer.link(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.reflink(R,this.tokens.links)){R=R.substring(E.raw.length),H=B[B.length-1],H&&E.type==="text"&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(E=this.tokenizer.emStrong(R,ie,He)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.codespan(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.br(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.del(R)){R=R.substring(E.raw.length),B.push(E);continue}if(E=this.tokenizer.autolink(R,io)){R=R.substring(E.raw.length),B.push(E);continue}if(!this.state.inLink&&(E=this.tokenizer.url(R,io))){R=R.substring(E.raw.length),B.push(E);continue}if(X=R,this.options.extensions&&this.options.extensions.startInline&&function(){var Re=1/0,Ui=R.slice(1),Ct=void 0;O.options.extensions.startInline.forEach(function($n){Ct=$n.call({lexer:this},Ui),typeof Ct=="number"&&Ct>=0&&(Re=Math.min(Re,Ct))}),Re<1/0&&Re>=0&&(X=R.substring(0,Re+1))}(),E=this.tokenizer.inlineText(X,ih)){R=R.substring(E.raw.length),E.raw.slice(-1)!=="_"&&(He=E.raw.slice(-1)),Fe=!0,H=B[B.length-1],H&&H.type==="text"?(H.raw+=E.raw,H.text+=E.text):B.push(E);continue}if(R){var ge="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(ge);break}else throw new Error(ge)}}return B},t(M,null,[{key:"rules",get:function(){return{block:mt,inline:ii}}}]),M}(),nn=o.exports.defaults,Ws=me.cleanUrl,no=me.escape,_s=function(){function M(Q){this.options=Q||nn}var K=M.prototype;return K.code=function(R,B,O){var E=(B||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(R,E);H!=null&&H!==R&&(O=!0,R=H)}return R=R.replace(/\n$/,"")+`
`,E?'<pre><code class="'+this.options.langPrefix+no(E,!0)+'">'+(O?R:no(R,!0))+`</code></pre>
`:"<pre><code>"+(O?R:no(R,!0))+`</code></pre>
`},K.blockquote=function(R){return`<blockquote>
`+R+`</blockquote>
`},K.html=function(R){return R},K.heading=function(R,B,O,E){return this.options.headerIds?"<h"+B+' id="'+this.options.headerPrefix+E.slug(O)+'">'+R+"</h"+B+`>
`:"<h"+B+">"+R+"</h"+B+`>
`},K.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},K.list=function(R,B,O){var E=B?"ol":"ul",H=B&&O!==1?' start="'+O+'"':"";return"<"+E+H+`>
`+R+"</"+E+`>
`},K.listitem=function(R){return"<li>"+R+`</li>
`},K.checkbox=function(R){return"<input "+(R?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},K.paragraph=function(R){return"<p>"+R+`</p>
`},K.table=function(R,B){return B&&(B="<tbody>"+B+"</tbody>"),`<table>
<thead>
`+R+`</thead>
`+B+`</table>
`},K.tablerow=function(R){return`<tr>
`+R+`</tr>
`},K.tablecell=function(R,B){var O=B.header?"th":"td",E=B.align?"<"+O+' align="'+B.align+'">':"<"+O+">";return E+R+"</"+O+`>
`},K.strong=function(R){return"<strong>"+R+"</strong>"},K.em=function(R){return"<em>"+R+"</em>"},K.codespan=function(R){return"<code>"+R+"</code>"},K.br=function(){return this.options.xhtml?"<br/>":"<br>"},K.del=function(R){return"<del>"+R+"</del>"},K.link=function(R,B,O){if(R=Ws(this.options.sanitize,this.options.baseUrl,R),R===null)return O;var E='<a href="'+no(R)+'"';return B&&(E+=' title="'+B+'"'),E+=">"+O+"</a>",E},K.image=function(R,B,O){if(R=Ws(this.options.sanitize,this.options.baseUrl,R),R===null)return O;var E='<img src="'+R+'" alt="'+O+'"';return B&&(E+=' title="'+B+'"'),E+=this.options.xhtml?"/>":">",E},K.text=function(R){return R},M}(),Va=function(){function M(){}var K=M.prototype;return K.strong=function(R){return R},K.em=function(R){return R},K.codespan=function(R){return R},K.del=function(R){return R},K.html=function(R){return R},K.text=function(R){return R},K.link=function(R,B,O){return""+O},K.image=function(R,B,O){return""+O},K.br=function(){return""},M}(),C=function(){function M(){this.seen={}}var K=M.prototype;return K.serialize=function(R){return R.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},K.getNextSafeSlug=function(R,B){var O=R,E=0;if(this.seen.hasOwnProperty(O)){E=this.seen[R];do E++,O=R+"-"+E;while(this.seen.hasOwnProperty(O))}return B||(this.seen[R]=E,this.seen[O]=0),O},K.slug=function(R,B){B===void 0&&(B={});var O=this.serialize(R);return this.getNextSafeSlug(O,B.dryrun)},M}(),A=_s,I=Va,j=C,Y=o.exports.defaults,ae=me.unescape,_e=function(){function M(Q){this.options=Q||Y,this.options.renderer=this.options.renderer||new A,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new I,this.slugger=new j}M.parse=function(R,B){var O=new M(B);return O.parse(R)},M.parseInline=function(R,B){var O=new M(B);return O.parseInline(R)};var K=M.prototype;return K.parse=function(R,B){B===void 0&&(B=!0);var O="",E,H,X,ie,we,Fe,He,qe,ge,Re,Ui,Ct,$n,Kl,sn,Ku,ty,Zu,Yu,iy=R.length;for(E=0;E<iy;E++){if(Re=R[E],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Re.type]&&(Yu=this.options.extensions.renderers[Re.type].call({parser:this},Re),Yu!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Re.type))){O+=Yu||"";continue}switch(Re.type){case"space":continue;case"hr":{O+=this.renderer.hr();continue}case"heading":{O+=this.renderer.heading(this.parseInline(Re.tokens),Re.depth,ae(this.parseInline(Re.tokens,this.textRenderer)),this.slugger);continue}case"code":{O+=this.renderer.code(Re.text,Re.lang,Re.escaped);continue}case"table":{for(qe="",He="",ie=Re.header.length,H=0;H<ie;H++)He+=this.renderer.tablecell(this.parseInline(Re.header[H].tokens),{header:!0,align:Re.align[H]});for(qe+=this.renderer.tablerow(He),ge="",ie=Re.rows.length,H=0;H<ie;H++){for(Fe=Re.rows[H],He="",we=Fe.length,X=0;X<we;X++)He+=this.renderer.tablecell(this.parseInline(Fe[X].tokens),{header:!1,align:Re.align[X]});ge+=this.renderer.tablerow(He)}O+=this.renderer.table(qe,ge);continue}case"blockquote":{ge=this.parse(Re.tokens),O+=this.renderer.blockquote(ge);continue}case"list":{for(Ui=Re.ordered,Ct=Re.start,$n=Re.loose,ie=Re.items.length,ge="",H=0;H<ie;H++)sn=Re.items[H],Ku=sn.checked,ty=sn.task,Kl="",sn.task&&(Zu=this.renderer.checkbox(Ku),$n?sn.tokens.length>0&&sn.tokens[0].type==="paragraph"?(sn.tokens[0].text=Zu+" "+sn.tokens[0].text,sn.tokens[0].tokens&&sn.tokens[0].tokens.length>0&&sn.tokens[0].tokens[0].type==="text"&&(sn.tokens[0].tokens[0].text=Zu+" "+sn.tokens[0].tokens[0].text)):sn.tokens.unshift({type:"text",text:Zu}):Kl+=Zu),Kl+=this.parse(sn.tokens,$n),ge+=this.renderer.listitem(Kl,ty,Ku);O+=this.renderer.list(ge,Ui,Ct);continue}case"html":{O+=this.renderer.html(Re.text);continue}case"paragraph":{O+=this.renderer.paragraph(this.parseInline(Re.tokens));continue}case"text":{for(ge=Re.tokens?this.parseInline(Re.tokens):Re.text;E+1<iy&&R[E+1].type==="text";)Re=R[++E],ge+=`
`+(Re.tokens?this.parseInline(Re.tokens):Re.text);O+=B?this.renderer.paragraph(ge):ge;continue}default:{var Ig='Token with "'+Re.type+'" type was not found.';if(this.options.silent){console.error(Ig);return}else throw new Error(Ig)}}}return O},K.parseInline=function(R,B){B=B||this.renderer;var O="",E,H,X,ie=R.length;for(E=0;E<ie;E++){if(H=R[E],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[H.type]&&(X=this.options.extensions.renderers[H.type].call({parser:this},H),X!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(H.type))){O+=X||"";continue}switch(H.type){case"escape":{O+=B.text(H.text);break}case"html":{O+=B.html(H.text);break}case"link":{O+=B.link(H.href,H.title,this.parseInline(H.tokens,B));break}case"image":{O+=B.image(H.href,H.title,H.text);break}case"strong":{O+=B.strong(this.parseInline(H.tokens,B));break}case"em":{O+=B.em(this.parseInline(H.tokens,B));break}case"codespan":{O+=B.codespan(H.text);break}case"br":{O+=B.br();break}case"del":{O+=B.del(this.parseInline(H.tokens,B));break}case"text":{O+=B.text(H.text);break}default:{var we='Token with "'+H.type+'" type was not found.';if(this.options.silent){console.error(we);return}else throw new Error(we)}}}return O},M}(),vt=or,di=_e,Ot=Hn,Pt=_s,fi=Va,Gl=C,Wa=me.merge,Lg=me.checkSanitizeDeprecation,zs=me.escape,Gu=o.exports.getDefaults,Ag=o.exports.changeDefaults,Eg=o.exports.defaults;function rt(M,K,Q){if(typeof M>"u"||M===null)throw new Error("marked(): input parameter is undefined or null");if(typeof M!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(M)+", string expected");if(typeof K=="function"&&(Q=K,K=null),K=Wa({},rt.defaults,K||{}),Lg(K),Q){var R=K.highlight,B;try{B=vt.lex(M,K)}catch(X){return Q(X)}var O=function(ie){var we;if(!ie)try{K.walkTokens&&rt.walkTokens(B,K.walkTokens),we=di.parse(B,K)}catch(Fe){ie=Fe}return K.highlight=R,ie?Q(ie):Q(null,we)};if(!R||R.length<3||(delete K.highlight,!B.length))return O();var E=0;rt.walkTokens(B,function(X){X.type==="code"&&(E++,setTimeout(function(){R(X.text,X.lang,function(ie,we){if(ie)return O(ie);we!=null&&we!==X.text&&(X.text=we,X.escaped=!0),E--,E===0&&O()})},0))}),E===0&&O();return}try{var H=vt.lex(M,K);return K.walkTokens&&rt.walkTokens(H,K.walkTokens),di.parse(H,K)}catch(X){if(X.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+zs(X.message+"",!0)+"</pre>";throw X}}rt.options=rt.setOptions=function(M){return Wa(rt.defaults,M),Ag(rt.defaults),rt},rt.getDefaults=Gu,rt.defaults=Eg,rt.use=function(){for(var M=this,K=arguments.length,Q=new Array(K),R=0;R<K;R++)Q[R]=arguments[R];var B=Wa.apply(void 0,[{}].concat(Q)),O=rt.defaults.extensions||{renderers:{},childTokens:{}},E;Q.forEach(function(H){if(H.extensions&&(E=!0,H.extensions.forEach(function(ie){if(!ie.name)throw new Error("extension name required");if(ie.renderer){var we=O.renderers?O.renderers[ie.name]:null;we?O.renderers[ie.name]=function(){for(var Fe=arguments.length,He=new Array(Fe),qe=0;qe<Fe;qe++)He[qe]=arguments[qe];var ge=ie.renderer.apply(this,He);return ge===!1&&(ge=we.apply(this,He)),ge}:O.renderers[ie.name]=ie.renderer}if(ie.tokenizer){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");O[ie.level]?O[ie.level].unshift(ie.tokenizer):O[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?O.startBlock?O.startBlock.push(ie.start):O.startBlock=[ie.start]:ie.level==="inline"&&(O.startInline?O.startInline.push(ie.start):O.startInline=[ie.start]))}ie.childTokens&&(O.childTokens[ie.name]=ie.childTokens)})),H.renderer&&function(){var ie=rt.defaults.renderer||new Pt,we=function(qe){var ge=ie[qe];ie[qe]=function(){for(var Re=arguments.length,Ui=new Array(Re),Ct=0;Ct<Re;Ct++)Ui[Ct]=arguments[Ct];var $n=H.renderer[qe].apply(ie,Ui);return $n===!1&&($n=ge.apply(ie,Ui)),$n}};for(var Fe in H.renderer)we(Fe);B.renderer=ie}(),H.tokenizer&&function(){var ie=rt.defaults.tokenizer||new Ot,we=function(qe){var ge=ie[qe];ie[qe]=function(){for(var Re=arguments.length,Ui=new Array(Re),Ct=0;Ct<Re;Ct++)Ui[Ct]=arguments[Ct];var $n=H.tokenizer[qe].apply(ie,Ui);return $n===!1&&($n=ge.apply(ie,Ui)),$n}};for(var Fe in H.tokenizer)we(Fe);B.tokenizer=ie}(),H.walkTokens){var X=rt.defaults.walkTokens;B.walkTokens=function(ie){H.walkTokens.call(M,ie),X&&X(ie)}}E&&(B.extensions=O),rt.setOptions(B)})},rt.walkTokens=function(M,K){for(var Q=function(){var E=B.value;switch(K(E),E.type){case"table":{for(var H=r(E.header),X;!(X=H()).done;){var ie=X.value;rt.walkTokens(ie.tokens,K)}for(var we=r(E.rows),Fe;!(Fe=we()).done;)for(var He=Fe.value,qe=r(He),ge;!(ge=qe()).done;){var Re=ge.value;rt.walkTokens(Re.tokens,K)}break}case"list":{rt.walkTokens(E.items,K);break}default:rt.defaults.extensions&&rt.defaults.extensions.childTokens&&rt.defaults.extensions.childTokens[E.type]?rt.defaults.extensions.childTokens[E.type].forEach(function(Ui){rt.walkTokens(E[Ui],K)}):E.tokens&&rt.walkTokens(E.tokens,K)}},R=r(M),B;!(B=R()).done;)Q()},rt.parseInline=function(M,K){if(typeof M>"u"||M===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof M!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(M)+", string expected");K=Wa({},rt.defaults,K||{}),Lg(K);try{var Q=vt.lexInline(M,K);return K.walkTokens&&rt.walkTokens(Q,K.walkTokens),di.parseInline(Q,K)}catch(R){if(R.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+zs(R.message+"",!0)+"</pre>";throw R}},rt.Parser=di,rt.parser=di.parse,rt.Renderer=Pt,rt.TextRenderer=fi,rt.Lexer=vt,rt.lexer=vt.lex,rt.Tokenizer=Ot,rt.Slugger=Gl,rt.parse=rt;var za=rt;return za})})();ql.Parser;ql.parser;var H6e=ql.Renderer;ql.TextRenderer;ql.Lexer;ql.lexer;ql.Tokenizer;ql.Slugger;var U6e=ql.parse;function $6e(i,e={},t={}){var n;const s=new de;let r=!1;const o=s.add(new Ra),a=lF(e),l=function(p){let m;try{m=EM(decodeURIComponent(p))}catch{}return m?(m=Kxe(m,v=>{if(i.uris&&i.uris[v])return We.revive(i.uris[v])}),encodeURIComponent(JSON.stringify(m))):p},c=function(p,m){const v=i.uris&&i.uris[p];if(!v)return p;let b=We.revive(v);return m?p.startsWith(nt.data+":")?p:vY.asBrowserUri(b).toString(!0):We.parse(p).toString()===b.toString()?p:(b.query&&(b=b.with({query:l(b.query)})),b.toString())};let h;const u=new Promise(p=>h=p),d=new H6e;if(d.image=(p,m,v)=>{let b=[],w=[];if(p){({href:p,dimensions:b}=_Oe(p)),p=c(p,!0);try{const y=We.parse(p);e.baseUrl&&y.scheme===nt.file&&(p=D7(e.baseUrl,p).toString())}catch{}w.push(`src="${p}"`)}return v&&w.push(`alt="${v}"`),m&&w.push(`title="${m}"`),b.length&&(w=w.concat(b)),"<img "+w.join(" ")+">"},d.link=(p,m,v)=>(p===v&&(v=pI(v)),p=c(p,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(p)||(p=D7(e.baseUrl,p).toString())),m=pI(m),p=pI(p),!p||p.match(/^data:|javascript:/i)||p.match(/^command:/i)&&!i.isTrusted||p.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?v:(p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${p}" title="${m||p}">${v}</a>`)),d.paragraph=p=>`<p>${p}</p>`,e.codeBlockRenderer&&(d.code=(p,m)=>{const v=e.codeBlockRenderer(m,p),b=tee.nextId();return _Y(Promise.all([v,u]),o.token).then(w=>{var y;if(!r&&w){const x=a.querySelector(`div[data-code="${b}"]`);x&&Mw(x,w[0]),(y=e.asyncRenderCallback)===null||y===void 0||y.call(e)}}).catch(()=>{}),`<div class="code" data-code="${b}">${S5(p)}</div>`}),e.actionHandler){const p=e.actionHandler.disposables.add(new Vt(a,"click")),m=e.actionHandler.disposables.add(new Vt(a,"auxclick"));e.actionHandler.disposables.add(Le.any(p.event,m.event)(v=>{const b=new Ur(v);if(!b.leftButton&&!b.middleButton)return;let w=b.target;if(!(w.tagName!=="A"&&(w=w.parentElement,!w||w.tagName!=="A")))try{const y=w.dataset.href;y&&e.actionHandler.callback(y,b)}catch(y){Ze(y)}finally{b.preventDefault()}}))}i.supportHtml||(t.sanitizer=p=>(i.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:"",t.sanitize=!0,t.silent=!0),t.renderer=d;let f=(n=i.value)!==null&&n!==void 0?n:"";f.length>1e5&&(f=`${f.substr(0,1e5)}…`),i.supportThemeIcons&&(f=w3e(f));let g=U6e(f,t);if(i.supportThemeIcons&&(g=lm(g).map(m=>typeof m=="string"?m:m.outerHTML).join("")),a.innerHTML=j6e(i,g),h(),e.asyncRenderCallback)for(const p of a.getElementsByTagName("img")){const m=s.add(ne(p,"load",()=>{m.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,o.cancel(),s.dispose()}}}function j6e(i,e){const{config:t,allowedSchemes:n}=q6e(i);dH("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}});const s=document.createElement("a");dH("afterSanitizeAttributes",r=>{for(const o of["href","src"])r.hasAttribute(o)&&(s.href=r.getAttribute(o),n.includes(s.protocol.replace(/:$/,""))||r.removeAttribute(o))});try{return z6e(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{fH("uponSanitizeAttribute"),fH("afterSanitizeAttributes")}}function q6e(i){const e=[nt.http,nt.https,nt.mailto,nt.data,nt.file,nt.vscodeFileResource,nt.vscodeRemote,nt.vscodeRemoteResource];return i.isTrusted&&e.push(nt.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var G6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},K6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},RI;let Kf=class mte{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new z,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new de;return{element:s.add($6e(e,Object.assign(Object.assign({},this._getRenderOptions(e,s)),t),n)).element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,s)=>K6e(this,void 0,void 0,function*(){var r,o,a,l;let c;n?c=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(c=(r=this._options.editor.getModel())===null||r===void 0?void 0:r.getLanguageId()),c||(c="plaintext"),this._modeService.triggerMode(c);const h=(o=yield Li.getPromise(c))!==null&&o!==void 0?o:void 0,u=document.createElement("span");if(u.innerHTML=(l=(a=mte._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(s,this._modeService.languageIdCodec,h))!==null&&l!==void 0?l:tJ(s,this._modeService.languageIdCodec,h),this._options.editor){const d=this._options.editor.getOption(43);Vn.applyFontInfoSlow(u,d)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return u}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ze),disposables:t}}}};Kf._ttpTokenizer=(RI=window.trustedTypes)===null||RI===void 0?void 0:RI.createPolicy("tokenizeToString",{createHTML(i,e,t){return tJ(i,e,t)}});Kf=G6e([gH(1,Fs),gH(2,yu)],Kf);function _te(i,e,t){const s=Hv.ordered(i).map(r=>Promise.resolve(r.provideHover(i,e,t)).then(o=>o&&Z6e(o)?o:void 0,o=>{Wo(o)}));return Promise.all(s).then(vL)}F0("_executeHoverProvider",(i,e)=>_te(i,e,ei.None));function Z6e(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var Y6e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Q6e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const pH=ue;class CC{constructor(e,t,n){this.owner=e,this.range=t,this.contents=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let R3=class{constructor(e,t,n,s,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=s,this._configurationService=r}createLoadingMessage(e){return new CC(this,e.range,[new Zm().appendText(_("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const h of t){const u=h.range.startLineNumber===s?h.range.startColumn:1,d=h.range.endLineNumber===s?h.range.endColumn:r,f=h.options.hoverMessage;if(!f||Kb(f))continue;const g=new F(e.range.startLineNumber,u,e.range.startLineNumber,d);o.push(new CC(this,g,bQ(f)))}const a=n.getLineLength(s),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});return typeof c=="number"&&a>=c&&o.push(new CC(this,e.range,[{value:_("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),o}computeAsync(e,t,n){return Q6e(this,void 0,void 0,function*(){if(!this._editor.hasModel()||e.type!==1)return Promise.resolve([]);const s=this._editor.getModel();if(!Hv.has(s))return Promise.resolve([]);const r=yield _te(s,new q(e.range.startLineNumber,e.range.startColumn),n),o=[];for(const a of r){if(Kb(a.contents))continue;const l=a.range?F.lift(a.range):e.range;o.push(new CC(this,l,a.contents))}return o})}renderHoverParts(e,t,n){const s=new de;for(const r of e)for(const o of r.contents){if(Kb(o))continue;const a=pH("div.hover-row.markdown-hover"),l=se(a,pH("div.hover-contents")),c=s.add(new Kf({editor:this._editor},this._modeService,this._openerService));s.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const h=s.add(c.render(o));l.appendChild(h.element),t.appendChild(a)}return s}};R3=Y6e([OI(2,Fs),OI(3,yu),OI(4,Wi)],R3);class Tt{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+Tt.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new Tt(this.value+Tt.sep+e)}}Tt.sep=".";Tt.None=new Tt("@@none@@");Tt.Empty=new Tt("");Tt.QuickFix=new Tt("quickfix");Tt.Refactor=new Tt("refactor");Tt.Source=new Tt("source");Tt.SourceOrganizeImports=Tt.Source.append("organizeImports");Tt.SourceFixAll=Tt.Source.append("fixAll");function X6e(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>bte(e,t,i.include))||!i.includeSourceActions&&Tt.Source.contains(e))}function J6e(i,e){const t=e.kind?new Tt(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>bte(t,n,i.include))||!i.includeSourceActions&&t&&Tt.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function bte(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class Sd{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Sd(t.kind,t.apply,!1):new Sd(Sd.getKindFromUser(e,t.kind),Sd.getApplyFromUser(e,t.apply),Sd.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Tt(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var SF=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const e8e="editor.action.codeAction",t8e="editor.action.refactor",i8e="editor.action.sourceAction",vte="editor.action.organizeImports",wte="editor.action.fixAll";class yte{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return SF(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(s){Wo(s)}n&&(this.action.edit=n.edit)}return this})}}class xF extends te{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(xF.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:El(e.diagnostics)?El(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:El(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Tt.QuickFix.contains(new Tt(e.kind))&&!!e.isPreferred)}}const mH={actions:[],documentation:void 0};function DF(i,e,t,n,s){var r;const o=t.filter||{},a={only:(r=o.include)===null||r===void 0?void 0:r.value,trigger:t.type},l=new NMe(i,s),c=n8e(i,o),h=new de,u=c.map(f=>SF(this,void 0,void 0,function*(){try{n.report(f);const g=yield f.provideCodeActions(i,e,a,l.token);if(g&&h.add(g),l.token.isCancellationRequested)return mH;const p=((g==null?void 0:g.actions)||[]).filter(v=>v&&J6e(o,v)),m=s8e(f,p,o.include);return{actions:p.map(v=>new yte(v,f)),documentation:m}}catch(g){if(ju(g))throw g;return Wo(g),mH}})),d=Ll.onDidChange(()=>{const f=Ll.all(i);Al(f,c)||l.cancel()});return Promise.all(u).then(f=>{const g=z5(f.map(m=>m.actions)),p=vL(f.map(m=>m.documentation));return new xF(g,p,h)}).finally(()=>{d.dispose(),l.dispose()})}function n8e(i,e){return Ll.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>X6e(e,new Tt(n))):!0)}function s8e(i,e,t){if(!i.documentation)return;const n=i.documentation.map(s=>({kind:new Tt(s.kind),command:s.command}));if(t){let s;for(const r of n)r.kind.contains(t)&&(s?s.kind.contains(r.kind)&&(s=r):s=r);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const r of n)if(r.kind.contains(new Tt(s.kind)))return r.command}}Nt.registerCommand("_executeCodeActionProvider",function(i,e,t,n,s){return SF(this,void 0,void 0,function*(){if(!(e instanceof We))throw Sl();const r=i.get(Ps).getModel(e);if(!r)throw Sl();const o=Ve.isISelection(t)?Ve.liftSelection(t):F.isIRange(t)?r.validateRange(t):void 0;if(!o)throw Sl();const a=typeof n=="string"?new Tt(n):void 0,l=yield DF(r,o,{type:1,filter:{includeSourceActions:!0,include:a}},GL.None,ei.None),c=[],h=Math.min(l.validActions.length,typeof s=="number"?s:0);for(let u=0;u<h;u++)c.push(l.validActions[u].resolve(ei.None));try{return yield Promise.all(c),l.validActions.map(u=>u.action)}finally{setTimeout(()=>l.dispose(),100)}})});class XD{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var r8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_H=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},o8e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class bH extends Mo{constructor(e,t){super(e.command?e.command.id:e.title,a8e(e.title),void 0,!e.disabled,t),this.action=e}}function a8e(i){return i.replace(/\r\n|\r|\n/g," ")}let O3=class extends te{constructor(e,t,n,s){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Er),this._keybindingResolver=new w2({getKeybindings:()=>s.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,s){return o8e(this,void 0,void 0,function*(){const r=s.includeDisabledActions?t.allActions:t.validActions;if(!r.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,E0();this._visible=!0,this._showingActions.value=t;const o=this.getMenuActions(e,r,t.documentation),a=q.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),c=this._editor.getOption(113);this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>o,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof bH?l(h.action):void 0})})}getMenuActions(e,t,n){var s,r;const o=h=>new bH(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(o),l=[...n],c=this._editor.getModel();if(c&&a.length)for(const h of Ll.all(c))h._getAdditionalMenuItems&&l.push(...h._getAdditionalMenuItems({trigger:e.type,only:(r=(s=e.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},t.map(u=>u.action)));return l.length&&a.push(new da,...l.map(h=>o(new yte({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Rn(this._editor.getDomNode()),s=n.left+t.left,r=n.top+t.top+t.height;return{x:s,y:r}}};O3=r8e([_H(2,mg),_H(3,zi)],O3);class w2{constructor(e){this._keybindingProvider=e}getResolver(){const e=new XD(()=>this._keybindingProvider.getKeybindings().filter(t=>w2.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===vte?n={kind:Tt.SourceOrganizeImports.value}:t.command===wte&&(n={kind:Tt.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Sd.fromUser(n,{kind:Tt.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Tt(e.kind);return t.filter(s=>s.kind.contains(n)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,r)=>s?s.kind.contains(r.kind)?r:s:r,void 0)}}w2.codeActionCommands=[t8e,e8e,i8e,vte,wte];var l8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},c8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Qb;(function(i){i.Hidden={type:0};class e{constructor(n,s,r,o){this.actions=n,this.trigger=s,this.editorPosition=r,this.widgetPosition=o,this.type=1}}i.Showing=e})(Qb||(Qb={}));let JD=class Cte extends te{constructor(e,t,n,s){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=s,this._onClick=this._register(new z),this.onClick=this._onClick.event,this._state=Qb.Hidden,this._domNode=document.createElement("div"),this._domNode.className=be.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{const o=this._editor.getModel();(this.state.type!==1||!o||this.state.editorPosition.lineNumber>=o.getLineCount())&&this.hide()})),At.ignoreTarget(this._domNode),this._register(qSe(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();const{top:o,height:a}=Rn(this._domNode),l=this._editor.getOption(58);let c=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=l),this._onClick.fire({x:r.posx,y:o+a+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(ne(this._domNode,"mouseenter",r=>{if((r.buttons&1)!==1)return;this.hide();const o=new fg;o.startMonitoring(r.target,r.buttons,B0,()=>{},()=>{o.dispose()})})),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const s=this._editor.getOptions();if(!s.get(56).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:o,column:a}=r.validatePosition(n),l=r.getOptions().tabSize,c=s.get(43),h=r.getLineContent(o),u=Zr.computeIndentLevel(h,l),d=c.spaceWidth*u>22,f=p=>p>2&&this._editor.getTopForLineNumber(p)===this._editor.getTopForLineNumber(p-1);let g=o;if(!d){if(o>1&&!f(o-1))g-=1;else if(!f(o+1))g+=1;else if(a*c.spaceWidth<22)return this.hide()}this.state=new Qb.Showing(e,t,n,{position:{lineNumber:g,column:1},preference:Cte._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=Qb.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...be.lightBulb.classNamesArray),this._domNode.classList.add(...be.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=_("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(...be.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...be.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=_("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=_("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};JD._posPref=[0];JD=l8e([c8e(3,zi)],JD);ti((i,e)=>{var t;const n=(t=i.getColor(jr))===null||t===void 0?void 0:t.transparent(.7),s=i.getColor(mEe);s&&e.addRule(`
		.monaco-editor .contentWidgets ${be.lightBulb.cssSelector} {
			color: ${s};
			background-color: ${n};
		}`);const r=i.getColor(_Ee);r&&e.addRule(`
		.monaco-editor .contentWidgets ${be.lightbulbAutofix.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`)});var h8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},u8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PI=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},d8e=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},f8e=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},IS;let P3=class extends te{constructor(e,t,n,s,r){super(),this._editor=e,this.delegate=s,this._activeCodeActions=this._register(new Er),IS.set(this,!1),this._codeActionWidget=new XD(()=>this._register(r.createInstance(O3,this._editor,{onSelectCodeAction:o=>PI(this,void 0,void 0,function*(){this.delegate.applyCodeAction(o,!0)})}))),this._lightBulbWidget=new XD(()=>{const o=this._register(r.createInstance(JD,this._editor,t,n));return this._register(o.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),o})}dispose(){d8e(this,IS,!0,"f"),super.dispose()}update(e){var t,n,s;return PI(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let r;try{r=yield e.actions}catch(o){Ze(o);return}if(!f8e(this,IS,"f"))if(this._lightBulbWidget.getValue().update(r,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,r);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{r.dispose()}return}if(e.trigger.context){const l=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,r);if(l&&l.action.disabled){Po.get(this._editor).showMessage(l.action.disabled,e.trigger.context.position),r.dispose();return}}}const o=!!(!((s=e.trigger.filter)===null||s===void 0)&&s.include);if(e.trigger.context&&(!r.allActions.length||!o&&!r.validActions.length)){Po.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=r,r.dispose();return}this._activeCodeActions.value=r,this._codeActionWidget.getValue().show(e.trigger,r,e.position,{includeDisabledActions:o})}else this._codeActionWidget.getValue().isVisible?r.dispose():this._activeCodeActions.value=r})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,s){return PI(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,s)})}};IS=new WeakMap;P3=h8e([u8e(4,zt)],P3);var FI=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},g8e=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t},dp;const Ste=new De("supportedCodeAction","");class p8e extends te{constructor(e,t,n,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=s,this._autoTriggerTimer=this._register(new Os),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>FY(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const s=t.validateRange(n);if(F.intersectRanges(s,e))return F.lift(s)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:s,column:r}=n.getPosition(),o=t.getLineContent(s);if(o.length===0)return;if(r===1){if(/\s/.test(o[0]))return}else if(r===t.getLineMaxColumn(s)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[r-2])&&/\s/.test(o[r-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const s=this._getRangeOfMarker(t),r=s?s.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:r};return this._signalChange(o),o}}var xd;(function(i){i.Empty={type:0};class e{constructor(n,s,r,o){this.trigger=n,this.rangeOrSelection=s,this.position=r,this._cancellablePromise=o,this.type=1,this.actions=o.catch(a=>{if(ju(a))return m8e;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(xd||(xd={}));const m8e={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class _8e extends te{constructor(e,t,n,s){super(),this._editor=e,this._markerService=t,this._progressService=s,this._codeActionOracle=this._register(new Er),this._state=xd.Empty,this._onDidChangeState=this._register(new z),this.onDidChangeState=this._onDidChangeState.event,dp.set(this,!1),this._supportedCodeActions=Ste.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(Ll.onDidChange(()=>this._update())),this._update()}dispose(){FI(this,dp,"f")||(g8e(this,dp,!0,"f"),super.dispose(),this.setState(xd.Empty,!0))}_update(){if(FI(this,dp,"f"))return;this._codeActionOracle.value=void 0,this.setState(xd.Empty);const e=this._editor.getModel();if(e&&Ll.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of Ll.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new p8e(this._editor,this._markerService,n=>{var s;if(!n){this.setState(xd.Empty);return}const r=Ir(o=>DF(e,n.selection,n.trigger,GL.None,o));n.trigger.type===1&&((s=this._progressService)===null||s===void 0||s.showWhile(r,250)),this.setState(new xd.Triggered(n.trigger,n.selection,n.position,r))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!FI(this,dp,"f")&&this._onDidChangeState.fire(e))}}dp=new WeakMap;var b8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},SC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};function v8e(i){return xe.regex(Ste.keys()[0],new RegExp("(\\s|^)"+Ca(i.value)+"\\b"))}_("args.schema.kind","Kind of the code action to run."),_("args.schema.apply","Controls when the returned actions are applied."),_("args.schema.apply.first","Always apply the first returned code action."),_("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),_("args.schema.apply.never","Do not apply the returned code actions."),_("args.schema.preferred","Controls if only preferred code actions should be returned.");let O1=class Dte extends te{constructor(e,t,n,s,r){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new _8e(this._editor,t,n,s)),this._register(this._model.onDidChangeState(o=>this.update(o))),this._ui=new XD(()=>this._register(new P3(e,Jw.Id,y2.Id,{applyCodeAction:(o,a)=>xte(this,void 0,void 0,function*(){try{yield this._applyCodeAction(o)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Dte.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Po.get(this._editor).closeMessage();const s=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(w8e,e,this._editor)}};O1.ID="editor.contrib.quickFixController";O1=b8e([SC(1,qw),SC(2,$e),SC(3,U0),SC(4,zt)],O1);function w8e(i,e,t){return xte(this,void 0,void 0,function*(){const n=i.get(LQ),s=i.get(yn),r=i.get(P0),o=i.get(zn);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(ei.None),e.action.edit&&(yield n.apply(G5.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield s.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=y8e(a);o.error(typeof l=="string"?l:_("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function y8e(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function kte(i,e,t,n){if(i.hasModel()){const s=O1.get(i);s&&s.manualTriggerAtCurrentPosition(e,t,n)}}class Jw extends _i{constructor(){super({id:Jw.Id,label:_("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:xe.and(G.writable,G.hasCodeActionsProvider),kbOpts:{kbExpr:G.editorTextFocus,primary:2132,weight:100}})}run(e,t){return kte(t,_("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}Jw.Id="editor.action.quickFix";class y2 extends _i{constructor(){super({id:y2.Id,label:_("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:xe.and(G.writable,v8e(Tt.QuickFix)),kbOpts:{kbExpr:G.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return kte(t,_("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Tt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}y2.Id="editor.action.autoFix";var Lte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ate=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class vH{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let F3=class Ete{constructor(e,t){this._markerService=t,this._onDidChange=new z,this.onDidChange=this._onDidChange.event,this._dispoables=new de,this._markers=[],this._nextIdx=-1,We.isUri(e)?this._resourceFilter=s=>s.toString()===e.toString():e&&(this._resourceFilter=e);const n=()=>{this._markers=this._markerService.read({resource:We.isUri(e)?e:void 0,severities:hi.Error|hi.Warning|hi.Info}),typeof e=="function"&&(this._markers=this._markers.filter(s=>this._resourceFilter(s.resource))),this._markers.sort(Ete._compareMarker)};n(),this._dispoables.add(t.onMarkerChanged(s=>{(!this._resourceFilter||s.some(r=>this._resourceFilter(r)))&&(n(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new vH(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let s=!1,r=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());r<0&&(r=W5(this._markers,{resource:e.uri},(o,a)=>Vv(o.resource.toString(),a.resource.toString())),r<0&&(r=~r));for(let o=r;o<this._markers.length;o++){let a=F.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new F(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,s=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let n=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(F.containsPosition(this._markers[n],t))return new vH(this._markers[n],n+1,this._markers.length)}}static _compareMarker(e,t){let n=Vv(e.resource.toString(),t.resource.toString());return n===0&&(n=hi.compare(e.severity,t.severity)),n===0&&(n=F.compareRangesUsingStarts(e,t)),n}};F3=Lte([Ate(1,qw)],F3);const Ite=bt("IMarkerNavigationService");let B3=class{constructor(e){this._markerService=e,this._provider=new wr}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new F3(e,this._markerService)}};B3=Lte([Ate(0,qw)],B3);cg(Ite,B3,!0);var V3;(function(i){function e(t){switch(t){case Ci.Ignore:return"severity-ignore "+be.info.classNames;case Ci.Info:return be.info.classNames;case Ci.Warning:return be.warning.classNames;case Ci.Error:return be.error.classNames;default:return""}}i.className=e})(V3||(V3={}));ti((i,e)=>{const t=i.getColor(rIe);if(t){const r=be.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.text-search-provider-messages .providerMessage ${r},
			.extensions-viewlet > .extensions ${r} {
				color: ${t};
			}
		`)}const n=i.getColor(oIe);if(n){const r=be.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.extension-editor ${r},
			.text-search-provider-messages .providerMessage ${r},
			.preferences-editor ${r} {
				color: ${n};
			}
		`)}const s=i.getColor(aIe);if(s){const r=be.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${r},
			.markers-panel .marker-icon${r},
			.extensions-viewlet > .extensions ${r},
			.text-search-provider-messages .providerMessage ${r},
			.extension-editor ${r} {
				color: ${s};
			}
		`)}});var C8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Jg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class S8e{constructor(e,t,n,s,r){this._openerService=s,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new de,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(tn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new xP(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){lt(this._disposables)}update(e){const{source:t,message:n,relatedInformation:s,code:r}=e;let o=((t==null?void 0:t.length)||0)+2;r&&(typeof r=="string"?o+=r.length:o+=r.value.length);const a=Nl(n);this._lines=a.length,this._longestLineLength=0;for(const d of a)this._longestLineLength=Math.max(d.length+o,this._longestLineLength);Pn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const d of a)l=document.createElement("div"),l.innerText=d,d===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){const d=document.createElement("span");if(d.classList.add("details"),l.appendChild(d),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),d.appendChild(f)}if(r)if(typeof r=="string"){const f=document.createElement("span");f.innerText=`(${r})`,f.classList.add("code"),d.appendChild(f)}else{this._codeLink=ue("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(r.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=se(this._codeLink,ue("span"));f.innerText=r.value,d.appendChild(this._codeLink)}}if(Pn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),El(s)){const d=this._relatedBlock.appendChild(document.createElement("div"));d.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const f of s){let g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${qee(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);let m=document.createElement("span");m.innerText=f.message,g.appendChild(p),g.appendChild(m),this._lines+=1,d.appendChild(g)}}const c=this._editor.getOption(43),h=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case hi.Error:t=_("Error","Error");break;case hi.Warning:t=_("Warning","Warning");break;case hi.Info:t=_("Info","Info");break;case hi.Hint:t=_("Hint","Hint");break}let n=_("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(n=`${s.getLineContent(e.startLineNumber)}, ${n}`),n}}let i0=class Tte extends YD{constructor(e,t,n,s,r,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=n,this._menuService=s,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new de,this._onDidSelectRelatedInformation=new z,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=hi.Warning,this._backgroundColor=Z.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(L8e);let t=W3,n=x8e;this._severity===hi.Warning?(t=z3,n=D8e):this._severity===hi.Info&&(t=H3,n=k8e);const s=e.getColor(t),r=e.getColor(n);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:r,primaryHeadingColor:e.getColor(Uee),secondaryHeadingColor:e.getColor($ee)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(s=>this.editor.focus()));const t=[],n=this._menuService.createMenu(Tte.TitleMenu,this._contextKeyService);IBe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=se(e,ue(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new S8e(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let s=F.lift(e);const r=this.editor.getPosition();let o=r&&s.containsPosition(r)?r:s.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?_("problems","{0} of {1} problems",t,n):_("change","{0} of {1} problem",t,n);this.setTitle(Sa(a.uri),l)}this._icon.className=`codicon ${V3.className(hi.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};i0.TitleMenu=new Ue("gotoErrorTitleMenu");i0=C8e([Jg(1,oi),Jg(2,yu),Jg(3,O0),Jg(4,zt),Jg(5,$e),Jg(6,Hw)],i0);let wH=e1(Wb,SX),yH=e1(Bc,VL),CH=e1(pa,bP);const W3=V("editorMarkerNavigationError.background",{dark:wH,light:wH,hc:Vi},_("editorMarkerNavigationError","Editor marker navigation widget error color.")),x8e=V("editorMarkerNavigationError.headerBackground",{dark:qt(W3,.1),light:qt(W3,.1),hc:null},_("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),z3=V("editorMarkerNavigationWarning.background",{dark:yH,light:yH,hc:Vi},_("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),D8e=V("editorMarkerNavigationWarning.headerBackground",{dark:qt(z3,.1),light:qt(z3,.1),hc:"#0C141F"},_("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),H3=V("editorMarkerNavigationInfo.background",{dark:CH,light:CH,hc:Vi},_("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),k8e=V("editorMarkerNavigationInfo.headerBackground",{dark:qt(H3,.1),light:qt(H3,.1),hc:null},_("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),L8e=V("editorMarkerNavigation.background",{dark:jr,light:jr,hc:jr},_("editorMarkerNavigationBackground","Editor marker navigation widget background."));ti((i,e)=>{const t=i.getColor(FL);t&&e.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${t}; }`);const n=i.getColor(BL);n&&e.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)});var A8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Nte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let Mu=class TS{constructor(e,t,n,s,r){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=s,this._instantiationService=r,this._sessionDispoables=new de,this._editor=e,this._widgetVisible=Mte.bindTo(this._contextKeyService)}static get(e){return e.getContribution(TS.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(i0,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var s,r,o;(!(!((s=this._model)===null||s===void 0)&&s.selected)||!F.containsPosition((r=this._model)===null||r===void 0?void 0:r.selected.marker,n.position))&&((o=this._model)===null||o===void 0||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:F.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new q(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return Nte(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);s&&(TS.get(s).close(),TS.get(s).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};Mu.ID="editor.contrib.markerController";Mu=A8e([xC(1,Ite),xC(2,$e),xC(3,si),xC(4,zt)],Mu);class C2 extends _i{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return Nte(this,void 0,void 0,function*(){t.hasModel()&&Mu.get(t).nagivate(this._next,this._multiFile)})}}class Wc extends C2{constructor(){super(!0,!1,{id:Wc.ID,label:Wc.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:578,weight:100},menuOpts:{menuId:i0.TitleMenu,title:Wc.LABEL,icon:is("marker-navigation-next",be.arrowDown,_("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}Wc.ID="editor.action.marker.next";Wc.LABEL=_("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class n0 extends C2{constructor(){super(!1,!1,{id:n0.ID,label:n0.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:1602,weight:100},menuOpts:{menuId:i0.TitleMenu,title:Wc.LABEL,icon:is("marker-navigation-previous",be.arrowUp,_("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}n0.ID="editor.action.marker.prev";n0.LABEL=_("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class E8e extends C2{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:_("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:66,weight:100},menuOpts:{menuId:Ue.MenubarGoMenu,title:_({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class I8e extends C2{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:_("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:G.focus,primary:1090,weight:100},menuOpts:{menuId:Ue.MenubarGoMenu,title:_({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Bs(Mu.ID,Mu);ot(Wc);ot(n0);ot(E8e);ot(I8e);const Mte=new De("markersNavigationVisible",!1),T8e=Qr.bindToContribution(Mu.get);pe(new T8e({id:"closeMarkersNavigation",precondition:Mte,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:G.focus,primary:9,secondary:[1033]}}));var N8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},SH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const ao=ue;class M8e{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const xH={type:1,filter:{include:Tt.QuickFix}};let U3=class{constructor(e,t,n,s){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=s,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),s=e.range.startLineNumber,r=n.getLineMaxColumn(s),o=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:r,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const u=new F(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new M8e(this,u,h))}return o}renderHoverParts(e,t,n){if(!e.length)return te.None;const s=new de;e.forEach(o=>t.appendChild(this.renderMarkerHover(o,s)));const r=e.length===1?e[0]:e.sort((o,a)=>hi.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(r,n,s),s}renderMarkerHover(e,t){const n=ao("div.hover-row"),s=se(n,ao("div.marker.hover-contents")),{source:r,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=se(s,ao("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,r||a)if(a&&typeof a!="string"){const h=ao("span");if(r){const g=se(h,ao("span"));g.innerText=r}const u=se(h,ao("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(ne(u,"click",g=>{this._openerService.open(a.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()}));const d=se(u,ao("span"));d.innerText=a.value;const f=se(s,h);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{const h=se(s,ao("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=r&&a?`${r}(${a})`:r||`(${a})`}if(El(l))for(const{message:h,resource:u,startLineNumber:d,startColumn:f}of l){const g=se(s,ao("div"));g.style.marginTop="8px";const p=se(g,ao("a"));p.innerText=`${Sa(u)}(${d}, ${f}): `,p.style.cursor="pointer",t.add(ne(p,"click",v=>{v.stopPropagation(),v.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:d,startColumn:f}}}).catch(Ze)}));const m=se(g,ao("span"));m.innerText=h,this._editor.applyFontInfo(m)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===hi.Error||e.marker.severity===hi.Warning||e.marker.severity===hi.Info)&&t.addAction({label:_("view problem","View Problem"),commandId:Wc.ID,run:()=>{this._hover.hide(),Mu.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const s=t.append(ao("div"));this.recentMarkerCodeActionsInfo&&(GD.makeKey(this.recentMarkerCodeActionsInfo.marker)===GD.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=_("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?te.None:n.add(Em(()=>s.textContent=_("checkingForQuickFixes","Checking for quick fixes..."),200));s.textContent||(s.textContent=String.fromCharCode(160));const o=this.getCodeActions(e.marker);n.add(pt(()=>o.cancel())),o.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=_("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;n.add(pt(()=>{l||a.dispose()})),t.addAction({label:_("quick fixes","Quick Fix..."),commandId:Jw.Id,run:c=>{l=!0;const h=O1.get(this._editor),u=Rn(c);this._hover.hide(),h.showCodeActions(xH,a,{x:u.left+6,y:u.top+u.height+6})}})},Ze)}}getCodeActions(e){return Ir(t=>DF(this._editor.getModel(),new F(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),xH,GL.None,t))}};U3=N8e([SH(2,J5),SH(3,yu)],U3);ti((i,e)=>{const t=i.getColor(FL);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(BL);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const Rte="editor.action.inlineSuggest.commit";class Ote{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return O8e(n,this.parts.map(r=>({range:{startLineNumber:1,endLineNumber:1,startColumn:r.column,endColumn:r.column},text:r.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class R8e{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function O8e(i,e){const t=new R8e(i),n=e.map(s=>{const r=F.lift(s.range);return{startOffset:t.getOffset(r.getStartPosition()),endOffset:t.getOffset(r.getEndPosition()),text:s.text}});n.sort((s,r)=>r.startOffset-s.startOffset);for(const s of n)i=i.substring(0,s.startOffset)+s.text+i.substring(s.endOffset);return i}class DH{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class Pte extends te{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function P8e(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function Fte(i,e,t,n,s=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const r=e.getLineContent(i.range.startLineNumber),o=Zi(r).length;if(i.range.startColumn-1<=o){const f=Zi(i.text).length,g=r.substring(i.range.startColumn-1,o),p=F.fromPositions(i.range.getStartPosition().delta(0,g.length),i.range.getEndPosition()),m=i.text.startsWith(g)?i.text.substring(g.length):i.text.substring(f);i={range:p,text:m,command:i.command}}const l=e.getValueInRange(i.range),c=F8e(l,i.text);if(!c)return;const h=i.range.startLineNumber,u=new Array;if(t==="prefix"){const f=c.filter(g=>g.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==l.length)return}const d=i.text.length-s;for(const f of c){const g=i.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&g<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;const p=f.modifiedStart+f.modifiedLength,m=Math.max(f.modifiedStart,Math.min(p,d)),v=i.text.substring(f.modifiedStart,m),b=i.text.substring(m,Math.max(f.modifiedStart,p));if(v.length>0){const w=Nl(v);u.push(new DH(g,w,!1))}if(b.length>0){const w=Nl(b);u.push(new DH(g,w,!0))}}return new Ote(h,u,0)}let Ya;function F8e(i,e){if((Ya==null?void 0:Ya.originalValue)===i&&(Ya==null?void 0:Ya.newValue)===e)return Ya==null?void 0:Ya.changes;{const t=B8e(i,e);return Ya={originalValue:i,newValue:e,changes:t},t}}function B8e(i,e){if(i.length>5e3||e.length>5e3)return;function t(l){let c=0;for(let h=0,u=l.length;h<u;h++){const d=l.charCodeAt(h);d>c&&(c=d)}return c}const n=Math.max(t(i),t(e));function s(l){if(l<0)throw new Error("unexpected");return n+l+1}function r(l){let c=0,h=0;const u=new Int32Array(l.length);for(let d=0,f=l.length;d<f;d++){const g=h*100+c;l[d]==="("?(u[d]=s(2*g),c++):l[d]===")"?(u[d]=s(2*g+1),c===1&&h++,c=Math.max(c-1,0)):u[d]=l.charCodeAt(d)}return u}const o=r(i),a=r(e);return new hl({getElements:()=>o},{getElements:()=>a}).ComputeDiff(!1).changes}var V8e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},W8e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Cc=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let $3=class extends te{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Er),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(s=>{new Set([iP.id,nP.id,zb.Tab.id,zb.DeleteLeft.id,zb.DeleteRight.id,Rte,"acceptSelectedSuggestion"]).has(s.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(s=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(s=>{this.session&&!this.session.isValid&&this.hide()})),this._register(pt(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Fr.Automatic))}trigger(e){if(this.completionSession.value){e===Fr.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new z8e(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Cc(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};$3=V8e([W8e(2,yn)],$3);class z8e extends Pte{constructor(e,t,n,s,r,o){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=s,this.cache=r,this.initialTriggerKind=o,this.minReservedLineCount=0,this.updateOperation=this._register(new Er),this.updateSoon=this._register(new mi(()=>{let l=this.initialTriggerKind;return this.initialTriggerKind=Fr.Automatic,this.update(l)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const l=this.currentCompletion;if(l&&l.sourceInlineCompletion!==a){a=l.sourceInlineCompletion;const c=l.sourceProvider;c.handleItemDidShow&&c.handleItemDidShow(l.sourceInlineCompletions,a)}})),this._register(pt(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(l=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(l=>{this.scheduleAutomaticUpdate()})),this._register(P5.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return Cc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return Cc(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return Cc(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Fr.Explicit?yield this.updateOperation.value.promise:yield this.update(Fr.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Fr.Explicit&&(yield this.update(Fr.Explicit))})}hasMultipleInlineCompletions(){var e;return Cc(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Fte(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return Cc(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=Ir(r=>Cc(this,void 0,void 0,function*(){let o;try{o=yield Vte(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r)}catch(a){Ze(a);return}r.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire())})),s=new Bte(n,e);this.updateOperation.value=s,yield n,this.updateOperation.value===s&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[Om.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Wo):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class Bte{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class H8e extends te{constructor(e,t,n,s){super(),this.triggerKind=s;const r=e.deltaDecorations([],t.items.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._register(pt(()=>{e.deltaDecorations(r,[])})),this.completions=t.items.map((o,a)=>new U8e(o,r[a])),this._register(e.onDidChangeModelContent(()=>{let o=!1;const a=e.getModel();for(const l of this.completions){const c=a.getDecorationRange(l.decorationId);if(!c){Ze(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(c)||(o=!0,l.synchronizedRange=c)}o&&n()})),this._register(t)}}class U8e{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function $8e(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new F(i.lineNumber,t.startColumn,i.lineNumber,n):F.fromPositions(i,i.with(void 0,n))}function Vte(i,e,t,n=ei.None){return Cc(this,void 0,void 0,function*(){const s=$8e(i,e),r=P5.all(e),o=yield Promise.all(r.map(l=>Cc(this,void 0,void 0,function*(){const c=yield l.provideInlineCompletions(e,i,t,n);return{completions:c,provider:l,dispose:()=>{c&&l.freeInlineCompletions(c)}}}))),a=new Map;for(const l of o){const c=l.completions;if(c)for(const h of c.items.map(u=>({text:u.text,range:u.range?F.lift(u.range):s,command:u.command,sourceProvider:l.provider,sourceInlineCompletions:c,sourceInlineCompletion:u})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const l of o)l.dispose()}}})}function ek(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=Wv(t,e.text),s=i.getOffsetAt(e.range.getStartPosition())+n,r=i.getPositionAt(s),o=t.substr(n),a=AM(o,e.text),l=i.getPositionAt(Math.max(s,i.getOffsetAt(e.range.getEndPosition())-a));return{range:F.fromPositions(r,l),text:e.text.substr(n,e.text.length-n-a)}}const gn=new Uint8Array(16),rs=[];for(let i=0;i<256;i++)rs.push(i.toString(16).padStart(2,"0"));let j3;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?j3=crypto.getRandomValues.bind(crypto):j3=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function j8e(){j3(gn),gn[6]=gn[6]&15|64,gn[8]=gn[8]&63|128;let i=0,e="";return e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e+="-",e+=rs[gn[i++]],e+=rs[gn[i++]],e+="-",e+=rs[gn[i++]],e+=rs[gn[i++]],e+="-",e+=rs[gn[i++]],e+=rs[gn[i++]],e+="-",e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e+=rs[gn[i++]],e}const kH="code-workspace";function LH(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&We.isUri(e.uri)}function q8e(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class G8e{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class K8e{constructor(e,t,n,s){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,s=r.multiline)}if(n&&s&&e.snippet){const r=this._model.getLineContent(this._selection.startLineNumber),o=Zi(r,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof Ks&&(a=Zi(Nl(c.value).pop())),!0));const l=Wv(a,o);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,h,u)=>`${h}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class Z8e{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Yd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Yd(this._model.uri.fsPath),s=n.lastIndexOf(".");return s<=0?n:n.slice(0,s)}else{if(t==="TM_DIRECTORY")return cY(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(I5(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class Y8e{constructor(e,t,n,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(s=>!IY(s));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class Q8e{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=Mi.getComments(n);if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}}class ml{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return ml.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return ml.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return ml.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return ml.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}ml.dayNames=[_("Sunday","Sunday"),_("Monday","Monday"),_("Tuesday","Tuesday"),_("Wednesday","Wednesday"),_("Thursday","Thursday"),_("Friday","Friday"),_("Saturday","Saturday")];ml.dayNamesShort=[_("SundayShort","Sun"),_("MondayShort","Mon"),_("TuesdayShort","Tue"),_("WednesdayShort","Wed"),_("ThursdayShort","Thu"),_("FridayShort","Fri"),_("SaturdayShort","Sat")];ml.monthNames=[_("January","January"),_("February","February"),_("March","March"),_("April","April"),_("May","May"),_("June","June"),_("July","July"),_("August","August"),_("September","September"),_("October","October"),_("November","November"),_("December","December")];ml.monthNamesShort=[_("JanuaryShort","Jan"),_("FebruaryShort","Feb"),_("MarchShort","Mar"),_("AprilShort","Apr"),_("MayShort","May"),_("JuneShort","Jun"),_("JulyShort","Jul"),_("AugustShort","Aug"),_("SeptemberShort","Sep"),_("OctoberShort","Oct"),_("NovemberShort","Nov"),_("DecemberShort","Dec")];class X8e{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=q8e(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(LH(e))return Yd(e.uri.path);let t=Yd(e.configPath.path);return t.endsWith(kH)&&(t=t.substr(0,t.length-kH.length-1)),t}_resoveWorkspacePath(e){if(LH(e))return w3(e.uri.fsPath);let t=Yd(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?w3(n):"/"}}class J8e{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return j8e()}}ti((i,e)=>{function t(n){const s=i.getColor(n);return s?s.toString():"transparent"}e.addRule(`.monaco-editor .snippet-placeholder { background-color: ${t(qEe)}; outline-color: ${t(GEe)}; }`),e.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${t(KEe)}; outline-color: ${t(ZEe)}; }`)});class go{constructor(e,t,n,s){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=s,this._nestingLevel=1,this._placeholderGroups=X7(t.placeholders,Co.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const s=this._snippet.offset(n),r=this._snippet.fullLen(n),o=F.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+r)),a=n.isFinalTabstop?go._decor.inactiveFinal:go._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let s=[];for(const r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){const o=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let h=1;h<c.length;h++)c[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[h]);s.push(Om.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(s=>{const r=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new Ve(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?go._decor.activeFinal:go._decor.active),r.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(h);s.changeDecorationOptions(u,h.isFinalTabstop?go._decor.activeFinal:go._decor.active),r.add(h)}}for(const[a,l]of this._placeholderDecorations)r.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?go._decor.inactiveFinal:go._decor.inactive);return o});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Co){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const s of t){if(s.isFinalTabstop)break;n||(n=[],e.set(s.index,n));const r=this._placeholderDecorations.get(s),o=this._editor.getModel().getDecorationRange(r);if(!o){e.delete(s.index);break}n.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const r=e.shift();console.assert(!r._placeholderDecorations);const o=r._snippet.placeholderInfo.last.index;for(const l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(o+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,r._snippet.children);const a=this._placeholderDecorations.get(s);n.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of r._snippet.placeholders){const c=r._snippet.offset(l),h=r._snippet.fullLen(l),u=F.fromPositions(t.getPositionAt(r._offset+c),t.getPositionAt(r._offset+c+h)),d=n.addDecoration(u,go._decor.inactive);this._placeholderDecorations.set(l,d)}}this._placeholderGroups=X7(this._snippet.placeholders,Co.compareByIndex)})}}go._decor={active:ct.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:ct.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:ct.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:ct.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const AH={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class il{constructor(e,t,n=AH){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,s,r){const o=e.getLineContent(t.lineNumber),a=Zi(o,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof Ks)||c.parent instanceof Zw)return!0;const h=c.value.split(/\r\n|\r|\n/);if(s){const d=n.offset(c);if(d===0)h[0]=e.normalizeIndentation(h[0]);else{l=l??n.toString();let f=l.charCodeAt(d-1);(f===10||f===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let f=1;f<h.length;f++)h[f]=e.normalizeIndentation(a+h[f])}const u=h.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new Ks(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,s){if(n!==0||s!==0){const{positionLineNumber:r,positionColumn:o}=t,a=o-n,l=o+s,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=Ve.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,s,r,o,a,l){const c=[],h=[];if(!e.hasModel())return{edits:c,snippets:h};const u=e.getModel(),d=e.invokeWithinContext(y=>y.get(PQ)),f=e.invokeWithinContext(y=>new Z8e(y.get(Hw),u)),g=()=>a;let p=0,m=u.getValueInRange(il.adjustSelection(u,e.getSelection(),n,0)),v=u.getValueInRange(il.adjustSelection(u,e.getSelection(),0,s)),b=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const w=e.getSelections().map((y,x)=>({selection:y,idx:x})).sort((y,x)=>F.compareRangesUsingStarts(y.selection,x.selection));for(const{selection:y,idx:x}of w){let L=il.adjustSelection(u,y,n,0),S=il.adjustSelection(u,y,0,s);m!==u.getValueInRange(L)&&(L=y),v!==u.getValueInRange(S)&&(S=y);const k=y.setStartPosition(L.startLineNumber,L.startColumn).setEndPosition(S.endLineNumber,S.endColumn),D=new u2().parse(t,!0,r),T=k.getStartPosition(),N=il.adjustWhitespace(u,T,D,o||x>0&&b!==u.getLineFirstNonWhitespaceColumn(y.positionLineNumber),!0);D.resolveVariables(new G8e([f,new Y8e(g,x,w.length,e.getOption(70)==="spread"),new K8e(u,y,x,l),new Q8e(u,y),new ml,new X8e(d),new J8e]));const $=u.getOffsetAt(T)+p;p+=D.toString().length-u.getValueLengthInRange(k),c[x]=Om.replace(k,D.toString()),c[x].identifier={major:x,minor:0},h[x]=new go(e,D,$,N)}return{edits:c,snippets:h}}dispose(){lt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=il.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(s=>!!s.identifier).map(s=>Ve.fromPositions(s.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=AH){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:s}=il.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,r=>{for(const o of this._snippets)o.merge(s);return console.assert(s.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):r.filter(o=>!!o.identifier).map(o=>Ve.fromPositions(o.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const s=n.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const s=n.computePossibleSelections();if(t.size===0)for(const[r,o]of s){o.sort(F.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,o)=>{r.push(...s.get(o))})}e.sort(F.compareRangesUsingStarts);for(let[n,s]of t){if(s.length!==e.length){t.delete(n);continue}s.sort(F.compareRangesUsingStarts);for(let r=0;r<s.length;r++)if(!s[r].containsRange(e[r])){t.delete(n);continue}}return t.size>0}}var e9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},EH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const IH={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let kn=class eb{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new de,this._modelVersionId=-1,this._inSnippet=eb.InSnippetMode.bindTo(n),this._hasNextTabstop=eb.HasNextTabstop.bindTo(n),this._hasPrevTabstop=eb.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(eb.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?IH:Object.assign(Object.assign({},IH),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new il(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>Ve.fromPositions(n.getStartPosition())));const[t]=e.options;LFe(this._editor,e.options.map((n,s)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(s+1),range:F.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};kn.ID="snippetController2";kn.InSnippetMode=new De("inSnippetMode",!1,_("inSnippetMode","Whether the editor in current in snippet mode"));kn.HasNextTabstop=new De("hasNextTabstop",!1,_("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));kn.HasPrevTabstop=new De("hasPrevTabstop",!1,_("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));kn=e9e([EH(1,th),EH(2,$e)],kn);Bs(kn.ID,kn);const S2=Qr.bindToContribution(kn.get);pe(new S2({id:"jumpToNextSnippetPlaceholder",precondition:xe.and(kn.InSnippetMode,kn.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:2}}));pe(new S2({id:"jumpToPrevSnippetPlaceholder",precondition:xe.and(kn.InSnippetMode,kn.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:1026}}));pe(new S2({id:"leaveSnippet",precondition:kn.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:G.editorTextFocus,primary:9,secondary:[1033]}}));pe(new S2({id:"acceptSnippet",precondition:kn.InSnippetMode,handler:i=>i.finish()}));var t9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},TH=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class kF{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let s=n[0].score[0];for(let r=0;r<n.length;r++){const{score:o,completion:a}=n[r];if(o[0]!==s)break;if(a.preselect)return r}return 0}}class Wte extends kF{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class i9e extends kF{constructor(){super("recentlyUsed"),this._cache=new E5(300,.66),this._seq=0}memorize(e,t,n){const s=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(s,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,n);let r=n[0].score[0],o=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===r;c++){const h=`${e.getLanguageId()}/${n[c].textLabel}`,u=this._cache.peek(h);if(u&&u.touch>l&&u.type===n[c].completion.kind&&u.insertText===n[c].completion.insertText&&(l=u.touch,a=c),n[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:KY(s.type),this._cache.set(n,s);this._seq=this._cache.size}}class n9e extends kF{constructor(){super("recentlyUsedByPrefix"),this._trie=Kp.forStrings(),this._seq=0}memorize(e,t,n){const{word:s}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${s}`;this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,n);let r=`${e.getLanguageId()}/${s}`,o=this._trie.get(r);if(o||(o=this._trie.findSubstr(r)),o)for(let a=0;a<n.length;a++){let{kind:l,insertText:c}=n[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:KY(n.type),this._trie.set(t,n)}}}let P1=class NS{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new de,this._persistSoon=new mi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===Z4.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==s){this._saveState();const r=NS._strategyCtors.get(s)||Wte;this._strategy=new r;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${NS._storagePrefix}/${s}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${NS._storagePrefix}/${this._strategy.name}`,n,t,1)}}};P1._strategyCtors=new Map([["recentlyUsedByPrefix",n9e],["recentlyUsed",i9e],["first",Wte]]);P1._storagePrefix="suggest/memories";P1=t9e([TH(0,yg),TH(1,Wi)],P1);const zte=bt("ISuggestMemories");cg(zte,P1,!0);var s9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},r9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let F1=class Hte{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Hte.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),s=this._editor.getSelection(),r=n.getWordAtPosition(s.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};F1.AtEnd=new De("atEndOfWord",!1);F1=s9e([r9e(1,$e)],F1);var o9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},a9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Zf=class MS{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=MS.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(MS._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let s=n;for(;s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===n||!t.items[s].completion.additionalTextEdits););return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=MS._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Zf.OtherSuggestions=new De("hasOtherSuggestions",!1);Zf=o9e([a9e(1,$e)],Zf);class l9e{constructor(e,t,n){this._disposables=new de,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!El(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Eke;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var c9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class Mr{provideSelectionRanges(e,t){return c9e(this,void 0,void 0,function*(){const n=[];for(const s of t){const r=[];n.push(r);const o=new Map;yield new Promise(a=>Mr._bracketsRightYield(a,0,e,s,o)),yield new Promise(a=>Mr._bracketsLeftYield(a,0,e,s,o,r))}return n})}static _bracketsRightYield(e,t,n,s,r){const o=new Map,a=Date.now();for(;;){if(t>=Mr._maxRounds){e();break}if(!s){e();break}let l=n.findNextBracket(s);if(!l){e();break}if(Date.now()-a>Mr._maxDuration){setTimeout(()=>Mr._bracketsRightYield(e,t+1,n,s,r));break}const h=l.close[0];if(l.isOpen){let u=o.has(h)?o.get(h):0;o.set(h,u+1)}else{let u=o.has(h)?o.get(h):0;if(u-=1,o.set(h,Math.max(0,u)),u<0){let d=r.get(h);d||(d=new wr,r.set(h,d)),d.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,s,r,o){const a=new Map,l=Date.now();for(;;){if(t>=Mr._maxRounds&&r.size===0){e();break}if(!s){e();break}let c=n.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>Mr._maxDuration){setTimeout(()=>Mr._bracketsLeftYield(e,t+1,n,s,r,o));break}const u=c.close[0];if(c.isOpen){let d=a.has(u)?a.get(u):0;if(d-=1,a.set(u,Math.max(0,d)),d<0){let f=r.get(u);if(f){let g=f.shift();f.size===0&&r.delete(u);const p=F.fromPositions(c.range.getEndPosition(),g.getStartPosition()),m=F.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:p}),o.push({range:m}),Mr._addBracketLeading(n,m,o)}}}else{let d=a.has(u)?a.get(u):0;a.set(u,d+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(s);r!==0&&r!==t.startColumn&&(n.push({range:F.fromPositions(new q(s,r),t.getEndPosition())}),n.push({range:F.fromPositions(new q(s,1),t.getEndPosition())}));const o=s-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:F.fromPositions(new q(o,a),t.getEndPosition())}),n.push({range:F.fromPositions(new q(o,1),t.getEndPosition())}))}}}Mr._maxDuration=30;Mr._maxRounds=2;var h9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class rl{static create(e,t){return h9e(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return rl.None;const n=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(n.uri))return rl.None;const[r]=yield new Mr().provideSelectionRanges(n,[s]);if(r.length===0)return rl.None;const o=yield e.computeWordRanges(n.uri,r[0].range);if(!o)return rl.None;const a=n.getWordUntilPosition(s);return delete o[a.word],new class extends rl{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;let h=typeof c.label=="string"?c.label:c.label.label,u=o[h];if(_Q(u))return 2<<20;let d=W5(u,F.fromPositions(l),F.compareRangesUsingStarts),f=d>=0?u[d]:u[Math.max(0,~d-1)],g=r.length;for(const p of r){if(!F.containsRange(p.range,f))break;g-=1}return g}}})}}rl.None=new class extends rl{distance(){return 0}};class Dd{constructor(e,t,n,s,r,o,a){this.clipboardText=a,this._snippetCompareFn=Dd._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=r,this._refilterKind=1,this._lineContext=n,o==="top"?this._snippetCompareFn=Dd._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=Dd._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let s="",r="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?_1:g3e;for(let c=0;c<o.length;c++){const h=o[c];if(h.isInvalid)continue;this._providerInfo.set(h.provider,!!h.container.incomplete);const u=h.position.column-h.editStart.column,d=u+n-(h.position.column-this._column);if(s.length!==d&&(s=d===0?"":t.slice(-d),r=s.toLowerCase()),h.word=s,d===0)h.score=ma.Default;else{let f=0;for(;f<u;){const g=s.charCodeAt(f);if(g===32||g===9)f+=1;else break}if(f>=d)h.score=ma.Default;else if(typeof h.completion.filterText=="string"){let g=l(s,r,f,h.completion.filterText,h.filterTextLow,0,!1);if(!g)continue;LM(h.completion.filterText,h.textLabel)===0?h.score=g:(h.score=h3e(s,r,f,h.textLabel,h.labelLow,0),h.score[0]=g[0])}else{let g=l(s,r,f,h.textLabel,h.labelLow,0,!1);if(!g)continue;h.score=g}}h.idx=c,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?ZM(e.length-.85,e,(c,h)=>c-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Dd._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Dd._compareCompletionItems(e,t)}}var u9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ep=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},d9e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class tp{constructor(e,t,n,s){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=s}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const s=t.getWordAtPosition(n);return!(!s||s.endColumn!==n.column||!isNaN(Number(s.word)))}}function f9e(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function g9e(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let q3=class Ute{constructor(e,t,n,s,r,o,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=s,this._logService=r,this._contextKeyService=o,this._configurationService=a,this._toDispose=new de,this._quickSuggestDelay=10,this._triggerCharacterListener=new de,this._triggerQuickSuggest=new Os,this._state=0,this._completionDisposables=new de,this._onDidCancel=new z,this._onDidTrigger=new z,this._onDidSuggest=new z,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ve(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(na.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(c=>{this._onCursorChange(c)}));let l=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{l=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{l=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{l||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){lt(this._triggerCharacterListener),lt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of na.all(this._editor.getModel()))for(const s of n.triggerCharacters||[]){let r=e.get(s);r||(r=new Set,r.add(SFe()),e.set(s,r)),r.add(n)}const t=n=>{if(!g9e(this._editor,this._contextKeyService,this._configurationService)||tp.shouldAutoTrigger(this._editor))return;if(!n){const o=this._editor.getPosition();n=this._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}let s="";Tm(n.charCodeAt(n.length-1))?vn(n.charCodeAt(n.length-2))&&(s=n.substr(n.length-2)):s=n.charAt(n.length-1);const r=e.get(s);if(r){const o=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:s},!!this._completionModel,r,o)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!na.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&kn.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!tp.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const s=e.getLineTokens(t.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&r===0||n.comments&&r===1||n.strings&&r===2))return}f9e(this._editor,this._contextKeyService,this._configurationService)&&na.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new tp(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,s){var r;if(!this._editor.hasModel())return;const o=this._editor.getModel(),a=e.auto,l=new tp(o,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:(r=e.triggerKind)!==null&&r!==void 0?r:0};e.triggerCharacter&&(c={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Ra;const h=this._editor.getOption(100);let u=1;switch(h){case"top":u=0;break;case"bottom":u=2;break}const{itemKind:d,showDeprecated:f}=Ute._createSuggestFilter(this._editor),g=rl.create(this._editorWorkerService,this._editor),p=Dee(o,this._editor.getPosition(),new ZD(u,d,n,f),c,this._requestToken.token);Promise.all([p,g]).then(([m,v])=>d9e(this,void 0,void 0,function*(){var b;if((b=this._requestToken)===null||b===void 0||b.dispose(),!this._editor.hasModel())return;let w=s==null?void 0:s.clipboardText;if(!w&&m.needsClipboard&&(w=yield this._clipboardService.readText()),this._state===0)return;const y=this._editor.getModel();let x=m.items;if(s){const S=kee(u);x=x.concat(s.items).sort(S)}const L=new tp(y,this._editor.getPosition(),a,e.shy);this._completionModel=new Dd(x,this._context.column,{leadingLineContent:L.leadingLineContent,characterCountDelta:L.column-this._context.column},v,this._editor.getOption(105),this._editor.getOption(100),w),this._completionDisposables.add(m.disposable),this._onNewContext(L),this._reportDurationsTelemetry(m.durations)})).catch(Ze)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const s=e.getOption(105);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Zi(e.leadingLineContent)!==Zi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(na.all(this._editor.getModel()));for(let s of this._completionModel.allProvider)t.delete(s);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(tp.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};q3=u9e([ep(1,qu),ep(2,_g),ep(3,P0),ep(4,th),ep(5,$e),ep(6,Wi)],q3);class x2{constructor(e,t){this._disposables=new de,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),s=n.length;let r=!1;for(let a=0;a<s;a++)if(!n[a].isEmpty()){r=!0;break}if(!r)return;this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<s;a++){const l=n[a];if(o.getValueLengthInRange(l)>x2._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}x2._maxSelectionLength=51200;var p9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},BI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class LF extends e0{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=_("ddd","{0} ({1})",this._action.label,LF.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let G3=class{constructor(e,t,n,s){this._menuService=n,this._contextKeyService=s,this._menuDisposables=new de,this.element=se(e,ue(".suggest-status-bar"));const r=o=>o instanceof xu?t.createInstance(LF,o,void 0):void 0;this._leftActions=new Zc(this.element,{actionViewItemProvider:r}),this._rightActions=new Zc(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(Tu,this._contextKeyService),t=()=>{const n=[],s=[];for(let[r,o]of e.getActions())r==="left"?n.push(...o):s.push(...o);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};G3=p9e([BI(1,zt),BI(2,O0),BI(3,$e)],G3);const m9e=V("symbolIcon.arrayForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_9e=V("symbolIcon.booleanForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),b9e=V("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),v9e=V("symbolIcon.colorForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),w9e=V("symbolIcon.constantForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),y9e=V("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),C9e=V("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),S9e=V("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),x9e=V("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},_("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),D9e=V("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),k9e=V("symbolIcon.fileForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),L9e=V("symbolIcon.folderForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),A9e=V("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),E9e=V("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),I9e=V("symbolIcon.keyForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),T9e=V("symbolIcon.keywordForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),N9e=V("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},_("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),M9e=V("symbolIcon.moduleForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),R9e=V("symbolIcon.namespaceForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),O9e=V("symbolIcon.nullForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),P9e=V("symbolIcon.numberForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),F9e=V("symbolIcon.objectForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),B9e=V("symbolIcon.operatorForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),V9e=V("symbolIcon.packageForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),W9e=V("symbolIcon.propertyForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),z9e=V("symbolIcon.referenceForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),H9e=V("symbolIcon.snippetForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),U9e=V("symbolIcon.stringForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$9e=V("symbolIcon.structForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),j9e=V("symbolIcon.textForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),q9e=V("symbolIcon.typeParameterForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),G9e=V("symbolIcon.unitForeground",{dark:Ie,light:Ie,hc:Ie},_("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),K9e=V("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},_("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));ti((i,e)=>{const t=i.getColor(m9e);t&&e.addRule(`${be.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(_9e);n&&e.addRule(`${be.symbolBoolean.cssSelector} { color: ${n}; }`);const s=i.getColor(b9e);s&&e.addRule(`${be.symbolClass.cssSelector} { color: ${s}; }`);const r=i.getColor(N9e);r&&e.addRule(`${be.symbolMethod.cssSelector} { color: ${r}; }`);const o=i.getColor(v9e);o&&e.addRule(`${be.symbolColor.cssSelector} { color: ${o}; }`);const a=i.getColor(w9e);a&&e.addRule(`${be.symbolConstant.cssSelector} { color: ${a}; }`);const l=i.getColor(y9e);l&&e.addRule(`${be.symbolConstructor.cssSelector} { color: ${l}; }`);const c=i.getColor(C9e);c&&e.addRule(`
			${be.symbolValue.cssSelector},${be.symbolEnum.cssSelector} { color: ${c}; }`);const h=i.getColor(S9e);h&&e.addRule(`${be.symbolEnumMember.cssSelector} { color: ${h}; }`);const u=i.getColor(x9e);u&&e.addRule(`${be.symbolEvent.cssSelector} { color: ${u}; }`);const d=i.getColor(D9e);d&&e.addRule(`${be.symbolField.cssSelector} { color: ${d}; }`);const f=i.getColor(k9e);f&&e.addRule(`${be.symbolFile.cssSelector} { color: ${f}; }`);const g=i.getColor(L9e);g&&e.addRule(`${be.symbolFolder.cssSelector} { color: ${g}; }`);const p=i.getColor(A9e);p&&e.addRule(`${be.symbolFunction.cssSelector} { color: ${p}; }`);const m=i.getColor(E9e);m&&e.addRule(`${be.symbolInterface.cssSelector} { color: ${m}; }`);const v=i.getColor(I9e);v&&e.addRule(`${be.symbolKey.cssSelector} { color: ${v}; }`);const b=i.getColor(T9e);b&&e.addRule(`${be.symbolKeyword.cssSelector} { color: ${b}; }`);const w=i.getColor(M9e);w&&e.addRule(`${be.symbolModule.cssSelector} { color: ${w}; }`);const y=i.getColor(R9e);y&&e.addRule(`${be.symbolNamespace.cssSelector} { color: ${y}; }`);const x=i.getColor(O9e);x&&e.addRule(`${be.symbolNull.cssSelector} { color: ${x}; }`);const L=i.getColor(P9e);L&&e.addRule(`${be.symbolNumber.cssSelector} { color: ${L}; }`);const S=i.getColor(F9e);S&&e.addRule(`${be.symbolObject.cssSelector} { color: ${S}; }`);const k=i.getColor(B9e);k&&e.addRule(`${be.symbolOperator.cssSelector} { color: ${k}; }`);const D=i.getColor(V9e);D&&e.addRule(`${be.symbolPackage.cssSelector} { color: ${D}; }`);const T=i.getColor(W9e);T&&e.addRule(`${be.symbolProperty.cssSelector} { color: ${T}; }`);const N=i.getColor(z9e);N&&e.addRule(`${be.symbolReference.cssSelector} { color: ${N}; }`);const $=i.getColor(H9e);$&&e.addRule(`${be.symbolSnippet.cssSelector} { color: ${$}; }`);const U=i.getColor(U9e);U&&e.addRule(`${be.symbolString.cssSelector} { color: ${U}; }`);const ee=i.getColor($9e);ee&&e.addRule(`${be.symbolStruct.cssSelector} { color: ${ee}; }`);const he=i.getColor(j9e);he&&e.addRule(`${be.symbolText.cssSelector} { color: ${he}; }`);const fe=i.getColor(q9e);fe&&e.addRule(`${be.symbolTypeParameter.cssSelector} { color: ${fe}; }`);const Ce=i.getColor(G9e);Ce&&e.addRule(`${be.symbolUnit.cssSelector} { color: ${Ce}; }`);const Se=i.getColor(K9e);Se&&e.addRule(`${be.symbolVariable.cssSelector} { color: ${Se}; }`)});class $te{constructor(){this._onDidWillResize=new z,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new z,this.onDidResize=this._onDidResize.event,this._sashListener=new de,this._size=new Wt(0,0),this._minSize=new Wt(0,0),this._maxSize=new Wt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Mn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Mn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Mn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:TD.North}),this._southSash=new Mn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:TD.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Le.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Le.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(n=s.currentX-s.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(n=-(s.currentX-s.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Le.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Le.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:s}=this._minSize,{height:r,width:o}=this._maxSize;e=Math.max(n,Math.min(r,e)),t=Math.max(s,Math.min(o,t));const a=new Wt(t,e);Wt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var Z9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Y9e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function AF(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let K3=class{constructor(e,t){this._editor=e,this._onDidClose=new z,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new z,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new de,this._renderDisposeable=new de,this._borderWidth=1,this._size=new Wt(330,0),this.domNode=ue(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Kf,{editor:e}),this._body=ue(".body"),this._scrollbar=new jL(this._body,{}),se(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=se(this._body,ue(".header")),this._close=se(this._header,ue("span"+be.close.cssSelector)),this._close.title=_("details.close","Close"),this._type=se(this._header,ue("p.type")),this._docs=se(this._body,ue("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(Io?fs.fontFamily:null),s=e.get(106)||t.fontSize,r=e.get(107)||t.lineHeight,o=t.fontWeight,a=`${s}px`,l=`${r}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${r/s}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=_("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,s;this._renderDisposeable.clear();let{detail:r,documentation:o}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(s=e.completion.commitCharacters)===null||s===void 0?void 0:s.join("")}
`,o=new Zm().appendCodeblock("empty",a),r=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!AF(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),r){const a=r.length>1e5?`${r.substr(0,1e5)}…`:r;this._type.textContent=a,this._type.title=a,gr(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Pn(this._type),this._type.title="",xs(this._type),this.domNode.classList.add("no-type");if(Pn(this._docs),typeof o=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=o;else if(o){this._docs.classList.add("markdown-docs"),Pn(this._docs);const a=this._markdownRenderer.render(o);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new Wt(e,t);Wt.equals(n,this._size)||(this._size=n,XSe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};K3=Z9e([Y9e(1,zt)],K3);class Q9e{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new de,this._added=!1,this._resizable=new $te,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,s,r=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=s.width-a.dimension.width,l=!0),a.north&&(r=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+r,left:n.left+o})}a.done&&(n=void 0,s=void 0,r=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const n=Rn(e);this._anchorBox=n,this._placeAtAnchor(this._anchorBox,(t=this._userSize)!==null&&t!==void 0?t:this.widget.size)}_placeAtAnchor(e,t){var n;const s=cL(document.body),r=this.widget.getLayoutInfo(),o=new Wt(220,2*r.lineHeight),a=e.top,l=function(){const b=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),w=-r.borderWidth+e.left+e.width,y=new Wt(b,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(b,o.width))}}(),c=function(){const b=e.left-r.borderWidth-r.horizontalPadding,w=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),y=new Wt(b,s.height-e.top-r.borderHeight-r.verticalPadding),x=y.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:w,fit:b-t.width,maxSizeTop:y,maxSizeBottom:x,minSize:o.with(Math.min(b,o.width))}}(),h=function(){const b=e.left,w=-r.borderWidth+e.top+e.height,y=new Wt(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:w,left:b,fit:y.height-t.height,maxSizeBottom:y,maxSizeTop:y,minSize:o.with(y.width)}}(),u=[l,c,h],d=(n=u.find(b=>b.fit>=0))!==null&&n!==void 0?n:u.sort((b,w)=>w.fit-b.fit)[0],f=e.top+e.height-r.borderHeight;let g,p=t.height;const m=Math.max(d.maxSizeTop.height,d.maxSizeBottom.height);p>m&&(p=m);let v;p<=d.maxSizeTop.height?(g=!0,v=d.maxSizeTop):(g=!1,v=d.maxSizeBottom),this._applyTopLeft({left:d.left,top:g?d.top:f-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!g,d===l,g,d!==l),this._resizable.minSize=d.minSize,this._resizable.maxSize=v,this._resizable.layout(p,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var Pc;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(Pc||(Pc={}));function DC(i,e,t,n){const s=n===Pc.ROOT_FOLDER?["rootfolder-icon"]:n===Pc.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===nt.data?r=wu.parseMetaData(t).get(wu.META_DATA_LABEL):r=NH(BY(t).toLowerCase()),n===Pc.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),r.length<=255){const a=r.split(".");for(let l=1;l<a.length;l++)s.push(`${a.slice(l).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const o=X9e(i,e,t);o&&s.push(`${NH(o)}-lang-file-icon`)}}return s}function X9e(i,e,t){if(!t)return null;let n=null;if(t.scheme===nt.data){const r=wu.parseMetaData(t).get(wu.META_DATA_MIME);r&&(n=e.getModeId(r))}else{const s=i.getModel(t);s&&(n=s.getLanguageId())}return n&&n!==z0?n:e.getModeIdByFilepathOrFirstLine(t)}function NH(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var J9e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VI=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},L_;function jte(i){return`suggest-aria-id:${i}`}const e7e=is("suggest-more-info",be.chevronRight,_("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),t7e=new(L_=class RS{extract(e,t){if(e.textLabel.match(RS._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(RS._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=RS._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},L_._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,L_._regexStrict=new RegExp(`^${L_._regexRelaxed.source}$`,"i"),L_);let Z3=class{constructor(e,t,n,s){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=s,this._onDidToggleDetails=new z,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new de,t.root=e,t.root.classList.add("show-file-icons"),t.icon=se(e,ue(".icon")),t.colorspan=se(t.icon,ue("span.colorspan"));const n=se(e,ue(".contents")),s=se(n,ue(".main"));t.iconContainer=se(s,ue(".icon-label.codicon")),t.left=se(s,ue("span.left")),t.right=se(s,ue("span.right")),t.iconLabel=new cF(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=se(t.left,ue("span.signature-label")),t.qualifierLabel=se(t.left,ue("span.qualifier-label")),t.detailsLabel=se(t.right,ue("span.details-label")),t.readMore=se(t.right,ue("span.readMore"+ci.asCSSSelector(e7e))),t.readMore.title=_("readMore","Read More");const r=()=>{const o=this._editor.getOptions(),a=o.get(43),l=a.getMassagedFontFamily(Io?fs.fontFamily:null),c=a.fontFeatureSettings,h=o.get(106)||a.fontSize,u=o.get(107)||a.lineHeight,d=a.fontWeight,f=`${h}px`,g=`${u}px`;t.root.style.fontSize=f,t.root.style.fontWeight=d,s.style.fontFamily=l,s.style.fontFeatureSettings=c,s.style.lineHeight=g,t.icon.style.height=g,t.icon.style.width=g,t.readMore.style.height=g,t.readMore.style.width=g};return r(),t.disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(106)||o.hasChanged(107))&&r()})),t}renderElement(e,t,n){const{completion:s}=e;n.root.id=jte(t),n.colorspan.style.backgroundColor="";const r={labelEscapeNewLines:!0,matches:$P(e.score)};let o=[];if(s.kind===19&&t7e.extract(e,o))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=DC(this._modelService,this._modeService,We.from({scheme:"fake",path:e.textLabel}),Pc.FILE),l=DC(this._modelService,this._modeService,We.from({scheme:"fake",path:s.detail}),Pc.FILE);r.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",r.extraClasses=z5([DC(this._modelService,this._modeService,We.from({scheme:"fake",path:e.textLabel}),Pc.FOLDER),DC(this._modelService,this._modeService,We.from({scheme:"fake",path:s.detail}),Pc.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...xDe(s.kind).split(" ")));s.tags&&s.tags.indexOf(1)>=0&&(r.extraClasses=(r.extraClasses||[]).concat(["deprecated"]),r.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,r),typeof s.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=WI(s.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=WI(s.label.detail||""),n.detailsLabel.textContent=WI(s.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?gr(n.detailsLabel):xs(n.detailsLabel),AF(e)?(n.right.classList.add("can-expand-details"),gr(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),xs(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};Z3=J9e([VI(1,Ps),VI(2,Fs),VI(3,oi)],Z3);function WI(i){return i.replace(/\r\n|\r|\n/g,"")}var i7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},kC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},n7e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const s7e=V("editorSuggestWidget.background",{dark:Ro,light:Ro,hc:Ro},_("editorSuggestWidgetBackground","Background color of the suggest widget.")),r7e=V("editorSuggestWidget.border",{dark:nf,light:nf,hc:nf},_("editorSuggestWidgetBorder","Border color of the suggest widget.")),o7e=V("editorSuggestWidget.foreground",{dark:nu,light:nu,hc:nu},_("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),a7e=V("editorSuggestWidget.selectedForeground",{dark:mS,light:mS,hc:mS},_("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),l7e=V("editorSuggestWidget.selectedIconForeground",{dark:_S,light:_S,hc:_S},_("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),c7e=V("editorSuggestWidget.selectedBackground",{dark:bS,light:bS,hc:bS},_("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),h7e=V("editorSuggestWidget.highlightForeground",{dark:sm,light:sm,hc:sm},_("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),u7e=V("editorSuggestWidget.focusHighlightForeground",{dark:IE,light:IE,hc:IE},_("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class d7e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof jf}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(Wt.is(n))return Wt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let B1=class Y3{constructor(e,t,n,s,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Os,this._disposables=new de,this._onDidSelect=new z,this._onDidFocus=new z,this._onDidHide=new z,this._onDidShow=new z,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new z,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new $te,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new f7e(this,e),this._persistedSize=new d7e(t,e);class o{constructor(f,g,p=!1,m=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=m}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(d=>{var f,g,p,m;if(this._resize(d.dimension.width,d.dimension.height),a&&(a.persistHeight=a.persistHeight||!!d.north||!!d.south,a.persistWidth=a.persistWidth||!!d.east||!!d.west),!!d.done){if(a){const{itemHeight:v,defaultSize:b}=this.getLayoutInfo(),w=Math.round(v/2);let{width:y,height:x}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-x)<=w)&&(x=(g=(f=a.persistedSize)===null||f===void 0?void 0:f.height)!==null&&g!==void 0?g:b.height),(!a.persistWidth||Math.abs(a.currentSize.width-y)<=w)&&(y=(m=(p=a.persistedSize)===null||p===void 0?void 0:p.width)!==null&&m!==void 0?m:b.width),this._persistedSize.store(new Wt(y,x))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=se(this.element.domNode,ue(".message")),this._listElement=se(this.element.domNode,ue(".tree"));const l=r.createInstance(K3,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Q9e(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);c();const h=r.createInstance(Z3,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ul("SuggestWidget",this._listElement,{getHeight:d=>this.getLayoutInfo().itemHeight,getTemplateId:d=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:d=>{if(d.isResolved&&this._isDetailsVisible()){const{documentation:f,detail:g}=d.completion,p=mo("{0}{1}",g||"",f?typeof f=="string"?f:f.value:"");return _("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",d.textLabel,p)}else return d.textLabel},getWidgetAriaLabel:()=>_("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=r.createInstance(G3,this.element.domNode);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);u(),this._disposables.add(zf(this._list,s,{listInactiveFocusBackground:c7e,listInactiveFocusOutline:Ns})),this._disposables.add(s.onDidColorThemeChange(d=>this._onThemeChange(d))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onTap(d=>this._onListMouseDownOrTap(d))),this._disposables.add(this._list.onDidChangeSelection(d=>this._onListSelection(d))),this._disposables.add(this._list.onDidChangeFocus(d=>this._onListFocus(d))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(d=>{d.hasChanged(105)&&(u(),c())})),this._ctxSuggestWidgetVisible=et.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=et.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=et.MultipleSuggestions.bindTo(n),this._disposables.add(tn(this._details.widget.domNode,"keydown",d=>{this._onDetailsKeydown.fire(d)})),this._disposables.add(this.editor.onMouseDown(d=>this._onEditorMouseDown(d)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(s7e);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const n=e.getColor(r7e);n&&(this.element.domNode.style.borderColor=n.toString(),this._messageElement.style.borderColor=n.toString(),this._status.element.style.borderTopColor=n.toString(),this._details.widget.domNode.style.borderColor=n.toString(),this._detailsBorderColor=n.toString());const s=e.getColor(ku);s&&(this._detailsFocusBorderColor=s.toString()),this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],s=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(s),this._currentSuggestionDetails=Ir(r=>n7e(this,void 0,void 0,function*(){const o=Em(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);r.onCancellationRequested(()=>o.dispose());const a=yield n.resolve(r);return o.dispose(),a})),this._currentSuggestionDetails.then(()=>{s>=this._list.length||n!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[n]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:jte(s)}))}).catch(Ze)),this._onDidFocus.fire({item:n,index:s,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:xs(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Y3.LOADING_MESSAGE,xs(this._listElement,this._status.element),gr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Y3.NO_SUGGESTIONS_MESSAGE,xs(this._listElement,this._status.element),gr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:xs(this._messageElement),gr(this._listElement,this._status.element),this._show();break;case 4:xs(this._messageElement),gr(this._listElement,this._status.element),this._show();break;case 5:xs(this._messageElement),gr(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Em(()=>this._setState(1),t)))}showSuggestions(e,t,n,s){var r,o;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(o=this._currentSuggestionDetails)===null||o===void 0||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(AF(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,s;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const r=cL(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${o.itemHeight}px`,this._state===2||this._state===1)a=o.itemHeight+o.borderHeight,l=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Wt(l,a),this._contentWidget.setPreference(2);else{const c=r.width-o.borderHeight-2*o.horizontalPadding;l>c&&(l=c);const h=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:l,u=o.statusBarHeight+this._list.contentHeight+o.borderHeight,d=o.itemHeight+o.statusBarHeight,f=Rn(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=f.top+g.top+g.height,m=Math.min(r.height-p-o.verticalPadding,u),v=f.top+g.top-o.verticalPadding,b=Math.min(v,u);let w=Math.min(Math.max(b,m)+o.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<d&&(a=d),a>w&&(a=w);const y=150;a>m||this._forceRenderingAbove&&v>y?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),w=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),w=m),this.element.preferredSize=new Wt(h,o.defaultSize.height),this.element.maxSize=new Wt(c,w),this.element.minSize=new Wt(220,d),this._cappedHeight=a===u?{wanted:(s=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&s!==void 0?s:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:s}=this.element.maxSize;e=Math.min(n,e),t=Math.min(s,t);const{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(43),t=po(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,r=2*s;return{itemHeight:t,statusBarHeight:n,borderWidth:s,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Wt(430,n+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};B1.LOADING_MESSAGE=_("suggestWidget.loading","Loading...");B1.NO_SUGGESTIONS_MESSAGE=_("suggestWidget.noSuggestions","No suggestions.");B1=i7e([kC(1,yg),kC(2,$e),kC(3,oi),kC(4,zt)],B1);class f7e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:s}=this._widget.getLayoutInfo();return new Wt(t+2*n+s,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}ti((i,e)=>{const t=i.getColor(h7e);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${t}; }`);const n=i.getColor(u7e);t&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${n}; }`);const s=i.getColor(o7e);s&&e.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${s}; }`);const r=i.getColor(a7e);r&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${r}; }`);const o=i.getColor(l7e);o&&e.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${o}; }`);const a=i.getColor(FL);a&&e.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);const l=i.getColor(BL);l&&e.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);const c=i.getColor(fX);c&&e.addRule(`.monaco-editor .suggest-details code { background-color: ${c}; }`)});var g7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},A_=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class p7e{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),r=e.getPositionAt(s+1);this._marker=e.deltaDecorations([],[{range:F.fromPositions(t,r),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let To=class qte{constructor(e,t,n,s,r,o){this._memoryService=t,this._commandService=n,this._contextKeyService=s,this._instantiationService=r,this._logService=o,this._lineSuffix=new Er,this._toDispose=new de,this._selectors=new m7e(h=>h.priority),this.editor=e,this.model=r.createInstance(q3,this.editor);const a=et.InsertMode.bindTo(s);a.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new vb(()=>{const h=this._instantiationService.createInstance(B1,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(p=>this._insertSuggestion(p,0),this));const u=new l9e(this.editor,h,p=>this._insertSuggestion(p,2));this._toDispose.add(u),this._toDispose.add(this.model.onDidSuggest(p=>{p.completionModel.items.length===0&&u.reset()}));const d=et.MakesTextEdit.bindTo(this._contextKeyService),f=et.HasInsertAndReplaceRange.bindTo(this._contextKeyService),g=et.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(pt(()=>{d.reset(),f.reset(),g.reset()})),this._toDispose.add(h.onDidFocus(({item:p})=>{const m=this.editor.getPosition(),v=p.editStart.column,b=m.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!p.completion.additionalTextEdits&&!(p.completion.insertTextRules&4)&&b-v===p.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:m.lineNumber,startColumn:v,endLineNumber:m.lineNumber,endColumn:b})!==p.completion.insertText),d.set(w),f.set(!q.equals(p.editInsertEnd,p.editReplaceEnd)),g.set(!!p.provider.resolveCompletionItem||!!p.completion.documentation||p.completion.detail!==p.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(p=>{if(p.toKeybinding().equals(new If(!0,!1,!1,!1,33))||ut&&p.toKeybinding().equals(new If(!1,!1,!1,!0,33))){p.stopPropagation();return}p.toKeybinding().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new vb(()=>this._toDispose.add(new x2(this.editor,this.model)))),this._alternatives=this._toDispose.add(new vb(()=>this._toDispose.add(new Zf(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(F1,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new p7e(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(!h.shy){let u=-1;for(const d of this._selectors.itemsOrderedByPriorityDesc)if(u=d.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),u!==-1)break;u===-1&&(u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items)),this.widget.value.showSuggestions(h.completionModel,u,h.isFrozen,h.auto)}})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let l=et.AcceptSuggestionsOnEnter.bindTo(s),c=()=>{const h=this.editor.getOption(1);l.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(e){return e.getContribution(qte.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),s=n.getAlternativeVersionId(),{item:r}=e,o=[],a=new Ra;t&1||this.editor.pushUndoStop();const l=this.getOverwriteInfo(r,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const h=qm.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(u=>Om.replace(F.lift(u.range),u.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const h=new qc(!0);let u;const d=n.onDidChangeContent(m=>{if(m.isFlush){a.cancel(),d.dispose();return}for(let v of m.changes){const b=F.getEndPosition(v.range);(!u||q.isBefore(b,u))&&(u=b)}});let f=t;t|=2;let g=!1,p=this.editor.onWillType(()=>{p.dispose(),g=!0,f&2||this.editor.pushUndoStop()});o.push(r.resolve(a.token).then(()=>{if(!r.completion.additionalTextEdits||a.token.isCancellationRequested||u&&r.completion.additionalTextEdits.some(v=>q.isBefore(u,F.getStartPosition(v.range))))return!1;g&&this.editor.pushUndoStop();const m=qm.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(v=>Om.replace(F.lift(v.range),v.text))),m.restoreRelativeVerticalPositionOfCursor(this.editor),(g||!(f&2))&&this.editor.pushUndoStop(),!0}).then(m=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),m),d.dispose(),p.dispose()}))}let{insertText:c}=r.completion;r.completion.insertTextRules&4||(c=u2.escape(c)),kn.get(this.editor).insert(c,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===ey.id?this.model.trigger({auto:!0,shy:!1},!0):(o.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Ze)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();n.canUndo();){s!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(o).finally(()=>{this.model.clear(),a.dispose()})}getOverwriteInfo(e,t){Pi(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const s=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+o,overwriteAfter:r+a}}_alertCompletionItem(e){if(El(e.completion.additionalTextEdits)){let t=_("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);dg(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=r.editStart.column,l=o.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==r.completion.insertText};Le.once(this.model.onDidTrigger)(r=>{let o=[];Le.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{lt(o),n()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(lt(o),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(n,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};To.ID="editor.contrib.suggestController";To=g7e([A_(1,zte),A_(2,yn),A_(3,$e),A_(4,zt),A_(5,th)],To);class m7e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class ey extends _i{constructor(){super({id:ey.id,label:_("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:xe.and(G.writable,G.hasCompletionItemProvider),kbOpts:{kbExpr:G.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const n=To.get(t);n&&n.triggerSuggest()}}ey.id="editor.action.triggerSuggest";Bs(To.ID,To);ot(ey);const to=100+90,rr=Qr.bindToContribution(To.get);pe(new rr({id:"acceptSelectedSuggestion",precondition:et.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));gs.registerKeybindingRule({id:"acceptSelectedSuggestion",when:xe.and(et.Visible,G.textInputFocus),primary:2,weight:to});gs.registerKeybindingRule({id:"acceptSelectedSuggestion",when:xe.and(et.Visible,G.textInputFocus,et.AcceptSuggestionsOnEnter,et.MakesTextEdit),primary:3,weight:to});ga.appendMenuItem(Tu,{command:{id:"acceptSelectedSuggestion",title:_("accept.insert","Insert")},group:"left",order:1,when:et.HasInsertAndReplaceRange.toNegated()});ga.appendMenuItem(Tu,{command:{id:"acceptSelectedSuggestion",title:_("accept.insert","Insert")},group:"left",order:1,when:xe.and(et.HasInsertAndReplaceRange,et.InsertMode.isEqualTo("insert"))});ga.appendMenuItem(Tu,{command:{id:"acceptSelectedSuggestion",title:_("accept.replace","Replace")},group:"left",order:1,when:xe.and(et.HasInsertAndReplaceRange,et.InsertMode.isEqualTo("replace"))});pe(new rr({id:"acceptAlternativeSelectedSuggestion",precondition:xe.and(et.Visible,G.textInputFocus),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Tu,group:"left",order:2,when:xe.and(et.HasInsertAndReplaceRange,et.InsertMode.isEqualTo("insert")),title:_("accept.replace","Replace")},{menuId:Tu,group:"left",order:2,when:xe.and(et.HasInsertAndReplaceRange,et.InsertMode.isEqualTo("replace")),title:_("accept.insert","Insert")}]}));Nt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");pe(new rr({id:"hideSuggestWidget",precondition:et.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:9,secondary:[1033]}}));pe(new rr({id:"selectNextSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));pe(new rr({id:"selectNextPageSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:12,secondary:[2060]}}));pe(new rr({id:"selectLastSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));pe(new rr({id:"selectPrevSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));pe(new rr({id:"selectPrevPageSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:11,secondary:[2059]}}));pe(new rr({id:"selectFirstSuggestion",precondition:xe.and(et.Visible,et.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));pe(new rr({id:"toggleSuggestionDetails",precondition:et.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Tu,group:"right",order:1,when:xe.and(et.DetailsVisible,et.CanResolve),title:_("detail.more","show less")},{menuId:Tu,group:"right",order:1,when:xe.and(et.DetailsVisible.toNegated(),et.CanResolve),title:_("detail.less","show more")}]}));pe(new rr({id:"toggleExplainMode",precondition:et.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));pe(new rr({id:"toggleSuggestionFocus",precondition:et.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:2570,mac:{primary:778}}}));pe(new rr({id:"insertBestCompletion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),F1.AtEnd,et.Visible.toNegated(),Zf.OtherSuggestions.toNegated(),kn.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(ks(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:to,primary:2}}));pe(new rr({id:"insertNextSuggestion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),Zf.OtherSuggestions,et.Visible.toNegated(),kn.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:2}}));pe(new rr({id:"insertPrevSuggestion",precondition:xe.and(G.textInputFocus,xe.equals("config.editor.tabCompletion","on"),Zf.OtherSuggestions,et.Visible.toNegated(),kn.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:to,kbExpr:G.textInputFocus,primary:1026}}));ot(class extends _i{constructor(){super({id:"editor.action.resetSuggestSize",label:_("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){To.get(e).resetWidgetSize()}});function _7e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function b7e(i,e){return(t,n)=>e(i(t),i(n))}function v7e(){return(i,e)=>i-e}function w7e(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class y7e extends te{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new mi(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=To.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(o,a,l)=>{const c=this.editor.getModel(),h=ek(c,this.suggestControllerPreselector());if(!h)return-1;const u=q.lift(a),d=l.map((g,p)=>{const m=MH(n,u,g,this.isShiftKeyPressed),v=ek(c,m);if(!v)return;const b=C7e(h.range,v.range)&&h.text.startsWith(v.text);return{index:p,valid:b,prefixLength:v.text.length,suggestItem:g}}).filter(g=>g&&g.valid),f=w7e(d,b7e(g=>g.prefixLength,v7e()));return f?f.index:-1}}));let s=!1;const r=()=>{s||(s=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Le.once(n.model.onDidTrigger)(o=>{r()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let n=!1;P8e(this._currentInlineCompletion,t)||(this._currentInlineCompletion=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=To.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return MH(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=To.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=To.get(this.editor);e&&e.forceRenderingAbove()}}function C7e(i,e){return i.startLineNumber===e.startLineNumber&&i.startColumn===e.startColumn&&(i.endLineNumber<e.endLineNumber||i.endLineNumber===e.endLineNumber&&i.endColumn<=e.endColumn)}function MH(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{text:"",range:F.fromPositions(e,e)};let{insertText:s}=t.completion;if(t.completion.insertTextRules&4){const o=new u2().parse(s),a=i.editor.getModel();if(o.children.length>100)return;il.adjustWhitespace(a,e,o,!0,!0),s=o.toString()}const r=i.getOverwriteInfo(t,n);return{text:s,range:F.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0)))}}var RH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class S7e extends Pte{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new y7e(this.editor,()=>{var n,s;return(s=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||s===void 0?void 0:s.toLiveInlineCompletion()})),this.updateOperation=this._register(new Er),this.updateCacheSoon=this._register(new mi(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const s=this.ghostText;s&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,x7e(s.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())})),this._register(pt(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return RH(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},n=this.editor.getPosition(),s=Ir(o=>RH(this,void 0,void 0,function*(){let a;try{a=yield Vte(n,this.editor.getModel(),{triggerKind:Fr.Automatic,selectedSuggestionInfo:t},o)}catch(l){Ze(l);return}o.isCancellationRequested||(this.cache.setValue(this.editor,a,Fr.Automatic),this.onDidChangeEmitter.fire())})),r=new Bte(s,Fr.Automatic);this.updateOperation.value=r,yield s,this.updateOperation.value===r&&this.updateOperation.clear()})}get ghostText(){var e,t;if(!this.isSuggestionPreviewEnabled())return;const n=this.suggestionInlineCompletionSource.state,s=ek(this.editor.getModel(),n==null?void 0:n.selectedItemAsInlineCompletion),r=ek(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),o=r&&s&&r.text.startsWith(s.text)&&r.range.equalsRange(s.range)?r:s||r,a=s?((o==null?void 0:o.text.length)||0)-s.text.length:0;return(h=>{const u=this.editor.getOptions().get(105).previewMode;return h?Fte(h,this.editor.getModel(),u,this.editor.getPosition(),a)||new Ote(h.range.endLineNumber,[],this.minReservedLineCount):void 0})(o)}}function x7e(i){return i.reduce((e,t)=>e+t,0)}var D7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},k7e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},L7e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class A7e extends te{constructor(){super(...arguments),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Er)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?_7e(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let Q3=class extends A7e{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new E7e),this.suggestWidgetAdapterModel=this._register(new S7e(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new $3(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(s=>e.containsPosition(new q(n.lineNumber,s.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Fr.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return L7e(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};Q3=D7e([k7e(1,yn)],Q3);class E7e extends te{constructor(){super(...arguments),this.onDidChangeEmitter=new z,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Er)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new H8e(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var Gte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xb=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},zI;const OH=(zI=window.trustedTypes)===null||zI===void 0?void 0:zI.createPolicy("editorGhostText",{createHTML:i=>i});let X3=class extends te{constructor(e,t,n,s){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=s,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(J3,this.editor)),this.additionalLinesWidget=this._register(new I7e(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(r=>{(r.hasChanged(29)||r.hasChanged(104)||r.hasChanged(87)||r.hasChanged(82)||r.hasChanged(44)||r.hasChanged(43)||r.hasChanged(58))&&this.update()})),this._register(pt(()=>{var r;this.disposed=!0,this.update(),(r=this.viewMoreContentWidget)===null||r===void 0||r.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,s=new Array;function r(c,h){if(s.length>0){const u=s[s.length-1];h&&u.decorations.push(new yr(u.content.length+1,u.content.length+1+c[0].length,h,0)),u.content+=c[0],c=c.slice(1)}for(const u of c)s.push({content:u,decorations:h?[new yr(1,u.length+1,h,0)]:[]})}const o=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const c of t.parts){let h=c.lines;a===void 0?(n.push({column:c.column,text:h[0],preview:c.preview}),h=h.slice(1)):r([o.substring(l,c.column-1)],void 0),h.length>0&&(r(h,"ghost-text"),a===void 0&&c.column<=o.length&&(a=c.column)),l=c.column-1}a!==void 0&&r([o.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,s,t.additionalReservedLineCount),t.parts.some(c=>c.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new q(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const s=this.editor.getOption(43),r=document.createElement("div");r.className="suggest-preview-additional-widget",Vn.applyFontInfoSlow(r,s);const o=document.createElement("span");o.className="content-spacer",o.append(t),r.append(o);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),r.append(a);const l=new de,c=document.createElement("div");return c.className="button suggest-preview-text",c.append(`+${n} lines…`),l.add(tn(c,"mousedown",h=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),h.preventDefault(),this.editor.focus()})),r.append(c),new R7e(this.editor,e,r,l)}};X3=Gte([Xb(2,zt),Xb(3,Fs)],X3);let J3=class{constructor(e,t,n,s){this.editor=e,this.codeEditorService=t,this.themeService=n,this.contextKeyService=s,this.decorationIds=[],this.disposableStore=new de}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){this.disposableStore.clear();const s=this.themeService.getColorTheme(),r=s.getColor(OX);let o,a;r&&(o=String(r.rgba.a),a=Z.Format.CSS.format(Kte(r)));const l=s.getColor(RX);let c;l&&(c=`2px dashed ${l}`);const h=this.editor.getModel();if(!h)return;const{tabSize:u}=h.getOptions(),d=h.getLineContent(e)||"";let f=0,g="";const p=new Array;n&&p.push({range:F.fromPositions(new q(e,n.column),new q(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const m=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),v=m===void 0?!0:!!m;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(b=>{g+=d.substring(f,b.column-1),f=b.column-1;const w=v?b.text:this.renderSingleLineText(b.text,g,u,!1),y=this.disposableStore.add(M7e(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:w,opacity:o,color:a,border:c,fontWeight:b.preview?"bold":"normal"}}));return{range:F.fromPositions(new q(e,b.column)),options:v?{description:"ghost-text",after:{content:w,inlineClassName:b.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}:Object.assign({},y.resolve())}}).concat(p))}renderSingleLineText(e,t,n,s){const r=t+e,o=Et.visibleColumnsByColumns(r,n);let a="",l=t.length+1;for(const c of e){if(c==="	"){const h=o[l+1]-o[l];if(s){a+="→";for(let u=1;u<h;u++)a+=" "}else for(let u=0;u<h;u++)a+=" "}else c===" "?s?a+="·":a+=" ":a+=c;l+=1}return a}};J3=Gte([Xb(1,si),Xb(2,oi),Xb(3,$e)],J3);function Kte(i){const{r:e,b:t,g:n}=i.rgba;return new Z(new tt(e,n,t,255))}class I7e{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const s=this.editor.getModel();if(!s)return;const{tabSize:r}=s.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");T7e(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l})}})}}function T7e(i,e,t,n,s){const r=n.get(29),o=n.get(104),a="none",l=n.get(82),c=n.get(44),h=n.get(43),u=n.get(58),d=Nf(1e4);d.appendASCIIString('<div class="suggest-preview-text">');for(let p=0,m=t.length;p<m;p++){const v=t[p],b=v.content;d.appendASCIIString('<div class="view-line'),d.appendASCIIString('" style="top:'),d.appendASCIIString(String(p*u)),d.appendASCIIString('px;width:1000000px;">');const w=L5(b),y=hL(b),x=wn.createEmpty(b,s);wL(new hg(h.isMonospace&&!r,h.canUseHalfwidthRightwardsArrow,b,!1,w,y,0,x,v.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,o,a,l,c!==fr.OFF,null),d),d.appendASCIIString("</div>")}d.appendASCIIString("</div>"),Vn.applyFontInfoSlow(i,h);const f=d.build(),g=OH?OH.createHTML(f):f;i.innerHTML=g}let N7e=0;function M7e(i,e,t,n){const s=t+N7e++;return i.registerDecorationType(e,s,n),{dispose(){i.removeDecorationType(s)},resolve(){return i.resolveDecorationOptions(s,!0)}}}class R7e extends te{constructor(e,t,n,s){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(s),this._register(pt(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}ti((i,e)=>{const t=i.getColor(OX);if(t){const s=String(t.rgba.a),r=Z.Format.CSS.format(Kte(t));e.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${s} !important; color: ${r} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${s} !important; color: ${r} !important; }`)}const n=i.getColor(RX);n&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${n}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${n}; }`))});var Zte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eR=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},D2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};let dn=class Yte extends te{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Er),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Yte.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(tR,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return D2(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};dn.inlineSuggestionVisible=new De("inlineSuggestionVisible",!1,_("inlineSuggestionVisible","Whether an inline suggestion is visible"));dn.inlineSuggestionHasIndentation=new De("inlineSuggestionHasIndentation",!1,_("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));dn.inlineSuggestionHasIndentationLessThanTabSize=new De("inlineSuggestionHasIndentationLessThanTabSize",!0,_("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));dn.ID="editor.contrib.ghostTextController";dn=Zte([eR(1,zt)],dn);class O7e{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=dn.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=dn.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=dn.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let tR=class extends te{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new O7e(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(Q3,this.editor)),this.widget=this._register(this.instantiationService.createInstance(X3,this.editor,this.model)),this._register(pt(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const s=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&s&&s.parts.length>0){const{column:r,lines:o}=s.parts[0],a=o[0],l=this.editor.getModel().getLineIndentColumn(s.lineNumber);if(r<=l){let h=Xs(a);h===-1&&(h=a.length-1),t=h>0;const u=this.editor.getModel().getOptions().tabSize;n=Et.visibleColumnFromColumn(a,h+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};tR=Zte([eR(1,zt),eR(2,$e)],tR);const Qte=Qr.bindToContribution(dn.get),V1=new Qte({id:Rte,precondition:dn.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});pe(V1);gs.registerKeybindingRule({primary:2,weight:200,id:V1.id,when:xe.and(V1.precondition,G.tabMovesFocus.toNegated(),dn.inlineSuggestionHasIndentationLessThanTabSize)});pe(new Qte({id:"editor.action.inlineSuggest.hide",precondition:dn.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class s0 extends _i{constructor(){super({id:s0.ID,label:_("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:xe.and(G.writable,dn.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return D2(this,void 0,void 0,function*(){const n=dn.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}s0.ID="editor.action.inlineSuggest.showNext";class r0 extends _i{constructor(){super({id:r0.ID,label:_("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:xe.and(G.writable,dn.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return D2(this,void 0,void 0,function*(){const n=dn.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}r0.ID="editor.action.inlineSuggest.showPrevious";class P7e extends _i{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:_("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:G.writable})}run(e,t){return D2(this,void 0,void 0,function*(){const n=dn.get(t);n&&n.trigger()})}}Bs(dn.ID,dn);ot(P7e);ot(s0);ot(r0);var F7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ip=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class B7e{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let iR=class{constructor(e,t,n,s,r,o,a,l){this._editor=e,this._hover=t,this._commandService=n,this._menuService=s,this._contextKeyService=r,this._modeService=o,this._openerService=a,this.accessibilityService=l}suggestHoverAnchor(e){const t=dn.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new EI(1e3,this,F.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new EI(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new EI(1e3,this,e.target.range):null}computeSync(e,t){const n=dn.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new B7e(this,e.range,n)]:[]}renderHoverParts(e,t,n){const s=new de,r=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(r,t,s);const o=s.add(this._menuService.createMenu(Ue.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:_("showNextInlineSuggestion","Next"),commandId:s0.ID,run:()=>this._commandService.executeCommand(s0.ID)}),l=n.addAction({label:_("showPreviousInlineSuggestion","Previous"),commandId:r0.ID,run:()=>this._commandService.executeCommand(r0.ID)});n.addAction({label:_("acceptInlineSuggestion","Accept"),commandId:V1.id,run:()=>this._commandService.executeCommand(V1.id)});const c=[a,l];for(const h of c)h.setEnabled(!1);r.hasMultipleSuggestions().then(h=>{for(const u of c)u.setEnabled(h)});for(const[h,u]of o.getActions())for(const d of u)d instanceof xu&&n.addAction({label:d.label,commandId:d.item.id,run:()=>this._commandService.executeCommand(d.item.id)});return s}renderScreenReaderText(e,t,n){var s,r;const o=ue,a=o("div.hover-row.markdown-hover"),l=se(a,o("div.hover-contents")),c=n.add(new Kf({editor:this._editor},this._modeService,this._openerService)),h=d=>{n.add(c.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const f=_("inlineSuggestionFollows","Suggestion:"),g=n.add(c.render(new Zm().appendText(f).appendCodeblock("text",d)));l.replaceChildren(g.element)},u=(r=(s=e.controller.activeModel)===null||s===void 0?void 0:s.inlineCompletionsModel)===null||r===void 0?void 0:r.ghostText;if(u){const d=this._editor.getModel().getLineContent(u.lineNumber);h(u.renderForScreenReader(d))}t.appendChild(a)}};iR=F7e([ip(2,yn),ip(3,O0),ip(4,$e),ip(5,Fs),ip(6,yu),ip(7,sr)],iR);var Xte=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OS=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PH=globalThis&&globalThis.__awaiter||function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(n.next(h))}catch(u){o(u)}}function l(h){try{c(n.throw(h))}catch(u){o(u)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const FH=ue;let nR=class extends te{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=FH("div.hover-row.status-bar"),this.actionsElement=se(this.hoverElement,FH("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(CF.render(this.actionsElement,e,n))}append(e){const t=se(this.actionsElement,e);return this._hasContent=!0,t}};nR=Xte([OS(0,zi)],nR);class tk{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),s=t.range.startLineNumber,r=n.getLineMaxColumn(s);return e.getLineDecorations(s).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===s?o.range.startColumn:1,l=o.range.endLineNumber===s?o.range.endColumn:r;return!(a>t.range.startColumn||t.range.endColumn>l)})}computeAsync(e){return PH(this,void 0,void 0,function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const n=tk._getLineDecorations(this._editor,t),s=yield Promise.all(this._participants.map(r=>this._computeAsync(r,n,t,e)));return z5(s)})}_computeAsync(e,t,n,s){return PH(this,void 0,void 0,function*(){return e.computeAsync?e.computeAsync(n,t,s):[]})}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=tk._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return vL(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let Zh=class sR extends Jr{constructor(e,t,n,s,r){super(),this._hoverVisibleKey=t,this._keybindingService=s,this._contextKeyService=r,this.allowEditorOverflow=!0,this._participants=[n.createInstance(N3,e,this),n.createInstance(R3,e,this),n.createInstance(iR,e,this),n.createInstance(U3,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new hte),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,o=>{o.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new tk(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new fte(this._computer,o=>this._withResult(o,!0),null,o=>this._withResult(o,!1),this._editor.getOption(52).delay),this._register(tn(this.getDomNode(),Ae.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(tn(this.getDomNode(),Ae.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Li.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return sR.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,s=e.target.detail;if(s&&!s.isAfterLines&&typeof s.horizontalDistanceToText=="number"&&s.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const s of this._participants)if(typeof s.suggestHoverAnchor=="function"){const r=s.suggestHoverAnchor(e);r&&n.push(r)}if(this._shouldShowAt(e)&&e.target.range){const r=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(o=>o.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new F(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new nH(0,r))}return n.length===0?!1:(n.sort((s,r)=>r.priority-s.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(et.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new nH(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const s=this._messages.filter(r=>r.isValidForHoverAnchor(e));if(s.length===0)this.hide();else{if(s.length===this._messages.length)return;this._renderMessages(e,s)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,s=t[0].range,r=null,o=document.createDocumentFragment();const a=new de,l=new Map;for(const h of t)n=Math.min(n,h.range.startColumn),s=F.plusRange(s,h.range),h.forceShowAtRange&&(r=h.range),l.has(h.owner)||l.set(h.owner,[]),l.get(h.owner).push(h);const c=a.add(new nR(this._keybindingService));for(const[h,u]of l)a.add(h.renderHoverParts(u,o,c));c.hasContent&&o.appendChild(c.hoverElement),this._renderDisposable=a,o.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new q(e.range.startLineNumber,n),s,this._shouldFocus),this._updateContents(o)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,s?[{range:s,options:sR._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};Zh.ID="editor.contrib.modesContentHoverWidget";Zh._DECORATION_OPTIONS=ct.register({description:"content-hover-highlight",className:"hoverHighlight"});Zh=Xte([OS(2,zt),OS(3,zi),OS(4,$e)],Zh);const BH=ue;class V7e{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=s=>({value:s}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const s of t){if(!s.options.glyphMarginClassName)continue;const r=s.options.glyphMarginHoverMessage;!r||Kb(r)||n.push(...bQ(r).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class Ud extends Jr{constructor(e,t,n=qxe){super(),this._renderDisposeables=this._register(new de),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new hte),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Kf({editor:this._editor},t,n)),this._computer=new V7e(this._editor),this._hoverOperation=new fte(this._computer,s=>this._withResult(s),void 0,s=>this._withResult(s),300),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Ud.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),r=this._editor.getOption(58),o=this._hover.containerDomNode.clientHeight,a=n-s-(o-r)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const s of t){const r=BH("div.hover-row.markdown-hover"),o=se(r,BH("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));o.appendChild(a.element),n.appendChild(r)}this._updateContents(n),this._showAt(e)}}Ud.ID="editor.contrib.modesGlyphHoverWidget";var W7e=globalThis&&globalThis.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},LC=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Yf=class Jte{constructor(e,t,n,s,r){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=s,this._toUnhook=new de,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(o=>{o.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=G.hoverVisible.bindTo(r)}static get(e){return e.getContribution(Jte.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===Zh.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===Ud.ID||(t!==12&&e.target.detail!==Ud.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,s,r,o;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===Zh.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===Zh.ID&&(!((s=this._contentWidget)===null||s===void 0)&&s.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===Ud.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(r=this._glyphWidget)===null||r===void 0||r.hide();return}if(a===2&&e.target.position){(o=this._contentWidget)===null||o===void 0||o.hide(),this._glyphWidget||(this._glyphWidget=new Ud(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Zh,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Yf.ID="editor.contrib.hover";Yf=W7e([LC(1,zt),LC(2,yu),LC(3,Fs),LC(4,$e)],Yf);class z7e extends _i{constructor(){super({id:"editor.action.showHover",label:_({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:G.editorTextFocus,primary:Rs(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=Yf.get(t);if(!n)return;const s=t.getPosition(),r=new F(s.lineNumber,s.column,s.lineNumber,s.column),o=t.getOption(2)===2;n.showContentHover(r,1,o)}}class H7e extends _i{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:_({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=Yf.get(t);if(!n)return;const s=t.getPosition();if(!s)return;const r=new F(s.lineNumber,s.column,s.lineNumber,s.column);qf.get(t).startFindDefinitionFromCursor(s).then(()=>{n.showContentHover(r,1,!0)})}}Bs(Yf.ID,Yf);ot(z7e);ot(H7e);ti((i,e)=>{const t=i.getColor(uEe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(Jv);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const s=i.getColor(fEe);s&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${s}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${s.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${s.transparent(.5)}; }`));const r=i.getColor(FL);r&&e.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const o=i.getColor(BL);o&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${o}; }`);const a=i.getColor(dEe);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=i.getColor(gEe);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=i.getColor(fX);c&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)});function U7e(){return new Worker(""+new URL("json.worker-5aea2fd8.js",import.meta.url).href)}self.MonacoEnvironment={getWorker(i,e){if(e==="json")return new U7e;throw new Error("Unsupported language: "+e)}};class $7e extends Np{constructor(){super();Q0(this,"_editor");Q0(this,"_initialValue")}set value(t){this._editor?this._editor.setValue(t):this._initialValue=t}get value(){var t;return((t=this._editor)==null?void 0:t.getValue())??this._initialValue}createRenderRoot(){return this}disconnectedCallback(){var t,n,s;(t=this._editor)==null||t.dispose(),(s=(n=this._editor)==null?void 0:n.getModel())==null||s.dispose()}render(){return hn}firstUpdated(){this._editor=tPe.create(this,{value:this._initialValue,language:"json",minimap:{enabled:!1}}),this._editor.getModel().onDidChangeContent(()=>{this.dispatchEvent(new CustomEvent("change",{detail:{}}))}),new ResizeObserver(n=>{this._editor.layout()}).observe(this)}}customElements.define("code-editor",$7e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*j7e(i,e){if(i!==void 0){let t=0;for(const n of i)yield e(n,t++)}}function Y0(i,e,t){return i.fields=e||[],i.fname=t,i}function q7e(i){return i.length===1?G7e(i[0]):K7e(i)}const G7e=i=>function(e){return e[i]},K7e=i=>{const e=i.length;return function(t){for(let n=0;n<e;++n)t=t[i[n]];return t}};function hf(i){throw Error(i)}function Z7e(i){const e=[],t=i.length;let n=null,s=0,r="",o,a,l;i=i+"";function c(){e.push(r+i.substring(o,a)),r="",o=a+1}for(o=a=0;a<t;++a)if(l=i[a],l==="\\")r+=i.substring(o,a),r+=i.substring(++a,++a),o=a;else if(l===n)c(),n=null,s=-1;else{if(n)continue;o===s&&l==='"'||o===s&&l==="'"?(o=a+1,n=l):l==="."&&!s?a>o?c():o=a+1:l==="["?(a>o&&c(),s=o=a+1):l==="]"&&(s||hf("Access path missing open bracket: "+i),s>0&&c(),s=0,o=a+1)}return s&&hf("Access path missing closing bracket: "+i),n&&hf("Access path missing closing quote: "+i),a>o&&(a++,c()),e}function eie(i,e,t){const n=Z7e(i);return i=n.length===1?n[0]:i,Y0((t&&t.get||q7e)(n),[i],e||i)}eie("id");const tie=Y0(i=>i,[],"identity");Y0(()=>0,[],"zero");Y0(()=>1,[],"one");Y0(()=>!0,[],"true");Y0(()=>!1,[],"false");var iie=Array.isArray;function EF(i){return i===Object(i)}function VH(i){return i==null||i===""?null:+i}function nie(i){return typeof i=="function"}function Y7e(i){for(let e,t,n=1,s=arguments.length;n<s;++n){e=arguments[n];for(t in e)i[t]=e[t]}return i}const Q7e=Object.prototype.hasOwnProperty;function sie(i,e){return Q7e.call(i,e)}function X7e(i){return Object.prototype.toString.call(i)==="[object Date]"}function J7e(i){return i&&nie(i[Symbol.iterator])}function eVe(i){return typeof i=="number"}function rR(i){return typeof i=="string"}function rie(i){return iie(i)?"["+i.map(rie)+"]":EF(i)||rR(i)?JSON.stringify(i).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):i}function tVe(i){return i==null||i===""?null:!i||i==="false"||i==="0"?!1:!!i}const iVe=i=>eVe(i)||X7e(i)?i:Date.parse(i);function nVe(i,e){return e=e||iVe,i==null||i===""?null:e(i)}function sVe(i){return i==null||i===""?null:i+""}var WH={},HI={},UI=34,E_=10,$I=13;function oie(i){return new Function("d","return {"+i.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function rVe(i,e){var t=oie(i);return function(n,s){return e(t(n),s,i)}}function zH(i){var e=Object.create(null),t=[];return i.forEach(function(n){for(var s in n)s in e||t.push(e[s]=s)}),t}function hr(i,e){var t=i+"",n=t.length;return n<e?new Array(e-n+1).join(0)+t:t}function oVe(i){return i<0?"-"+hr(-i,6):i>9999?"+"+hr(i,6):hr(i,4)}function aVe(i){var e=i.getUTCHours(),t=i.getUTCMinutes(),n=i.getUTCSeconds(),s=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":oVe(i.getUTCFullYear())+"-"+hr(i.getUTCMonth()+1,2)+"-"+hr(i.getUTCDate(),2)+(s?"T"+hr(e,2)+":"+hr(t,2)+":"+hr(n,2)+"."+hr(s,3)+"Z":n?"T"+hr(e,2)+":"+hr(t,2)+":"+hr(n,2)+"Z":t||e?"T"+hr(e,2)+":"+hr(t,2)+"Z":"")}function lVe(i){var e=new RegExp('["'+i+`
\r]`),t=i.charCodeAt(0);function n(u,d){var f,g,p=s(u,function(m,v){if(f)return f(m,v-1);g=m,f=d?rVe(m,d):oie(m)});return p.columns=g||[],p}function s(u,d){var f=[],g=u.length,p=0,m=0,v,b=g<=0,w=!1;u.charCodeAt(g-1)===E_&&--g,u.charCodeAt(g-1)===$I&&--g;function y(){if(b)return HI;if(w)return w=!1,WH;var L,S=p,k;if(u.charCodeAt(S)===UI){for(;p++<g&&u.charCodeAt(p)!==UI||u.charCodeAt(++p)===UI;);return(L=p)>=g?b=!0:(k=u.charCodeAt(p++))===E_?w=!0:k===$I&&(w=!0,u.charCodeAt(p)===E_&&++p),u.slice(S+1,L-1).replace(/""/g,'"')}for(;p<g;){if((k=u.charCodeAt(L=p++))===E_)w=!0;else if(k===$I)w=!0,u.charCodeAt(p)===E_&&++p;else if(k!==t)continue;return u.slice(S,L)}return b=!0,u.slice(S,g)}for(;(v=y())!==HI;){for(var x=[];v!==WH&&v!==HI;)x.push(v),v=y();d&&(x=d(x,m++))==null||f.push(x)}return f}function r(u,d){return u.map(function(f){return d.map(function(g){return h(f[g])}).join(i)})}function o(u,d){return d==null&&(d=zH(u)),[d.map(h).join(i)].concat(r(u,d)).join(`
`)}function a(u,d){return d==null&&(d=zH(u)),r(u,d).join(`
`)}function l(u){return u.map(c).join(`
`)}function c(u){return u.map(h).join(i)}function h(u){return u==null?"":u instanceof Date?aVe(u):e.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u}return{parse:n,parseRows:s,format:o,formatBody:a,formatRows:l,formatRow:c,formatValue:h}}function cVe(i){return i}function hVe(i){if(i==null)return cVe;var e,t,n=i.scale[0],s=i.scale[1],r=i.translate[0],o=i.translate[1];return function(a,l){l||(e=t=0);var c=2,h=a.length,u=new Array(h);for(u[0]=(e+=a[0])*n+r,u[1]=(t+=a[1])*s+o;c<h;)u[c]=a[c],++c;return u}}function uVe(i,e){for(var t,n=i.length,s=n-e;s<--n;)t=i[s],i[s++]=i[n],i[n]=t}function dVe(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return HH(i,t)})}:HH(i,e)}function HH(i,e){var t=e.id,n=e.bbox,s=e.properties==null?{}:e.properties,r=aie(i,e);return t==null&&n==null?{type:"Feature",properties:s,geometry:r}:n==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:n,properties:s,geometry:r}}function aie(i,e){var t=hVe(i.transform),n=i.arcs;function s(h,u){u.length&&u.pop();for(var d=n[h<0?~h:h],f=0,g=d.length;f<g;++f)u.push(t(d[f],f));h<0&&uVe(u,g)}function r(h){return t(h)}function o(h){for(var u=[],d=0,f=h.length;d<f;++d)s(h[d],u);return u.length<2&&u.push(u[0]),u}function a(h){for(var u=o(h);u.length<4;)u.push(u[0]);return u}function l(h){return h.map(a)}function c(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(c)};case"Point":d=r(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(r);break;case"LineString":d=o(h.arcs);break;case"MultiLineString":d=h.arcs.map(o);break;case"Polygon":d=l(h.arcs);break;case"MultiPolygon":d=h.arcs.map(l);break;default:return null}return{type:u,coordinates:d}}return c(e)}function fVe(i,e){var t={},n={},s={},r=[],o=-1;e.forEach(function(c,h){var u=i.arcs[c<0?~c:c],d;u.length<3&&!u[1][0]&&!u[1][1]&&(d=e[++o],e[o]=c,e[h]=d)}),e.forEach(function(c){var h=a(c),u=h[0],d=h[1],f,g;if(f=s[u])if(delete s[f.end],f.push(c),f.end=d,g=n[d]){delete n[g.start];var p=g===f?f:f.concat(g);n[p.start=f.start]=s[p.end=g.end]=p}else n[f.start]=s[f.end]=f;else if(f=n[d])if(delete n[f.start],f.unshift(c),f.start=u,g=s[u]){delete s[g.end];var m=g===f?f:g.concat(f);n[m.start=g.start]=s[m.end=f.end]=m}else n[f.start]=s[f.end]=f;else f=[c],n[f.start=u]=s[f.end=d]=f});function a(c){var h=i.arcs[c<0?~c:c],u=h[0],d;return i.transform?(d=[0,0],h.forEach(function(f){d[0]+=f[0],d[1]+=f[1]})):d=h[h.length-1],c<0?[d,u]:[u,d]}function l(c,h){for(var u in c){var d=c[u];delete h[d.start],delete d.start,delete d.end,d.forEach(function(f){t[f<0?~f:f]=1}),r.push(d)}}return l(s,n),l(n,s),e.forEach(function(c){t[c<0?~c:c]||r.push([c])}),r}function gVe(i){return aie(i,pVe.apply(this,arguments))}function pVe(i,e,t){var n,s,r;if(arguments.length>1)n=mVe(i,e,t);else for(s=0,n=new Array(r=i.arcs.length);s<r;++s)n[s]=s;return{type:"MultiLineString",arcs:fVe(i,n)}}function mVe(i,e,t){var n=[],s=[],r;function o(u){var d=u<0?~u:u;(s[d]||(s[d]=[])).push({i:u,g:r})}function a(u){u.forEach(o)}function l(u){u.forEach(a)}function c(u){u.forEach(l)}function h(u){switch(r=u,u.type){case"GeometryCollection":u.geometries.forEach(h);break;case"LineString":a(u.arcs);break;case"MultiLineString":case"Polygon":l(u.arcs);break;case"MultiPolygon":c(u.arcs);break}}return h(e),s.forEach(t==null?function(u){n.push(u[0].i)}:function(u){t(u[0].g,u[u.length-1].g)&&n.push(u[0].i)}),n}var _Ve=Math.sqrt(50),bVe=Math.sqrt(10),vVe=Math.sqrt(2);function wVe(i,e,t){var n=Math.abs(e-i)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/s;return r>=_Ve?s*=10:r>=bVe?s*=5:r>=vVe&&(s*=2),e<i?-s:s}function yVe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function ik(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function o0(i){return i=ik(Math.abs(i)),i?i[1]:NaN}function CVe(i,e){return function(t,n){for(var s=t.length,r=[],o=0,a=i[0],l=0;s>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),r.push(t.substring(s-=a,s+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return r.reverse().join(e)}}function SVe(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var xVe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W1(i){if(!(e=xVe.exec(i)))throw new Error("invalid format: "+i);var e;return new IF({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}W1.prototype=IF.prototype;function IF(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}IF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DVe(i){e:for(var e=i.length,t=1,n=-1,s;t<e;++t)switch(i[t]){case".":n=s=t;break;case"0":n===0&&(n=t),s=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(s+1):i}var lie;function kVe(i,e){var t=ik(i,e);if(!t)return i+"";var n=t[0],s=t[1],r=s-(lie=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return r===o?n:r>o?n+new Array(r-o+1).join("0"):r>0?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+ik(i,Math.max(0,e+r-1))[0]}function UH(i,e){var t=ik(i,e);if(!t)return i+"";var n=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const $H={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:yVe,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>UH(i*100,e),r:UH,s:kVe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function jH(i){return i}var qH=Array.prototype.map,GH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function LVe(i){var e=i.grouping===void 0||i.thousands===void 0?jH:CVe(qH.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",s=i.decimal===void 0?".":i.decimal+"",r=i.numerals===void 0?jH:SVe(qH.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=W1(u);var d=u.fill,f=u.align,g=u.sign,p=u.symbol,m=u.zero,v=u.width,b=u.comma,w=u.precision,y=u.trim,x=u.type;x==="n"?(b=!0,x="g"):$H[x]||(w===void 0&&(w=12),y=!0,x="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var L=p==="$"?t:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?n:/[%p]/.test(x)?o:"",k=$H[x],D=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(N){var $=L,U=S,ee,he,fe;if(x==="c")U=k(N)+U,N="";else{N=+N;var Ce=N<0||1/N<0;if(N=isNaN(N)?l:k(Math.abs(N),w),y&&(N=DVe(N)),Ce&&+N==0&&g!=="+"&&(Ce=!1),$=(Ce?g==="("?g:a:g==="-"||g==="("?"":g)+$,U=(x==="s"?GH[8+lie/3]:"")+U+(Ce&&g==="("?")":""),D){for(ee=-1,he=N.length;++ee<he;)if(fe=N.charCodeAt(ee),48>fe||fe>57){U=(fe===46?s+N.slice(ee+1):N.slice(ee))+U,N=N.slice(0,ee);break}}}b&&!m&&(N=e(N,1/0));var Se=$.length+N.length+U.length,me=Se<v?new Array(v-Se+1).join(d):"";switch(b&&m&&(N=e(me+N,me.length?v-U.length:1/0),me=""),f){case"<":N=$+N+U+me;break;case"=":N=$+me+N+U;break;case"^":N=me.slice(0,Se=me.length>>1)+$+N+U+me.slice(Se);break;default:N=me+$+N+U;break}return r(N)}return T.toString=function(){return u+""},T}function h(u,d){var f=c((u=W1(u),u.type="f",u)),g=Math.max(-8,Math.min(8,Math.floor(o0(d)/3)))*3,p=Math.pow(10,-g),m=GH[8+g/3];return function(v){return f(p*v)+m}}return{format:c,formatPrefix:h}}var AC,cie,hie;AVe({thousands:",",grouping:[3],currency:["$",""]});function AVe(i){return AC=LVe(i),cie=AC.format,hie=AC.formatPrefix,AC}function EVe(i){return Math.max(0,-o0(Math.abs(i)))}function IVe(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(o0(e)/3)))*3-o0(Math.abs(i)))}function TVe(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,o0(e)-o0(i))+1}var jI=new Date,qI=new Date;function ns(i,e,t,n){function s(r){return i(r=arguments.length===0?new Date:new Date(+r)),r}return s.floor=function(r){return i(r=new Date(+r)),r},s.ceil=function(r){return i(r=new Date(r-1)),e(r,1),i(r),r},s.round=function(r){var o=s(r),a=s.ceil(r);return r-o<a-r?o:a},s.offset=function(r,o){return e(r=new Date(+r),o==null?1:Math.floor(o)),r},s.range=function(r,o,a){var l=[],c;if(r=s.ceil(r),a=a==null?1:Math.floor(a),!(r<o)||!(a>0))return l;do l.push(c=new Date(+r)),e(r,a),i(r);while(c<r&&r<o);return l},s.filter=function(r){return ns(function(o){if(o>=o)for(;i(o),!r(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!r(o););else for(;--a>=0;)for(;e(o,1),!r(o););})},t&&(s.count=function(r,o){return jI.setTime(+r),qI.setTime(+o),i(jI),i(qI),Math.floor(t(jI,qI))},s.every=function(r){return r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?s.filter(n?function(o){return n(o)%r===0}:function(o){return s.count(0,o)%r===0}):s}),s}var nk=ns(function(){},function(i,e){i.setTime(+i+e)},function(i,e){return e-i});nk.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?ns(function(e){e.setTime(Math.floor(e/i)*i)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i}):nk};const uie=nk;nk.range;const z1=1e3,Ru=z1*60,H1=Ru*60,TF=H1*24,die=TF*7;var fie=ns(function(i){i.setTime(i-i.getMilliseconds())},function(i,e){i.setTime(+i+e*z1)},function(i,e){return(e-i)/z1},function(i){return i.getUTCSeconds()});const gie=fie;fie.range;var pie=ns(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*z1)},function(i,e){i.setTime(+i+e*Ru)},function(i,e){return(e-i)/Ru},function(i){return i.getMinutes()});const NVe=pie;pie.range;var mie=ns(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*z1-i.getMinutes()*Ru)},function(i,e){i.setTime(+i+e*H1)},function(i,e){return(e-i)/H1},function(i){return i.getHours()});const MVe=mie;mie.range;var _ie=ns(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*Ru)/TF,i=>i.getDate()-1);const Jb=_ie;_ie.range;function Dg(i){return ns(function(e){e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ru)/die})}var NF=Dg(0),sk=Dg(1),RVe=Dg(2),OVe=Dg(3),a0=Dg(4),PVe=Dg(5),FVe=Dg(6);NF.range;sk.range;RVe.range;OVe.range;a0.range;PVe.range;FVe.range;var bie=ns(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,e){i.setMonth(i.getMonth()+e)},function(i,e){return e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()});const KH=bie;bie.range;var MF=ns(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e)},function(i,e){return e.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});MF.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:ns(function(e){e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*i)})};const l0=MF;MF.range;var vie=ns(function(i){i.setUTCSeconds(0,0)},function(i,e){i.setTime(+i+e*Ru)},function(i,e){return(e-i)/Ru},function(i){return i.getUTCMinutes()});const BVe=vie;vie.range;var wie=ns(function(i){i.setUTCMinutes(0,0,0)},function(i,e){i.setTime(+i+e*H1)},function(i,e){return(e-i)/H1},function(i){return i.getUTCHours()});const VVe=wie;wie.range;var yie=ns(function(i){i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCDate(i.getUTCDate()+e)},function(i,e){return(e-i)/TF},function(i){return i.getUTCDate()-1});const ev=yie;yie.range;function kg(i){return ns(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/die})}var RF=kg(0),rk=kg(1),WVe=kg(2),zVe=kg(3),c0=kg(4),HVe=kg(5),UVe=kg(6);RF.range;rk.range;WVe.range;zVe.range;c0.range;HVe.range;UVe.range;var Cie=ns(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCMonth(i.getUTCMonth()+e)},function(i,e){return e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()});const ZH=Cie;Cie.range;var OF=ns(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e)},function(i,e){return e.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});OF.every=function(i){return!isFinite(i=Math.floor(i))||!(i>0)?null:ns(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*i)})};const h0=OF;OF.range;const U1="year",$1="quarter",j1="month",q1="week",G1="date",k2="day",PF="dayofyear",K1="hours",Z1="minutes",Y1="seconds",L2="milliseconds",$Ve=[U1,$1,j1,q1,G1,k2,PF,K1,Z1,Y1,L2];$Ve.reduce((i,e,t)=>(i[e]=1+t,i),{});const jVe={[U1]:l0,[$1]:KH.every(3),[j1]:KH,[q1]:NF,[G1]:Jb,[k2]:Jb,[PF]:Jb,[K1]:MVe,[Z1]:NVe,[Y1]:gie,[L2]:uie},qVe={[U1]:h0,[$1]:ZH.every(3),[j1]:ZH,[q1]:RF,[G1]:ev,[k2]:ev,[PF]:ev,[K1]:VVe,[Z1]:BVe,[Y1]:gie,[L2]:uie};function GVe(i){return jVe[i]}function KVe(i){return qVe[i]}function GI(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function KI(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function I_(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function Sie(i){var e=i.dateTime,t=i.date,n=i.time,s=i.periods,r=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=T_(s),h=N_(s),u=T_(r),d=N_(r),f=T_(o),g=N_(o),p=T_(a),m=N_(a),v=T_(l),b=N_(l),w={a:Ce,A:Se,b:me,B:kt,c:null,d:tU,e:tU,f:_We,g:LWe,G:EWe,H:gWe,I:pWe,j:mWe,L:xie,m:bWe,M:vWe,p:ze,q:Ge,Q:sU,s:rU,S:wWe,u:yWe,U:CWe,V:SWe,w:xWe,W:DWe,x:null,X:null,y:kWe,Y:AWe,Z:IWe,"%":nU},y={a:Lt,A:st,b:Hi,B:Cn,c:null,d:iU,e:iU,f:RWe,g:$We,G:qWe,H:TWe,I:NWe,j:MWe,L:kie,m:OWe,M:PWe,p:Hn,q:Ti,Q:sU,s:rU,S:FWe,u:BWe,U:VWe,V:WWe,w:zWe,W:HWe,x:null,X:null,y:UWe,Y:jWe,Z:GWe,"%":nU},x={a:T,A:N,b:$,B:U,c:ee,d:JH,e:JH,f:hWe,g:XH,G:QH,H:eU,I:eU,j:oWe,L:cWe,m:rWe,M:aWe,p:D,q:sWe,Q:dWe,s:fWe,S:lWe,u:JVe,U:eWe,V:tWe,w:XVe,W:iWe,x:he,X:fe,y:XH,Y:QH,Z:nWe,"%":uWe};w.x=L(t,w),w.X=L(n,w),w.c=L(e,w),y.x=L(t,y),y.X=L(n,y),y.c=L(e,y);function L(J,ye){return function(ce){var W=[],at=-1,Me=0,yt=J.length,mt,ii,Un;for(ce instanceof Date||(ce=new Date(+ce));++at<yt;)J.charCodeAt(at)===37&&(W.push(J.slice(Me,at)),(ii=YH[mt=J.charAt(++at)])!=null?mt=J.charAt(++at):ii=mt==="e"?" ":"0",(Un=ye[mt])&&(mt=Un(ce,ii)),W.push(mt),Me=at+1);return W.push(J.slice(Me,at)),W.join("")}}function S(J,ye){return function(ce){var W=I_(1900,void 0,1),at=k(W,J,ce+="",0),Me,yt;if(at!=ce.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ye&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(Me=KI(I_(W.y,0,1)),yt=Me.getUTCDay(),Me=yt>4||yt===0?rk.ceil(Me):rk(Me),Me=ev.offset(Me,(W.V-1)*7),W.y=Me.getUTCFullYear(),W.m=Me.getUTCMonth(),W.d=Me.getUTCDate()+(W.w+6)%7):(Me=GI(I_(W.y,0,1)),yt=Me.getDay(),Me=yt>4||yt===0?sk.ceil(Me):sk(Me),Me=Jb.offset(Me,(W.V-1)*7),W.y=Me.getFullYear(),W.m=Me.getMonth(),W.d=Me.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),yt="Z"in W?KI(I_(W.y,0,1)).getUTCDay():GI(I_(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(yt+5)%7:W.w+W.U*7-(yt+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,KI(W)):GI(W)}}function k(J,ye,ce,W){for(var at=0,Me=ye.length,yt=ce.length,mt,ii;at<Me;){if(W>=yt)return-1;if(mt=ye.charCodeAt(at++),mt===37){if(mt=ye.charAt(at++),ii=x[mt in YH?ye.charAt(at++):mt],!ii||(W=ii(J,ce,W))<0)return-1}else if(mt!=ce.charCodeAt(W++))return-1}return W}function D(J,ye,ce){var W=c.exec(ye.slice(ce));return W?(J.p=h.get(W[0].toLowerCase()),ce+W[0].length):-1}function T(J,ye,ce){var W=f.exec(ye.slice(ce));return W?(J.w=g.get(W[0].toLowerCase()),ce+W[0].length):-1}function N(J,ye,ce){var W=u.exec(ye.slice(ce));return W?(J.w=d.get(W[0].toLowerCase()),ce+W[0].length):-1}function $(J,ye,ce){var W=v.exec(ye.slice(ce));return W?(J.m=b.get(W[0].toLowerCase()),ce+W[0].length):-1}function U(J,ye,ce){var W=p.exec(ye.slice(ce));return W?(J.m=m.get(W[0].toLowerCase()),ce+W[0].length):-1}function ee(J,ye,ce){return k(J,e,ye,ce)}function he(J,ye,ce){return k(J,t,ye,ce)}function fe(J,ye,ce){return k(J,n,ye,ce)}function Ce(J){return o[J.getDay()]}function Se(J){return r[J.getDay()]}function me(J){return l[J.getMonth()]}function kt(J){return a[J.getMonth()]}function ze(J){return s[+(J.getHours()>=12)]}function Ge(J){return 1+~~(J.getMonth()/3)}function Lt(J){return o[J.getUTCDay()]}function st(J){return r[J.getUTCDay()]}function Hi(J){return l[J.getUTCMonth()]}function Cn(J){return a[J.getUTCMonth()]}function Hn(J){return s[+(J.getUTCHours()>=12)]}function Ti(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ye=L(J+="",w);return ye.toString=function(){return J},ye},parse:function(J){var ye=S(J+="",!1);return ye.toString=function(){return J},ye},utcFormat:function(J){var ye=L(J+="",y);return ye.toString=function(){return J},ye},utcParse:function(J){var ye=S(J+="",!0);return ye.toString=function(){return J},ye}}}var YH={"-":"",_:" ",0:"0"},ss=/^\s*\d+/,ZVe=/^%/,YVe=/[\\^$*+?|[\]().{}]/g;function Jt(i,e,t){var n=i<0?"-":"",s=(n?-i:i)+"",r=s.length;return n+(r<t?new Array(t-r+1).join(e)+s:s)}function QVe(i){return i.replace(YVe,"\\$&")}function T_(i){return new RegExp("^(?:"+i.map(QVe).join("|")+")","i")}function N_(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function XVe(i,e,t){var n=ss.exec(e.slice(t,t+1));return n?(i.w=+n[0],t+n[0].length):-1}function JVe(i,e,t){var n=ss.exec(e.slice(t,t+1));return n?(i.u=+n[0],t+n[0].length):-1}function eWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.U=+n[0],t+n[0].length):-1}function tWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.V=+n[0],t+n[0].length):-1}function iWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.W=+n[0],t+n[0].length):-1}function QH(i,e,t){var n=ss.exec(e.slice(t,t+4));return n?(i.y=+n[0],t+n[0].length):-1}function XH(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function nWe(i,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(i.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function sWe(i,e,t){var n=ss.exec(e.slice(t,t+1));return n?(i.q=n[0]*3-3,t+n[0].length):-1}function rWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.m=n[0]-1,t+n[0].length):-1}function JH(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.d=+n[0],t+n[0].length):-1}function oWe(i,e,t){var n=ss.exec(e.slice(t,t+3));return n?(i.m=0,i.d=+n[0],t+n[0].length):-1}function eU(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.H=+n[0],t+n[0].length):-1}function aWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.M=+n[0],t+n[0].length):-1}function lWe(i,e,t){var n=ss.exec(e.slice(t,t+2));return n?(i.S=+n[0],t+n[0].length):-1}function cWe(i,e,t){var n=ss.exec(e.slice(t,t+3));return n?(i.L=+n[0],t+n[0].length):-1}function hWe(i,e,t){var n=ss.exec(e.slice(t,t+6));return n?(i.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function uWe(i,e,t){var n=ZVe.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function dWe(i,e,t){var n=ss.exec(e.slice(t));return n?(i.Q=+n[0],t+n[0].length):-1}function fWe(i,e,t){var n=ss.exec(e.slice(t));return n?(i.s=+n[0],t+n[0].length):-1}function tU(i,e){return Jt(i.getDate(),e,2)}function gWe(i,e){return Jt(i.getHours(),e,2)}function pWe(i,e){return Jt(i.getHours()%12||12,e,2)}function mWe(i,e){return Jt(1+Jb.count(l0(i),i),e,3)}function xie(i,e){return Jt(i.getMilliseconds(),e,3)}function _We(i,e){return xie(i,e)+"000"}function bWe(i,e){return Jt(i.getMonth()+1,e,2)}function vWe(i,e){return Jt(i.getMinutes(),e,2)}function wWe(i,e){return Jt(i.getSeconds(),e,2)}function yWe(i){var e=i.getDay();return e===0?7:e}function CWe(i,e){return Jt(NF.count(l0(i)-1,i),e,2)}function Die(i){var e=i.getDay();return e>=4||e===0?a0(i):a0.ceil(i)}function SWe(i,e){return i=Die(i),Jt(a0.count(l0(i),i)+(l0(i).getDay()===4),e,2)}function xWe(i){return i.getDay()}function DWe(i,e){return Jt(sk.count(l0(i)-1,i),e,2)}function kWe(i,e){return Jt(i.getFullYear()%100,e,2)}function LWe(i,e){return i=Die(i),Jt(i.getFullYear()%100,e,2)}function AWe(i,e){return Jt(i.getFullYear()%1e4,e,4)}function EWe(i,e){var t=i.getDay();return i=t>=4||t===0?a0(i):a0.ceil(i),Jt(i.getFullYear()%1e4,e,4)}function IWe(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jt(e/60|0,"0",2)+Jt(e%60,"0",2)}function iU(i,e){return Jt(i.getUTCDate(),e,2)}function TWe(i,e){return Jt(i.getUTCHours(),e,2)}function NWe(i,e){return Jt(i.getUTCHours()%12||12,e,2)}function MWe(i,e){return Jt(1+ev.count(h0(i),i),e,3)}function kie(i,e){return Jt(i.getUTCMilliseconds(),e,3)}function RWe(i,e){return kie(i,e)+"000"}function OWe(i,e){return Jt(i.getUTCMonth()+1,e,2)}function PWe(i,e){return Jt(i.getUTCMinutes(),e,2)}function FWe(i,e){return Jt(i.getUTCSeconds(),e,2)}function BWe(i){var e=i.getUTCDay();return e===0?7:e}function VWe(i,e){return Jt(RF.count(h0(i)-1,i),e,2)}function Lie(i){var e=i.getUTCDay();return e>=4||e===0?c0(i):c0.ceil(i)}function WWe(i,e){return i=Lie(i),Jt(c0.count(h0(i),i)+(h0(i).getUTCDay()===4),e,2)}function zWe(i){return i.getUTCDay()}function HWe(i,e){return Jt(rk.count(h0(i)-1,i),e,2)}function UWe(i,e){return Jt(i.getUTCFullYear()%100,e,2)}function $We(i,e){return i=Lie(i),Jt(i.getUTCFullYear()%100,e,2)}function jWe(i,e){return Jt(i.getUTCFullYear()%1e4,e,4)}function qWe(i,e){var t=i.getUTCDay();return i=t>=4||t===0?c0(i):c0.ceil(i),Jt(i.getUTCFullYear()%1e4,e,4)}function GWe(){return"+0000"}function nU(){return"%"}function sU(i){return+i}function rU(i){return Math.floor(+i/1e3)}var np,Aie,Eie,Iie,Tie;KWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function KWe(i){return np=Sie(i),Aie=np.format,Eie=np.parse,Iie=np.utcFormat,Tie=np.utcParse,np}function tb(i){const e={};return t=>e[t]||(e[t]=i(t))}function ZWe(i,e){return t=>{const n=i(t),s=n.indexOf(e);if(s<0)return n;let r=YWe(n,s);const o=r<n.length?n.slice(r):"";for(;--r>s;)if(n[r]!=="0"){++r;break}return n.slice(0,r)+o}}function YWe(i,e){let t=i.lastIndexOf("e"),n;if(t>0)return t;for(t=i.length;--t>e;)if(n=i.charCodeAt(t),n>=48&&n<=57)return t+1}function QWe(i){const e=tb(i.format),t=i.formatPrefix;return{format:e,formatPrefix:t,formatFloat(n){const s=W1(n||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return ZWe(e(s),e(".1f")(1)[1])}else return e(s)},formatSpan(n,s,r,o){o=W1(o??",f");const a=wVe(n,s,r),l=Math.max(Math.abs(n),Math.abs(s));let c;if(o.precision==null)switch(o.type){case"s":return isNaN(c=IVe(a,l))||(o.precision=c),t(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=TVe(a,l))||(o.precision=c-(o.type==="e"));break}case"f":case"%":{isNaN(c=EVe(a))||(o.precision=c-(o.type==="%")*2);break}}return e(o)}}}XWe();function XWe(){return QWe({format:cie,formatPrefix:hie})}function oU(i,e,t){t=t||{},EF(t)||hf("Invalid time multi-format specifier: ".concat(t));const n=e(Y1),s=e(Z1),r=e(K1),o=e(G1),a=e(q1),l=e(j1),c=e($1),h=e(U1),u=i(t[L2]||".%L"),d=i(t[Y1]||":%S"),f=i(t[Z1]||"%I:%M"),g=i(t[K1]||"%I %p"),p=i(t[G1]||t[k2]||"%a %d"),m=i(t[q1]||"%b %d"),v=i(t[j1]||"%B"),b=i(t[$1]||"%B"),w=i(t[U1]||"%Y");return y=>(n(y)<y?u:s(y)<y?d:r(y)<y?f:o(y)<y?g:l(y)<y?a(y)<y?p:m:h(y)<y?c(y)<y?v:b:w)(y)}function Nie(i){const e=tb(i.format),t=tb(i.utcFormat);return{timeFormat:n=>rR(n)?e(n):oU(e,GVe,n),utcFormat:n=>rR(n)?t(n):oU(t,KVe,n),timeParse:tb(i.parse),utcParse:tb(i.utcParse)}}let oR;JWe();function JWe(){return oR=Nie({format:Aie,parse:Eie,utcFormat:Iie,utcParse:Tie})}function eze(i){return Nie(Sie(i))}function tze(i){return arguments.length?oR=eze(i):oR}const ize=i=>i!=null&&i===i,nze=i=>i==="true"||i==="false"||i===!0||i===!1,sze=i=>!Number.isNaN(Date.parse(i)),Mie=i=>!Number.isNaN(+i)&&!(i instanceof Date),rze=i=>Mie(i)&&Number.isInteger(+i),aU={boolean:tVe,integer:VH,number:VH,date:nVe,string:sVe,unknown:tie},EC=[nze,rze,Mie,sze],oze=["boolean","integer","number","date"];function aze(i,e){if(!i||!i.length)return"unknown";const t=i.length,n=EC.length,s=EC.map((r,o)=>o+1);for(let r=0,o=0,a,l;r<t;++r)for(l=e?i[r][e]:i[r],a=0;a<n;++a)if(s[a]&&ize(l)&&!EC[a](l)&&(s[a]=0,++o,o===EC.length))return"string";return oze[s.reduce((r,o)=>r===0?o:r,0)-1]}function lze(i,e){return e.reduce((t,n)=>(t[n]=aze(i,n),t),{})}function lU(i){const e=function(t,n){const s={delimiter:i};return FF(t,n?Y7e(n,s):s)};return e.responseType="text",e}function FF(i,e){return e.header&&(i=e.header.map(rie).join(e.delimiter)+`
`+i),lVe(e.delimiter).parse(i+"")}FF.responseType="text";function cze(i){return typeof Buffer=="function"&&nie(Buffer.isBuffer)?Buffer.isBuffer(i):!1}function BF(i,e){const t=e&&e.property?eie(e.property):tie;return EF(i)&&!cze(i)?hze(t(i),e):t(JSON.parse(i))}BF.responseType="json";function hze(i,e){return!iie(i)&&J7e(i)&&(i=[...i]),e&&e.copy?JSON.parse(JSON.stringify(i)):i}const uze={interior:(i,e)=>i!==e,exterior:(i,e)=>i===e};function Rie(i,e){let t,n,s,r;return i=BF(i,e),e&&e.feature?(t=dVe,s=e.feature):e&&e.mesh?(t=gVe,s=e.mesh,r=uze[e.filter]):hf("Missing TopoJSON feature or mesh parameter."),n=(n=i.objects[s])?t(i,n,r):hf("Invalid TopoJSON object: "+s),n&&n.features||[n]}Rie.responseType="json";const ZI={dsv:FF,csv:lU(","),tsv:lU("	"),json:BF,topojson:Rie};function dze(i,e){return arguments.length>1?(ZI[i]=e,this):sie(ZI,i)?ZI[i]:null}function fze(i,e,t,n){e=e||{};const s=dze(e.type||"json");return s||hf("Unknown data format type: "+e.type),i=s(i,e),e.parse&&gze(i,e.parse,t,n),sie(i,"columns")&&delete i.columns,i}function gze(i,e,t,n){if(!i.length)return;const s=tze();t=t||s.timeParse,n=n||s.utcParse;let r=i.columns||Object.keys(i[0]),o,a,l,c,h,u;e==="auto"&&(e=lze(i,r)),r=Object.keys(e);const d=r.map(f=>{const g=e[f];let p,m;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return p=g.split(/:(.+)?/,2),m=p[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(p[0]==="utc"?n:t)(m);if(!aU[g])throw Error("Illegal format pattern: "+f+":"+g);return aU[g]});for(l=0,h=i.length,u=r.length;l<h;++l)for(o=i[l],c=0;c<u;++c)a=r[c],o[a]=d[c](o[a])}var Sc;class Oie extends Np{constructor(){super();$F(this,Sc,void 0);Q0(this,"files");this.missingFiles=new Set}createRenderRoot(){return this}render(){return js`
            <ul class="tabs">
                ${Object.keys(this.files).map(t=>js`
                            <li
                                data-name=${t}
                                class=${t==X0(this,Sc)?"selected":""}
                            >
                                <a
                                    href="#"
                                    @click=${n=>this._changeTab(n)}
                                    >${t}</a
                                >
                            </li>
                        `)}
                <li class=${X0(this,Sc)===void 0?"selected":""}>
                    <a
                        href="#"
                        @click=${t=>this._changeTab(t)}
                        >Add new files</a
                    >
                </li>
                <li style="flex-grow: 1"></li>
            </ul>

            <div class="tab-pages">
                ${Object.keys(this.files).map(t=>js`
                        <div
                            class=${t==X0(this,Sc)?"selected":""}
                        >
                            ${mze(this.files[t].data)}
                        </div>
                    `)}

                <div class=${X0(this,Sc)===void 0?"selected":""}>
                    ${this.missingFiles.size?js`<div class="missing-files">
                              <p>Please add the following files:</p>
                              <ul>
                                  ${j7e(this.missingFiles,t=>js`<li>${t}</li>`)}
                              </ul>
                          </div>`:hn}
                    ${pze(t=>this._handleFiles(t))}
                </div>
            </div>
        `}async _handleFiles(t){const s=t.target.files;for(const r of s){const o=await _ze(r),a=fze(o,{type:bze(o,r.name),parse:"auto"});this.files[r.name]={metadata:r,data:a},A2(this,Sc,r.name)}this.requestUpdate(),this.dispatchEvent(new CustomEvent("upload",{detail:{}}))}_changeTab(t){const s=t.target.parentElement.dataset.name;A2(this,Sc,s),t.preventDefault(),this.requestUpdate()}}Sc=new WeakMap,Q0(Oie,"properties",{missingFiles:{type:Set,attribute:!1}});customElements.define("file-pane",Oie);function pze(i){return js` <form class="upload-form">
        <input
            type="file"
            multiple
            accept=".csv,.tsv,.txt,.json"
            id="fileInput"
            @change=${i}
            style="display:none"
        />
        <div id="upload-button-wrapper">
            <button
                class="btn"
                @click=${e=>{document.getElementById("fileInput").click(),e.preventDefault(),e.stopPropagation()}}
            >
                Choose files
            </button>
        </div>

        <p>
            The added file becomes a named datasource, which can be accessed as
            follows:
        </p>

        <pre>
"data": {
    "name": "filename.csv"
}
</pre
        >

        <p>
            N.B. All data processing takes place in your web browser. Nothing is
            uploaded anywhere.
        </p>
    </form>`}function mze(i){const e=Object.keys(i[0]),t=i.slice(0,30),n=e.map(a=>"text-align: "+(typeof i[0][a]=="number"?"right":"left")),s=a=>js`
        <tr>
            ${e.map((l,c)=>js`<td style=${n[c]}>${a[l]}</td> `)}
        </tr>
    `,r=()=>js`
        <tr>
            ${e.map((a,l)=>js`<td style=${n[l]}>...</td> `)}
        </tr>
    `;return js`
        <table class="data-sample-table">
            <thead>
                ${(()=>js`
        <tr>
            ${e.map((a,l)=>js`<th style=${n[l]}>${a}</th> `)}
        </tr>
    `)()}
            </thead>
            <tbody>
                ${t.map(s)}
                ${t.length<i.length?r():""}
            </tbody>
        </table>
    `}function _ze(i){return new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(i)})}function bze(i,e){return/\.json$/.test(e)?"json":i.indexOf("	")>=0?"tsv":"csv"}function Pie(i){if(typeof i=="object"&&i!==null){i.description&&(i.markdownDescription=i.description);for(const e in i)i.hasOwnProperty(e)&&(i[e]=Pie(i[e]))}return i}yze();const Fie="playgroundSpec",Bie=_U(),Vie=_U(),Wie={};let VF=new Set,YI,vze=window.localStorage.getItem(Fie)||fCe,cU="";const PS=["stacked","parallel","full"];let aR=PS[0];function wze(){aR=PS[(PS.indexOf(aR)+1)%PS.length],zF(),window.dispatchEvent(new Event("resize"))}function yze(){Pie(Lz),a2.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"http://myserver/foo-schema.json",fileMatch:["*"],schema:Lz}]})}function Cze(i){let e=Wie[i];return e||VF.add(i),e==null?void 0:e.data}async function WF(i=!1){var t;VF=new Set;const e=(t=Vie.value)==null?void 0:t.value;window.localStorage.setItem(Fie,e);try{const n=JSON.parse(e),s=JSON.stringify(n);if(s===cU&&!i)return;cU=s,YI&&YI.finalize(),YI=await cCe(Bie.value,n,{namedDataProvider:Cze}),zF()}catch(n){console.log(n)}}const Sze=()=>js`
    <div class="toolbar">
        <img
            title="GenomeSpy"
            alt="GenomeSpy"
            src="${lCe}"
            class="genome-spy-icon"
        />
        <span class="title">
            <span>GenomeSpy Playground</span>
        </span>
        <button @click=${wze}>
            ${AB(Qse).node[0]}
            <span>Toggle layout</span>
        </button>
        <span class="spacer"></span>
        <a
            class="version"
            href="https://github.com/genome-spy/genome-spy/releases/tag/v${Az.version}"
            >v${Az.version}</a
        >
        <a href="https://genomespy.app/docs/" target="_blank"
            >${AB(Zse).node[0]} <span>Docs</span></a
        >
    </div>
`,xze=dCe(()=>WF(),500,!1),Dze=()=>js`
    <section id="playground-layout" class="${aR}">
        ${Sze()}
        <section id="editor-pane">
            <code-editor
                ${nB(Vie)}
                @change=${xze}
                .value=${vze}
            ></code-editor>
        </section>
        <section id="genome-spy-pane">
            <div ${nB(Bie)}></div>
        </section>
        <section id="file-pane">
            <file-pane
                @upload=${WF}
                .files=${Wie}
                .missingFiles=${VF}
            ></file-pane>
        </section>
    </section>
`;function zF(){pU(Dze(),document.body)}zF();WF();export{AHe as M,LHe as R,tPe as e,a2 as l};
